const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ry7oUA7o.js","assets/is-plan-event-enabled-BOQ7uLi3.js","assets/index-CWGLcNrK.js"])))=>i.map(i=>d[i]);
(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"dev-web@6.0.877"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="d99e7dcb-a425-4d2a-b3db-14c3d4502b5f",t._sentryDebugIdIdentifier="sentry-dbid-d99e7dcb-a425-4d2a-b3db-14c3d4502b5f")})()}catch{}function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function m(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,x={};function b(z,ae,ce){this.props=z,this.context=ae,this.refs=x,this.updater=ce||g}b.prototype.isReactComponent={},b.prototype.setState=function(z,ae){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ae,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function S(){}S.prototype=b.prototype;function C(z,ae,ce){this.props=z,this.context=ae,this.refs=x,this.updater=ce||g}var T=C.prototype=new S;T.constructor=C,E(T,b.prototype),T.isPureReactComponent=!0;var I=Array.isArray,D=Object.prototype.hasOwnProperty,P={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function B(z,ae,ce){var he,fe={},Ce=null,Me=null;if(ae!=null)for(he in ae.ref!==void 0&&(Me=ae.ref),ae.key!==void 0&&(Ce=""+ae.key),ae)D.call(ae,he)&&!O.hasOwnProperty(he)&&(fe[he]=ae[he]);var Ye=arguments.length-2;if(Ye===1)fe.children=ce;else if(1<Ye){for(var We=Array(Ye),Be=0;Be<Ye;Be++)We[Be]=arguments[Be+2];fe.children=We}if(z&&z.defaultProps)for(he in Ye=z.defaultProps,Ye)fe[he]===void 0&&(fe[he]=Ye[he]);return{$$typeof:t,type:z,key:Ce,ref:Me,props:fe,_owner:P.current}}function F(z,ae){return{$$typeof:t,type:z.type,key:ae,ref:z.ref,props:z.props,_owner:z._owner}}function H(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function Q(z){var ae={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ce){return ae[ce]})}var Z=/\/+/g;function ne(z,ae){return typeof z=="object"&&z!==null&&z.key!=null?Q(""+z.key):ae.toString(36)}function re(z,ae,ce,he,fe){var Ce=typeof z;(Ce==="undefined"||Ce==="boolean")&&(z=null);var Me=!1;if(z===null)Me=!0;else switch(Ce){case"string":case"number":Me=!0;break;case"object":switch(z.$$typeof){case t:case e:Me=!0}}if(Me)return Me=z,fe=fe(Me),z=he===""?"."+ne(Me,0):he,I(fe)?(ce="",z!=null&&(ce=z.replace(Z,"$&/")+"/"),re(fe,ae,ce,"",function(Be){return Be})):fe!=null&&(H(fe)&&(fe=F(fe,ce+(!fe.key||Me&&Me.key===fe.key?"":(""+fe.key).replace(Z,"$&/")+"/")+z)),ae.push(fe)),1;if(Me=0,he=he===""?".":he+":",I(z))for(var Ye=0;Ye<z.length;Ye++){Ce=z[Ye];var We=he+ne(Ce,Ye);Me+=re(Ce,ae,ce,We,fe)}else if(We=m(z),typeof We=="function")for(z=We.call(z),Ye=0;!(Ce=z.next()).done;)Ce=Ce.value,We=he+ne(Ce,Ye++),Me+=re(Ce,ae,ce,We,fe);else if(Ce==="object")throw ae=String(z),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return Me}function se(z,ae,ce){if(z==null)return z;var he=[],fe=0;return re(z,he,"","",function(Ce){return ae.call(ce,Ce,fe++)}),he}function G(z){if(z._status===-1){var ae=z._result;ae=ae(),ae.then(function(ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=ce)},function(ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=ce)}),z._status===-1&&(z._status=0,z._result=ae)}if(z._status===1)return z._result.default;throw z._result}var K={current:null},M={transition:null},W={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:M,ReactCurrentOwner:P};function ee(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:se,forEach:function(z,ae,ce){se(z,function(){ae.apply(this,arguments)},ce)},count:function(z){var ae=0;return se(z,function(){ae++}),ae},toArray:function(z){return se(z,function(ae){return ae})||[]},only:function(z){if(!H(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},react_production_min.Component=b,react_production_min.Fragment=n,react_production_min.Profiler=i,react_production_min.PureComponent=C,react_production_min.StrictMode=s,react_production_min.Suspense=u,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,react_production_min.act=ee,react_production_min.cloneElement=function(z,ae,ce){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var he=E({},z.props),fe=z.key,Ce=z.ref,Me=z._owner;if(ae!=null){if(ae.ref!==void 0&&(Ce=ae.ref,Me=P.current),ae.key!==void 0&&(fe=""+ae.key),z.type&&z.type.defaultProps)var Ye=z.type.defaultProps;for(We in ae)D.call(ae,We)&&!O.hasOwnProperty(We)&&(he[We]=ae[We]===void 0&&Ye!==void 0?Ye[We]:ae[We])}var We=arguments.length-2;if(We===1)he.children=ce;else if(1<We){Ye=Array(We);for(var Be=0;Be<We;Be++)Ye[Be]=arguments[Be+2];he.children=Ye}return{$$typeof:t,type:z.type,key:fe,ref:Ce,props:he,_owner:Me}},react_production_min.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},react_production_min.createElement=B,react_production_min.createFactory=function(z){var ae=B.bind(null,z);return ae.type=z,ae},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(z){return{$$typeof:l,render:z}},react_production_min.isValidElement=H,react_production_min.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:G}},react_production_min.memo=function(z,ae){return{$$typeof:c,type:z,compare:ae===void 0?null:ae}},react_production_min.startTransition=function(z){var ae=M.transition;M.transition={};try{z()}finally{M.transition=ae}},react_production_min.unstable_act=ee,react_production_min.useCallback=function(z,ae){return K.current.useCallback(z,ae)},react_production_min.useContext=function(z){return K.current.useContext(z)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(z){return K.current.useDeferredValue(z)},react_production_min.useEffect=function(z,ae){return K.current.useEffect(z,ae)},react_production_min.useId=function(){return K.current.useId()},react_production_min.useImperativeHandle=function(z,ae,ce){return K.current.useImperativeHandle(z,ae,ce)},react_production_min.useInsertionEffect=function(z,ae){return K.current.useInsertionEffect(z,ae)},react_production_min.useLayoutEffect=function(z,ae){return K.current.useLayoutEffect(z,ae)},react_production_min.useMemo=function(z,ae){return K.current.useMemo(z,ae)},react_production_min.useReducer=function(z,ae,ce){return K.current.useReducer(z,ae,ce)},react_production_min.useRef=function(z){return K.current.useRef(z)},react_production_min.useState=function(z){return K.current.useState(z)},react_production_min.useSyncExternalStore=function(z,ae,ce){return K.current.useSyncExternalStore(z,ae,ce)},react_production_min.useTransition=function(){return K.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,c){var d,p={},m=null,g=null;c!==void 0&&(m=""+c),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(g=u.ref);for(d in u)s.call(u,d)&&!a.hasOwnProperty(d)&&(p[d]=u[d]);if(l&&l.defaultProps)for(d in u=l.defaultProps,u)p[d]===void 0&&(p[d]=u[d]);return{$$typeof:e,type:l,key:m,ref:g,props:p,_owner:i.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=o,reactJsxRuntime_production_min.jsxs=o,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},TimeoutManager=class{#e=defaultTimeoutProvider;#r=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(t){setTimeout(t,0)}var isServer$2=typeof window>"u"||"Deno"in globalThis;function noop$7(){}function functionalUpdate(t,e){return typeof t=="function"?t(e):t}function isValidTimeout(t){return typeof t=="number"&&t>=0&&t!==1/0}function timeUntilStale(t,e){return Math.max(t+(e||0)-Date.now(),0)}function resolveStaleTime(t,e){return typeof t=="function"?t(e):t}function resolveEnabled(t,e){return typeof t=="function"?t(e):t}function matchQuery(t,e){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=t;if(o){if(s){if(e.queryHash!==hashQueryKeyByOptions(o,e.options))return!1}else if(!partialMatchKey(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||a&&!a(e))}function matchMutation(t,e){const{exact:n,status:s,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(hashKey(e.options.mutationKey)!==hashKey(a))return!1}else if(!partialMatchKey(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function hashQueryKeyByOptions(t,e){return(e?.queryKeyHashFn||hashKey)(t)}function hashKey(t){return JSON.stringify(t,(e,n)=>isPlainObject$5(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function partialMatchKey(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>partialMatchKey(t[n],e[n])):!1}var hasOwn=Object.prototype.hasOwnProperty;function replaceEqualDeep(t,e){if(t===e)return t;const n=isPlainArray(t)&&isPlainArray(e);if(!n&&!(isPlainObject$5(t)&&isPlainObject$5(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),o=a.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const d=n?c:a[c],p=t[d],m=e[d];if(p===m){l[d]=p,(n?c<i:hasOwn.call(t,d))&&u++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){l[d]=m;continue}const g=replaceEqualDeep(p,m);l[d]=g,g===p&&u++}return i===o&&u===i?t:l}function shallowEqualObjects(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function isPlainArray(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function isPlainObject$5(t){if(!hasObjectPrototype(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hasObjectPrototype(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hasObjectPrototype(t){return Object.prototype.toString.call(t)==="[object Object]"}function sleep$1(t){return new Promise(e=>{timeoutManager.setTimeout(e,t)})}function replaceData(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?replaceEqualDeep(t,e):e}function addToEnd(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function addToStart(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var skipToken=Symbol();function ensureQueryFn(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function shouldThrowError(t,e){return typeof t=="function"?t(...e):!!t}var FocusManager=class extends Subscribable{#e;#r;#t;constructor(){super(),this.#t=t=>{if(!isServer$2&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#r||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#r?.(),this.#r=void 0)}setEventListener(t){this.#t=t,this.#r?.(),this.#r=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),t(i)},n.reject=i=>{s({status:"rejected",reason:i}),e(i)},n}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let t=[],e=0,n=l=>{l()},s=l=>{l()},i=defaultScheduler;const a=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{s(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{a(()=>{l(...u)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#r;#t;constructor(){super(),this.#t=t=>{if(!isServer$2&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#r||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#r?.(),this.#r=void 0)}setEventListener(t){this.#t=t,this.#r?.(),this.#r=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(t){return Math.min(1e3*2**t,3e4)}function canFetch(t){return(t??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function createRetryer(t){let e=!1,n=0,s;const i=pendingThenable(),a=()=>i.status!=="pending",o=x=>{if(!a()){const b=new CancelledError(x);m(b),t.onCancel?.(b)}},l=()=>{e=!0},u=()=>{e=!1},c=()=>focusManager.isFocused()&&(t.networkMode==="always"||onlineManager.isOnline())&&t.canRun(),d=()=>canFetch(t.networkMode)&&t.canRun(),p=x=>{a()||(s?.(),i.resolve(x))},m=x=>{a()||(s?.(),i.reject(x))},g=()=>new Promise(x=>{s=b=>{(a()||c())&&x(b)},t.onPause?.()}).then(()=>{s=void 0,a()||t.onContinue?.()}),E=()=>{if(a())return;let x;const b=n===0?t.initialPromise:void 0;try{x=b??t.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(p).catch(S=>{if(a())return;const C=t.retry??(isServer$2?0:3),T=t.retryDelay??defaultRetryDelay,I=typeof T=="function"?T(n,S):T,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,S);if(e||!D){m(S);return}n++,t.onFail?.(n,S),sleep$1(I).then(()=>c()?void 0:g()).then(()=>{e?m(S):E()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(s?.(),i),cancelRetry:l,continueRetry:u,canStart:d,start:()=>(d()?E():g().then(E),i)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(isServer$2?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#r;#t;#s;#n;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#t=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=getDefaultState$1(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=getDefaultState$1(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(t,e){const n=replaceData(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(noop$7).catch(noop$7):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>resolveEnabled(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>resolveStaleTime(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,s=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const l=ensureQueryFn(this.options,e),c=(()=>{const d={client:this.#s,queryKey:this.queryKey,meta:this.meta};return s(d),d})();return this.#o=!1,this.options.persister?this.options.persister(l,c,this):l(c)},o=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return s(l),l})();this.options.behavior?.onFetch(o,this),this.#r=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=createRetryer({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof CancelledError&&l.revert&&this.setState({...this.#r,fetchStatus:"idle"}),n.abort()},onFail:(l,u)=>{this.#i({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#t.config.onSuccess?.(l,this),this.#t.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof CancelledError){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#i({type:"error",error:l}),this.#t.config.onError?.(l,this),this.#t.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...fetchState(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#r=t.manual?s:void 0,s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),notifyManager.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:t})})}};function fetchState(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function infiniteQueryBehavior(t){return{onFetch:(e,n)=>{const s=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let d=!1;const p=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},m=ensureQueryFn(e.options,e.fetchOptions),g=async(E,x,b)=>{if(d)return Promise.reject();if(x==null&&E.pages.length)return Promise.resolve(E);const C=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:x,direction:b?"backward":"forward",meta:e.options.meta};return p(P),P})(),T=await m(C),{maxPages:I}=e.options,D=b?addToStart:addToEnd;return{pages:D(E.pages,T,I),pageParams:D(E.pageParams,x,I)}};if(i&&a.length){const E=i==="backward",x=E?getPreviousPageParam:getNextPageParam,b={pages:a,pageParams:o},S=x(s,b);l=await g(b,S,E)}else{const E=t??a.length;do{const x=u===0?o[0]??s.initialPageParam:getNextPageParam(s,l);if(u>0&&x==null)break;l=await g(l,x),u++}while(u<E)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=c}}}function getNextPageParam(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function getPreviousPageParam(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var Mutation=class extends Removable{#e;#r;#t;#s;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#r=[],this.state=t.state||getDefaultState(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#r.includes(t)||(this.#r.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#r=this.#r.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#r.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#n({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",i=!this.#s.canStart();try{if(s)e();else{this.#n({type:"pending",variables:t,isPaused:i}),await this.#t.config.onMutate?.(t,this,n);const o=await this.options.onMutate?.(t,n);o!==this.state.context&&this.#n({type:"pending",context:o,variables:t,isPaused:i})}const a=await this.#s.start();return await this.#t.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,t,this.state.context,this,n),await this.options.onError?.(a,t,this.state.context,n),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,a,t,this.state.context,n),a}finally{this.#n({type:"error",error:a})}}finally{this.#t.runNext(this)}}#n(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),notifyManager.batch(()=>{this.#r.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#r=new Map,this.#t=0}#e;#r;#t;build(t,e,n){const s=new Mutation({client:t,mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(s),s}add(t){this.#e.add(t);const e=scopeFor(t);if(typeof e=="string"){const n=this.#r.get(e);n?n.push(t):this.#r.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=scopeFor(t);if(typeof e=="string"){const n=this.#r.get(e);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&this.#r.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=scopeFor(t);if(typeof e=="string"){const s=this.#r.get(e)?.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){const e=scopeFor(t);return typeof e=="string"?this.#r.get(e)?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#r.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>matchMutation(e,n))}findAll(t={}){return this.getAll().filter(e=>matchMutation(t,e))}notify(t){notifyManager.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return notifyManager.batch(()=>Promise.all(t.map(e=>e.continue().catch(noop$7))))}};function scopeFor(t){return t.options.scope?.id}var MutationObserver$1=class extends Subscribable{#e;#r=void 0;#t;#s;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),shallowEqualObjects(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),n?.mutationKey&&this.options.mutationKey&&hashKey(n.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#a(e)}getCurrentResult(){return this.#r}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#n(),this.#a()}mutate(e,n){return this.#s=n,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(e)}#n(){const e=this.#t?.state??getDefaultState();this.#r={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){const n=this.#r.variables,s=this.#r.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,n,s,i),this.#s.onSettled?.(e.data,null,n,s,i)):e?.type==="error"&&(this.#s.onError?.(e.error,n,s,i),this.#s.onSettled?.(void 0,e.error,n,s,i))}this.listeners.forEach(n=>{n(this.#r)})})}},QueryCache=class extends Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const s=e.queryKey,i=e.queryHash??hashQueryKeyByOptions(s,e);let a=this.get(i);return a||(a=new Query({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>matchQuery(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>matchQuery(t,n)):e}notify(t){notifyManager.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},QueryClient=class{#e;#r;#t;#s;#n;#a;#o;#i;constructor(t={}){this.#e=t.queryCache||new QueryCache,this.#r=t.mutationCache||new MutationCache,this.#t=t.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=focusManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=onlineManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#r.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(resolveStaleTime(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(s.queryHash)?.state.data,o=functionalUpdate(e,a);if(o!==void 0)return this.#e.build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return notifyManager.batch(()=>this.#e.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;notifyManager.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return notifyManager.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=notifyManager.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(s).then(noop$7).catch(noop$7)}invalidateQueries(t,e={}){return notifyManager.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=notifyManager.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(noop$7)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(noop$7)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(resolveStaleTime(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(noop$7).catch(noop$7)}fetchInfiniteQuery(t){return t.behavior=infiniteQueryBehavior(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(noop$7).catch(noop$7)}ensureInfiniteQueryData(t){return t.behavior=infiniteQueryBehavior(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return onlineManager.isOnline()?this.#r.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#r}getDefaultOptions(){return this.#t}setDefaultOptions(t){this.#t=t}setQueryDefaults(t,e){this.#s.set(hashKey(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(s=>{partialMatchKey(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){this.#n.set(hashKey(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],n={};return e.forEach(s=>{partialMatchKey(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#t.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#t.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#r.clear()}},reactExports=requireReact();const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);var QueryClientContext=reactExports.createContext(void 0),useQueryClient=t=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:t,children:e})=>(reactExports.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:t,children:e}));function useMutation(t,e){const n=useQueryClient(),[s]=reactExports.useState(()=>new MutationObserver$1(n,t));reactExports.useEffect(()=>{s.setOptions(t)},[s,t]);const i=reactExports.useSyncExternalStore(reactExports.useCallback(o=>s.subscribe(notifyManager.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=reactExports.useCallback((o,l)=>{s.mutate(o,l).catch(noop$7)},[s]);if(i.error&&shouldThrowError(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen$1={},__vitePreload=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=o(n.map(c=>{if(c=assetsURL(c),c in seen$1)return;seen$1[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":scriptRel,d||(m.as="script"),m.crossOrigin="",m.href=c,u&&m.setAttribute("nonce",u),document.head.appendChild(m),d)return new Promise((g,E)=>{m.addEventListener("load",g),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};var ReactQueryDevtools2=function(){return null},client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(t){function e(M,W){var ee=M.length;M.push(W);e:for(;0<ee;){var z=ee-1>>>1,ae=M[z];if(0<i(ae,W))M[z]=W,M[ee]=ae,ee=z;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var W=M[0],ee=M.pop();if(ee!==W){M[0]=ee;e:for(var z=0,ae=M.length,ce=ae>>>1;z<ce;){var he=2*(z+1)-1,fe=M[he],Ce=he+1,Me=M[Ce];if(0>i(fe,ee))Ce<ae&&0>i(Me,fe)?(M[z]=Me,M[Ce]=ee,z=Ce):(M[z]=fe,M[he]=ee,z=he);else if(Ce<ae&&0>i(Me,ee))M[z]=Me,M[Ce]=ee,z=Ce;else break e}}return W}function i(M,W){var ee=M.sortIndex-W.sortIndex;return ee!==0?ee:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,p=null,m=3,g=!1,E=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(M){for(var W=n(c);W!==null;){if(W.callback===null)s(c);else if(W.startTime<=M)s(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(c)}}function I(M){if(x=!1,T(M),!E)if(n(u)!==null)E=!0,G(D);else{var W=n(c);W!==null&&K(I,W.startTime-M)}}function D(M,W){E=!1,x&&(x=!1,S(B),B=-1),g=!0;var ee=m;try{for(T(W),p=n(u);p!==null&&(!(p.expirationTime>W)||M&&!Q());){var z=p.callback;if(typeof z=="function"){p.callback=null,m=p.priorityLevel;var ae=z(p.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(u)&&s(u),T(W)}else s(u);p=n(u)}if(p!==null)var ce=!0;else{var he=n(c);he!==null&&K(I,he.startTime-W),ce=!1}return ce}finally{p=null,m=ee,g=!1}}var P=!1,O=null,B=-1,F=5,H=-1;function Q(){return!(t.unstable_now()-H<F)}function Z(){if(O!==null){var M=t.unstable_now();H=M;var W=!0;try{W=O(!0,M)}finally{W?ne():(P=!1,O=null)}}else P=!1}var ne;if(typeof C=="function")ne=function(){C(Z)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,se=re.port2;re.port1.onmessage=Z,ne=function(){se.postMessage(null)}}else ne=function(){b(Z,0)};function G(M){O=M,P||(P=!0,ne())}function K(M,W){B=b(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){E||g||(E=!0,G(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var ee=m;m=W;try{return M()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ee=m;m=M;try{return W()}finally{m=ee}},t.unstable_scheduleCallback=function(M,W,ee){var z=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?z+ee:z):ee=z,M){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,M={id:d++,callback:W,priorityLevel:M,startTime:ee,expirationTime:ae,sortIndex:-1},ee>z?(M.sortIndex=ee,e(c,M),n(u)===null&&M===n(c)&&(x?(S(B),B=-1):x=!0,K(I,ee-z))):(M.sortIndex=ae,e(u,M),E||g||(E=!0,G(D))),M},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(M){var W=m;return function(){var ee=m;m=W;try{return M.apply(this,arguments)}finally{m=ee}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function n(f){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+f,A=1;A<arguments.length;A++)y+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+f+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(f,y){o(f,y),o(f+"Capture",y)}function o(f,y){for(i[f]=y,f=0;f<y.length;f++)s.add(y[f])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function m(f){return u.call(p,f)?!0:u.call(d,f)?!1:c.test(f)?p[f]=!0:(d[f]=!0,!1)}function g(f,y,A,L){if(A!==null&&A.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return L?!1:A!==null?!A.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function E(f,y,A,L){if(y===null||typeof y>"u"||g(f,y,A,L))return!0;if(L)return!1;if(A!==null)switch(A.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function x(f,y,A,L,q,X,le){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=L,this.attributeNamespace=q,this.mustUseProperty=A,this.propertyName=f,this.type=y,this.sanitizeURL=X,this.removeEmptyString=le}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){b[f]=new x(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var y=f[0];b[y]=new x(y,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){b[f]=new x(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){b[f]=new x(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){b[f]=new x(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){b[f]=new x(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){b[f]=new x(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){b[f]=new x(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){b[f]=new x(f,5,!1,f.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function C(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var y=f.replace(S,C);b[y]=new x(y,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var y=f.replace(S,C);b[y]=new x(y,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var y=f.replace(S,C);b[y]=new x(y,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){b[f]=new x(f,1,!1,f.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){b[f]=new x(f,1,!1,f.toLowerCase(),null,!0,!0)});function T(f,y,A,L){var q=b.hasOwnProperty(y)?b[y]:null;(q!==null?q.type!==0:L||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(E(y,A,q,L)&&(A=null),L||q===null?m(y)&&(A===null?f.removeAttribute(y):f.setAttribute(y,""+A)):q.mustUseProperty?f[q.propertyName]=A===null?q.type===3?!1:"":A:(y=q.attributeName,L=q.attributeNamespace,A===null?f.removeAttribute(y):(q=q.type,A=q===3||q===4&&A===!0?"":""+A,L?f.setAttributeNS(L,y,A):f.setAttribute(y,A))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),P=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),M=Symbol.iterator;function W(f){return f===null||typeof f!="object"?null:(f=M&&f[M]||f["@@iterator"],typeof f=="function"?f:null)}var ee=Object.assign,z;function ae(f){if(z===void 0)try{throw Error()}catch(A){var y=A.stack.trim().match(/\n( *(at )?)/);z=y&&y[1]||""}return`
`+z+f}var ce=!1;function he(f,y){if(!f||ce)return"";ce=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Ve){var L=Ve}Reflect.construct(f,[],y)}else{try{y.call()}catch(Ve){L=Ve}f.call(y.prototype)}else{try{throw Error()}catch(Ve){L=Ve}f()}}catch(Ve){if(Ve&&L&&typeof Ve.stack=="string"){for(var q=Ve.stack.split(`
`),X=L.stack.split(`
`),le=q.length-1,xe=X.length-1;1<=le&&0<=xe&&q[le]!==X[xe];)xe--;for(;1<=le&&0<=xe;le--,xe--)if(q[le]!==X[xe]){if(le!==1||xe!==1)do if(le--,xe--,0>xe||q[le]!==X[xe]){var be=`
`+q[le].replace(" at new "," at ");return f.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",f.displayName)),be}while(1<=le&&0<=xe);break}}}finally{ce=!1,Error.prepareStackTrace=A}return(f=f?f.displayName||f.name:"")?ae(f):""}function fe(f){switch(f.tag){case 5:return ae(f.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return f=he(f.type,!1),f;case 11:return f=he(f.type.render,!1),f;case 1:return f=he(f.type,!0),f;default:return""}}function Ce(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case O:return"Fragment";case P:return"Portal";case F:return"Profiler";case B:return"StrictMode";case ne:return"Suspense";case re:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case Q:return(f.displayName||"Context")+".Consumer";case H:return(f._context.displayName||"Context")+".Provider";case Z:var y=f.render;return f=f.displayName,f||(f=y.displayName||y.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case se:return y=f.displayName||null,y!==null?y:Ce(f.type)||"Memo";case G:y=f._payload,f=f._init;try{return Ce(f(y))}catch{}}return null}function Me(f){var y=f.type;switch(f.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=y.render,f=f.displayName||f.name||"",y.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(y);case 8:return y===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function Ye(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function We(f){var y=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Be(f){var y=We(f)?"checked":"value",A=Object.getOwnPropertyDescriptor(f.constructor.prototype,y),L=""+f[y];if(!f.hasOwnProperty(y)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var q=A.get,X=A.set;return Object.defineProperty(f,y,{configurable:!0,get:function(){return q.call(this)},set:function(le){L=""+le,X.call(this,le)}}),Object.defineProperty(f,y,{enumerable:A.enumerable}),{getValue:function(){return L},setValue:function(le){L=""+le},stopTracking:function(){f._valueTracker=null,delete f[y]}}}}function rt(f){f._valueTracker||(f._valueTracker=Be(f))}function tt(f){if(!f)return!1;var y=f._valueTracker;if(!y)return!0;var A=y.getValue(),L="";return f&&(L=We(f)?f.checked?"true":"false":f.value),f=L,f!==A?(y.setValue(f),!0):!1}function Ue(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Pe(f,y){var A=y.checked;return ee({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??f._wrapperState.initialChecked})}function Qe(f,y){var A=y.defaultValue==null?"":y.defaultValue,L=y.checked!=null?y.checked:y.defaultChecked;A=Ye(y.value!=null?y.value:A),f._wrapperState={initialChecked:L,initialValue:A,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function Je(f,y){y=y.checked,y!=null&&T(f,"checked",y,!1)}function nt(f,y){Je(f,y);var A=Ye(y.value),L=y.type;if(A!=null)L==="number"?(A===0&&f.value===""||f.value!=A)&&(f.value=""+A):f.value!==""+A&&(f.value=""+A);else if(L==="submit"||L==="reset"){f.removeAttribute("value");return}y.hasOwnProperty("value")?At(f,y.type,A):y.hasOwnProperty("defaultValue")&&At(f,y.type,Ye(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(f.defaultChecked=!!y.defaultChecked)}function ft(f,y,A){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var L=y.type;if(!(L!=="submit"&&L!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+f._wrapperState.initialValue,A||y===f.value||(f.value=y),f.defaultValue=y}A=f.name,A!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,A!==""&&(f.name=A)}function At(f,y,A){(y!=="number"||Ue(f.ownerDocument)!==f)&&(A==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+A&&(f.defaultValue=""+A))}var ot=Array.isArray;function qe(f,y,A,L){if(f=f.options,y){y={};for(var q=0;q<A.length;q++)y["$"+A[q]]=!0;for(A=0;A<f.length;A++)q=y.hasOwnProperty("$"+f[A].value),f[A].selected!==q&&(f[A].selected=q),q&&L&&(f[A].defaultSelected=!0)}else{for(A=""+Ye(A),y=null,q=0;q<f.length;q++){if(f[q].value===A){f[q].selected=!0,L&&(f[q].defaultSelected=!0);return}y!==null||f[q].disabled||(y=f[q])}y!==null&&(y.selected=!0)}}function mt(f,y){if(y.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},y,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function st(f,y){var A=y.value;if(A==null){if(A=y.children,y=y.defaultValue,A!=null){if(y!=null)throw Error(n(92));if(ot(A)){if(1<A.length)throw Error(n(93));A=A[0]}y=A}y==null&&(y=""),A=y}f._wrapperState={initialValue:Ye(A)}}function St(f,y){var A=Ye(y.value),L=Ye(y.defaultValue);A!=null&&(A=""+A,A!==f.value&&(f.value=A),y.defaultValue==null&&f.defaultValue!==A&&(f.defaultValue=A)),L!=null&&(f.defaultValue=""+L)}function bt(f){var y=f.textContent;y===f._wrapperState.initialValue&&y!==""&&y!==null&&(f.value=y)}function Mt(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(f,y){return f==null||f==="http://www.w3.org/1999/xhtml"?Mt(y):f==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var rr,Ft=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,A,L,q){MSApp.execUnsafeLocalFunction(function(){return f(y,A,L,q)})}:f}(function(f,y){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=y;else{for(rr=rr||document.createElement("div"),rr.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=rr.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;y.firstChild;)f.appendChild(y.firstChild)}});function Qt(f,y){if(y){var A=f.firstChild;if(A&&A===f.lastChild&&A.nodeType===3){A.nodeValue=y;return}}f.textContent=y}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(f){Ht.forEach(function(y){y=y+f.charAt(0).toUpperCase()+f.substring(1),nr[y]=nr[f]})});function Ar(f,y,A){return y==null||typeof y=="boolean"||y===""?"":A||typeof y!="number"||y===0||nr.hasOwnProperty(f)&&nr[f]?(""+y).trim():y+"px"}function Ir(f,y){f=f.style;for(var A in y)if(y.hasOwnProperty(A)){var L=A.indexOf("--")===0,q=Ar(A,y[A],L);A==="float"&&(A="cssFloat"),L?f.setProperty(A,q):f[A]=q}}var Qr=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(f,y){if(y){if(Qr[f]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(n(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(n(61))}if(y.style!=null&&typeof y.style!="object")throw Error(n(62))}}function Oe(f,y){if(f.indexOf("-")===-1)return typeof y.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yt=null;function Xt(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var ir=null,ie=null,ue=null;function ve(f){if(f=Y(f)){if(typeof ir!="function")throw Error(n(280));var y=f.stateNode;y&&(y=pe(y),ir(f.stateNode,f.type,y))}}function Ie(f){ie?ue?ue.push(f):ue=[f]:ie=f}function Ze(){if(ie){var f=ie,y=ue;if(ue=ie=null,ve(f),y)for(f=0;f<y.length;f++)ve(y[f])}}function wt(f,y){return f(y)}function Gt(){}var sr=!1;function Ee(f,y,A){if(sr)return f(y,A);sr=!0;try{return wt(f,y,A)}finally{sr=!1,(ie!==null||ue!==null)&&(Gt(),Ze())}}function we(f,y){var A=f.stateNode;if(A===null)return null;var L=pe(A);if(L===null)return null;A=L[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(f=f.type,L=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!L;break e;default:f=!1}if(f)return null;if(A&&typeof A!="function")throw Error(n(231,y,typeof A));return A}var Ne=!1;if(l)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch{Ne=!1}function it(f,y,A,L,q,X,le,xe,be){var Ve=Array.prototype.slice.call(arguments,3);try{y.apply(A,Ve)}catch(ut){this.onError(ut)}}var xt=!1,lt=null,Et=!1,It=null,Tt={onError:function(f){xt=!0,lt=f}};function Rt(f,y,A,L,q,X,le,xe,be){xt=!1,lt=null,it.apply(Tt,arguments)}function Dt(f,y,A,L,q,X,le,xe,be){if(Rt.apply(this,arguments),xt){if(xt){var Ve=lt;xt=!1,lt=null}else throw Error(n(198));Et||(Et=!0,It=Ve)}}function Ct(f){var y=f,A=f;if(f.alternate)for(;y.return;)y=y.return;else{f=y;do y=f,(y.flags&4098)!==0&&(A=y.return),f=y.return;while(f)}return y.tag===3?A:null}function or(f){if(f.tag===13){var y=f.memoizedState;if(y===null&&(f=f.alternate,f!==null&&(y=f.memoizedState)),y!==null)return y.dehydrated}return null}function _r(f){if(Ct(f)!==f)throw Error(n(188))}function Dr(f){var y=f.alternate;if(!y){if(y=Ct(f),y===null)throw Error(n(188));return y!==f?null:f}for(var A=f,L=y;;){var q=A.return;if(q===null)break;var X=q.alternate;if(X===null){if(L=q.return,L!==null){A=L;continue}break}if(q.child===X.child){for(X=q.child;X;){if(X===A)return _r(q),f;if(X===L)return _r(q),y;X=X.sibling}throw Error(n(188))}if(A.return!==L.return)A=q,L=X;else{for(var le=!1,xe=q.child;xe;){if(xe===A){le=!0,A=q,L=X;break}if(xe===L){le=!0,L=q,A=X;break}xe=xe.sibling}if(!le){for(xe=X.child;xe;){if(xe===A){le=!0,A=X,L=q;break}if(xe===L){le=!0,L=X,A=q;break}xe=xe.sibling}if(!le)throw Error(n(189))}}if(A.alternate!==L)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?f:y}function hr(f){return f=Dr(f),f!==null?ar(f):null}function ar(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var y=ar(f);if(y!==null)return y;f=f.sibling}return null}var He=e.unstable_scheduleCallback,_t=e.unstable_cancelCallback,gt=e.unstable_shouldYield,yt=e.unstable_requestPaint,qt=e.unstable_now,yr=e.unstable_getCurrentPriorityLevel,Lr=e.unstable_ImmediatePriority,En=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,ur=e.unstable_LowPriority,Xr=e.unstable_IdlePriority,ts=null,Wr=null;function Mr(f){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(ts,f,void 0,(f.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:ea,js=Math.log,ri=Math.LN2;function ea(f){return f>>>=0,f===0?32:31-(js(f)/ri|0)|0}var vs=64,bo=4194304;function Ti(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Ci(f,y){var A=f.pendingLanes;if(A===0)return 0;var L=0,q=f.suspendedLanes,X=f.pingedLanes,le=A&268435455;if(le!==0){var xe=le&~q;xe!==0?L=Ti(xe):(X&=le,X!==0&&(L=Ti(X)))}else le=A&~q,le!==0?L=Ti(le):X!==0&&(L=Ti(X));if(L===0)return 0;if(y!==0&&y!==L&&(y&q)===0&&(q=L&-L,X=y&-y,q>=X||q===16&&(X&4194240)!==0))return y;if((L&4)!==0&&(L|=A&16),y=f.entangledLanes,y!==0)for(f=f.entanglements,y&=L;0<y;)A=31-ln(y),q=1<<A,L|=f[A],y&=~q;return L}function Zl(f,y){switch(f){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ni(f,y){for(var A=f.suspendedLanes,L=f.pingedLanes,q=f.expirationTimes,X=f.pendingLanes;0<X;){var le=31-ln(X),xe=1<<le,be=q[le];be===-1?((xe&A)===0||(xe&L)!==0)&&(q[le]=Zl(xe,y)):be<=y&&(f.expiredLanes|=xe),X&=~xe}}function Ri(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function sl(){var f=vs;return vs<<=1,(vs&4194240)===0&&(vs=64),f}function wi(f){for(var y=[],A=0;31>A;A++)y.push(f);return y}function Ai(f,y,A){f.pendingLanes|=y,y!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,y=31-ln(y),f[y]=A}function Wn(f,y){var A=f.pendingLanes&~y;f.pendingLanes=y,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=y,f.mutableReadLanes&=y,f.entangledLanes&=y,y=f.entanglements;var L=f.eventTimes;for(f=f.expirationTimes;0<A;){var q=31-ln(A),X=1<<q;y[q]=0,L[q]=-1,f[q]=-1,A&=~X}}function ja(f,y){var A=f.entangledLanes|=y;for(f=f.entanglements;A;){var L=31-ln(A),q=1<<L;q&y|f[L]&y&&(f[L]|=y),A&=~q}}var gr=0;function rs(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var ta,Ms,To,Co,Ma,Ro=!1,$a=[],si=null,ns=null,$s=null,ra=new Map,na=new Map,ii=[],eu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tu(f,y){switch(f){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":ra.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(y.pointerId)}}function xs(f,y,A,L,q,X){return f===null||f.nativeEvent!==X?(f={blockedOn:y,domEventName:A,eventSystemFlags:L,nativeEvent:X,targetContainers:[q]},y!==null&&(y=Y(y),y!==null&&Ms(y)),f):(f.eventSystemFlags|=L,y=f.targetContainers,q!==null&&y.indexOf(q)===-1&&y.push(q),f)}function wo(f,y,A,L,q){switch(y){case"focusin":return si=xs(si,f,y,A,L,q),!0;case"dragenter":return ns=xs(ns,f,y,A,L,q),!0;case"mouseover":return $s=xs($s,f,y,A,L,q),!0;case"pointerover":var X=q.pointerId;return ra.set(X,xs(ra.get(X)||null,f,y,A,L,q)),!0;case"gotpointercapture":return X=q.pointerId,na.set(X,xs(na.get(X)||null,f,y,A,L,q)),!0}return!1}function il(f){var y=U(f.target);if(y!==null){var A=Ct(y);if(A!==null){if(y=A.tag,y===13){if(y=or(A),y!==null){f.blockedOn=y,Ma(f.priority,function(){To(A)});return}}else if(y===3&&A.stateNode.current.memoizedState.isDehydrated){f.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Ao(f){if(f.blockedOn!==null)return!1;for(var y=f.targetContainers;0<y.length;){var A=Po(f.domEventName,f.eventSystemFlags,y[0],f.nativeEvent);if(A===null){A=f.nativeEvent;var L=new A.constructor(A.type,A);Yt=L,A.target.dispatchEvent(L),Yt=null}else return y=Y(A),y!==null&&Ms(y),f.blockedOn=A,!1;y.shift()}return!0}function ru(f,y,A){Ao(f)&&A.delete(y)}function nu(){Ro=!1,si!==null&&Ao(si)&&(si=null),ns!==null&&Ao(ns)&&(ns=null),$s!==null&&Ao($s)&&($s=null),ra.forEach(ru),na.forEach(ru)}function Tr(f,y){f.blockedOn===y&&(f.blockedOn=null,Ro||(Ro=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nu)))}function Cr(f){function y(q){return Tr(q,f)}if(0<$a.length){Tr($a[0],f);for(var A=1;A<$a.length;A++){var L=$a[A];L.blockedOn===f&&(L.blockedOn=null)}}for(si!==null&&Tr(si,f),ns!==null&&Tr(ns,f),$s!==null&&Tr($s,f),ra.forEach(y),na.forEach(y),A=0;A<ii.length;A++)L=ii[A],L.blockedOn===f&&(L.blockedOn=null);for(;0<ii.length&&(A=ii[0],A.blockedOn===null);)il(A),A.blockedOn===null&&ii.shift()}var Ii=I.ReactCurrentBatchConfig,Io=!0;function uc(f,y,A,L){var q=gr,X=Ii.transition;Ii.transition=null;try{gr=1,al(f,y,A,L)}finally{gr=q,Ii.transition=X}}function cc(f,y,A,L){var q=gr,X=Ii.transition;Ii.transition=null;try{gr=4,al(f,y,A,L)}finally{gr=q,Ii.transition=X}}function al(f,y,A,L){if(Io){var q=Po(f,y,A,L);if(q===null)fa(f,y,L,Do,A),tu(f,L);else if(wo(q,f,y,A,L))L.stopPropagation();else if(tu(f,L),y&4&&-1<eu.indexOf(f)){for(;q!==null;){var X=Y(q);if(X!==null&&ta(X),X=Po(f,y,A,L),X===null&&fa(f,y,L,Do,A),X===q)break;q=X}q!==null&&L.stopPropagation()}else fa(f,y,L,null,A)}}var Do=null;function Po(f,y,A,L){if(Do=null,f=Xt(L),f=U(f),f!==null)if(y=Ct(f),y===null)f=null;else if(A=y.tag,A===13){if(f=or(y),f!==null)return f;f=null}else if(A===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;f=null}else y!==f&&(f=null);return Do=f,null}function ko(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yr()){case Lr:return 1;case En:return 4;case wn:case ur:return 16;case Xr:return 536870912;default:return 16}default:return 16}}var $r=null,sa=null,Mn=null;function ol(){if(Mn)return Mn;var f,y=sa,A=y.length,L,q="value"in $r?$r.value:$r.textContent,X=q.length;for(f=0;f<A&&y[f]===q[f];f++);var le=A-f;for(L=1;L<=le&&y[A-L]===q[X-L];L++);return Mn=q.slice(f,1<L?1-L:void 0)}function ia(f){var y=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&y===13&&(f=13)):f=y,f===10&&(f=13),32<=f||f===13?f:0}function _n(){return!0}function ll(){return!1}function An(f){function y(A,L,q,X,le){this._reactName=A,this._targetInst=q,this.type=L,this.nativeEvent=X,this.target=le,this.currentTarget=null;for(var xe in f)f.hasOwnProperty(xe)&&(A=f[xe],this[xe]=A?A(X):X[xe]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?_n:ll,this.isPropagationStopped=ll,this}return ee(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=_n)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=_n)},persist:function(){},isPersistent:_n}),y}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=An(Es),_s=ee({},Es,{view:0,detail:0}),Fa=An(_s),jr,ss,en,Ba=ee({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pl,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==en&&(en&&f.type==="mousemove"?(jr=f.screenX-en.screenX,ss=f.screenY-en.screenY):ss=jr=0,en=f),jr)},movementY:function(f){return"movementY"in f?f.movementY:ss}}),ul=An(Ba),oi=ee({},Ba,{dataTransfer:0}),No=An(oi),cl=ee({},_s,{relatedTarget:0}),kr=An(cl),Fs=ee({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),aa=An(Fs),Ua=ee({},Es,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),oa=An(Ua),Di=ee({},Es,{data:0}),su=An(Di),iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Va={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function la(f){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(f):(f=Va[f])?!!y[f]:!1}function pl(){return la}var au=ee({},_s,{key:function(f){if(f.key){var y=iu[f.key]||f.key;if(y!=="Unidentified")return y}return f.type==="keypress"?(f=ia(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?dl[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pl,charCode:function(f){return f.type==="keypress"?ia(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?ia(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Ha=An(au),fl=ee({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=An(fl),ou=ee({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pl}),dc=An(ou),Oo=ee({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ga=An(Oo),pc=ee({},Ba,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),lu=An(pc),$n=[9,13,27,32],Pi=l&&"CompositionEvent"in window,Bs=null;l&&"documentMode"in document&&(Bs=document.documentMode);var hl=l&&"TextEvent"in window&&!Bs,ml=l&&(!Pi||Bs&&8<Bs&&11>=Bs),uu=" ",gl=!1;function cu(f,y){switch(f){case"keyup":return $n.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var ki=!1;function Ni(f,y){switch(f){case"compositionend":return yl(y);case"keypress":return y.which!==32?null:(gl=!0,uu);case"textInput":return f=y.data,f===uu&&gl?null:f;default:return null}}function fc(f,y){if(ki)return f==="compositionend"||!Pi&&cu(f,y)?(f=ol(),Mn=sa=$r=null,ki=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return ml&&y.locale!=="ko"?null:y.data;default:return null}}var mc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oi(f){var y=f&&f.nodeName&&f.nodeName.toLowerCase();return y==="input"?!!mc[f.type]:y==="textarea"}function vl(f,y,A,L){Ie(L),y=Bo(y,"onChange"),0<y.length&&(A=new ai("onChange","change",null,A,L),f.push({event:A,listeners:y}))}var zn=null,li=null;function gc(f){hu(f,0)}function Wa(f){var y=te(f);if(tt(y))return f}function yc(f,y){if(f==="change")return y}var os=!1;if(l){var In;if(l){var Li="oninput"in document;if(!Li){var ua=document.createElement("div");ua.setAttribute("oninput","return;"),Li=typeof ua.oninput=="function"}In=Li}else In=!1;os=In&&(!document.documentMode||9<document.documentMode)}function Vr(){zn&&(zn.detachEvent("onpropertychange",ji),li=zn=null)}function ji(f){if(f.propertyName==="value"&&Wa(li)){var y=[];vl(y,li,f,Xt(f)),Ee(gc,y)}}function xl(f,y,A){f==="focusin"?(Vr(),zn=y,li=A,zn.attachEvent("onpropertychange",ji)):f==="focusout"&&Vr()}function vc(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Wa(li)}function ca(f,y){if(f==="click")return Wa(y)}function Ae(f,y){if(f==="input"||f==="change")return Wa(y)}function Ke(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var Fe=typeof Object.is=="function"?Object.is:Ke;function Pt(f,y){if(Fe(f,y))return!0;if(typeof f!="object"||f===null||typeof y!="object"||y===null)return!1;var A=Object.keys(f),L=Object.keys(y);if(A.length!==L.length)return!1;for(L=0;L<A.length;L++){var q=A[L];if(!u.call(y,q)||!Fe(f[q],y[q]))return!1}return!0}function Jt(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function vr(f,y){var A=Jt(f);f=0;for(var L;A;){if(A.nodeType===3){if(L=f+A.textContent.length,f<=y&&L>=y)return{node:A,offset:y-f};f=L}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=Jt(A)}}function zr(f,y){return f&&y?f===y?!0:f&&f.nodeType===3?!1:y&&y.nodeType===3?zr(f,y.parentNode):"contains"in f?f.contains(y):f.compareDocumentPosition?!!(f.compareDocumentPosition(y)&16):!1:!1}function Rr(){for(var f=window,y=Ue();y instanceof f.HTMLIFrameElement;){try{var A=typeof y.contentWindow.location.href=="string"}catch{A=!1}if(A)f=y.contentWindow;else break;y=Ue(f.document)}return y}function da(f){var y=f&&f.nodeName&&f.nodeName.toLowerCase();return y&&(y==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||y==="textarea"||f.contentEditable==="true")}function El(f){var y=Rr(),A=f.focusedElem,L=f.selectionRange;if(y!==A&&A&&A.ownerDocument&&zr(A.ownerDocument.documentElement,A)){if(L!==null&&da(A)){if(y=L.start,f=L.end,f===void 0&&(f=y),"selectionStart"in A)A.selectionStart=y,A.selectionEnd=Math.min(f,A.value.length);else if(f=(y=A.ownerDocument||document)&&y.defaultView||window,f.getSelection){f=f.getSelection();var q=A.textContent.length,X=Math.min(L.start,q);L=L.end===void 0?X:Math.min(L.end,q),!f.extend&&X>L&&(q=L,L=X,X=q),q=vr(A,X);var le=vr(A,L);q&&le&&(f.rangeCount!==1||f.anchorNode!==q.node||f.anchorOffset!==q.offset||f.focusNode!==le.node||f.focusOffset!==le.offset)&&(y=y.createRange(),y.setStart(q.node,q.offset),f.removeAllRanges(),X>L?(f.addRange(y),f.extend(le.node,le.offset)):(y.setEnd(le.node,le.offset),f.addRange(y)))}}for(y=[],f=A;f=f.parentNode;)f.nodeType===1&&y.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<y.length;A++)f=y[A],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Kn=l&&"documentMode"in document&&11>=document.documentMode,Bn=null,_l=null,us=null,Mi=!1;function za(f,y,A){var L=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;Mi||Bn==null||Bn!==Ue(L)||(L=Bn,"selectionStart"in L&&da(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),us&&Pt(us,L)||(us=L,L=Bo(_l,"onSelect"),0<L.length&&(y=new ai("onSelect","select",null,y,A),f.push({event:y,listeners:L}),y.target=Bn)))}function Er(f,y){var A={};return A[f.toLowerCase()]=y.toLowerCase(),A["Webkit"+f]="webkit"+y,A["Moz"+f]="moz"+y,A}var $i={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Lo={},Ka={};l&&(Ka=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function pa(f){if(Lo[f])return Lo[f];if(!$i[f])return f;var y=$i[f],A;for(A in y)if(y.hasOwnProperty(A)&&A in Ka)return Lo[f]=y[A];return f}var du=pa("animationend"),pu=pa("animationiteration"),Ya=pa("animationstart"),Us=pa("transitionend"),Qa=new Map,Sl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(f,y){Qa.set(f,y),a(y,[f])}for(var jo=0;jo<Sl.length;jo++){var Mo=Sl[jo],$o=Mo.toLowerCase(),fu=Mo[0].toUpperCase()+Mo.slice(1);cs($o,"on"+fu)}cs(du,"onAnimationEnd"),cs(pu,"onAnimationIteration"),cs(Ya,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(Us,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(hn));function Xa(f,y,A){var L=f.type||"unknown-event";f.currentTarget=A,Dt(L,y,void 0,f),f.currentTarget=null}function hu(f,y){y=(y&4)!==0;for(var A=0;A<f.length;A++){var L=f[A],q=L.event;L=L.listeners;e:{var X=void 0;if(y)for(var le=L.length-1;0<=le;le--){var xe=L[le],be=xe.instance,Ve=xe.currentTarget;if(xe=xe.listener,be!==X&&q.isPropagationStopped())break e;Xa(q,xe,Ve),X=be}else for(le=0;le<L.length;le++){if(xe=L[le],be=xe.instance,Ve=xe.currentTarget,xe=xe.listener,be!==X&&q.isPropagationStopped())break e;Xa(q,xe,Ve),X=be}}}if(Et)throw f=It,Et=!1,It=null,f}function Fr(f,y){var A=y[N];A===void 0&&(A=y[N]=new Set);var L=f+"__bubble";A.has(L)||(Bi(y,f,2,!1),A.add(L))}function Fo(f,y,A){var L=0;y&&(L|=4),Bi(A,f,L,y)}var Vs="_reactListening"+Math.random().toString(36).slice(2);function Hs(f){if(!f[Vs]){f[Vs]=!0,s.forEach(function(A){A!=="selectionchange"&&(Fi.has(A)||Fo(A,!1,f),Fo(A,!0,f))});var y=f.nodeType===9?f:f.ownerDocument;y===null||y[Vs]||(y[Vs]=!0,Fo("selectionchange",!1,y))}}function Bi(f,y,A,L){switch(ko(y)){case 1:var q=uc;break;case 4:q=cc;break;default:q=al}A=q.bind(null,y,A,f),q=void 0,!Ne||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(q=!0),L?q!==void 0?f.addEventListener(y,A,{capture:!0,passive:q}):f.addEventListener(y,A,!0):q!==void 0?f.addEventListener(y,A,{passive:q}):f.addEventListener(y,A,!1)}function fa(f,y,A,L,q){var X=L;if((y&1)===0&&(y&2)===0&&L!==null)e:for(;;){if(L===null)return;var le=L.tag;if(le===3||le===4){var xe=L.stateNode.containerInfo;if(xe===q||xe.nodeType===8&&xe.parentNode===q)break;if(le===4)for(le=L.return;le!==null;){var be=le.tag;if((be===3||be===4)&&(be=le.stateNode.containerInfo,be===q||be.nodeType===8&&be.parentNode===q))return;le=le.return}for(;xe!==null;){if(le=U(xe),le===null)return;if(be=le.tag,be===5||be===6){L=X=le;continue e}xe=xe.parentNode}}L=L.return}Ee(function(){var Ve=X,ut=Xt(A),dt=[];e:{var at=Qa.get(f);if(at!==void 0){var Nt=ai,jt=f;switch(f){case"keypress":if(ia(A)===0)break e;case"keydown":case"keyup":Nt=Ha;break;case"focusin":jt="focus",Nt=kr;break;case"focusout":jt="blur",Nt=kr;break;case"beforeblur":case"afterblur":Nt=kr;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=No;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=dc;break;case du:case pu:case Ya:Nt=aa;break;case Us:Nt=Ga;break;case"scroll":Nt=Fa;break;case"wheel":Nt=lu;break;case"copy":case"cut":case"paste":Nt=oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=qa}var $t=(y&4)!==0,rn=!$t&&f==="scroll",je=$t?at!==null?at+"Capture":null:at;$t=[];for(var Re=Ve,$e;Re!==null;){$e=Re;var ht=$e.stateNode;if($e.tag===5&&ht!==null&&($e=ht,je!==null&&(ht=we(Re,je),ht!=null&&$t.push(ha(Re,ht,$e)))),rn)break;Re=Re.return}0<$t.length&&(at=new Nt(at,jt,null,A,ut),dt.push({event:at,listeners:$t}))}}if((y&7)===0){e:{if(at=f==="mouseover"||f==="pointerover",Nt=f==="mouseout"||f==="pointerout",at&&A!==Yt&&(jt=A.relatedTarget||A.fromElement)&&(U(jt)||jt[Pn]))break e;if((Nt||at)&&(at=ut.window===ut?ut:(at=ut.ownerDocument)?at.defaultView||at.parentWindow:window,Nt?(jt=A.relatedTarget||A.toElement,Nt=Ve,jt=jt?U(jt):null,jt!==null&&(rn=Ct(jt),jt!==rn||jt.tag!==5&&jt.tag!==6)&&(jt=null)):(Nt=null,jt=Ve),Nt!==jt)){if($t=ul,ht="onMouseLeave",je="onMouseEnter",Re="mouse",(f==="pointerout"||f==="pointerover")&&($t=qa,ht="onPointerLeave",je="onPointerEnter",Re="pointer"),rn=Nt==null?at:te(Nt),$e=jt==null?at:te(jt),at=new $t(ht,Re+"leave",Nt,A,ut),at.target=rn,at.relatedTarget=$e,ht=null,U(ut)===Ve&&($t=new $t(je,Re+"enter",jt,A,ut),$t.target=$e,$t.relatedTarget=rn,ht=$t),rn=ht,Nt&&jt)t:{for($t=Nt,je=jt,Re=0,$e=$t;$e;$e=ma($e))Re++;for($e=0,ht=je;ht;ht=ma(ht))$e++;for(;0<Re-$e;)$t=ma($t),Re--;for(;0<$e-Re;)je=ma(je),$e--;for(;Re--;){if($t===je||je!==null&&$t===je.alternate)break t;$t=ma($t),je=ma(je)}$t=null}else $t=null;Nt!==null&&Jr(dt,at,Nt,$t,!1),jt!==null&&rn!==null&&Jr(dt,rn,jt,$t,!0)}}e:{if(at=Ve?te(Ve):window,Nt=at.nodeName&&at.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&at.type==="file")var Bt=yc;else if(Oi(at))if(os)Bt=Ae;else{Bt=vc;var zt=xl}else(Nt=at.nodeName)&&Nt.toLowerCase()==="input"&&(at.type==="checkbox"||at.type==="radio")&&(Bt=ca);if(Bt&&(Bt=Bt(f,Ve))){vl(dt,Bt,A,ut);break e}zt&&zt(f,at,Ve),f==="focusout"&&(zt=at._wrapperState)&&zt.controlled&&at.type==="number"&&At(at,"number",at.value)}switch(zt=Ve?te(Ve):window,f){case"focusin":(Oi(zt)||zt.contentEditable==="true")&&(Bn=zt,_l=Ve,us=null);break;case"focusout":us=_l=Bn=null;break;case"mousedown":Mi=!0;break;case"contextmenu":case"mouseup":case"dragend":Mi=!1,za(dt,A,ut);break;case"selectionchange":if(Kn)break;case"keydown":case"keyup":za(dt,A,ut)}var Wt;if(Pi)e:{switch(f){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else ki?cu(f,A)&&(Zt="onCompositionEnd"):f==="keydown"&&A.keyCode===229&&(Zt="onCompositionStart");Zt&&(ml&&A.locale!=="ko"&&(ki||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&ki&&(Wt=ol()):($r=ut,sa="value"in $r?$r.value:$r.textContent,ki=!0)),zt=Bo(Ve,Zt),0<zt.length&&(Zt=new su(Zt,f,null,A,ut),dt.push({event:Zt,listeners:zt}),Wt?Zt.data=Wt:(Wt=yl(A),Wt!==null&&(Zt.data=Wt)))),(Wt=hl?Ni(f,A):fc(f,A))&&(Ve=Bo(Ve,"onBeforeInput"),0<Ve.length&&(ut=new su("onBeforeInput","beforeinput",null,A,ut),dt.push({event:ut,listeners:Ve}),ut.data=Wt))}hu(dt,y)})}function ha(f,y,A){return{instance:f,listener:y,currentTarget:A}}function Bo(f,y){for(var A=y+"Capture",L=[];f!==null;){var q=f,X=q.stateNode;q.tag===5&&X!==null&&(q=X,X=we(f,A),X!=null&&L.unshift(ha(f,X,q)),X=we(f,y),X!=null&&L.push(ha(f,X,q))),f=f.return}return L}function ma(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function Jr(f,y,A,L,q){for(var X=y._reactName,le=[];A!==null&&A!==L;){var xe=A,be=xe.alternate,Ve=xe.stateNode;if(be!==null&&be===L)break;xe.tag===5&&Ve!==null&&(xe=Ve,q?(be=we(A,X),be!=null&&le.unshift(ha(A,be,xe))):q||(be=we(A,X),be!=null&&le.push(ha(A,be,xe)))),A=A.return}le.length!==0&&f.push({event:y,listeners:le})}var mn=/\r\n?/g,bl=/\u0000|\uFFFD/g;function mu(f){return(typeof f=="string"?f:""+f).replace(mn,`
`).replace(bl,"")}function Ja(f,y,A){if(y=mu(y),mu(f)!==y&&A)throw Error(n(425))}function Za(){}var Ss=null,mr=null;function ds(f,y){return f==="textarea"||f==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Hr=typeof setTimeout=="function"?setTimeout:void 0,Dn=typeof clearTimeout=="function"?clearTimeout:void 0,ga=typeof Promise=="function"?Promise:void 0,eo=typeof queueMicrotask=="function"?queueMicrotask:typeof ga<"u"?function(f){return ga.resolve(null).then(f).catch(ya)}:Hr;function ya(f){setTimeout(function(){throw f})}function Tl(f,y){var A=y,L=0;do{var q=A.nextSibling;if(f.removeChild(A),q&&q.nodeType===8)if(A=q.data,A==="/$"){if(L===0){f.removeChild(q),Cr(y);return}L--}else A!=="$"&&A!=="$?"&&A!=="$!"||L++;A=q}while(A);Cr(y)}function ci(f){for(;f!=null;f=f.nextSibling){var y=f.nodeType;if(y===1||y===3)break;if(y===8){if(y=f.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return f}function gu(f){f=f.previousSibling;for(var y=0;f;){if(f.nodeType===8){var A=f.data;if(A==="$"||A==="$!"||A==="$?"){if(y===0)return f;y--}else A==="/$"&&y++}f=f.previousSibling}return null}var va=Math.random().toString(36).slice(2),bs="__reactFiber$"+va,di="__reactProps$"+va,Pn="__reactContainer$"+va,N="__reactEvents$"+va,k="__reactListeners$"+va,V="__reactHandles$"+va;function U(f){var y=f[bs];if(y)return y;for(var A=f.parentNode;A;){if(y=A[Pn]||A[bs]){if(A=y.alternate,y.child!==null||A!==null&&A.child!==null)for(f=gu(f);f!==null;){if(A=f[bs])return A;f=gu(f)}return y}f=A,A=f.parentNode}return null}function Y(f){return f=f[bs]||f[Pn],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function te(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function pe(f){return f[di]||null}var me=[],ge=-1;function ye(f){return{current:f}}function Se(f){0>ge||(f.current=me[ge],me[ge]=null,ge--)}function Le(f,y){ge++,me[ge]=f.current,f.current=y}var vt={},Ge=ye(vt),Ot=ye(!1),Vt=vt;function Br(f,y){var A=f.type.contextTypes;if(!A)return vt;var L=f.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===y)return L.__reactInternalMemoizedMaskedChildContext;var q={},X;for(X in A)q[X]=y[X];return L&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=y,f.__reactInternalMemoizedMaskedChildContext=q),q}function Nr(f){return f=f.childContextTypes,f!=null}function ps(){Se(Ot),Se(Ge)}function xa(f,y,A){if(Ge.current!==vt)throw Error(n(168));Le(Ge,y),Le(Ot,A)}function Ea(f,y,A){var L=f.stateNode;if(y=y.childContextTypes,typeof L.getChildContext!="function")return A;L=L.getChildContext();for(var q in L)if(!(q in y))throw Error(n(108,Me(f)||"Unknown",q));return ee({},A,L)}function gn(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||vt,Vt=Ge.current,Le(Ge,f),Le(Ot,Ot.current),!0}function Sa(f,y,A){var L=f.stateNode;if(!L)throw Error(n(169));A?(f=Ea(f,y,Vt),L.__reactInternalMemoizedMergedChildContext=f,Se(Ot),Se(Ge),Le(Ge,f)):Se(Ot),Le(Ot,A)}var Yn=null,Pr=!1,Ui=!1;function Qn(f){Yn===null?Yn=[f]:Yn.push(f)}function ro(f){Pr=!0,Qn(f)}function ba(){if(!Ui&&Yn!==null){Ui=!0;var f=0,y=gr;try{var A=Yn;for(gr=1;f<A.length;f++){var L=A[f];do L=L(!0);while(L!==null)}Yn=null,Pr=!1}catch(q){throw Yn!==null&&(Yn=Yn.slice(f+1)),He(Lr,ba),q}finally{gr=y,Ui=!1}}return null}var Uo=[],kn=0,yu=null,vu=0,Ts=[],Cs=0,no=null,pi=1,fi="";function so(f,y){Uo[kn++]=vu,Uo[kn++]=yu,yu=f,vu=y}function hd(f,y,A){Ts[Cs++]=pi,Ts[Cs++]=fi,Ts[Cs++]=no,no=f;var L=pi;f=fi;var q=32-ln(L)-1;L&=~(1<<q),A+=1;var X=32-ln(y)+q;if(30<X){var le=q-q%5;X=(L&(1<<le)-1).toString(32),L>>=le,q-=le,pi=1<<32-ln(y)+q|A<<q|L,fi=X+f}else pi=1<<X|A<<q|L,fi=f}function Cl(f){f.return!==null&&(so(f,1),hd(f,1,0))}function io(f){for(;f===yu;)yu=Uo[--kn],Uo[kn]=null,vu=Uo[--kn],Uo[kn]=null;for(;f===no;)no=Ts[--Cs],Ts[Cs]=null,fi=Ts[--Cs],Ts[Cs]=null,pi=Ts[--Cs],Ts[Cs]=null}var Nn=null,fs=null,Ur=!1,Gs=null;function hi(f,y){var A=ks(5,null,null,0);A.elementType="DELETED",A.stateNode=y,A.return=f,y=f.deletions,y===null?(f.deletions=[A],f.flags|=16):y.push(A)}function xu(f,y){switch(f.tag){case 5:var A=f.type;return y=y.nodeType!==1||A.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(f.stateNode=y,Nn=f,fs=ci(y.firstChild),!0):!1;case 6:return y=f.pendingProps===""||y.nodeType!==3?null:y,y!==null?(f.stateNode=y,Nn=f,fs=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(A=no!==null?{id:pi,overflow:fi}:null,f.memoizedState={dehydrated:y,treeContext:A,retryLane:1073741824},A=ks(18,null,null,0),A.stateNode=y,A.return=f,f.child=A,Nn=f,fs=null,!0):!1;default:return!1}}function Vi(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Xn(f){if(Ur){var y=fs;if(y){var A=y;if(!xu(f,y)){if(Vi(f))throw Error(n(418));y=ci(A.nextSibling);var L=Nn;y&&xu(f,y)?hi(L,A):(f.flags=f.flags&-4097|2,Ur=!1,Nn=f)}}else{if(Vi(f))throw Error(n(418));f.flags=f.flags&-4097|2,Ur=!1,Nn=f}}}function md(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Nn=f}function Rl(f){if(f!==Nn)return!1;if(!Ur)return md(f),Ur=!0,!1;var y;if((y=f.tag!==3)&&!(y=f.tag!==5)&&(y=f.type,y=y!=="head"&&y!=="body"&&!ds(f.type,f.memoizedProps)),y&&(y=fs)){if(Vi(f))throw xc(),Error(n(418));for(;y;)hi(f,y),y=ci(y.nextSibling)}if(md(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,y=0;f;){if(f.nodeType===8){var A=f.data;if(A==="/$"){if(y===0){fs=ci(f.nextSibling);break e}y--}else A!=="$"&&A!=="$!"&&A!=="$?"||y++}f=f.nextSibling}fs=null}}else fs=Nn?ci(f.stateNode.nextSibling):null;return!0}function xc(){for(var f=fs;f;)f=ci(f.nextSibling)}function mi(){fs=Nn=null,Ur=!1}function gi(f){Gs===null?Gs=[f]:Gs.push(f)}var gd=I.ReactCurrentBatchConfig;function wl(f,y,A){if(f=A.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var L=A.stateNode}if(!L)throw Error(n(147,f));var q=L,X=""+f;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===X?y.ref:(y=function(le){var xe=q.refs;le===null?delete xe[X]:xe[X]=le},y._stringRef=X,y)}if(typeof f!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,f))}return f}function ao(f,y){throw f=Object.prototype.toString.call(y),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":f))}function yd(f){var y=f._init;return y(f._payload)}function Ec(f){function y(je,Re){if(f){var $e=je.deletions;$e===null?(je.deletions=[Re],je.flags|=16):$e.push(Re)}}function A(je,Re){if(!f)return null;for(;Re!==null;)y(je,Re),Re=Re.sibling;return null}function L(je,Re){for(je=new Map;Re!==null;)Re.key!==null?je.set(Re.key,Re):je.set(Re.index,Re),Re=Re.sibling;return je}function q(je,Re){return je=Js(je,Re),je.index=0,je.sibling=null,je}function X(je,Re,$e){return je.index=$e,f?($e=je.alternate,$e!==null?($e=$e.index,$e<Re?(je.flags|=2,Re):$e):(je.flags|=2,Re)):(je.flags|=1048576,Re)}function le(je){return f&&je.alternate===null&&(je.flags|=2),je}function xe(je,Re,$e,ht){return Re===null||Re.tag!==6?(Re=od($e,je.mode,ht),Re.return=je,Re):(Re=q(Re,$e),Re.return=je,Re)}function be(je,Re,$e,ht){var Bt=$e.type;return Bt===O?ut(je,Re,$e.props.children,ht,$e.key):Re!==null&&(Re.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===G&&yd(Bt)===Re.type)?(ht=q(Re,$e.props),ht.ref=wl(je,Re,$e),ht.return=je,ht):(ht=ec($e.type,$e.key,$e.props,null,je.mode,ht),ht.ref=wl(je,Re,$e),ht.return=je,ht)}function Ve(je,Re,$e,ht){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==$e.containerInfo||Re.stateNode.implementation!==$e.implementation?(Re=ld($e,je.mode,ht),Re.return=je,Re):(Re=q(Re,$e.children||[]),Re.return=je,Re)}function ut(je,Re,$e,ht,Bt){return Re===null||Re.tag!==7?(Re=vo($e,je.mode,ht,Bt),Re.return=je,Re):(Re=q(Re,$e),Re.return=je,Re)}function dt(je,Re,$e){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Re=od(""+Re,je.mode,$e),Re.return=je,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case D:return $e=ec(Re.type,Re.key,Re.props,null,je.mode,$e),$e.ref=wl(je,null,Re),$e.return=je,$e;case P:return Re=ld(Re,je.mode,$e),Re.return=je,Re;case G:var ht=Re._init;return dt(je,ht(Re._payload),$e)}if(ot(Re)||W(Re))return Re=vo(Re,je.mode,$e,null),Re.return=je,Re;ao(je,Re)}return null}function at(je,Re,$e,ht){var Bt=Re!==null?Re.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Bt!==null?null:xe(je,Re,""+$e,ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:return $e.key===Bt?be(je,Re,$e,ht):null;case P:return $e.key===Bt?Ve(je,Re,$e,ht):null;case G:return Bt=$e._init,at(je,Re,Bt($e._payload),ht)}if(ot($e)||W($e))return Bt!==null?null:ut(je,Re,$e,ht,null);ao(je,$e)}return null}function Nt(je,Re,$e,ht,Bt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return je=je.get($e)||null,xe(Re,je,""+ht,Bt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case D:return je=je.get(ht.key===null?$e:ht.key)||null,be(Re,je,ht,Bt);case P:return je=je.get(ht.key===null?$e:ht.key)||null,Ve(Re,je,ht,Bt);case G:var zt=ht._init;return Nt(je,Re,$e,zt(ht._payload),Bt)}if(ot(ht)||W(ht))return je=je.get($e)||null,ut(Re,je,ht,Bt,null);ao(Re,ht)}return null}function jt(je,Re,$e,ht){for(var Bt=null,zt=null,Wt=Re,Zt=Re=0,xn=null;Wt!==null&&Zt<$e.length;Zt++){Wt.index>Zt?(xn=Wt,Wt=null):xn=Wt.sibling;var wr=at(je,Wt,$e[Zt],ht);if(wr===null){Wt===null&&(Wt=xn);break}f&&Wt&&wr.alternate===null&&y(je,Wt),Re=X(wr,Re,Zt),zt===null?Bt=wr:zt.sibling=wr,zt=wr,Wt=xn}if(Zt===$e.length)return A(je,Wt),Ur&&so(je,Zt),Bt;if(Wt===null){for(;Zt<$e.length;Zt++)Wt=dt(je,$e[Zt],ht),Wt!==null&&(Re=X(Wt,Re,Zt),zt===null?Bt=Wt:zt.sibling=Wt,zt=Wt);return Ur&&so(je,Zt),Bt}for(Wt=L(je,Wt);Zt<$e.length;Zt++)xn=Nt(Wt,je,Zt,$e[Zt],ht),xn!==null&&(f&&xn.alternate!==null&&Wt.delete(xn.key===null?Zt:xn.key),Re=X(xn,Re,Zt),zt===null?Bt=xn:zt.sibling=xn,zt=xn);return f&&Wt.forEach(function(La){return y(je,La)}),Ur&&so(je,Zt),Bt}function $t(je,Re,$e,ht){var Bt=W($e);if(typeof Bt!="function")throw Error(n(150));if($e=Bt.call($e),$e==null)throw Error(n(151));for(var zt=Bt=null,Wt=Re,Zt=Re=0,xn=null,wr=$e.next();Wt!==null&&!wr.done;Zt++,wr=$e.next()){Wt.index>Zt?(xn=Wt,Wt=null):xn=Wt.sibling;var La=at(je,Wt,wr.value,ht);if(La===null){Wt===null&&(Wt=xn);break}f&&Wt&&La.alternate===null&&y(je,Wt),Re=X(La,Re,Zt),zt===null?Bt=La:zt.sibling=La,zt=La,Wt=xn}if(wr.done)return A(je,Wt),Ur&&so(je,Zt),Bt;if(Wt===null){for(;!wr.done;Zt++,wr=$e.next())wr=dt(je,wr.value,ht),wr!==null&&(Re=X(wr,Re,Zt),zt===null?Bt=wr:zt.sibling=wr,zt=wr);return Ur&&so(je,Zt),Bt}for(Wt=L(je,Wt);!wr.done;Zt++,wr=$e.next())wr=Nt(Wt,je,Zt,wr.value,ht),wr!==null&&(f&&wr.alternate!==null&&Wt.delete(wr.key===null?Zt:wr.key),Re=X(wr,Re,Zt),zt===null?Bt=wr:zt.sibling=wr,zt=wr);return f&&Wt.forEach(function(Sp){return y(je,Sp)}),Ur&&so(je,Zt),Bt}function rn(je,Re,$e,ht){if(typeof $e=="object"&&$e!==null&&$e.type===O&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:e:{for(var Bt=$e.key,zt=Re;zt!==null;){if(zt.key===Bt){if(Bt=$e.type,Bt===O){if(zt.tag===7){A(je,zt.sibling),Re=q(zt,$e.props.children),Re.return=je,je=Re;break e}}else if(zt.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===G&&yd(Bt)===zt.type){A(je,zt.sibling),Re=q(zt,$e.props),Re.ref=wl(je,zt,$e),Re.return=je,je=Re;break e}A(je,zt);break}else y(je,zt);zt=zt.sibling}$e.type===O?(Re=vo($e.props.children,je.mode,ht,$e.key),Re.return=je,je=Re):(ht=ec($e.type,$e.key,$e.props,null,je.mode,ht),ht.ref=wl(je,Re,$e),ht.return=je,je=ht)}return le(je);case P:e:{for(zt=$e.key;Re!==null;){if(Re.key===zt)if(Re.tag===4&&Re.stateNode.containerInfo===$e.containerInfo&&Re.stateNode.implementation===$e.implementation){A(je,Re.sibling),Re=q(Re,$e.children||[]),Re.return=je,je=Re;break e}else{A(je,Re);break}else y(je,Re);Re=Re.sibling}Re=ld($e,je.mode,ht),Re.return=je,je=Re}return le(je);case G:return zt=$e._init,rn(je,Re,zt($e._payload),ht)}if(ot($e))return jt(je,Re,$e,ht);if(W($e))return $t(je,Re,$e,ht);ao(je,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Re!==null&&Re.tag===6?(A(je,Re.sibling),Re=q(Re,$e),Re.return=je,je=Re):(A(je,Re),Re=od($e,je.mode,ht),Re.return=je,je=Re),le(je)):A(je,Re)}return rn}var Zr=Ec(!0),Eu=Ec(!1),Al=ye(null),hs=null,Ta=null,Vo=null;function Hi(){Vo=Ta=hs=null}function _u(f){var y=Al.current;Se(Al),f._currentValue=y}function Sn(f,y,A){for(;f!==null;){var L=f.alternate;if((f.childLanes&y)!==y?(f.childLanes|=y,L!==null&&(L.childLanes|=y)):L!==null&&(L.childLanes&y)!==y&&(L.childLanes|=y),f===A)break;f=f.return}}function Ca(f,y){hs=f,Vo=Ta=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&y)!==0&&(Vn=!0),f.firstContext=null)}function Rs(f){var y=f._currentValue;if(Vo!==f)if(f={context:f,memoizedValue:y,next:null},Ta===null){if(hs===null)throw Error(n(308));Ta=f,hs.dependencies={lanes:0,firstContext:f}}else Ta=Ta.next=f;return y}var oo=null;function _c(f){oo===null?oo=[f]:oo.push(f)}function Su(f,y,A,L){var q=y.interleaved;return q===null?(A.next=A,_c(y)):(A.next=q.next,q.next=A),y.interleaved=A,qi(f,L)}function qi(f,y){f.lanes|=y;var A=f.alternate;for(A!==null&&(A.lanes|=y),A=f,f=f.return;f!==null;)f.childLanes|=y,A=f.alternate,A!==null&&(A.childLanes|=y),A=f,f=f.return;return A.tag===3?A.stateNode:null}var ws=!1;function bu(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vd(f,y){f=f.updateQueue,y.updateQueue===f&&(y.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Gi(f,y){return{eventTime:f,lane:y,tag:0,payload:null,callback:null,next:null}}function As(f,y,A){var L=f.updateQueue;if(L===null)return null;if(L=L.shared,(Sr&2)!==0){var q=L.pending;return q===null?y.next=y:(y.next=q.next,q.next=y),L.pending=y,qi(f,A)}return q=L.interleaved,q===null?(y.next=y,_c(L)):(y.next=q.next,q.next=y),L.interleaved=y,qi(f,A)}function Tu(f,y,A){if(y=y.updateQueue,y!==null&&(y=y.shared,(A&4194240)!==0)){var L=y.lanes;L&=f.pendingLanes,A|=L,y.lanes=A,ja(f,A)}}function xd(f,y){var A=f.updateQueue,L=f.alternate;if(L!==null&&(L=L.updateQueue,A===L)){var q=null,X=null;if(A=A.firstBaseUpdate,A!==null){do{var le={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};X===null?q=X=le:X=X.next=le,A=A.next}while(A!==null);X===null?q=X=y:X=X.next=y}else q=X=y;A={baseState:L.baseState,firstBaseUpdate:q,lastBaseUpdate:X,shared:L.shared,effects:L.effects},f.updateQueue=A;return}f=A.lastBaseUpdate,f===null?A.firstBaseUpdate=y:f.next=y,A.lastBaseUpdate=y}function Ho(f,y,A,L){var q=f.updateQueue;ws=!1;var X=q.firstBaseUpdate,le=q.lastBaseUpdate,xe=q.shared.pending;if(xe!==null){q.shared.pending=null;var be=xe,Ve=be.next;be.next=null,le===null?X=Ve:le.next=Ve,le=be;var ut=f.alternate;ut!==null&&(ut=ut.updateQueue,xe=ut.lastBaseUpdate,xe!==le&&(xe===null?ut.firstBaseUpdate=Ve:xe.next=Ve,ut.lastBaseUpdate=be))}if(X!==null){var dt=q.baseState;le=0,ut=Ve=be=null,xe=X;do{var at=xe.lane,Nt=xe.eventTime;if((L&at)===at){ut!==null&&(ut=ut.next={eventTime:Nt,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var jt=f,$t=xe;switch(at=y,Nt=A,$t.tag){case 1:if(jt=$t.payload,typeof jt=="function"){dt=jt.call(Nt,dt,at);break e}dt=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=$t.payload,at=typeof jt=="function"?jt.call(Nt,dt,at):jt,at==null)break e;dt=ee({},dt,at);break e;case 2:ws=!0}}xe.callback!==null&&xe.lane!==0&&(f.flags|=64,at=q.effects,at===null?q.effects=[xe]:at.push(xe))}else Nt={eventTime:Nt,lane:at,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},ut===null?(Ve=ut=Nt,be=dt):ut=ut.next=Nt,le|=at;if(xe=xe.next,xe===null){if(xe=q.shared.pending,xe===null)break;at=xe,xe=at.next,at.next=null,q.lastBaseUpdate=at,q.shared.pending=null}}while(!0);if(ut===null&&(be=dt),q.baseState=be,q.firstBaseUpdate=Ve,q.lastBaseUpdate=ut,y=q.shared.interleaved,y!==null){q=y;do le|=q.lane,q=q.next;while(q!==y)}else X===null&&(q.shared.lanes=0);Da|=le,f.lanes=le,f.memoizedState=dt}}function Sc(f,y,A){if(f=y.effects,y.effects=null,f!==null)for(y=0;y<f.length;y++){var L=f[y],q=L.callback;if(q!==null){if(L.callback=null,L=A,typeof q!="function")throw Error(n(191,q));q.call(L)}}}var Il={},yi=ye(Il),Dl=ye(Il),qo=ye(Il);function Wi(f){if(f===Il)throw Error(n(174));return f}function bc(f,y){switch(Le(qo,y),Le(Dl,f),Le(yi,Il),f=y.nodeType,f){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:pt(null,"");break;default:f=f===8?y.parentNode:y,y=f.namespaceURI||null,f=f.tagName,y=pt(y,f)}Se(yi),Le(yi,y)}function Ra(){Se(yi),Se(Dl),Se(qo)}function Tc(f){Wi(qo.current);var y=Wi(yi.current),A=pt(y,f.type);y!==A&&(Le(Dl,f),Le(yi,A))}function Cu(f){Dl.current===f&&(Se(yi),Se(Dl))}var qr=ye(0);function lo(f){for(var y=f;y!==null;){if(y.tag===13){var A=y.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Cc=[];function Ru(){for(var f=0;f<Cc.length;f++)Cc[f]._workInProgressVersionPrimary=null;Cc.length=0}var Pl=I.ReactCurrentDispatcher,Rc=I.ReactCurrentBatchConfig,wa=0,Kr=null,tn=null,un=null,Go=!1,kl=!1,uo=0,cr=0;function On(){throw Error(n(321))}function wc(f,y){if(y===null)return!1;for(var A=0;A<y.length&&A<f.length;A++)if(!Fe(f[A],y[A]))return!1;return!0}function co(f,y,A,L,q,X){if(wa=X,Kr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Pl.current=f===null||f.memoizedState===null?tp:Nu,f=A(L,q),kl){X=0;do{if(kl=!1,uo=0,25<=X)throw Error(n(301));X+=1,un=tn=null,y.updateQueue=null,Pl.current=Yo,f=A(L,q)}while(kl)}if(Pl.current=ku,y=tn!==null&&tn.next!==null,wa=0,un=tn=Kr=null,Go=!1,y)throw Error(n(300));return f}function wu(){var f=uo!==0;return uo=0,f}function vi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Kr.memoizedState=un=f:un=un.next=f,un}function Is(){if(tn===null){var f=Kr.alternate;f=f!==null?f.memoizedState:null}else f=tn.next;var y=un===null?Kr.memoizedState:un.next;if(y!==null)un=y,tn=f;else{if(f===null)throw Error(n(310));tn=f,f={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},un===null?Kr.memoizedState=un=f:un=un.next=f}return un}function Ln(f,y){return typeof y=="function"?y(f):y}function Ac(f){var y=Is(),A=y.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=f;var L=tn,q=L.baseQueue,X=A.pending;if(X!==null){if(q!==null){var le=q.next;q.next=X.next,X.next=le}L.baseQueue=q=X,A.pending=null}if(q!==null){X=q.next,L=L.baseState;var xe=le=null,be=null,Ve=X;do{var ut=Ve.lane;if((wa&ut)===ut)be!==null&&(be=be.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),L=Ve.hasEagerState?Ve.eagerState:f(L,Ve.action);else{var dt={lane:ut,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};be===null?(xe=be=dt,le=L):be=be.next=dt,Kr.lanes|=ut,Da|=ut}Ve=Ve.next}while(Ve!==null&&Ve!==X);be===null?le=L:be.next=xe,Fe(L,y.memoizedState)||(Vn=!0),y.memoizedState=L,y.baseState=le,y.baseQueue=be,A.lastRenderedState=L}if(f=A.interleaved,f!==null){q=f;do X=q.lane,Kr.lanes|=X,Da|=X,q=q.next;while(q!==f)}else q===null&&(A.lanes=0);return[y.memoizedState,A.dispatch]}function Wo(f){var y=Is(),A=y.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=f;var L=A.dispatch,q=A.pending,X=y.memoizedState;if(q!==null){A.pending=null;var le=q=q.next;do X=f(X,le.action),le=le.next;while(le!==q);Fe(X,y.memoizedState)||(Vn=!0),y.memoizedState=X,y.baseQueue===null&&(y.baseState=X),A.lastRenderedState=X}return[X,L]}function Au(){}function Ic(f,y){var A=Kr,L=Is(),q=y(),X=!Fe(L.memoizedState,q);if(X&&(L.memoizedState=q,Vn=!0),L=L.queue,xi(zi.bind(null,A,L,f),[f]),L.getSnapshot!==y||X||un!==null&&un.memoizedState.tag&1){if(A.flags|=2048,zo(9,Jn.bind(null,A,L,q,y),void 0,null),vn===null)throw Error(n(349));(wa&30)!==0||Dc(A,y,q)}return q}function Dc(f,y,A){f.flags|=16384,f={getSnapshot:y,value:A},y=Kr.updateQueue,y===null?(y={lastEffect:null,stores:null},Kr.updateQueue=y,y.stores=[f]):(A=y.stores,A===null?y.stores=[f]:A.push(f))}function Jn(f,y,A,L){y.value=A,y.getSnapshot=L,Iu(y)&&Pc(f)}function zi(f,y,A){return A(function(){Iu(y)&&Pc(f)})}function Iu(f){var y=f.getSnapshot;f=f.value;try{var A=y();return!Fe(f,A)}catch{return!0}}function Pc(f){var y=qi(f,1);y!==null&&Xs(y,f,1,-1)}function Nl(f){var y=vi();return typeof f=="function"&&(f=f()),y.memoizedState=y.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:f},y.queue=f,f=f.dispatch=Cd.bind(null,Kr,f),[y.memoizedState,f]}function zo(f,y,A,L){return f={tag:f,create:y,destroy:A,deps:L,next:null},y=Kr.updateQueue,y===null?(y={lastEffect:null,stores:null},Kr.updateQueue=y,y.lastEffect=f.next=f):(A=y.lastEffect,A===null?y.lastEffect=f.next=f:(L=A.next,A.next=f,f.next=L,y.lastEffect=f)),f}function Du(){return Is().memoizedState}function Ol(f,y,A,L){var q=vi();Kr.flags|=f,q.memoizedState=zo(1|y,A,void 0,L===void 0?null:L)}function Ko(f,y,A,L){var q=Is();L=L===void 0?null:L;var X=void 0;if(tn!==null){var le=tn.memoizedState;if(X=le.destroy,L!==null&&wc(L,le.deps)){q.memoizedState=zo(y,A,X,L);return}}Kr.flags|=f,q.memoizedState=zo(1|y,A,X,L)}function Pu(f,y){return Ol(8390656,8,f,y)}function xi(f,y){return Ko(2048,8,f,y)}function Ed(f,y){return Ko(4,2,f,y)}function Ki(f,y){return Ko(4,4,f,y)}function kc(f,y){if(typeof y=="function")return f=f(),y(f),function(){y(null)};if(y!=null)return f=f(),y.current=f,function(){y.current=null}}function Nc(f,y,A){return A=A!=null?A.concat([f]):null,Ko(4,4,kc.bind(null,y,f),A)}function Ll(){}function _d(f,y){var A=Is();y=y===void 0?null:y;var L=A.memoizedState;return L!==null&&y!==null&&wc(y,L[1])?L[0]:(A.memoizedState=[f,y],f)}function Sd(f,y){var A=Is();y=y===void 0?null:y;var L=A.memoizedState;return L!==null&&y!==null&&wc(y,L[1])?L[0]:(f=f(),A.memoizedState=[f,y],f)}function bd(f,y,A){return(wa&21)===0?(f.baseState&&(f.baseState=!1,Vn=!0),f.memoizedState=A):(Fe(A,y)||(A=sl(),Kr.lanes|=A,Da|=A,f.baseState=!0),y)}function Td(f,y){var A=gr;gr=A!==0&&4>A?A:4,f(!0);var L=Rc.transition;Rc.transition={};try{f(!1),y()}finally{gr=A,Rc.transition=L}}function Oc(){return Is().memoizedState}function ep(f,y,A){var L=Na(f);if(A={lane:L,action:A,hasEagerState:!1,eagerState:null,next:null},Lc(f))Un(y,A);else if(A=Su(f,y,A,L),A!==null){var q=Gn();Xs(A,f,L,q),Ws(A,y,L)}}function Cd(f,y,A){var L=Na(f),q={lane:L,action:A,hasEagerState:!1,eagerState:null,next:null};if(Lc(f))Un(y,q);else{var X=f.alternate;if(f.lanes===0&&(X===null||X.lanes===0)&&(X=y.lastRenderedReducer,X!==null))try{var le=y.lastRenderedState,xe=X(le,A);if(q.hasEagerState=!0,q.eagerState=xe,Fe(xe,le)){var be=y.interleaved;be===null?(q.next=q,_c(y)):(q.next=be.next,be.next=q),y.interleaved=q;return}}catch{}finally{}A=Su(f,y,q,L),A!==null&&(q=Gn(),Xs(A,f,L,q),Ws(A,y,L))}}function Lc(f){var y=f.alternate;return f===Kr||y!==null&&y===Kr}function Un(f,y){kl=Go=!0;var A=f.pending;A===null?y.next=y:(y.next=A.next,A.next=y),f.pending=y}function Ws(f,y,A){if((A&4194240)!==0){var L=y.lanes;L&=f.pendingLanes,A|=L,y.lanes=A,ja(f,A)}}var ku={readContext:Rs,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},tp={readContext:Rs,useCallback:function(f,y){return vi().memoizedState=[f,y===void 0?null:y],f},useContext:Rs,useEffect:Pu,useImperativeHandle:function(f,y,A){return A=A!=null?A.concat([f]):null,Ol(4194308,4,kc.bind(null,y,f),A)},useLayoutEffect:function(f,y){return Ol(4194308,4,f,y)},useInsertionEffect:function(f,y){return Ol(4,2,f,y)},useMemo:function(f,y){var A=vi();return y=y===void 0?null:y,f=f(),A.memoizedState=[f,y],f},useReducer:function(f,y,A){var L=vi();return y=A!==void 0?A(y):y,L.memoizedState=L.baseState=y,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:y},L.queue=f,f=f.dispatch=ep.bind(null,Kr,f),[L.memoizedState,f]},useRef:function(f){var y=vi();return f={current:f},y.memoizedState=f},useState:Nl,useDebugValue:Ll,useDeferredValue:function(f){return vi().memoizedState=f},useTransition:function(){var f=Nl(!1),y=f[0];return f=Td.bind(null,f[1]),vi().memoizedState=f,[y,f]},useMutableSource:function(){},useSyncExternalStore:function(f,y,A){var L=Kr,q=vi();if(Ur){if(A===void 0)throw Error(n(407));A=A()}else{if(A=y(),vn===null)throw Error(n(349));(wa&30)!==0||Dc(L,y,A)}q.memoizedState=A;var X={value:A,getSnapshot:y};return q.queue=X,Pu(zi.bind(null,L,X,f),[f]),L.flags|=2048,zo(9,Jn.bind(null,L,X,A,y),void 0,null),A},useId:function(){var f=vi(),y=vn.identifierPrefix;if(Ur){var A=fi,L=pi;A=(L&~(1<<32-ln(L)-1)).toString(32)+A,y=":"+y+"R"+A,A=uo++,0<A&&(y+="H"+A.toString(32)),y+=":"}else A=cr++,y=":"+y+"r"+A.toString(32)+":";return f.memoizedState=y},unstable_isNewReconciler:!1},Nu={readContext:Rs,useCallback:_d,useContext:Rs,useEffect:xi,useImperativeHandle:Nc,useInsertionEffect:Ed,useLayoutEffect:Ki,useMemo:Sd,useReducer:Ac,useRef:Du,useState:function(){return Ac(Ln)},useDebugValue:Ll,useDeferredValue:function(f){var y=Is();return bd(y,tn.memoizedState,f)},useTransition:function(){var f=Ac(Ln)[0],y=Is().memoizedState;return[f,y]},useMutableSource:Au,useSyncExternalStore:Ic,useId:Oc,unstable_isNewReconciler:!1},Yo={readContext:Rs,useCallback:_d,useContext:Rs,useEffect:xi,useImperativeHandle:Nc,useInsertionEffect:Ed,useLayoutEffect:Ki,useMemo:Sd,useReducer:Wo,useRef:Du,useState:function(){return Wo(Ln)},useDebugValue:Ll,useDeferredValue:function(f){var y=Is();return tn===null?y.memoizedState=f:bd(y,tn.memoizedState,f)},useTransition:function(){var f=Wo(Ln)[0],y=Is().memoizedState;return[f,y]},useMutableSource:Au,useSyncExternalStore:Ic,useId:Oc,unstable_isNewReconciler:!1};function Ds(f,y){if(f&&f.defaultProps){y=ee({},y),f=f.defaultProps;for(var A in f)y[A]===void 0&&(y[A]=f[A]);return y}return y}function Ou(f,y,A,L){y=f.memoizedState,A=A(L,y),A=A==null?y:ee({},y,A),f.memoizedState=A,f.lanes===0&&(f.updateQueue.baseState=A)}var Lu={isMounted:function(f){return(f=f._reactInternals)?Ct(f)===f:!1},enqueueSetState:function(f,y,A){f=f._reactInternals;var L=Gn(),q=Na(f),X=Gi(L,q);X.payload=y,A!=null&&(X.callback=A),y=As(f,X,q),y!==null&&(Xs(y,f,q,L),Tu(y,f,q))},enqueueReplaceState:function(f,y,A){f=f._reactInternals;var L=Gn(),q=Na(f),X=Gi(L,q);X.tag=1,X.payload=y,A!=null&&(X.callback=A),y=As(f,X,q),y!==null&&(Xs(y,f,q,L),Tu(y,f,q))},enqueueForceUpdate:function(f,y){f=f._reactInternals;var A=Gn(),L=Na(f),q=Gi(A,L);q.tag=2,y!=null&&(q.callback=y),y=As(f,q,L),y!==null&&(Xs(y,f,L,A),Tu(y,f,L))}};function jc(f,y,A,L,q,X,le){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(L,X,le):y.prototype&&y.prototype.isPureReactComponent?!Pt(A,L)||!Pt(q,X):!0}function po(f,y,A){var L=!1,q=vt,X=y.contextType;return typeof X=="object"&&X!==null?X=Rs(X):(q=Nr(y)?Vt:Ge.current,L=y.contextTypes,X=(L=L!=null)?Br(f,q):vt),y=new y(A,X),f.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Lu,f.stateNode=y,y._reactInternals=f,L&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=q,f.__reactInternalMemoizedMaskedChildContext=X),y}function Qo(f,y,A,L){f=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(A,L),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(A,L),y.state!==f&&Lu.enqueueReplaceState(y,y.state,null)}function Mc(f,y,A,L){var q=f.stateNode;q.props=A,q.state=f.memoizedState,q.refs={},bu(f);var X=y.contextType;typeof X=="object"&&X!==null?q.context=Rs(X):(X=Nr(y)?Vt:Ge.current,q.context=Br(f,X)),q.state=f.memoizedState,X=y.getDerivedStateFromProps,typeof X=="function"&&(Ou(f,y,X,A),q.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(y=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),y!==q.state&&Lu.enqueueReplaceState(q,q.state,null),Ho(f,A,q,L),q.state=f.memoizedState),typeof q.componentDidMount=="function"&&(f.flags|=4194308)}function fo(f,y){try{var A="",L=y;do A+=fe(L),L=L.return;while(L);var q=A}catch(X){q=`
Error generating stack: `+X.message+`
`+X.stack}return{value:f,source:y,stack:q,digest:null}}function ju(f,y,A){return{value:f,source:null,stack:A??null,digest:y??null}}function Xo(f,y){try{console.error(y.value)}catch(A){setTimeout(function(){throw A})}}var Rd=typeof WeakMap=="function"?WeakMap:Map;function jl(f,y,A){A=Gi(-1,A),A.tag=3,A.payload={element:null};var L=y.value;return A.callback=function(){zu||(zu=!0,Zc=L),Xo(f,y)},A}function Mu(f,y,A){A=Gi(-1,A),A.tag=3;var L=f.type.getDerivedStateFromError;if(typeof L=="function"){var q=y.value;A.payload=function(){return L(q)},A.callback=function(){Xo(f,y)}}var X=f.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(A.callback=function(){Xo(f,y),typeof L!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var le=y.stack;this.componentDidCatch(y.value,{componentStack:le!==null?le:""})}),A}function Ml(f,y,A){var L=f.pingCache;if(L===null){L=f.pingCache=new Rd;var q=new Set;L.set(y,q)}else q=L.get(y),q===void 0&&(q=new Set,L.set(y,q));q.has(A)||(q.add(A),f=dp.bind(null,f,y,A),y.then(f,f))}function wd(f){do{var y;if((y=f.tag===13)&&(y=f.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return f;f=f.return}while(f!==null);return null}function $c(f,y,A,L,q){return(f.mode&1)===0?(f===y?f.flags|=65536:(f.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(y=Gi(-1,1),y.tag=2,As(A,y,1))),A.lanes|=1),f):(f.flags|=65536,f.lanes=q,f)}var $u=I.ReactCurrentOwner,Vn=!1;function bn(f,y,A,L){y.child=f===null?Eu(y,null,A,L):Zr(y,f.child,A,L)}function Ad(f,y,A,L,q){A=A.render;var X=y.ref;return Ca(y,q),L=co(f,y,A,L,X,q),A=wu(),f!==null&&!Vn?(y.updateQueue=f.updateQueue,y.flags&=-2053,f.lanes&=~q,zs(f,y,q)):(Ur&&A&&Cl(y),y.flags|=1,bn(f,y,L,q),y.child)}function Fc(f,y,A,L,q){if(f===null){var X=A.type;return typeof X=="function"&&!Zu(X)&&X.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(y.tag=15,y.type=X,Ei(f,y,X,L,q)):(f=ec(A.type,null,L,y,y.mode,q),f.ref=y.ref,f.return=y,y.child=f)}if(X=f.child,(f.lanes&q)===0){var le=X.memoizedProps;if(A=A.compare,A=A!==null?A:Pt,A(le,L)&&f.ref===y.ref)return zs(f,y,q)}return y.flags|=1,f=Js(X,L),f.ref=y.ref,f.return=y,y.child=f}function Ei(f,y,A,L,q){if(f!==null){var X=f.memoizedProps;if(Pt(X,L)&&f.ref===y.ref)if(Vn=!1,y.pendingProps=L=X,(f.lanes&q)!==0)(f.flags&131072)!==0&&(Vn=!0);else return y.lanes=f.lanes,zs(f,y,q)}return Vc(f,y,A,L,q)}function Bc(f,y,A){var L=y.pendingProps,q=L.children,X=f!==null?f.memoizedState:null;if(L.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(tl,gs),gs|=A;else{if((A&1073741824)===0)return f=X!==null?X.baseLanes|A:A,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:f,cachePool:null,transitions:null},y.updateQueue=null,Le(tl,gs),gs|=f,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=X!==null?X.baseLanes:A,Le(tl,gs),gs|=L}else X!==null?(L=X.baseLanes|A,y.memoizedState=null):L=A,Le(tl,gs),gs|=L;return bn(f,y,q,A),y.child}function Uc(f,y){var A=y.ref;(f===null&&A!==null||f!==null&&f.ref!==A)&&(y.flags|=512,y.flags|=2097152)}function Vc(f,y,A,L,q){var X=Nr(A)?Vt:Ge.current;return X=Br(y,X),Ca(y,q),A=co(f,y,A,L,X,q),L=wu(),f!==null&&!Vn?(y.updateQueue=f.updateQueue,y.flags&=-2053,f.lanes&=~q,zs(f,y,q)):(Ur&&L&&Cl(y),y.flags|=1,bn(f,y,A,q),y.child)}function Hc(f,y,A,L,q){if(Nr(A)){var X=!0;gn(y)}else X=!1;if(Ca(y,q),y.stateNode===null)Bu(f,y),po(y,A,L),Mc(y,A,L,q),L=!0;else if(f===null){var le=y.stateNode,xe=y.memoizedProps;le.props=xe;var be=le.context,Ve=A.contextType;typeof Ve=="object"&&Ve!==null?Ve=Rs(Ve):(Ve=Nr(A)?Vt:Ge.current,Ve=Br(y,Ve));var ut=A.getDerivedStateFromProps,dt=typeof ut=="function"||typeof le.getSnapshotBeforeUpdate=="function";dt||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(xe!==L||be!==Ve)&&Qo(y,le,L,Ve),ws=!1;var at=y.memoizedState;le.state=at,Ho(y,L,le,q),be=y.memoizedState,xe!==L||at!==be||Ot.current||ws?(typeof ut=="function"&&(Ou(y,A,ut,L),be=y.memoizedState),(xe=ws||jc(y,A,xe,L,at,be,Ve))?(dt||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount()),typeof le.componentDidMount=="function"&&(y.flags|=4194308)):(typeof le.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=L,y.memoizedState=be),le.props=L,le.state=be,le.context=Ve,L=xe):(typeof le.componentDidMount=="function"&&(y.flags|=4194308),L=!1)}else{le=y.stateNode,vd(f,y),xe=y.memoizedProps,Ve=y.type===y.elementType?xe:Ds(y.type,xe),le.props=Ve,dt=y.pendingProps,at=le.context,be=A.contextType,typeof be=="object"&&be!==null?be=Rs(be):(be=Nr(A)?Vt:Ge.current,be=Br(y,be));var Nt=A.getDerivedStateFromProps;(ut=typeof Nt=="function"||typeof le.getSnapshotBeforeUpdate=="function")||typeof le.UNSAFE_componentWillReceiveProps!="function"&&typeof le.componentWillReceiveProps!="function"||(xe!==dt||at!==be)&&Qo(y,le,L,be),ws=!1,at=y.memoizedState,le.state=at,Ho(y,L,le,q);var jt=y.memoizedState;xe!==dt||at!==jt||Ot.current||ws?(typeof Nt=="function"&&(Ou(y,A,Nt,L),jt=y.memoizedState),(Ve=ws||jc(y,A,Ve,L,at,jt,be)||!1)?(ut||typeof le.UNSAFE_componentWillUpdate!="function"&&typeof le.componentWillUpdate!="function"||(typeof le.componentWillUpdate=="function"&&le.componentWillUpdate(L,jt,be),typeof le.UNSAFE_componentWillUpdate=="function"&&le.UNSAFE_componentWillUpdate(L,jt,be)),typeof le.componentDidUpdate=="function"&&(y.flags|=4),typeof le.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof le.componentDidUpdate!="function"||xe===f.memoizedProps&&at===f.memoizedState||(y.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||xe===f.memoizedProps&&at===f.memoizedState||(y.flags|=1024),y.memoizedProps=L,y.memoizedState=jt),le.props=L,le.state=jt,le.context=be,L=Ve):(typeof le.componentDidUpdate!="function"||xe===f.memoizedProps&&at===f.memoizedState||(y.flags|=4),typeof le.getSnapshotBeforeUpdate!="function"||xe===f.memoizedProps&&at===f.memoizedState||(y.flags|=1024),L=!1)}return qc(f,y,A,L,X,q)}function qc(f,y,A,L,q,X){Uc(f,y);var le=(y.flags&128)!==0;if(!L&&!le)return q&&Sa(y,A,!1),zs(f,y,X);L=y.stateNode,$u.current=y;var xe=le&&typeof A.getDerivedStateFromError!="function"?null:L.render();return y.flags|=1,f!==null&&le?(y.child=Zr(y,f.child,null,X),y.child=Zr(y,null,xe,X)):bn(f,y,xe,X),y.memoizedState=L.state,q&&Sa(y,A,!0),y.child}function Id(f){var y=f.stateNode;y.pendingContext?xa(f,y.pendingContext,y.pendingContext!==y.context):y.context&&xa(f,y.context,!1),bc(f,y.containerInfo)}function _i(f,y,A,L,q){return mi(),gi(q),y.flags|=256,bn(f,y,A,L),y.child}var $l={dehydrated:null,treeContext:null,retryLane:0};function Fl(f){return{baseLanes:f,cachePool:null,transitions:null}}function Fu(f,y,A){var L=y.pendingProps,q=qr.current,X=!1,le=(y.flags&128)!==0,xe;if((xe=le)||(xe=f!==null&&f.memoizedState===null?!1:(q&2)!==0),xe?(X=!0,y.flags&=-129):(f===null||f.memoizedState!==null)&&(q|=1),Le(qr,q&1),f===null)return Xn(y),f=y.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((y.mode&1)===0?y.lanes=1:f.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(le=L.children,f=L.fallback,X?(L=y.mode,X=y.child,le={mode:"hidden",children:le},(L&1)===0&&X!==null?(X.childLanes=0,X.pendingProps=le):X=tc(le,L,0,null),f=vo(f,L,A,null),X.return=y,f.return=y,X.sibling=f,y.child=X,y.child.memoizedState=Fl(A),y.memoizedState=$l,f):Jo(y,le));if(q=f.memoizedState,q!==null&&(xe=q.dehydrated,xe!==null))return Kt(f,y,le,L,xe,q,A);if(X){X=L.fallback,le=y.mode,q=f.child,xe=q.sibling;var be={mode:"hidden",children:L.children};return(le&1)===0&&y.child!==q?(L=y.child,L.childLanes=0,L.pendingProps=be,y.deletions=null):(L=Js(q,be),L.subtreeFlags=q.subtreeFlags&14680064),xe!==null?X=Js(xe,X):(X=vo(X,le,A,null),X.flags|=2),X.return=y,L.return=y,L.sibling=X,y.child=L,L=X,X=y.child,le=f.child.memoizedState,le=le===null?Fl(A):{baseLanes:le.baseLanes|A,cachePool:null,transitions:le.transitions},X.memoizedState=le,X.childLanes=f.childLanes&~A,y.memoizedState=$l,L}return X=f.child,f=X.sibling,L=Js(X,{mode:"visible",children:L.children}),(y.mode&1)===0&&(L.lanes=A),L.return=y,L.sibling=null,f!==null&&(A=y.deletions,A===null?(y.deletions=[f],y.flags|=16):A.push(f)),y.child=L,y.memoizedState=null,L}function Jo(f,y){return y=tc({mode:"visible",children:y},f.mode,0,null),y.return=f,f.child=y}function Yi(f,y,A,L){return L!==null&&gi(L),Zr(y,f.child,null,A),f=Jo(y,y.pendingProps.children),f.flags|=2,y.memoizedState=null,f}function Kt(f,y,A,L,q,X,le){if(A)return y.flags&256?(y.flags&=-257,L=ju(Error(n(422))),Yi(f,y,le,L)):y.memoizedState!==null?(y.child=f.child,y.flags|=128,null):(X=L.fallback,q=y.mode,L=tc({mode:"visible",children:L.children},q,0,null),X=vo(X,q,le,null),X.flags|=2,L.return=y,X.return=y,L.sibling=X,y.child=L,(y.mode&1)!==0&&Zr(y,f.child,null,le),y.child.memoizedState=Fl(le),y.memoizedState=$l,X);if((y.mode&1)===0)return Yi(f,y,le,null);if(q.data==="$!"){if(L=q.nextSibling&&q.nextSibling.dataset,L)var xe=L.dgst;return L=xe,X=Error(n(419)),L=ju(X,L,void 0),Yi(f,y,le,L)}if(xe=(le&f.childLanes)!==0,Vn||xe){if(L=vn,L!==null){switch(le&-le){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(L.suspendedLanes|le))!==0?0:q,q!==0&&q!==X.retryLane&&(X.retryLane=q,qi(f,q),Xs(L,f,q,-1))}return ad(),L=ju(Error(n(421))),Yi(f,y,le,L)}return q.data==="$?"?(y.flags|=128,y.child=f.child,y=pp.bind(null,f),q._reactRetry=y,null):(f=X.treeContext,fs=ci(q.nextSibling),Nn=y,Ur=!0,Gs=null,f!==null&&(Ts[Cs++]=pi,Ts[Cs++]=fi,Ts[Cs++]=no,pi=f.id,fi=f.overflow,no=y),y=Jo(y,L.children),y.flags|=4096,y)}function Bl(f,y,A){f.lanes|=y;var L=f.alternate;L!==null&&(L.lanes|=y),Sn(f.return,y,A)}function Ul(f,y,A,L,q){var X=f.memoizedState;X===null?f.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:L,tail:A,tailMode:q}:(X.isBackwards=y,X.rendering=null,X.renderingStartTime=0,X.last=L,X.tail=A,X.tailMode=q)}function Aa(f,y,A){var L=y.pendingProps,q=L.revealOrder,X=L.tail;if(bn(f,y,L.children,A),L=qr.current,(L&2)!==0)L=L&1|2,y.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=y.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Bl(f,A,y);else if(f.tag===19)Bl(f,A,y);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===y)break e;for(;f.sibling===null;){if(f.return===null||f.return===y)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}L&=1}if(Le(qr,L),(y.mode&1)===0)y.memoizedState=null;else switch(q){case"forwards":for(A=y.child,q=null;A!==null;)f=A.alternate,f!==null&&lo(f)===null&&(q=A),A=A.sibling;A=q,A===null?(q=y.child,y.child=null):(q=A.sibling,A.sibling=null),Ul(y,!1,q,A,X);break;case"backwards":for(A=null,q=y.child,y.child=null;q!==null;){if(f=q.alternate,f!==null&&lo(f)===null){y.child=q;break}f=q.sibling,q.sibling=A,A=q,q=f}Ul(y,!0,A,null,X);break;case"together":Ul(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Bu(f,y){(y.mode&1)===0&&f!==null&&(f.alternate=null,y.alternate=null,y.flags|=2)}function zs(f,y,A){if(f!==null&&(y.dependencies=f.dependencies),Da|=y.lanes,(A&y.childLanes)===0)return null;if(f!==null&&y.child!==f.child)throw Error(n(153));if(y.child!==null){for(f=y.child,A=Js(f,f.pendingProps),y.child=A,A.return=y;f.sibling!==null;)f=f.sibling,A=A.sibling=Js(f,f.pendingProps),A.return=y;A.sibling=null}return y.child}function Dd(f,y,A){switch(y.tag){case 3:Id(y),mi();break;case 5:Tc(y);break;case 1:Nr(y.type)&&gn(y);break;case 4:bc(y,y.stateNode.containerInfo);break;case 10:var L=y.type._context,q=y.memoizedProps.value;Le(Al,L._currentValue),L._currentValue=q;break;case 13:if(L=y.memoizedState,L!==null)return L.dehydrated!==null?(Le(qr,qr.current&1),y.flags|=128,null):(A&y.child.childLanes)!==0?Fu(f,y,A):(Le(qr,qr.current&1),f=zs(f,y,A),f!==null?f.sibling:null);Le(qr,qr.current&1);break;case 19:if(L=(A&y.childLanes)!==0,(f.flags&128)!==0){if(L)return Aa(f,y,A);y.flags|=128}if(q=y.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Le(qr,qr.current),L)break;return null;case 22:case 23:return y.lanes=0,Bc(f,y,A)}return zs(f,y,A)}var Tn,Gc,Pd,Wc;Tn=function(f,y){for(var A=y.child;A!==null;){if(A.tag===5||A.tag===6)f.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===y)break;for(;A.sibling===null;){if(A.return===null||A.return===y)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},Gc=function(){},Pd=function(f,y,A,L){var q=f.memoizedProps;if(q!==L){f=y.stateNode,Wi(yi.current);var X=null;switch(A){case"input":q=Pe(f,q),L=Pe(f,L),X=[];break;case"select":q=ee({},q,{value:void 0}),L=ee({},L,{value:void 0}),X=[];break;case"textarea":q=mt(f,q),L=mt(f,L),X=[];break;default:typeof q.onClick!="function"&&typeof L.onClick=="function"&&(f.onclick=Za)}ke(A,L);var le;A=null;for(Ve in q)if(!L.hasOwnProperty(Ve)&&q.hasOwnProperty(Ve)&&q[Ve]!=null)if(Ve==="style"){var xe=q[Ve];for(le in xe)xe.hasOwnProperty(le)&&(A||(A={}),A[le]="")}else Ve!=="dangerouslySetInnerHTML"&&Ve!=="children"&&Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&Ve!=="autoFocus"&&(i.hasOwnProperty(Ve)?X||(X=[]):(X=X||[]).push(Ve,null));for(Ve in L){var be=L[Ve];if(xe=q?.[Ve],L.hasOwnProperty(Ve)&&be!==xe&&(be!=null||xe!=null))if(Ve==="style")if(xe){for(le in xe)!xe.hasOwnProperty(le)||be&&be.hasOwnProperty(le)||(A||(A={}),A[le]="");for(le in be)be.hasOwnProperty(le)&&xe[le]!==be[le]&&(A||(A={}),A[le]=be[le])}else A||(X||(X=[]),X.push(Ve,A)),A=be;else Ve==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,xe=xe?xe.__html:void 0,be!=null&&xe!==be&&(X=X||[]).push(Ve,be)):Ve==="children"?typeof be!="string"&&typeof be!="number"||(X=X||[]).push(Ve,""+be):Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ve)?(be!=null&&Ve==="onScroll"&&Fr("scroll",f),X||xe===be||(X=[])):(X=X||[]).push(Ve,be))}A&&(X=X||[]).push("style",A);var Ve=X;(y.updateQueue=Ve)&&(y.flags|=4)}},Wc=function(f,y,A,L){A!==L&&(y.flags|=4)};function Vl(f,y){if(!Ur)switch(f.tailMode){case"hidden":y=f.tail;for(var A=null;y!==null;)y.alternate!==null&&(A=y),y=y.sibling;A===null?f.tail=null:A.sibling=null;break;case"collapsed":A=f.tail;for(var L=null;A!==null;)A.alternate!==null&&(L=A),A=A.sibling;L===null?y||f.tail===null?f.tail=null:f.tail.sibling=null:L.sibling=null}}function Cn(f){var y=f.alternate!==null&&f.alternate.child===f.child,A=0,L=0;if(y)for(var q=f.child;q!==null;)A|=q.lanes|q.childLanes,L|=q.subtreeFlags&14680064,L|=q.flags&14680064,q.return=f,q=q.sibling;else for(q=f.child;q!==null;)A|=q.lanes|q.childLanes,L|=q.subtreeFlags,L|=q.flags,q.return=f,q=q.sibling;return f.subtreeFlags|=L,f.childLanes=A,y}function rp(f,y,A){var L=y.pendingProps;switch(io(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(y),null;case 1:return Nr(y.type)&&ps(),Cn(y),null;case 3:return L=y.stateNode,Ra(),Se(Ot),Se(Ge),Ru(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(f===null||f.child===null)&&(Rl(y)?y.flags|=4:f===null||f.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Gs!==null&&(rd(Gs),Gs=null))),Gc(f,y),Cn(y),null;case 5:Cu(y);var q=Wi(qo.current);if(A=y.type,f!==null&&y.stateNode!=null)Pd(f,y,A,L,q),f.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!L){if(y.stateNode===null)throw Error(n(166));return Cn(y),null}if(f=Wi(yi.current),Rl(y)){L=y.stateNode,A=y.type;var X=y.memoizedProps;switch(L[bs]=y,L[di]=X,f=(y.mode&1)!==0,A){case"dialog":Fr("cancel",L),Fr("close",L);break;case"iframe":case"object":case"embed":Fr("load",L);break;case"video":case"audio":for(q=0;q<hn.length;q++)Fr(hn[q],L);break;case"source":Fr("error",L);break;case"img":case"image":case"link":Fr("error",L),Fr("load",L);break;case"details":Fr("toggle",L);break;case"input":Qe(L,X),Fr("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!X.multiple},Fr("invalid",L);break;case"textarea":st(L,X),Fr("invalid",L)}ke(A,X),q=null;for(var le in X)if(X.hasOwnProperty(le)){var xe=X[le];le==="children"?typeof xe=="string"?L.textContent!==xe&&(X.suppressHydrationWarning!==!0&&Ja(L.textContent,xe,f),q=["children",xe]):typeof xe=="number"&&L.textContent!==""+xe&&(X.suppressHydrationWarning!==!0&&Ja(L.textContent,xe,f),q=["children",""+xe]):i.hasOwnProperty(le)&&xe!=null&&le==="onScroll"&&Fr("scroll",L)}switch(A){case"input":rt(L),ft(L,X,!0);break;case"textarea":rt(L),bt(L);break;case"select":case"option":break;default:typeof X.onClick=="function"&&(L.onclick=Za)}L=q,y.updateQueue=L,L!==null&&(y.flags|=4)}else{le=q.nodeType===9?q:q.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Mt(A)),f==="http://www.w3.org/1999/xhtml"?A==="script"?(f=le.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof L.is=="string"?f=le.createElement(A,{is:L.is}):(f=le.createElement(A),A==="select"&&(le=f,L.multiple?le.multiple=!0:L.size&&(le.size=L.size))):f=le.createElementNS(f,A),f[bs]=y,f[di]=L,Tn(f,y,!1,!1),y.stateNode=f;e:{switch(le=Oe(A,L),A){case"dialog":Fr("cancel",f),Fr("close",f),q=L;break;case"iframe":case"object":case"embed":Fr("load",f),q=L;break;case"video":case"audio":for(q=0;q<hn.length;q++)Fr(hn[q],f);q=L;break;case"source":Fr("error",f),q=L;break;case"img":case"image":case"link":Fr("error",f),Fr("load",f),q=L;break;case"details":Fr("toggle",f),q=L;break;case"input":Qe(f,L),q=Pe(f,L),Fr("invalid",f);break;case"option":q=L;break;case"select":f._wrapperState={wasMultiple:!!L.multiple},q=ee({},L,{value:void 0}),Fr("invalid",f);break;case"textarea":st(f,L),q=mt(f,L),Fr("invalid",f);break;default:q=L}ke(A,q),xe=q;for(X in xe)if(xe.hasOwnProperty(X)){var be=xe[X];X==="style"?Ir(f,be):X==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,be!=null&&Ft(f,be)):X==="children"?typeof be=="string"?(A!=="textarea"||be!=="")&&Qt(f,be):typeof be=="number"&&Qt(f,""+be):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?be!=null&&X==="onScroll"&&Fr("scroll",f):be!=null&&T(f,X,be,le))}switch(A){case"input":rt(f),ft(f,L,!1);break;case"textarea":rt(f),bt(f);break;case"option":L.value!=null&&f.setAttribute("value",""+Ye(L.value));break;case"select":f.multiple=!!L.multiple,X=L.value,X!=null?qe(f,!!L.multiple,X,!1):L.defaultValue!=null&&qe(f,!!L.multiple,L.defaultValue,!0);break;default:typeof q.onClick=="function"&&(f.onclick=Za)}switch(A){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}}L&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Cn(y),null;case 6:if(f&&y.stateNode!=null)Wc(f,y,f.memoizedProps,L);else{if(typeof L!="string"&&y.stateNode===null)throw Error(n(166));if(A=Wi(qo.current),Wi(yi.current),Rl(y)){if(L=y.stateNode,A=y.memoizedProps,L[bs]=y,(X=L.nodeValue!==A)&&(f=Nn,f!==null))switch(f.tag){case 3:Ja(L.nodeValue,A,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Ja(L.nodeValue,A,(f.mode&1)!==0)}X&&(y.flags|=4)}else L=(A.nodeType===9?A:A.ownerDocument).createTextNode(L),L[bs]=y,y.stateNode=L}return Cn(y),null;case 13:if(Se(qr),L=y.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Ur&&fs!==null&&(y.mode&1)!==0&&(y.flags&128)===0)xc(),mi(),y.flags|=98560,X=!1;else if(X=Rl(y),L!==null&&L.dehydrated!==null){if(f===null){if(!X)throw Error(n(318));if(X=y.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(n(317));X[bs]=y}else mi(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Cn(y),X=!1}else Gs!==null&&(rd(Gs),Gs=null),X=!0;if(!X)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=A,y):(L=L!==null,L!==(f!==null&&f.memoizedState!==null)&&L&&(y.child.flags|=8192,(y.mode&1)!==0&&(f===null||(qr.current&1)!==0?dn===0&&(dn=3):ad())),y.updateQueue!==null&&(y.flags|=4),Cn(y),null);case 4:return Ra(),Gc(f,y),f===null&&Hs(y.stateNode.containerInfo),Cn(y),null;case 10:return _u(y.type._context),Cn(y),null;case 17:return Nr(y.type)&&ps(),Cn(y),null;case 19:if(Se(qr),X=y.memoizedState,X===null)return Cn(y),null;if(L=(y.flags&128)!==0,le=X.rendering,le===null)if(L)Vl(X,!1);else{if(dn!==0||f!==null&&(f.flags&128)!==0)for(f=y.child;f!==null;){if(le=lo(f),le!==null){for(y.flags|=128,Vl(X,!1),L=le.updateQueue,L!==null&&(y.updateQueue=L,y.flags|=4),y.subtreeFlags=0,L=A,A=y.child;A!==null;)X=A,f=L,X.flags&=14680066,le=X.alternate,le===null?(X.childLanes=0,X.lanes=f,X.child=null,X.subtreeFlags=0,X.memoizedProps=null,X.memoizedState=null,X.updateQueue=null,X.dependencies=null,X.stateNode=null):(X.childLanes=le.childLanes,X.lanes=le.lanes,X.child=le.child,X.subtreeFlags=0,X.deletions=null,X.memoizedProps=le.memoizedProps,X.memoizedState=le.memoizedState,X.updateQueue=le.updateQueue,X.type=le.type,f=le.dependencies,X.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A=A.sibling;return Le(qr,qr.current&1|2),y.child}f=f.sibling}X.tail!==null&&qt()>ho&&(y.flags|=128,L=!0,Vl(X,!1),y.lanes=4194304)}else{if(!L)if(f=lo(le),f!==null){if(y.flags|=128,L=!0,A=f.updateQueue,A!==null&&(y.updateQueue=A,y.flags|=4),Vl(X,!0),X.tail===null&&X.tailMode==="hidden"&&!le.alternate&&!Ur)return Cn(y),null}else 2*qt()-X.renderingStartTime>ho&&A!==1073741824&&(y.flags|=128,L=!0,Vl(X,!1),y.lanes=4194304);X.isBackwards?(le.sibling=y.child,y.child=le):(A=X.last,A!==null?A.sibling=le:y.child=le,X.last=le)}return X.tail!==null?(y=X.tail,X.rendering=y,X.tail=y.sibling,X.renderingStartTime=qt(),y.sibling=null,A=qr.current,Le(qr,L?A&1|2:A&1),y):(Cn(y),null);case 22:case 23:return sd(),L=y.memoizedState!==null,f!==null&&f.memoizedState!==null!==L&&(y.flags|=8192),L&&(y.mode&1)!==0?(gs&1073741824)!==0&&(Cn(y),y.subtreeFlags&6&&(y.flags|=8192)):Cn(y),null;case 24:return null;case 25:return null}throw Error(n(156,y.tag))}function np(f,y){switch(io(y),y.tag){case 1:return Nr(y.type)&&ps(),f=y.flags,f&65536?(y.flags=f&-65537|128,y):null;case 3:return Ra(),Se(Ot),Se(Ge),Ru(),f=y.flags,(f&65536)!==0&&(f&128)===0?(y.flags=f&-65537|128,y):null;case 5:return Cu(y),null;case 13:if(Se(qr),f=y.memoizedState,f!==null&&f.dehydrated!==null){if(y.alternate===null)throw Error(n(340));mi()}return f=y.flags,f&65536?(y.flags=f&-65537|128,y):null;case 19:return Se(qr),null;case 4:return Ra(),null;case 10:return _u(y.type._context),null;case 22:case 23:return sd(),null;case 24:return null;default:return null}}var Uu=!1,Gr=!1,Hn=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Zo(f,y){var A=f.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(L){Yr(f,y,L)}else A.current=null}function Hl(f,y,A){try{A()}catch(L){Yr(f,y,L)}}var kd=!1;function sp(f,y){if(Ss=Io,f=Rr(),da(f)){if("selectionStart"in f)var A={start:f.selectionStart,end:f.selectionEnd};else e:{A=(A=f.ownerDocument)&&A.defaultView||window;var L=A.getSelection&&A.getSelection();if(L&&L.rangeCount!==0){A=L.anchorNode;var q=L.anchorOffset,X=L.focusNode;L=L.focusOffset;try{A.nodeType,X.nodeType}catch{A=null;break e}var le=0,xe=-1,be=-1,Ve=0,ut=0,dt=f,at=null;t:for(;;){for(var Nt;dt!==A||q!==0&&dt.nodeType!==3||(xe=le+q),dt!==X||L!==0&&dt.nodeType!==3||(be=le+L),dt.nodeType===3&&(le+=dt.nodeValue.length),(Nt=dt.firstChild)!==null;)at=dt,dt=Nt;for(;;){if(dt===f)break t;if(at===A&&++Ve===q&&(xe=le),at===X&&++ut===L&&(be=le),(Nt=dt.nextSibling)!==null)break;dt=at,at=dt.parentNode}dt=Nt}A=xe===-1||be===-1?null:{start:xe,end:be}}else A=null}A=A||{start:0,end:0}}else A=null;for(mr={focusedElem:f,selectionRange:A},Io=!1,Lt=y;Lt!==null;)if(y=Lt,f=y.child,(y.subtreeFlags&1028)!==0&&f!==null)f.return=y,Lt=f;else for(;Lt!==null;){y=Lt;try{var jt=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(jt!==null){var $t=jt.memoizedProps,rn=jt.memoizedState,je=y.stateNode,Re=je.getSnapshotBeforeUpdate(y.elementType===y.type?$t:Ds(y.type,$t),rn);je.__reactInternalSnapshotBeforeUpdate=Re}break;case 3:var $e=y.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ht){Yr(y,y.return,ht)}if(f=y.sibling,f!==null){f.return=y.return,Lt=f;break}Lt=y.return}return jt=kd,kd=!1,jt}function Qi(f,y,A){var L=y.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var q=L=L.next;do{if((q.tag&f)===f){var X=q.destroy;q.destroy=void 0,X!==void 0&&Hl(y,A,X)}q=q.next}while(q!==L)}}function ql(f,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var A=y=y.next;do{if((A.tag&f)===f){var L=A.create;A.destroy=L()}A=A.next}while(A!==y)}}function Vu(f){var y=f.ref;if(y!==null){var A=f.stateNode;switch(f.tag){case 5:f=A;break;default:f=A}typeof y=="function"?y(f):y.current=f}}function Nd(f){var y=f.alternate;y!==null&&(f.alternate=null,Nd(y)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(y=f.stateNode,y!==null&&(delete y[bs],delete y[di],delete y[N],delete y[k],delete y[V])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Od(f){return f.tag===5||f.tag===3||f.tag===4}function Ld(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Od(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function zc(f,y,A){var L=f.tag;if(L===5||L===6)f=f.stateNode,y?A.nodeType===8?A.parentNode.insertBefore(f,y):A.insertBefore(f,y):(A.nodeType===8?(y=A.parentNode,y.insertBefore(f,A)):(y=A,y.appendChild(f)),A=A._reactRootContainer,A!=null||y.onclick!==null||(y.onclick=Za));else if(L!==4&&(f=f.child,f!==null))for(zc(f,y,A),f=f.sibling;f!==null;)zc(f,y,A),f=f.sibling}function Hu(f,y,A){var L=f.tag;if(L===5||L===6)f=f.stateNode,y?A.insertBefore(f,y):A.appendChild(f);else if(L!==4&&(f=f.child,f!==null))for(Hu(f,y,A),f=f.sibling;f!==null;)Hu(f,y,A),f=f.sibling}var yn=null,Ks=!1;function Si(f,y,A){for(A=A.child;A!==null;)Kc(f,y,A),A=A.sibling}function Kc(f,y,A){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(ts,A)}catch{}switch(A.tag){case 5:Gr||Zo(A,y);case 6:var L=yn,q=Ks;yn=null,Si(f,y,A),yn=L,Ks=q,yn!==null&&(Ks?(f=yn,A=A.stateNode,f.nodeType===8?f.parentNode.removeChild(A):f.removeChild(A)):yn.removeChild(A.stateNode));break;case 18:yn!==null&&(Ks?(f=yn,A=A.stateNode,f.nodeType===8?Tl(f.parentNode,A):f.nodeType===1&&Tl(f,A),Cr(f)):Tl(yn,A.stateNode));break;case 4:L=yn,q=Ks,yn=A.stateNode.containerInfo,Ks=!0,Si(f,y,A),yn=L,Ks=q;break;case 0:case 11:case 14:case 15:if(!Gr&&(L=A.updateQueue,L!==null&&(L=L.lastEffect,L!==null))){q=L=L.next;do{var X=q,le=X.destroy;X=X.tag,le!==void 0&&((X&2)!==0||(X&4)!==0)&&Hl(A,y,le),q=q.next}while(q!==L)}Si(f,y,A);break;case 1:if(!Gr&&(Zo(A,y),L=A.stateNode,typeof L.componentWillUnmount=="function"))try{L.props=A.memoizedProps,L.state=A.memoizedState,L.componentWillUnmount()}catch(xe){Yr(A,y,xe)}Si(f,y,A);break;case 21:Si(f,y,A);break;case 22:A.mode&1?(Gr=(L=Gr)||A.memoizedState!==null,Si(f,y,A),Gr=L):Si(f,y,A);break;default:Si(f,y,A)}}function el(f){var y=f.updateQueue;if(y!==null){f.updateQueue=null;var A=f.stateNode;A===null&&(A=f.stateNode=new Hn),y.forEach(function(L){var q=fp.bind(null,f,L);A.has(L)||(A.add(L),L.then(q,q))})}}function ms(f,y){var A=y.deletions;if(A!==null)for(var L=0;L<A.length;L++){var q=A[L];try{var X=f,le=y,xe=le;e:for(;xe!==null;){switch(xe.tag){case 5:yn=xe.stateNode,Ks=!1;break e;case 3:yn=xe.stateNode.containerInfo,Ks=!0;break e;case 4:yn=xe.stateNode.containerInfo,Ks=!0;break e}xe=xe.return}if(yn===null)throw Error(n(160));Kc(X,le,q),yn=null,Ks=!1;var be=q.alternate;be!==null&&(be.return=null),q.return=null}catch(Ve){Yr(q,y,Ve)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)Yc(y,f),y=y.sibling}function Yc(f,y){var A=f.alternate,L=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(ms(y,f),Ys(f),L&4){try{Qi(3,f,f.return),ql(3,f)}catch($t){Yr(f,f.return,$t)}try{Qi(5,f,f.return)}catch($t){Yr(f,f.return,$t)}}break;case 1:ms(y,f),Ys(f),L&512&&A!==null&&Zo(A,A.return);break;case 5:if(ms(y,f),Ys(f),L&512&&A!==null&&Zo(A,A.return),f.flags&32){var q=f.stateNode;try{Qt(q,"")}catch($t){Yr(f,f.return,$t)}}if(L&4&&(q=f.stateNode,q!=null)){var X=f.memoizedProps,le=A!==null?A.memoizedProps:X,xe=f.type,be=f.updateQueue;if(f.updateQueue=null,be!==null)try{xe==="input"&&X.type==="radio"&&X.name!=null&&Je(q,X),Oe(xe,le);var Ve=Oe(xe,X);for(le=0;le<be.length;le+=2){var ut=be[le],dt=be[le+1];ut==="style"?Ir(q,dt):ut==="dangerouslySetInnerHTML"?Ft(q,dt):ut==="children"?Qt(q,dt):T(q,ut,dt,Ve)}switch(xe){case"input":nt(q,X);break;case"textarea":St(q,X);break;case"select":var at=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!X.multiple;var Nt=X.value;Nt!=null?qe(q,!!X.multiple,Nt,!1):at!==!!X.multiple&&(X.defaultValue!=null?qe(q,!!X.multiple,X.defaultValue,!0):qe(q,!!X.multiple,X.multiple?[]:"",!1))}q[di]=X}catch($t){Yr(f,f.return,$t)}}break;case 6:if(ms(y,f),Ys(f),L&4){if(f.stateNode===null)throw Error(n(162));q=f.stateNode,X=f.memoizedProps;try{q.nodeValue=X}catch($t){Yr(f,f.return,$t)}}break;case 3:if(ms(y,f),Ys(f),L&4&&A!==null&&A.memoizedState.isDehydrated)try{Cr(y.containerInfo)}catch($t){Yr(f,f.return,$t)}break;case 4:ms(y,f),Ys(f);break;case 13:ms(y,f),Ys(f),q=f.child,q.flags&8192&&(X=q.memoizedState!==null,q.stateNode.isHidden=X,!X||q.alternate!==null&&q.alternate.memoizedState!==null||(Jc=qt())),L&4&&el(f);break;case 22:if(ut=A!==null&&A.memoizedState!==null,f.mode&1?(Gr=(Ve=Gr)||ut,ms(y,f),Gr=Ve):ms(y,f),Ys(f),L&8192){if(Ve=f.memoizedState!==null,(f.stateNode.isHidden=Ve)&&!ut&&(f.mode&1)!==0)for(Lt=f,ut=f.child;ut!==null;){for(dt=Lt=ut;Lt!==null;){switch(at=Lt,Nt=at.child,at.tag){case 0:case 11:case 14:case 15:Qi(4,at,at.return);break;case 1:Zo(at,at.return);var jt=at.stateNode;if(typeof jt.componentWillUnmount=="function"){L=at,A=at.return;try{y=L,jt.props=y.memoizedProps,jt.state=y.memoizedState,jt.componentWillUnmount()}catch($t){Yr(L,A,$t)}}break;case 5:Zo(at,at.return);break;case 22:if(at.memoizedState!==null){Ia(dt);continue}}Nt!==null?(Nt.return=at,Lt=Nt):Ia(dt)}ut=ut.sibling}e:for(ut=null,dt=f;;){if(dt.tag===5){if(ut===null){ut=dt;try{q=dt.stateNode,Ve?(X=q.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none"):(xe=dt.stateNode,be=dt.memoizedProps.style,le=be!=null&&be.hasOwnProperty("display")?be.display:null,xe.style.display=Ar("display",le))}catch($t){Yr(f,f.return,$t)}}}else if(dt.tag===6){if(ut===null)try{dt.stateNode.nodeValue=Ve?"":dt.memoizedProps}catch($t){Yr(f,f.return,$t)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===f)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===f)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===f)break e;ut===dt&&(ut=null),dt=dt.return}ut===dt&&(ut=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:ms(y,f),Ys(f),L&4&&el(f);break;case 21:break;default:ms(y,f),Ys(f)}}function Ys(f){var y=f.flags;if(y&2){try{e:{for(var A=f.return;A!==null;){if(Od(A)){var L=A;break e}A=A.return}throw Error(n(160))}switch(L.tag){case 5:var q=L.stateNode;L.flags&32&&(Qt(q,""),L.flags&=-33);var X=Ld(f);Hu(f,X,q);break;case 3:case 4:var le=L.stateNode.containerInfo,xe=Ld(f);zc(f,xe,le);break;default:throw Error(n(161))}}catch(be){Yr(f,f.return,be)}f.flags&=-3}y&4096&&(f.flags&=-4097)}function qu(f,y,A){Lt=f,Qc(f)}function Qc(f,y,A){for(var L=(f.mode&1)!==0;Lt!==null;){var q=Lt,X=q.child;if(q.tag===22&&L){var le=q.memoizedState!==null||Uu;if(!le){var xe=q.alternate,be=xe!==null&&xe.memoizedState!==null||Gr;xe=Uu;var Ve=Gr;if(Uu=le,(Gr=be)&&!Ve)for(Lt=q;Lt!==null;)le=Lt,be=le.child,le.tag===22&&le.memoizedState!==null?jd(q):be!==null?(be.return=le,Lt=be):jd(q);for(;X!==null;)Lt=X,Qc(X),X=X.sibling;Lt=q,Uu=xe,Gr=Ve}Qs(f)}else(q.subtreeFlags&8772)!==0&&X!==null?(X.return=q,Lt=X):Qs(f)}}function Qs(f){for(;Lt!==null;){var y=Lt;if((y.flags&8772)!==0){var A=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Gr||ql(5,y);break;case 1:var L=y.stateNode;if(y.flags&4&&!Gr)if(A===null)L.componentDidMount();else{var q=y.elementType===y.type?A.memoizedProps:Ds(y.type,A.memoizedProps);L.componentDidUpdate(q,A.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var X=y.updateQueue;X!==null&&Sc(y,X,L);break;case 3:var le=y.updateQueue;if(le!==null){if(A=null,y.child!==null)switch(y.child.tag){case 5:A=y.child.stateNode;break;case 1:A=y.child.stateNode}Sc(y,le,A)}break;case 5:var xe=y.stateNode;if(A===null&&y.flags&4){A=xe;var be=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":be.autoFocus&&A.focus();break;case"img":be.src&&(A.src=be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var Ve=y.alternate;if(Ve!==null){var ut=Ve.memoizedState;if(ut!==null){var dt=ut.dehydrated;dt!==null&&Cr(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Gr||y.flags&512&&Vu(y)}catch(at){Yr(y,y.return,at)}}if(y===f){Lt=null;break}if(A=y.sibling,A!==null){A.return=y.return,Lt=A;break}Lt=y.return}}function Ia(f){for(;Lt!==null;){var y=Lt;if(y===f){Lt=null;break}var A=y.sibling;if(A!==null){A.return=y.return,Lt=A;break}Lt=y.return}}function jd(f){for(;Lt!==null;){var y=Lt;try{switch(y.tag){case 0:case 11:case 15:var A=y.return;try{ql(4,y)}catch(be){Yr(y,A,be)}break;case 1:var L=y.stateNode;if(typeof L.componentDidMount=="function"){var q=y.return;try{L.componentDidMount()}catch(be){Yr(y,q,be)}}var X=y.return;try{Vu(y)}catch(be){Yr(y,X,be)}break;case 5:var le=y.return;try{Vu(y)}catch(be){Yr(y,le,be)}}}catch(be){Yr(y,y.return,be)}if(y===f){Lt=null;break}var xe=y.sibling;if(xe!==null){xe.return=y.return,Lt=xe;break}Lt=y.return}}var Md=Math.ceil,Gu=I.ReactCurrentDispatcher,Xc=I.ReactCurrentOwner,Ps=I.ReactCurrentBatchConfig,Sr=0,vn=null,sn=null,Rn=0,gs=0,tl=ye(0),dn=0,Gl=null,Da=0,Wl=0,Wu=0,zl=null,Zn=null,Jc=0,ho=1/0,Xi=null,zu=!1,Zc=null,Pa=null,Ku=!1,ka=null,qn=0,Kl=0,ed=null,Yu=-1,Yl=0;function Gn(){return(Sr&6)!==0?qt():Yu!==-1?Yu:Yu=qt()}function Na(f){return(f.mode&1)===0?1:(Sr&2)!==0&&Rn!==0?Rn&-Rn:gd.transition!==null?(Yl===0&&(Yl=sl()),Yl):(f=gr,f!==0||(f=window.event,f=f===void 0?16:ko(f.type)),f)}function Xs(f,y,A,L){if(50<Kl)throw Kl=0,ed=null,Error(n(185));Ai(f,A,L),((Sr&2)===0||f!==vn)&&(f===vn&&((Sr&2)===0&&(Wl|=A),dn===4&&Oa(f,Rn)),es(f,L),A===1&&Sr===0&&(y.mode&1)===0&&(ho=qt()+500,Pr&&ba()))}function es(f,y){var A=f.callbackNode;ni(f,y);var L=Ci(f,f===vn?Rn:0);if(L===0)A!==null&&_t(A),f.callbackNode=null,f.callbackPriority=0;else if(y=L&-L,f.callbackPriority!==y){if(A!=null&&_t(A),y===1)f.tag===0?ro($d.bind(null,f)):Qn($d.bind(null,f)),eo(function(){(Sr&6)===0&&ba()}),A=null;else{switch(rs(L)){case 1:A=Lr;break;case 4:A=En;break;case 16:A=wn;break;case 536870912:A=Xr;break;default:A=wn}A=Gd(A,Qu.bind(null,f))}f.callbackPriority=y,f.callbackNode=A}}function Qu(f,y){if(Yu=-1,Yl=0,(Sr&6)!==0)throw Error(n(327));var A=f.callbackNode;if(rl()&&f.callbackNode!==A)return null;var L=Ci(f,f===vn?Rn:0);if(L===0)return null;if((L&30)!==0||(L&f.expiredLanes)!==0||y)y=Xu(f,L);else{y=L;var q=Sr;Sr|=2;var X=Bd();(vn!==f||Rn!==y)&&(Xi=null,ho=qt()+500,go(f,y));do try{up();break}catch(xe){Fd(f,xe)}while(!0);Hi(),Gu.current=X,Sr=q,sn!==null?y=0:(vn=null,Rn=0,y=dn)}if(y!==0){if(y===2&&(q=Ri(f),q!==0&&(L=q,y=td(f,q))),y===1)throw A=Gl,go(f,0),Oa(f,L),es(f,qt()),A;if(y===6)Oa(f,L);else{if(q=f.current.alternate,(L&30)===0&&!ap(q)&&(y=Xu(f,L),y===2&&(X=Ri(f),X!==0&&(L=X,y=td(f,X))),y===1))throw A=Gl,go(f,0),Oa(f,L),es(f,qt()),A;switch(f.finishedWork=q,f.finishedLanes=L,y){case 0:case 1:throw Error(n(345));case 2:yo(f,Zn,Xi);break;case 3:if(Oa(f,L),(L&130023424)===L&&(y=Jc+500-qt(),10<y)){if(Ci(f,0)!==0)break;if(q=f.suspendedLanes,(q&L)!==L){Gn(),f.pingedLanes|=f.suspendedLanes&q;break}f.timeoutHandle=Hr(yo.bind(null,f,Zn,Xi),y);break}yo(f,Zn,Xi);break;case 4:if(Oa(f,L),(L&4194240)===L)break;for(y=f.eventTimes,q=-1;0<L;){var le=31-ln(L);X=1<<le,le=y[le],le>q&&(q=le),L&=~X}if(L=q,L=qt()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*Md(L/1960))-L,10<L){f.timeoutHandle=Hr(yo.bind(null,f,Zn,Xi),L);break}yo(f,Zn,Xi);break;case 5:yo(f,Zn,Xi);break;default:throw Error(n(329))}}}return es(f,qt()),f.callbackNode===A?Qu.bind(null,f):null}function td(f,y){var A=zl;return f.current.memoizedState.isDehydrated&&(go(f,y).flags|=256),f=Xu(f,y),f!==2&&(y=Zn,Zn=A,y!==null&&rd(y)),f}function rd(f){Zn===null?Zn=f:Zn.push.apply(Zn,f)}function ap(f){for(var y=f;;){if(y.flags&16384){var A=y.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var L=0;L<A.length;L++){var q=A[L],X=q.getSnapshot;q=q.value;try{if(!Fe(X(),q))return!1}catch{return!1}}}if(A=y.child,y.subtreeFlags&16384&&A!==null)A.return=y,y=A;else{if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Oa(f,y){for(y&=~Wu,y&=~Wl,f.suspendedLanes|=y,f.pingedLanes&=~y,f=f.expirationTimes;0<y;){var A=31-ln(y),L=1<<A;f[A]=-1,y&=~L}}function $d(f){if((Sr&6)!==0)throw Error(n(327));rl();var y=Ci(f,0);if((y&1)===0)return es(f,qt()),null;var A=Xu(f,y);if(f.tag!==0&&A===2){var L=Ri(f);L!==0&&(y=L,A=td(f,L))}if(A===1)throw A=Gl,go(f,0),Oa(f,y),es(f,qt()),A;if(A===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=y,yo(f,Zn,Xi),es(f,qt()),null}function nd(f,y){var A=Sr;Sr|=1;try{return f(y)}finally{Sr=A,Sr===0&&(ho=qt()+500,Pr&&ba())}}function mo(f){ka!==null&&ka.tag===0&&(Sr&6)===0&&rl();var y=Sr;Sr|=1;var A=Ps.transition,L=gr;try{if(Ps.transition=null,gr=1,f)return f()}finally{gr=L,Ps.transition=A,Sr=y,(Sr&6)===0&&ba()}}function sd(){gs=tl.current,Se(tl)}function go(f,y){f.finishedWork=null,f.finishedLanes=0;var A=f.timeoutHandle;if(A!==-1&&(f.timeoutHandle=-1,Dn(A)),sn!==null)for(A=sn.return;A!==null;){var L=A;switch(io(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&ps();break;case 3:Ra(),Se(Ot),Se(Ge),Ru();break;case 5:Cu(L);break;case 4:Ra();break;case 13:Se(qr);break;case 19:Se(qr);break;case 10:_u(L.type._context);break;case 22:case 23:sd()}A=A.return}if(vn=f,sn=f=Js(f.current,null),Rn=gs=y,dn=0,Gl=null,Wu=Wl=Da=0,Zn=zl=null,oo!==null){for(y=0;y<oo.length;y++)if(A=oo[y],L=A.interleaved,L!==null){A.interleaved=null;var q=L.next,X=A.pending;if(X!==null){var le=X.next;X.next=q,L.next=le}A.pending=L}oo=null}return f}function Fd(f,y){do{var A=sn;try{if(Hi(),Pl.current=ku,Go){for(var L=Kr.memoizedState;L!==null;){var q=L.queue;q!==null&&(q.pending=null),L=L.next}Go=!1}if(wa=0,un=tn=Kr=null,kl=!1,uo=0,Xc.current=null,A===null||A.return===null){dn=1,Gl=y,sn=null;break}e:{var X=f,le=A.return,xe=A,be=y;if(y=Rn,xe.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var Ve=be,ut=xe,dt=ut.tag;if((ut.mode&1)===0&&(dt===0||dt===11||dt===15)){var at=ut.alternate;at?(ut.updateQueue=at.updateQueue,ut.memoizedState=at.memoizedState,ut.lanes=at.lanes):(ut.updateQueue=null,ut.memoizedState=null)}var Nt=wd(le);if(Nt!==null){Nt.flags&=-257,$c(Nt,le,xe,X,y),Nt.mode&1&&Ml(X,Ve,y),y=Nt,be=Ve;var jt=y.updateQueue;if(jt===null){var $t=new Set;$t.add(be),y.updateQueue=$t}else jt.add(be);break e}else{if((y&1)===0){Ml(X,Ve,y),ad();break e}be=Error(n(426))}}else if(Ur&&xe.mode&1){var rn=wd(le);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),$c(rn,le,xe,X,y),gi(fo(be,xe));break e}}X=be=fo(be,xe),dn!==4&&(dn=2),zl===null?zl=[X]:zl.push(X),X=le;do{switch(X.tag){case 3:X.flags|=65536,y&=-y,X.lanes|=y;var je=jl(X,be,y);xd(X,je);break e;case 1:xe=be;var Re=X.type,$e=X.stateNode;if((X.flags&128)===0&&(typeof Re.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(Pa===null||!Pa.has($e)))){X.flags|=65536,y&=-y,X.lanes|=y;var ht=Mu(X,xe,y);xd(X,ht);break e}}X=X.return}while(X!==null)}Vd(A)}catch(Bt){y=Bt,sn===A&&A!==null&&(sn=A=A.return);continue}break}while(!0)}function Bd(){var f=Gu.current;return Gu.current=ku,f===null?ku:f}function ad(){(dn===0||dn===3||dn===2)&&(dn=4),vn===null||(Da&268435455)===0&&(Wl&268435455)===0||Oa(vn,Rn)}function Xu(f,y){var A=Sr;Sr|=2;var L=Bd();(vn!==f||Rn!==y)&&(Xi=null,go(f,y));do try{lp();break}catch(q){Fd(f,q)}while(!0);if(Hi(),Sr=A,Gu.current=L,sn!==null)throw Error(n(261));return vn=null,Rn=0,dn}function lp(){for(;sn!==null;)Ud(sn)}function up(){for(;sn!==null&&!gt();)Ud(sn)}function Ud(f){var y=qd(f.alternate,f,gs);f.memoizedProps=f.pendingProps,y===null?Vd(f):sn=y,Xc.current=null}function Vd(f){var y=f;do{var A=y.alternate;if(f=y.return,(y.flags&32768)===0){if(A=rp(A,y,gs),A!==null){sn=A;return}}else{if(A=np(A,y),A!==null){A.flags&=32767,sn=A;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{dn=6,sn=null;return}}if(y=y.sibling,y!==null){sn=y;return}sn=y=f}while(y!==null);dn===0&&(dn=5)}function yo(f,y,A){var L=gr,q=Ps.transition;try{Ps.transition=null,gr=1,cp(f,y,A,L)}finally{Ps.transition=q,gr=L}return null}function cp(f,y,A,L){do rl();while(ka!==null);if((Sr&6)!==0)throw Error(n(327));A=f.finishedWork;var q=f.finishedLanes;if(A===null)return null;if(f.finishedWork=null,f.finishedLanes=0,A===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var X=A.lanes|A.childLanes;if(Wn(f,X),f===vn&&(sn=vn=null,Rn=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||Ku||(Ku=!0,Gd(wn,function(){return rl(),null})),X=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||X){X=Ps.transition,Ps.transition=null;var le=gr;gr=1;var xe=Sr;Sr|=4,Xc.current=null,sp(f,A),Yc(A,f),El(mr),Io=!!Ss,mr=Ss=null,f.current=A,qu(A),yt(),Sr=xe,gr=le,Ps.transition=X}else f.current=A;if(Ku&&(Ku=!1,ka=f,qn=q),X=f.pendingLanes,X===0&&(Pa=null),Mr(A.stateNode),es(f,qt()),y!==null)for(L=f.onRecoverableError,A=0;A<y.length;A++)q=y[A],L(q.value,{componentStack:q.stack,digest:q.digest});if(zu)throw zu=!1,f=Zc,Zc=null,f;return(qn&1)!==0&&f.tag!==0&&rl(),X=f.pendingLanes,(X&1)!==0?f===ed?Kl++:(Kl=0,ed=f):Kl=0,ba(),null}function rl(){if(ka!==null){var f=rs(qn),y=Ps.transition,A=gr;try{if(Ps.transition=null,gr=16>f?16:f,ka===null)var L=!1;else{if(f=ka,ka=null,qn=0,(Sr&6)!==0)throw Error(n(331));var q=Sr;for(Sr|=4,Lt=f.current;Lt!==null;){var X=Lt,le=X.child;if((Lt.flags&16)!==0){var xe=X.deletions;if(xe!==null){for(var be=0;be<xe.length;be++){var Ve=xe[be];for(Lt=Ve;Lt!==null;){var ut=Lt;switch(ut.tag){case 0:case 11:case 15:Qi(8,ut,X)}var dt=ut.child;if(dt!==null)dt.return=ut,Lt=dt;else for(;Lt!==null;){ut=Lt;var at=ut.sibling,Nt=ut.return;if(Nd(ut),ut===Ve){Lt=null;break}if(at!==null){at.return=Nt,Lt=at;break}Lt=Nt}}}var jt=X.alternate;if(jt!==null){var $t=jt.child;if($t!==null){jt.child=null;do{var rn=$t.sibling;$t.sibling=null,$t=rn}while($t!==null)}}Lt=X}}if((X.subtreeFlags&2064)!==0&&le!==null)le.return=X,Lt=le;else e:for(;Lt!==null;){if(X=Lt,(X.flags&2048)!==0)switch(X.tag){case 0:case 11:case 15:Qi(9,X,X.return)}var je=X.sibling;if(je!==null){je.return=X.return,Lt=je;break e}Lt=X.return}}var Re=f.current;for(Lt=Re;Lt!==null;){le=Lt;var $e=le.child;if((le.subtreeFlags&2064)!==0&&$e!==null)$e.return=le,Lt=$e;else e:for(le=Re;Lt!==null;){if(xe=Lt,(xe.flags&2048)!==0)try{switch(xe.tag){case 0:case 11:case 15:ql(9,xe)}}catch(Bt){Yr(xe,xe.return,Bt)}if(xe===le){Lt=null;break e}var ht=xe.sibling;if(ht!==null){ht.return=xe.return,Lt=ht;break e}Lt=xe.return}}if(Sr=q,ba(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(ts,f)}catch{}L=!0}return L}finally{gr=A,Ps.transition=y}}return!1}function Ju(f,y,A){y=fo(A,y),y=jl(f,y,1),f=As(f,y,1),y=Gn(),f!==null&&(Ai(f,1,y),es(f,y))}function Yr(f,y,A){if(f.tag===3)Ju(f,f,A);else for(;y!==null;){if(y.tag===3){Ju(y,f,A);break}else if(y.tag===1){var L=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Pa===null||!Pa.has(L))){f=fo(A,f),f=Mu(y,f,1),y=As(y,f,1),f=Gn(),y!==null&&(Ai(y,1,f),es(y,f));break}}y=y.return}}function dp(f,y,A){var L=f.pingCache;L!==null&&L.delete(y),y=Gn(),f.pingedLanes|=f.suspendedLanes&A,vn===f&&(Rn&A)===A&&(dn===4||dn===3&&(Rn&130023424)===Rn&&500>qt()-Jc?go(f,0):Wu|=A),es(f,y)}function Hd(f,y){y===0&&((f.mode&1)===0?y=1:(y=bo,bo<<=1,(bo&130023424)===0&&(bo=4194304)));var A=Gn();f=qi(f,y),f!==null&&(Ai(f,y,A),es(f,A))}function pp(f){var y=f.memoizedState,A=0;y!==null&&(A=y.retryLane),Hd(f,A)}function fp(f,y){var A=0;switch(f.tag){case 13:var L=f.stateNode,q=f.memoizedState;q!==null&&(A=q.retryLane);break;case 19:L=f.stateNode;break;default:throw Error(n(314))}L!==null&&L.delete(y),Hd(f,A)}var qd;qd=function(f,y,A){if(f!==null)if(f.memoizedProps!==y.pendingProps||Ot.current)Vn=!0;else{if((f.lanes&A)===0&&(y.flags&128)===0)return Vn=!1,Dd(f,y,A);Vn=(f.flags&131072)!==0}else Vn=!1,Ur&&(y.flags&1048576)!==0&&hd(y,vu,y.index);switch(y.lanes=0,y.tag){case 2:var L=y.type;Bu(f,y),f=y.pendingProps;var q=Br(y,Ge.current);Ca(y,A),q=co(null,y,L,f,q,A);var X=wu();return y.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Nr(L)?(X=!0,gn(y)):X=!1,y.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,bu(y),q.updater=Lu,y.stateNode=q,q._reactInternals=y,Mc(y,L,f,A),y=qc(null,y,L,!0,X,A)):(y.tag=0,Ur&&X&&Cl(y),bn(null,y,q,A),y=y.child),y;case 16:L=y.elementType;e:{switch(Bu(f,y),f=y.pendingProps,q=L._init,L=q(L._payload),y.type=L,q=y.tag=mp(L),f=Ds(L,f),q){case 0:y=Vc(null,y,L,f,A);break e;case 1:y=Hc(null,y,L,f,A);break e;case 11:y=Ad(null,y,L,f,A);break e;case 14:y=Fc(null,y,L,Ds(L.type,f),A);break e}throw Error(n(306,L,""))}return y;case 0:return L=y.type,q=y.pendingProps,q=y.elementType===L?q:Ds(L,q),Vc(f,y,L,q,A);case 1:return L=y.type,q=y.pendingProps,q=y.elementType===L?q:Ds(L,q),Hc(f,y,L,q,A);case 3:e:{if(Id(y),f===null)throw Error(n(387));L=y.pendingProps,X=y.memoizedState,q=X.element,vd(f,y),Ho(y,L,null,A);var le=y.memoizedState;if(L=le.element,X.isDehydrated)if(X={element:L,isDehydrated:!1,cache:le.cache,pendingSuspenseBoundaries:le.pendingSuspenseBoundaries,transitions:le.transitions},y.updateQueue.baseState=X,y.memoizedState=X,y.flags&256){q=fo(Error(n(423)),y),y=_i(f,y,L,A,q);break e}else if(L!==q){q=fo(Error(n(424)),y),y=_i(f,y,L,A,q);break e}else for(fs=ci(y.stateNode.containerInfo.firstChild),Nn=y,Ur=!0,Gs=null,A=Eu(y,null,L,A),y.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(mi(),L===q){y=zs(f,y,A);break e}bn(f,y,L,A)}y=y.child}return y;case 5:return Tc(y),f===null&&Xn(y),L=y.type,q=y.pendingProps,X=f!==null?f.memoizedProps:null,le=q.children,ds(L,q)?le=null:X!==null&&ds(L,X)&&(y.flags|=32),Uc(f,y),bn(f,y,le,A),y.child;case 6:return f===null&&Xn(y),null;case 13:return Fu(f,y,A);case 4:return bc(y,y.stateNode.containerInfo),L=y.pendingProps,f===null?y.child=Zr(y,null,L,A):bn(f,y,L,A),y.child;case 11:return L=y.type,q=y.pendingProps,q=y.elementType===L?q:Ds(L,q),Ad(f,y,L,q,A);case 7:return bn(f,y,y.pendingProps,A),y.child;case 8:return bn(f,y,y.pendingProps.children,A),y.child;case 12:return bn(f,y,y.pendingProps.children,A),y.child;case 10:e:{if(L=y.type._context,q=y.pendingProps,X=y.memoizedProps,le=q.value,Le(Al,L._currentValue),L._currentValue=le,X!==null)if(Fe(X.value,le)){if(X.children===q.children&&!Ot.current){y=zs(f,y,A);break e}}else for(X=y.child,X!==null&&(X.return=y);X!==null;){var xe=X.dependencies;if(xe!==null){le=X.child;for(var be=xe.firstContext;be!==null;){if(be.context===L){if(X.tag===1){be=Gi(-1,A&-A),be.tag=2;var Ve=X.updateQueue;if(Ve!==null){Ve=Ve.shared;var ut=Ve.pending;ut===null?be.next=be:(be.next=ut.next,ut.next=be),Ve.pending=be}}X.lanes|=A,be=X.alternate,be!==null&&(be.lanes|=A),Sn(X.return,A,y),xe.lanes|=A;break}be=be.next}}else if(X.tag===10)le=X.type===y.type?null:X.child;else if(X.tag===18){if(le=X.return,le===null)throw Error(n(341));le.lanes|=A,xe=le.alternate,xe!==null&&(xe.lanes|=A),Sn(le,A,y),le=X.sibling}else le=X.child;if(le!==null)le.return=X;else for(le=X;le!==null;){if(le===y){le=null;break}if(X=le.sibling,X!==null){X.return=le.return,le=X;break}le=le.return}X=le}bn(f,y,q.children,A),y=y.child}return y;case 9:return q=y.type,L=y.pendingProps.children,Ca(y,A),q=Rs(q),L=L(q),y.flags|=1,bn(f,y,L,A),y.child;case 14:return L=y.type,q=Ds(L,y.pendingProps),q=Ds(L.type,q),Fc(f,y,L,q,A);case 15:return Ei(f,y,y.type,y.pendingProps,A);case 17:return L=y.type,q=y.pendingProps,q=y.elementType===L?q:Ds(L,q),Bu(f,y),y.tag=1,Nr(L)?(f=!0,gn(y)):f=!1,Ca(y,A),po(y,L,q),Mc(y,L,q,A),qc(null,y,L,!0,f,A);case 19:return Aa(f,y,A);case 22:return Bc(f,y,A)}throw Error(n(156,y.tag))};function Gd(f,y){return He(f,y)}function hp(f,y,A,L){this.tag=f,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(f,y,A,L){return new hp(f,y,A,L)}function Zu(f){return f=f.prototype,!(!f||!f.isReactComponent)}function mp(f){if(typeof f=="function")return Zu(f)?1:0;if(f!=null){if(f=f.$$typeof,f===Z)return 11;if(f===se)return 14}return 2}function Js(f,y){var A=f.alternate;return A===null?(A=ks(f.tag,y,f.key,f.mode),A.elementType=f.elementType,A.type=f.type,A.stateNode=f.stateNode,A.alternate=f,f.alternate=A):(A.pendingProps=y,A.type=f.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=f.flags&14680064,A.childLanes=f.childLanes,A.lanes=f.lanes,A.child=f.child,A.memoizedProps=f.memoizedProps,A.memoizedState=f.memoizedState,A.updateQueue=f.updateQueue,y=f.dependencies,A.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},A.sibling=f.sibling,A.index=f.index,A.ref=f.ref,A}function ec(f,y,A,L,q,X){var le=2;if(L=f,typeof f=="function")Zu(f)&&(le=1);else if(typeof f=="string")le=5;else e:switch(f){case O:return vo(A.children,q,X,y);case B:le=8,q|=8;break;case F:return f=ks(12,A,y,q|2),f.elementType=F,f.lanes=X,f;case ne:return f=ks(13,A,y,q),f.elementType=ne,f.lanes=X,f;case re:return f=ks(19,A,y,q),f.elementType=re,f.lanes=X,f;case K:return tc(A,q,X,y);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case H:le=10;break e;case Q:le=9;break e;case Z:le=11;break e;case se:le=14;break e;case G:le=16,L=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return y=ks(le,A,y,q),y.elementType=f,y.type=L,y.lanes=X,y}function vo(f,y,A,L){return f=ks(7,f,L,y),f.lanes=A,f}function tc(f,y,A,L){return f=ks(22,f,L,y),f.elementType=K,f.lanes=A,f.stateNode={isHidden:!1},f}function od(f,y,A){return f=ks(6,f,null,y),f.lanes=A,f}function ld(f,y,A){return y=ks(4,f.children!==null?f.children:[],f.key,y),y.lanes=A,y.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},y}function gp(f,y,A,L,q){this.tag=y,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wi(0),this.expirationTimes=wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.identifierPrefix=L,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function ud(f,y,A,L,q,X,le,xe,be){return f=new gp(f,y,A,xe,be),y===1?(y=1,X===!0&&(y|=8)):y=0,X=ks(3,null,null,y),f.current=X,X.stateNode=f,X.memoizedState={element:L,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(X),f}function yp(f,y,A){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:L==null?null:""+L,children:f,containerInfo:y,implementation:A}}function Wd(f){if(!f)return vt;f=f._reactInternals;e:{if(Ct(f)!==f||f.tag!==1)throw Error(n(170));var y=f;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Nr(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(n(171))}if(f.tag===1){var A=f.type;if(Nr(A))return Ea(f,A,y)}return y}function zd(f,y,A,L,q,X,le,xe,be){return f=ud(A,L,!0,f,q,X,le,xe,be),f.context=Wd(null),A=f.current,L=Gn(),q=Na(A),X=Gi(L,q),X.callback=y??null,As(A,X,q),f.current.lanes=q,Ai(f,q,L),es(f,L),f}function rc(f,y,A,L){var q=y.current,X=Gn(),le=Na(q);return A=Wd(A),y.context===null?y.context=A:y.pendingContext=A,y=Gi(X,le),y.payload={element:f},L=L===void 0?null:L,L!==null&&(y.callback=L),f=As(q,y,le),f!==null&&(Xs(f,q,le,X),Tu(f,q,le)),le}function nc(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function Kd(f,y){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var A=f.retryLane;f.retryLane=A!==0&&A<y?A:y}}function cd(f,y){Kd(f,y),(f=f.alternate)&&Kd(f,y)}function vp(){return null}var Yd=typeof reportError=="function"?reportError:function(f){console.error(f)};function sc(f){this._internalRoot=f}Ql.prototype.render=sc.prototype.render=function(f){var y=this._internalRoot;if(y===null)throw Error(n(409));rc(f,y,null,null)},Ql.prototype.unmount=sc.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var y=f.containerInfo;mo(function(){rc(null,f,null,null)}),y[Pn]=null}};function Ql(f){this._internalRoot=f}Ql.prototype.unstable_scheduleHydration=function(f){if(f){var y=Co();f={blockedOn:null,target:f,priority:y};for(var A=0;A<ii.length&&y!==0&&y<ii[A].priority;A++);ii.splice(A,0,f),A===0&&il(f)}};function dd(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function ic(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function Qd(){}function xp(f,y,A,L,q){if(q){if(typeof L=="function"){var X=L;L=function(){var Ve=nc(le);X.call(Ve)}}var le=zd(y,L,f,0,null,!1,!1,"",Qd);return f._reactRootContainer=le,f[Pn]=le.current,Hs(f.nodeType===8?f.parentNode:f),mo(),le}for(;q=f.lastChild;)f.removeChild(q);if(typeof L=="function"){var xe=L;L=function(){var Ve=nc(be);xe.call(Ve)}}var be=ud(f,0,!1,null,null,!1,!1,"",Qd);return f._reactRootContainer=be,f[Pn]=be.current,Hs(f.nodeType===8?f.parentNode:f),mo(function(){rc(y,be,A,L)}),be}function xo(f,y,A,L,q){var X=A._reactRootContainer;if(X){var le=X;if(typeof q=="function"){var xe=q;q=function(){var be=nc(le);xe.call(be)}}rc(y,le,f,q)}else le=xp(A,y,f,q,L);return nc(le)}ta=function(f){switch(f.tag){case 3:var y=f.stateNode;if(y.current.memoizedState.isDehydrated){var A=Ti(y.pendingLanes);A!==0&&(ja(y,A|1),es(y,qt()),(Sr&6)===0&&(ho=qt()+500,ba()))}break;case 13:mo(function(){var L=qi(f,1);if(L!==null){var q=Gn();Xs(L,f,1,q)}}),cd(f,1)}},Ms=function(f){if(f.tag===13){var y=qi(f,134217728);if(y!==null){var A=Gn();Xs(y,f,134217728,A)}cd(f,134217728)}},To=function(f){if(f.tag===13){var y=Na(f),A=qi(f,y);if(A!==null){var L=Gn();Xs(A,f,y,L)}cd(f,y)}},Co=function(){return gr},Ma=function(f,y){var A=gr;try{return gr=f,y()}finally{gr=A}},ir=function(f,y,A){switch(y){case"input":if(nt(f,A),y=A.name,A.type==="radio"&&y!=null){for(A=f;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<A.length;y++){var L=A[y];if(L!==f&&L.form===f.form){var q=pe(L);if(!q)throw Error(n(90));tt(L),nt(L,q)}}}break;case"textarea":St(f,A);break;case"select":y=A.value,y!=null&&qe(f,!!A.multiple,y,!1)}},wt=nd,Gt=mo;var Ep={usingClientEntryPoint:!1,Events:[Y,te,pe,Ie,Ze,nd]},Xl={findFiberByHostInstance:U,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:Xl.bundleType,version:Xl.version,rendererPackageName:Xl.rendererPackageName,rendererConfig:Xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=hr(f),f===null?null:f.stateNode},findFiberByHostInstance:Xl.findFiberByHostInstance||vp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{ts=ac.inject(_p),Wr=ac}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ep,reactDom_production_min.createPortal=function(f,y){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dd(y))throw Error(n(200));return yp(f,y,null,A)},reactDom_production_min.createRoot=function(f,y){if(!dd(f))throw Error(n(299));var A=!1,L="",q=Yd;return y!=null&&(y.unstable_strictMode===!0&&(A=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onRecoverableError!==void 0&&(q=y.onRecoverableError)),y=ud(f,1,!1,null,null,A,!1,L,q),f[Pn]=y.current,Hs(f.nodeType===8?f.parentNode:f),new sc(y)},reactDom_production_min.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var y=f._reactInternals;if(y===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=hr(y),f=f===null?null:f.stateNode,f},reactDom_production_min.flushSync=function(f){return mo(f)},reactDom_production_min.hydrate=function(f,y,A){if(!ic(y))throw Error(n(200));return xo(null,f,y,!0,A)},reactDom_production_min.hydrateRoot=function(f,y,A){if(!dd(f))throw Error(n(405));var L=A!=null&&A.hydratedSources||null,q=!1,X="",le=Yd;if(A!=null&&(A.unstable_strictMode===!0&&(q=!0),A.identifierPrefix!==void 0&&(X=A.identifierPrefix),A.onRecoverableError!==void 0&&(le=A.onRecoverableError)),y=zd(y,null,f,1,A??null,q,!1,X,le),f[Pn]=y.current,Hs(f),L)for(f=0;f<L.length;f++)A=L[f],q=A._getVersion,q=q(A._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[A,q]:y.mutableSourceEagerHydrationData.push(A,q);return new Ql(y)},reactDom_production_min.render=function(f,y,A){if(!ic(y))throw Error(n(200));return xo(null,f,y,!1,A)},reactDom_production_min.unmountComponentAtNode=function(f){if(!ic(f))throw Error(n(40));return f._reactRootContainer?(mo(function(){xo(null,null,f,!1,function(){f._reactRootContainer=null,f[Pn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=nd,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(f,y,A,L){if(!ic(A))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return xo(f,y,A,!1,L)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient(),withSelector$1={exports:{}},useSyncExternalStoreWithSelector_production={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreWithSelector_production;function requireUseSyncExternalStoreWithSelector_production(){if(hasRequiredUseSyncExternalStoreWithSelector_production)return useSyncExternalStoreWithSelector_production;hasRequiredUseSyncExternalStoreWithSelector_production=1;var t=requireReact();function e(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(u,c,d,p,m){var g=i(null);if(g.current===null){var E={hasValue:!1,value:null};g.current=E}else E=g.current;g=o(function(){function b(D){if(!S){if(S=!0,C=D,D=p(D),m!==void 0&&E.hasValue){var P=E.value;if(m(P,D))return T=P}return T=D}if(P=T,n(C,D))return P;var O=p(D);return m!==void 0&&m(P,O)?(C=D,P):(C=D,T=O)}var S=!1,C,T,I=d===void 0?null:d;return[function(){return b(c())},I===null?void 0:function(){return b(I())}]},[c,d,p,m]);var x=s(u,g[0],g[1]);return a(function(){E.hasValue=!0,E.value=x},[x]),l(x),x},useSyncExternalStoreWithSelector_production}var hasRequiredWithSelector$1;function requireWithSelector$1(){return hasRequiredWithSelector$1||(hasRequiredWithSelector$1=1,withSelector$1.exports=requireUseSyncExternalStoreWithSelector_production()),withSelector$1.exports}var withSelectorExports$1=requireWithSelector$1(),React="default"in React$2?React$1:React$2,ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!React.createContext)return{};const t=gT[ContextKey]??(gT[ContextKey]=new Map);let e=t.get(React.createContext);return e||(e=React.createContext(null),t.set(React.createContext,e)),e}var ReactReduxContext=getContext(),notInitialized=()=>{throw new Error("uSES not initialized!")};function createReduxContextHook(t=ReactReduxContext){return function(){return React.useContext(t)}}var useReduxContext=createReduxContextHook(),useSyncExternalStoreWithSelector=notInitialized,initializeUseSelector=t=>{useSyncExternalStoreWithSelector=t},refEquality=(t,e)=>t===e;function createSelectorHook(t=ReactReduxContext){const e=t===ReactReduxContext?useReduxContext:createReduxContextHook(t),n=(s,i={})=>{const{equalityFn:a=refEquality,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:c,stabilityCheck:d,identityFunctionCheck:p}=e();React.useRef(!0);const m=React.useCallback({[s.name](E){return s(E)}}[s.name],[s,d,o.stabilityCheck]),g=useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,c||l.getState,m,a);return React.useDebugValue(g),g};return Object.assign(n,{withTypes:()=>n}),n}var useSelector=createSelectorHook();function defaultNoopBatch(t){t()}function createListenerCollection(){let t=null,e=null;return{clear(){t=null,e=null},notify(){defaultNoopBatch(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!s||t===null||(s=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(t,e){let n,s=nullListeners,i=0,a=!1;function o(x){d();const b=s.subscribe(x);let S=!1;return()=>{S||(S=!0,b(),p())}}function l(){s.notify()}function u(){E.onStateChange&&E.onStateChange()}function c(){return a}function d(){i++,n||(n=t.subscribe(u),s=createListenerCollection())}function p(){i--,n&&i===0&&(n(),n=void 0,s.clear(),s=nullListeners)}function m(){a||(a=!0,d())}function g(){a&&(a=!1,p())}const E={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>s};return E}var canUseDOM$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",useIsomorphicLayoutEffect$4=canUseDOM$1||isReactNative?React.useLayoutEffect:React.useEffect;function is$1(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function shallowEqual$1(t,e){if(is$1(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!is$1(t[n[i]],e[n[i]]))return!1;return!0}function Provider$1({store:t,context:e,children:n,serverState:s,stabilityCheck:i="once",identityFunctionCheck:a="once"}){const o=React.useMemo(()=>{const c=createSubscription(t);return{store:t,subscription:c,getServerState:s?()=>s:void 0,stabilityCheck:i,identityFunctionCheck:a}},[t,s,i,a]),l=React.useMemo(()=>t.getState(),[t]);useIsomorphicLayoutEffect$4(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,l]);const u=e||ReactReduxContext;return React.createElement(u.Provider,{value:o},n)}var Provider_default=Provider$1;function createStoreHook(t=ReactReduxContext){const e=t===ReactReduxContext?useReduxContext:createReduxContextHook(t),n=()=>{const{store:s}=e();return s};return Object.assign(n,{withTypes:()=>n}),n}var useStore=createStoreHook();function createDispatchHook(t=ReactReduxContext){const e=t===ReactReduxContext?useStore:createStoreHook(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var useDispatch=createDispatchHook();initializeUseSelector(withSelectorExports$1.useSyncExternalStoreWithSelector);var extendStatics$2=function(t,e){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},extendStatics$2(t,e)};function __extends$2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var __assign$5=function(){return __assign$5=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},__assign$5.apply(this,arguments)};function __rest$2(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function __awaiter$2(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{c(s.next(d))}catch(p){o(p)}}function u(d){try{c(s.throw(d))}catch(p){o(p)}}function c(d){d.done?a(d.value):i(d.value).then(l,u)}c((s=s.apply(t,e||[])).next())})}function __generator$2(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return u([c,d])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(s=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __values$4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$5(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function __spreadArray$3(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(E){return Promise.resolve(E).then(g,p)}}function l(g,E){s[g]&&(i[g]=function(x){return new Promise(function(b,S){a.push([g,x,b,S])>1||u(g,x)})},E&&(i[g]=E(i[g])))}function u(g,E){try{c(s[g](E))}catch(x){m(a[0][3],x)}}function c(g){g.value instanceof __await?Promise.resolve(g.value.v).then(d,p):m(a[0][2],g)}function d(g){u("next",g)}function p(g){u("throw",g)}function m(g,E){g(E),a.shift(),a.length&&u(a[0][0],a[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values$4=="function"?__values$4(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(a){n[a]=t[a]&&function(o){return new Promise(function(l,u){o=t[a](o),i(l,u,o.done,o.value)})}}function i(a,o,l,u){Promise.resolve(u).then(function(c){a({value:c,done:l})},o)}}typeof SuppressedError=="function"&&SuppressedError;function dset(t,e,n){e.split&&(e=e.split("."));for(var s=0,i=e.length,a=t,o,l;s<i&&(l=""+e[s++],!(l==="__proto__"||l==="constructor"||l==="prototype"));)a=a[l]=s===i?n:typeof(o=a[l])==typeof e?o:e[s]*0!==0||~(""+e[s]).indexOf(".")?{}:[]}var pickBy$1=function(t,e){return Object.keys(t).filter(function(n){return e(n,t[n])}).reduce(function(n,s){return n[s]=t[s],n},{})},ValidationError=function(t){__extends$2(e,t);function e(n,s){var i=t.call(this,"".concat(n," ").concat(s))||this;return i.field=n,i}return e}(Error);function isString$4(t){return typeof t=="string"}function isNumber$3(t){return typeof t=="number"}function isFunction$5(t){return typeof t=="function"}function exists(t){return t!=null}function isPlainObject$4(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()==="object"}var stringError="is not a string",objError="is not an object",nilError="is nil";function assertEventExists(t){if(!exists(t))throw new ValidationError("Event",nilError);if(typeof t!="object")throw new ValidationError("Event",objError)}function assertEventType(t){if(!isString$4(t.type))throw new ValidationError(".type",stringError)}function assertTrackEventName(t){if(!isString$4(t.event))throw new ValidationError(".event",stringError)}function assertTrackEventProperties(t){if(!isPlainObject$4(t.properties))throw new ValidationError(".properties",objError)}function assertTraits(t){if(!isPlainObject$4(t.traits))throw new ValidationError(".traits",objError)}function assertMessageId(t){if(!isString$4(t.messageId))throw new ValidationError(".messageId",stringError)}function validateEvent(t){assertEventExists(t),assertEventType(t),assertMessageId(t),t.type==="track"&&(assertTrackEventName(t),assertTrackEventProperties(t)),["group","identify"].includes(t.type)&&assertTraits(t)}var InternalEventFactorySettings=function(){function t(e){var n,s;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(n=e.onEventMethodCall)!==null&&n!==void 0?n:function(){},this.onFinishedEvent=(s=e.onFinishedEvent)!==null&&s!==void 0?s:function(){}}return t}(),CoreEventFactory=function(){function t(e){this.settings=new InternalEventFactorySettings(e)}return t.prototype.track=function(e,n,s,i){return this.settings.onEventMethodCall({type:"track",options:s}),this.normalize(__assign$5(__assign$5({},this.baseEvent()),{event:e,type:"track",properties:n??{},options:__assign$5({},s),integrations:__assign$5({},i)}))},t.prototype.page=function(e,n,s,i,a){var o;this.settings.onEventMethodCall({type:"page",options:i});var l={type:"page",properties:__assign$5({},s),options:__assign$5({},i),integrations:__assign$5({},a)};return e!==null&&(l.category=e,l.properties=(o=l.properties)!==null&&o!==void 0?o:{},l.properties.category=e),n!==null&&(l.name=n),this.normalize(__assign$5(__assign$5({},this.baseEvent()),l))},t.prototype.screen=function(e,n,s,i,a){this.settings.onEventMethodCall({type:"screen",options:i});var o={type:"screen",properties:__assign$5({},s),options:__assign$5({},i),integrations:__assign$5({},a)};return e!==null&&(o.category=e),n!==null&&(o.name=n),this.normalize(__assign$5(__assign$5({},this.baseEvent()),o))},t.prototype.identify=function(e,n,s,i){return this.settings.onEventMethodCall({type:"identify",options:s}),this.normalize(__assign$5(__assign$5({},this.baseEvent()),{type:"identify",userId:e,traits:n??{},options:__assign$5({},s),integrations:i}))},t.prototype.group=function(e,n,s,i){return this.settings.onEventMethodCall({type:"group",options:s}),this.normalize(__assign$5(__assign$5({},this.baseEvent()),{type:"group",traits:n??{},options:__assign$5({},s),integrations:__assign$5({},i),groupId:e}))},t.prototype.alias=function(e,n,s,i){this.settings.onEventMethodCall({type:"alias",options:s});var a={userId:e,type:"alias",options:__assign$5({},s),integrations:__assign$5({},i)};return n!==null&&(a.previousId=n),e===void 0?this.normalize(__assign$5(__assign$5({},a),this.baseEvent())):this.normalize(__assign$5(__assign$5({},this.baseEvent()),a))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(e){var n,s=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),a=(n=e.context)!==null&&n!==void 0?n:{},o={};return i.forEach(function(l){l!=="context"&&(s.includes(l)?dset(o,l,e[l]):dset(a,l,e[l]))}),[a,o]},t.prototype.normalize=function(e){var n,s,i=Object.keys((n=e.integrations)!==null&&n!==void 0?n:{}).reduce(function(m,g){var E,x;return __assign$5(__assign$5({},m),(E={},E[g]=!!(!((x=e.integrations)===null||x===void 0)&&x[g]),E))},{});e.options=pickBy$1(e.options||{},function(m,g){return g!==void 0});var a=__assign$5(__assign$5({},i),(s=e.options)===null||s===void 0?void 0:s.integrations),o=e.options?this.context(e.options):[],l=o[0],u=o[1],c=e.options,d=__rest$2(e,["options"]),p=__assign$5(__assign$5(__assign$5(__assign$5({timestamp:new Date},d),{context:l,integrations:a}),u),{messageId:c.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(p),validateEvent(p),p},t}();function pTimeout(t,e){return new Promise(function(n,s){var i=setTimeout(function(){s(Error("Promise timed out"))},e);t.then(function(a){return clearTimeout(i),n(a)}).catch(s)})}function sleep(t){return new Promise(function(e){return setTimeout(e,t)})}function invokeCallback(t,e,n){var s=function(){try{return Promise.resolve(e(t))}catch(i){return Promise.reject(i)}};return sleep(n).then(function(){return pTimeout(s(),1e3)}).catch(function(i){t?.log("warn","Callback Error",{error:i}),t?.stats.increment("callback_error")}).then(function(){return t})}var createDeferred$1=function(){var t,e,n=!1,s=new Promise(function(i,a){t=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];n=!0,i.apply(void 0,o)},e=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];n=!0,a.apply(void 0,o)}});return{resolve:t,reject:e,promise:s,isSettled:function(){return n}}},Emitter=function(){function t(e){var n;this.callbacks={},this.warned=!1,this.maxListeners=(n=e?.maxListeners)!==null&&n!==void 0?n:10}return t.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},t.prototype.on=function(e,n){return this.callbacks[e]?(this.callbacks[e].push(n),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[n],this},t.prototype.once=function(e,n){var s=this,i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];s.off(e,i),n.apply(s,a)};return this.on(e,i),this},t.prototype.off=function(e,n){var s,i=(s=this.callbacks[e])!==null&&s!==void 0?s:[],a=i.filter(function(o){return o!==n});return this.callbacks[e]=a,this},t.prototype.emit=function(e){for(var n=this,s,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=(s=this.callbacks[e])!==null&&s!==void 0?s:[];return o.forEach(function(l){l.apply(n,i)}),this},t}();function backoff(t){var e=Math.random()+1,n=t.minTimeout,s=n===void 0?500:n,i=t.factor,a=i===void 0?2:i,o=t.attempt,l=t.maxTimeout,u=l===void 0?1/0:l;return Math.min(e*s*Math.pow(a,o),u)}var ON_REMOVE_FROM_FUTURE="onRemoveFromFuture",PriorityQueue=function(t){__extends$2(e,t);function e(n,s,i){var a=t.call(this)||this;return a.future=[],a.maxAttempts=n,a.queue=s,a.seen=i??{},a}return e.prototype.push=function(){for(var n=this,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var a=s.map(function(o){var l=n.updateAttempts(o);return l>n.maxAttempts||n.includes(o)?!1:(n.queue.push(o),!0)});return this.queue=this.queue.sort(function(o,l){return n.getAttempts(o)-n.getAttempts(l)}),a},e.prototype.pushWithBackoff=function(n,s){var i=this;if(s===void 0&&(s=0),s==0&&this.getAttempts(n)===0)return this.push(n)[0];var a=this.updateAttempts(n);if(a>this.maxAttempts||this.includes(n))return!1;var o=backoff({attempt:a-1});return s>0&&o<s&&(o=s),setTimeout(function(){i.queue.push(n),i.future=i.future.filter(function(l){return l.id!==n.id}),i.emit(ON_REMOVE_FROM_FUTURE)},o),this.future.push(n),!0},e.prototype.getAttempts=function(n){var s;return(s=this.seen[n.id])!==null&&s!==void 0?s:0},e.prototype.updateAttempts=function(n){return this.seen[n.id]=this.getAttempts(n)+1,this.getAttempts(n)},e.prototype.includes=function(n){return this.queue.includes(n)||this.future.includes(n)||!!this.queue.find(function(s){return s.id===n.id})||!!this.future.find(function(s){return s.id===n.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(Emitter),IDX=256,HEX=[],BUFFER;for(;IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);function v4(){var t=0,e,n="";if(!BUFFER||IDX+16>256){for(BUFFER=Array(t=256);t--;)BUFFER[t]=256*Math.random()|0;t=IDX=0}for(;t<16;t++)e=BUFFER[IDX+t],t==6?n+=HEX[e&15|64]:t==8?n+=HEX[e&63|128]:n+=HEX[e],t&1&&t>1&&t<11&&(n+="-");return IDX++,n}var CoreLogger=function(){function t(){this._logs=[]}return t.prototype.log=function(e,n,s){var i=new Date;this._logs.push({level:e,message:n,time:i,extras:s})},Object.defineProperty(t.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),t.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(n,s){var i,a,o,l=__assign$5(__assign$5({},s),{json:JSON.stringify(s.extras,null," "),extras:s.extras});delete l.time;var u=(o=(a=s.time)===null||a===void 0?void 0:a.toISOString())!==null&&o!==void 0?o:"";return n[u]&&(u="".concat(u,"-").concat(Math.random())),__assign$5(__assign$5({},n),(i={},i[u]=l,i))},{});console.table?console.table(e):console.log(e)}else this.logs.forEach(function(n){var s=n.level,i=n.message,a=n.extras;s==="info"||s==="debug"?console.log(i,a??""):console[s](i,a??"")});this._logs=[]},t}(),compactMetricType=function(t){var e={gauge:"g",counter:"c"};return e[t]},CoreStats=function(){function t(){this.metrics=[]}return t.prototype.increment=function(e,n,s){n===void 0&&(n=1),this.metrics.push({metric:e,value:n,tags:s??[],type:"counter",timestamp:Date.now()})},t.prototype.gauge=function(e,n,s){this.metrics.push({metric:e,value:n,tags:s??[],type:"gauge",timestamp:Date.now()})},t.prototype.flush=function(){var e=this.metrics.map(function(n){return __assign$5(__assign$5({},n),{tags:n.tags.join(",")})});console.table?console.table(e):console.log(e),this.metrics=[]},t.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:compactMetricType(e.type),e:e.timestamp}})},t}(),NullStats=function(t){__extends$2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e}(CoreStats),ContextCancelation=function(){function t(e){var n,s,i;this.retry=(n=e.retry)!==null&&n!==void 0?n:!0,this.type=(s=e.type)!==null&&s!==void 0?s:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return t}(),CoreContext=function(){function t(e,n,s,i){n===void 0&&(n=v4()),s===void 0&&(s=new NullStats),i===void 0&&(i=new CoreLogger),this.attempts=0,this.event=e,this._id=n,this.logger=i,this.stats=s}return t.system=function(){},t.prototype.isSame=function(e){return e.id===this.id},t.prototype.cancel=function(e){throw e||new ContextCancelation({reason:"Context Cancel"})},t.prototype.log=function(e,n,s){this.logger.log(e,n,s)},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.updateEvent=function(e,n){var s;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((s=this.event.integrations)===null||s===void 0?void 0:s[i])===!1)return this.event}return dset(this.event,e,n),this.event},t.prototype.failedDelivery=function(){return this._failedDelivery},t.prototype.setFailedDelivery=function(e){this._failedDelivery=e},t.prototype.logs=function(){return this.logger.logs},t.prototype.flush=function(){this.logger.flush(),this.stats.flush()},t.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},t}();function groupBy(t,e){var n={};return t.forEach(function(s){var i,a=void 0;{var o=s[e];a=typeof o!="string"?JSON.stringify(o):o}a!==void 0&&(n[a]=__spreadArray$3(__spreadArray$3([],(i=n[a])!==null&&i!==void 0?i:[],!0),[s],!1))}),n}var isThenable$3=function(t){return typeof t=="object"&&t!==null&&"then"in t&&typeof t.then=="function"},createTaskGroup=function(){var t,e,n=0;return{done:function(){return t},run:function(s){var i=s();return isThenable$3(i)&&(++n===1&&(t=new Promise(function(a){return e=a})),i.finally(function(){return--n===0&&e()})),i}}};function tryAsync(t){return __awaiter$2(this,void 0,void 0,function(){var e;return __generator$2(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function attempt(t,e){t.log("debug","plugin",{plugin:e.name});var n=new Date().getTime(),s=e[t.event.type];if(s===void 0)return Promise.resolve(t);var i=tryAsync(function(){return s.apply(e,[t])}).then(function(a){var o=new Date().getTime()-n;return a.stats.gauge("plugin_time",o,["plugin:".concat(e.name)]),a}).catch(function(a){if(a instanceof ContextCancelation&&a.type==="middleware_cancellation")throw a;return a instanceof ContextCancelation?(t.log("warn",a.type,{plugin:e.name,error:a}),a):(t.log("error","plugin Error",{plugin:e.name,error:a}),t.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),a)});return i}function ensure(t,e){return attempt(t,e).then(function(n){if(n instanceof CoreContext)return n;t.log("debug","Context canceled"),t.stats.increment("context_canceled"),t.cancel(n)})}var CoreEventQueue=function(t){__extends$2(e,t);function e(n){var s=t.call(this)||this;return s.criticalTasks=createTaskGroup(),s.plugins=[],s.failedInitializations=[],s.flushing=!1,s.queue=n,s.queue.on(ON_REMOVE_FROM_FUTURE,function(){s.scheduleFlush(0)}),s}return e.prototype.register=function(n,s,i){return __awaiter$2(this,void 0,void 0,function(){var a,o,l=this;return __generator$2(this,function(u){switch(u.label){case 0:return this.plugins.push(s),a=function(c){l.failedInitializations.push(s.name),l.emit("initialization_failure",s),console.warn(s.name,c),n.log("warn","Failed to load destination",{plugin:s.name,error:c}),l.plugins=l.plugins.filter(function(d){return d!==s})},s.type==="destination"&&s.name!=="Segment.io"?(s.load(n,i).catch(a),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,s.load(n,i)];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),a(o),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(n,s,i){return __awaiter$2(this,void 0,void 0,function(){var a;return __generator$2(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),s.unload?[4,Promise.resolve(s.unload(n,i))]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.plugins=this.plugins.filter(function(l){return l.name!==s.name}),[3,4];case 3:return a=o.sent(),n.log("warn","Failed to unload destination",{plugin:s.name,error:a}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(n){return __awaiter$2(this,void 0,void 0,function(){var s;return __generator$2(this,function(i){return n.log("debug","Dispatching"),n.stats.increment("message_dispatched"),this.queue.push(n),s=this.subscribeToDelivery(n),this.scheduleFlush(0),[2,s]})})},e.prototype.subscribeToDelivery=function(n){return __awaiter$2(this,void 0,void 0,function(){var s=this;return __generator$2(this,function(i){return[2,new Promise(function(a){var o=function(l,u){l.isSame(n)&&(s.off("flush",o),a(l))};s.on("flush",o)})]})})},e.prototype.dispatchSingle=function(n){return __awaiter$2(this,void 0,void 0,function(){var s=this;return __generator$2(this,function(i){return n.log("debug","Dispatching"),n.stats.increment("message_dispatched"),this.queue.updateAttempts(n),n.attempts=1,[2,this.deliver(n).catch(function(a){var o=s.enqueuRetry(a,n);return o?s.subscribeToDelivery(n):(n.setFailedDelivery({reason:a}),n)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(n){var s=this;n===void 0&&(n=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){s.flush().then(function(){setTimeout(function(){s.flushing=!1,s.queue.length&&s.scheduleFlush(0)},0)})},n))},e.prototype.deliver=function(n){return __awaiter$2(this,void 0,void 0,function(){var s,i,a,o;return __generator$2(this,function(l){switch(l.label){case 0:return[4,this.criticalTasks.done()];case 1:l.sent(),s=Date.now(),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.flushOne(n)];case 3:return n=l.sent(),i=Date.now()-s,this.emit("delivery_success",n),n.stats.gauge("delivered",i),n.log("debug","Delivered",n.event),[2,n];case 4:throw a=l.sent(),o=a,n.log("error","Failed to deliver",o),this.emit("delivery_failure",n,o),n.stats.increment("delivery_failed"),a;case 5:return[2]}})})},e.prototype.enqueuRetry=function(n,s){var i=!(n instanceof ContextCancelation)||n.retry;return i?this.queue.pushWithBackoff(s):!1},e.prototype.flush=function(){return __awaiter$2(this,void 0,void 0,function(){var n,s,i;return __generator$2(this,function(a){switch(a.label){case 0:if(this.queue.length===0)return[2,[]];if(n=this.queue.pop(),!n)return[2,[]];n.attempts=this.queue.getAttempts(n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.deliver(n)];case 2:return n=a.sent(),this.emit("flush",n,!0),[3,4];case 3:return s=a.sent(),i=this.enqueuRetry(s,n),i||(n.setFailedDelivery({reason:s}),this.emit("flush",n,!1)),[2,[]];case 4:return[2,[n]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(n){var s=this.plugins.filter(function(g){var E,x,b;if(g.type!=="destination"&&g.name!=="Segment.io")return!0;var S=void 0;return(E=g.alternativeNames)===null||E===void 0||E.forEach(function(C){n[C]!==void 0&&(S=n[C])}),(b=(x=n[g.name])!==null&&x!==void 0?x:S)!==null&&b!==void 0?b:(g.name==="Segment.io"?!0:n.All)!==!1}),i=groupBy(s,"type"),a=i.before,o=a===void 0?[]:a,l=i.enrichment,u=l===void 0?[]:l,c=i.destination,d=c===void 0?[]:c,p=i.after,m=p===void 0?[]:p;return{before:o,enrichment:u,destinations:d,after:m}},e.prototype.flushOne=function(n){var s,i;return __awaiter$2(this,void 0,void 0,function(){var a,o,l,u,c,d,E,p,m,g,E,x,b,S,C;return __generator$2(this,function(T){switch(T.label){case 0:if(!this.isReady())throw new Error("Not ready");n.attempts>1&&this.emit("delivery_retry",n),a=this.availableExtensions((s=n.event.integrations)!==null&&s!==void 0?s:{}),o=a.before,l=a.enrichment,u=0,c=o,T.label=1;case 1:return u<c.length?(d=c[u],[4,ensure(n,d)]):[3,4];case 2:E=T.sent(),E instanceof CoreContext&&(n=E),this.emit("message_enriched",n,d),T.label=3;case 3:return u++,[3,1];case 4:p=0,m=l,T.label=5;case 5:return p<m.length?(g=m[p],[4,attempt(n,g)]):[3,8];case 6:E=T.sent(),E instanceof CoreContext&&(n=E),this.emit("message_enriched",n,g),T.label=7;case 7:return p++,[3,5];case 8:return x=this.availableExtensions((i=n.event.integrations)!==null&&i!==void 0?i:{}),b=x.destinations,S=x.after,[4,new Promise(function(I,D){setTimeout(function(){var P=b.map(function(O){return attempt(n,O)});Promise.all(P).then(I).catch(D)},0)})];case 9:return T.sent(),n.stats.increment("message_delivered"),this.emit("message_delivered",n),C=S.map(function(I){return attempt(n,I)}),[4,Promise.all(C)];case 10:return T.sent(),[2,n]}})})},e}(Emitter),getDelay=function(t,e){var n=Date.now()-t;return Math.max((e??300)-n,0)};function dispatch(t,e,n,s){return __awaiter$2(this,void 0,void 0,function(){var i,a;return __generator$2(this,function(o){switch(o.label){case 0:return n.emit("dispatch_start",t),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(t)]:[3,2];case 1:return a=o.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:a=o.sent(),o.label=4;case 4:return s?.callback?[4,invokeCallback(a,s.callback,getDelay(i,s.timeout))]:[3,6];case 5:a=o.sent(),o.label=6;case 6:return s?.debug&&a.flush(),[2,a]}})})}function resolveArguments(t,e,n,s){var i,a=[t,e,n,s],o=isPlainObject$4(t)?t.event:t;if(!o||!isString$4(o))throw new Error("Event missing");var l=isPlainObject$4(t)?(i=t.properties)!==null&&i!==void 0?i:{}:isPlainObject$4(e)?e:{},u={};isFunction$5(n)||(u=n??{}),isPlainObject$4(t)&&!isFunction$5(e)&&(u=e??{});var c=a.find(isFunction$5);return[o,l,u,c]}function resolvePageArguments(t,e,n,s,i){var a,o,l=null,u=null,c=[t,e,n,s,i],d=c.filter(isString$4);d[0]!==void 0&&d[1]!==void 0&&(l=d[0],u=d[1]),d.length===1&&(l=null,u=d[0]);var p=c.find(isFunction$5),m=c.filter(function(x){return u===null?isPlainObject$4(x):isPlainObject$4(x)||x===null}),g=(a=m[0])!==null&&a!==void 0?a:{},E=(o=m[1])!==null&&o!==void 0?o:{};return[l,u,g,E,p]}var resolveUserArguments=function(t){return function(){for(var e,n,s,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o={},l=["callback","options","traits","id"],u=0,c=i;u<c.length;u++){var d=c[u],p=l.pop();if(p==="id"){if(isString$4(d)||isNumber$3(d)){o.id=d.toString();continue}if(d==null)continue;p=l.pop()}if((p==="traits"||p==="options")&&(d==null||isPlainObject$4(d))&&(o[p]=d),isFunction$5(d)){o.callback=d;break}}return[(e=o.id)!==null&&e!==void 0?e:t.id(),(n=o.traits)!==null&&n!==void 0?n:{},(s=o.options)!==null&&s!==void 0?s:{},o.callback]}};function resolveAliasArguments(t,e,n,s){isNumber$3(t)&&(t=t.toString()),isNumber$3(e)&&(e=e.toString());var i=[t,e,n,s],a=i.filter(isString$4),o=a[0],l=o===void 0?t:o,u=a[1],c=u===void 0?null:u,d=i.filter(isPlainObject$4)[0],p=d===void 0?{}:d,m=i.find(isFunction$5);return[l,c,p,m]}function isBrowser$2(){return typeof window<"u"}function isServer$1(){return!isBrowser$2()}function isOnline(){return isBrowser$2()?window.navigator.onLine:!0}function isOffline(){return!isOnline()}function unfetch$1(t,e){return e=e||{},new Promise(function(n,s){var i=new XMLHttpRequest,a=[],o=[],l={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return a},entries:function(){return o},get:function(d){return l[d.toLowerCase()]},has:function(d){return d.toLowerCase()in l}}}};for(var c in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(d,p,m){a.push(p=p.toLowerCase()),o.push([p,m]),l[p]=l[p]?l[p]+","+m:m}),n(u())},i.onerror=s,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)})}var getGlobal$1=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},fetch$2=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=getGlobal$1();return(n&&n.fetch||unfetch$1).apply(void 0,t)},version$9="1.76.0",SEGMENT_API_HOST="api.segment.io/v1",createRemoteMetric=function(t,e,n){var s=e.reduce(function(i,a){var o=a.split(":"),l=o[0],u=o[1];return i[l]=u,i},{});return{type:"Counter",metric:t,value:1,tags:__assign$5(__assign$5({},s),{library:"analytics.js",library_version:"npm:next-".concat(version$9)})}};function logError(t){console.error("Error sending segment performance metrics",t)}var RemoteMetrics=function(){function t(e){var n=this,s,i,a,o,l;if(this.host=(s=e?.host)!==null&&s!==void 0?s:SEGMENT_API_HOST,this.sampleRate=(i=e?.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(a=e?.flushTimer)!==null&&a!==void 0?a:30*1e3,this.maxQueueSize=(o=e?.maxQueueSize)!==null&&o!==void 0?o:20,this.protocol=(l=e?.protocol)!==null&&l!==void 0?l:"https",this.queue=[],this.sampleRate>0){var u=!1,c=function(){u||(u=!0,n.flush().catch(logError),u=!1,setTimeout(c,n.flushTimer))};c()}}return t.prototype.increment=function(e,n){if(e.includes("analytics_js.")&&n.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var s=createRemoteMetric(e,n);this.queue.push(s),e.includes("error")&&this.flush().catch(logError)}},t.prototype.flush=function(){return __awaiter$2(this,void 0,void 0,function(){var e=this;return __generator$2(this,function(n){switch(n.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(s){logError(s),e.sampleRate=0})];case 1:return n.sent(),[2]}})})},t.prototype.send=function(){return __awaiter$2(this,void 0,void 0,function(){var e,n,s;return __generator$2(this,function(i){return e={series:this.queue},this.queue=[],n={"Content-Type":"text/plain"},s="".concat(this.protocol,"://").concat(this.host,"/m"),[2,fetch$2(s,{headers:n,body:JSON.stringify(e),method:"POST"})]})})},t}(),remoteMetrics,Stats=function(t){__extends$2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.initRemoteMetrics=function(n){remoteMetrics=new RemoteMetrics(n)},e.prototype.increment=function(n,s,i){t.prototype.increment.call(this,n,s,i),remoteMetrics?.increment(n,i??[])},e}(CoreStats),Context$1=function(t){__extends$2(e,t);function e(n,s){return t.call(this,n,s,new Stats)||this}return e.system=function(){return new this({type:"track",event:"system"})},e}(CoreContext),BufferedPageContextDiscriminant="bpc",createBufferedPageContext=function(t,e,n,s,i,a){return{__t:BufferedPageContextDiscriminant,c:e,p:s,u:t,s:n,t:i,r:a}},BUFFERED_PAGE_CONTEXT_KEYS=Object.keys(createBufferedPageContext("","","","","",""));function isBufferedPageContext(t){if(!isPlainObject$4(t)||t.__t!==BufferedPageContextDiscriminant)return!1;for(var e in t)if(!BUFFERED_PAGE_CONTEXT_KEYS.includes(e))return!1;return!0}var createCanonicalURL=function(t,e){return t.indexOf("?")>-1?t:t+e},removeHash=function(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)},parseCanonicalPath=function(t){try{return new URL(t).pathname}catch{return t[0]==="/"?t:"/"+t}},createPageContext=function(t){var e=t.c,n=t.p,s=t.s,i=t.u,a=t.r,o=t.t,l=e?parseCanonicalPath(e):n,u=e?createCanonicalURL(e,s):removeHash(i);return{path:l,referrer:a,search:s,title:o,url:u}},getDefaultBufferedPageContext=function(){var t=document.querySelector("link[rel='canonical']");return createBufferedPageContext(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},getDefaultPageContext=function(){return createPageContext(getDefaultBufferedPageContext())};function pick(t,e){return Object.assign.apply(Object,__spreadArray$3([{}],e.map(function(n){var s;if(t&&Object.prototype.hasOwnProperty.call(t,n))return s={},s[n]=t[n],s}),!1))}var addPageContext=function(t,e){e===void 0&&(e=getDefaultPageContext());var n=t.context,s;t.type==="page"&&(s=t.properties&&pick(t.properties,Object.keys(e)),t.properties=__assign$5(__assign$5(__assign$5({},e),t.properties),t.name?{name:t.name}:{})),n.page=__assign$5(__assign$5(__assign$5({},e),s),n.page)},EventFactory=function(t){__extends$2(e,t);function e(n){var s=t.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(v4())},onEventMethodCall:function(i){var a=i.options;s.maybeUpdateAnonId(a)},onFinishedEvent:function(i){return s.addIdentity(i),i}})||this;return s.user=n,s}return e.prototype.maybeUpdateAnonId=function(n){n?.anonymousId&&this.user.anonymousId(n.anonymousId)},e.prototype.addIdentity=function(n){this.user.id()&&(n.userId=this.user.id()),this.user.anonymousId()&&(n.anonymousId=this.user.anonymousId())},e.prototype.track=function(n,s,i,a,o){var l=t.prototype.track.call(this,n,s,i,a);return addPageContext(l,o),l},e.prototype.page=function(n,s,i,a,o,l){var u=t.prototype.page.call(this,n,s,i,a,o);return addPageContext(u,l),u},e.prototype.screen=function(n,s,i,a,o,l){var u=t.prototype.screen.call(this,n,s,i,a,o);return addPageContext(u,l),u},e.prototype.identify=function(n,s,i,a,o){var l=t.prototype.identify.call(this,n,s,i,a);return addPageContext(l,o),l},e.prototype.group=function(n,s,i,a,o){var l=t.prototype.group.call(this,n,s,i,a);return addPageContext(l,o),l},e.prototype.alias=function(n,s,i,a,o){var l=t.prototype.alias.call(this,n,s,i,a);return addPageContext(l,o),l},e}(CoreEventFactory),isDestinationPluginWithAddMiddleware=function(t){return"addMiddleware"in t&&t.type==="destination"},loc={getItem:function(){},setItem:function(){},removeItem:function(){}};try{loc=isBrowser$2()&&window.localStorage?window.localStorage:loc}catch(t){console.warn("Unable to access localStorage",t)}function persisted(t){var e=loc.getItem(t);return(e?JSON.parse(e):[]).map(function(n){return new Context$1(n.event,n.id)})}function persistItems(t,e){var n=persisted(t),s=__spreadArray$3(__spreadArray$3([],e,!0),n,!0),i=s.reduce(function(a,o){var l;return __assign$5(__assign$5({},a),(l={},l[o.id]=o,l))},{});loc.setItem(t,JSON.stringify(Object.values(i)))}function seen(t){var e=loc.getItem(t);return e?JSON.parse(e):{}}function persistSeen(t,e){var n=seen(t);loc.setItem(t,JSON.stringify(__assign$5(__assign$5({},n),e)))}function remove(t){loc.removeItem(t)}var now$2=function(){return new Date().getTime()};function mutex(t,e,n){n===void 0&&(n=0);var s=50,i="persisted-queue:v1:".concat(t,":lock"),a=function(c){return new Date().getTime()>c},o=loc.getItem(i),l=o?JSON.parse(o):null,u=l===null||a(l);if(u){loc.setItem(i,JSON.stringify(now$2()+s)),e(),loc.removeItem(i);return}!u&&n<3?setTimeout(function(){mutex(t,e,n+1)},s):console.error("Unable to retrieve lock")}var PersistedPriorityQueue=function(t){__extends$2(e,t);function e(n,s){var i=t.call(this,n,[])||this,a="persisted-queue:v1:".concat(s,":items"),o="persisted-queue:v1:".concat(s,":seen"),l=[],u={};return mutex(s,function(){try{l=persisted(a),u=seen(o),remove(a),remove(o),i.queue=__spreadArray$3(__spreadArray$3([],l,!0),i.queue,!0),i.seen=__assign$5(__assign$5({},u),i.seen)}catch(c){console.error(c)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var c=__spreadArray$3(__spreadArray$3([],i.queue,!0),i.future,!0);try{mutex(s,function(){persistItems(a,c),persistSeen(o,i.seen)})}catch(d){console.error(d)}}}),i}return e}(PriorityQueue),EventQueue=function(t){__extends$2(e,t);function e(n){return t.call(this,typeof n=="string"?new PersistedPriorityQueue(4,n):n)||this}return e.prototype.flush=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(n){return isOffline()?[2,[]]:[2,t.prototype.flush.call(this)]})})},e}(CoreEventQueue);function bindAll(t){for(var e=t.constructor.prototype,n=0,s=Object.getOwnPropertyNames(e);n<s.length;n++){var i=s[n];if(i!=="constructor"){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);a&&typeof a.value=="function"&&(t[i]=t[i].bind(t))}}return t}/*! js-cookie v3.0.1 | MIT */function assign$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)t[s]=n[s]}return t}var defaultConverter$1={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$7(t,e){function n(i,a,o){if(!(typeof document>"u")){o=assign$5({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var u in o)o[u]&&(l+="; "+u,o[u]!==!0&&(l+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(a,i)+l}}function s(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var a=document.cookie?document.cookie.split("; "):[],o={},l=0;l<a.length;l++){var u=a[l].split("="),c=u.slice(1).join("=");try{var d=decodeURIComponent(u[0]);if(o[d]=t.read(c,d),i===d)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:s,remove:function(i,a){n(i,"",assign$5({},a,{expires:-1}))},withAttributes:function(i){return init$7(this.converter,assign$5({},this.attributes,i))},withConverter:function(i){return init$7(assign$5({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var api$1=init$7(defaultConverter$1,{path:"/"});function levels(t){var e=t.hostname,n=e.split("."),s=n[n.length-1],i=[];if(n.length===4&&parseInt(s,10)>0||n.length<=1)return i;for(var a=n.length-2;a>=0;--a)i.push(n.slice(a).join("."));return i}function parseUrl$2(t){try{return new URL(t)}catch{return}}function tld(t){var e=parseUrl$2(t);if(e)for(var n=levels(e),s=0;s<n.length;++s){var i="__tld__",a=n[s],o={domain:"."+a};try{if(api$1.set(i,"1",o),api$1.get(i))return api$1.remove(i,o),a}catch{return}}}var ONE_YEAR=365,CookieStorage=function(){function t(e){e===void 0&&(e=t.defaults),this.options=__assign$5(__assign$5({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:ONE_YEAR,domain:tld(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(e){var n;try{var s=api$1.get(e);if(s==null)return null;try{return(n=JSON.parse(s))!==null&&n!==void 0?n:null}catch{return s??null}}catch{return null}},t.prototype.set=function(e,n){typeof n=="string"?api$1.set(e,n,this.opts()):n===null?api$1.remove(e,this.opts()):api$1.set(e,JSON.stringify(n),this.opts())},t.prototype.remove=function(e){return api$1.remove(e,this.opts())},t}(),LocalStorage$1=function(){function t(){}return t.prototype.localStorageWarning=function(e,n){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(n))},t.prototype.get=function(e){var n;try{var s=localStorage.getItem(e);if(s===null)return null;try{return(n=JSON.parse(s))!==null&&n!==void 0?n:null}catch{return s??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},t.prototype.set=function(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch{this.localStorageWarning(e,"full")}},t.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},t}(),MemoryStorage=function(){function t(){this.cache={}}return t.prototype.get=function(e){var n;return(n=this.cache[e])!==null&&n!==void 0?n:null},t.prototype.set=function(e,n){this.cache[e]=n},t.prototype.remove=function(e){delete this.cache[e]},t}(),StoreType={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function isArrayOfStoreType(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every(function(e){return Object.values(StoreType).includes(e)})}function isStoreTypeWithSettings(t){return typeof t=="object"&&t.name!==void 0}var _logStoreKeyError=function(t,e,n,s){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(s))},UniversalStorage=function(){function t(e){this.stores=e}return t.prototype.get=function(e){for(var n=null,s=0,i=this.stores;s<i.length;s++){var a=i[s];try{if(n=a.get(e),n!=null)return n}catch(o){_logStoreKeyError(a,"get",e,o)}}return null},t.prototype.set=function(e,n){this.stores.forEach(function(s){try{s.set(e,n)}catch(i){_logStoreKeyError(s,"set",e,i)}})},t.prototype.clear=function(e){this.stores.forEach(function(n){try{n.remove(e)}catch(s){_logStoreKeyError(n,"remove",e,s)}})},t.prototype.getAndSync=function(e){var n=this.get(e),s=typeof n=="number"?n.toString():n;return this.set(e,s),s},t}();function initializeStorages(t){var e=t.map(function(n){var s,i;switch(isStoreTypeWithSettings(n)?(s=n.name,i=n.settings):s=n,s){case StoreType.Cookie:return new CookieStorage(i);case StoreType.LocalStorage:return new LocalStorage$1;case StoreType.Memory:return new MemoryStorage;default:throw new Error("Unknown Store Type: ".concat(n))}});return e}function applyCookieOptions(t,e){return t.map(function(n){return e&&n===StoreType.Cookie?{name:n,settings:e}:n})}var defaults$4={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},User=function(){function t(e,n){e===void 0&&(e=defaults$4);var s=this,i,a,o,l;this.options={},this.id=function(c){if(s.options.disable)return null;var d=s.identityStore.getAndSync(s.idKey);if(c!==void 0){s.identityStore.set(s.idKey,c);var p=c!==d&&d!==null&&c!==null;p&&s.anonymousId(null)}var m=s.identityStore.getAndSync(s.idKey);if(m)return m;var g=s.legacyUserStore.get(defaults$4.cookie.oldKey);return g?typeof g=="object"?g.id:g:null},this.anonymousId=function(c){var d,p;if(s.options.disable)return null;if(c===void 0){var m=(d=s.identityStore.getAndSync(s.anonKey))!==null&&d!==void 0?d:(p=s.legacySIO())===null||p===void 0?void 0:p[0];if(m)return m}return c===null?(s.identityStore.set(s.anonKey,null),s.identityStore.getAndSync(s.anonKey)):(s.identityStore.set(s.anonKey,c??v4()),s.identityStore.getAndSync(s.anonKey))},this.traits=function(c){var d;if(!s.options.disable)return c===null&&(c={}),c&&s.traitsStore.set(s.traitsKey,c??{}),(d=s.traitsStore.get(s.traitsKey))!==null&&d!==void 0?d:{}},this.options=__assign$5(__assign$5({},defaults$4),e),this.cookieOptions=n,this.idKey=(a=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&a!==void 0?a:defaults$4.cookie.key,this.traitsKey=(l=(o=e.localStorage)===null||o===void 0?void 0:o.key)!==null&&l!==void 0?l:defaults$4.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,n),this.legacyUserStore=this.createStorage(this.options,n,function(c){return c===StoreType.Cookie}),this.traitsStore=this.createStorage(this.options,n,function(c){return c!==StoreType.Cookie});var u=this.legacyUserStore.get(defaults$4.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),bindAll(this)}return t.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var n=e.split("----"),s=n[0],i=n[1];return[s,i]},t.prototype.identify=function(e,n){if(!this.options.disable){n=n??{};var s=this.id();(s===null||s===e)&&(n=__assign$5(__assign$5({},this.traits()),n)),e&&this.id(e),this.traits(n)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(e,n,s){var i=[StoreType.LocalStorage,StoreType.Cookie,StoreType.Memory];return e.disable?new UniversalStorage([]):e.persist?(e.storage!==void 0&&e.storage!==null&&isArrayOfStoreType(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(a){return a!==StoreType.LocalStorage})),s&&(i=i.filter(s)),new UniversalStorage(initializeStorages(applyCookieOptions(i,n)))):new UniversalStorage([new MemoryStorage])},t.defaults=defaults$4,t}(),groupDefaults={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},Group=function(t){__extends$2(e,t);function e(n,s){n===void 0&&(n=groupDefaults);var i=t.call(this,__assign$5(__assign$5({},groupDefaults),n),s)||this;return i.anonymousId=function(a){},bindAll(i),i}return e}(User),_globalAnalyticsKey="analytics";function getGlobalAnalytics(){return window[_globalAnalyticsKey]}function setGlobalAnalyticsKey(t){_globalAnalyticsKey=t}function setGlobalAnalytics(t){window[_globalAnalyticsKey]=t}var isThenable$2=function(t){return typeof t=="object"&&t!==null&&"then"in t&&typeof t.then=="function"},flushSyncAnalyticsCalls=function(t,e,n){n.getAndRemove(t).forEach(function(s){callAnalyticsMethod(e,s).catch(console.error)})},flushAddSourceMiddleware=function(t,e){return __awaiter$2(void 0,void 0,void 0,function(){var n,s,i;return __generator$2(this,function(a){switch(a.label){case 0:n=0,s=e.getAndRemove("addSourceMiddleware"),a.label=1;case 1:return n<s.length?(i=s[n],[4,callAnalyticsMethod(t,i).catch(console.error)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},flushRegister=function(t,e){return __awaiter$2(void 0,void 0,void 0,function(){var n,s,i;return __generator$2(this,function(a){switch(a.label){case 0:n=0,s=e.getAndRemove("register"),a.label=1;case 1:return n<s.length?(i=s[n],[4,callAnalyticsMethod(t,i).catch(console.error)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},flushOn=flushSyncAnalyticsCalls.bind(void 0,"on"),flushSetAnonymousID=flushSyncAnalyticsCalls.bind(void 0,"setAnonymousId"),flushAnalyticsCallsInNewTask=function(t,e){Object.keys(e.calls).forEach(function(n){e.getAndRemove(n).forEach(function(s){setTimeout(function(){callAnalyticsMethod(t,s).catch(console.error)},0)})})},popPageContext=function(t){if(hasBufferedPageContextAsLastArg(t)){var e=t.pop();return createPageContext(e)}},hasBufferedPageContextAsLastArg=function(t){var e=t[t.length-1];return isBufferedPageContext(e)},PreInitMethodCall=function(){function t(e,n,s,i){s===void 0&&(s=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=s,this.reject=i,this.called=!1,this.args=n}return t}(),PreInitMethodCallBuffer=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),t.prototype.get=function(e){var n;return(n=this.calls[e])!==null&&n!==void 0?n:[]},t.prototype.getAndRemove=function(e){var n=this.get(e);return this.calls[e]=[],n},t.prototype.add=function(){for(var e=this,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];n.forEach(function(i){var a=["track","screen","alias","group","page","identify"];a.includes(i.method)&&!hasBufferedPageContextAsLastArg(i.args)&&(i.args=__spreadArray$3(__spreadArray$3([],i.args,!0),[getDefaultBufferedPageContext()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){},t}();function callAnalyticsMethod(t,e){return __awaiter$2(this,void 0,void 0,function(){var n,s;return __generator$2(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,n=t[e.method].apply(t,e.args),isThenable$2(n)?[4,n]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(n),[3,4];case 3:return s=i.sent(),e.reject(s),[3,4];case 4:return[2]}})})}var AnalyticsBuffered=function(){function t(e){var n=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=version$9,this._preInitBuffer=new PreInitMethodCallBuffer,this._promise=e(this._preInitBuffer),this._promise.then(function(s){var i=s[0],a=s[1];n.instance=i,n.ctx=a}).catch(function(){})}return t.prototype.then=function(){for(var e,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return(e=this._promise).then.apply(e,n)},t.prototype.catch=function(){for(var e,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return(e=this._promise).catch.apply(e,n)},t.prototype.finally=function(){for(var e,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return(e=this._promise).finally.apply(e,n)},t.prototype._createMethod=function(e){var n=this;return function(){for(var s,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(n.instance){var o=(s=n.instance)[e].apply(s,i);return Promise.resolve(o)}return new Promise(function(l,u){n._preInitBuffer.add(new PreInitMethodCall(e,i,l,u))})}},t.prototype._createChainableMethod=function(e){var n=this;return function(){for(var s,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return n.instance?((s=n.instance)[e].apply(s,i),n):(n._preInitBuffer.add(new PreInitMethodCall(e,i)),n)}},t}(),dist={},facade={},address={},objCase={exports:{}},hasRequiredObjCase;function requireObjCase(){return hasRequiredObjCase||(hasRequiredObjCase=1,function(t){t.exports=e(n),t.exports.find=t.exports,t.exports.replace=function(l,u,c,d){return e(i).call(this,l,u,c,d),l},t.exports.del=function(l,u,c){return e(s).call(this,l,u,null,c),l};function e(l){return function(u,c,d,p){var m=p&&o(p.normalizer)?p.normalizer:a;c=m(c);for(var g,E=!1;!E;)x();function x(){for(g in u){var b=m(g);if(c.indexOf(b)===0){var S=c.substr(b.length);if(S.charAt(0)==="."||S.length===0){c=S.substr(1);var C=u[g];if(C==null){E=!0;return}if(!c.length){E=!0;return}u=C;return}}}g=void 0,E=!0}if(g)return u==null?u:l(u,g,d)}}function n(l,u){if(l.hasOwnProperty(u))return l[u]}function s(l,u){return l.hasOwnProperty(u)&&delete l[u],l}function i(l,u,c){return l.hasOwnProperty(u)&&(l[u]=c),l}function a(l){return l.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function o(l){return typeof l=="function"}}(objCase)),objCase.exports}var hasRequiredAddress;function requireAddress(){if(hasRequiredAddress)return address;hasRequiredAddress=1;var t=address&&address.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(address,"__esModule",{value:!0});var e=t(requireObjCase());function n(i,a){return function(){var o=this.traits(),l=this.properties?this.properties():{};return e.default(o,"address."+i)||e.default(o,i)||(a?e.default(o,"address."+a):null)||(a?e.default(o,a):null)||e.default(l,"address."+i)||e.default(l,i)||(a?e.default(l,"address."+a):null)||(a?e.default(l,a):null)}}function s(i){i.zip=n("postalCode","zip"),i.country=n("country"),i.street=n("street"),i.state=n("state"),i.city=n("city"),i.region=n("region")}return address.default=s,address}var clone$2={},hasRequiredClone;function requireClone(){if(hasRequiredClone)return clone$2;hasRequiredClone=1,Object.defineProperty(clone$2,"__esModule",{value:!0}),clone$2.clone=void 0;function t(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=t(e[s]));return n}else return Array.isArray(e)?e.map(t):e}return clone$2.clone=t,clone$2}var isEnabled$2={},hasRequiredIsEnabled;function requireIsEnabled(){if(hasRequiredIsEnabled)return isEnabled$2;hasRequiredIsEnabled=1,Object.defineProperty(isEnabled$2,"__esModule",{value:!0});var t={Salesforce:!0};function e(n){return!t[n]}return isEnabled$2.default=e,isEnabled$2}var lib$5={},hasRequiredLib$5;function requireLib$5(){if(hasRequiredLib$5)return lib$5;hasRequiredLib$5=1;var t=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;return lib$5.parse=function(e){var n=[1,5,6,7,11,12],s=t.exec(e),i=0;if(!s)return new Date(e);for(var a=0,o;o=n[a];a++)s[o]=parseInt(s[o],10)||0;s[2]=parseInt(s[2],10)||1,s[3]=parseInt(s[3],10)||1,s[2]--,s[8]=s[8]?(s[8]+"00").substring(0,3):0,s[4]===" "?i=new Date().getTimezoneOffset():s[9]!=="Z"&&s[10]&&(i=s[11]*60+s[12],s[10]==="+"&&(i=0-i));var l=Date.UTC(s[1],s[2],s[3],s[5],s[6]+i,s[7],s[8]);return new Date(l)},lib$5.is=function(e,n){return typeof e!="string"||n&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:t.test(e)},lib$5}var milliseconds$1={},hasRequiredMilliseconds;function requireMilliseconds(){if(hasRequiredMilliseconds)return milliseconds$1;hasRequiredMilliseconds=1;var t=/\d{13}/;return milliseconds$1.is=function(e){return t.test(e)},milliseconds$1.parse=function(e){return e=parseInt(e,10),new Date(e)},milliseconds$1}var seconds$1={},hasRequiredSeconds;function requireSeconds(){if(hasRequiredSeconds)return seconds$1;hasRequiredSeconds=1;var t=/\d{10}/;return seconds$1.is=function(e){return t.test(e)},seconds$1.parse=function(e){var n=parseInt(e,10)*1e3;return new Date(n)},seconds$1}var lib$4,hasRequiredLib$4;function requireLib$4(){if(hasRequiredLib$4)return lib$4;hasRequiredLib$4=1;var t=requireLib$5(),e=requireMilliseconds(),n=requireSeconds(),s=Object.prototype,i=s.toString;function a(u){return i.call(u)==="[object Date]"}function o(u){return i.call(u)==="[object Number]"}lib$4=function(c){return a(c)?c:o(c)?new Date(l(c)):t.is(c)?t.parse(c):e.is(c)?e.parse(c):n.is(c)?n.parse(c):new Date(c)};function l(u){return u<315576e5?u*1e3:u}return lib$4}var lib$3,hasRequiredLib$3;function requireLib$3(){if(hasRequiredLib$3)return lib$3;hasRequiredLib$3=1;var t=requireLib$5();lib$3=e;function e(i,a){return a===void 0&&(a=!0),i&&typeof i=="object"?n(i,a):Array.isArray(i)?s(i,a):t.is(i,a)?t.parse(i):i}function n(i,a){return Object.keys(i).forEach(function(o){i[o]=e(i[o],a)}),i}function s(i,a){return i.forEach(function(o,l){i[l]=e(o,a)}),i}return lib$3}var hasRequiredFacade;function requireFacade(){if(hasRequiredFacade)return facade;hasRequiredFacade=1;var t=facade&&facade.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(facade,"__esModule",{value:!0}),facade.Facade=void 0;var e=t(requireAddress()),n=requireClone(),s=t(requireIsEnabled()),i=t(requireLib$4()),a=t(requireObjCase()),o=t(requireLib$3());function l(d,p){p=p||{},this.raw=n.clone(d),"clone"in p||(p.clone=!0),p.clone&&(d=n.clone(d)),"traverse"in p||(p.traverse=!0),"timestamp"in d?d.timestamp=i.default(d.timestamp):d.timestamp=new Date,p.traverse&&o.default(d),this.opts=p,this.obj=d}facade.Facade=l;var u=l.prototype;u.proxy=function(d){var p=d.split(".");d=p.shift();var m=this[d]||this.obj[d];return m&&(typeof m=="function"&&(m=m.call(this)||{}),p.length===0?this.opts.clone?c(m):m:(m=a.default(m,p.join(".")),this.opts.clone?c(m):m))},u.field=function(d){var p=this.obj[d];return this.opts.clone?c(p):p},l.proxy=function(d){return function(){return this.proxy(d)}},l.field=function(d){return function(){return this.field(d)}},l.multi=function(d){return function(){var p=this.proxy(d+"s");if(Array.isArray(p))return p;var m=this.proxy(d);return m&&(m=[this.opts.clone?n.clone(m):m]),m||[]}},l.one=function(d){return function(){var p=this.proxy(d);if(p)return p;var m=this.proxy(d+"s");if(Array.isArray(m))return m[0]}},u.json=function(){var d=this.opts.clone?n.clone(this.obj):this.obj;return this.type&&(d.type=this.type()),d},u.rawEvent=function(){return this.raw},u.options=function(d){var p=this.obj.options||this.obj.context||{},m=this.opts.clone?n.clone(p):p;if(!d)return m;if(this.enabled(d)){var g=this.integrations(),E=g[d]||a.default(g,d);return typeof E!="object"&&(E=a.default(this.options(),d)),typeof E=="object"?E:{}}},u.context=u.options,u.enabled=function(d){var p=this.proxy("options.providers.all");typeof p!="boolean"&&(p=this.proxy("options.all")),typeof p!="boolean"&&(p=this.proxy("integrations.all")),typeof p!="boolean"&&(p=!0);var m=p&&s.default(d),g=this.integrations();if(g.providers&&g.providers.hasOwnProperty(d)&&(m=g.providers[d]),g.hasOwnProperty(d)){var E=g[d];typeof E=="boolean"?m=E:m=!0}return!!m},u.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},u.active=function(){var d=this.proxy("options.active");return d==null&&(d=!0),d},u.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},u.sessionId=u.anonymousId,u.groupId=l.proxy("options.groupId"),u.traits=function(d){var p=this.proxy("options.traits")||{},m=this.userId();d=d||{},m&&(p.id=m);for(var g in d)if(Object.prototype.hasOwnProperty.call(d,g)){var E=this[g]==null?this.proxy("options.traits."+g):this[g]();if(E==null)continue;p[d[g]]=E,delete p[g]}return p},u.library=function(){var d=this.proxy("options.library");return d?typeof d=="string"?{name:d,version:null}:d:{name:"unknown",version:null}},u.device=function(){var d=this.proxy("context.device");(typeof d!="object"||d===null)&&(d={});var p=this.library().name;return d.type||(p.indexOf("ios")>-1&&(d.type="ios"),p.indexOf("android")>-1&&(d.type="android")),d},u.userAgent=l.proxy("context.userAgent"),u.timezone=l.proxy("context.timezone"),u.timestamp=l.field("timestamp"),u.channel=l.field("channel"),u.ip=l.proxy("context.ip"),u.userId=l.field("userId"),e.default(u);function c(d){return n.clone(d)}return facade}var alias={},inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,n){if(n){e.super_=n;var s=function(){};s.prototype=n.prototype,e.prototype=new s,e.prototype.constructor=e}}),inherits_browser.exports}var hasRequiredAlias;function requireAlias(){if(hasRequiredAlias)return alias;hasRequiredAlias=1;var t=alias&&alias.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(alias,"__esModule",{value:!0}),alias.Alias=void 0;var e=t(requireInherits_browser()),n=requireFacade();function s(i,a){n.Facade.call(this,i,a)}return alias.Alias=s,e.default(s,n.Facade),s.prototype.action=function(){return"alias"},s.prototype.type=s.prototype.action,s.prototype.previousId=function(){return this.field("previousId")||this.field("from")},s.prototype.from=s.prototype.previousId,s.prototype.userId=function(){return this.field("userId")||this.field("to")},s.prototype.to=s.prototype.userId,alias}var group={},isEmail={},hasRequiredIsEmail;function requireIsEmail(){if(hasRequiredIsEmail)return isEmail;hasRequiredIsEmail=1,Object.defineProperty(isEmail,"__esModule",{value:!0});var t=/.+\@.+\..+/;function e(n){return t.test(n)}return isEmail.default=e,isEmail}var hasRequiredGroup;function requireGroup(){if(hasRequiredGroup)return group;hasRequiredGroup=1;var t=group&&group.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(group,"__esModule",{value:!0}),group.Group=void 0;var e=t(requireInherits_browser()),n=t(requireIsEmail()),s=t(requireLib$4()),i=requireFacade();function a(l,u){i.Facade.call(this,l,u)}group.Group=a,e.default(a,i.Facade);var o=a.prototype;return o.action=function(){return"group"},o.type=o.action,o.groupId=i.Facade.field("groupId"),o.created=function(){var l=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(l)return s.default(l)},o.email=function(){var l=this.proxy("traits.email");if(l)return l;var u=this.groupId();if(n.default(u))return u},o.traits=function(l){var u=this.properties(),c=this.groupId();l=l||{},c&&(u.id=c);for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)){var p=this[d]==null?this.proxy("traits."+d):this[d]();if(p==null)continue;u[l[d]]=p,delete u[d]}return u},o.name=i.Facade.proxy("traits.name"),o.industry=i.Facade.proxy("traits.industry"),o.employees=i.Facade.proxy("traits.employees"),o.properties=function(){return this.field("traits")||this.field("properties")||{}},group}var identify$1={},hasRequiredIdentify;function requireIdentify(){if(hasRequiredIdentify)return identify$1;hasRequiredIdentify=1;var t=identify$1&&identify$1.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(identify$1,"__esModule",{value:!0}),identify$1.Identify=void 0;var e=requireFacade(),n=t(requireObjCase()),s=t(requireInherits_browser()),i=t(requireIsEmail()),a=t(requireLib$4()),o=function(c){return c.trim()};function l(c,d){e.Facade.call(this,c,d)}identify$1.Identify=l,s.default(l,e.Facade);var u=l.prototype;return u.action=function(){return"identify"},u.type=u.action,u.traits=function(c){var d=this.field("traits")||{},p=this.userId();c=c||{},p&&(d.id=p);for(var m in c){var g=this[m]==null?this.proxy("traits."+m):this[m]();g!=null&&(d[c[m]]=g,m!==c[m]&&delete d[m])}return d},u.email=function(){var c=this.proxy("traits.email");if(c)return c;var d=this.userId();if(i.default(d))return d},u.created=function(){var c=this.proxy("traits.created")||this.proxy("traits.createdAt");if(c)return a.default(c)},u.companyCreated=function(){var c=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(c)return a.default(c)},u.companyName=function(){return this.proxy("traits.company.name")},u.name=function(){var c=this.proxy("traits.name");if(typeof c=="string")return o(c);var d=this.firstName(),p=this.lastName();if(d&&p)return o(d+" "+p)},u.firstName=function(){var c=this.proxy("traits.firstName");if(typeof c=="string")return o(c);var d=this.proxy("traits.name");if(typeof d=="string")return o(d).split(" ")[0]},u.lastName=function(){var c=this.proxy("traits.lastName");if(typeof c=="string")return o(c);var d=this.proxy("traits.name");if(typeof d=="string"){var p=o(d).indexOf(" ");if(p!==-1)return o(d.substr(p+1))}},u.uid=function(){return this.userId()||this.username()||this.email()},u.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},u.age=function(){var c=this.birthday(),d=n.default(this.traits(),"age");if(d!=null)return d;if(c instanceof Date){var p=new Date;return p.getFullYear()-c.getFullYear()}},u.avatar=function(){var c=this.traits();return n.default(c,"avatar")||n.default(c,"photoUrl")||n.default(c,"avatarUrl")},u.position=function(){var c=this.traits();return n.default(c,"position")||n.default(c,"jobTitle")},u.username=e.Facade.proxy("traits.username"),u.website=e.Facade.one("traits.website"),u.websites=e.Facade.multi("traits.website"),u.phone=e.Facade.one("traits.phone"),u.phones=e.Facade.multi("traits.phone"),u.address=e.Facade.proxy("traits.address"),u.gender=e.Facade.proxy("traits.gender"),u.birthday=e.Facade.proxy("traits.birthday"),identify$1}var track$2={},hasRequiredTrack;function requireTrack(){if(hasRequiredTrack)return track$2;hasRequiredTrack=1;var t=track$2&&track$2.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(track$2,"__esModule",{value:!0}),track$2.Track=void 0;var e=t(requireInherits_browser()),n=requireFacade(),s=requireIdentify(),i=t(requireIsEmail()),a=t(requireObjCase());function o(c,d){n.Facade.call(this,c,d)}track$2.Track=o,e.default(o,n.Facade);var l=o.prototype;l.action=function(){return"track"},l.type=l.action,l.event=n.Facade.field("event"),l.value=n.Facade.proxy("properties.value"),l.category=n.Facade.proxy("properties.category"),l.id=n.Facade.proxy("properties.id"),l.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},l.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},l.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},l.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},l.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},l.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},l.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},l.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},l.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},l.sku=n.Facade.proxy("properties.sku"),l.tax=n.Facade.proxy("properties.tax"),l.name=n.Facade.proxy("properties.name"),l.price=n.Facade.proxy("properties.price"),l.total=n.Facade.proxy("properties.total"),l.repeat=n.Facade.proxy("properties.repeat"),l.coupon=n.Facade.proxy("properties.coupon"),l.shipping=n.Facade.proxy("properties.shipping"),l.discount=n.Facade.proxy("properties.discount"),l.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},l.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},l.description=n.Facade.proxy("properties.description"),l.plan=n.Facade.proxy("properties.plan"),l.subtotal=function(){var c=a.default(this.properties(),"subtotal"),d=this.total()||this.revenue();if(c)return c;if(!d)return 0;if(this.total()){var p=this.tax();p&&(d-=p),p=this.shipping(),p&&(d-=p),p=this.discount(),p&&(d+=p)}return d},l.products=function(){var c=this.properties(),d=a.default(c,"products");return Array.isArray(d)?d.filter(function(p){return p!==null}):[]},l.quantity=function(){var c=this.obj.properties||{};return c.quantity||1},l.currency=function(){var c=this.obj.properties||{};return c.currency||"USD"},l.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},l.query=n.Facade.proxy("options.query"),l.properties=function(c){var d=this.field("properties")||{};c=c||{};for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var m=this[p]==null?this.proxy("properties."+p):this[p]();if(m==null)continue;d[c[p]]=m,delete d[p]}return d},l.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},l.email=function(){var c=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(c)return c;var d=this.userId();if(i.default(d))return d},l.revenue=function(){var c=this.proxy("properties.revenue"),d=this.event(),p=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!c&&d&&d.match(p)&&(c=this.proxy("properties.total")),u(c)},l.cents=function(){var c=this.revenue();return typeof c!="number"?this.value()||0:c*100},l.identify=function(){var c=this.json();return c.traits=this.traits(),new s.Identify(c,this.opts)};function u(c){if(c){if(typeof c=="number")return c;if(typeof c=="string"&&(c=c.replace(/\$/g,""),c=parseFloat(c),!isNaN(c)))return c}}return track$2}var page={},hasRequiredPage;function requirePage(){if(hasRequiredPage)return page;hasRequiredPage=1;var t=page&&page.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(page,"__esModule",{value:!0}),page.Page=void 0;var e=t(requireInherits_browser()),n=requireFacade(),s=requireTrack(),i=t(requireIsEmail());function a(l,u){n.Facade.call(this,l,u)}page.Page=a,e.default(a,n.Facade);var o=a.prototype;return o.action=function(){return"page"},o.type=o.action,o.category=n.Facade.field("category"),o.name=n.Facade.field("name"),o.title=n.Facade.proxy("properties.title"),o.path=n.Facade.proxy("properties.path"),o.url=n.Facade.proxy("properties.url"),o.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},o.properties=function(l){var u=this.field("properties")||{},c=this.category(),d=this.name();l=l||{},c&&(u.category=c),d&&(u.name=d);for(var p in l)if(Object.prototype.hasOwnProperty.call(l,p)){var m=this[p]==null?this.proxy("properties."+p):this[p]();if(m==null)continue;u[l[p]]=m,p!==l[p]&&delete u[p]}return u},o.email=function(){var l=this.proxy("context.traits.email")||this.proxy("properties.email");if(l)return l;var u=this.userId();if(i.default(u))return u},o.fullName=function(){var l=this.category(),u=this.name();return u&&l?l+" "+u:u},o.event=function(l){return l?"Viewed "+l+" Page":"Loaded a Page"},o.track=function(l){var u=this.json();return u.event=this.event(l),u.timestamp=this.timestamp(),u.properties=this.properties(),new s.Track(u,this.opts)},page}var screen$1={},hasRequiredScreen;function requireScreen(){if(hasRequiredScreen)return screen$1;hasRequiredScreen=1;var t=screen$1&&screen$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(screen$1,"__esModule",{value:!0}),screen$1.Screen=void 0;var e=t(requireInherits_browser()),n=requirePage(),s=requireTrack();function i(a,o){n.Page.call(this,a,o)}return screen$1.Screen=i,e.default(i,n.Page),i.prototype.action=function(){return"screen"},i.prototype.type=i.prototype.action,i.prototype.event=function(a){return a?"Viewed "+a+" Screen":"Loaded a Screen"},i.prototype.track=function(a){var o=this.json();return o.event=this.event(a),o.timestamp=this.timestamp(),o.properties=this.properties(),new s.Track(o,this.opts)},screen$1}var _delete={},hasRequired_delete;function require_delete(){if(hasRequired_delete)return _delete;hasRequired_delete=1;var t=_delete&&_delete.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_delete,"__esModule",{value:!0}),_delete.Delete=void 0;var e=t(requireInherits_browser()),n=requireFacade();function s(i,a){n.Facade.call(this,i,a)}return _delete.Delete=s,e.default(s,n.Facade),s.prototype.type=function(){return"delete"},_delete}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(t){var e=dist&&dist.__assign||function(){return e=Object.assign||function(d){for(var p,m=1,g=arguments.length;m<g;m++){p=arguments[m];for(var E in p)Object.prototype.hasOwnProperty.call(p,E)&&(d[E]=p[E])}return d},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=t.Screen=t.Page=t.Track=t.Identify=t.Group=t.Alias=t.Facade=void 0;var n=requireFacade();Object.defineProperty(t,"Facade",{enumerable:!0,get:function(){return n.Facade}});var s=requireAlias();Object.defineProperty(t,"Alias",{enumerable:!0,get:function(){return s.Alias}});var i=requireGroup();Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return i.Group}});var a=requireIdentify();Object.defineProperty(t,"Identify",{enumerable:!0,get:function(){return a.Identify}});var o=requireTrack();Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return o.Track}});var l=requirePage();Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return l.Page}});var u=requireScreen();Object.defineProperty(t,"Screen",{enumerable:!0,get:function(){return u.Screen}});var c=require_delete();Object.defineProperty(t,"Delete",{enumerable:!0,get:function(){return c.Delete}}),t.default=e(e({},n.Facade),{Alias:s.Alias,Group:i.Group,Identify:a.Identify,Track:o.Track,Page:l.Page,Screen:u.Screen,Delete:c.Delete})}(dist)),dist}var distExports=requireDist();function toFacade(t,e){var n=new distExports.Facade(t,e);return t.type==="track"&&(n=new distExports.Track(t,e)),t.type==="identify"&&(n=new distExports.Identify(t,e)),t.type==="page"&&(n=new distExports.Page(t,e)),t.type==="alias"&&(n=new distExports.Alias(t,e)),t.type==="group"&&(n=new distExports.Group(t,e)),t.type==="screen"&&(n=new distExports.Screen(t,e)),Object.defineProperty(n,"obj",{value:t,writable:!0}),n}var onPageChange=function(t){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,t(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;t(e)})},RateLimitError=function(t){__extends$2(e,t);function e(n,s){var i=t.call(this,n)||this;return i.retryTimeout=s,i.name="RateLimitError",i}return e}(Error),MAX_PAYLOAD_SIZE=500,MAX_KEEPALIVE_SIZE=64;function kilobytes(t){var e=encodeURI(JSON.stringify(t)).split(/%..|./).length-1;return e/1024}function approachingTrackingAPILimit(t){return kilobytes(t)>=MAX_PAYLOAD_SIZE-50}function passedKeepaliveLimit(t){return kilobytes(t)>=MAX_KEEPALIVE_SIZE-10}function chunks(t){var e=[],n=0;return t.forEach(function(s){var i=kilobytes(e[n]);i>=64&&n++,e[n]?e[n].push(s):e[n]=[s]}),e}function batch(t,e){var n,s,i=[],a=!1,o=(n=e?.size)!==null&&n!==void 0?n:10,l=(s=e?.timeout)!==null&&s!==void 0?s:5e3,u=0;function c(E){var x;if(E.length!==0){var b=(x=E[0])===null||x===void 0?void 0:x.writeKey,S=E.map(function(C){var T=C;T.sentAt;var I=__rest$2(T,["sentAt"]);return I});return fetch$2("https://".concat(t,"/b"),{keepalive:e?.keepalive||a,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:b,batch:S,sentAt:new Date().toISOString()})}).then(function(C){var T;if(C.status>=500)throw new Error("Bad response from server: ".concat(C.status));if(C.status===429){var I=(T=C.headers)===null||T===void 0?void 0:T.get("x-ratelimit-reset"),D=typeof I=="string"?parseInt(I)*1e3:l;throw new RateLimitError("Rate limit exceeded: ".concat(C.status),D)}})}}function d(E){var x;return E===void 0&&(E=1),__awaiter$2(this,void 0,void 0,function(){var b;return __generator$2(this,function(S){return i.length?(b=i,i=[],[2,(x=c(b))===null||x===void 0?void 0:x.catch(function(C){var T,I=Context$1.system();I.log("error","Error sending batch",C),E<=((T=e?.maxRetries)!==null&&T!==void 0?T:10)&&(C.name==="RateLimitError"&&(u=C.retryTimeout),i.push.apply(i,b),i.map(function(D){if("_metadata"in D){var P=D;P._metadata=__assign$5(__assign$5({},P._metadata),{retryCount:E})}}),m(E+1))})]):[2]})})}var p;function m(E){E===void 0&&(E=1),!p&&(p=setTimeout(function(){p=void 0,d(E).catch(console.error)},u||l),u=0)}onPageChange(function(E){if(a=E,a&&i.length){var x=chunks(i).map(c);Promise.all(x).catch(console.error)}});function g(E,x){return __awaiter$2(this,void 0,void 0,function(){var b;return __generator$2(this,function(S){return i.push(x),b=i.length>=o||approachingTrackingAPILimit(i)||e?.keepalive&&passedKeepaliveLimit(i),[2,b||a?d():m()]})})}return{dispatch:g}}function standard(t){function e(n,s){return fetch$2(n,{keepalive:t?.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(s)}).then(function(i){var a;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var o=(a=i.headers)===null||a===void 0?void 0:a.get("x-ratelimit-reset"),l=o?parseInt(o)*1e3:5e3;throw new RateLimitError("Rate limit exceeded: ".concat(i.status),l)}})}return{dispatch:e}}function normalize$1(t,e,n,s,i){var a,o=t.user();delete e.options,e.writeKey=n?.apiKey,e.userId=e.userId||o.id(),e.anonymousId=e.anonymousId||o.anonymousId(),e.sentAt=new Date;var l=t.queue.failedInitializations||[];l.length>0&&(e._metadata={failedInitializations:l}),i!=null&&(i.attempts>1&&(e._metadata=__assign$5(__assign$5({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],c=[];for(var d in s){var p=s[d];d==="Segment.io"&&u.push(d),p.bundlingStatus==="bundled"&&u.push(d),p.bundlingStatus==="unbundled"&&c.push(d)}for(var m=0,g=n?.unbundledIntegrations||[];m<g.length;m++){var E=g[m];c.includes(E)||c.push(E)}var x=(a=n?.maybeBundledConfigIds)!==null&&a!==void 0?a:{},b=[];return u.sort().forEach(function(S){var C;((C=x[S])!==null&&C!==void 0?C:[]).forEach(function(T){b.push(T)})}),n?.addBundledMetadata!==!1&&(e._metadata=__assign$5(__assign$5({},e._metadata),{bundled:u.sort(),unbundled:c.sort(),bundledIds:b})),e}var pWhile=function(t,e){return __awaiter$2(void 0,void 0,void 0,function(){var n;return __generator$2(this,function(s){return n=function(i){return __awaiter$2(void 0,void 0,void 0,function(){var a;return __generator$2(this,function(o){switch(o.label){case 0:return t(i)?(a=n,[4,e()]):[3,2];case 1:return[2,a.apply(void 0,[o.sent()])];case 2:return[2]}})})},[2,n(void 0)]})})};function flushQueue(t,e){return __awaiter$2(this,void 0,void 0,function(){var n,s=this;return __generator$2(this,function(i){switch(i.label){case 0:return n=[],isOffline()?[2,e]:[4,pWhile(function(){return e.length>0&&!isOffline()},function(){return __awaiter$2(s,void 0,void 0,function(){var a,o,l;return __generator$2(this,function(u){switch(u.label){case 0:return a=e.pop(),a?[4,attempt(a,t)]:[2];case 1:return o=u.sent(),l=o instanceof Context$1,l||n.push(a),[2]}})})})];case 1:return i.sent(),n.map(function(a){return e.pushWithBackoff(a)}),[2,e]}})})}function scheduleFlush(t,e,n,s){var i=this;t||setTimeout(function(){return __awaiter$2(i,void 0,void 0,function(){var a,o;return __generator$2(this,function(l){switch(l.label){case 0:return a=!0,[4,flushQueue(n,e)];case 1:return o=l.sent(),a=!1,e.todo>0&&s(a,o,n,s),[2]}})})},Math.random()*5e3)}function onAlias(t,e){var n,s,i,a,o=t.user();return e.previousId=(i=(s=(n=e.previousId)!==null&&n!==void 0?n:e.from)!==null&&s!==void 0?s:o.id())!==null&&i!==void 0?i:o.anonymousId(),e.userId=(a=e.userId)!==null&&a!==void 0?a:e.to,delete e.from,delete e.to,e}var isSegmentPlugin=function(t){return t.name==="Segment.io"};function segmentio(t,e,n){var s,i,a;window.addEventListener("pagehide",function(){l.push.apply(l,Array.from(u)),u.clear()});var o=(s=e?.apiKey)!==null&&s!==void 0?s:"",l=t.options.disableClientPersistence?new PriorityQueue(t.queue.queue.maxAttempts,[]):new PersistedPriorityQueue(t.queue.queue.maxAttempts,"".concat(o,":dest-Segment.io")),u=new Set,c=!1,d=(i=e?.apiHost)!==null&&i!==void 0?i:SEGMENT_API_HOST,p=(a=e?.protocol)!==null&&a!==void 0?a:"https",m="".concat(p,"://").concat(d),g=e?.deliveryStrategy,E=g?.strategy==="batching"?batch(d,g.config):standard(g?.config);function x(S){return __awaiter$2(this,void 0,void 0,function(){var C,T;return __generator$2(this,function(I){return isOffline()?(l.push(S),scheduleFlush(c,l,b,scheduleFlush),[2,S]):(u.add(S),C=S.event.type.charAt(0),T=toFacade(S.event).json(),S.event.type==="track"&&delete T.traits,S.event.type==="alias"&&(T=onAlias(t,T)),[2,E.dispatch("".concat(m,"/").concat(C),normalize$1(t,T,e,n,S)).then(function(){return S}).catch(function(D){if(S.log("error","Error sending event",D),D.name==="RateLimitError"){var P=D.retryTimeout;l.pushWithBackoff(S,P)}else l.pushWithBackoff(S);return scheduleFlush(c,l,b,scheduleFlush),S}).finally(function(){u.delete(S)})])})})}var b={metadata:{writeKey:o,apiHost:d,protocol:p},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:x,identify:x,page:x,alias:x,group:x,screen:x};return l.todo&&scheduleFlush(c,l,b,scheduleFlush),b}var deprecationWarning="This is being deprecated and will be not be available in future releases of Analytics JS",global$1=getGlobal$1(),_analytics=global$1?.analytics;function createDefaultQueue(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=e?10:1,i=n?new PriorityQueue(s,[]):new PersistedPriorityQueue(s,t);return new EventQueue(i)}var AnalyticsInstanceSettings=function(){function t(e,n){var s;this.timeout=300,this._getSegmentPluginMetadata=function(){var i;return(i=n.plugins.find(isSegmentPlugin))===null||i===void 0?void 0:i.metadata},this.writeKey=e.writeKey,this.cdnSettings=(s=e.cdnSettings)!==null&&s!==void 0?s:{integrations:{},edgeFunction:{}},this.cdnURL=e.cdnURL}return Object.defineProperty(t.prototype,"apiHost",{get:function(){var e,n;return(n=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||n===void 0?void 0:n.apiHost},enumerable:!1,configurable:!0}),t}();function _stub(){console.warn(deprecationWarning)}var Analytics=function(t){__extends$2(e,t);function e(n,s,i,a,o){var l=this,u,c;l=t.call(this)||this,l._debug=!1,l.initialized=!1,l.user=function(){return l._user},l.init=l.initialize.bind(l),l.log=_stub,l.addIntegrationMiddleware=_stub,l.listeners=_stub,l.addEventListener=_stub,l.removeAllListeners=_stub,l.removeListener=_stub,l.removeEventListener=_stub,l.hasListeners=_stub,l.add=_stub,l.addIntegration=_stub;var d=s?.cookie,p=(u=s?.disableClientPersistence)!==null&&u!==void 0?u:!1;l.queue=i??createDefaultQueue("".concat(n.writeKey,":event-queue"),s?.retryQueue,p),l.settings=new AnalyticsInstanceSettings(n,l.queue);var m=s?.storage;return l._universalStorage=l.createStore(p,m,d),l._user=a??new User(__assign$5({persist:!p,storage:s?.storage},s?.user),d).load(),l._group=o??new Group(__assign$5({persist:!p,storage:s?.storage},s?.group),d).load(),l.eventFactory=new EventFactory(l._user),l.integrations=(c=s?.integrations)!==null&&c!==void 0?c:{},l.options=s??{},bindAll(l),l}return e.prototype.createStore=function(n,s,i){return n?new UniversalStorage([new MemoryStorage]):s&&isArrayOfStoreType(s)?new UniversalStorage(initializeStorages(applyCookieOptions(s.stores,i))):new UniversalStorage(initializeStorages([StoreType.LocalStorage,{name:StoreType.Cookie,settings:i},StoreType.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o,l,u,c,d,p=this;return __generator$2(this,function(m){return i=popPageContext(n),a=resolveArguments.apply(void 0,n),o=a[0],l=a[1],u=a[2],c=a[3],d=this.eventFactory.track(o,l,u,this.integrations,i),[2,this._dispatch(d,c).then(function(g){return p.emit("track",o,g.event.properties,g.event.options),g})]})})},e.prototype.page=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o,l,u,c,d,p,m=this;return __generator$2(this,function(g){return i=popPageContext(n),a=resolvePageArguments.apply(void 0,n),o=a[0],l=a[1],u=a[2],c=a[3],d=a[4],p=this.eventFactory.page(o,l,u,c,this.integrations,i),[2,this._dispatch(p,d).then(function(E){return m.emit("page",o,l,E.event.properties,E.event.options),E})]})})},e.prototype.identify=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o,l,u,c,d,p=this;return __generator$2(this,function(m){return i=popPageContext(n),a=resolveUserArguments(this._user).apply(void 0,n),o=a[0],l=a[1],u=a[2],c=a[3],this._user.identify(o,l),d=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(d,c).then(function(g){return p.emit("identify",g.event.userId,g.event.traits,g.event.options),g})]})})},e.prototype.group=function(){for(var n=this,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var a=popPageContext(s);if(s.length===0)return this._group;var o=resolveUserArguments(this._group).apply(void 0,s),l=o[0],u=o[1],c=o[2],d=o[3];this._group.identify(l,u);var p=this._group.id(),m=this._group.traits(),g=this.eventFactory.group(p,m,c,this.integrations,a);return this._dispatch(g,d).then(function(E){return n.emit("group",E.event.groupId,E.event.traits,E.event.options),E})},e.prototype.alias=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o,l,u,c,d,p=this;return __generator$2(this,function(m){return i=popPageContext(n),a=resolveAliasArguments.apply(void 0,n),o=a[0],l=a[1],u=a[2],c=a[3],d=this.eventFactory.alias(o,l,u,this.integrations,i),[2,this._dispatch(d,c).then(function(g){return p.emit("alias",o,l,g.event.options),g})]})})},e.prototype.screen=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o,l,u,c,d,p,m=this;return __generator$2(this,function(g){return i=popPageContext(n),a=resolvePageArguments.apply(void 0,n),o=a[0],l=a[1],u=a[2],c=a[3],d=a[4],p=this.eventFactory.screen(o,l,u,c,this.integrations,i),[2,this._dispatch(p,d).then(function(E){return m.emit("screen",o,l,E.event.properties,E.event.options),E})]})})},e.prototype.trackClick=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a;return __generator$2(this,function(o){switch(o.label){case 0:return[4,__vitePreload(()=>import("./auto-track-DsYeDyZS.js"),[])];case 1:return i=o.sent(),[2,(a=i.link).call.apply(a,__spreadArray$3([this],n,!1))]}})})},e.prototype.trackLink=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a;return __generator$2(this,function(o){switch(o.label){case 0:return[4,__vitePreload(()=>import("./auto-track-DsYeDyZS.js"),[])];case 1:return i=o.sent(),[2,(a=i.link).call.apply(a,__spreadArray$3([this],n,!1))]}})})},e.prototype.trackSubmit=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a;return __generator$2(this,function(o){switch(o.label){case 0:return[4,__vitePreload(()=>import("./auto-track-DsYeDyZS.js"),[])];case 1:return i=o.sent(),[2,(a=i.form).call.apply(a,__spreadArray$3([this],n,!1))]}})})},e.prototype.trackForm=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a;return __generator$2(this,function(o){switch(o.label){case 0:return[4,__vitePreload(()=>import("./auto-track-DsYeDyZS.js"),[])];case 1:return i=o.sent(),[2,(a=i.form).call.apply(a,__spreadArray$3([this],n,!1))]}})})},e.prototype.register=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o=this;return __generator$2(this,function(l){switch(l.label){case 0:return i=Context$1.system(),a=n.map(function(u){return o.queue.register(i,u,o)}),[4,Promise.all(a)];case 1:return l.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return __awaiter$2(this,void 0,void 0,function(){var i,a,o=this;return __generator$2(this,function(l){switch(l.label){case 0:return i=Context$1.system(),a=n.map(function(u){var c=o.queue.plugins.find(function(d){return d.name===u});if(c)return o.queue.deregister(i,c,o);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(a)];case 1:return l.sent(),[2,i]}})})},e.prototype.debug=function(n){return n===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=n,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(n){this.settings.timeout=n},e.prototype._dispatch=function(n,s){return __awaiter$2(this,void 0,void 0,function(){var i;return __generator$2(this,function(a){return i=new Context$1(n),isOffline()&&!this.options.retryQueue?[2,i]:[2,dispatch(i,this.queue,this,{callback:s,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(n){return __awaiter$2(this,void 0,void 0,function(){var s=this;return __generator$2(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return __awaiter$2(s,void 0,void 0,function(){var a,o,l;return __generator$2(this,function(u){switch(u.label){case 0:return[4,__vitePreload(()=>Promise.resolve().then(()=>index$2),void 0)];case 1:return a=u.sent().sourceMiddlewarePlugin,o={},this.queue.plugins.forEach(function(c){if(c.type==="destination")return o[c.name]=!0}),l=a(n,o),[4,this.register(l)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(n){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];return this.queue.plugins.filter(isDestinationPluginWithAddMiddleware).forEach(function(a){(n==="*"||a.name.toLowerCase()===n.toLowerCase())&&a.addMiddleware.apply(a,s)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(n){return this._user.anonymousId(n)},e.prototype.queryString=function(n){return __awaiter$2(this,void 0,void 0,function(){var s;return __generator$2(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,__vitePreload(()=>import("./index-KBrmvdtq.js"),[])];case 1:return s=i.sent().queryString,[2,s(this,n)]}})})},e.prototype.use=function(n){return n(this),this},e.prototype.ready=function(n){return n===void 0&&(n=function(s){return s}),__awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(s){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return n(i),i})]})})},e.prototype.noConflict=function(){return console.warn(deprecationWarning),setGlobalAnalytics(_analytics??this),this},e.prototype.normalize=function(n){return console.warn(deprecationWarning),this.eventFactory.normalize(n)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(deprecationWarning),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return version$9},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n,s){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(i){return console.warn(deprecationWarning),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(n){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(s){switch(s.label){case 0:return console.warn(deprecationWarning),[4,this.page({path:n})];case 1:return s.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var n;return console.warn(deprecationWarning),(n=this._plugins)!==null&&n!==void 0?n:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(deprecationWarning);var n=this.queue.plugins.filter(function(s){return s.type==="destination"}).reduce(function(s,i){var a="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),o=window[a];if(!o)return s;var l=o.Integration;return l?(s[i.name]=l,s):(s[i.name]=o,s)},{});return n},enumerable:!1,configurable:!0}),e.prototype.push=function(n){var s=this,i=n.shift();i&&!s[i]||s[i].apply(this,n)},e}(Emitter),NullAnalytics=function(t){__extends$2(e,t);function e(){var n=t.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return n.initialized=!0,n}return e}(Analytics),define_process_env_default={};function getProcessEnv(){return typeof process>"u"||!define_process_env_default?{}:define_process_env_default}var analyticsScriptRegex=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,getCDNUrlFromScriptTag=function(){var t,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(n){var s,i=(s=n.getAttribute("src"))!==null&&s!==void 0?s:"",a=analyticsScriptRegex.exec(i);a&&a[1]&&(t=a[1])}),t},_globalCDN,getGlobalCDNUrl=function(){var t,e=_globalCDN??((t=getGlobalAnalytics())===null||t===void 0?void 0:t._cdn);return e},setGlobalCDNUrl=function(t){var e=getGlobalAnalytics();e&&(e._cdn=t),_globalCDN=t},getCDN=function(){var t=getGlobalCDNUrl();if(t)return t;var e=getCDNUrlFromScriptTag();return e||"https://cdn.segment.com"},getNextIntegrationsURL=function(){var t=getCDN();return"".concat(t,"/next-integrations")};function mergedOptions(t,e){var n,s=Object.entries((n=e.integrations)!==null&&n!==void 0?n:{}).reduce(function(i,a){var o,l,u=a[0],c=a[1];return typeof c=="object"?__assign$5(__assign$5({},i),(o={},o[u]=c,o)):__assign$5(__assign$5({},i),(l={},l[u]={},l))},{});return Object.entries(t.integrations).reduce(function(i,a){var o,l=a[0],u=a[1];return __assign$5(__assign$5({},i),(o={},o[l]=__assign$5(__assign$5({},u),s[l]),o))},{})}function gracefulDecodeURIComponent(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch{return t}}function clientHints(t){return __awaiter$2(this,void 0,void 0,function(){var e;return __generator$2(this,function(n){return e=navigator.userAgentData,e?t?[2,e.getHighEntropyValues(t).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var cookieOptions;function getCookieOptions(){if(cookieOptions)return cookieOptions;var t=tld(window.location.href);return cookieOptions={expires:31536e6,secure:!1,path:"/"},t&&(cookieOptions.domain=t),cookieOptions}function ads(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1)),t=t.replace(/\?/g,"&");for(var n=t.split("&"),s=0,i=n;s<i.length;s++){var a=i[s],o=a.split("="),l=o[0],u=o[1];if(e[l])return{id:u,type:e[l]}}}function utm(t){return t.startsWith("?")&&(t=t.substring(1)),t=t.replace(/\?/g,"&"),t.split("&").reduce(function(e,n){var s=n.split("="),i=s[0],a=s[1],o=a===void 0?"":a;if(i.includes("utm_")&&i.length>4){var l=i.slice(4);l==="campaign"&&(l="name"),e[l]=gracefulDecodeURIComponent(o)}return e},{})}function ampId(){var t=api$1.get("_ga");if(t&&t.startsWith("amp"))return t}function referrerId(t,e,n){var s,i=new UniversalStorage(n?[]:[new CookieStorage(getCookieOptions())]),a=i.get("s:context.referrer"),o=(s=ads(t))!==null&&s!==void 0?s:a;o&&(e&&(e.referrer=__assign$5(__assign$5({},e.referrer),o)),i.set("s:context.referrer",o))}var objectToQueryString=function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach(function(n){var s=n[0],i=n[1];Array.isArray(i)?i.forEach(function(a){return e.append(s,a)}):e.append(s,i)}),e.toString()}catch{return""}},EnvironmentEnrichmentPlugin=function(){function t(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(n,s){return __awaiter$2(e,void 0,void 0,function(){var i;return __generator$2(this,function(a){switch(a.label){case 0:this.instance=s,a.label=1;case 1:return a.trys.push([1,3,,4]),i=this,[4,clientHints(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(n){var s,i,a=n.event.context,o=a.page.search||"",l=typeof o=="object"?objectToQueryString(o):o;a.userAgent=navigator.userAgent,a.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof a.locale>"u"&&typeof u<"u"&&(a.locale=u),(s=a.library)!==null&&s!==void 0||(a.library={name:"analytics.js",version:"".concat("npm:next","-").concat(version$9)}),l&&!a.campaign&&(a.campaign=utm(l));var c=ampId();c&&(a.amp={id:c}),referrerId(l,a,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{a.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return n},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return t}(),envEnrichment=new EnvironmentEnrichmentPlugin;function findScript$1(t){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(n){return n.src===t})}function loadScript$1(t,e){var n=findScript$1(t);if(n!==void 0){var s=n?.getAttribute("status");if(s==="loaded")return Promise.resolve(n);if(s==="loading")return new Promise(function(i,a){n.addEventListener("load",function(){return i(n)}),n.addEventListener("error",function(o){return a(o)})})}return new Promise(function(i,a){var o,l=window.document.createElement("script");l.type="text/javascript",l.src=t,l.async=!0,l.setAttribute("status","loading");for(var u=0,c=Object.entries({});u<c.length;u++){var d=c[u],p=d[0],m=d[1];l.setAttribute(p,m)}l.onload=function(){l.onerror=l.onload=null,l.setAttribute("status","loaded"),i(l)},l.onerror=function(){l.onerror=l.onload=null,l.setAttribute("status","error"),a(new Error("Failed to load ".concat(t)))};var g=window.document.querySelector("script");g?(o=g.parentElement)===null||o===void 0||o.insertBefore(l,g):window.document.head.appendChild(l)})}function unloadScript(t){var e=findScript$1(t);return e!==void 0&&e.remove(),Promise.resolve()}function applyDestinationMiddleware(t,e,n){return __awaiter$2(this,void 0,void 0,function(){function s(c,d){return __awaiter$2(this,void 0,void 0,function(){var p,m,g;return __generator$2(this,function(E){switch(E.label){case 0:return p=!1,m=null,[4,d({payload:toFacade(c,{clone:!0,traverse:!1}),integration:t,next:function(x){p=!0,x===null&&(m=null),x&&(m=x.obj)}})];case 1:return E.sent(),!p&&m!==null&&(m=m,m.integrations=__assign$5(__assign$5({},c.integrations),(g={},g[t]=!1,g))),[2,m]}})})}var i,a,o,l,u;return __generator$2(this,function(c){switch(c.label){case 0:i=toFacade(e,{clone:!0,traverse:!1}).rawEvent(),a=0,o=n,c.label=1;case 1:return a<o.length?(l=o[a],[4,s(i,l)]):[3,4];case 2:if(u=c.sent(),u===null)return[2,null];i=u,c.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})}function sourceMiddlewarePlugin(t,e){function n(s){return __awaiter$2(this,void 0,void 0,function(){var i;return __generator$2(this,function(a){switch(a.label){case 0:return i=!1,[4,t({payload:toFacade(s.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(o){i=!0,o&&(s.event=o.obj)}})];case 1:if(a.sent(),!i)throw new ContextCancelation({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,s]}})})}return{name:"Source Middleware ".concat(t.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(s){return Promise.resolve(s)},track:n,page:n,identify:n,alias:n,group:n}}const index$2=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware,sourceMiddlewarePlugin},Symbol.toStringTag,{value:"Module"}));function recordIntegrationMetric(t,e){var n=e.methodName,s=e.integrationName,i=e.type,a=e.didError,o=a===void 0?!1:a;t.stats.increment("analytics_js.integration.invoke".concat(o?".error":""),1,["method:".concat(n),"integration_name:".concat(s),"type:".concat(i)])}var ActionDestination=function(){function t(e,n){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=createDeferred$1(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=n,this.name=e,this.type=n.type,this.alternativeNames.push(n.name)}return t.prototype.addMiddleware=function(){for(var e,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];this.type==="destination"&&(e=this.middleware).push.apply(e,n)},t.prototype.transform=function(e){return __awaiter$2(this,void 0,void 0,function(){var n;return __generator$2(this,function(s){switch(s.label){case 0:return[4,applyDestinationMiddleware(this.name,e.event,this.middleware)];case 1:return n=s.sent(),n===null&&e.cancel(new ContextCancelation({retry:!1,reason:"dropped by destination middleware"})),[2,new Context$1(n)]}})})},t.prototype._createMethod=function(e){var n=this;return function(s){return __awaiter$2(n,void 0,void 0,function(){var i,a;return __generator$2(this,function(o){switch(o.label){case 0:return this.action[e]?(i=s,this.type!=="destination"?[3,2]:[4,this.transform(s)]):[2,s];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!o.sent())throw new Error("Something prevented the destination from getting ready");return recordIntegrationMetric(s,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return o.sent(),[3,6];case 5:throw a=o.sent(),recordIntegrationMetric(s,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),a;case 6:return[2,s]}})})}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},t.prototype.load=function(e,n){return __awaiter$2(this,void 0,void 0,function(){var s,i,a,o;return __generator$2(this,function(l){switch(l.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];l.label=1;case 1:return l.trys.push([1,3,,4]),recordIntegrationMetric(e,{integrationName:this.action.name,methodName:"load",type:"action"}),s=this.action.load(e,n),a=(i=this.loadPromise).resolve,[4,s];case 2:return a.apply(i,[l.sent()]),[2,s];case 3:throw o=l.sent(),recordIntegrationMetric(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(o),o;case 4:return[2]}})})},t.prototype.unload=function(e,n){var s,i;return(i=(s=this.action).unload)===null||i===void 0?void 0:i.call(s,e,n)},t}();function validate(t){if(!Array.isArray(t))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return t.forEach(function(n){e.forEach(function(s){var i;if(n[s]===void 0)throw new Error("Plugin: ".concat((i=n.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(s))})}),!0}function isPluginDisabled(t,e){var n=t[e.creationName],s=t[e.name];return t.All===!1&&!n&&!s||n===!1||s===!1}function loadPluginFactory(t,e){return __awaiter$2(this,void 0,void 0,function(){var n,s,i,a,o,l;return __generator$2(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),n=new RegExp("https://cdn.segment.(com|build)"),s=getCDN(),!e)return[3,6];i=t.url.split("/"),a=i[i.length-2],o=t.url.replace(a,btoa(a).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,loadScript$1(o.replace(n,s))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,loadScript$1(t.url.replace(n,s))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,loadScript$1(t.url.replace(n,s))];case 7:u.sent(),u.label=8;case 8:return typeof window[t.libraryName]=="function"?[2,window[t.libraryName]]:[3,10];case 9:throw l=u.sent(),console.error("Failed to create PluginFactory",t),l;case 10:return[2]}})})}function remoteLoader(t,e,n,s,i,a){var o,l,u;return __awaiter$2(this,void 0,void 0,function(){var c,d,p,m=this;return __generator$2(this,function(g){switch(g.label){case 0:return c=[],d=(l=(o=t.middlewareSettings)===null||o===void 0?void 0:o.routingRules)!==null&&l!==void 0?l:[],p=((u=t.remotePlugins)!==null&&u!==void 0?u:[]).map(function(E){return __awaiter$2(m,void 0,void 0,function(){var x,b,S,C,T,I;return __generator$2(this,function(D){switch(D.label){case 0:if(isPluginDisabled(e,E))return[2];D.label=1;case 1:return D.trys.push([1,6,,7]),b=a?.find(function(P){var O=P.pluginName;return O===E.name}),b?[3,3]:[4,loadPluginFactory(E,s?.obfuscate)];case 2:b=D.sent(),D.label=3;case 3:return x=b,x?[4,x(__assign$5(__assign$5({},E.settings),n[E.name]))]:[3,5];case 4:S=D.sent(),C=Array.isArray(S)?S:[S],validate(C),T=d.filter(function(P){return P.destinationName===E.creationName}),C.forEach(function(P){var O=new ActionDestination(E.creationName,P);T.length&&i&&O.addMiddleware(i),c.push(O)}),D.label=5;case 5:return[3,7];case 6:return I=D.sent(),console.warn("Failed to load Remote Plugin",I),[3,7];case 7:return[2]}})})}),[4,Promise.all(p)];case 1:return g.sent(),[2,c.filter(Boolean)]}})})}var _a$1,_b,env=getGlobal$1(),inspectorHost=(_a$1=(_b=env).__SEGMENT_INSPECTOR__)!==null&&_a$1!==void 0?_a$1:_b.__SEGMENT_INSPECTOR__={},attachInspector=function(t){var e;return(e=inspectorHost.attach)===null||e===void 0?void 0:e.call(inspectorHost,t)};function loadCDNSettings(t,e){return fetch$2("".concat(e,"/v1/projects/").concat(t,"/settings")).then(function(n){return n.ok?n.json():n.text().then(function(s){throw new Error(s)})}).catch(function(n){throw console.error(n.message),n})}function hasLegacyDestinations(t){return getProcessEnv().NODE_ENV!=="test"&&Object.keys(t.integrations).length>1}function hasTsubMiddleware(t){var e,n,s;return getProcessEnv().NODE_ENV!=="test"&&((s=(n=(e=t.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0)>0}function flushPreBuffer(t,e){flushSetAnonymousID(t,e),flushOn(t,e)}function flushFinalBuffer(t,e){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(n){switch(n.label){case 0:return[4,flushAddSourceMiddleware(t,e)];case 1:return n.sent(),flushAnalyticsCallsInNewTask(t,e),[2]}})})}function registerPlugins(t,e,n,s,i,a,o){var l,u,c;return i===void 0&&(i=[]),__awaiter$2(this,void 0,void 0,function(){var d,p,m,g,E,x,b,S,C,T,I,D,P,O,B,F=this;return __generator$2(this,function(H){switch(H.label){case 0:return flushPreBuffer(n,o),d=i?.filter(function(Q){return typeof Q=="object"}),p=i?.filter(function(Q){return typeof Q=="function"&&typeof Q.pluginName=="string"}),hasTsubMiddleware(e)?[4,__vitePreload(()=>import("./index-zLYS-FZT.js"),[]).then(function(Q){return Q.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return g=H.sent(),[3,3];case 2:g=void 0,H.label=3;case 3:return m=g,hasLegacyDestinations(e)||a.length>0?[4,__vitePreload(()=>import("./index-Ry7oUA7o.js"),__vite__mapDeps([0,1])).then(function(Q){return Q.ajsDestinations(t,e,n.integrations,s,m,a)})]:[3,5];case 4:return x=H.sent(),[3,6];case 5:x=[],H.label=6;case 6:return E=x,e.legacyVideoPluginsEnabled?[4,__vitePreload(()=>import("./index-ByLC051R.js"),[]).then(function(Q){return Q.loadLegacyVideoPlugins(n)})]:[3,8];case 7:H.sent(),H.label=8;case 8:return!((l=s.plan)===null||l===void 0)&&l.track?[4,__vitePreload(()=>import("./index-CWGLcNrK.js"),__vite__mapDeps([2,1])).then(function(Q){var Z;return Q.schemaFilter((Z=s.plan)===null||Z===void 0?void 0:Z.track,e)})]:[3,10];case 9:return S=H.sent(),[3,11];case 10:S=void 0,H.label=11;case 11:return b=S,C=mergedOptions(e,s),[4,remoteLoader(e,n.integrations,C,s,m,p).catch(function(){return[]})];case 12:return T=H.sent(),I=__spreadArray$3(__spreadArray$3([envEnrichment],E,!0),T,!0),b&&I.push(b),D=((u=s.integrations)===null||u===void 0?void 0:u.All)===!1&&!s.integrations["Segment.io"]||s.integrations&&s.integrations["Segment.io"]===!1,D?[3,14]:(O=(P=I).push,[4,segmentio(n,C["Segment.io"],e.integrations)]);case 13:O.apply(P,[H.sent()]),H.label=14;case 14:return[4,n.register.apply(n,__spreadArray$3(__spreadArray$3([],I,!1),d,!1))];case 15:return B=H.sent(),[4,flushRegister(n,o)];case 16:return H.sent(),Object.entries((c=e.enabledMiddleware)!==null&&c!==void 0?c:{}).some(function(Q){var Z=Q[1];return Z})?[4,__vitePreload(()=>import("./index-DjQTyyyh.js"),[]).then(function(Q){var Z=Q.remoteMiddlewares;return __awaiter$2(F,void 0,void 0,function(){var ne,re;return __generator$2(this,function(se){switch(se.label){case 0:return[4,Z(B,e,s.obfuscate)];case 1:return ne=se.sent(),re=ne.map(function(G){return n.addSourceMiddleware(G)}),[2,Promise.all(re)]}})})})]:[3,18];case 17:H.sent(),H.label=18;case 18:return[2,B]}})})}function loadAnalytics(t,e,n){var s,i,a,o,l,u,c,d,p,m,g;return e===void 0&&(e={}),__awaiter$2(this,void 0,void 0,function(){var E,x,b,S,C,T,I,D,P,O,B,F,H;return __generator$2(this,function(Q){switch(Q.label){case 0:return e.disable===!0?[2,[new NullAnalytics,Context$1.system()]]:(e.globalAnalyticsKey&&setGlobalAnalyticsKey(e.globalAnalyticsKey),t.cdnURL&&setGlobalCDNUrl(t.cdnURL),e.initialPageview&&n.add(new PreInitMethodCall("page",[])),E=(s=t.cdnURL)!==null&&s!==void 0?s:getCDN(),(i=t.cdnSettings)!==null&&i!==void 0?(b=i,[3,3]):[3,1]);case 1:return[4,loadCDNSettings(t.writeKey,E)];case 2:b=Q.sent(),Q.label=3;case 3:return x=b,e.updateCDNSettings&&(x=e.updateCDNSettings(x)),typeof e.disable!="function"?[3,5]:[4,e.disable(x)];case 4:if(S=Q.sent(),S)return[2,[new NullAnalytics,Context$1.system()]];Q.label=5;case 5:return C=(o=(a=x.integrations["Segment.io"])===null||a===void 0?void 0:a.retryQueue)!==null&&o!==void 0?o:!0,e=__assign$5({retryQueue:C},e),T=new Analytics(__assign$5(__assign$5({},t),{cdnSettings:x,cdnURL:E}),e),attachInspector(T),I=(l=t.plugins)!==null&&l!==void 0?l:[],D=(u=t.classicIntegrations)!==null&&u!==void 0?u:[],P=(c=e.integrations)===null||c===void 0?void 0:c["Segment.io"],Stats.initRemoteMetrics(__assign$5(__assign$5({},x.metrics),{host:(d=P?.apiHost)!==null&&d!==void 0?d:(p=x.metrics)===null||p===void 0?void 0:p.host,protocol:P?.protocol})),[4,registerPlugins(t.writeKey,x,T,e,I,D,n)];case 6:return O=Q.sent(),B=(m=window.location.search)!==null&&m!==void 0?m:"",F=(g=window.location.hash)!==null&&g!==void 0?g:"",H=B.length?B:F.replace(/(?=#).*(?=\?)/,""),H.includes("ajs_")?[4,T.queryString(H).catch(console.error)]:[3,8];case 7:Q.sent(),Q.label=8;case 8:return T.initialized=!0,T.emit("initialize",t,e),[4,flushFinalBuffer(T,n)];case 9:return Q.sent(),[2,[T,O]]}})})}var AnalyticsBrowser=function(t){__extends$2(e,t);function e(){var n=this,s=createDeferred$1(),i=s.promise,a=s.resolve;return n=t.call(this,function(o){return i.then(function(l){var u=l[0],c=l[1];return loadAnalytics(u,c,o)})})||this,n._resolveLoadStart=function(o,l){return a([o,l])},n}return e.prototype.load=function(n,s){return s===void 0&&(s={}),this._resolveLoadStart(n,s),this},e.load=function(n,s){return s===void 0&&(s={}),new e().load(n,s)},e.standalone=function(n,s){return e.load({writeKey:n},s).then(function(i){return i[0]})},e}(AnalyticsBuffered);/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=t=>{throw TypeError(t)},__accessCheck=(t,e,n)=>e.has(t)||__typeError("Cannot "+n),__privateGet=(t,e,n)=>(__accessCheck(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd=(t,e,n)=>e.has(t)?__typeError("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),PopStateEventType="popstate";function createBrowserHistory(t={}){function e(s,i){let{pathname:a,search:o,hash:l}=s.location;return createLocation("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:createPath$1(i)}return getUrlBasedHistory(e,n,null,t)}function invariant$1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:n,key:e&&e.key||s||createKey()}}function createPath$1({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function parsePath(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,n,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l="POP",u=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function p(){l="POP";let b=d(),S=b==null?null:b-c;c=b,u&&u({action:l,location:x.location,delta:S})}function m(b,S){l="PUSH";let C=createLocation(x.location,b,S);c=d()+1;let T=getHistoryState(C,c),I=x.createHref(C);try{o.pushState(T,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(I)}a&&u&&u({action:l,location:x.location,delta:1})}function g(b,S){l="REPLACE";let C=createLocation(x.location,b,S);c=d();let T=getHistoryState(C,c),I=x.createHref(C);o.replaceState(T,"",I),a&&u&&u({action:l,location:x.location,delta:0})}function E(b){return createBrowserURLImpl(b)}let x={get action(){return l},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(PopStateEventType,p),u=b,()=>{i.removeEventListener(PopStateEventType,p),u=null}},createHref(b){return e(i,b)},createURL:E,encodeLocation(b){let S=E(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:g,go(b){return o.go(b)}};return x}function createBrowserURLImpl(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:createPath$1(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}var _map,RouterContextProvider=class{constructor(t){if(__privateAdd(this,_map,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(__privateGet(this,_map).has(t))return __privateGet(this,_map).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){__privateGet(this,_map).set(t,e)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(t){return unsupportedLazyRouteObjectKeys.has(t)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function isUnsupportedLazyRouteFunctionKey(t){return unsupportedLazyRouteFunctionKeys.has(t)}function isIndexRoute(t){return t.index===!0}function convertRoutesToDataRoutes(t,e,n=[],s={},i=!1){return t.map((a,o)=>{let l=[...n,String(o)],u=typeof a.id=="string"?a.id:l.join("-");if(invariant$1(a.index!==!0||!a.children,"Cannot specify children on an index route"),invariant$1(i||!s[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(a)){let c={...a,...e(a),id:u};return s[u]=c,c}else{let c={...a,...e(a),id:u,children:void 0};return s[u]=c,a.children&&(c.children=convertRoutesToDataRoutes(a.children,e,l,s,i)),c}})}function matchRoutes(t,e,n="/"){return matchRoutesImpl(t,e,n,!1)}function matchRoutesImpl(t,e,n,s){let i=typeof e=="string"?parsePath(e):e,a=stripBasename(i.pathname||"/",n);if(a==null)return null;let o=flattenRoutes(t);rankRouteBranches(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=decodePath(a);l=matchRouteBranch(o[u],c,s)}return l}function convertRouteMatchToUiMatch(t,e){let{route:n,pathname:s,params:i}=t;return{id:n.id,pathname:s,params:i,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function flattenRoutes(t,e=[],n=[],s="",i=!1){let a=(o,l,u=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(s)&&u)return;invariant$1(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length)}let p=joinPaths([s,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(invariant$1(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),flattenRoutes(o.children,e,m,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:computeScore(p,o.index),routesMeta:m})};return t.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))a(o,l);else for(let u of explodeOptionalSegments(o.path))a(o,l,!0,u)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=explodeOptionalSegments(s.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function rankRouteBranches(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let n=t.split("/"),s=n.length;return n.some(isSplat)&&(s+=splatPenalty),e&&(s+=indexRouteValue),n.filter(i=>!isSplat(i)).reduce((i,a)=>i+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,n=!1){let{routesMeta:s}=t,i={},a="/",o=[];for(let l=0;l<s.length;++l){let u=s[l],c=l===s.length-1,d=a==="/"?e:e.slice(a.length)||"/",p=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!p&&c&&n&&!s[s.length-1].route.index&&(p=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:joinPaths([a,p.pathname]),pathnameBase:normalizePathname(joinPaths([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=joinPaths([a,p.pathnameBase]))}return o}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=compilePath(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((c,{paramName:d,isOptional:p},m)=>{if(d==="*"){let E=l[m]||"";o=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const g=l[m];return p&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function compilePath(t,e=!1,n=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(s.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function prependBasename({basename:t,pathname:e}){return e==="/"?t:joinPaths([t,e])}function resolvePath(t,e="/"){let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?parsePath(t):t;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,e):e,search:normalizeSearch(s),hash:normalizeHash(i)}}function resolvePathname(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function resolveTo(t,e,n,s=!1){let i;typeof t=="string"?i=parsePath(t):(i={...t},invariant$1(!i.pathname||!i.pathname.includes("?"),getInvalidPathError("?","pathname","search",i)),invariant$1(!i.pathname||!i.pathname.includes("#"),getInvalidPathError("#","pathname","hash",i)),invariant$1(!i.search||!i.search.includes("#"),getInvalidPathError("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=resolvePath(i,l),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,redirect=(t,e=302)=>{let n=e;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let s=new Headers(n.headers);return s.set("Location",t),new Response(null,{...n,headers:s})},ErrorResponseImpl=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=t=>ABSOLUTE_URL_REGEX.test(t),defaultMapRouteProperties=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";invariant$1(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=t.hydrationRouteProperties||[],i=t.mapRouteProperties||defaultMapRouteProperties,a={},o=convertRoutesToDataRoutes(t.routes,i,void 0,a),l,u=t.basename||"/";u.startsWith("/")||(u=`/${u}`);let c=t.dataStrategy||defaultDataStrategyWithMiddleware,d={...t.future},p=null,m=new Set,g=null,E=null,x=null,b=t.hydrationData!=null,S=matchRoutes(o,t.history.location,u),C=!1,T=null,I;if(S==null&&!t.patchRoutesOnNavigation){let Ee=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:we,route:Ne}=getShortCircuitMatches(o);I=!0,S=we,T={[Ne.id]:Ee}}else if(S&&!t.hydrationData&&Ze(S,o,t.history.location.pathname).active&&(S=null),S)if(S.some(Ee=>Ee.route.lazy))I=!1;else if(!S.some(Ee=>routeHasLoaderOrMiddleware(Ee.route)))I=!0;else{let Ee=t.hydrationData?t.hydrationData.loaderData:null,we=t.hydrationData?t.hydrationData.errors:null;if(we){let Ne=S.findIndex(ze=>we[ze.route.id]!==void 0);I=S.slice(0,Ne+1).every(ze=>!shouldLoadRouteOnHydration(ze.route,Ee,we))}else I=S.every(Ne=>!shouldLoadRouteOnHydration(Ne.route,Ee,we))}else{I=!1,S=[];let Ee=Ze(null,o,t.history.location.pathname);Ee.active&&Ee.matches&&(C=!0,S=Ee.matches)}let D,P={historyAction:t.history.action,location:t.history.location,matches:S,initialized:I,navigation:IDLE_NAVIGATION,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||T,fetchers:new Map,blockers:new Map},O="POP",B=!1,F,H=!1,Q=new Map,Z=null,ne=!1,re=!1,se=new Set,G=new Map,K=0,M=-1,W=new Map,ee=new Set,z=new Map,ae=new Map,ce=new Set,he=new Map,fe,Ce=null;function Me(){if(p=t.history.listen(({action:Ee,location:we,delta:Ne})=>{if(fe){fe(),fe=void 0;return}warning(he.size===0||Ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ze=Xt({currentLocation:P.location,nextLocation:we,historyAction:Ee});if(ze&&Ne!=null){let it=new Promise(xt=>{fe=xt});t.history.go(Ne*-1),Yt(ze,{state:"blocked",location:we,proceed(){Yt(ze,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),it.then(()=>t.history.go(Ne))},reset(){let xt=new Map(P.blockers);xt.set(ze,IDLE_BLOCKER),Be({blockers:xt})}});return}return Pe(Ee,we)}),n){restoreAppliedTransitions(e,Q);let Ee=()=>persistAppliedTransitions(e,Q);e.addEventListener("pagehide",Ee),Z=()=>e.removeEventListener("pagehide",Ee)}return P.initialized||Pe("POP",P.location,{initialHydration:!0}),D}function Ye(){p&&p(),Z&&Z(),m.clear(),F&&F.abort(),P.fetchers.forEach((Ee,we)=>Qt(we)),P.blockers.forEach((Ee,we)=>Oe(we))}function We(Ee){return m.add(Ee),()=>m.delete(Ee)}function Be(Ee,we={}){Ee.matches&&(Ee.matches=Ee.matches.map(it=>{let xt=a[it.route.id],lt=it.route;return lt.element!==xt.element||lt.errorElement!==xt.errorElement||lt.hydrateFallbackElement!==xt.hydrateFallbackElement?{...it,route:xt}:it})),P={...P,...Ee};let Ne=[],ze=[];P.fetchers.forEach((it,xt)=>{it.state==="idle"&&(ce.has(xt)?Ne.push(xt):ze.push(xt))}),ce.forEach(it=>{!P.fetchers.has(it)&&!G.has(it)&&Ne.push(it)}),[...m].forEach(it=>it(P,{deletedFetchers:Ne,viewTransitionOpts:we.viewTransitionOpts,flushSync:we.flushSync===!0})),Ne.forEach(it=>Qt(it)),ze.forEach(it=>P.fetchers.delete(it))}function rt(Ee,we,{flushSync:Ne}={}){let ze=P.actionData!=null&&P.navigation.formMethod!=null&&isMutationMethod(P.navigation.formMethod)&&P.navigation.state==="loading"&&Ee.state?._isRedirect!==!0,it;we.actionData?Object.keys(we.actionData).length>0?it=we.actionData:it=null:ze?it=P.actionData:it=null;let xt=we.loaderData?mergeLoaderData(P.loaderData,we.loaderData,we.matches||[],we.errors):P.loaderData,lt=P.blockers;lt.size>0&&(lt=new Map(lt),lt.forEach((Rt,Dt)=>lt.set(Dt,IDLE_BLOCKER)));let Et=ne?!1:Ie(Ee,we.matches||P.matches),It=B===!0||P.navigation.formMethod!=null&&isMutationMethod(P.navigation.formMethod)&&Ee.state?._isRedirect!==!0;l&&(o=l,l=void 0),ne||O==="POP"||(O==="PUSH"?t.history.push(Ee,Ee.state):O==="REPLACE"&&t.history.replace(Ee,Ee.state));let Tt;if(O==="POP"){let Rt=Q.get(P.location.pathname);Rt&&Rt.has(Ee.pathname)?Tt={currentLocation:P.location,nextLocation:Ee}:Q.has(Ee.pathname)&&(Tt={currentLocation:Ee,nextLocation:P.location})}else if(H){let Rt=Q.get(P.location.pathname);Rt?Rt.add(Ee.pathname):(Rt=new Set([Ee.pathname]),Q.set(P.location.pathname,Rt)),Tt={currentLocation:P.location,nextLocation:Ee}}Be({...we,actionData:it,loaderData:xt,historyAction:O,location:Ee,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Et,preventScrollReset:It,blockers:lt},{viewTransitionOpts:Tt,flushSync:Ne===!0}),O="POP",B=!1,H=!1,ne=!1,re=!1,Ce?.resolve(),Ce=null}async function tt(Ee,we){if(typeof Ee=="number"){t.history.go(Ee);return}let Ne=normalizeTo(P.location,P.matches,u,Ee,we?.fromRouteId,we?.relative),{path:ze,submission:it,error:xt}=normalizeNavigateOptions(!1,Ne,we),lt=P.location,Et=createLocation(P.location,ze,we&&we.state);Et={...Et,...t.history.encodeLocation(Et)};let It=we&&we.replace!=null?we.replace:void 0,Tt="PUSH";It===!0?Tt="REPLACE":It===!1||it!=null&&isMutationMethod(it.formMethod)&&it.formAction===P.location.pathname+P.location.search&&(Tt="REPLACE");let Rt=we&&"preventScrollReset"in we?we.preventScrollReset===!0:void 0,Dt=(we&&we.flushSync)===!0,Ct=Xt({currentLocation:lt,nextLocation:Et,historyAction:Tt});if(Ct){Yt(Ct,{state:"blocked",location:Et,proceed(){Yt(Ct,{state:"proceeding",proceed:void 0,reset:void 0,location:Et}),tt(Ee,we)},reset(){let or=new Map(P.blockers);or.set(Ct,IDLE_BLOCKER),Be({blockers:or})}});return}await Pe(Tt,Et,{submission:it,pendingError:xt,preventScrollReset:Rt,replace:we&&we.replace,enableViewTransition:we&&we.viewTransition,flushSync:Dt})}function Ue(){Ce||(Ce=createDeferred()),bt(),Be({revalidation:"loading"});let Ee=Ce.promise;return P.navigation.state==="submitting"?Ee:P.navigation.state==="idle"?(Pe(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),Ee):(Pe(O||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:H===!0}),Ee)}async function Pe(Ee,we,Ne){F&&F.abort(),F=null,O=Ee,ne=(Ne&&Ne.startUninterruptedRevalidation)===!0,ve(P.location,P.matches),B=(Ne&&Ne.preventScrollReset)===!0,H=(Ne&&Ne.enableViewTransition)===!0;let ze=l||o,it=Ne&&Ne.overrideNavigation,xt=Ne?.initialHydration&&P.matches&&P.matches.length>0&&!C?P.matches:matchRoutes(ze,we,u),lt=(Ne&&Ne.flushSync)===!0;if(xt&&P.initialized&&!re&&isHashChangeOnly(P.location,we)&&!(Ne&&Ne.submission&&isMutationMethod(Ne.submission.formMethod))){rt(we,{matches:xt},{flushSync:lt});return}let Et=Ze(xt,ze,we.pathname);if(Et.active&&Et.matches&&(xt=Et.matches),!xt){let{error:Dr,notFoundMatches:hr,route:ar}=ir(we.pathname);rt(we,{matches:hr,loaderData:{},errors:{[ar.id]:Dr}},{flushSync:lt});return}F=new AbortController;let It=createClientSideRequest(t.history,we,F.signal,Ne&&Ne.submission),Tt=t.getContext?await t.getContext():new RouterContextProvider,Rt;if(Ne&&Ne.pendingError)Rt=[findNearestBoundary(xt).route.id,{type:"error",error:Ne.pendingError}];else if(Ne&&Ne.submission&&isMutationMethod(Ne.submission.formMethod)){let Dr=await Qe(It,we,Ne.submission,xt,Tt,Et.active,Ne&&Ne.initialHydration===!0,{replace:Ne.replace,flushSync:lt});if(Dr.shortCircuited)return;if(Dr.pendingActionResult){let[hr,ar]=Dr.pendingActionResult;if(isErrorResult(ar)&&isRouteErrorResponse(ar.error)&&ar.error.status===404){F=null,rt(we,{matches:Dr.matches,loaderData:{},errors:{[hr]:ar.error}});return}}xt=Dr.matches||xt,Rt=Dr.pendingActionResult,it=getLoadingNavigation(we,Ne.submission),lt=!1,Et.active=!1,It=createClientSideRequest(t.history,It.url,It.signal)}let{shortCircuited:Dt,matches:Ct,loaderData:or,errors:_r}=await Je(It,we,xt,Tt,Et.active,it,Ne&&Ne.submission,Ne&&Ne.fetcherSubmission,Ne&&Ne.replace,Ne&&Ne.initialHydration===!0,lt,Rt);Dt||(F=null,rt(we,{matches:Ct||xt,...getActionDataForCommit(Rt),loaderData:or,errors:_r}))}async function Qe(Ee,we,Ne,ze,it,xt,lt,Et={}){bt();let It=getSubmittingNavigation(we,Ne);if(Be({navigation:It},{flushSync:Et.flushSync===!0}),xt){let Dt=await wt(ze,we.pathname,Ee.signal);if(Dt.type==="aborted")return{shortCircuited:!0};if(Dt.type==="error"){if(Dt.partialMatches.length===0){let{matches:or,route:_r}=getShortCircuitMatches(o);return{matches:or,pendingActionResult:[_r.id,{type:"error",error:Dt.error}]}}let Ct=findNearestBoundary(Dt.partialMatches).route.id;return{matches:Dt.partialMatches,pendingActionResult:[Ct,{type:"error",error:Dt.error}]}}else if(Dt.matches)ze=Dt.matches;else{let{notFoundMatches:Ct,error:or,route:_r}=ir(we.pathname);return{matches:Ct,pendingActionResult:[_r.id,{type:"error",error:or}]}}}let Tt,Rt=getTargetMatch(ze,we);if(!Rt.route.action&&!Rt.route.lazy)Tt={type:"error",error:getInternalRouterError(405,{method:Ee.method,pathname:we.pathname,routeId:Rt.route.id})};else{let Dt=getTargetedDataStrategyMatches(i,a,Ee,ze,Rt,lt?[]:s,it),Ct=await st(Ee,Dt,it,null);if(Tt=Ct[Rt.route.id],!Tt){for(let or of ze)if(Ct[or.route.id]){Tt=Ct[or.route.id];break}}if(Ee.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(Tt)){let Dt;return Et&&Et.replace!=null?Dt=Et.replace:Dt=normalizeRedirectLocation(Tt.response.headers.get("Location"),new URL(Ee.url),u)===P.location.pathname+P.location.search,await mt(Ee,Tt,!0,{submission:Ne,replace:Dt}),{shortCircuited:!0}}if(isErrorResult(Tt)){let Dt=findNearestBoundary(ze,Rt.route.id);return(Et&&Et.replace)!==!0&&(O="PUSH"),{matches:ze,pendingActionResult:[Dt.route.id,Tt,Rt.route.id]}}return{matches:ze,pendingActionResult:[Rt.route.id,Tt]}}async function Je(Ee,we,Ne,ze,it,xt,lt,Et,It,Tt,Rt,Dt){let Ct=xt||getLoadingNavigation(we,lt),or=lt||Et||getSubmissionFromNavigation(Ct),_r=!ne&&!Tt;if(it){if(_r){let Xr=nt(Dt);Be({navigation:Ct,...Xr!==void 0?{actionData:Xr}:{}},{flushSync:Rt})}let ur=await wt(Ne,we.pathname,Ee.signal);if(ur.type==="aborted")return{shortCircuited:!0};if(ur.type==="error"){if(ur.partialMatches.length===0){let{matches:ts,route:Wr}=getShortCircuitMatches(o);return{matches:ts,loaderData:{},errors:{[Wr.id]:ur.error}}}let Xr=findNearestBoundary(ur.partialMatches).route.id;return{matches:ur.partialMatches,loaderData:{},errors:{[Xr]:ur.error}}}else if(ur.matches)Ne=ur.matches;else{let{error:Xr,notFoundMatches:ts,route:Wr}=ir(we.pathname);return{matches:ts,loaderData:{},errors:{[Wr.id]:Xr}}}}let Dr=l||o,{dsMatches:hr,revalidatingFetchers:ar}=getMatchesToLoad(Ee,ze,i,a,t.history,P,Ne,or,we,Tt?[]:s,Tt===!0,re,se,ce,z,ee,Dr,u,t.patchRoutesOnNavigation!=null,Dt);if(M=++K,!t.dataStrategy&&!hr.some(ur=>ur.shouldLoad)&&!hr.some(ur=>ur.route.middleware&&ur.route.middleware.length>0)&&ar.length===0){let ur=Ir();return rt(we,{matches:Ne,loaderData:{},errors:Dt&&isErrorResult(Dt[1])?{[Dt[0]]:Dt[1].error}:null,...getActionDataForCommit(Dt),...ur?{fetchers:new Map(P.fetchers)}:{}},{flushSync:Rt}),{shortCircuited:!0}}if(_r){let ur={};if(!it){ur.navigation=Ct;let Xr=nt(Dt);Xr!==void 0&&(ur.actionData=Xr)}ar.length>0&&(ur.fetchers=ft(ar)),Be(ur,{flushSync:Rt})}ar.forEach(ur=>{Ht(ur.key),ur.controller&&G.set(ur.key,ur.controller)});let He=()=>ar.forEach(ur=>Ht(ur.key));F&&F.signal.addEventListener("abort",He);let{loaderResults:_t,fetcherResults:gt}=await St(hr,ar,Ee,ze);if(Ee.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",He),ar.forEach(ur=>G.delete(ur.key));let yt=findRedirect(_t);if(yt)return await mt(Ee,yt.result,!0,{replace:It}),{shortCircuited:!0};if(yt=findRedirect(gt),yt)return ee.add(yt.key),await mt(Ee,yt.result,!0,{replace:It}),{shortCircuited:!0};let{loaderData:qt,errors:yr}=processLoaderData(P,Ne,_t,Dt,ar,gt);Tt&&P.errors&&(yr={...P.errors,...yr});let Lr=Ir(),En=Qr(M),wn=Lr||En||ar.length>0;return{matches:Ne,loaderData:qt,errors:yr,...wn?{fetchers:new Map(P.fetchers)}:{}}}function nt(Ee){if(Ee&&!isErrorResult(Ee[1]))return{[Ee[0]]:Ee[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function ft(Ee){return Ee.forEach(we=>{let Ne=P.fetchers.get(we.key),ze=getLoadingFetcher(void 0,Ne?Ne.data:void 0);P.fetchers.set(we.key,ze)}),new Map(P.fetchers)}async function At(Ee,we,Ne,ze){Ht(Ee);let it=(ze&&ze.flushSync)===!0,xt=l||o,lt=normalizeTo(P.location,P.matches,u,Ne,we,ze?.relative),Et=matchRoutes(xt,lt,u),It=Ze(Et,xt,lt);if(It.active&&It.matches&&(Et=It.matches),!Et){pt(Ee,we,getInternalRouterError(404,{pathname:lt}),{flushSync:it});return}let{path:Tt,submission:Rt,error:Dt}=normalizeNavigateOptions(!0,lt,ze);if(Dt){pt(Ee,we,Dt,{flushSync:it});return}let Ct=t.getContext?await t.getContext():new RouterContextProvider,or=(ze&&ze.preventScrollReset)===!0;if(Rt&&isMutationMethod(Rt.formMethod)){await ot(Ee,we,Tt,Et,Ct,It.active,it,or,Rt);return}z.set(Ee,{routeId:we,path:Tt}),await qe(Ee,we,Tt,Et,Ct,It.active,it,or,Rt)}async function ot(Ee,we,Ne,ze,it,xt,lt,Et,It){bt(),z.delete(Ee);let Tt=P.fetchers.get(Ee);Mt(Ee,getSubmittingFetcher(It,Tt),{flushSync:lt});let Rt=new AbortController,Dt=createClientSideRequest(t.history,Ne,Rt.signal,It);if(xt){let Mr=await wt(ze,new URL(Dt.url).pathname,Dt.signal,Ee);if(Mr.type==="aborted")return;if(Mr.type==="error"){pt(Ee,we,Mr.error,{flushSync:lt});return}else if(Mr.matches)ze=Mr.matches;else{pt(Ee,we,getInternalRouterError(404,{pathname:Ne}),{flushSync:lt});return}}let Ct=getTargetMatch(ze,Ne);if(!Ct.route.action&&!Ct.route.lazy){let Mr=getInternalRouterError(405,{method:It.formMethod,pathname:Ne,routeId:we});pt(Ee,we,Mr,{flushSync:lt});return}G.set(Ee,Rt);let or=K,_r=getTargetedDataStrategyMatches(i,a,Dt,ze,Ct,s,it),hr=(await st(Dt,_r,it,Ee))[Ct.route.id];if(Dt.signal.aborted){G.get(Ee)===Rt&&G.delete(Ee);return}if(ce.has(Ee)){if(isRedirectResult(hr)||isErrorResult(hr)){Mt(Ee,getDoneFetcher(void 0));return}}else{if(isRedirectResult(hr))if(G.delete(Ee),M>or){Mt(Ee,getDoneFetcher(void 0));return}else return ee.add(Ee),Mt(Ee,getLoadingFetcher(It)),mt(Dt,hr,!1,{fetcherSubmission:It,preventScrollReset:Et});if(isErrorResult(hr)){pt(Ee,we,hr.error);return}}let ar=P.navigation.location||P.location,He=createClientSideRequest(t.history,ar,Rt.signal),_t=l||o,gt=P.navigation.state!=="idle"?matchRoutes(_t,P.navigation.location,u):P.matches;invariant$1(gt,"Didn't find any matches after fetcher action");let yt=++K;W.set(Ee,yt);let qt=getLoadingFetcher(It,hr.data);P.fetchers.set(Ee,qt);let{dsMatches:yr,revalidatingFetchers:Lr}=getMatchesToLoad(He,it,i,a,t.history,P,gt,It,ar,s,!1,re,se,ce,z,ee,_t,u,t.patchRoutesOnNavigation!=null,[Ct.route.id,hr]);Lr.filter(Mr=>Mr.key!==Ee).forEach(Mr=>{let ln=Mr.key,js=P.fetchers.get(ln),ri=getLoadingFetcher(void 0,js?js.data:void 0);P.fetchers.set(ln,ri),Ht(ln),Mr.controller&&G.set(ln,Mr.controller)}),Be({fetchers:new Map(P.fetchers)});let En=()=>Lr.forEach(Mr=>Ht(Mr.key));Rt.signal.addEventListener("abort",En);let{loaderResults:wn,fetcherResults:ur}=await St(yr,Lr,He,it);if(Rt.signal.aborted)return;if(Rt.signal.removeEventListener("abort",En),W.delete(Ee),G.delete(Ee),Lr.forEach(Mr=>G.delete(Mr.key)),P.fetchers.has(Ee)){let Mr=getDoneFetcher(hr.data);P.fetchers.set(Ee,Mr)}let Xr=findRedirect(wn);if(Xr)return mt(He,Xr.result,!1,{preventScrollReset:Et});if(Xr=findRedirect(ur),Xr)return ee.add(Xr.key),mt(He,Xr.result,!1,{preventScrollReset:Et});let{loaderData:ts,errors:Wr}=processLoaderData(P,gt,wn,void 0,Lr,ur);Qr(yt),P.navigation.state==="loading"&&yt>M?(invariant$1(O,"Expected pending action"),F&&F.abort(),rt(P.navigation.location,{matches:gt,loaderData:ts,errors:Wr,fetchers:new Map(P.fetchers)})):(Be({errors:Wr,loaderData:mergeLoaderData(P.loaderData,ts,gt,Wr),fetchers:new Map(P.fetchers)}),re=!1)}async function qe(Ee,we,Ne,ze,it,xt,lt,Et,It){let Tt=P.fetchers.get(Ee);Mt(Ee,getLoadingFetcher(It,Tt?Tt.data:void 0),{flushSync:lt});let Rt=new AbortController,Dt=createClientSideRequest(t.history,Ne,Rt.signal);if(xt){let ar=await wt(ze,new URL(Dt.url).pathname,Dt.signal,Ee);if(ar.type==="aborted")return;if(ar.type==="error"){pt(Ee,we,ar.error,{flushSync:lt});return}else if(ar.matches)ze=ar.matches;else{pt(Ee,we,getInternalRouterError(404,{pathname:Ne}),{flushSync:lt});return}}let Ct=getTargetMatch(ze,Ne);G.set(Ee,Rt);let or=K,_r=getTargetedDataStrategyMatches(i,a,Dt,ze,Ct,s,it),hr=(await st(Dt,_r,it,Ee))[Ct.route.id];if(G.get(Ee)===Rt&&G.delete(Ee),!Dt.signal.aborted){if(ce.has(Ee)){Mt(Ee,getDoneFetcher(void 0));return}if(isRedirectResult(hr))if(M>or){Mt(Ee,getDoneFetcher(void 0));return}else{ee.add(Ee),await mt(Dt,hr,!1,{preventScrollReset:Et});return}if(isErrorResult(hr)){pt(Ee,we,hr.error);return}Mt(Ee,getDoneFetcher(hr.data))}}async function mt(Ee,we,Ne,{submission:ze,fetcherSubmission:it,preventScrollReset:xt,replace:lt}={}){we.response.headers.has("X-Remix-Revalidate")&&(re=!0);let Et=we.response.headers.get("Location");invariant$1(Et,"Expected a Location header on the redirect Response"),Et=normalizeRedirectLocation(Et,new URL(Ee.url),u);let It=createLocation(P.location,Et,{_isRedirect:!0});if(n){let _r=!1;if(we.response.headers.has("X-Remix-Reload-Document"))_r=!0;else if(isAbsoluteUrl(Et)){const Dr=createBrowserURLImpl(Et,!0);_r=Dr.origin!==e.location.origin||stripBasename(Dr.pathname,u)==null}if(_r){lt?e.location.replace(Et):e.location.assign(Et);return}}F=null;let Tt=lt===!0||we.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Rt,formAction:Dt,formEncType:Ct}=P.navigation;!ze&&!it&&Rt&&Dt&&Ct&&(ze=getSubmissionFromNavigation(P.navigation));let or=ze||it;if(redirectPreserveMethodStatusCodes.has(we.response.status)&&or&&isMutationMethod(or.formMethod))await Pe(Tt,It,{submission:{...or,formAction:Et},preventScrollReset:xt||B,enableViewTransition:Ne?H:void 0});else{let _r=getLoadingNavigation(It,ze);await Pe(Tt,It,{overrideNavigation:_r,fetcherSubmission:it,preventScrollReset:xt||B,enableViewTransition:Ne?H:void 0})}}async function st(Ee,we,Ne,ze){let it,xt={};try{it=await callDataStrategyImpl(c,Ee,we,ze,Ne,!1)}catch(lt){return we.filter(Et=>Et.shouldLoad).forEach(Et=>{xt[Et.route.id]={type:"error",error:lt}}),xt}if(Ee.signal.aborted)return xt;for(let[lt,Et]of Object.entries(it))if(isRedirectDataStrategyResult(Et)){let It=Et.result;xt[lt]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(It,Ee,lt,we,u)}}else xt[lt]=await convertDataStrategyResultToDataResult(Et);return xt}async function St(Ee,we,Ne,ze){let it=st(Ne,Ee,ze,null),xt=Promise.all(we.map(async It=>{if(It.matches&&It.match&&It.request&&It.controller){let Rt=(await st(It.request,It.matches,ze,It.key))[It.match.route.id];return{[It.key]:Rt}}else return Promise.resolve({[It.key]:{type:"error",error:getInternalRouterError(404,{pathname:It.path})}})})),lt=await it,Et=(await xt).reduce((It,Tt)=>Object.assign(It,Tt),{});return{loaderResults:lt,fetcherResults:Et}}function bt(){re=!0,z.forEach((Ee,we)=>{G.has(we)&&se.add(we),Ht(we)})}function Mt(Ee,we,Ne={}){P.fetchers.set(Ee,we),Be({fetchers:new Map(P.fetchers)},{flushSync:(Ne&&Ne.flushSync)===!0})}function pt(Ee,we,Ne,ze={}){let it=findNearestBoundary(P.matches,we);Qt(Ee),Be({errors:{[it.route.id]:Ne},fetchers:new Map(P.fetchers)},{flushSync:(ze&&ze.flushSync)===!0})}function rr(Ee){return ae.set(Ee,(ae.get(Ee)||0)+1),ce.has(Ee)&&ce.delete(Ee),P.fetchers.get(Ee)||IDLE_FETCHER}function Ft(Ee,we){Ht(Ee,we?.reason),Mt(Ee,getDoneFetcher(null))}function Qt(Ee){let we=P.fetchers.get(Ee);G.has(Ee)&&!(we&&we.state==="loading"&&W.has(Ee))&&Ht(Ee),z.delete(Ee),W.delete(Ee),ee.delete(Ee),ce.delete(Ee),se.delete(Ee),P.fetchers.delete(Ee)}function nr(Ee){let we=(ae.get(Ee)||0)-1;we<=0?(ae.delete(Ee),ce.add(Ee)):ae.set(Ee,we),Be({fetchers:new Map(P.fetchers)})}function Ht(Ee,we){let Ne=G.get(Ee);Ne&&(Ne.abort(we),G.delete(Ee))}function Ar(Ee){for(let we of Ee){let Ne=rr(we),ze=getDoneFetcher(Ne.data);P.fetchers.set(we,ze)}}function Ir(){let Ee=[],we=!1;for(let Ne of ee){let ze=P.fetchers.get(Ne);invariant$1(ze,`Expected fetcher: ${Ne}`),ze.state==="loading"&&(ee.delete(Ne),Ee.push(Ne),we=!0)}return Ar(Ee),we}function Qr(Ee){let we=[];for(let[Ne,ze]of W)if(ze<Ee){let it=P.fetchers.get(Ne);invariant$1(it,`Expected fetcher: ${Ne}`),it.state==="loading"&&(Ht(Ne),W.delete(Ne),we.push(Ne))}return Ar(we),we.length>0}function ke(Ee,we){let Ne=P.blockers.get(Ee)||IDLE_BLOCKER;return he.get(Ee)!==we&&he.set(Ee,we),Ne}function Oe(Ee){P.blockers.delete(Ee),he.delete(Ee)}function Yt(Ee,we){let Ne=P.blockers.get(Ee)||IDLE_BLOCKER;invariant$1(Ne.state==="unblocked"&&we.state==="blocked"||Ne.state==="blocked"&&we.state==="blocked"||Ne.state==="blocked"&&we.state==="proceeding"||Ne.state==="blocked"&&we.state==="unblocked"||Ne.state==="proceeding"&&we.state==="unblocked",`Invalid blocker state transition: ${Ne.state} -> ${we.state}`);let ze=new Map(P.blockers);ze.set(Ee,we),Be({blockers:ze})}function Xt({currentLocation:Ee,nextLocation:we,historyAction:Ne}){if(he.size===0)return;he.size>1&&warning(!1,"A router only supports one blocker at a time");let ze=Array.from(he.entries()),[it,xt]=ze[ze.length-1],lt=P.blockers.get(it);if(!(lt&&lt.state==="proceeding")&&xt({currentLocation:Ee,nextLocation:we,historyAction:Ne}))return it}function ir(Ee){let we=getInternalRouterError(404,{pathname:Ee}),Ne=l||o,{matches:ze,route:it}=getShortCircuitMatches(Ne);return{notFoundMatches:ze,route:it,error:we}}function ie(Ee,we,Ne){if(g=Ee,x=we,E=Ne||null,!b&&P.navigation===IDLE_NAVIGATION){b=!0;let ze=Ie(P.location,P.matches);ze!=null&&Be({restoreScrollPosition:ze})}return()=>{g=null,x=null,E=null}}function ue(Ee,we){return E&&E(Ee,we.map(ze=>convertRouteMatchToUiMatch(ze,P.loaderData)))||Ee.key}function ve(Ee,we){if(g&&x){let Ne=ue(Ee,we);g[Ne]=x()}}function Ie(Ee,we){if(g){let Ne=ue(Ee,we),ze=g[Ne];if(typeof ze=="number")return ze}return null}function Ze(Ee,we,Ne){if(t.patchRoutesOnNavigation)if(Ee){if(Object.keys(Ee[0].params).length>0)return{active:!0,matches:matchRoutesImpl(we,Ne,u,!0)}}else return{active:!0,matches:matchRoutesImpl(we,Ne,u,!0)||[]};return{active:!1,matches:null}}async function wt(Ee,we,Ne,ze){if(!t.patchRoutesOnNavigation)return{type:"success",matches:Ee};let it=Ee;for(;;){let xt=l==null,lt=l||o,Et=a;try{await t.patchRoutesOnNavigation({signal:Ne,path:we,matches:it,fetcherKey:ze,patch:(Rt,Dt)=>{Ne.aborted||patchRoutesImpl(Rt,Dt,lt,Et,i,!1)}})}catch(Rt){return{type:"error",error:Rt,partialMatches:it}}finally{xt&&!Ne.aborted&&(o=[...o])}if(Ne.aborted)return{type:"aborted"};let It=matchRoutes(lt,we,u);if(It)return{type:"success",matches:It};let Tt=matchRoutesImpl(lt,we,u,!0);if(!Tt||it.length===Tt.length&&it.every((Rt,Dt)=>Rt.route.id===Tt[Dt].route.id))return{type:"success",matches:null};it=Tt}}function Gt(Ee){a={},l=convertRoutesToDataRoutes(Ee,i,void 0,a)}function sr(Ee,we,Ne=!1){let ze=l==null;patchRoutesImpl(Ee,we,l||o,a,i,Ne),ze&&(o=[...o],Be({}))}return D={get basename(){return u},get future(){return d},get state(){return P},get routes(){return o},get window(){return e},initialize:Me,subscribe:We,enableScrollRestoration:ie,navigate:tt,fetch:At,revalidate:Ue,createHref:Ee=>t.history.createHref(Ee),encodeLocation:Ee=>t.history.encodeLocation(Ee),getFetcher:rr,resetFetcher:Ft,deleteFetcher:nr,dispose:Ye,getBlocker:ke,deleteBlocker:Oe,patchRoutes:sr,_internalFetchControllers:G,_internalSetRoutes:Gt,_internalSetStateDoNotUseOrYouWillBreakYourApp(Ee){Be(Ee)}},D}function isSubmissionNavigation(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function normalizeTo(t,e,n,s,i,a){let o,l;if(i){o=[];for(let c of e)if(o.push(c),c.route.id===i){l=c;break}}else o=e,l=e[e.length-1];let u=resolveTo(s||".",getResolveToMatches(o),stripBasename(t.pathname,n)||t.pathname,a==="path");if(s==null&&(u.search=t.search,u.hash=t.hash),(s==null||s===""||s===".")&&l){let c=hasNakedIndexQuery(u.search);if(l.route.index&&!c)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!l.route.index&&c){let d=new URLSearchParams(u.search),p=d.getAll("index");d.delete("index"),p.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();u.search=m?`?${m}`:""}}return n!=="/"&&(u.pathname=prependBasename({basename:n,pathname:u.pathname})),createPath$1(u)}function normalizeNavigateOptions(t,e,n){if(!n||!isSubmissionNavigation(n))return{path:e};if(n.formMethod&&!isValidMethod(n.formMethod))return{path:e,error:getInternalRouterError(405,{method:n.formMethod})};let s=()=>({path:e,error:getInternalRouterError(400,{type:"invalid-body"})}),a=(n.formMethod||"get").toUpperCase(),o=stripHashFromPath(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!isMutationMethod(a))return s();let p=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,[g,E])=>`${m}${g}=${E}
`,""):String(n.body);return{path:e,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:p}}}else if(n.formEncType==="application/json"){if(!isMutationMethod(a))return s();try{let p=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:p,text:void 0}}}catch{return s()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let l,u;if(n.formData)l=convertFormDataToSearchParams(n.formData),u=n.formData;else if(n.body instanceof FormData)l=convertFormDataToSearchParams(n.body),u=n.body;else if(n.body instanceof URLSearchParams)l=n.body,u=convertSearchParamsToFormData(l);else if(n.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(n.body),u=convertSearchParamsToFormData(l)}catch{return s()}let c={formMethod:a,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(isMutationMethod(c.formMethod))return{path:e,submission:c};let d=parsePath(e);return t&&d.search&&hasNakedIndexQuery(d.search)&&l.append("index",""),d.search=`?${l}`,{path:createPath$1(d),submission:c}}function getMatchesToLoad(t,e,n,s,i,a,o,l,u,c,d,p,m,g,E,x,b,S,C,T){let I=T?isErrorResult(T[1])?T[1].error:T[1].data:void 0,D=i.createURL(a.location),P=i.createURL(u),O;if(d&&a.errors){let ne=Object.keys(a.errors)[0];O=o.findIndex(re=>re.route.id===ne)}else if(T&&isErrorResult(T[1])){let ne=T[0];O=o.findIndex(re=>re.route.id===ne)-1}let B=T?T[1].statusCode:void 0,F=B&&B>=400,H={currentUrl:D,currentParams:a.matches[0]?.params||{},nextUrl:P,nextParams:o[0].params,...l,actionResult:I,actionStatus:B},Q=o.map((ne,re)=>{let{route:se}=ne,G=null;if(O!=null&&re>O?G=!1:se.lazy?G=!0:routeHasLoaderOrMiddleware(se)?d?G=shouldLoadRouteOnHydration(se,a.loaderData,a.errors):isNewLoader(a.loaderData,a.matches[re],ne)&&(G=!0):G=!1,G!==null)return getDataStrategyMatch(n,s,t,ne,c,e,G);let K=F?!1:p||D.pathname+D.search===P.pathname+P.search||D.search!==P.search||isNewRouteInstance(a.matches[re],ne),M={...H,defaultShouldRevalidate:K},W=shouldRevalidateLoader(ne,M);return getDataStrategyMatch(n,s,t,ne,c,e,W,M)}),Z=[];return E.forEach((ne,re)=>{if(d||!o.some(ae=>ae.route.id===ne.routeId)||g.has(re))return;let se=a.fetchers.get(re),G=se&&se.state!=="idle"&&se.data===void 0,K=matchRoutes(b,ne.path,S);if(!K){if(C&&G)return;Z.push({key:re,routeId:ne.routeId,path:ne.path,matches:null,match:null,request:null,controller:null});return}if(x.has(re))return;let M=getTargetMatch(K,ne.path),W=new AbortController,ee=createClientSideRequest(i,ne.path,W.signal),z=null;if(m.has(re))m.delete(re),z=getTargetedDataStrategyMatches(n,s,ee,K,M,c,e);else if(G)p&&(z=getTargetedDataStrategyMatches(n,s,ee,K,M,c,e));else{let ae={...H,defaultShouldRevalidate:F?!1:p};shouldRevalidateLoader(M,ae)&&(z=getTargetedDataStrategyMatches(n,s,ee,K,M,c,e,ae))}z&&Z.push({key:re,routeId:ne.routeId,path:ne.path,matches:z,match:M,request:ee,controller:W})}),{dsMatches:Q,revalidatingFetchers:Z}}function routeHasLoaderOrMiddleware(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function shouldLoadRouteOnHydration(t,e,n){if(t.lazy)return!0;if(!routeHasLoaderOrMiddleware(t))return!1;let s=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!s&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!s&&!i}function isNewLoader(t,e,n){let s=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return s||i}function isNewRouteInstance(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function patchRoutesImpl(t,e,n,s,i,a){let o;if(t){let c=s[t];invariant$1(c,`No route found to patch children into: routeId = ${t}`),c.children||(c.children=[]),o=c.children}else o=n;let l=[],u=[];if(e.forEach(c=>{let d=o.find(p=>isSameRoute(c,p));d?u.push({existingRoute:d,newRoute:c}):l.push(c)}),l.length>0){let c=convertRoutesToDataRoutes(l,i,[t||"_","patch",String(o?.length||"0")],s);o.push(...c)}if(a&&u.length>0)for(let c=0;c<u.length;c++){let{existingRoute:d,newRoute:p}=u[c],m=d,[g]=convertRoutesToDataRoutes([p],i,[],{},!0);Object.assign(m,{element:g.element?g.element:m.element,errorElement:g.errorElement?g.errorElement:m.errorElement,hydrateFallbackElement:g.hydrateFallbackElement?g.hydrateFallbackElement:m.hydrateFallbackElement})}}function isSameRoute(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,s)=>e.children?.some(i=>isSameRoute(n,i))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:t,route:e,manifest:n,mapRouteProperties:s})=>{let i=n[e.id];if(invariant$1(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let a=i.lazy[t];if(!a)return;let o=lazyRoutePropertyCache.get(i);o||(o={},lazyRoutePropertyCache.set(i,o));let l=o[t];if(l)return l;let u=(async()=>{let c=isUnsupportedLazyRouteObjectKey(t),p=i[t]!==void 0&&t!=="hasErrorBoundary";if(c)warning(!c,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(p)warning(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let m=await a();m!=null&&(Object.assign(i,{[t]:m}),Object.assign(i,s(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(m=>m===void 0)&&(i.lazy=void 0))})();return o[t]=u,u},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(t,e,n,s,i){let a=n[t.id];if(invariant$1(a,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let d=lazyRouteFunctionCache.get(a);if(d)return{lazyRoutePromise:d,lazyHandlerPromise:d};let p=(async()=>{invariant$1(typeof t.lazy=="function","No lazy route function found");let m=await t.lazy(),g={};for(let E in m){let x=m[E];if(x===void 0)continue;let b=isUnsupportedLazyRouteFunctionKey(E),C=a[E]!==void 0&&E!=="hasErrorBoundary";b?warning(!b,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):C?warning(!C,`Route "${a.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):g[E]=x}Object.assign(a,g),Object.assign(a,{...s(a),lazy:void 0})})();return lazyRouteFunctionCache.set(a,p),p.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:p}}let o=Object.keys(t.lazy),l=[],u;for(let d of o){if(i&&i.includes(d))continue;let p=loadLazyRouteProperty({key:d,route:t,manifest:n,mapRouteProperties:s});p&&(l.push(p),d===e&&(u=p))}let c=l.length>0?Promise.all(l).then(()=>{}):void 0;return c?.catch(()=>{}),u?.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:u}}async function defaultDataStrategy(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,a)=>{n[e[a].route.id]=i}),n}async function defaultDataStrategyWithMiddleware(t){return t.matches.some(e=>e.route.middleware)?runClientMiddlewarePipeline(t,()=>defaultDataStrategy(t)):defaultDataStrategy(t)}function runClientMiddlewarePipeline(t,e){return runMiddlewarePipeline(t,e,s=>s,isDataStrategyResults,n);function n(s,i,a){if(a)return Promise.resolve(Object.assign(a.value,{[i]:{type:"error",result:s}}));{let{matches:o}=t,l=Math.min(Math.max(o.findIndex(c=>c.route.id===i),0),Math.max(o.findIndex(c=>c.unstable_shouldCallHandler()),0)),u=findNearestBoundary(o,o[l].route.id).route.id;return Promise.resolve({[u]:{type:"error",result:s}})}}}async function runMiddlewarePipeline(t,e,n,s,i){let{matches:a,request:o,params:l,context:u}=t,c=a.flatMap(p=>p.route.middleware?p.route.middleware.map(m=>[p.route.id,m]):[]);return await callRouteMiddleware({request:o,params:l,context:u},c,e,n,s,i)}async function callRouteMiddleware(t,e,n,s,i,a,o=0){let{request:l}=t;if(l.signal.aborted)throw l.signal.reason??new Error(`Request aborted: ${l.method} ${l.url}`);let u=e[o];if(!u)return await n();let[c,d]=u,p,m=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");try{return p={value:await callRouteMiddleware(t,e,n,s,i,a,o+1)},p.value}catch(g){return p={value:await a(g,c,p)},p.value}};try{let g=await d(t,m),E=g!=null?s(g):void 0;return i(E)?E:p?E??p.value:(p={value:await m()},p.value)}catch(g){return await a(g,c,p)}}function getDataStrategyMatchLazyPromises(t,e,n,s,i){let a=loadLazyRouteProperty({key:"middleware",route:s.route,manifest:e,mapRouteProperties:t}),o=loadLazyRoute(s.route,isMutationMethod(n.method)?"action":"loader",e,t,i);return{middleware:a,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function getDataStrategyMatch(t,e,n,s,i,a,o,l=null){let u=!1,c=getDataStrategyMatchLazyPromises(t,e,n,s,i);return{...s,_lazyPromises:c,shouldLoad:o,unstable_shouldRevalidateArgs:l,unstable_shouldCallHandler(d){return u=!0,l?typeof d=="boolean"?shouldRevalidateLoader(s,{...l,defaultShouldRevalidate:d}):shouldRevalidateLoader(s,l):o},resolve(d){let{lazy:p,loader:m,middleware:g}=s.route,E=u||o||d&&!isMutationMethod(n.method)&&(p||m),x=g&&g.length>0&&!m&&!p;return E&&!x?callLoaderOrAction({request:n,match:s,lazyHandlerPromise:c?.handler,lazyRoutePromise:c?.route,handlerOverride:d,scopedContext:a}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(t,e,n,s,i,a,o,l=null){return s.map(u=>u.route.id!==i.route.id?{...u,shouldLoad:!1,unstable_shouldRevalidateArgs:l,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(t,e,n,u,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(t,e,n,u,a,o,!0,l))}async function callDataStrategyImpl(t,e,n,s,i,a){n.some(c=>c._lazyPromises?.middleware)&&await Promise.all(n.map(c=>c._lazyPromises?.middleware));let o={request:e,params:n[0].params,context:i,matches:n},u=await t({...o,fetcherKey:s,runClientMiddleware:c=>{let d=o;return runClientMiddlewarePipeline(d,()=>c({...d,fetcherKey:s,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(c=>[c._lazyPromises?.handler,c._lazyPromises?.route]))}catch{}return u}async function callLoaderOrAction({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:s,handlerOverride:i,scopedContext:a}){let o,l,u=isMutationMethod(t.method),c=u?"action":"loader",d=p=>{let m,g=new Promise((b,S)=>m=S);l=()=>m(),t.signal.addEventListener("abort",l);let E=b=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${c}" [routeId: ${e.route.id}]`)):p({request:t,params:e.params,context:a},...b!==void 0?[b]:[]),x=(async()=>{try{return{type:"data",result:await(i?i(S=>E(S)):E())}}catch(b){return{type:"error",result:b}}})();return Promise.race([x,g])};try{let p=u?e.route.action:e.route.loader;if(n||s)if(p){let m,[g]=await Promise.all([d(p).catch(E=>{m=E}),n,s]);if(m!==void 0)throw m;o=g}else{await n;let m=u?e.route.action:e.route.loader;if(m)[o]=await Promise.all([d(m),s]);else if(c==="action"){let g=new URL(t.url),E=g.pathname+g.search;throw getInternalRouterError(405,{method:t.method,pathname:E,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(p)o=await d(p);else{let m=new URL(t.url),g=m.pathname+m.search;throw getInternalRouterError(404,{pathname:g})}}catch(p){return{type:"error",result:p}}finally{l&&t.signal.removeEventListener("abort",l)}return o}async function parseResponseBody(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function convertDataStrategyResultToDataResult(t){let{result:e,type:n}=t;if(isResponse$1(e)){let s;try{s=await parseResponseBody(e)}catch(i){return{type:"error",error:i}}return n==="error"?{type:"error",error:new ErrorResponseImpl(e.status,e.statusText,s),statusCode:e.status,headers:e.headers}:{type:"data",data:s,statusCode:e.status,headers:e.headers}}return n==="error"?isDataWithResponseInit(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(e.init?.status||500,void 0,e.data),statusCode:isRouteErrorResponse(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:isRouteErrorResponse(e)?e.status:void 0}:isDataWithResponseInit(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function normalizeRelativeRoutingRedirectResponse(t,e,n,s,i){let a=t.headers.get("Location");if(invariant$1(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(a)){let o=s.slice(0,s.findIndex(l=>l.route.id===n)+1);a=normalizeTo(new URL(e.url),o,i,a),t.headers.set("Location",a)}return t}function normalizeRedirectLocation(t,e,n){if(isAbsoluteUrl(t)){let s=t,i=s.startsWith("//")?new URL(e.protocol+s):new URL(s),a=stripBasename(i.pathname,n)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function createClientSideRequest(t,e,n,s){let i=t.createURL(stripHashFromPath(e)).toString(),a={signal:n};if(s&&isMutationMethod(s.formMethod)){let{formMethod:o,formEncType:l}=s;a.method=o.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(s.json)):l==="text/plain"?a.body=s.text:l==="application/x-www-form-urlencoded"&&s.formData?a.body=convertFormDataToSearchParams(s.formData):a.body=s.formData}return new Request(i,a)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[n,s]of t.entries())e.append(n,typeof s=="string"?s:s.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[n,s]of t.entries())e.append(n,s);return e}function processRouteLoaderData(t,e,n,s=!1,i=!1){let a={},o=null,l,u=!1,c={},d=n&&isErrorResult(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let m=p.route.id,g=e[m];if(invariant$1(!isRedirectResult(g),"Cannot handle redirect results in processLoaderData"),isErrorResult(g)){let E=g.error;if(d!==void 0&&(E=d,d=void 0),o=o||{},i)o[m]=E;else{let x=findNearestBoundary(t,m);o[x.route.id]==null&&(o[x.route.id]=E)}s||(a[m]=ResetLoaderDataSymbol),u||(u=!0,l=isRouteErrorResponse(g.error)?g.error.status:500),g.headers&&(c[m]=g.headers)}else a[m]=g.data,g.statusCode&&g.statusCode!==200&&!u&&(l=g.statusCode),g.headers&&(c[m]=g.headers)}),d!==void 0&&n&&(o={[n[0]]:d},n[2]&&(a[n[2]]=void 0)),{loaderData:a,errors:o,statusCode:l||200,loaderHeaders:c}}function processLoaderData(t,e,n,s,i,a){let{loaderData:o,errors:l}=processRouteLoaderData(e,n,s);return i.filter(u=>!u.matches||u.matches.some(c=>c.shouldLoad)).forEach(u=>{let{key:c,match:d,controller:p}=u;if(p&&p.signal.aborted)return;let m=a[c];if(invariant$1(m,"Did not find corresponding fetcher result"),isErrorResult(m)){let g=findNearestBoundary(t.matches,d?.route.id);l&&l[g.route.id]||(l={...l,[g.route.id]:m.error}),t.fetchers.delete(c)}else if(isRedirectResult(m))invariant$1(!1,"Unhandled fetcher revalidation redirect");else{let g=getDoneFetcher(m.data);t.fetchers.set(c,g)}}),{loaderData:o,errors:l}}function mergeLoaderData(t,e,n,s){let i=Object.entries(e).filter(([,a])=>a!==ResetLoaderDataSymbol).reduce((a,[o,l])=>(a[o]=l,a),{});for(let a of n){let o=a.route.id;if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&a.route.loader&&(i[o]=t[o]),s&&s.hasOwnProperty(o))break}return i}function getActionDataForCommit(t){return t?isErrorResult(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex(s=>s.route.id===e)+1):[...t]).reverse().find(s=>s.route.hasErrorBoundary===!0)||t[0]}function getShortCircuitMatches(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,{pathname:e,routeId:n,method:s,type:i,message:a}={}){let o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",s&&e&&n?l=`You made a ${s} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l=`Route "${n}" does not match URL "${e}"`):t===404?(o="Not Found",l=`No route matches URL "${e}"`):t===405&&(o="Method Not Allowed",s&&e&&n?l=`You made a ${s.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:s&&(l=`Invalid request method "${s.toUpperCase()}"`)),new ErrorResponseImpl(t||500,o,new Error(l),!0)}function findRedirect(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[s,i]=e[n];if(isRedirectResult(i))return{key:s,result:i}}}function stripHashFromPath(t){let e=typeof t=="string"?parsePath(t):t;return createPath$1({...e,hash:""})}function isHashChangeOnly(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function isDataStrategyResults(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&isDataStrategyResult(n))}function isDataStrategyResult(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function isRedirectDataStrategyResult(t){return isResponse$1(t.result)&&redirectStatusCodes.has(t.result.status)}function isErrorResult(t){return t.type==="error"}function isRedirectResult(t){return(t&&t.type)==="redirect"}function isDataWithResponseInit(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function isResponse$1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function isValidMethod(t){return validRequestMethods.has(t.toUpperCase())}function isMutationMethod(t){return validMutationMethods.has(t.toUpperCase())}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function getTargetMatch(t,e){let n=typeof e=="string"?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(n||""))return t[t.length-1];let s=getPathContributingMatches(t);return s[s.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:n,formEncType:s,text:i,formData:a,json:o}=t;if(!(!e||!n||!s)){if(i!=null)return{formMethod:e,formAction:n,formEncType:s,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:s,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:s,formData:void 0,json:o,text:void 0}}}function getLoadingNavigation(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let n=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(n){let s=JSON.parse(n);for(let[i,a]of Object.entries(s||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function persistAppliedTransitions(t,e){if(e.size>0){let n={};for(let[s,i]of e)n[s]=[...i];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(n))}catch(s){warning(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function createDeferred(){let t,e,n=new Promise((s,i)=>{t=async a=>{s(a);try{await n}catch{}},e=async a=>{i(a);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=reactExports.useContext(NavigationContext),{hash:i,pathname:a,search:o}=useResolvedPath(t,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:joinPaths([n,a])),s.createHref({pathname:l,search:o,hash:i})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$3(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:n}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),a=JSON.stringify(getResolveToMatches(s)),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{o.current=!0}),reactExports.useCallback((u,c={})=>{if(warning(o.current,navigateEffectWarning),!o.current)return;if(typeof u=="number"){n.go(u);return}let d=resolveTo(u,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:joinPaths([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,a,i,t])}var OutletContext=reactExports.createContext(null);function useOutletContext(){return reactExports.useContext(OutletContext)}function useOutlet(t){let e=reactExports.useContext(RouteContext).outlet;return reactExports.useMemo(()=>e&&reactExports.createElement(OutletContext.Provider,{value:t},e),[e,t])}function useParams(){let{matches:t}=reactExports.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function useResolvedPath(t,{relative:e}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),i=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(i),s,e==="path"),[t,i,s,e])}function useRoutesImpl(t,e,n,s,i){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";warningOnce(c,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=useLocation(),g;g=m;let E=g.pathname||"/",x=E;if(d!=="/"){let C=d.replace(/^\//,"").split("/");x="/"+E.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=matchRoutes(t,{pathname:x});return warning(p||b!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),warning(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:joinPaths([d,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:joinPaths([d,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,n,s,i)}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:a},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:a},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:i},n):null,o)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:n}){let s=reactExports.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},n)}function _renderMatches(t,e=[],n=null,s=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let c=a.findIndex(d=>d.route.id&&o?.[d.route.id]!==void 0);invariant$1(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:m}=n,g=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,p)=>{let m,g=!1,E=null,x=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,E=d.route.errorElement||defaultErrorElement,l&&(u<0&&p===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):u===p&&(g=!0,x=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,p+1)),S=()=>{let C;return m?C=E:g?C=x:d.route.Component?C=reactExports.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=c,reactExports.createElement(RenderedRoute,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:E,error:m,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:s}):S()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),n=e.matches[e.matches.length-1];return invariant$1(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useLoaderData(){let t=useDataRouterState("useLoaderData"),e=useCurrentRouteId("useLoaderData");return t.loaderData[e]}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[n]}function useAsyncValue(){return reactExports.useContext(AwaitContext)?._data}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{n.current=!0}),reactExports.useCallback(async(i,a={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,n){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,n))}var alreadyWarned2={};function warnOnce(t,e){!t&&!alreadyWarned2[e]&&(alreadyWarned2[e]=!0,console.warn(e))}function mapRouteProperties(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&warning(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:reactExports.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&warning(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:reactExports.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&warning(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:reactExports.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function RouterProvider({router:t,flushSync:e,unstable_onError:n}){let[s,i]=reactExports.useState(t.state),[a,o]=reactExports.useState(),[l,u]=reactExports.useState({isTransitioning:!1}),[c,d]=reactExports.useState(),[p,m]=reactExports.useState(),[g,E]=reactExports.useState(),x=reactExports.useRef(new Map),b=reactExports.useCallback(D=>{i(P=>(D.errors&&n&&Object.entries(D.errors).forEach(([O,B])=>{P.errors?.[O]!==B&&n(B)}),D))},[n]),S=reactExports.useCallback((D,{deletedFetchers:P,flushSync:O,viewTransitionOpts:B})=>{D.fetchers.forEach((H,Q)=>{H.data!==void 0&&x.current.set(Q,H.data)}),P.forEach(H=>x.current.delete(H)),warnOnce(O===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let F=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(warnOnce(B==null||F,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!B||!F){e&&O?e(()=>b(D)):reactExports.startTransition(()=>b(D));return}if(e&&O){e(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let H=t.window.document.startViewTransition(()=>{e(()=>b(D))});H.finished.finally(()=>{e(()=>{d(void 0),m(void 0),o(void 0),u({isTransitioning:!1})})}),e(()=>m(H));return}p?(c&&c.resolve(),p.skipTransition(),E({state:D,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(o(D),u({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[t.window,e,p,c,b]);reactExports.useLayoutEffect(()=>t.subscribe(S),[t,S]),reactExports.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new Deferred)},[l]),reactExports.useEffect(()=>{if(c&&a&&t.window){let D=a,P=c.promise,O=t.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>b(D)),await P});O.finished.finally(()=>{d(void 0),m(void 0),o(void 0),u({isTransitioning:!1})}),m(O)}},[a,c,t.window,b]),reactExports.useEffect(()=>{c&&a&&s.location.key===a.location.key&&c.resolve()},[c,p,s.location,a]),reactExports.useEffect(()=>{!l.isTransitioning&&g&&(o(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),E(void 0))},[l.isTransitioning,g]);let C=reactExports.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:D=>t.navigate(D),push:(D,P,O)=>t.navigate(D,{state:P,preventScrollReset:O?.preventScrollReset}),replace:(D,P,O)=>t.navigate(D,{replace:!0,state:P,preventScrollReset:O?.preventScrollReset})}),[t]),T=t.basename||"/",I=reactExports.useMemo(()=>({router:t,navigator:C,static:!1,basename:T,unstable_onError:n}),[t,C,T,n]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:I},reactExports.createElement(DataRouterStateContext.Provider,{value:s},reactExports.createElement(FetchersContext.Provider,{value:x.current},reactExports.createElement(ViewTransitionContext.Provider,{value:l},reactExports.createElement(Router,{basename:T,location:s.location,navigationType:s.historyAction,navigator:C},reactExports.createElement(MemoizedDataRoutes,{routes:t.routes,future:t.future,state:s,unstable_onError:n})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:n,unstable_onError:s}){return useRoutesImpl(t,void 0,n,s,e)}function Navigate({to:t,replace:e,state:n,relative:s}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=reactExports.useContext(NavigationContext);warning(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),l=useNavigate(),u=resolveTo(t,getResolveToMatches(a),o,s==="path"),c=JSON.stringify(u);return reactExports.useEffect(()=>{l(JSON.parse(c),{replace:e,state:n,relative:s})},[l,c,s,e,n]),null}function Outlet(t){return useOutlet(t.context)}function Router({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:i,static:a=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=reactExports.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=parsePath(n));let{pathname:u="/",search:c="",hash:d="",state:p=null,key:m="default"}=n,g=reactExports.useMemo(()=>{let E=stripBasename(u,o);return E==null?null:{location:{pathname:E,search:c,hash:d,state:p,key:m},navigationType:s}},[o,u,c,d,p,m,s]);return warning(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:reactExports.createElement(NavigationContext.Provider,{value:l},reactExports.createElement(LocationContext.Provider,{children:e,value:g}))}function Await({children:t,errorElement:e,resolve:n}){let s=reactExports.useContext(DataRouterContext);return reactExports.createElement(AwaitErrorBoundary,{resolve:n,errorElement:e,unstable_onError:s?.unstable_onError},reactExports.createElement(ResolveAwait,null,t))}var AwaitErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,s=null,i=0;if(!(n instanceof Promise))i=1,s=Promise.resolve(),Object.defineProperty(s,"_tracked",{get:()=>!0}),Object.defineProperty(s,"_data",{get:()=>n});else if(this.state.error){i=2;let a=this.state.error;s=Promise.reject().catch(()=>{}),Object.defineProperty(s,"_tracked",{get:()=>!0}),Object.defineProperty(s,"_error",{get:()=>a})}else n._tracked?(s=n,i="_error"in s?2:"_data"in s?1:0):(i=0,Object.defineProperty(n,"_tracked",{get:()=>!0}),s=n.then(a=>Object.defineProperty(n,"_data",{get:()=>a}),a=>{this.props.unstable_onError?.(a),Object.defineProperty(n,"_error",{get:()=>a})}));if(i===2&&!e)throw s._error;if(i===2)return reactExports.createElement(AwaitContext.Provider,{value:s,children:e});if(i===1)return reactExports.createElement(AwaitContext.Provider,{value:s,children:t});throw s}};function ResolveAwait({children:t}){let e=useAsyncValue(),n=typeof t=="function"?t(e):t;return reactExports.createElement(reactExports.Fragment,null,n)}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}function createSearchParams(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function getSearchParamsForLocation(t,e){let n=createSearchParams(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let n,s,i,a,o;if(isFormElement(t)){let l=t.getAttribute("action");s=l?stripBasename(l,e):null,n=t.getAttribute("method")||defaultMethod,i=getFormEncType(t.getAttribute("enctype"))||defaultEncType,a=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(s=u?stripBasename(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||defaultMethod,i=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(l.getAttribute("enctype"))||defaultEncType,a=new FormData(l,t),!isFormDataSubmitterSupported()){let{name:c,type:d,value:p}=t;if(d==="image"){let m=c?`${c}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else c&&a.append(c,p)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,s=null,i=defaultEncType,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:s,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&stripBasename(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,n){let s=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await loadRouteModule(a,n);return o.links?o.links():[]}return[]}));return dedupeLinkDescriptors(s.flat(1).filter(isHtmlLinkDescriptor).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,n,s,i,a){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,l=(u,c)=>n[c].pathname!==u.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,c)=>o(u,c)||l(u,c)):a==="data"?e.filter((u,c)=>{let d=s.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:n}={}){return dedupeHrefs(t.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function dedupeLinkDescriptors(t,e){let n=new Set;return new Set(e),t.reduce((s,i)=>{let a=JSON.stringify(sortKeys(i));return n.has(a)||(n.add(a),s.push({key:a,link:i})),s},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let n=reactExports.useContext(FrameworkContext),[s,i]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:p}=e,m=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=S=>{S.forEach(C=>{o(C.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[t]),reactExports.useEffect(()=>{if(s){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[s]);let g=()=>{i(!0)},E=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:composeEventHandlers$2(l,g),onBlur:composeEventHandlers$2(u,E),onMouseEnter:composeEventHandlers$2(c,g),onMouseLeave:composeEventHandlers$2(d,E),onTouchStart:composeEventHandlers$2(p,g)}]:[!1,m,{}]}function composeEventHandlers$2(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PrefetchPageLinks({page:t,...e}){let{router:n}=useDataRouterContext2(),s=reactExports.useMemo(()=>matchRoutes(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:s,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:n}=useFrameworkContext(),[s,i]=reactExports.useState([]);return reactExports.useEffect(()=>{let a=!1;return getKeyedPrefetchLinks(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),s}function PrefetchPageLinksImpl({page:t,matches:e,...n}){let s=useLocation(),{manifest:i,routeModules:a}=useFrameworkContext(),{basename:o}=useDataRouterContext2(),{loaderData:l,matches:u}=useDataRouterStateContext(),c=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,u,i,s,"data"),[t,e,u,i,s]),d=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,u,i,s,"assets"),[t,e,u,i,s]),p=reactExports.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let E=new Set,x=!1;if(e.forEach(S=>{let C=i.routes[S.route.id];!C||!C.hasLoader||(!c.some(T=>T.route.id===S.route.id)&&S.route.id in l&&a[S.route.id]?.shouldRevalidate||C.hasClientLoader?x=!0:E.add(S.route.id))}),E.size===0)return[];let b=singleFetchUrl(t,o,"data");return x&&E.size>0&&b.searchParams.set("_routes",e.filter(S=>E.has(S.route.id)).map(S=>S.route.id).join(",")),[b.pathname+b.search]},[o,l,s,i,c,e,t,a]),m=reactExports.useMemo(()=>getModuleLinkHrefs(d,i),[d,i]),g=useKeyedPrefetchLinks(d);return reactExports.createElement(reactExports.Fragment,null,p.map(E=>reactExports.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),m.map(E=>reactExports.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),g.map(({key:E,link:x})=>reactExports.createElement("link",{key:E,nonce:n.nonce,...x})))}function mergeRefs(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.9.3")}catch{}function createBrowserRouter(t,e){return createRouter({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:createBrowserHistory({window:e?.window}),hydrationData:parseHydrationData(),routes:t,mapRouteProperties,hydrationRouteProperties,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function parseHydrationData(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:deserializeErrors(t.errors)}),t}function deserializeErrors(t){if(!t)return null;let e=Object.entries(t),n={};for(let[s,i]of e)if(i&&i.__type==="RouteErrorResponse")n[s]=new ErrorResponseImpl(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let o=new a(i.message);o.stack="",n[s]=o}catch{}}if(n[s]==null){let a=new Error(i.message);a.stack="",n[s]=a}}else n[s]=i;return n}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:i,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:p,...m},g){let{basename:E}=reactExports.useContext(NavigationContext),x=typeof c=="string"&&ABSOLUTE_URL_REGEX2.test(c),b,S=!1;if(typeof c=="string"&&x&&(b=c,isBrowser$1))try{let F=new URL(window.location.href),H=c.startsWith("//")?new URL(F.protocol+c):new URL(c),Q=stripBasename(H.pathname,E);H.origin===F.origin&&Q!=null?c=Q+H.search+H.hash:S=!0}catch{warning(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=useHref(c,{relative:i}),[T,I,D]=usePrefetchBehavior(s,m),P=useLinkClickHandler(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:p});function O(F){e&&e(F),F.defaultPrevented||P(F)}let B=reactExports.createElement("a",{...m,...D,href:b||C,onClick:S||a?e:O,ref:mergeRefs(g,I),target:u,"data-discover":!x&&n==="render"?"true":void 0});return T&&!x?reactExports.createElement(reactExports.Fragment,null,B,reactExports.createElement(PrefetchPageLinks,{page:C})):B});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:l,children:u,...c},d){let p=useResolvedPath(o,{relative:c.relative}),m=useLocation(),g=reactExports.useContext(DataRouterStateContext),{navigator:E,basename:x}=reactExports.useContext(NavigationContext),b=g!=null&&useViewTransitionState(p)&&l===!0,S=E.encodeLocation?E.encodeLocation(p).pathname:p.pathname,C=m.pathname,T=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(C=C.toLowerCase(),T=T?T.toLowerCase():null,S=S.toLowerCase()),T&&x&&(T=stripBasename(T,x)||T);const I=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=C===S||!i&&C.startsWith(S)&&C.charAt(I)==="/",P=T!=null&&(T===S||!i&&T.startsWith(S)&&T.charAt(S.length)==="/"),O={isActive:D,isPending:P,isTransitioning:b},B=D?e:void 0,F;typeof s=="function"?F=s(O):F=[s,D?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let H=typeof a=="function"?a(O):a;return reactExports.createElement(Link,{...c,"aria-current":B,className:F,ref:d,style:H,to:o,viewTransition:l},typeof u=="function"?u(O):u)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:i,state:a,method:o=defaultMethod,action:l,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:p,...m},g)=>{let E=useSubmit(),x=useFormAction(l,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&ABSOLUTE_URL_REGEX2.test(l),C=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let I=T.nativeEvent.submitter,D=I?.getAttribute("formmethod")||o;E(I||T.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:a,relative:c,preventScrollReset:d,viewTransition:p})};return reactExports.createElement("form",{ref:g,method:b,action:x,onSubmit:s?u:C,...m,"data-discover":!S&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}={}){let l=useNavigate(),u=useLocation(),c=useResolvedPath(t,{relative:a});return reactExports.useCallback(d=>{if(shouldProcessLinkClick(d,e)){d.preventDefault();let p=n!==void 0?n:createPath$1(u)===createPath$1(c);l(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,c,n,s,e,t,i,a,o])}function useSearchParams(t){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=reactExports.useRef(createSearchParams(t)),n=reactExports.useRef(!1),s=useLocation(),i=reactExports.useMemo(()=>getSearchParamsForLocation(s.search,n.current?null:e.current),[s.search]),a=useNavigate(),o=reactExports.useCallback((l,u)=>{const c=createSearchParams(typeof l=="function"?l(new URLSearchParams(i)):l);n.current=!0,a("?"+c,u)},[a,i]);return[i,o]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(s,i={})=>{let{action:a,method:o,encType:l,formData:u,body:c}=getFormSubmissionInfo(s,e);if(i.navigate===!1){let d=i.fetcherKey||getUniqueFetcherId();await t.fetch(d,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function useFormAction(t,{relative:e}={}){let{basename:n}=reactExports.useContext(NavigationContext),s=reactExports.useContext(RouteContext);invariant$1(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...useResolvedPath(t||".",{relative:e})},o=useLocation();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let d=l.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:joinPaths([n,a.pathname])),createPath$1(a)}function useViewTransitionState(t,{relative:e}={}){let n=reactExports.useContext(ViewTransitionContext);invariant$1(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=useDataRouterContext3("useViewTransitionState"),i=useResolvedPath(t,{relative:e});if(!n.isTransitioning)return!1;let a=stripBasename(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=stripBasename(n.nextLocation.pathname,s)||n.nextLocation.pathname;return matchPath(i.pathname,o)!=null||matchPath(i.pathname,a)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports),DEBUG_BUILD$2=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,GLOBAL_OBJ=globalThis,SDK_VERSION="10.25.0";function getMainCarrier(){return getSentryCarrier(GLOBAL_OBJ),GLOBAL_OBJ}function getSentryCarrier(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||SDK_VERSION,e[SDK_VERSION]=e[SDK_VERSION]||{}}function getGlobalSingleton(t,e,n=GLOBAL_OBJ){const s=n.__SENTRY__=n.__SENTRY__||{},i=s[SDK_VERSION]=s[SDK_VERSION]||{};return i[t]||(i[t]=e())}const CONSOLE_LEVELS=["debug","info","warn","error","log","assert","trace"],PREFIX="Sentry Logger ",originalConsoleMethods={};function consoleSandbox(t){if(!("console"in GLOBAL_OBJ))return t();const e=GLOBAL_OBJ.console,n={},s=Object.keys(originalConsoleMethods);s.forEach(i=>{const a=originalConsoleMethods[i];n[i]=e[i],e[i]=a});try{return t()}finally{s.forEach(i=>{e[i]=n[i]})}}function enable(){_getLoggerSettings().enabled=!0}function disable(){_getLoggerSettings().enabled=!1}function isEnabled$1(){return _getLoggerSettings().enabled}function log$3(...t){_maybeLog("log",...t)}function warn$2(...t){_maybeLog("warn",...t)}function error$2(...t){_maybeLog("error",...t)}function _maybeLog(t,...e){DEBUG_BUILD$2&&isEnabled$1()&&consoleSandbox(()=>{GLOBAL_OBJ.console[t](`${PREFIX}[${t}]:`,...e)})}function _getLoggerSettings(){return DEBUG_BUILD$2?getGlobalSingleton("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const debug={enable,disable,isEnabled:isEnabled$1,log:log$3,warn:warn$2,error:error$2},STACKTRACE_FRAME_LIMIT=50,UNKNOWN_FUNCTION="?",WEBPACK_ERROR_REGEXP=/\(error: (.*)\)/,STRIP_FRAME_REGEXP=/captureMessage|captureException/;function createStackParser(...t){const e=t.sort((n,s)=>n[0]-s[0]).map(n=>n[1]);return(n,s=0,i=0)=>{const a=[],o=n.split(`
`);for(let l=s;l<o.length;l++){let u=o[l];u.length>1024&&(u=u.slice(0,1024));const c=WEBPACK_ERROR_REGEXP.test(u)?u.replace(WEBPACK_ERROR_REGEXP,"$1"):u;if(!c.match(/\S*Error: /)){for(const d of e){const p=d(c);if(p){a.push(p);break}}if(a.length>=STACKTRACE_FRAME_LIMIT+i)break}}return stripSentryFramesAndReverse(a.slice(i))}}function stackParserFromStackParserOptions(t){return Array.isArray(t)?createStackParser(...t):t}function stripSentryFramesAndReverse(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(getLastStackFrame(e).function||"")&&e.pop(),e.reverse(),STRIP_FRAME_REGEXP.test(getLastStackFrame(e).function||"")&&(e.pop(),STRIP_FRAME_REGEXP.test(getLastStackFrame(e).function||"")&&e.pop()),e.slice(0,STACKTRACE_FRAME_LIMIT).map(n=>({...n,filename:n.filename||getLastStackFrame(e).filename,function:n.function||UNKNOWN_FUNCTION}))}function getLastStackFrame(t){return t[t.length-1]||{}}const defaultFunctionName="<anonymous>";function getFunctionName(t){try{return!t||typeof t!="function"?defaultFunctionName:t.name||defaultFunctionName}catch{return defaultFunctionName}}function getFramesFromEvent(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(s=>{s.stacktrace.frames&&n.push(...s.stacktrace.frames)}),n}catch{return}}}const handlers={},instrumented={};function addHandler(t,e){handlers[t]=handlers[t]||[],handlers[t].push(e)}function maybeInstrument(t,e){if(!instrumented[t]){instrumented[t]=!0;try{e()}catch(n){DEBUG_BUILD$2&&debug.error(`Error while instrumenting ${t}`,n)}}}function triggerHandlers(t,e){const n=t&&handlers[t];if(n)for(const s of n)try{s(e)}catch(i){DEBUG_BUILD$2&&debug.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${getFunctionName(s)}
Error:`,i)}}let _oldOnErrorHandler=null;function addGlobalErrorInstrumentationHandler(t){const e="error";addHandler(e,t),maybeInstrument(e,instrumentError)}function instrumentError(){_oldOnErrorHandler=GLOBAL_OBJ.onerror,GLOBAL_OBJ.onerror=function(t,e,n,s,i){return triggerHandlers("error",{column:s,error:i,line:n,msg:t,url:e}),_oldOnErrorHandler?_oldOnErrorHandler.apply(this,arguments):!1},GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}let _oldOnUnhandledRejectionHandler=null;function addGlobalUnhandledRejectionInstrumentationHandler(t){const e="unhandledrejection";addHandler(e,t),maybeInstrument(e,instrumentUnhandledRejection)}function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=GLOBAL_OBJ.onunhandledrejection,GLOBAL_OBJ.onunhandledrejection=function(t){return triggerHandlers("unhandledrejection",t),_oldOnUnhandledRejectionHandler?_oldOnUnhandledRejectionHandler.apply(this,arguments):!0},GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const objectToString=Object.prototype.toString;function isError(t){switch(objectToString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return isInstanceOf(t,Error)}}function isBuiltin(t,e){return objectToString.call(t)===`[object ${e}]`}function isErrorEvent$1(t){return isBuiltin(t,"ErrorEvent")}function isDOMError(t){return isBuiltin(t,"DOMError")}function isDOMException(t){return isBuiltin(t,"DOMException")}function isString$3(t){return isBuiltin(t,"String")}function isParameterizedString(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function isPrimitive(t){return t===null||isParameterizedString(t)||typeof t!="object"&&typeof t!="function"}function isPlainObject$3(t){return isBuiltin(t,"Object")}function isEvent(t){return typeof Event<"u"&&isInstanceOf(t,Event)}function isElement$1(t){return typeof Element<"u"&&isInstanceOf(t,Element)}function isRegExp$1(t){return isBuiltin(t,"RegExp")}function isThenable$1(t){return!!(t?.then&&typeof t.then=="function")}function isSyntheticEvent(t){return isPlainObject$3(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function isInstanceOf(t,e){try{return t instanceof e}catch{return!1}}function isVueViewModel(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function isRequest$1(t){return typeof Request<"u"&&isInstanceOf(t,Request)}const WINDOW$3=GLOBAL_OBJ,DEFAULT_MAX_STRING_LENGTH=80;function htmlTreeAsString(t,e={}){if(!t)return"<unknown>";try{let n=t;const s=5,i=[];let a=0,o=0;const l=" > ",u=l.length;let c;const d=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||DEFAULT_MAX_STRING_LENGTH;for(;n&&a++<s&&(c=_htmlElementAsString(n,d),!(c==="html"||a>1&&o+i.length*u+c.length>=p));)i.push(c),o+=c.length,n=n.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function _htmlElementAsString(t,e){const n=t,s=[];if(!n?.tagName)return"";if(WINDOW$3.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}s.push(n.tagName.toLowerCase());const i=e?.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i?.length)i.forEach(o=>{s.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&s.push(`#${n.id}`);const o=n.className;if(o&&isString$3(o)){const l=o.split(/\s+/);for(const u of l)s.push(`.${u}`)}}const a=["aria-label","type","name","title","alt"];for(const o of a){const l=n.getAttribute(o);l&&s.push(`[${o}="${l}"]`)}return s.join("")}function getLocationHref(){try{return WINDOW$3.document.location.href}catch{return""}}function getComponentName(t){if(!WINDOW$3.HTMLElement)return null;let e=t;const n=5;for(let s=0;s<n;s++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function fill(t,e,n){if(!(e in t))return;const s=t[e];if(typeof s!="function")return;const i=n(s);typeof i=="function"&&markFunctionWrapped(i,s);try{t[e]=i}catch{DEBUG_BUILD$2&&debug.log(`Failed to replace method "${e}" in object`,t)}}function addNonEnumerableProperty(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{DEBUG_BUILD$2&&debug.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function markFunctionWrapped(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,addNonEnumerableProperty(t,"__sentry_original__",e)}catch{}}function getOriginalFunction(t){return t.__sentry_original__}function convertToPlainObject(t){if(isError(t))return{message:t.message,name:t.name,stack:t.stack,...getOwnProperties(t)};if(isEvent(t)){const e={type:t.type,target:serializeEventTarget(t.target),currentTarget:serializeEventTarget(t.currentTarget),...getOwnProperties(t)};return typeof CustomEvent<"u"&&isInstanceOf(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function serializeEventTarget(t){try{return isElement$1(t)?htmlTreeAsString(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function getOwnProperties(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function extractExceptionKeysForMessage(t){const e=Object.keys(convertToPlainObject(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}function truncate(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function safeJoin(t,e){if(!Array.isArray(t))return"";const n=[];for(let s=0;s<t.length;s++){const i=t[s];try{isVueViewModel(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function isMatchingPattern(t,e,n=!1){return isString$3(t)?isRegExp$1(e)?e.test(t):isString$3(e)?n?t===e:t.includes(e):!1:!1}function stringMatchesSomePattern(t,e=[],n=!1){return e.some(s=>isMatchingPattern(t,s,n))}function getCrypto(){const t=GLOBAL_OBJ;return t.crypto||t.msCrypto}let emptyUuid;function getRandomByte(){return Math.random()*16}function uuid4(t=getCrypto()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return emptyUuid||(emptyUuid="10000000100040008000"+1e11),emptyUuid.replace(/[018]/g,e=>(e^(getRandomByte()&15)>>e/4).toString(16))}function getFirstException(t){return t.exception?.values?.[0]}function getEventDescription(t){const{message:e,event_id:n}=t;if(e)return e;const s=getFirstException(t);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||n||"<unknown>":n||"<unknown>"}function addExceptionTypeValue(t,e,n){const s=t.exception=t.exception||{},i=s.values=s.values||[],a=i[0]=i[0]||{};a.value||(a.value=e||""),a.type||(a.type="Error")}function addExceptionMechanism(t,e){const n=getFirstException(t);if(!n)return;const s={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...s,...i,...e},e&&"data"in e){const a={...i?.data,...e.data};n.mechanism.data=a}}function checkOrSetAlreadyCaught(t){if(isAlreadyCaptured(t))return!0;try{addNonEnumerableProperty(t,"__sentry_captured__",!0)}catch{}return!1}function isAlreadyCaptured(t){try{return t.__sentry_captured__}catch{}}const ONE_SECOND_IN_MS=1e3;function dateTimestampInSeconds(){return Date.now()/ONE_SECOND_IN_MS}function createUnixTimestampInSecondsFunc(){const{performance:t}=GLOBAL_OBJ;if(!t?.now||!t.timeOrigin)return dateTimestampInSeconds;const e=t.timeOrigin;return()=>(e+t.now())/ONE_SECOND_IN_MS}let _cachedTimestampInSeconds;function timestampInSeconds(){return(_cachedTimestampInSeconds??(_cachedTimestampInSeconds=createUnixTimestampInSecondsFunc()))()}function makeSession(t){const e=timestampInSeconds(),n={sid:uuid4(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>sessionToJSON(n)};return t&&updateSession(n,t),n}function updateSession(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||timestampInSeconds(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:uuid4()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function closeSession(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),updateSession(t,n)}function sessionToJSON(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function merge$5(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const s={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=merge$5(s[i],e[i],n-1));return s}function generateTraceId(){return uuid4()}function generateSpanId(){return uuid4().substring(16)}const SCOPE_SPAN_FIELD="_sentrySpan";function _setSpanForScope(t,e){e?addNonEnumerableProperty(t,SCOPE_SPAN_FIELD,e):delete t[SCOPE_SPAN_FIELD]}function _getSpanForScope(t){return t[SCOPE_SPAN_FIELD]}const DEFAULT_MAX_BREADCRUMBS=100;class Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:generateTraceId(),sampleRand:Math.random()}}clone(){const e=new Scope;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,_setSpanForScope(e,_getSpanForScope(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,s=n instanceof Scope?n.getScopeData():isPlainObject$3(n)?e:void 0,{tags:i,extra:a,user:o,contexts:l,level:u,fingerprint:c=[],propagationContext:d}=s||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},o&&Object.keys(o).length&&(this._user=o),u&&(this._level=u),c.length&&(this._fingerprint=c),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,_setSpanForScope(this,void 0),this._attachments=[],this.setPropagationContext({traceId:generateTraceId(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const s=typeof n=="number"?n:DEFAULT_MAX_BREADCRUMBS;if(s<=0)return this;const i={timestamp:dateTimestampInSeconds(),...e,message:e.message?truncate(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_getSpanForScope(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=merge$5(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const s=n?.event_id||uuid4();if(!this._client)return DEBUG_BUILD$2&&debug.warn("No client configured on scope - will not capture exception!"),s;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:s},this),s}captureMessage(e,n,s){const i=s?.event_id||uuid4();if(!this._client)return DEBUG_BUILD$2&&debug.warn("No client configured on scope - will not capture message!"),i;const a=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:a,...s,event_id:i},this),i}captureEvent(e,n){const s=n?.event_id||uuid4();return this._client?(this._client.captureEvent(e,{...n,event_id:s},this),s):(DEBUG_BUILD$2&&debug.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function getDefaultCurrentScope(){return getGlobalSingleton("defaultCurrentScope",()=>new Scope)}function getDefaultIsolationScope(){return getGlobalSingleton("defaultIsolationScope",()=>new Scope)}class AsyncContextStack{constructor(e,n){let s;e?s=e:s=new Scope;let i;n?i=n:i=new Scope,this._stack=[{scope:s}],this._isolationScope=i}withScope(e){const n=this._pushScope();let s;try{s=e(n)}catch(i){throw this._popScope(),i}return isThenable$1(s)?s.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function getAsyncContextStack(){const t=getMainCarrier(),e=getSentryCarrier(t);return e.stack=e.stack||new AsyncContextStack(getDefaultCurrentScope(),getDefaultIsolationScope())}function withScope$1(t){return getAsyncContextStack().withScope(t)}function withSetScope(t,e){const n=getAsyncContextStack();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function withIsolationScope(t){return getAsyncContextStack().withScope(()=>t(getAsyncContextStack().getIsolationScope()))}function getStackAsyncContextStrategy(){return{withIsolationScope,withScope:withScope$1,withSetScope,withSetIsolationScope:(t,e)=>withIsolationScope(e),getCurrentScope:()=>getAsyncContextStack().getScope(),getIsolationScope:()=>getAsyncContextStack().getIsolationScope()}}function getAsyncContextStrategy(t){const e=getSentryCarrier(t);return e.acs?e.acs:getStackAsyncContextStrategy()}function getCurrentScope$1(){const t=getMainCarrier();return getAsyncContextStrategy(t).getCurrentScope()}function getIsolationScope(){const t=getMainCarrier();return getAsyncContextStrategy(t).getIsolationScope()}function getGlobalScope$1(){return getGlobalSingleton("globalScope",()=>new Scope)}function withScope(...t){const e=getMainCarrier(),n=getAsyncContextStrategy(e);if(t.length===2){const[s,i]=t;return s?n.withSetScope(s,i):n.withScope(i)}return n.withScope(t[0])}function getClient(){return getCurrentScope$1().getClient()}function getTraceContextFromScope(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:s,propagationSpanId:i}=e,a={trace_id:n,span_id:i||generateSpanId()};return s&&(a.parent_span_id=s),a}const SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source",SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",SEMANTIC_ATTRIBUTE_SENTRY_PREVIOUS_TRACE_SAMPLE_RATE="sentry.previous_trace_sample_rate",SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",SEMANTIC_ATTRIBUTE_PROFILE_ID="sentry.profile_id",SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME="sentry.exclusive_time",SPAN_STATUS_UNSET=0,SPAN_STATUS_OK=1,SCOPE_ON_START_SPAN_FIELD="_sentryScope",ISOLATION_SCOPE_ON_START_SPAN_FIELD="_sentryIsolationScope";function unwrapScopeFromWeakRef(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function getCapturedScopesOnSpan(t){const e=t;return{scope:e[SCOPE_ON_START_SPAN_FIELD],isolationScope:unwrapScopeFromWeakRef(e[ISOLATION_SCOPE_ON_START_SPAN_FIELD])}}const SENTRY_BAGGAGE_KEY_PREFIX="sentry-",SENTRY_BAGGAGE_KEY_PREFIX_REGEX=/^sentry-/;function baggageHeaderToDynamicSamplingContext(t){const e=parseBaggageHeader(t);if(!e)return;const n=Object.entries(e).reduce((s,[i,a])=>{if(i.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)){const o=i.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);s[o]=a}return s},{});if(Object.keys(n).length>0)return n}function parseBaggageHeader(t){if(!(!t||!isString$3(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const s=baggageHeaderToObject(n);return Object.entries(s).forEach(([i,a])=>{e[i]=a}),e},{}):baggageHeaderToObject(t)}function baggageHeaderToObject(t){return t.split(",").map(e=>{const n=e.indexOf("=");if(n===-1)return[];const s=e.slice(0,n),i=e.slice(n+1);return[s,i].map(a=>{try{return decodeURIComponent(a.trim())}catch{return}})}).reduce((e,[n,s])=>(n&&s&&(e[n]=s),e),{})}const ORG_ID_REGEX=/^o(\d+)\./,DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function isValidProtocol(t){return t==="http"||t==="https"}function dsnToString(t,e=!1){const{host:n,path:s,pass:i,port:a,projectId:o,protocol:l,publicKey:u}=t;return`${l}://${u}${e&&i?`:${i}`:""}@${n}${a?`:${a}`:""}/${s&&`${s}/`}${o}`}function dsnFromString(t){const e=DSN_REGEX.exec(t);if(!e){consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,s,i="",a="",o="",l=""]=e.slice(1);let u="",c=l;const d=c.split("/");if(d.length>1&&(u=d.slice(0,-1).join("/"),c=d.pop()),c){const p=c.match(/^\d+/);p&&(c=p[0])}return dsnFromComponents({host:a,pass:i,path:u,projectId:c,port:o,protocol:n,publicKey:s})}function dsnFromComponents(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function validateDsn(t){if(!DEBUG_BUILD$2)return!0;const{port:e,projectId:n,protocol:s}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(debug.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?isValidProtocol(s)?e&&isNaN(parseInt(e,10))?(debug.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(debug.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),!1):(debug.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function extractOrgIdFromDsnHost(t){return t.match(ORG_ID_REGEX)?.[1]}function extractOrgIdFromClient(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let s;return e.orgId?s=String(e.orgId):n&&(s=extractOrgIdFromDsnHost(n)),s}function makeDsn(t){const e=typeof t=="string"?dsnFromString(t):dsnFromComponents(t);if(!(!e||!validateDsn(e)))return e}function parseSampleRate(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const TRACE_FLAG_SAMPLED=1;let hasShownSpanDropWarning=!1;function spanToTraceContext(t){const{spanId:e,traceId:n,isRemote:s}=t.spanContext(),i=s?e:spanToJSON(t).parent_span_id,a=getCapturedScopesOnSpan(t).scope,o=s?a?.getPropagationContext().propagationSpanId||generateSpanId():e;return{parent_span_id:i,span_id:o,trace_id:n}}function convertSpanLinksForEnvelope(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:s,...i},attributes:a})=>({span_id:e,trace_id:n,sampled:s===TRACE_FLAG_SAMPLED,attributes:a,...i}))}function spanTimeInputToSeconds(t){return typeof t=="number"?ensureTimestampInSeconds(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?ensureTimestampInSeconds(t.getTime()):timestampInSeconds()}function ensureTimestampInSeconds(t){return t>9999999999?t/1e3:t}function spanToJSON(t){if(spanIsSentrySpan(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(spanIsOpenTelemetrySdkTraceBaseSpan(t)){const{attributes:s,startTime:i,name:a,endTime:o,status:l,links:u}=t,c="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:n,data:s,description:a,parent_span_id:c,start_timestamp:spanTimeInputToSeconds(i),timestamp:spanTimeInputToSeconds(o)||void 0,status:getStatusMessage(l),op:s[SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:s[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],links:convertSpanLinksForEnvelope(u)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function spanIsOpenTelemetrySdkTraceBaseSpan(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function spanIsSentrySpan(t){return typeof t.getSpanJSON=="function"}function spanIsSampled(t){const{traceFlags:e}=t.spanContext();return e===TRACE_FLAG_SAMPLED}function getStatusMessage(t){if(!(!t||t.code===SPAN_STATUS_UNSET))return t.code===SPAN_STATUS_OK?"ok":t.message||"internal_error"}const ROOT_SPAN_FIELD="_sentryRootSpan";function getRootSpan(t){return t[ROOT_SPAN_FIELD]||t}function showSpanDropWarning(){hasShownSpanDropWarning||(consoleSandbox(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),hasShownSpanDropWarning=!0)}function hasSpansEnabled(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=getClient()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function logIgnoredSpan(t){debug.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function shouldIgnoreSpan(t,e){if(!e?.length||!t.description)return!1;for(const n of e){if(isStringOrRegExp(n)){if(isMatchingPattern(t.description,n))return DEBUG_BUILD$2&&logIgnoredSpan(t),!0;continue}if(!n.name&&!n.op)continue;const s=n.name?isMatchingPattern(t.description,n.name):!0,i=n.op?t.op&&isMatchingPattern(t.op,n.op):!0;if(s&&i)return DEBUG_BUILD$2&&logIgnoredSpan(t),!0}return!1}function reparentChildSpans(t,e){const n=e.parent_span_id,s=e.span_id;if(n)for(const i of t)i.parent_span_id===s&&(i.parent_span_id=n)}function isStringOrRegExp(t){return typeof t=="string"||t instanceof RegExp}const DEFAULT_ENVIRONMENT="production",FROZEN_DSC_FIELD="_frozenDsc";function getDynamicSamplingContextFromClient(t,e){const n=e.getOptions(),{publicKey:s}=e.getDsn()||{},i={environment:n.environment||DEFAULT_ENVIRONMENT,release:n.release,public_key:s,trace_id:t,org_id:extractOrgIdFromClient(e)};return e.emit("createDsc",i),i}function getDynamicSamplingContextFromScope(t,e){const n=e.getPropagationContext();return n.dsc||getDynamicSamplingContextFromClient(n.traceId,t)}function getDynamicSamplingContextFromSpan(t){const e=getClient();if(!e)return{};const n=getRootSpan(t),s=spanToJSON(n),i=s.data,a=n.spanContext().traceState,o=a?.get("sentry.sample_rate")??i[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]??i[SEMANTIC_ATTRIBUTE_SENTRY_PREVIOUS_TRACE_SAMPLE_RATE];function l(E){return(typeof o=="number"||typeof o=="string")&&(E.sample_rate=`${o}`),E}const u=n[FROZEN_DSC_FIELD];if(u)return l(u);const c=a?.get("sentry.dsc"),d=c&&baggageHeaderToDynamicSamplingContext(c);if(d)return l(d);const p=getDynamicSamplingContextFromClient(t.spanContext().traceId,e),m=i[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],g=s.description;return m!=="url"&&g&&(p.transaction=g),hasSpansEnabled()&&(p.sampled=String(spanIsSampled(n)),p.sample_rand=a?.get("sentry.sample_rand")??getCapturedScopesOnSpan(n).scope?.getPropagationContext().sampleRand.toString()),l(p),e.emit("createDsc",p,n),p}function normalize(t,e=100,n=1/0){try{return visit("",t,e,n)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function normalizeToSize(t,e=3,n=100*1024){const s=normalize(t,e);return jsonSize(s)>n?normalizeToSize(t,e-1,n):s}function visit(t,e,n=1/0,s=1/0,i=memoBuilder()){const[a,o]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=stringifyValue(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(u===0)return l.replace("object ","");if(a(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const g=c.toJSON();return visit("",g,u-1,s,i)}catch{}const d=Array.isArray(e)?[]:{};let p=0;const m=convertToPlainObject(e);for(const g in m){if(!Object.prototype.hasOwnProperty.call(m,g))continue;if(p>=s){d[g]="[MaxProperties ~]";break}const E=m[g];d[g]=visit(g,E,u-1,s,i),p++}return o(e),d}function stringifyValue(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(isVueViewModel(e))return"[VueViewModel]";if(isSyntheticEvent(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${getFunctionName(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=getConstructorName(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function getConstructorName(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}function utf8Length(t){return~-encodeURI(t).split(/%..|./).length}function jsonSize(t){return utf8Length(JSON.stringify(t))}function memoBuilder(){const t=new WeakSet;function e(s){return t.has(s)?!0:(t.add(s),!1)}function n(s){t.delete(s)}return[e,n]}function createEnvelope(t,e=[]){return[t,e]}function addItemToEnvelope(t,e){const[n,s]=t;return[n,[...s,e]]}function forEachEnvelopeItem(t,e){const n=t[1];for(const s of n){const i=s[0].type;if(e(s,i))return!0}return!1}function encodeUTF8(t){const e=getSentryCarrier(GLOBAL_OBJ);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function serializeEnvelope(t){const[e,n]=t;let s=JSON.stringify(e);function i(a){typeof s=="string"?s=typeof a=="string"?s+a:[encodeUTF8(s),a]:s.push(typeof a=="string"?encodeUTF8(a):a)}for(const a of n){const[o,l]=a;if(i(`
${JSON.stringify(o)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(normalize(l))}i(u)}}return typeof s=="string"?s:concatBuffers(s)}function concatBuffers(t){const e=t.reduce((i,a)=>i+a.length,0),n=new Uint8Array(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return n}function createAttachmentEnvelopeItem(t){const e=typeof t.data=="string"?encodeUTF8(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const ITEM_TYPE_TO_DATA_CATEGORY_MAP={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function envelopeItemTypeToDataCategory(t){return ITEM_TYPE_TO_DATA_CATEGORY_MAP[t]}function getSdkMetadataForEnvelopeHeader(t){if(!t?.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function createEventEnvelopeHeaders(t,e,n,s){const i=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&s&&{dsn:dsnToString(s)},...i&&{trace:i}}}function _enhanceEventWithSdkInfo(t,e){if(!e)return t;const n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0},t}function createSessionEnvelope(t,e,n,s){const i=getSdkMetadataForEnvelopeHeader(n),a={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!s&&e&&{dsn:dsnToString(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return createEnvelope(a,[o])}function createEventEnvelope(t,e,n,s){const i=getSdkMetadataForEnvelopeHeader(n),a=t.type&&t.type!=="replay_event"?t.type:"event";_enhanceEventWithSdkInfo(t,n?.sdk);const o=createEventEnvelopeHeaders(t,i,s,e);return delete t.sdkProcessingMetadata,createEnvelope(o,[[{type:a},t]])}const STATE_PENDING=0,STATE_RESOLVED=1,STATE_REJECTED=2;function resolvedSyncPromise(t){return new SyncPromise(e=>{e(t)})}function rejectedSyncPromise(t){return new SyncPromise((e,n)=>{n(t)})}class SyncPromise{constructor(e){this._state=STATE_PENDING,this._handlers=[],this._runExecutor(e)}then(e,n){return new SyncPromise((s,i)=>{this._handlers.push([!1,a=>{if(!e)s(a);else try{s(e(a))}catch(o){i(o)}},a=>{if(!n)i(a);else try{s(n(a))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new SyncPromise((n,s)=>{let i,a;return this.then(o=>{a=!1,i=o,e&&e()},o=>{a=!0,i=o,e&&e()}).then(()=>{if(a){s(i);return}n(i)})})}_executeHandlers(){if(this._state===STATE_PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===STATE_RESOLVED&&n[1](this._value),this._state===STATE_REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(a,o)=>{if(this._state===STATE_PENDING){if(isThenable$1(o)){o.then(s,i);return}this._state=a,this._value=o,this._executeHandlers()}},s=a=>{n(STATE_RESOLVED,a)},i=a=>{n(STATE_REJECTED,a)};try{e(s,i)}catch(a){i(a)}}}function notifyEventProcessors(t,e,n,s=0){try{const i=_notifyEventProcessors(e,n,t,s);return isThenable$1(i)?i:resolvedSyncPromise(i)}catch(i){return rejectedSyncPromise(i)}}function _notifyEventProcessors(t,e,n,s){const i=n[s];if(!t||!i)return t;const a=i({...t},e);return DEBUG_BUILD$2&&a===null&&debug.log(`Event processor "${i.id||"?"}" dropped event`),isThenable$1(a)?a.then(o=>_notifyEventProcessors(o,e,n,s+1)):_notifyEventProcessors(a,e,n,s+1)}function applyScopeDataToEvent(t,e){const{fingerprint:n,span:s,breadcrumbs:i,sdkProcessingMetadata:a}=e;applyDataToEvent(t,e),s&&applySpanToEvent(t,s),applyFingerprintToEvent(t,n),applyBreadcrumbsToEvent(t,i),applySdkMetadataToEvent(t,a)}function mergeScopeData(t,e){const{extra:n,tags:s,user:i,contexts:a,level:o,sdkProcessingMetadata:l,breadcrumbs:u,fingerprint:c,eventProcessors:d,attachments:p,propagationContext:m,transactionName:g,span:E}=e;mergeAndOverwriteScopeData(t,"extra",n),mergeAndOverwriteScopeData(t,"tags",s),mergeAndOverwriteScopeData(t,"user",i),mergeAndOverwriteScopeData(t,"contexts",a),t.sdkProcessingMetadata=merge$5(t.sdkProcessingMetadata,l,2),o&&(t.level=o),g&&(t.transactionName=g),E&&(t.span=E),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),p.length&&(t.attachments=[...t.attachments,...p]),t.propagationContext={...t.propagationContext,...m}}function mergeAndOverwriteScopeData(t,e,n){t[e]=merge$5(t[e],n,1)}function applyDataToEvent(t,e){const{extra:n,tags:s,user:i,contexts:a,level:o,transactionName:l}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(s).length&&(t.tags={...s,...t.tags}),Object.keys(i).length&&(t.user={...i,...t.user}),Object.keys(a).length&&(t.contexts={...a,...t.contexts}),o&&(t.level=o),l&&t.type!=="transaction"&&(t.transaction=l)}function applyBreadcrumbsToEvent(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function applySdkMetadataToEvent(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function applySpanToEvent(t,e){t.contexts={trace:spanToTraceContext(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:getDynamicSamplingContextFromSpan(e),...t.sdkProcessingMetadata};const n=getRootSpan(e),s=spanToJSON(n).description;s&&!t.transaction&&t.type==="transaction"&&(t.transaction=s)}function applyFingerprintToEvent(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}let parsedStackResults,lastSentryKeysCount,lastNativeKeysCount,cachedFilenameDebugIds;function getFilenameToDebugIdMap(t){const e=GLOBAL_OBJ._sentryDebugIds,n=GLOBAL_OBJ._debugIds;if(!e&&!n)return{};const s=e?Object.keys(e):[],i=n?Object.keys(n):[];if(cachedFilenameDebugIds&&s.length===lastSentryKeysCount&&i.length===lastNativeKeysCount)return cachedFilenameDebugIds;lastSentryKeysCount=s.length,lastNativeKeysCount=i.length,cachedFilenameDebugIds={},parsedStackResults||(parsedStackResults={});const a=(o,l)=>{for(const u of o){const c=l[u],d=parsedStackResults?.[u];if(d&&cachedFilenameDebugIds&&c)cachedFilenameDebugIds[d[0]]=c,parsedStackResults&&(parsedStackResults[u]=[d[0],c]);else if(c){const p=t(u);for(let m=p.length-1;m>=0;m--){const E=p[m]?.filename;if(E&&cachedFilenameDebugIds&&parsedStackResults){cachedFilenameDebugIds[E]=c,parsedStackResults[u]=[E,c];break}}}}};return e&&a(s,e),n&&a(i,n),cachedFilenameDebugIds}function prepareEvent(t,e,n,s,i,a){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=t,u={...e,event_id:e.event_id||n.event_id||uuid4(),timestamp:e.timestamp||dateTimestampInSeconds()},c=n.integrations||t.integrations.map(b=>b.name);applyClientOptions(u,t),applyIntegrationsMetadata(u,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&applyDebugIds(u,t.stackParser);const d=getFinalScope(s,n.captureContext);n.mechanism&&addExceptionMechanism(u,n.mechanism);const p=i?i.getEventProcessors():[],m=getGlobalScope$1().getScopeData();if(a){const b=a.getScopeData();mergeScopeData(m,b)}if(d){const b=d.getScopeData();mergeScopeData(m,b)}const g=[...n.attachments||[],...m.attachments];g.length&&(n.attachments=g),applyScopeDataToEvent(u,m);const E=[...p,...m.eventProcessors];return notifyEventProcessors(E,u,n).then(b=>(b&&applyDebugMeta(b),typeof o=="number"&&o>0?normalizeEvent(b,o,l):b))}function applyClientOptions(t,e){const{environment:n,release:s,dist:i,maxValueLength:a}=e;t.environment=t.environment||n||DEFAULT_ENVIRONMENT,!t.release&&s&&(t.release=s),!t.dist&&i&&(t.dist=i);const o=t.request;o?.url&&(o.url=a?truncate(o.url,a):o.url)}function applyDebugIds(t,e){const n=getFilenameToDebugIdMap(e);t.exception?.values?.forEach(s=>{s.stacktrace?.frames?.forEach(i=>{i.filename&&(i.debug_id=n[i.filename])})})}function applyDebugMeta(t){const e={};if(t.exception?.values?.forEach(s=>{s.stacktrace?.frames?.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([s,i])=>{n.push({type:"sourcemap",code_file:s,debug_id:i})})}function applyIntegrationsMetadata(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function normalizeEvent(t,e,n){if(!t)return null;const s={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:normalize(i.data,e,n)}}))},...t.user&&{user:normalize(t.user,e,n)},...t.contexts&&{contexts:normalize(t.contexts,e,n)},...t.extra&&{extra:normalize(t.extra,e,n)}};return t.contexts?.trace&&s.contexts&&(s.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(s.contexts.trace.data=normalize(t.contexts.trace.data,e,n))),t.spans&&(s.spans=t.spans.map(i=>({...i,...i.data&&{data:normalize(i.data,e,n)}}))),t.contexts?.flags&&s.contexts&&(s.contexts.flags=normalize(t.contexts.flags,3,n)),s}function getFinalScope(t,e){if(!e)return t;const n=t?t.clone():new Scope;return n.update(e),n}function parseEventHintOrCaptureContext(t){}function captureException(t,e){return getCurrentScope$1().captureException(t,void 0)}function captureEvent(t,e){return getCurrentScope$1().captureEvent(t,e)}function setContext(t,e){getIsolationScope().setContext(t,e)}function setUser(t){getIsolationScope().setUser(t)}function startSession(t){const e=getIsolationScope(),n=getCurrentScope$1(),{userAgent:s}=GLOBAL_OBJ.navigator||{},i=makeSession({user:n.getUser()||e.getUser(),...s&&{userAgent:s},...t}),a=e.getSession();return a?.status==="ok"&&updateSession(a,{status:"exited"}),endSession(),e.setSession(i),i}function endSession(){const t=getIsolationScope(),n=getCurrentScope$1().getSession()||t.getSession();n&&closeSession(n),_sendSessionUpdate(),t.setSession()}function _sendSessionUpdate(){const t=getIsolationScope(),e=getClient(),n=t.getSession();n&&e&&e.captureSession(n)}function captureSession(t=!1){if(t){endSession();return}_sendSessionUpdate()}const SENTRY_API_VERSION="7";function getBaseApiEndpoint(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function _getIngestEndpoint(t){return`${getBaseApiEndpoint(t)}${t.projectId}/envelope/`}function _encodedAuth(t,e){const n={sentry_version:SENTRY_API_VERSION};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function getEnvelopeEndpointWithUrlEncodedAuth(t,e,n){return e||`${_getIngestEndpoint(t)}?${_encodedAuth(t,n)}`}const installedIntegrations=[];function filterDuplicates(t){const e={};return t.forEach(n=>{const{name:s}=n,i=e[s];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[s]=n)}),Object.values(e)}function getIntegrationsToSetup(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(i=>{i.isDefaultInstance=!0});let s;if(Array.isArray(n))s=[...e,...n];else if(typeof n=="function"){const i=n(e);s=Array.isArray(i)?i:[i]}else s=e;return filterDuplicates(s)}function setupIntegrations(t,e){const n={};return e.forEach(s=>{s&&setupIntegration(t,s,n)}),n}function afterSetupIntegrations(t,e){for(const n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function setupIntegration(t,e,n){if(n[e.name]){DEBUG_BUILD$2&&debug.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,installedIntegrations.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),installedIntegrations.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const s=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,a)=>s(i,a,t))}if(typeof e.processEvent=="function"){const s=e.processEvent.bind(e),i=Object.assign((a,o)=>s(a,o,t),{id:e.name});t.addEventProcessor(i)}DEBUG_BUILD$2&&debug.log(`Integration installed: ${e.name}`)}function defineIntegration(t){return t}function createLogContainerEnvelopeItem(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function createLogEnvelope(t,e,n,s){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&s&&(i.dsn=dsnToString(s)),createEnvelope(i,[createLogContainerEnvelopeItem(t)])}function _INTERNAL_flushLogsBuffer(t,e){const n=e??_INTERNAL_getLogBuffer(t)??[];if(n.length===0)return;const s=t.getOptions(),i=createLogEnvelope(n,s._metadata,s.tunnel,t.getDsn());_getBufferMap$1().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function _INTERNAL_getLogBuffer(t){return _getBufferMap$1().get(t)}function _getBufferMap$1(){return getGlobalSingleton("clientToLogBufferMap",()=>new WeakMap)}function createMetricContainerEnvelopeItem(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function createMetricEnvelope(t,e,n,s){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&s&&(i.dsn=dsnToString(s)),createEnvelope(i,[createMetricContainerEnvelopeItem(t)])}function _INTERNAL_flushMetricsBuffer(t,e){const n=e??_INTERNAL_getMetricBuffer(t)??[];if(n.length===0)return;const s=t.getOptions(),i=createMetricEnvelope(n,s._metadata,s.tunnel,t.getDsn());_getBufferMap().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(i)}function _INTERNAL_getMetricBuffer(t){return _getBufferMap().get(t)}function _getBufferMap(){return getGlobalSingleton("clientToMetricBufferMap",()=>new WeakMap)}function createClientReportEnvelope(t,e,n){const s=[{type:"client_report"},{timestamp:dateTimestampInSeconds(),discarded_events:t}];return createEnvelope(e?{dsn:e}:{},[s])}function getPossibleEventMessages(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function convertTransactionEventToSpanJson(t){const{trace_id:e,parent_span_id:n,span_id:s,status:i,origin:a,data:o,op:l}=t.contexts?.trace??{};return{data:o??{},description:t.transaction,op:l,parent_span_id:n,span_id:s??"",start_timestamp:t.start_timestamp??0,status:i,timestamp:t.timestamp,trace_id:e??"",origin:a,profile_id:o?.[SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:o?.[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:t.measurements,is_segment:!0}}function convertSpanJsonToTransactionEvent(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[SEMANTIC_ATTRIBUTE_PROFILE_ID]:t.profile_id},...t.exclusive_time&&{[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.exclusive_time}}}},measurements:t.measurements}}const ALREADY_SEEN_ERROR="Not capturing exception because it's already been captured.",MISSING_RELEASE_FOR_SESSION_ERROR="Discarded session because of missing or non-string release",INTERNAL_ERROR_SYMBOL=Symbol.for("SentryInternalError"),DO_NOT_SEND_EVENT_SYMBOL=Symbol.for("SentryDoNotSendEventError"),DEFAULT_FLUSH_INTERVAL=5e3;function _makeInternalError(t){return{message:t,[INTERNAL_ERROR_SYMBOL]:!0}}function _makeDoNotSendEventError(t){return{message:t,[DO_NOT_SEND_EVENT_SYMBOL]:!0}}function _isInternalError(t){return!!t&&typeof t=="object"&&INTERNAL_ERROR_SYMBOL in t}function _isDoNotSendEventError(t){return!!t&&typeof t=="object"&&DO_NOT_SEND_EVENT_SYMBOL in t}function setupWeightBasedFlushing(t,e,n,s,i){let a=0,o;t.on(n,()=>{a=0,clearTimeout(o)}),t.on(e,l=>{a+=s(l),a>=8e5?i(t):(clearTimeout(o),o=setTimeout(()=>{i(t)},DEFAULT_FLUSH_INTERVAL))}),t.on("flush",()=>{i(t)})}class Client{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=makeDsn(e.dsn):DEBUG_BUILD$2&&debug.warn("No DSN provided, client will not send events."),this._dsn){const s=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:s})}this._options.enableLogs&&setupWeightBasedFlushing(this,"afterCaptureLog","flushLogs",estimateLogSizeInBytes,_INTERNAL_flushLogsBuffer),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&setupWeightBasedFlushing(this,"afterCaptureMetric","flushMetrics",estimateMetricSizeInBytes,_INTERNAL_flushMetricsBuffer)}captureException(e,n,s){const i=uuid4();if(checkOrSetAlreadyCaught(e))return DEBUG_BUILD$2&&debug.log(ALREADY_SEEN_ERROR),i;const a={event_id:i,...n};return this._process(this.eventFromException(e,a).then(o=>this._captureEvent(o,a,s))),a.event_id}captureMessage(e,n,s,i){const a={event_id:uuid4(),...s},o=isParameterizedString(e)?e:String(e),l=isPrimitive(e)?this.eventFromMessage(o,n,a):this.eventFromException(e,a);return this._process(l.then(u=>this._captureEvent(u,a,i))),a.event_id}captureEvent(e,n,s){const i=uuid4();if(n?.originalException&&checkOrSetAlreadyCaught(n.originalException))return DEBUG_BUILD$2&&debug.log(ALREADY_SEEN_ERROR),i;const a={event_id:i,...n},o=e.sdkProcessingMetadata||{},l=o.capturedSpanScope,u=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,a,l||s,u)),a.event_id}captureSession(e){this.sendSession(e),updateSession(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const n=this._transport;if(!n)return!0;this.emit("flush");const s=await this._isClientDoneProcessing(e),i=await n.flush(e);return s&&i}async close(e){const n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];setupIntegration(this,e,this._integrations),n||afterSetupIntegrations(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let s=createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])s=addItemToEnvelope(s,createAttachmentEnvelopeItem(i));this.sendEnvelope(s).then(i=>this.emit("afterSendEvent",e,i))}sendSession(e){const{release:n,environment:s=DEFAULT_ENVIRONMENT}=this._options;if("aggregates"in e){const a=e.attrs||{};if(!a.release&&!n){DEBUG_BUILD$2&&debug.warn(MISSING_RELEASE_FOR_SESSION_ERROR);return}a.release=a.release||n,a.environment=a.environment||s,e.attrs=a}else{if(!e.release&&!n){DEBUG_BUILD$2&&debug.warn(MISSING_RELEASE_FOR_SESSION_ERROR);return}e.release=e.release||n,e.environment=e.environment||s}this.emit("beforeSendSession",e);const i=createSessionEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(e,n,s=1){if(this._options.sendClientReports){const i=`${e}:${n}`;DEBUG_BUILD$2&&debug.log(`Recording outcome: "${i}"${s>1?` (${s} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+s}}on(e,n){const s=this._hooks[e]=this._hooks[e]||new Set,i=(...a)=>n(...a);return s.add(i),()=>{s.delete(i)}}emit(e,...n){const s=this._hooks[e];s&&s.forEach(i=>i(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return DEBUG_BUILD$2&&debug.error("Error while sending envelope:",n),{}}return DEBUG_BUILD$2&&debug.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=setupIntegrations(this,e),afterSetupIntegrations(this,e)}_updateSessionFromEvent(e,n){let s=n.level==="fatal",i=!1;const a=n.exception?.values;if(a){i=!0,s=!1;for(const u of a)if(u.mechanism?.handled===!1){s=!0;break}}const o=e.status==="ok";(o&&e.errors===0||o&&s)&&(updateSession(e,{...s&&{status:"crashed"},errors:e.errors||Number(i||s)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise(s=>setTimeout(s,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,s,i){const a=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),prepareEvent(a,e,n,s,this,i).then(l=>{if(l===null)return l;this.emit("postprocessEvent",l,n),l.contexts={trace:getTraceContextFromScope(s),...l.contexts};const u=getDynamicSamplingContextFromScope(this,s);return l.sdkProcessingMetadata={dynamicSamplingContext:u,...l.sdkProcessingMetadata},l})}_captureEvent(e,n={},s=getCurrentScope$1(),i=getIsolationScope()){return DEBUG_BUILD$2&&isErrorEvent(e)&&debug.log(`Captured error event \`${getPossibleEventMessages(e)[0]||"<unknown>"}\``),this._processEvent(e,n,s,i).then(a=>a.event_id,a=>{DEBUG_BUILD$2&&(_isDoNotSendEventError(a)?debug.log(a.message):_isInternalError(a)?debug.warn(a.message):debug.warn(a))})}_processEvent(e,n,s,i){const a=this.getOptions(),{sampleRate:o}=a,l=isTransactionEvent(e),u=isErrorEvent(e),c=e.type||"error",d=`before send for type \`${c}\``,p=typeof o>"u"?void 0:parseSampleRate(o);if(u&&typeof p=="number"&&Math.random()>p)return this.recordDroppedEvent("sample_rate","error"),rejectedSyncPromise(_makeDoNotSendEventError(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const m=c==="replay_event"?"replay":c;return this._prepareEvent(e,n,s,i).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",m),_makeDoNotSendEventError("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return g;const x=processBeforeSend(this,a,g,n);return _validateBeforeSendResult(x,d)}).then(g=>{if(g===null){if(this.recordDroppedEvent("before_send",m),l){const S=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw _makeDoNotSendEventError(`${d} returned \`null\`, will not send event.`)}const E=s.getSession()||i.getSession();if(u&&E&&this._updateSessionFromEvent(E,g),l){const b=g.sdkProcessingMetadata?.spanCountBeforeProcessing||0,S=g.spans?g.spans.length:0,C=b-S;C>0&&this.recordDroppedEvent("before_send","span",C)}const x=g.transaction_info;if(l&&x&&g.transaction!==e.transaction){const b="custom";g.transaction_info={...x,source:b}}return this.sendEvent(g,n),g}).then(null,g=>{throw _isDoNotSendEventError(g)||_isInternalError(g)?g:(this.captureException(g,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:g}),_makeInternalError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,s])=>{const[i,a]=n.split(":");return{reason:i,category:a,quantity:s}})}_flushOutcomes(){DEBUG_BUILD$2&&debug.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){DEBUG_BUILD$2&&debug.log("No outcomes to send");return}if(!this._dsn){DEBUG_BUILD$2&&debug.log("No dsn provided, will not send outcomes");return}DEBUG_BUILD$2&&debug.log("Sending outcomes:",e);const n=createClientReportEnvelope(e,this._options.tunnel&&dsnToString(this._dsn));this.sendEnvelope(n)}}function _validateBeforeSendResult(t,e){const n=`${e} must return \`null\` or a valid event.`;if(isThenable$1(t))return t.then(s=>{if(!isPlainObject$3(s)&&s!==null)throw _makeInternalError(n);return s},s=>{throw _makeInternalError(`${e} rejected with ${s}`)});if(!isPlainObject$3(t)&&t!==null)throw _makeInternalError(n);return t}function processBeforeSend(t,e,n,s){const{beforeSend:i,beforeSendTransaction:a,beforeSendSpan:o,ignoreSpans:l}=e;let u=n;if(isErrorEvent(u)&&i)return i(u,s);if(isTransactionEvent(u)){if(o||l){const c=convertTransactionEventToSpanJson(u);if(l?.length&&shouldIgnoreSpan(c,l))return null;if(o){const d=o(c);d?u=merge$5(n,convertSpanJsonToTransactionEvent(d)):showSpanDropWarning()}if(u.spans){const d=[],p=u.spans;for(const g of p){if(l?.length&&shouldIgnoreSpan(g,l)){reparentChildSpans(p,g);continue}if(o){const E=o(g);E?d.push(E):(showSpanDropWarning(),d.push(g))}else d.push(g)}const m=u.spans.length-d.length;m&&t.recordDroppedEvent("before_send","span",m),u.spans=d}}if(a){if(u.spans){const c=u.spans.length;u.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return a(u,s)}}return u}function isErrorEvent(t){return t.type===void 0}function isTransactionEvent(t){return t.type==="transaction"}function estimateMetricSizeInBytes(t){let e=0;return t.name&&(e+=t.name.length*2),e+=8,e+estimateAttributesSizeInBytes(t.attributes)}function estimateLogSizeInBytes(t){let e=0;return t.message&&(e+=t.message.length*2),e+estimateAttributesSizeInBytes(t.attributes)}function estimateAttributesSizeInBytes(t){if(!t)return 0;let e=0;return Object.values(t).forEach(n=>{Array.isArray(n)?e+=n.length*estimatePrimitiveSizeInBytes(n[0]):isPrimitive(n)?e+=estimatePrimitiveSizeInBytes(n):e+=100}),e}function estimatePrimitiveSizeInBytes(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function initAndBind(t,e){e.debug===!0&&(DEBUG_BUILD$2?debug.enable():consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),getCurrentScope$1().update(e.initialScope);const s=new t(e);return setCurrentClient(s),s.init(),s}function setCurrentClient(t){getCurrentScope$1().setClient(t)}const SENTRY_BUFFER_FULL_ERROR=Symbol.for("SentryBufferFullError");function makePromiseBuffer(t=100){const e=new Set;function n(){return e.size<t}function s(o){e.delete(o)}function i(o){if(!n())return rejectedSyncPromise(SENTRY_BUFFER_FULL_ERROR);const l=o();return e.add(l),l.then(()=>s(l),()=>s(l)),l}function a(o){if(!e.size)return resolvedSyncPromise(!0);const l=Promise.allSettled(Array.from(e)).then(()=>!0);if(!o)return l;const u=[l,new Promise(c=>setTimeout(()=>c(!1),o))];return Promise.race(u)}return{get $(){return Array.from(e)},add:i,drain:a}}const DEFAULT_RETRY_AFTER=60*1e3;function parseRetryAfterHeader(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const s=Date.parse(`${t}`);return isNaN(s)?DEFAULT_RETRY_AFTER:s-e}function disabledUntil(t,e){return t[e]||t.all||0}function isRateLimited(t,e,n=Date.now()){return disabledUntil(t,e)>n}function updateRateLimits(t,{statusCode:e,headers:n},s=Date.now()){const i={...t},a=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(a)for(const l of a.trim().split(",")){const[u,c,,,d]=l.split(":",5),p=parseInt(u,10),m=(isNaN(p)?60:p)*1e3;if(!c)i.all=s+m;else for(const g of c.split(";"))g==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(i[g]=s+m):i[g]=s+m}else o?i.all=s+parseRetryAfterHeader(o,s):e===429&&(i.all=s+60*1e3);return i}const DEFAULT_TRANSPORT_BUFFER_SIZE=64;function createTransport(t,e,n=makePromiseBuffer(t.bufferSize||DEFAULT_TRANSPORT_BUFFER_SIZE)){let s={};const i=o=>n.drain(o);function a(o){const l=[];if(forEachEnvelopeItem(o,(p,m)=>{const g=envelopeItemTypeToDataCategory(m);isRateLimited(s,g)?t.recordDroppedEvent("ratelimit_backoff",g):l.push(p)}),l.length===0)return Promise.resolve({});const u=createEnvelope(o[0],l),c=p=>{forEachEnvelopeItem(u,(m,g)=>{t.recordDroppedEvent(p,envelopeItemTypeToDataCategory(g))})},d=()=>e({body:serializeEnvelope(u)}).then(p=>(p.statusCode!==void 0&&(p.statusCode<200||p.statusCode>=300)&&DEBUG_BUILD$2&&debug.warn(`Sentry responded with status code ${p.statusCode} to sent event.`),s=updateRateLimits(s,p),p),p=>{throw c("network_error"),DEBUG_BUILD$2&&debug.error("Encountered error running transport request:",p),p});return n.add(d).then(p=>p,p=>{if(p===SENTRY_BUFFER_FULL_ERROR)return DEBUG_BUILD$2&&debug.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw p})}return{send:a,flush:i}}function parseUrl$1(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",s=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:s,relative:e[5]+n+s}}function addAutoIpAddressToSession(t){"aggregates"in t?t.attrs?.ip_address===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function applySdkMetadata(t,e,n=[e],s="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(a=>({name:`${s}:@sentry/${a}`,version:SDK_VERSION})),version:SDK_VERSION}),t._metadata=i}const DEFAULT_BREADCRUMBS=100;function addBreadcrumb(t,e){const n=getClient(),s=getIsolationScope();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:a=DEFAULT_BREADCRUMBS}=n.getOptions();if(a<=0)return;const l={timestamp:dateTimestampInSeconds(),...t},u=i?consoleSandbox(()=>i(l,e)):l;u!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),s.addBreadcrumb(u,a))}let originalFunctionToString;const INTEGRATION_NAME$6="FunctionToString",SETUP_CLIENTS=new WeakMap,_functionToStringIntegration=()=>({name:INTEGRATION_NAME$6,setupOnce(){originalFunctionToString=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=getOriginalFunction(this),n=SETUP_CLIENTS.has(getClient())&&e!==void 0?e:this;return originalFunctionToString.apply(n,t)}}catch{}},setup(t){SETUP_CLIENTS.set(t,!0)}}),functionToStringIntegration=_functionToStringIntegration,DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],INTEGRATION_NAME$5="EventFilters",eventFiltersIntegration=(t={})=>{let e;return{name:INTEGRATION_NAME$5,setup(n){const s=n.getOptions();e=_mergeOptions(t,s)},processEvent(n,s,i){if(!e){const a=i.getOptions();e=_mergeOptions(t,a)}return _shouldDropEvent$1(n,e)?null:n}}},inboundFiltersIntegration=(t={})=>({...eventFiltersIntegration(t),name:"InboundFilters"});function _mergeOptions(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:DEFAULT_IGNORE_ERRORS],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function _shouldDropEvent$1(t,e){if(t.type){if(t.type==="transaction"&&_isIgnoredTransaction(t,e.ignoreTransactions))return DEBUG_BUILD$2&&debug.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${getEventDescription(t)}`),!0}else{if(_isIgnoredError(t,e.ignoreErrors))return DEBUG_BUILD$2&&debug.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${getEventDescription(t)}`),!0;if(_isUselessError(t))return DEBUG_BUILD$2&&debug.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${getEventDescription(t)}`),!0;if(_isDeniedUrl(t,e.denyUrls))return DEBUG_BUILD$2&&debug.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${getEventDescription(t)}.
Url: ${_getEventFilterUrl(t)}`),!0;if(!_isAllowedUrl(t,e.allowUrls))return DEBUG_BUILD$2&&debug.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${getEventDescription(t)}.
Url: ${_getEventFilterUrl(t)}`),!0}return!1}function _isIgnoredError(t,e){return e?.length?getPossibleEventMessages(t).some(n=>stringMatchesSomePattern(n,e)):!1}function _isIgnoredTransaction(t,e){if(!e?.length)return!1;const n=t.transaction;return n?stringMatchesSomePattern(n,e):!1}function _isDeniedUrl(t,e){if(!e?.length)return!1;const n=_getEventFilterUrl(t);return n?stringMatchesSomePattern(n,e):!1}function _isAllowedUrl(t,e){if(!e?.length)return!0;const n=_getEventFilterUrl(t);return n?stringMatchesSomePattern(n,e):!0}function _getLastValidUrl(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function _getEventFilterUrl(t){try{const n=[...t.exception?.values??[]].reverse().find(s=>s.mechanism?.parent_id===void 0&&s.stacktrace?.frames?.length)?.stacktrace?.frames;return n?_getLastValidUrl(n):null}catch{return DEBUG_BUILD$2&&debug.error(`Cannot extract url for event ${getEventDescription(t)}`),null}}function _isUselessError(t){return t.exception?.values?.length?!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value):!1}function applyAggregateErrorsToEvent(t,e,n,s,i,a){if(!i.exception?.values||!a||!isInstanceOf(a.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=aggregateExceptionsFromError(t,e,s,a.originalException,n,i.exception.values,o,0))}function aggregateExceptionsFromError(t,e,n,s,i,a,o,l){if(a.length>=n+1)return a;let u=[...a];if(isInstanceOf(s[i],Error)){applyExceptionGroupFieldsForParentException(o,l);const c=t(e,s[i]),d=u.length;applyExceptionGroupFieldsForChildException(c,i,d,l),u=aggregateExceptionsFromError(t,e,n,s[i],i,[c,...u],c,d)}return Array.isArray(s.errors)&&s.errors.forEach((c,d)=>{if(isInstanceOf(c,Error)){applyExceptionGroupFieldsForParentException(o,l);const p=t(e,c),m=u.length;applyExceptionGroupFieldsForChildException(p,`errors[${d}]`,m,l),u=aggregateExceptionsFromError(t,e,n,c,i,[p,...u],p,m)}}),u}function applyExceptionGroupFieldsForParentException(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function applyExceptionGroupFieldsForChildException(t,e,n,s){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:s}}function addConsoleInstrumentationHandler(t){const e="console";addHandler(e,t),maybeInstrument(e,instrumentConsole)}function instrumentConsole(){"console"in GLOBAL_OBJ&&CONSOLE_LEVELS.forEach(function(t){t in GLOBAL_OBJ.console&&fill(GLOBAL_OBJ.console,t,function(e){return originalConsoleMethods[t]=e,function(...n){triggerHandlers("console",{args:n,level:t}),originalConsoleMethods[t]?.apply(GLOBAL_OBJ.console,n)}})})}function severityLevelFromString(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const INTEGRATION_NAME$4="Dedupe",_dedupeIntegration=()=>{let t;return{name:INTEGRATION_NAME$4,processEvent(e){if(e.type)return e;try{if(_shouldDropEvent(e,t))return DEBUG_BUILD$2&&debug.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},dedupeIntegration=_dedupeIntegration;function _shouldDropEvent(t,e){return e?!!(_isSameMessageEvent(t,e)||_isSameExceptionEvent(t,e)):!1}function _isSameMessageEvent(t,e){const n=t.message,s=e.message;return!(!n&&!s||n&&!s||!n&&s||n!==s||!_isSameFingerprint(t,e)||!_isSameStacktrace(t,e))}function _isSameExceptionEvent(t,e){const n=_getExceptionFromEvent(e),s=_getExceptionFromEvent(t);return!(!n||!s||n.type!==s.type||n.value!==s.value||!_isSameFingerprint(t,e)||!_isSameStacktrace(t,e))}function _isSameStacktrace(t,e){let n=getFramesFromEvent(t),s=getFramesFromEvent(e);if(!n&&!s)return!0;if(n&&!s||!n&&s||(n=n,s=s,s.length!==n.length))return!1;for(let i=0;i<s.length;i++){const a=s[i],o=n[i];if(a.filename!==o.filename||a.lineno!==o.lineno||a.colno!==o.colno||a.function!==o.function)return!1}return!0}function _isSameFingerprint(t,e){let n=t.fingerprint,s=e.fingerprint;if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;n=n,s=s;try{return n.join("")===s.join("")}catch{return!1}}function _getExceptionFromEvent(t){return t.exception?.values?.[0]}function getBreadcrumbLogLevelFromHttpStatusCode(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const WINDOW$2=GLOBAL_OBJ;function supportsHistory(){return"history"in WINDOW$2&&!!WINDOW$2.history}function _isFetchSupported(){if(!("fetch"in WINDOW$2))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function isNativeFunction(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function supportsNativeFetch(){if(typeof EdgeRuntime=="string")return!0;if(!_isFetchSupported())return!1;if(isNativeFunction(WINDOW$2.fetch))return!0;let t=!1;const e=WINDOW$2.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow?.fetch&&(t=isNativeFunction(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){DEBUG_BUILD$2&&debug.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function addFetchInstrumentationHandler(t,e){const n="fetch";addHandler(n,t),maybeInstrument(n,()=>instrumentFetch(void 0,e))}function instrumentFetch(t,e=!1){e&&!supportsNativeFetch()||fill(GLOBAL_OBJ,"fetch",function(n){return function(...s){const i=new Error,{method:a,url:o}=parseFetchArgs(s),l={args:s,fetchData:{method:a,url:o},startTimestamp:timestampInSeconds()*1e3,virtualError:i,headers:getHeadersFromFetchArgs(s)};return triggerHandlers("fetch",{...l}),n.apply(GLOBAL_OBJ,s).then(async u=>(triggerHandlers("fetch",{...l,endTimestamp:timestampInSeconds()*1e3,response:u}),u),u=>{if(triggerHandlers("fetch",{...l,endTimestamp:timestampInSeconds()*1e3,error:u}),isError(u)&&u.stack===void 0&&(u.stack=i.stack,addNonEnumerableProperty(u,"framesToPop",1)),u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const c=new URL(l.fetchData.url);u.message=`${u.message} (${c.host})`}catch{}throw u})}})}function hasProp(t,e){return!!t&&typeof t=="object"&&!!t[e]}function getUrlFromResource(t){return typeof t=="string"?t:t?hasProp(t,"url")?t.url:t.toString?t.toString():"":""}function parseFetchArgs(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,s]=t;return{url:getUrlFromResource(n),method:hasProp(s,"method")?String(s.method).toUpperCase():"GET"}}const e=t[0];return{url:getUrlFromResource(e),method:hasProp(e,"method")?String(e.method).toUpperCase():"GET"}}function getHeadersFromFetchArgs(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(isRequest$1(e))return new Headers(e.headers)}catch{}}function getSDKSource(){return"npm"}const WINDOW$1=GLOBAL_OBJ;let ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function ignoreNextOnError(){ignoreOnError++,setTimeout(()=>{ignoreOnError--})}function wrap(t,e={}){function n(i){return typeof i=="function"}if(!n(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(getOriginalFunction(t))return t}catch{return t}const s=function(...i){try{const a=i.map(o=>wrap(o,e));return t.apply(this,a)}catch(a){throw ignoreNextOnError(),withScope(o=>{o.addEventProcessor(l=>(e.mechanism&&(addExceptionTypeValue(l,void 0),addExceptionMechanism(l,e.mechanism)),l.extra={...l.extra,arguments:i},l)),captureException(a)}),a}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}catch{}markFunctionWrapped(s,t),addNonEnumerableProperty(t,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get(){return t.name}})}catch{}return s}function getHttpRequestData(){const t=getLocationHref(),{referrer:e}=WINDOW$1.document||{},{userAgent:n}=WINDOW$1.navigator||{},s={...e&&{Referer:e},...n&&{"User-Agent":n}};return{url:t,headers:s}}function exceptionFromError(t,e){const n=parseStackFrames(t,e),s={type:extractType(e),value:extractMessage(e)};return n.length&&(s.stacktrace={frames:n}),s.type===void 0&&s.value===""&&(s.value="Unrecoverable error caught"),s}function eventFromPlainObject(t,e,n,s){const a=getClient()?.getOptions().normalizeDepth,o=getErrorPropertyFromObject(e),l={__serialized__:normalizeToSize(e,a)};if(o)return{exception:{values:[exceptionFromError(t,o)]},extra:l};const u={exception:{values:[{type:isEvent(e)?e.constructor.name:s?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(e,{isUnhandledRejection:s})}]},extra:l};if(n){const c=parseStackFrames(t,n);c.length&&(u.exception.values[0].stacktrace={frames:c})}return u}function eventFromError(t,e){return{exception:{values:[exceptionFromError(t,e)]}}}function parseStackFrames(t,e){const n=e.stacktrace||e.stack||"",s=getSkipFirstStackStringLines(e),i=getPopFirstTopFrames(e);try{return t(n,s,i)}catch{}return[]}const reactMinifiedRegexp=/Minified React error #\d+;/i;function getSkipFirstStackStringLines(t){return t&&reactMinifiedRegexp.test(t.message)?1:0}function getPopFirstTopFrames(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function isWebAssemblyException(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function extractType(t){const e=t?.name;return!e&&isWebAssemblyException(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function extractMessage(t){const e=t?.message;return isWebAssemblyException(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function eventFromException(t,e,n,s){const i=n?.syntheticException||void 0,a=eventFromUnknownInput(t,e,i,s);return addExceptionMechanism(a),a.level="error",n?.event_id&&(a.event_id=n.event_id),resolvedSyncPromise(a)}function eventFromMessage(t,e,n="info",s,i){const a=s?.syntheticException||void 0,o=eventFromString(t,e,a,i);return o.level=n,s?.event_id&&(o.event_id=s.event_id),resolvedSyncPromise(o)}function eventFromUnknownInput(t,e,n,s,i){let a;if(isErrorEvent$1(e)&&e.error)return eventFromError(t,e.error);if(isDOMError(e)||isDOMException(e)){const o=e;if("stack"in e)a=eventFromError(t,e);else{const l=o.name||(isDOMError(o)?"DOMError":"DOMException"),u=o.message?`${l}: ${o.message}`:l;a=eventFromString(t,u,n,s),addExceptionTypeValue(a,u)}return"code"in o&&(a.tags={...a.tags,"DOMException.code":`${o.code}`}),a}return isError(e)?eventFromError(t,e):isPlainObject$3(e)||isEvent(e)?(a=eventFromPlainObject(t,e,n,i),addExceptionMechanism(a,{synthetic:!0}),a):(a=eventFromString(t,e,n,s),addExceptionTypeValue(a,`${e}`),addExceptionMechanism(a,{synthetic:!0}),a)}function eventFromString(t,e,n,s){const i={};if(s&&n){const a=parseStackFrames(t,n);a.length&&(i.exception={values:[{value:e,stacktrace:{frames:a}}]}),addExceptionMechanism(i,{synthetic:!0})}if(isParameterizedString(e)){const{__sentry_template_string__:a,__sentry_template_values__:o}=e;return i.logentry={message:a,params:o},i}return i.message=e,i}function getNonErrorObjectExceptionValue(t,{isUnhandledRejection:e}){const n=extractExceptionKeysForMessage(t),s=e?"promise rejection":"exception";return isErrorEvent$1(t)?`Event \`ErrorEvent\` captured as ${s} with message \`${t.message}\``:isEvent(t)?`Event \`${getObjectClassName(t)}\` (type=${t.type}) captured as ${s}`:`Object captured as ${s} with keys: ${n}`}function getObjectClassName(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function getErrorPropertyFromObject(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}class BrowserClient extends Client{constructor(e){const n=applyDefaultOptions(e),s=WINDOW$1.SENTRY_SDK_SOURCE||getSDKSource();applySdkMetadata(n,"browser",["browser"],s),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:i,sendClientReports:a,enableLogs:o,_experiments:l,enableMetrics:u}=this._options,c=u??l?.enableMetrics??!0;WINDOW$1.document&&(a||o||c)&&WINDOW$1.document.addEventListener("visibilitychange",()=>{WINDOW$1.document.visibilityState==="hidden"&&(a&&this._flushOutcomes(),o&&_INTERNAL_flushLogsBuffer(this),c&&_INTERNAL_flushMetricsBuffer(this))}),i&&this.on("beforeSendSession",addAutoIpAddressToSession)}eventFromException(e,n){return eventFromException(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",s){return eventFromMessage(this._options.stackParser,e,n,s,this._options.attachStacktrace)}_prepareEvent(e,n,s,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,s,i)}}function applyDefaultOptions(t){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:WINDOW$1.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const DEBUG_BUILD$1=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,WINDOW=GLOBAL_OBJ,DEBOUNCE_DURATION=1e3;let debounceTimerID,lastCapturedEventType,lastCapturedEventTargetId;function addClickKeypressInstrumentationHandler(t){const e="dom";addHandler(e,t),maybeInstrument(e,instrumentDOM)}function instrumentDOM(){if(!WINDOW.document)return;const t=triggerHandlers.bind(null,"dom"),e=makeDOMEventHandler(t,!0);WINDOW.document.addEventListener("click",e,!1),WINDOW.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const i=WINDOW[n]?.prototype;i?.hasOwnProperty?.("addEventListener")&&(fill(i,"addEventListener",function(a){return function(o,l,u){if(o==="click"||o=="keypress")try{const c=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=c[o]=c[o]||{refCount:0};if(!d.handler){const p=makeDOMEventHandler(t);d.handler=p,a.call(this,o,p,u)}d.refCount++}catch{}return a.call(this,o,l,u)}}),fill(i,"removeEventListener",function(a){return function(o,l,u){if(o==="click"||o=="keypress")try{const c=this.__sentry_instrumentation_handlers__||{},d=c[o];d&&(d.refCount--,d.refCount<=0&&(a.call(this,o,d.handler,u),d.handler=void 0,delete c[o]),Object.keys(c).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,o,l,u)}}))})}function isSimilarToLastCapturedEvent(t){if(t.type!==lastCapturedEventType)return!1;try{if(!t.target||t.target._sentryId!==lastCapturedEventTargetId)return!1}catch{}return!0}function shouldSkipDOMEvent(t,e){return t!=="keypress"?!1:e?.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function makeDOMEventHandler(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const s=getEventTarget(n);if(shouldSkipDOMEvent(n.type,s))return;addNonEnumerableProperty(n,"_sentryCaptured",!0),s&&!s._sentryId&&addNonEnumerableProperty(s,"_sentryId",uuid4());const i=n.type==="keypress"?"input":n.type;isSimilarToLastCapturedEvent(n)||(t({event:n,name:i,global:e}),lastCapturedEventType=n.type,lastCapturedEventTargetId=s?s._sentryId:void 0),clearTimeout(debounceTimerID),debounceTimerID=WINDOW.setTimeout(()=>{lastCapturedEventTargetId=void 0,lastCapturedEventType=void 0},DEBOUNCE_DURATION)}}function getEventTarget(t){try{return t.target}catch{return null}}let lastHref;function addHistoryInstrumentationHandler(t){const e="history";addHandler(e,t),maybeInstrument(e,instrumentHistory)}function instrumentHistory(){if(WINDOW.addEventListener("popstate",()=>{const e=WINDOW.location.href,n=lastHref;if(lastHref=e,n===e)return;triggerHandlers("history",{from:n,to:e})}),!supportsHistory())return;function t(e){return function(...n){const s=n.length>2?n[2]:void 0;if(s){const i=lastHref,a=getAbsoluteUrl(String(s));if(lastHref=a,i===a)return e.apply(this,n);triggerHandlers("history",{from:i,to:a})}return e.apply(this,n)}}fill(WINDOW.history,"pushState",t),fill(WINDOW.history,"replaceState",t)}function getAbsoluteUrl(t){try{return new URL(t,WINDOW.location.origin).toString()}catch{return t}}const cachedImplementations={};function getNativeImplementation(t){const e=cachedImplementations[t];if(e)return e;let n=WINDOW[t];if(isNativeFunction(n))return cachedImplementations[t]=n.bind(WINDOW);const s=WINDOW.document;if(s&&typeof s.createElement=="function")try{const i=s.createElement("iframe");i.hidden=!0,s.head.appendChild(i);const a=i.contentWindow;a?.[t]&&(n=a[t]),s.head.removeChild(i)}catch(i){DEBUG_BUILD$1&&debug.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(cachedImplementations[t]=n.bind(WINDOW))}function clearCachedImplementation(t){cachedImplementations[t]=void 0}const SENTRY_XHR_DATA_KEY="__sentry_xhr_v3__";function addXhrInstrumentationHandler(t){const e="xhr";addHandler(e,t),maybeInstrument(e,instrumentXHR)}function instrumentXHR(){if(!WINDOW.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,s){const i=new Error,a=timestampInSeconds()*1e3,o=isString$3(s[0])?s[0].toUpperCase():void 0,l=parseXhrUrlArg(s[1]);if(!o||!l)return e.apply(n,s);n[SENTRY_XHR_DATA_KEY]={method:o,url:l,request_headers:{}},o==="POST"&&l.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const u=()=>{const c=n[SENTRY_XHR_DATA_KEY];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const d={endTimestamp:timestampInSeconds()*1e3,startTimestamp:a,xhr:n,virtualError:i};triggerHandlers("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,d,p){return u(),c.apply(d,p)}}):n.addEventListener("readystatechange",u),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,d,p){const[m,g]=p,E=d[SENTRY_XHR_DATA_KEY];return E&&isString$3(m)&&isString$3(g)&&(E.request_headers[m.toLowerCase()]=g),c.apply(d,p)}}),e.apply(n,s)}}),t.send=new Proxy(t.send,{apply(e,n,s){const i=n[SENTRY_XHR_DATA_KEY];if(!i)return e.apply(n,s);s[0]!==void 0&&(i.body=s[0]);const a={startTimestamp:timestampInSeconds()*1e3,xhr:n};return triggerHandlers("xhr",a),e.apply(n,s)}})}function parseXhrUrlArg(t){if(isString$3(t))return t;try{return t.toString()}catch{}}const DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE=40;function makeFetchTransport(t,e=getNativeImplementation("fetch")){let n=0,s=0;async function i(a){const o=a.body.length;n+=o,s++;const l={body:a.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&s<15,...t.fetchOptions};try{const u=await e(t.url,l);return{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}}catch(u){throw clearCachedImplementation("fetch"),u}finally{n-=o,s--}}return createTransport(t,i,makePromiseBuffer(t.bufferSize||DEFAULT_BROWSER_TRANSPORT_BUFFER_SIZE))}const CHROME_PRIORITY=30,GECKO_PRIORITY=50;function createFrame(t,e,n,s){const i={filename:t,function:e==="<anonymous>"?UNKNOWN_FUNCTION:e,in_app:!0};return n!==void 0&&(i.lineno=n),s!==void 0&&(i.colno=s),i}const chromeRegexNoFnName=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,chromeRegex=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,chromeEvalRegex=/\((\S*)(?::(\d+))(?::(\d+))\)/,chromeDataUriRegex=/at (.+?) ?\(data:(.+?),/,chromeStackParserFn=t=>{const e=t.match(chromeDataUriRegex);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=chromeRegexNoFnName.exec(t);if(n){const[,i,a,o]=n;return createFrame(i,UNKNOWN_FUNCTION,+a,+o)}const s=chromeRegex.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){const l=chromeEvalRegex.exec(s[2]);l&&(s[2]=l[1],s[3]=l[2],s[4]=l[3])}const[a,o]=extractSafariExtensionDetails(s[1]||UNKNOWN_FUNCTION,s[2]);return createFrame(o,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}},chromeStackLineParser=[CHROME_PRIORITY,chromeStackParserFn],geckoREgex=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,geckoEvalRegex=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,gecko=t=>{const e=geckoREgex.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const a=geckoEvalRegex.exec(e[3]);a&&(e[1]=e[1]||"eval",e[3]=a[1],e[4]=a[2],e[5]="")}let s=e[3],i=e[1]||UNKNOWN_FUNCTION;return[i,s]=extractSafariExtensionDetails(i,s),createFrame(s,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},geckoStackLineParser=[GECKO_PRIORITY,gecko],defaultStackLineParsers=[chromeStackLineParser,geckoStackLineParser],defaultStackParser=createStackParser(...defaultStackLineParsers),extractSafariExtensionDetails=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,s=t.indexOf("safari-web-extension")!==-1;return n||s?[t.indexOf("@")!==-1?t.split("@")[0]:UNKNOWN_FUNCTION,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},DEBUG_BUILD=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,MAX_ALLOWED_STRING_LENGTH=1024,INTEGRATION_NAME$3="Breadcrumbs",_breadcrumbsIntegration=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:INTEGRATION_NAME$3,setup(n){e.console&&addConsoleInstrumentationHandler(_getConsoleBreadcrumbHandler(n)),e.dom&&addClickKeypressInstrumentationHandler(_getDomBreadcrumbHandler(n,e.dom)),e.xhr&&addXhrInstrumentationHandler(_getXhrBreadcrumbHandler(n)),e.fetch&&addFetchInstrumentationHandler(_getFetchBreadcrumbHandler(n)),e.history&&addHistoryInstrumentationHandler(_getHistoryBreadcrumbHandler(n)),e.sentry&&n.on("beforeSendEvent",_getSentryBreadcrumbHandler(n))}}},breadcrumbsIntegration=_breadcrumbsIntegration;function _getSentryBreadcrumbHandler(t){return function(n){getClient()===t&&addBreadcrumb({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:getEventDescription(n)},{event:n})}}function _getDomBreadcrumbHandler(t,e){return function(s){if(getClient()!==t)return;let i,a,o=typeof e=="object"?e.serializeAttribute:void 0,l=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;l&&l>MAX_ALLOWED_STRING_LENGTH&&(DEBUG_BUILD&&debug.warn(`\`dom.maxStringLength\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${l} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`),l=MAX_ALLOWED_STRING_LENGTH),typeof o=="string"&&(o=[o]);try{const c=s.event,d=_isEvent(c)?c.target:c;i=htmlTreeAsString(d,{keyAttrs:o,maxStringLength:l}),a=getComponentName(d)}catch{i="<unknown>"}if(i.length===0)return;const u={category:`ui.${s.name}`,message:i};a&&(u.data={"ui.component_name":a}),addBreadcrumb(u,{event:s.event,name:s.name,global:s.global})}}function _getConsoleBreadcrumbHandler(t){return function(n){if(getClient()!==t)return;const s={category:"console",data:{arguments:n.args,logger:"console"},level:severityLevelFromString(n.level),message:safeJoin(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)s.message=`Assertion failed: ${safeJoin(n.args.slice(1)," ")||"console.assert"}`,s.data.arguments=n.args.slice(1);else return;addBreadcrumb(s,{input:n.args,level:n.level})}}function _getXhrBreadcrumbHandler(t){return function(n){if(getClient()!==t)return;const{startTimestamp:s,endTimestamp:i}=n,a=n.xhr[SENTRY_XHR_DATA_KEY];if(!s||!i||!a)return;const{method:o,url:l,status_code:u,body:c}=a,d={method:o,url:l,status_code:u},p={xhr:n.xhr,input:c,startTimestamp:s,endTimestamp:i},m={category:"xhr",data:d,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(u)};t.emit("beforeOutgoingRequestBreadcrumb",m,p),addBreadcrumb(m,p)}}function _getFetchBreadcrumbHandler(t){return function(n){if(getClient()!==t)return;const{startTimestamp:s,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const a=n.fetchData,o={data:n.error,input:n.args,startTimestamp:s,endTimestamp:i},l={category:"fetch",data:a,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",l,o),addBreadcrumb(l,o)}else{const a=n.response,o={...n.fetchData,status_code:a?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,a?.status;const l={input:n.args,response:a,startTimestamp:s,endTimestamp:i},u={category:"fetch",data:o,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",u,l),addBreadcrumb(u,l)}}}function _getHistoryBreadcrumbHandler(t){return function(n){if(getClient()!==t)return;let s=n.from,i=n.to;const a=parseUrl$1(WINDOW$1.location.href);let o=s?parseUrl$1(s):void 0;const l=parseUrl$1(i);o?.path||(o=a),a.protocol===l.protocol&&a.host===l.host&&(i=l.relative),a.protocol===o.protocol&&a.host===o.host&&(s=o.relative),addBreadcrumb({category:"navigation",data:{from:s,to:i}})}}function _isEvent(t){return!!t&&!!t.target}const DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],INTEGRATION_NAME$2="BrowserApiErrors",_browserApiErrorsIntegration=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:INTEGRATION_NAME$2,setupOnce(){e.setTimeout&&fill(WINDOW$1,"setTimeout",_wrapTimeFunction),e.setInterval&&fill(WINDOW$1,"setInterval",_wrapTimeFunction),e.requestAnimationFrame&&fill(WINDOW$1,"requestAnimationFrame",_wrapRAF),e.XMLHttpRequest&&"XMLHttpRequest"in WINDOW$1&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);const n=e.eventTarget;n&&(Array.isArray(n)?n:DEFAULT_EVENT_TARGET).forEach(i=>_wrapEventTarget(i,e))}}},browserApiErrorsIntegration=_browserApiErrorsIntegration;function _wrapTimeFunction(t){return function(...e){const n=e[0];return e[0]=wrap(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${getFunctionName(t)}`}}),t.apply(this,e)}}function _wrapRAF(t){return function(e){return t.apply(this,[wrap(e,{mechanism:{data:{handler:getFunctionName(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function _wrapXHR(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&fill(n,i,function(a){const o={mechanism:{data:{handler:getFunctionName(a)},handled:!1,type:`auto.browser.browserapierrors.xhr.${i}`}},l=getOriginalFunction(a);return l&&(o.mechanism.data.handler=getFunctionName(l)),wrap(a,o)})}),t.apply(this,e)}}function _wrapEventTarget(t,e){const s=WINDOW$1[t]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(fill(s,"addEventListener",function(i){return function(a,o,l){try{isEventListenerObject(o)&&(o.handleEvent=wrap(o.handleEvent,{mechanism:{data:{handler:getFunctionName(o),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&unregisterOriginalCallback(this,a,o),i.apply(this,[a,wrap(o,{mechanism:{data:{handler:getFunctionName(o),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),l])}}),fill(s,"removeEventListener",function(i){return function(a,o,l){try{const u=o.__sentry_wrapped__;u&&i.call(this,a,u,l)}catch{}return i.call(this,a,o,l)}}))}function isEventListenerObject(t){return typeof t.handleEvent=="function"}function unregisterOriginalCallback(t,e,n){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,n)}const browserSessionIntegration=()=>({name:"BrowserSession",setupOnce(){if(typeof WINDOW$1.document>"u"){DEBUG_BUILD&&debug.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler(({from:t,to:e})=>{t!==void 0&&t!==e&&(startSession({ignoreDuration:!0}),captureSession())})}}),INTEGRATION_NAME$1="GlobalHandlers",_globalHandlersIntegration=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:INTEGRATION_NAME$1,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(_installGlobalOnErrorHandler(n),globalHandlerLog("onerror")),e.onunhandledrejection&&(_installGlobalOnUnhandledRejectionHandler(n),globalHandlerLog("onunhandledrejection"))}}},globalHandlersIntegration=_globalHandlersIntegration;function _installGlobalOnErrorHandler(t){addGlobalErrorInstrumentationHandler(e=>{const{stackParser:n,attachStacktrace:s}=getOptions();if(getClient()!==t||shouldIgnoreOnError())return;const{msg:i,url:a,line:o,column:l,error:u}=e,c=_enhanceEventWithInitialFrame(eventFromUnknownInput(n,u||i,void 0,s,!1),a,o,l);c.level="error",captureEvent(c,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function _installGlobalOnUnhandledRejectionHandler(t){addGlobalUnhandledRejectionInstrumentationHandler(e=>{const{stackParser:n,attachStacktrace:s}=getOptions();if(getClient()!==t||shouldIgnoreOnError())return;const i=_getUnhandledRejectionError(e),a=isPrimitive(i)?_eventFromRejectionWithPrimitive(i):eventFromUnknownInput(n,i,void 0,s,!0);a.level="error",captureEvent(a,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function _getUnhandledRejectionError(t){if(isPrimitive(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function _eventFromRejectionWithPrimitive(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function _enhanceEventWithInitialFrame(t,e,n,s){const i=t.exception=t.exception||{},a=i.values=i.values||[],o=a[0]=a[0]||{},l=o.stacktrace=o.stacktrace||{},u=l.frames=l.frames||[],c=s,d=n,p=getFilenameFromUrl(e)??getLocationHref();return u.length===0&&u.push({colno:c,filename:p,function:UNKNOWN_FUNCTION,in_app:!0,lineno:d}),t}function globalHandlerLog(t){DEBUG_BUILD&&debug.log(`Global Handler attached: ${t}`)}function getOptions(){return getClient()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function getFilenameFromUrl(t){if(!(!isString$3(t)||t.length===0)){if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/),n=e?e[1]:"text/javascript",s=t.includes("base64,");return`<data:${n}${s?",base64":""}>`}return t}}const httpContextIntegration=()=>({name:"HttpContext",preprocessEvent(t){if(!WINDOW$1.navigator&&!WINDOW$1.location&&!WINDOW$1.document)return;const e=getHttpRequestData(),n={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:n}}}),DEFAULT_KEY="cause",DEFAULT_LIMIT=5,INTEGRATION_NAME="LinkedErrors",_linkedErrorsIntegration=(t={})=>{const e=t.limit||DEFAULT_LIMIT,n=t.key||DEFAULT_KEY;return{name:INTEGRATION_NAME,preprocessEvent(s,i,a){const o=a.getOptions();applyAggregateErrorsToEvent(exceptionFromError,o.stackParser,n,e,s,i)}}},linkedErrorsIntegration=_linkedErrorsIntegration;function checkAndWarnIfIsEmbeddedBrowserExtension(){return _isEmbeddedBrowserExtension()?(DEBUG_BUILD&&consoleSandbox(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function _isEmbeddedBrowserExtension(){if(typeof WINDOW$1.window>"u")return!1;const t=WINDOW$1;if(t.nw||!(t.chrome||t.browser)?.runtime?.id)return!1;const n=getLocationHref(),s=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(WINDOW$1===WINDOW$1.top&&s.some(a=>n.startsWith(`${a}://`)))}function getDefaultIntegrations(t){return[inboundFiltersIntegration(),functionToStringIntegration(),browserApiErrorsIntegration(),breadcrumbsIntegration(),globalHandlersIntegration(),linkedErrorsIntegration(),dedupeIntegration(),httpContextIntegration(),browserSessionIntegration()]}function init$6(t={}){const e=!t.skipBrowserExtensionCheck&&checkAndWarnIfIsEmbeddedBrowserExtension();let n=t.defaultIntegrations==null?getDefaultIntegrations():t.defaultIntegrations;const s={...t,enabled:e?!1:t.enabled,stackParser:stackParserFromStackParserOptions(t.stackParser||defaultStackParser),integrations:getIntegrationsToSetup({integrations:t.integrations,defaultIntegrations:n}),transport:t.transport||makeFetchTransport};return initAndBind(BrowserClient,s)}function init$5(t){const e={...t};return applySdkMetadata(e,"react"),setContext("react",{version:reactExports.version}),init$6(e)}var lodash$1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var lodash=lodash$1.exports,hasRequiredLodash;function requireLodash(){return hasRequiredLodash||(hasRequiredLodash=1,function(t,e){(function(){var n,s="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,m=2,g=4,E=1,x=2,b=1,S=2,C=4,T=8,I=16,D=32,P=64,O=128,B=256,F=512,H=30,Q="...",Z=800,ne=16,re=1,se=2,G=3,K=1/0,M=9007199254740991,W=17976931348623157e292,ee=NaN,z=4294967295,ae=z-1,ce=z>>>1,he=[["ary",O],["bind",b],["bindKey",S],["curry",T],["curryRight",I],["flip",F],["partial",D],["partialRight",P],["rearg",B]],fe="[object Arguments]",Ce="[object Array]",Me="[object AsyncFunction]",Ye="[object Boolean]",We="[object Date]",Be="[object DOMException]",rt="[object Error]",tt="[object Function]",Ue="[object GeneratorFunction]",Pe="[object Map]",Qe="[object Number]",Je="[object Null]",nt="[object Object]",ft="[object Promise]",At="[object Proxy]",ot="[object RegExp]",qe="[object Set]",mt="[object String]",st="[object Symbol]",St="[object Undefined]",bt="[object WeakMap]",Mt="[object WeakSet]",pt="[object ArrayBuffer]",rr="[object DataView]",Ft="[object Float32Array]",Qt="[object Float64Array]",nr="[object Int8Array]",Ht="[object Int16Array]",Ar="[object Int32Array]",Ir="[object Uint8Array]",Qr="[object Uint8ClampedArray]",ke="[object Uint16Array]",Oe="[object Uint32Array]",Yt=/\b__p \+= '';/g,Xt=/\b(__p \+=) '' \+/g,ir=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ie=/&(?:amp|lt|gt|quot|#39);/g,ue=/[&<>"']/g,ve=RegExp(ie.source),Ie=RegExp(ue.source),Ze=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,Gt=/<%=([\s\S]+?)%>/g,sr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,we=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,ze=RegExp(Ne.source),it=/^\s+/,xt=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Et=/\{\n\/\* \[wrapped with (.+)\] \*/,It=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rt=/[()=,{}\[\]\/\s]/,Dt=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,or=/\w*$/,_r=/^[-+]0x[0-9a-f]+$/i,Dr=/^0b[01]+$/i,hr=/^\[object .+?Constructor\]$/,ar=/^0o[0-7]+$/i,He=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gt=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,qt="\\ud800-\\udfff",yr="\\u0300-\\u036f",Lr="\\ufe20-\\ufe2f",En="\\u20d0-\\u20ff",wn=yr+Lr+En,ur="\\u2700-\\u27bf",Xr="a-z\\xdf-\\xf6\\xf8-\\xff",ts="\\xac\\xb1\\xd7\\xf7",Wr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mr="\\u2000-\\u206f",ln=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",js="A-Z\\xc0-\\xd6\\xd8-\\xde",ri="\\ufe0e\\ufe0f",ea=ts+Wr+Mr+ln,vs="[']",bo="["+qt+"]",Ti="["+ea+"]",Ci="["+wn+"]",Zl="\\d+",ni="["+ur+"]",Ri="["+Xr+"]",sl="[^"+qt+ea+Zl+ur+Xr+js+"]",wi="\\ud83c[\\udffb-\\udfff]",Ai="(?:"+Ci+"|"+wi+")",Wn="[^"+qt+"]",ja="(?:\\ud83c[\\udde6-\\uddff]){2}",gr="[\\ud800-\\udbff][\\udc00-\\udfff]",rs="["+js+"]",ta="\\u200d",Ms="(?:"+Ri+"|"+sl+")",To="(?:"+rs+"|"+sl+")",Co="(?:"+vs+"(?:d|ll|m|re|s|t|ve))?",Ma="(?:"+vs+"(?:D|LL|M|RE|S|T|VE))?",Ro=Ai+"?",$a="["+ri+"]?",si="(?:"+ta+"(?:"+[Wn,ja,gr].join("|")+")"+$a+Ro+")*",ns="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$s="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ra=$a+Ro+si,na="(?:"+[ni,ja,gr].join("|")+")"+ra,ii="(?:"+[Wn+Ci+"?",Ci,ja,gr,bo].join("|")+")",eu=RegExp(vs,"g"),tu=RegExp(Ci,"g"),xs=RegExp(wi+"(?="+wi+")|"+ii+ra,"g"),wo=RegExp([rs+"?"+Ri+"+"+Co+"(?="+[Ti,rs,"$"].join("|")+")",To+"+"+Ma+"(?="+[Ti,rs+Ms,"$"].join("|")+")",rs+"?"+Ms+"+"+Co,rs+"+"+Ma,$s,ns,Zl,na].join("|"),"g"),il=RegExp("["+ta+qt+wn+ri+"]"),Ao=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ru=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nu=-1,Tr={};Tr[Ft]=Tr[Qt]=Tr[nr]=Tr[Ht]=Tr[Ar]=Tr[Ir]=Tr[Qr]=Tr[ke]=Tr[Oe]=!0,Tr[fe]=Tr[Ce]=Tr[pt]=Tr[Ye]=Tr[rr]=Tr[We]=Tr[rt]=Tr[tt]=Tr[Pe]=Tr[Qe]=Tr[nt]=Tr[ot]=Tr[qe]=Tr[mt]=Tr[bt]=!1;var Cr={};Cr[fe]=Cr[Ce]=Cr[pt]=Cr[rr]=Cr[Ye]=Cr[We]=Cr[Ft]=Cr[Qt]=Cr[nr]=Cr[Ht]=Cr[Ar]=Cr[Pe]=Cr[Qe]=Cr[nt]=Cr[ot]=Cr[qe]=Cr[mt]=Cr[st]=Cr[Ir]=Cr[Qr]=Cr[ke]=Cr[Oe]=!0,Cr[rt]=Cr[tt]=Cr[bt]=!1;var Ii={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Io={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},uc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},al=parseFloat,Do=parseInt,Po=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ko=typeof self=="object"&&self&&self.Object===Object&&self,$r=Po||ko||Function("return this")(),sa=e&&!e.nodeType&&e,Mn=sa&&!0&&t&&!t.nodeType&&t,ol=Mn&&Mn.exports===sa,ia=ol&&Po.process,_n=function(){try{var Ae=Mn&&Mn.require&&Mn.require("util").types;return Ae||ia&&ia.binding&&ia.binding("util")}catch{}}(),ll=_n&&_n.isArrayBuffer,An=_n&&_n.isDate,Es=_n&&_n.isMap,ai=_n&&_n.isRegExp,_s=_n&&_n.isSet,Fa=_n&&_n.isTypedArray;function jr(Ae,Ke,Fe){switch(Fe.length){case 0:return Ae.call(Ke);case 1:return Ae.call(Ke,Fe[0]);case 2:return Ae.call(Ke,Fe[0],Fe[1]);case 3:return Ae.call(Ke,Fe[0],Fe[1],Fe[2])}return Ae.apply(Ke,Fe)}function ss(Ae,Ke,Fe,Pt){for(var Jt=-1,vr=Ae==null?0:Ae.length;++Jt<vr;){var zr=Ae[Jt];Ke(Pt,zr,Fe(zr),Ae)}return Pt}function en(Ae,Ke){for(var Fe=-1,Pt=Ae==null?0:Ae.length;++Fe<Pt&&Ke(Ae[Fe],Fe,Ae)!==!1;);return Ae}function Ba(Ae,Ke){for(var Fe=Ae==null?0:Ae.length;Fe--&&Ke(Ae[Fe],Fe,Ae)!==!1;);return Ae}function ul(Ae,Ke){for(var Fe=-1,Pt=Ae==null?0:Ae.length;++Fe<Pt;)if(!Ke(Ae[Fe],Fe,Ae))return!1;return!0}function oi(Ae,Ke){for(var Fe=-1,Pt=Ae==null?0:Ae.length,Jt=0,vr=[];++Fe<Pt;){var zr=Ae[Fe];Ke(zr,Fe,Ae)&&(vr[Jt++]=zr)}return vr}function No(Ae,Ke){var Fe=Ae==null?0:Ae.length;return!!Fe&&la(Ae,Ke,0)>-1}function cl(Ae,Ke,Fe){for(var Pt=-1,Jt=Ae==null?0:Ae.length;++Pt<Jt;)if(Fe(Ke,Ae[Pt]))return!0;return!1}function kr(Ae,Ke){for(var Fe=-1,Pt=Ae==null?0:Ae.length,Jt=Array(Pt);++Fe<Pt;)Jt[Fe]=Ke(Ae[Fe],Fe,Ae);return Jt}function Fs(Ae,Ke){for(var Fe=-1,Pt=Ke.length,Jt=Ae.length;++Fe<Pt;)Ae[Jt+Fe]=Ke[Fe];return Ae}function aa(Ae,Ke,Fe,Pt){var Jt=-1,vr=Ae==null?0:Ae.length;for(Pt&&vr&&(Fe=Ae[++Jt]);++Jt<vr;)Fe=Ke(Fe,Ae[Jt],Jt,Ae);return Fe}function Ua(Ae,Ke,Fe,Pt){var Jt=Ae==null?0:Ae.length;for(Pt&&Jt&&(Fe=Ae[--Jt]);Jt--;)Fe=Ke(Fe,Ae[Jt],Jt,Ae);return Fe}function oa(Ae,Ke){for(var Fe=-1,Pt=Ae==null?0:Ae.length;++Fe<Pt;)if(Ke(Ae[Fe],Fe,Ae))return!0;return!1}var Di=fl("length");function su(Ae){return Ae.split("")}function iu(Ae){return Ae.match(Tt)||[]}function dl(Ae,Ke,Fe){var Pt;return Fe(Ae,function(Jt,vr,zr){if(Ke(Jt,vr,zr))return Pt=vr,!1}),Pt}function Va(Ae,Ke,Fe,Pt){for(var Jt=Ae.length,vr=Fe+(Pt?1:-1);Pt?vr--:++vr<Jt;)if(Ke(Ae[vr],vr,Ae))return vr;return-1}function la(Ae,Ke,Fe){return Ke===Ke?Wa(Ae,Ke,Fe):Va(Ae,au,Fe)}function pl(Ae,Ke,Fe,Pt){for(var Jt=Fe-1,vr=Ae.length;++Jt<vr;)if(Pt(Ae[Jt],Ke))return Jt;return-1}function au(Ae){return Ae!==Ae}function Ha(Ae,Ke){var Fe=Ae==null?0:Ae.length;return Fe?Oo(Ae,Ke)/Fe:ee}function fl(Ae){return function(Ke){return Ke==null?n:Ke[Ae]}}function qa(Ae){return function(Ke){return Ae==null?n:Ae[Ke]}}function ou(Ae,Ke,Fe,Pt,Jt){return Jt(Ae,function(vr,zr,Rr){Fe=Pt?(Pt=!1,vr):Ke(Fe,vr,zr,Rr)}),Fe}function dc(Ae,Ke){var Fe=Ae.length;for(Ae.sort(Ke);Fe--;)Ae[Fe]=Ae[Fe].value;return Ae}function Oo(Ae,Ke){for(var Fe,Pt=-1,Jt=Ae.length;++Pt<Jt;){var vr=Ke(Ae[Pt]);vr!==n&&(Fe=Fe===n?vr:Fe+vr)}return Fe}function Ga(Ae,Ke){for(var Fe=-1,Pt=Array(Ae);++Fe<Ae;)Pt[Fe]=Ke(Fe);return Pt}function pc(Ae,Ke){return kr(Ke,function(Fe){return[Fe,Ae[Fe]]})}function lu(Ae){return Ae&&Ae.slice(0,Li(Ae)+1).replace(it,"")}function $n(Ae){return function(Ke){return Ae(Ke)}}function Pi(Ae,Ke){return kr(Ke,function(Fe){return Ae[Fe]})}function Bs(Ae,Ke){return Ae.has(Ke)}function hl(Ae,Ke){for(var Fe=-1,Pt=Ae.length;++Fe<Pt&&la(Ke,Ae[Fe],0)>-1;);return Fe}function ml(Ae,Ke){for(var Fe=Ae.length;Fe--&&la(Ke,Ae[Fe],0)>-1;);return Fe}function uu(Ae,Ke){for(var Fe=Ae.length,Pt=0;Fe--;)Ae[Fe]===Ke&&++Pt;return Pt}var gl=qa(Ii),cu=qa(Io);function yl(Ae){return"\\"+cc[Ae]}function ki(Ae,Ke){return Ae==null?n:Ae[Ke]}function Ni(Ae){return il.test(Ae)}function fc(Ae){return Ao.test(Ae)}function mc(Ae){for(var Ke,Fe=[];!(Ke=Ae.next()).done;)Fe.push(Ke.value);return Fe}function Oi(Ae){var Ke=-1,Fe=Array(Ae.size);return Ae.forEach(function(Pt,Jt){Fe[++Ke]=[Jt,Pt]}),Fe}function vl(Ae,Ke){return function(Fe){return Ae(Ke(Fe))}}function zn(Ae,Ke){for(var Fe=-1,Pt=Ae.length,Jt=0,vr=[];++Fe<Pt;){var zr=Ae[Fe];(zr===Ke||zr===d)&&(Ae[Fe]=d,vr[Jt++]=Fe)}return vr}function li(Ae){var Ke=-1,Fe=Array(Ae.size);return Ae.forEach(function(Pt){Fe[++Ke]=Pt}),Fe}function gc(Ae){var Ke=-1,Fe=Array(Ae.size);return Ae.forEach(function(Pt){Fe[++Ke]=[Pt,Pt]}),Fe}function Wa(Ae,Ke,Fe){for(var Pt=Fe-1,Jt=Ae.length;++Pt<Jt;)if(Ae[Pt]===Ke)return Pt;return-1}function yc(Ae,Ke,Fe){for(var Pt=Fe+1;Pt--;)if(Ae[Pt]===Ke)return Pt;return Pt}function os(Ae){return Ni(Ae)?Vr(Ae):Di(Ae)}function In(Ae){return Ni(Ae)?ji(Ae):su(Ae)}function Li(Ae){for(var Ke=Ae.length;Ke--&&xt.test(Ae.charAt(Ke)););return Ke}var ua=qa(uc);function Vr(Ae){for(var Ke=xs.lastIndex=0;xs.test(Ae);)++Ke;return Ke}function ji(Ae){return Ae.match(xs)||[]}function xl(Ae){return Ae.match(wo)||[]}var vc=function Ae(Ke){Ke=Ke==null?$r:ca.defaults($r.Object(),Ke,ca.pick($r,ru));var Fe=Ke.Array,Pt=Ke.Date,Jt=Ke.Error,vr=Ke.Function,zr=Ke.Math,Rr=Ke.Object,da=Ke.RegExp,El=Ke.String,Kn=Ke.TypeError,Bn=Fe.prototype,_l=vr.prototype,us=Rr.prototype,Mi=Ke["__core-js_shared__"],za=_l.toString,Er=us.hasOwnProperty,$i=0,Lo=function(){var _=/[^.]+$/.exec(Mi&&Mi.keys&&Mi.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Ka=us.toString,pa=za.call(Rr),du=$r._,pu=da("^"+za.call(Er).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ya=ol?Ke.Buffer:n,Us=Ke.Symbol,Qa=Ke.Uint8Array,Sl=Ya?Ya.allocUnsafe:n,cs=vl(Rr.getPrototypeOf,Rr),jo=Rr.create,Mo=us.propertyIsEnumerable,$o=Bn.splice,fu=Us?Us.isConcatSpreadable:n,hn=Us?Us.iterator:n,Fi=Us?Us.toStringTag:n,Xa=function(){try{var _=Aa(Rr,"defineProperty");return _({},"",{}),_}catch{}}(),hu=Ke.clearTimeout!==$r.clearTimeout&&Ke.clearTimeout,Fr=Pt&&Pt.now!==$r.Date.now&&Pt.now,Fo=Ke.setTimeout!==$r.setTimeout&&Ke.setTimeout,Vs=zr.ceil,Hs=zr.floor,Bi=Rr.getOwnPropertySymbols,fa=Ya?Ya.isBuffer:n,ha=Ke.isFinite,Bo=Bn.join,ma=vl(Rr.keys,Rr),Jr=zr.max,mn=zr.min,bl=Pt.now,mu=Ke.parseInt,Ja=zr.random,Za=Bn.reverse,Ss=Aa(Ke,"DataView"),mr=Aa(Ke,"Map"),ds=Aa(Ke,"Promise"),Hr=Aa(Ke,"Set"),Dn=Aa(Ke,"WeakMap"),ga=Aa(Rr,"create"),eo=Dn&&new Dn,ya={},Tl=Ia(Ss),ci=Ia(mr),gu=Ia(ds),va=Ia(Hr),bs=Ia(Dn),di=Us?Us.prototype:n,Pn=di?di.valueOf:n,N=di?di.toString:n;function k(_){if(an(_)&&!lr(_)&&!(_ instanceof te)){if(_ instanceof Y)return _;if(Er.call(_,"__wrapped__"))return Md(_)}return new Y(_)}var V=function(){function _(){}return function(R){if(!nn(R))return{};if(jo)return jo(R);_.prototype=R;var j=new _;return _.prototype=n,j}}();function U(){}function Y(_,R){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=n}k.templateSettings={escape:Ze,evaluate:wt,interpolate:Gt,variable:"",imports:{_:k}},k.prototype=U.prototype,k.prototype.constructor=k,Y.prototype=V(U.prototype),Y.prototype.constructor=Y;function te(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function pe(){var _=new te(this.__wrapped__);return _.__actions__=Un(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Un(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Un(this.__views__),_}function me(){if(this.__filtered__){var _=new te(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function ge(){var _=this.__wrapped__.value(),R=this.__dir__,j=lr(_),J=R<0,oe=j?_.length:0,de=Gc(0,oe,this.__views__),_e=de.start,Te=de.end,De=Te-_e,Xe=J?Te:_e-1,et=this.__iteratees__,ct=et.length,kt=0,Ut=mn(De,this.__takeCount__);if(!j||!J&&oe==De&&Ut==De)return zo(_,this.__actions__);var er=[];e:for(;De--&&kt<Ut;){Xe+=R;for(var pr=-1,tr=_[Xe];++pr<ct;){var xr=et[pr],br=xr.iteratee,ei=xr.type,ys=br(tr);if(ei==se)tr=ys;else if(!ys){if(ei==re)continue e;break e}}er[kt++]=tr}return er}te.prototype=V(U.prototype),te.prototype.constructor=te;function ye(_){var R=-1,j=_==null?0:_.length;for(this.clear();++R<j;){var J=_[R];this.set(J[0],J[1])}}function Se(){this.__data__=ga?ga(null):{},this.size=0}function Le(_){var R=this.has(_)&&delete this.__data__[_];return this.size-=R?1:0,R}function vt(_){var R=this.__data__;if(ga){var j=R[_];return j===u?n:j}return Er.call(R,_)?R[_]:n}function Ge(_){var R=this.__data__;return ga?R[_]!==n:Er.call(R,_)}function Ot(_,R){var j=this.__data__;return this.size+=this.has(_)?0:1,j[_]=ga&&R===n?u:R,this}ye.prototype.clear=Se,ye.prototype.delete=Le,ye.prototype.get=vt,ye.prototype.has=Ge,ye.prototype.set=Ot;function Vt(_){var R=-1,j=_==null?0:_.length;for(this.clear();++R<j;){var J=_[R];this.set(J[0],J[1])}}function Br(){this.__data__=[],this.size=0}function Nr(_){var R=this.__data__,j=Nn(R,_);if(j<0)return!1;var J=R.length-1;return j==J?R.pop():$o.call(R,j,1),--this.size,!0}function ps(_){var R=this.__data__,j=Nn(R,_);return j<0?n:R[j][1]}function xa(_){return Nn(this.__data__,_)>-1}function Ea(_,R){var j=this.__data__,J=Nn(j,_);return J<0?(++this.size,j.push([_,R])):j[J][1]=R,this}Vt.prototype.clear=Br,Vt.prototype.delete=Nr,Vt.prototype.get=ps,Vt.prototype.has=xa,Vt.prototype.set=Ea;function gn(_){var R=-1,j=_==null?0:_.length;for(this.clear();++R<j;){var J=_[R];this.set(J[0],J[1])}}function Sa(){this.size=0,this.__data__={hash:new ye,map:new(mr||Vt),string:new ye}}function Yn(_){var R=Bl(this,_).delete(_);return this.size-=R?1:0,R}function Pr(_){return Bl(this,_).get(_)}function Ui(_){return Bl(this,_).has(_)}function Qn(_,R){var j=Bl(this,_),J=j.size;return j.set(_,R),this.size+=j.size==J?0:1,this}gn.prototype.clear=Sa,gn.prototype.delete=Yn,gn.prototype.get=Pr,gn.prototype.has=Ui,gn.prototype.set=Qn;function ro(_){var R=-1,j=_==null?0:_.length;for(this.__data__=new gn;++R<j;)this.add(_[R])}function ba(_){return this.__data__.set(_,u),this}function Uo(_){return this.__data__.has(_)}ro.prototype.add=ro.prototype.push=ba,ro.prototype.has=Uo;function kn(_){var R=this.__data__=new Vt(_);this.size=R.size}function yu(){this.__data__=new Vt,this.size=0}function vu(_){var R=this.__data__,j=R.delete(_);return this.size=R.size,j}function Ts(_){return this.__data__.get(_)}function Cs(_){return this.__data__.has(_)}function no(_,R){var j=this.__data__;if(j instanceof Vt){var J=j.__data__;if(!mr||J.length<i-1)return J.push([_,R]),this.size=++j.size,this;j=this.__data__=new gn(J)}return j.set(_,R),this.size=j.size,this}kn.prototype.clear=yu,kn.prototype.delete=vu,kn.prototype.get=Ts,kn.prototype.has=Cs,kn.prototype.set=no;function pi(_,R){var j=lr(_),J=!j&&Jl(_),oe=!j&&!J&&nl(_),de=!j&&!J&&!oe&&oc(_),_e=j||J||oe||de,Te=_e?Ga(_.length,El):[],De=Te.length;for(var Xe in _)(R||Er.call(_,Xe))&&!(_e&&(Xe=="length"||oe&&(Xe=="offset"||Xe=="parent")||de&&(Xe=="buffer"||Xe=="byteLength"||Xe=="byteOffset")||Gr(Xe,De)))&&Te.push(Xe);return Te}function fi(_){var R=_.length;return R?_[Go(0,R-1)]:n}function so(_,R){return qu(Un(_),Vi(R,0,_.length))}function hd(_){return qu(Un(_))}function Cl(_,R,j){(j!==n&&!Ji(_[R],j)||j===n&&!(R in _))&&hi(_,R,j)}function io(_,R,j){var J=_[R];(!(Er.call(_,R)&&Ji(J,j))||j===n&&!(R in _))&&hi(_,R,j)}function Nn(_,R){for(var j=_.length;j--;)if(Ji(_[j][0],R))return j;return-1}function fs(_,R,j,J){return gi(_,function(oe,de,_e){R(J,oe,j(oe),_e)}),J}function Ur(_,R){return _&&Ws(R,jn(R),_)}function Gs(_,R){return _&&Ws(R,Os(R),_)}function hi(_,R,j){R=="__proto__"&&Xa?Xa(_,R,{configurable:!0,enumerable:!0,value:j,writable:!0}):_[R]=j}function xu(_,R){for(var j=-1,J=R.length,oe=Fe(J),de=_==null;++j<J;)oe[j]=de?n:Cp(_,R[j]);return oe}function Vi(_,R,j){return _===_&&(j!==n&&(_=_<=j?_:j),R!==n&&(_=_>=R?_:R)),_}function Xn(_,R,j,J,oe,de){var _e,Te=R&p,De=R&m,Xe=R&g;if(j&&(_e=oe?j(_,J,oe,de):j(_)),_e!==n)return _e;if(!nn(_))return _;var et=lr(_);if(et){if(_e=Vl(_),!Te)return Un(_,_e)}else{var ct=Tn(_),kt=ct==tt||ct==Ue;if(nl(_))return Nc(_,Te);if(ct==nt||ct==fe||kt&&!oe){if(_e=De||kt?{}:Cn(_),!Te)return De?tp(_,Gs(_e,_)):ku(_,Ur(_e,_))}else{if(!Cr[ct])return oe?_:{};_e=rp(_,ct,Te)}}de||(de=new kn);var Ut=de.get(_);if(Ut)return Ut;de.set(_,_e),Mp(_)?_.forEach(function(tr){_e.add(Xn(tr,R,j,tr,_,de))}):Lp(_)&&_.forEach(function(tr,xr){_e.set(xr,Xn(tr,R,j,xr,_,de))});var er=Xe?De?Fl:$l:De?Os:jn,pr=et?n:er(_);return en(pr||_,function(tr,xr){pr&&(xr=tr,tr=_[xr]),io(_e,xr,Xn(tr,R,j,xr,_,de))}),_e}function md(_){var R=jn(_);return function(j){return Rl(j,_,R)}}function Rl(_,R,j){var J=j.length;if(_==null)return!J;for(_=Rr(_);J--;){var oe=j[J],de=R[oe],_e=_[oe];if(_e===n&&!(oe in _)||!de(_e))return!1}return!0}function xc(_,R,j){if(typeof _!="function")throw new Kn(o);return el(function(){_.apply(n,j)},R)}function mi(_,R,j,J){var oe=-1,de=No,_e=!0,Te=_.length,De=[],Xe=R.length;if(!Te)return De;j&&(R=kr(R,$n(j))),J?(de=cl,_e=!1):R.length>=i&&(de=Bs,_e=!1,R=new ro(R));e:for(;++oe<Te;){var et=_[oe],ct=j==null?et:j(et);if(et=J||et!==0?et:0,_e&&ct===ct){for(var kt=Xe;kt--;)if(R[kt]===ct)continue e;De.push(et)}else de(R,ct,J)||De.push(et)}return De}var gi=Ds(hs),gd=Ds(Ta,!0);function wl(_,R){var j=!0;return gi(_,function(J,oe,de){return j=!!R(J,oe,de),j}),j}function ao(_,R,j){for(var J=-1,oe=_.length;++J<oe;){var de=_[J],_e=R(de);if(_e!=null&&(Te===n?_e===_e&&!Zs(_e):j(_e,Te)))var Te=_e,De=de}return De}function yd(_,R,j,J){var oe=_.length;for(j=dr(j),j<0&&(j=-j>oe?0:oe+j),J=J===n||J>oe?oe:dr(J),J<0&&(J+=oe),J=j>J?0:Fp(J);j<J;)_[j++]=R;return _}function Ec(_,R){var j=[];return gi(_,function(J,oe,de){R(J,oe,de)&&j.push(J)}),j}function Zr(_,R,j,J,oe){var de=-1,_e=_.length;for(j||(j=Uu),oe||(oe=[]);++de<_e;){var Te=_[de];R>0&&j(Te)?R>1?Zr(Te,R-1,j,J,oe):Fs(oe,Te):J||(oe[oe.length]=Te)}return oe}var Eu=Ou(),Al=Ou(!0);function hs(_,R){return _&&Eu(_,R,jn)}function Ta(_,R){return _&&Al(_,R,jn)}function Vo(_,R){return oi(R,function(j){return Eo(_[j])})}function Hi(_,R){R=xi(R,_);for(var j=0,J=R.length;_!=null&&j<J;)_=_[Qs(R[j++])];return j&&j==J?_:n}function _u(_,R,j){var J=R(_);return lr(_)?J:Fs(J,j(_))}function Sn(_){return _==null?_===n?St:Je:Fi&&Fi in Rr(_)?Bu(_):zc(_)}function Ca(_,R){return _>R}function Rs(_,R){return _!=null&&Er.call(_,R)}function oo(_,R){return _!=null&&R in Rr(_)}function _c(_,R,j){return _>=mn(R,j)&&_<Jr(R,j)}function Su(_,R,j){for(var J=j?cl:No,oe=_[0].length,de=_.length,_e=de,Te=Fe(de),De=1/0,Xe=[];_e--;){var et=_[_e];_e&&R&&(et=kr(et,$n(R))),De=mn(et.length,De),Te[_e]=!j&&(R||oe>=120&&et.length>=120)?new ro(_e&&et):n}et=_[0];var ct=-1,kt=Te[0];e:for(;++ct<oe&&Xe.length<De;){var Ut=et[ct],er=R?R(Ut):Ut;if(Ut=j||Ut!==0?Ut:0,!(kt?Bs(kt,er):J(Xe,er,j))){for(_e=de;--_e;){var pr=Te[_e];if(!(pr?Bs(pr,er):J(_[_e],er,j)))continue e}kt&&kt.push(er),Xe.push(Ut)}}return Xe}function qi(_,R,j,J){return hs(_,function(oe,de,_e){R(J,j(oe),de,_e)}),J}function ws(_,R,j){R=xi(R,_),_=yn(_,R);var J=_==null?_:_[Qs(qn(R))];return J==null?n:jr(J,_,j)}function bu(_){return an(_)&&Sn(_)==fe}function vd(_){return an(_)&&Sn(_)==pt}function Gi(_){return an(_)&&Sn(_)==We}function As(_,R,j,J,oe){return _===R?!0:_==null||R==null||!an(_)&&!an(R)?_!==_&&R!==R:Tu(_,R,j,J,As,oe)}function Tu(_,R,j,J,oe,de){var _e=lr(_),Te=lr(R),De=_e?Ce:Tn(_),Xe=Te?Ce:Tn(R);De=De==fe?nt:De,Xe=Xe==fe?nt:Xe;var et=De==nt,ct=Xe==nt,kt=De==Xe;if(kt&&nl(_)){if(!nl(R))return!1;_e=!0,et=!1}if(kt&&!et)return de||(de=new kn),_e||oc(_)?Hc(_,R,j,J,oe,de):qc(_,R,De,j,J,oe,de);if(!(j&E)){var Ut=et&&Er.call(_,"__wrapped__"),er=ct&&Er.call(R,"__wrapped__");if(Ut||er){var pr=Ut?_.value():_,tr=er?R.value():R;return de||(de=new kn),oe(pr,tr,j,J,de)}}return kt?(de||(de=new kn),Id(_,R,j,J,oe,de)):!1}function xd(_){return an(_)&&Tn(_)==Pe}function Ho(_,R,j,J){var oe=j.length,de=oe,_e=!J;if(_==null)return!de;for(_=Rr(_);oe--;){var Te=j[oe];if(_e&&Te[2]?Te[1]!==_[Te[0]]:!(Te[0]in _))return!1}for(;++oe<de;){Te=j[oe];var De=Te[0],Xe=_[De],et=Te[1];if(_e&&Te[2]){if(Xe===n&&!(De in _))return!1}else{var ct=new kn;if(J)var kt=J(Xe,et,De,_,R,ct);if(!(kt===n?As(et,Xe,E|x,J,ct):kt))return!1}}return!0}function Sc(_){if(!nn(_)||kd(_))return!1;var R=Eo(_)?pu:hr;return R.test(Ia(_))}function Il(_){return an(_)&&Sn(_)==ot}function yi(_){return an(_)&&Tn(_)==qe}function Dl(_){return an(_)&&Xd(_.length)&&!!Tr[Sn(_)]}function qo(_){return typeof _=="function"?_:_==null?Ls:typeof _=="object"?lr(_)?qr(_[0],_[1]):Cu(_):Qp(_)}function Wi(_){if(!Qi(_))return ma(_);var R=[];for(var j in Rr(_))Er.call(_,j)&&j!="constructor"&&R.push(j);return R}function bc(_){if(!nn(_))return Ld(_);var R=Qi(_),j=[];for(var J in _)J=="constructor"&&(R||!Er.call(_,J))||j.push(J);return j}function Ra(_,R){return _<R}function Tc(_,R){var j=-1,J=Ns(_)?Fe(_.length):[];return gi(_,function(oe,de,_e){J[++j]=R(oe,de,_e)}),J}function Cu(_){var R=Ul(_);return R.length==1&&R[0][2]?Vu(R[0][0],R[0][1]):function(j){return j===_||Ho(j,_,R)}}function qr(_,R){return Lt(_)&&ql(R)?Vu(Qs(_),R):function(j){var J=Cp(j,_);return J===n&&J===R?Rp(j,_):As(R,J,E|x)}}function lo(_,R,j,J,oe){_!==R&&Eu(R,function(de,_e){if(oe||(oe=new kn),nn(de))Cc(_,R,_e,j,lo,J,oe);else{var Te=J?J(Si(_,_e),de,_e+"",_,R,oe):n;Te===n&&(Te=de),Cl(_,_e,Te)}},Os)}function Cc(_,R,j,J,oe,de,_e){var Te=Si(_,j),De=Si(R,j),Xe=_e.get(De);if(Xe){Cl(_,j,Xe);return}var et=de?de(Te,De,j+"",_,R,_e):n,ct=et===n;if(ct){var kt=lr(De),Ut=!kt&&nl(De),er=!kt&&!Ut&&oc(De);et=De,kt||Ut||er?lr(Te)?et=Te:pn(Te)?et=Un(Te):Ut?(ct=!1,et=Nc(De,!0)):er?(ct=!1,et=Td(De,!0)):et=[]:pd(De)||Jl(De)?(et=Te,Jl(Te)?et=Bp(Te):(!nn(Te)||Eo(Te))&&(et=Cn(De))):ct=!1}ct&&(_e.set(De,et),oe(et,De,J,de,_e),_e.delete(De)),Cl(_,j,et)}function Ru(_,R){var j=_.length;if(j)return R+=R<0?j:0,Gr(R,j)?_[R]:n}function Pl(_,R,j){R.length?R=kr(R,function(de){return lr(de)?function(_e){return Hi(_e,de.length===1?de[0]:de)}:de}):R=[Ls];var J=-1;R=kr(R,$n(Kt()));var oe=Tc(_,function(de,_e,Te){var De=kr(R,function(Xe){return Xe(de)});return{criteria:De,index:++J,value:de}});return dc(oe,function(de,_e){return ep(de,_e,j)})}function Rc(_,R){return wa(_,R,function(j,J){return Rp(_,J)})}function wa(_,R,j){for(var J=-1,oe=R.length,de={};++J<oe;){var _e=R[J],Te=Hi(_,_e);j(Te,_e)&&co(de,xi(_e,_),Te)}return de}function Kr(_){return function(R){return Hi(R,_)}}function tn(_,R,j,J){var oe=J?pl:la,de=-1,_e=R.length,Te=_;for(_===R&&(R=Un(R)),j&&(Te=kr(_,$n(j)));++de<_e;)for(var De=0,Xe=R[de],et=j?j(Xe):Xe;(De=oe(Te,et,De,J))>-1;)Te!==_&&$o.call(Te,De,1),$o.call(_,De,1);return _}function un(_,R){for(var j=_?R.length:0,J=j-1;j--;){var oe=R[j];if(j==J||oe!==de){var de=oe;Gr(oe)?$o.call(_,oe,1):Iu(_,oe)}}return _}function Go(_,R){return _+Hs(Ja()*(R-_+1))}function kl(_,R,j,J){for(var oe=-1,de=Jr(Vs((R-_)/(j||1)),0),_e=Fe(de);de--;)_e[J?de:++oe]=_,_+=j;return _e}function uo(_,R){var j="";if(!_||R<1||R>M)return j;do R%2&&(j+=_),R=Hs(R/2),R&&(_+=_);while(R);return j}function cr(_,R){return ms(Hu(_,R,Ls),_+"")}function On(_){return fi(lc(_))}function wc(_,R){var j=lc(_);return qu(j,Vi(R,0,j.length))}function co(_,R,j,J){if(!nn(_))return _;R=xi(R,_);for(var oe=-1,de=R.length,_e=de-1,Te=_;Te!=null&&++oe<de;){var De=Qs(R[oe]),Xe=j;if(De==="__proto__"||De==="constructor"||De==="prototype")return _;if(oe!=_e){var et=Te[De];Xe=J?J(et,De,Te):n,Xe===n&&(Xe=nn(et)?et:Gr(R[oe+1])?[]:{})}io(Te,De,Xe),Te=Te[De]}return _}var wu=eo?function(_,R){return eo.set(_,R),_}:Ls,vi=Xa?function(_,R){return Xa(_,"toString",{configurable:!0,enumerable:!1,value:Ap(R),writable:!0})}:Ls;function Is(_){return qu(lc(_))}function Ln(_,R,j){var J=-1,oe=_.length;R<0&&(R=-R>oe?0:oe+R),j=j>oe?oe:j,j<0&&(j+=oe),oe=R>j?0:j-R>>>0,R>>>=0;for(var de=Fe(oe);++J<oe;)de[J]=_[J+R];return de}function Ac(_,R){var j;return gi(_,function(J,oe,de){return j=R(J,oe,de),!j}),!!j}function Wo(_,R,j){var J=0,oe=_==null?J:_.length;if(typeof R=="number"&&R===R&&oe<=ce){for(;J<oe;){var de=J+oe>>>1,_e=_[de];_e!==null&&!Zs(_e)&&(j?_e<=R:_e<R)?J=de+1:oe=de}return oe}return Au(_,R,Ls,j)}function Au(_,R,j,J){var oe=0,de=_==null?0:_.length;if(de===0)return 0;R=j(R);for(var _e=R!==R,Te=R===null,De=Zs(R),Xe=R===n;oe<de;){var et=Hs((oe+de)/2),ct=j(_[et]),kt=ct!==n,Ut=ct===null,er=ct===ct,pr=Zs(ct);if(_e)var tr=J||er;else Xe?tr=er&&(J||kt):Te?tr=er&&kt&&(J||!Ut):De?tr=er&&kt&&!Ut&&(J||!pr):Ut||pr?tr=!1:tr=J?ct<=R:ct<R;tr?oe=et+1:de=et}return mn(de,ae)}function Ic(_,R){for(var j=-1,J=_.length,oe=0,de=[];++j<J;){var _e=_[j],Te=R?R(_e):_e;if(!j||!Ji(Te,De)){var De=Te;de[oe++]=_e===0?0:_e}}return de}function Dc(_){return typeof _=="number"?_:Zs(_)?ee:+_}function Jn(_){if(typeof _=="string")return _;if(lr(_))return kr(_,Jn)+"";if(Zs(_))return N?N.call(_):"";var R=_+"";return R=="0"&&1/_==-K?"-0":R}function zi(_,R,j){var J=-1,oe=No,de=_.length,_e=!0,Te=[],De=Te;if(j)_e=!1,oe=cl;else if(de>=i){var Xe=R?null:Ad(_);if(Xe)return li(Xe);_e=!1,oe=Bs,De=new ro}else De=R?[]:Te;e:for(;++J<de;){var et=_[J],ct=R?R(et):et;if(et=j||et!==0?et:0,_e&&ct===ct){for(var kt=De.length;kt--;)if(De[kt]===ct)continue e;R&&De.push(ct),Te.push(et)}else oe(De,ct,j)||(De!==Te&&De.push(ct),Te.push(et))}return Te}function Iu(_,R){return R=xi(R,_),_=yn(_,R),_==null||delete _[Qs(qn(R))]}function Pc(_,R,j,J){return co(_,R,j(Hi(_,R)),J)}function Nl(_,R,j,J){for(var oe=_.length,de=J?oe:-1;(J?de--:++de<oe)&&R(_[de],de,_););return j?Ln(_,J?0:de,J?de+1:oe):Ln(_,J?de+1:0,J?oe:de)}function zo(_,R){var j=_;return j instanceof te&&(j=j.value()),aa(R,function(J,oe){return oe.func.apply(oe.thisArg,Fs([J],oe.args))},j)}function Du(_,R,j){var J=_.length;if(J<2)return J?zi(_[0]):[];for(var oe=-1,de=Fe(J);++oe<J;)for(var _e=_[oe],Te=-1;++Te<J;)Te!=oe&&(de[oe]=mi(de[oe]||_e,_[Te],R,j));return zi(Zr(de,1),R,j)}function Ol(_,R,j){for(var J=-1,oe=_.length,de=R.length,_e={};++J<oe;){var Te=J<de?R[J]:n;j(_e,_[J],Te)}return _e}function Ko(_){return pn(_)?_:[]}function Pu(_){return typeof _=="function"?_:Ls}function xi(_,R){return lr(_)?_:Lt(_,R)?[_]:Qc(Or(_))}var Ed=cr;function Ki(_,R,j){var J=_.length;return j=j===n?J:j,!R&&j>=J?_:Ln(_,R,j)}var kc=hu||function(_){return $r.clearTimeout(_)};function Nc(_,R){if(R)return _.slice();var j=_.length,J=Sl?Sl(j):new _.constructor(j);return _.copy(J),J}function Ll(_){var R=new _.constructor(_.byteLength);return new Qa(R).set(new Qa(_)),R}function _d(_,R){var j=R?Ll(_.buffer):_.buffer;return new _.constructor(j,_.byteOffset,_.byteLength)}function Sd(_){var R=new _.constructor(_.source,or.exec(_));return R.lastIndex=_.lastIndex,R}function bd(_){return Pn?Rr(Pn.call(_)):{}}function Td(_,R){var j=R?Ll(_.buffer):_.buffer;return new _.constructor(j,_.byteOffset,_.length)}function Oc(_,R){if(_!==R){var j=_!==n,J=_===null,oe=_===_,de=Zs(_),_e=R!==n,Te=R===null,De=R===R,Xe=Zs(R);if(!Te&&!Xe&&!de&&_>R||de&&_e&&De&&!Te&&!Xe||J&&_e&&De||!j&&De||!oe)return 1;if(!J&&!de&&!Xe&&_<R||Xe&&j&&oe&&!J&&!de||Te&&j&&oe||!_e&&oe||!De)return-1}return 0}function ep(_,R,j){for(var J=-1,oe=_.criteria,de=R.criteria,_e=oe.length,Te=j.length;++J<_e;){var De=Oc(oe[J],de[J]);if(De){if(J>=Te)return De;var Xe=j[J];return De*(Xe=="desc"?-1:1)}}return _.index-R.index}function Cd(_,R,j,J){for(var oe=-1,de=_.length,_e=j.length,Te=-1,De=R.length,Xe=Jr(de-_e,0),et=Fe(De+Xe),ct=!J;++Te<De;)et[Te]=R[Te];for(;++oe<_e;)(ct||oe<de)&&(et[j[oe]]=_[oe]);for(;Xe--;)et[Te++]=_[oe++];return et}function Lc(_,R,j,J){for(var oe=-1,de=_.length,_e=-1,Te=j.length,De=-1,Xe=R.length,et=Jr(de-Te,0),ct=Fe(et+Xe),kt=!J;++oe<et;)ct[oe]=_[oe];for(var Ut=oe;++De<Xe;)ct[Ut+De]=R[De];for(;++_e<Te;)(kt||oe<de)&&(ct[Ut+j[_e]]=_[oe++]);return ct}function Un(_,R){var j=-1,J=_.length;for(R||(R=Fe(J));++j<J;)R[j]=_[j];return R}function Ws(_,R,j,J){var oe=!j;j||(j={});for(var de=-1,_e=R.length;++de<_e;){var Te=R[de],De=J?J(j[Te],_[Te],Te,j,_):n;De===n&&(De=_[Te]),oe?hi(j,Te,De):io(j,Te,De)}return j}function ku(_,R){return Ws(_,zs(_),R)}function tp(_,R){return Ws(_,Dd(_),R)}function Nu(_,R){return function(j,J){var oe=lr(j)?ss:fs,de=R?R():{};return oe(j,_,Kt(J,2),de)}}function Yo(_){return cr(function(R,j){var J=-1,oe=j.length,de=oe>1?j[oe-1]:n,_e=oe>2?j[2]:n;for(de=_.length>3&&typeof de=="function"?(oe--,de):n,_e&&Hn(j[0],j[1],_e)&&(de=oe<3?n:de,oe=1),R=Rr(R);++J<oe;){var Te=j[J];Te&&_(R,Te,J,de)}return R})}function Ds(_,R){return function(j,J){if(j==null)return j;if(!Ns(j))return _(j,J);for(var oe=j.length,de=R?oe:-1,_e=Rr(j);(R?de--:++de<oe)&&J(_e[de],de,_e)!==!1;);return j}}function Ou(_){return function(R,j,J){for(var oe=-1,de=Rr(R),_e=J(R),Te=_e.length;Te--;){var De=_e[_?Te:++oe];if(j(de[De],De,de)===!1)break}return R}}function Lu(_,R,j){var J=R&b,oe=Qo(_);function de(){var _e=this&&this!==$r&&this instanceof de?oe:_;return _e.apply(J?j:this,arguments)}return de}function jc(_){return function(R){R=Or(R);var j=Ni(R)?In(R):n,J=j?j[0]:R.charAt(0),oe=j?Ki(j,1).join(""):R.slice(1);return J[_]()+oe}}function po(_){return function(R){return aa(Kp(zp(R).replace(eu,"")),_,"")}}function Qo(_){return function(){var R=arguments;switch(R.length){case 0:return new _;case 1:return new _(R[0]);case 2:return new _(R[0],R[1]);case 3:return new _(R[0],R[1],R[2]);case 4:return new _(R[0],R[1],R[2],R[3]);case 5:return new _(R[0],R[1],R[2],R[3],R[4]);case 6:return new _(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new _(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var j=V(_.prototype),J=_.apply(j,R);return nn(J)?J:j}}function Mc(_,R,j){var J=Qo(_);function oe(){for(var de=arguments.length,_e=Fe(de),Te=de,De=Yi(oe);Te--;)_e[Te]=arguments[Te];var Xe=de<3&&_e[0]!==De&&_e[de-1]!==De?[]:zn(_e,De);if(de-=Xe.length,de<j)return Vn(_,R,Xo,oe.placeholder,n,_e,Xe,n,n,j-de);var et=this&&this!==$r&&this instanceof oe?J:_;return jr(et,this,_e)}return oe}function fo(_){return function(R,j,J){var oe=Rr(R);if(!Ns(R)){var de=Kt(j,3);R=jn(R),j=function(Te){return de(oe[Te],Te,oe)}}var _e=_(R,j,J);return _e>-1?oe[de?R[_e]:_e]:n}}function ju(_){return _i(function(R){var j=R.length,J=j,oe=Y.prototype.thru;for(_&&R.reverse();J--;){var de=R[J];if(typeof de!="function")throw new Kn(o);if(oe&&!_e&&Jo(de)=="wrapper")var _e=new Y([],!0)}for(J=_e?J:j;++J<j;){de=R[J];var Te=Jo(de),De=Te=="wrapper"?Fu(de):n;De&&Hl(De[0])&&De[1]==(O|T|D|B)&&!De[4].length&&De[9]==1?_e=_e[Jo(De[0])].apply(_e,De[3]):_e=de.length==1&&Hl(de)?_e[Te]():_e.thru(de)}return function(){var Xe=arguments,et=Xe[0];if(_e&&Xe.length==1&&lr(et))return _e.plant(et).value();for(var ct=0,kt=j?R[ct].apply(this,Xe):et;++ct<j;)kt=R[ct].call(this,kt);return kt}})}function Xo(_,R,j,J,oe,de,_e,Te,De,Xe){var et=R&O,ct=R&b,kt=R&S,Ut=R&(T|I),er=R&F,pr=kt?n:Qo(_);function tr(){for(var xr=arguments.length,br=Fe(xr),ei=xr;ei--;)br[ei]=arguments[ei];if(Ut)var ys=Yi(tr),ti=uu(br,ys);if(J&&(br=Cd(br,J,oe,Ut)),de&&(br=Lc(br,de,_e,Ut)),xr-=ti,Ut&&xr<Xe){var fn=zn(br,ys);return Vn(_,R,Xo,tr.placeholder,j,br,fn,Te,De,Xe-xr)}var Zi=ct?j:this,So=kt?Zi[_]:_;return xr=br.length,Te?br=Ks(br,Te):er&&xr>1&&br.reverse(),et&&De<xr&&(br.length=De),this&&this!==$r&&this instanceof tr&&(So=pr||Qo(So)),So.apply(Zi,br)}return tr}function Rd(_,R){return function(j,J){return qi(j,_,R(J),{})}}function jl(_,R){return function(j,J){var oe;if(j===n&&J===n)return R;if(j!==n&&(oe=j),J!==n){if(oe===n)return J;typeof j=="string"||typeof J=="string"?(j=Jn(j),J=Jn(J)):(j=Dc(j),J=Dc(J)),oe=_(j,J)}return oe}}function Mu(_){return _i(function(R){return R=kr(R,$n(Kt())),cr(function(j){var J=this;return _(R,function(oe){return jr(oe,J,j)})})})}function Ml(_,R){R=R===n?" ":Jn(R);var j=R.length;if(j<2)return j?uo(R,_):R;var J=uo(R,Vs(_/os(R)));return Ni(R)?Ki(In(J),0,_).join(""):J.slice(0,_)}function wd(_,R,j,J){var oe=R&b,de=Qo(_);function _e(){for(var Te=-1,De=arguments.length,Xe=-1,et=J.length,ct=Fe(et+De),kt=this&&this!==$r&&this instanceof _e?de:_;++Xe<et;)ct[Xe]=J[Xe];for(;De--;)ct[Xe++]=arguments[++Te];return jr(kt,oe?j:this,ct)}return _e}function $c(_){return function(R,j,J){return J&&typeof J!="number"&&Hn(R,j,J)&&(j=J=n),R=_o(R),j===n?(j=R,R=0):j=_o(j),J=J===n?R<j?1:-1:_o(J),kl(R,j,J,_)}}function $u(_){return function(R,j){return typeof R=="string"&&typeof j=="string"||(R=bi(R),j=bi(j)),_(R,j)}}function Vn(_,R,j,J,oe,de,_e,Te,De,Xe){var et=R&T,ct=et?_e:n,kt=et?n:_e,Ut=et?de:n,er=et?n:de;R|=et?D:P,R&=~(et?P:D),R&C||(R&=-4);var pr=[_,R,oe,Ut,ct,er,kt,Te,De,Xe],tr=j.apply(n,pr);return Hl(_)&&Kc(tr,pr),tr.placeholder=J,Yc(tr,_,R)}function bn(_){var R=zr[_];return function(j,J){if(j=bi(j),J=J==null?0:mn(dr(J),292),J&&ha(j)){var oe=(Or(j)+"e").split("e"),de=R(oe[0]+"e"+(+oe[1]+J));return oe=(Or(de)+"e").split("e"),+(oe[0]+"e"+(+oe[1]-J))}return R(j)}}var Ad=Hr&&1/li(new Hr([,-0]))[1]==K?function(_){return new Hr(_)}:Pp;function Fc(_){return function(R){var j=Tn(R);return j==Pe?Oi(R):j==qe?gc(R):pc(R,_(R))}}function Ei(_,R,j,J,oe,de,_e,Te){var De=R&S;if(!De&&typeof _!="function")throw new Kn(o);var Xe=J?J.length:0;if(Xe||(R&=-97,J=oe=n),_e=_e===n?_e:Jr(dr(_e),0),Te=Te===n?Te:dr(Te),Xe-=oe?oe.length:0,R&P){var et=J,ct=oe;J=oe=n}var kt=De?n:Fu(_),Ut=[_,R,j,J,oe,et,ct,de,_e,Te];if(kt&&Od(Ut,kt),_=Ut[0],R=Ut[1],j=Ut[2],J=Ut[3],oe=Ut[4],Te=Ut[9]=Ut[9]===n?De?0:_.length:Jr(Ut[9]-Xe,0),!Te&&R&(T|I)&&(R&=-25),!R||R==b)var er=Lu(_,R,j);else R==T||R==I?er=Mc(_,R,Te):(R==D||R==(b|D))&&!oe.length?er=wd(_,R,j,J):er=Xo.apply(n,Ut);var pr=kt?wu:Kc;return Yc(pr(er,Ut),_,R)}function Bc(_,R,j,J){return _===n||Ji(_,us[j])&&!Er.call(J,j)?R:_}function Uc(_,R,j,J,oe,de){return nn(_)&&nn(R)&&(de.set(R,_),lo(_,R,n,Uc,de),de.delete(R)),_}function Vc(_){return pd(_)?n:_}function Hc(_,R,j,J,oe,de){var _e=j&E,Te=_.length,De=R.length;if(Te!=De&&!(_e&&De>Te))return!1;var Xe=de.get(_),et=de.get(R);if(Xe&&et)return Xe==R&&et==_;var ct=-1,kt=!0,Ut=j&x?new ro:n;for(de.set(_,R),de.set(R,_);++ct<Te;){var er=_[ct],pr=R[ct];if(J)var tr=_e?J(pr,er,ct,R,_,de):J(er,pr,ct,_,R,de);if(tr!==n){if(tr)continue;kt=!1;break}if(Ut){if(!oa(R,function(xr,br){if(!Bs(Ut,br)&&(er===xr||oe(er,xr,j,J,de)))return Ut.push(br)})){kt=!1;break}}else if(!(er===pr||oe(er,pr,j,J,de))){kt=!1;break}}return de.delete(_),de.delete(R),kt}function qc(_,R,j,J,oe,de,_e){switch(j){case rr:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case pt:return!(_.byteLength!=R.byteLength||!de(new Qa(_),new Qa(R)));case Ye:case We:case Qe:return Ji(+_,+R);case rt:return _.name==R.name&&_.message==R.message;case ot:case mt:return _==R+"";case Pe:var Te=Oi;case qe:var De=J&E;if(Te||(Te=li),_.size!=R.size&&!De)return!1;var Xe=_e.get(_);if(Xe)return Xe==R;J|=x,_e.set(_,R);var et=Hc(Te(_),Te(R),J,oe,de,_e);return _e.delete(_),et;case st:if(Pn)return Pn.call(_)==Pn.call(R)}return!1}function Id(_,R,j,J,oe,de){var _e=j&E,Te=$l(_),De=Te.length,Xe=$l(R),et=Xe.length;if(De!=et&&!_e)return!1;for(var ct=De;ct--;){var kt=Te[ct];if(!(_e?kt in R:Er.call(R,kt)))return!1}var Ut=de.get(_),er=de.get(R);if(Ut&&er)return Ut==R&&er==_;var pr=!0;de.set(_,R),de.set(R,_);for(var tr=_e;++ct<De;){kt=Te[ct];var xr=_[kt],br=R[kt];if(J)var ei=_e?J(br,xr,kt,R,_,de):J(xr,br,kt,_,R,de);if(!(ei===n?xr===br||oe(xr,br,j,J,de):ei)){pr=!1;break}tr||(tr=kt=="constructor")}if(pr&&!tr){var ys=_.constructor,ti=R.constructor;ys!=ti&&"constructor"in _&&"constructor"in R&&!(typeof ys=="function"&&ys instanceof ys&&typeof ti=="function"&&ti instanceof ti)&&(pr=!1)}return de.delete(_),de.delete(R),pr}function _i(_){return ms(Hu(_,n,Wu),_+"")}function $l(_){return _u(_,jn,zs)}function Fl(_){return _u(_,Os,Dd)}var Fu=eo?function(_){return eo.get(_)}:Pp;function Jo(_){for(var R=_.name+"",j=ya[R],J=Er.call(ya,R)?j.length:0;J--;){var oe=j[J],de=oe.func;if(de==null||de==_)return oe.name}return R}function Yi(_){var R=Er.call(k,"placeholder")?k:_;return R.placeholder}function Kt(){var _=k.iteratee||Ip;return _=_===Ip?qo:_,arguments.length?_(arguments[0],arguments[1]):_}function Bl(_,R){var j=_.__data__;return Zo(R)?j[typeof R=="string"?"string":"hash"]:j.map}function Ul(_){for(var R=jn(_),j=R.length;j--;){var J=R[j],oe=_[J];R[j]=[J,oe,ql(oe)]}return R}function Aa(_,R){var j=ki(_,R);return Sc(j)?j:n}function Bu(_){var R=Er.call(_,Fi),j=_[Fi];try{_[Fi]=n;var J=!0}catch{}var oe=Ka.call(_);return J&&(R?_[Fi]=j:delete _[Fi]),oe}var zs=Bi?function(_){return _==null?[]:(_=Rr(_),oi(Bi(_),function(R){return Mo.call(_,R)}))}:kp,Dd=Bi?function(_){for(var R=[];_;)Fs(R,zs(_)),_=cs(_);return R}:kp,Tn=Sn;(Ss&&Tn(new Ss(new ArrayBuffer(1)))!=rr||mr&&Tn(new mr)!=Pe||ds&&Tn(ds.resolve())!=ft||Hr&&Tn(new Hr)!=qe||Dn&&Tn(new Dn)!=bt)&&(Tn=function(_){var R=Sn(_),j=R==nt?_.constructor:n,J=j?Ia(j):"";if(J)switch(J){case Tl:return rr;case ci:return Pe;case gu:return ft;case va:return qe;case bs:return bt}return R});function Gc(_,R,j){for(var J=-1,oe=j.length;++J<oe;){var de=j[J],_e=de.size;switch(de.type){case"drop":_+=_e;break;case"dropRight":R-=_e;break;case"take":R=mn(R,_+_e);break;case"takeRight":_=Jr(_,R-_e);break}}return{start:_,end:R}}function Pd(_){var R=_.match(Et);return R?R[1].split(It):[]}function Wc(_,R,j){R=xi(R,_);for(var J=-1,oe=R.length,de=!1;++J<oe;){var _e=Qs(R[J]);if(!(de=_!=null&&j(_,_e)))break;_=_[_e]}return de||++J!=oe?de:(oe=_==null?0:_.length,!!oe&&Xd(oe)&&Gr(_e,oe)&&(lr(_)||Jl(_)))}function Vl(_){var R=_.length,j=new _.constructor(R);return R&&typeof _[0]=="string"&&Er.call(_,"index")&&(j.index=_.index,j.input=_.input),j}function Cn(_){return typeof _.constructor=="function"&&!Qi(_)?V(cs(_)):{}}function rp(_,R,j){var J=_.constructor;switch(R){case pt:return Ll(_);case Ye:case We:return new J(+_);case rr:return _d(_,j);case Ft:case Qt:case nr:case Ht:case Ar:case Ir:case Qr:case ke:case Oe:return Td(_,j);case Pe:return new J;case Qe:case mt:return new J(_);case ot:return Sd(_);case qe:return new J;case st:return bd(_)}}function np(_,R){var j=R.length;if(!j)return _;var J=j-1;return R[J]=(j>1?"& ":"")+R[J],R=R.join(j>2?", ":" "),_.replace(lt,`{
/* [wrapped with `+R+`] */
`)}function Uu(_){return lr(_)||Jl(_)||!!(fu&&_&&_[fu])}function Gr(_,R){var j=typeof _;return R=R??M,!!R&&(j=="number"||j!="symbol"&&He.test(_))&&_>-1&&_%1==0&&_<R}function Hn(_,R,j){if(!nn(j))return!1;var J=typeof R;return(J=="number"?Ns(j)&&Gr(R,j.length):J=="string"&&R in j)?Ji(j[R],_):!1}function Lt(_,R){if(lr(_))return!1;var j=typeof _;return j=="number"||j=="symbol"||j=="boolean"||_==null||Zs(_)?!0:Ee.test(_)||!sr.test(_)||R!=null&&_ in Rr(R)}function Zo(_){var R=typeof _;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?_!=="__proto__":_===null}function Hl(_){var R=Jo(_),j=k[R];if(typeof j!="function"||!(R in te.prototype))return!1;if(_===j)return!0;var J=Fu(j);return!!J&&_===J[0]}function kd(_){return!!Lo&&Lo in _}var sp=Mi?Eo:Np;function Qi(_){var R=_&&_.constructor,j=typeof R=="function"&&R.prototype||us;return _===j}function ql(_){return _===_&&!nn(_)}function Vu(_,R){return function(j){return j==null?!1:j[_]===R&&(R!==n||_ in Rr(j))}}function Nd(_){var R=$e(_,function(J){return j.size===c&&j.clear(),J}),j=R.cache;return R}function Od(_,R){var j=_[1],J=R[1],oe=j|J,de=oe<(b|S|O),_e=J==O&&j==T||J==O&&j==B&&_[7].length<=R[8]||J==(O|B)&&R[7].length<=R[8]&&j==T;if(!(de||_e))return _;J&b&&(_[2]=R[2],oe|=j&b?0:C);var Te=R[3];if(Te){var De=_[3];_[3]=De?Cd(De,Te,R[4]):Te,_[4]=De?zn(_[3],d):R[4]}return Te=R[5],Te&&(De=_[5],_[5]=De?Lc(De,Te,R[6]):Te,_[6]=De?zn(_[5],d):R[6]),Te=R[7],Te&&(_[7]=Te),J&O&&(_[8]=_[8]==null?R[8]:mn(_[8],R[8])),_[9]==null&&(_[9]=R[9]),_[0]=R[0],_[1]=oe,_}function Ld(_){var R=[];if(_!=null)for(var j in Rr(_))R.push(j);return R}function zc(_){return Ka.call(_)}function Hu(_,R,j){return R=Jr(R===n?_.length-1:R,0),function(){for(var J=arguments,oe=-1,de=Jr(J.length-R,0),_e=Fe(de);++oe<de;)_e[oe]=J[R+oe];oe=-1;for(var Te=Fe(R+1);++oe<R;)Te[oe]=J[oe];return Te[R]=j(_e),jr(_,this,Te)}}function yn(_,R){return R.length<2?_:Hi(_,Ln(R,0,-1))}function Ks(_,R){for(var j=_.length,J=mn(R.length,j),oe=Un(_);J--;){var de=R[J];_[J]=Gr(de,j)?oe[de]:n}return _}function Si(_,R){if(!(R==="constructor"&&typeof _[R]=="function")&&R!="__proto__")return _[R]}var Kc=Ys(wu),el=Fo||function(_,R){return $r.setTimeout(_,R)},ms=Ys(vi);function Yc(_,R,j){var J=R+"";return ms(_,np(J,jd(Pd(J),j)))}function Ys(_){var R=0,j=0;return function(){var J=bl(),oe=ne-(J-j);if(j=J,oe>0){if(++R>=Z)return arguments[0]}else R=0;return _.apply(n,arguments)}}function qu(_,R){var j=-1,J=_.length,oe=J-1;for(R=R===n?J:R;++j<R;){var de=Go(j,oe),_e=_[de];_[de]=_[j],_[j]=_e}return _.length=R,_}var Qc=Nd(function(_){var R=[];return _.charCodeAt(0)===46&&R.push(""),_.replace(we,function(j,J,oe,de){R.push(oe?de.replace(Dt,"$1"):J||j)}),R});function Qs(_){if(typeof _=="string"||Zs(_))return _;var R=_+"";return R=="0"&&1/_==-K?"-0":R}function Ia(_){if(_!=null){try{return za.call(_)}catch{}try{return _+""}catch{}}return""}function jd(_,R){return en(he,function(j){var J="_."+j[0];R&j[1]&&!No(_,J)&&_.push(J)}),_.sort()}function Md(_){if(_ instanceof te)return _.clone();var R=new Y(_.__wrapped__,_.__chain__);return R.__actions__=Un(_.__actions__),R.__index__=_.__index__,R.__values__=_.__values__,R}function Gu(_,R,j){(j?Hn(_,R,j):R===n)?R=1:R=Jr(dr(R),0);var J=_==null?0:_.length;if(!J||R<1)return[];for(var oe=0,de=0,_e=Fe(Vs(J/R));oe<J;)_e[de++]=Ln(_,oe,oe+=R);return _e}function Xc(_){for(var R=-1,j=_==null?0:_.length,J=0,oe=[];++R<j;){var de=_[R];de&&(oe[J++]=de)}return oe}function Ps(){var _=arguments.length;if(!_)return[];for(var R=Fe(_-1),j=arguments[0],J=_;J--;)R[J-1]=arguments[J];return Fs(lr(j)?Un(j):[j],Zr(R,1))}var Sr=cr(function(_,R){return pn(_)?mi(_,Zr(R,1,pn,!0)):[]}),vn=cr(function(_,R){var j=qn(R);return pn(j)&&(j=n),pn(_)?mi(_,Zr(R,1,pn,!0),Kt(j,2)):[]}),sn=cr(function(_,R){var j=qn(R);return pn(j)&&(j=n),pn(_)?mi(_,Zr(R,1,pn,!0),n,j):[]});function Rn(_,R,j){var J=_==null?0:_.length;return J?(R=j||R===n?1:dr(R),Ln(_,R<0?0:R,J)):[]}function gs(_,R,j){var J=_==null?0:_.length;return J?(R=j||R===n?1:dr(R),R=J-R,Ln(_,0,R<0?0:R)):[]}function tl(_,R){return _&&_.length?Nl(_,Kt(R,3),!0,!0):[]}function dn(_,R){return _&&_.length?Nl(_,Kt(R,3),!0):[]}function Gl(_,R,j,J){var oe=_==null?0:_.length;return oe?(j&&typeof j!="number"&&Hn(_,R,j)&&(j=0,J=oe),yd(_,R,j,J)):[]}function Da(_,R,j){var J=_==null?0:_.length;if(!J)return-1;var oe=j==null?0:dr(j);return oe<0&&(oe=Jr(J+oe,0)),Va(_,Kt(R,3),oe)}function Wl(_,R,j){var J=_==null?0:_.length;if(!J)return-1;var oe=J-1;return j!==n&&(oe=dr(j),oe=j<0?Jr(J+oe,0):mn(oe,J-1)),Va(_,Kt(R,3),oe,!0)}function Wu(_){var R=_==null?0:_.length;return R?Zr(_,1):[]}function zl(_){var R=_==null?0:_.length;return R?Zr(_,K):[]}function Zn(_,R){var j=_==null?0:_.length;return j?(R=R===n?1:dr(R),Zr(_,R)):[]}function Jc(_){for(var R=-1,j=_==null?0:_.length,J={};++R<j;){var oe=_[R];J[oe[0]]=oe[1]}return J}function ho(_){return _&&_.length?_[0]:n}function Xi(_,R,j){var J=_==null?0:_.length;if(!J)return-1;var oe=j==null?0:dr(j);return oe<0&&(oe=Jr(J+oe,0)),la(_,R,oe)}function zu(_){var R=_==null?0:_.length;return R?Ln(_,0,-1):[]}var Zc=cr(function(_){var R=kr(_,Ko);return R.length&&R[0]===_[0]?Su(R):[]}),Pa=cr(function(_){var R=qn(_),j=kr(_,Ko);return R===qn(j)?R=n:j.pop(),j.length&&j[0]===_[0]?Su(j,Kt(R,2)):[]}),Ku=cr(function(_){var R=qn(_),j=kr(_,Ko);return R=typeof R=="function"?R:n,R&&j.pop(),j.length&&j[0]===_[0]?Su(j,n,R):[]});function ka(_,R){return _==null?"":Bo.call(_,R)}function qn(_){var R=_==null?0:_.length;return R?_[R-1]:n}function Kl(_,R,j){var J=_==null?0:_.length;if(!J)return-1;var oe=J;return j!==n&&(oe=dr(j),oe=oe<0?Jr(J+oe,0):mn(oe,J-1)),R===R?yc(_,R,oe):Va(_,au,oe,!0)}function ed(_,R){return _&&_.length?Ru(_,dr(R)):n}var Yu=cr(Yl);function Yl(_,R){return _&&_.length&&R&&R.length?tn(_,R):_}function Gn(_,R,j){return _&&_.length&&R&&R.length?tn(_,R,Kt(j,2)):_}function Na(_,R,j){return _&&_.length&&R&&R.length?tn(_,R,n,j):_}var Xs=_i(function(_,R){var j=_==null?0:_.length,J=xu(_,R);return un(_,kr(R,function(oe){return Gr(oe,j)?+oe:oe}).sort(Oc)),J});function es(_,R){var j=[];if(!(_&&_.length))return j;var J=-1,oe=[],de=_.length;for(R=Kt(R,3);++J<de;){var _e=_[J];R(_e,J,_)&&(j.push(_e),oe.push(J))}return un(_,oe),j}function Qu(_){return _==null?_:Za.call(_)}function td(_,R,j){var J=_==null?0:_.length;return J?(j&&typeof j!="number"&&Hn(_,R,j)?(R=0,j=J):(R=R==null?0:dr(R),j=j===n?J:dr(j)),Ln(_,R,j)):[]}function rd(_,R){return Wo(_,R)}function ap(_,R,j){return Au(_,R,Kt(j,2))}function Oa(_,R){var j=_==null?0:_.length;if(j){var J=Wo(_,R);if(J<j&&Ji(_[J],R))return J}return-1}function $d(_,R){return Wo(_,R,!0)}function nd(_,R,j){return Au(_,R,Kt(j,2),!0)}function mo(_,R){var j=_==null?0:_.length;if(j){var J=Wo(_,R,!0)-1;if(Ji(_[J],R))return J}return-1}function sd(_){return _&&_.length?Ic(_):[]}function go(_,R){return _&&_.length?Ic(_,Kt(R,2)):[]}function Fd(_){var R=_==null?0:_.length;return R?Ln(_,1,R):[]}function Bd(_,R,j){return _&&_.length?(R=j||R===n?1:dr(R),Ln(_,0,R<0?0:R)):[]}function ad(_,R,j){var J=_==null?0:_.length;return J?(R=j||R===n?1:dr(R),R=J-R,Ln(_,R<0?0:R,J)):[]}function Xu(_,R){return _&&_.length?Nl(_,Kt(R,3),!1,!0):[]}function lp(_,R){return _&&_.length?Nl(_,Kt(R,3)):[]}var up=cr(function(_){return zi(Zr(_,1,pn,!0))}),Ud=cr(function(_){var R=qn(_);return pn(R)&&(R=n),zi(Zr(_,1,pn,!0),Kt(R,2))}),Vd=cr(function(_){var R=qn(_);return R=typeof R=="function"?R:n,zi(Zr(_,1,pn,!0),n,R)});function yo(_){return _&&_.length?zi(_):[]}function cp(_,R){return _&&_.length?zi(_,Kt(R,2)):[]}function rl(_,R){return R=typeof R=="function"?R:n,_&&_.length?zi(_,n,R):[]}function Ju(_){if(!(_&&_.length))return[];var R=0;return _=oi(_,function(j){if(pn(j))return R=Jr(j.length,R),!0}),Ga(R,function(j){return kr(_,fl(j))})}function Yr(_,R){if(!(_&&_.length))return[];var j=Ju(_);return R==null?j:kr(j,function(J){return jr(R,n,J)})}var dp=cr(function(_,R){return pn(_)?mi(_,R):[]}),Hd=cr(function(_){return Du(oi(_,pn))}),pp=cr(function(_){var R=qn(_);return pn(R)&&(R=n),Du(oi(_,pn),Kt(R,2))}),fp=cr(function(_){var R=qn(_);return R=typeof R=="function"?R:n,Du(oi(_,pn),n,R)}),qd=cr(Ju);function Gd(_,R){return Ol(_||[],R||[],io)}function hp(_,R){return Ol(_||[],R||[],co)}var ks=cr(function(_){var R=_.length,j=R>1?_[R-1]:n;return j=typeof j=="function"?(_.pop(),j):n,Yr(_,j)});function Zu(_){var R=k(_);return R.__chain__=!0,R}function mp(_,R){return R(_),_}function Js(_,R){return R(_)}var ec=_i(function(_){var R=_.length,j=R?_[0]:0,J=this.__wrapped__,oe=function(de){return xu(de,_)};return R>1||this.__actions__.length||!(J instanceof te)||!Gr(j)?this.thru(oe):(J=J.slice(j,+j+(R?1:0)),J.__actions__.push({func:Js,args:[oe],thisArg:n}),new Y(J,this.__chain__).thru(function(de){return R&&!de.length&&de.push(n),de}))});function vo(){return Zu(this)}function tc(){return new Y(this.value(),this.__chain__)}function od(){this.__values__===n&&(this.__values__=$p(this.value()));var _=this.__index__>=this.__values__.length,R=_?n:this.__values__[this.__index__++];return{done:_,value:R}}function ld(){return this}function gp(_){for(var R,j=this;j instanceof U;){var J=Md(j);J.__index__=0,J.__values__=n,R?oe.__wrapped__=J:R=J;var oe=J;j=j.__wrapped__}return oe.__wrapped__=_,R}function ud(){var _=this.__wrapped__;if(_ instanceof te){var R=_;return this.__actions__.length&&(R=new te(this)),R=R.reverse(),R.__actions__.push({func:Js,args:[Qu],thisArg:n}),new Y(R,this.__chain__)}return this.thru(Qu)}function yp(){return zo(this.__wrapped__,this.__actions__)}var Wd=Nu(function(_,R,j){Er.call(_,j)?++_[j]:hi(_,j,1)});function zd(_,R,j){var J=lr(_)?ul:wl;return j&&Hn(_,R,j)&&(R=n),J(_,Kt(R,3))}function rc(_,R){var j=lr(_)?oi:Ec;return j(_,Kt(R,3))}var nc=fo(Da),Kd=fo(Wl);function cd(_,R){return Zr(xo(_,R),1)}function vp(_,R){return Zr(xo(_,R),K)}function Yd(_,R,j){return j=j===n?1:dr(j),Zr(xo(_,R),j)}function sc(_,R){var j=lr(_)?en:gi;return j(_,Kt(R,3))}function Ql(_,R){var j=lr(_)?Ba:gd;return j(_,Kt(R,3))}var dd=Nu(function(_,R,j){Er.call(_,j)?_[j].push(R):hi(_,j,[R])});function ic(_,R,j,J){_=Ns(_)?_:lc(_),j=j&&!J?dr(j):0;var oe=_.length;return j<0&&(j=Jr(oe+j,0)),Jd(_)?j<=oe&&_.indexOf(R,j)>-1:!!oe&&la(_,R,j)>-1}var Qd=cr(function(_,R,j){var J=-1,oe=typeof R=="function",de=Ns(_)?Fe(_.length):[];return gi(_,function(_e){de[++J]=oe?jr(R,_e,j):ws(_e,R,j)}),de}),xp=Nu(function(_,R,j){hi(_,j,R)});function xo(_,R){var j=lr(_)?kr:Tc;return j(_,Kt(R,3))}function Ep(_,R,j,J){return _==null?[]:(lr(R)||(R=R==null?[]:[R]),j=J?n:j,lr(j)||(j=j==null?[]:[j]),Pl(_,R,j))}var Xl=Nu(function(_,R,j){_[j?0:1].push(R)},function(){return[[],[]]});function _p(_,R,j){var J=lr(_)?aa:ou,oe=arguments.length<3;return J(_,Kt(R,4),j,oe,gi)}function ac(_,R,j){var J=lr(_)?Ua:ou,oe=arguments.length<3;return J(_,Kt(R,4),j,oe,gd)}function f(_,R){var j=lr(_)?oi:Ec;return j(_,ht(Kt(R,3)))}function y(_){var R=lr(_)?fi:On;return R(_)}function A(_,R,j){(j?Hn(_,R,j):R===n)?R=1:R=dr(R);var J=lr(_)?so:wc;return J(_,R)}function L(_){var R=lr(_)?hd:Is;return R(_)}function q(_){if(_==null)return 0;if(Ns(_))return Jd(_)?os(_):_.length;var R=Tn(_);return R==Pe||R==qe?_.size:Wi(_).length}function X(_,R,j){var J=lr(_)?oa:Ac;return j&&Hn(_,R,j)&&(R=n),J(_,Kt(R,3))}var le=cr(function(_,R){if(_==null)return[];var j=R.length;return j>1&&Hn(_,R[0],R[1])?R=[]:j>2&&Hn(R[0],R[1],R[2])&&(R=[R[0]]),Pl(_,Zr(R,1),[])}),xe=Fr||function(){return $r.Date.now()};function be(_,R){if(typeof R!="function")throw new Kn(o);return _=dr(_),function(){if(--_<1)return R.apply(this,arguments)}}function Ve(_,R,j){return R=j?n:R,R=_&&R==null?_.length:R,Ei(_,O,n,n,n,n,R)}function ut(_,R){var j;if(typeof R!="function")throw new Kn(o);return _=dr(_),function(){return--_>0&&(j=R.apply(this,arguments)),_<=1&&(R=n),j}}var dt=cr(function(_,R,j){var J=b;if(j.length){var oe=zn(j,Yi(dt));J|=D}return Ei(_,J,R,j,oe)}),at=cr(function(_,R,j){var J=b|S;if(j.length){var oe=zn(j,Yi(at));J|=D}return Ei(R,J,_,j,oe)});function Nt(_,R,j){R=j?n:R;var J=Ei(_,T,n,n,n,n,n,R);return J.placeholder=Nt.placeholder,J}function jt(_,R,j){R=j?n:R;var J=Ei(_,I,n,n,n,n,n,R);return J.placeholder=jt.placeholder,J}function $t(_,R,j){var J,oe,de,_e,Te,De,Xe=0,et=!1,ct=!1,kt=!0;if(typeof _!="function")throw new Kn(o);R=bi(R)||0,nn(j)&&(et=!!j.leading,ct="maxWait"in j,de=ct?Jr(bi(j.maxWait)||0,R):de,kt="trailing"in j?!!j.trailing:kt);function Ut(fn){var Zi=J,So=oe;return J=oe=n,Xe=fn,_e=_.apply(So,Zi),_e}function er(fn){return Xe=fn,Te=el(xr,R),et?Ut(fn):_e}function pr(fn){var Zi=fn-De,So=fn-Xe,Xp=R-Zi;return ct?mn(Xp,de-So):Xp}function tr(fn){var Zi=fn-De,So=fn-Xe;return De===n||Zi>=R||Zi<0||ct&&So>=de}function xr(){var fn=xe();if(tr(fn))return br(fn);Te=el(xr,pr(fn))}function br(fn){return Te=n,kt&&J?Ut(fn):(J=oe=n,_e)}function ei(){Te!==n&&kc(Te),Xe=0,J=De=oe=Te=n}function ys(){return Te===n?_e:br(xe())}function ti(){var fn=xe(),Zi=tr(fn);if(J=arguments,oe=this,De=fn,Zi){if(Te===n)return er(De);if(ct)return kc(Te),Te=el(xr,R),Ut(De)}return Te===n&&(Te=el(xr,R)),_e}return ti.cancel=ei,ti.flush=ys,ti}var rn=cr(function(_,R){return xc(_,1,R)}),je=cr(function(_,R,j){return xc(_,bi(R)||0,j)});function Re(_){return Ei(_,F)}function $e(_,R){if(typeof _!="function"||R!=null&&typeof R!="function")throw new Kn(o);var j=function(){var J=arguments,oe=R?R.apply(this,J):J[0],de=j.cache;if(de.has(oe))return de.get(oe);var _e=_.apply(this,J);return j.cache=de.set(oe,_e)||de,_e};return j.cache=new($e.Cache||gn),j}$e.Cache=gn;function ht(_){if(typeof _!="function")throw new Kn(o);return function(){var R=arguments;switch(R.length){case 0:return!_.call(this);case 1:return!_.call(this,R[0]);case 2:return!_.call(this,R[0],R[1]);case 3:return!_.call(this,R[0],R[1],R[2])}return!_.apply(this,R)}}function Bt(_){return ut(2,_)}var zt=Ed(function(_,R){R=R.length==1&&lr(R[0])?kr(R[0],$n(Kt())):kr(Zr(R,1),$n(Kt()));var j=R.length;return cr(function(J){for(var oe=-1,de=mn(J.length,j);++oe<de;)J[oe]=R[oe].call(this,J[oe]);return jr(_,this,J)})}),Wt=cr(function(_,R){var j=zn(R,Yi(Wt));return Ei(_,D,n,R,j)}),Zt=cr(function(_,R){var j=zn(R,Yi(Zt));return Ei(_,P,n,R,j)}),xn=_i(function(_,R){return Ei(_,B,n,n,n,R)});function wr(_,R){if(typeof _!="function")throw new Kn(o);return R=R===n?R:dr(R),cr(_,R)}function La(_,R){if(typeof _!="function")throw new Kn(o);return R=R==null?0:Jr(dr(R),0),cr(function(j){var J=j[R],oe=Ki(j,0,R);return J&&Fs(oe,J),jr(_,this,oe)})}function Sp(_,R,j){var J=!0,oe=!0;if(typeof _!="function")throw new Kn(o);return nn(j)&&(J="leading"in j?!!j.leading:J,oe="trailing"in j?!!j.trailing:oe),$t(_,R,{leading:J,maxWait:R,trailing:oe})}function Zp(_){return Ve(_,1)}function ef(_,R){return Wt(Pu(R),_)}function tf(){if(!arguments.length)return[];var _=arguments[0];return lr(_)?_:[_]}function rf(_){return Xn(_,g)}function nf(_,R){return R=typeof R=="function"?R:n,Xn(_,g,R)}function sf(_){return Xn(_,p|g)}function af(_,R){return R=typeof R=="function"?R:n,Xn(_,p|g,R)}function lf(_,R){return R==null||Rl(_,R,jn(R))}function Ji(_,R){return _===R||_!==_&&R!==R}var uf=$u(Ca),cf=$u(function(_,R){return _>=R}),Jl=bu(function(){return arguments}())?bu:function(_){return an(_)&&Er.call(_,"callee")&&!Mo.call(_,"callee")},lr=Fe.isArray,df=ll?$n(ll):vd;function Ns(_){return _!=null&&Xd(_.length)&&!Eo(_)}function pn(_){return an(_)&&Ns(_)}function pf(_){return _===!0||_===!1||an(_)&&Sn(_)==Ye}var nl=fa||Np,ff=An?$n(An):Gi;function hf(_){return an(_)&&_.nodeType===1&&!pd(_)}function mf(_){if(_==null)return!0;if(Ns(_)&&(lr(_)||typeof _=="string"||typeof _.splice=="function"||nl(_)||oc(_)||Jl(_)))return!_.length;var R=Tn(_);if(R==Pe||R==qe)return!_.size;if(Qi(_))return!Wi(_).length;for(var j in _)if(Er.call(_,j))return!1;return!0}function gf(_,R){return As(_,R)}function yf(_,R,j){j=typeof j=="function"?j:n;var J=j?j(_,R):n;return J===n?As(_,R,n,j):!!J}function bp(_){if(!an(_))return!1;var R=Sn(_);return R==rt||R==Be||typeof _.message=="string"&&typeof _.name=="string"&&!pd(_)}function vf(_){return typeof _=="number"&&ha(_)}function Eo(_){if(!nn(_))return!1;var R=Sn(_);return R==tt||R==Ue||R==Me||R==At}function Op(_){return typeof _=="number"&&_==dr(_)}function Xd(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=M}function nn(_){var R=typeof _;return _!=null&&(R=="object"||R=="function")}function an(_){return _!=null&&typeof _=="object"}var Lp=Es?$n(Es):xd;function xf(_,R){return _===R||Ho(_,R,Ul(R))}function Ef(_,R,j){return j=typeof j=="function"?j:n,Ho(_,R,Ul(R),j)}function _f(_){return jp(_)&&_!=+_}function Sf(_){if(sp(_))throw new Jt(a);return Sc(_)}function bf(_){return _===null}function Tf(_){return _==null}function jp(_){return typeof _=="number"||an(_)&&Sn(_)==Qe}function pd(_){if(!an(_)||Sn(_)!=nt)return!1;var R=cs(_);if(R===null)return!0;var j=Er.call(R,"constructor")&&R.constructor;return typeof j=="function"&&j instanceof j&&za.call(j)==pa}var Tp=ai?$n(ai):Il;function Cf(_){return Op(_)&&_>=-M&&_<=M}var Mp=_s?$n(_s):yi;function Jd(_){return typeof _=="string"||!lr(_)&&an(_)&&Sn(_)==mt}function Zs(_){return typeof _=="symbol"||an(_)&&Sn(_)==st}var oc=Fa?$n(Fa):Dl;function Rf(_){return _===n}function wf(_){return an(_)&&Tn(_)==bt}function Af(_){return an(_)&&Sn(_)==Mt}var If=$u(Ra),Df=$u(function(_,R){return _<=R});function $p(_){if(!_)return[];if(Ns(_))return Jd(_)?In(_):Un(_);if(hn&&_[hn])return mc(_[hn]());var R=Tn(_),j=R==Pe?Oi:R==qe?li:lc;return j(_)}function _o(_){if(!_)return _===0?_:0;if(_=bi(_),_===K||_===-K){var R=_<0?-1:1;return R*W}return _===_?_:0}function dr(_){var R=_o(_),j=R%1;return R===R?j?R-j:R:0}function Fp(_){return _?Vi(dr(_),0,z):0}function bi(_){if(typeof _=="number")return _;if(Zs(_))return ee;if(nn(_)){var R=typeof _.valueOf=="function"?_.valueOf():_;_=nn(R)?R+"":R}if(typeof _!="string")return _===0?_:+_;_=lu(_);var j=Dr.test(_);return j||ar.test(_)?Do(_.slice(2),j?2:8):_r.test(_)?ee:+_}function Bp(_){return Ws(_,Os(_))}function Pf(_){return _?Vi(dr(_),-M,M):_===0?_:0}function Or(_){return _==null?"":Jn(_)}var kf=Yo(function(_,R){if(Qi(R)||Ns(R)){Ws(R,jn(R),_);return}for(var j in R)Er.call(R,j)&&io(_,j,R[j])}),Up=Yo(function(_,R){Ws(R,Os(R),_)}),Zd=Yo(function(_,R,j,J){Ws(R,Os(R),_,J)}),Nf=Yo(function(_,R,j,J){Ws(R,jn(R),_,J)}),Of=_i(xu);function Lf(_,R){var j=V(_);return R==null?j:Ur(j,R)}var jf=cr(function(_,R){_=Rr(_);var j=-1,J=R.length,oe=J>2?R[2]:n;for(oe&&Hn(R[0],R[1],oe)&&(J=1);++j<J;)for(var de=R[j],_e=Os(de),Te=-1,De=_e.length;++Te<De;){var Xe=_e[Te],et=_[Xe];(et===n||Ji(et,us[Xe])&&!Er.call(_,Xe))&&(_[Xe]=de[Xe])}return _}),Mf=cr(function(_){return _.push(n,Uc),jr(Vp,n,_)});function $f(_,R){return dl(_,Kt(R,3),hs)}function Ff(_,R){return dl(_,Kt(R,3),Ta)}function Bf(_,R){return _==null?_:Eu(_,Kt(R,3),Os)}function Uf(_,R){return _==null?_:Al(_,Kt(R,3),Os)}function Vf(_,R){return _&&hs(_,Kt(R,3))}function Hf(_,R){return _&&Ta(_,Kt(R,3))}function qf(_){return _==null?[]:Vo(_,jn(_))}function Gf(_){return _==null?[]:Vo(_,Os(_))}function Cp(_,R,j){var J=_==null?n:Hi(_,R);return J===n?j:J}function Wf(_,R){return _!=null&&Wc(_,R,Rs)}function Rp(_,R){return _!=null&&Wc(_,R,oo)}var zf=Rd(function(_,R,j){R!=null&&typeof R.toString!="function"&&(R=Ka.call(R)),_[R]=j},Ap(Ls)),Kf=Rd(function(_,R,j){R!=null&&typeof R.toString!="function"&&(R=Ka.call(R)),Er.call(_,R)?_[R].push(j):_[R]=[j]},Kt),Yf=cr(ws);function jn(_){return Ns(_)?pi(_):Wi(_)}function Os(_){return Ns(_)?pi(_,!0):bc(_)}function Qf(_,R){var j={};return R=Kt(R,3),hs(_,function(J,oe,de){hi(j,R(J,oe,de),J)}),j}function Xf(_,R){var j={};return R=Kt(R,3),hs(_,function(J,oe,de){hi(j,oe,R(J,oe,de))}),j}var Jf=Yo(function(_,R,j){lo(_,R,j)}),Vp=Yo(function(_,R,j,J){lo(_,R,j,J)}),Zf=_i(function(_,R){var j={};if(_==null)return j;var J=!1;R=kr(R,function(de){return de=xi(de,_),J||(J=de.length>1),de}),Ws(_,Fl(_),j),J&&(j=Xn(j,p|m|g,Vc));for(var oe=R.length;oe--;)Iu(j,R[oe]);return j});function eh(_,R){return Hp(_,ht(Kt(R)))}var th=_i(function(_,R){return _==null?{}:Rc(_,R)});function Hp(_,R){if(_==null)return{};var j=kr(Fl(_),function(J){return[J]});return R=Kt(R),wa(_,j,function(J,oe){return R(J,oe[0])})}function rh(_,R,j){R=xi(R,_);var J=-1,oe=R.length;for(oe||(oe=1,_=n);++J<oe;){var de=_==null?n:_[Qs(R[J])];de===n&&(J=oe,de=j),_=Eo(de)?de.call(_):de}return _}function nh(_,R,j){return _==null?_:co(_,R,j)}function sh(_,R,j,J){return J=typeof J=="function"?J:n,_==null?_:co(_,R,j,J)}var qp=Fc(jn),Gp=Fc(Os);function ih(_,R,j){var J=lr(_),oe=J||nl(_)||oc(_);if(R=Kt(R,4),j==null){var de=_&&_.constructor;oe?j=J?new de:[]:nn(_)?j=Eo(de)?V(cs(_)):{}:j={}}return(oe?en:hs)(_,function(_e,Te,De){return R(j,_e,Te,De)}),j}function ah(_,R){return _==null?!0:Iu(_,R)}function oh(_,R,j){return _==null?_:Pc(_,R,Pu(j))}function lh(_,R,j,J){return J=typeof J=="function"?J:n,_==null?_:Pc(_,R,Pu(j),J)}function lc(_){return _==null?[]:Pi(_,jn(_))}function uh(_){return _==null?[]:Pi(_,Os(_))}function ch(_,R,j){return j===n&&(j=R,R=n),j!==n&&(j=bi(j),j=j===j?j:0),R!==n&&(R=bi(R),R=R===R?R:0),Vi(bi(_),R,j)}function dh(_,R,j){return R=_o(R),j===n?(j=R,R=0):j=_o(j),_=bi(_),_c(_,R,j)}function ph(_,R,j){if(j&&typeof j!="boolean"&&Hn(_,R,j)&&(R=j=n),j===n&&(typeof R=="boolean"?(j=R,R=n):typeof _=="boolean"&&(j=_,_=n)),_===n&&R===n?(_=0,R=1):(_=_o(_),R===n?(R=_,_=0):R=_o(R)),_>R){var J=_;_=R,R=J}if(j||_%1||R%1){var oe=Ja();return mn(_+oe*(R-_+al("1e-"+((oe+"").length-1))),R)}return Go(_,R)}var fh=po(function(_,R,j){return R=R.toLowerCase(),_+(j?Wp(R):R)});function Wp(_){return wp(Or(_).toLowerCase())}function zp(_){return _=Or(_),_&&_.replace(_t,gl).replace(tu,"")}function hh(_,R,j){_=Or(_),R=Jn(R);var J=_.length;j=j===n?J:Vi(dr(j),0,J);var oe=j;return j-=R.length,j>=0&&_.slice(j,oe)==R}function mh(_){return _=Or(_),_&&Ie.test(_)?_.replace(ue,cu):_}function gh(_){return _=Or(_),_&&ze.test(_)?_.replace(Ne,"\\$&"):_}var yh=po(function(_,R,j){return _+(j?"-":"")+R.toLowerCase()}),xh=po(function(_,R,j){return _+(j?" ":"")+R.toLowerCase()}),Eh=jc("toLowerCase");function _h(_,R,j){_=Or(_),R=dr(R);var J=R?os(_):0;if(!R||J>=R)return _;var oe=(R-J)/2;return Ml(Hs(oe),j)+_+Ml(Vs(oe),j)}function Sh(_,R,j){_=Or(_),R=dr(R);var J=R?os(_):0;return R&&J<R?_+Ml(R-J,j):_}function bh(_,R,j){_=Or(_),R=dr(R);var J=R?os(_):0;return R&&J<R?Ml(R-J,j)+_:_}function Th(_,R,j){return j||R==null?R=0:R&&(R=+R),mu(Or(_).replace(it,""),R||0)}function Ch(_,R,j){return(j?Hn(_,R,j):R===n)?R=1:R=dr(R),uo(Or(_),R)}function Rh(){var _=arguments,R=Or(_[0]);return _.length<3?R:R.replace(_[1],_[2])}var wh=po(function(_,R,j){return _+(j?"_":"")+R.toLowerCase()});function Ah(_,R,j){return j&&typeof j!="number"&&Hn(_,R,j)&&(R=j=n),j=j===n?z:j>>>0,j?(_=Or(_),_&&(typeof R=="string"||R!=null&&!Tp(R))&&(R=Jn(R),!R&&Ni(_))?Ki(In(_),0,j):_.split(R,j)):[]}var Ih=po(function(_,R,j){return _+(j?" ":"")+wp(R)});function Dh(_,R,j){return _=Or(_),j=j==null?0:Vi(dr(j),0,_.length),R=Jn(R),_.slice(j,j+R.length)==R}function Ph(_,R,j){var J=k.templateSettings;j&&Hn(_,R,j)&&(R=n),_=Or(_),R=Zd({},R,J,Bc);var oe=Zd({},R.imports,J.imports,Bc),de=jn(oe),_e=Pi(oe,de),Te,De,Xe=0,et=R.interpolate||gt,ct="__p += '",kt=da((R.escape||gt).source+"|"+et.source+"|"+(et===Gt?Ct:gt).source+"|"+(R.evaluate||gt).source+"|$","g"),Ut="//# sourceURL="+(Er.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nu+"]")+`
`;_.replace(kt,function(tr,xr,br,ei,ys,ti){return br||(br=ei),ct+=_.slice(Xe,ti).replace(yt,yl),xr&&(Te=!0,ct+=`' +
__e(`+xr+`) +
'`),ys&&(De=!0,ct+=`';
`+ys+`;
__p += '`),br&&(ct+=`' +
((__t = (`+br+`)) == null ? '' : __t) +
'`),Xe=ti+tr.length,tr}),ct+=`';
`;var er=Er.call(R,"variable")&&R.variable;if(!er)ct=`with (obj) {
`+ct+`
}
`;else if(Rt.test(er))throw new Jt(l);ct=(De?ct.replace(Yt,""):ct).replace(Xt,"$1").replace(ir,"$1;"),ct="function("+(er||"obj")+`) {
`+(er?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Te?", __e = _.escape":"")+(De?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ct+`return __p
}`;var pr=Yp(function(){return vr(de,Ut+"return "+ct).apply(n,_e)});if(pr.source=ct,bp(pr))throw pr;return pr}function kh(_){return Or(_).toLowerCase()}function Nh(_){return Or(_).toUpperCase()}function Oh(_,R,j){if(_=Or(_),_&&(j||R===n))return lu(_);if(!_||!(R=Jn(R)))return _;var J=In(_),oe=In(R),de=hl(J,oe),_e=ml(J,oe)+1;return Ki(J,de,_e).join("")}function Lh(_,R,j){if(_=Or(_),_&&(j||R===n))return _.slice(0,Li(_)+1);if(!_||!(R=Jn(R)))return _;var J=In(_),oe=ml(J,In(R))+1;return Ki(J,0,oe).join("")}function jh(_,R,j){if(_=Or(_),_&&(j||R===n))return _.replace(it,"");if(!_||!(R=Jn(R)))return _;var J=In(_),oe=hl(J,In(R));return Ki(J,oe).join("")}function Mh(_,R){var j=H,J=Q;if(nn(R)){var oe="separator"in R?R.separator:oe;j="length"in R?dr(R.length):j,J="omission"in R?Jn(R.omission):J}_=Or(_);var de=_.length;if(Ni(_)){var _e=In(_);de=_e.length}if(j>=de)return _;var Te=j-os(J);if(Te<1)return J;var De=_e?Ki(_e,0,Te).join(""):_.slice(0,Te);if(oe===n)return De+J;if(_e&&(Te+=De.length-Te),Tp(oe)){if(_.slice(Te).search(oe)){var Xe,et=De;for(oe.global||(oe=da(oe.source,Or(or.exec(oe))+"g")),oe.lastIndex=0;Xe=oe.exec(et);)var ct=Xe.index;De=De.slice(0,ct===n?Te:ct)}}else if(_.indexOf(Jn(oe),Te)!=Te){var kt=De.lastIndexOf(oe);kt>-1&&(De=De.slice(0,kt))}return De+J}function $h(_){return _=Or(_),_&&ve.test(_)?_.replace(ie,ua):_}var Fh=po(function(_,R,j){return _+(j?" ":"")+R.toUpperCase()}),wp=jc("toUpperCase");function Kp(_,R,j){return _=Or(_),R=j?n:R,R===n?fc(_)?xl(_):iu(_):_.match(R)||[]}var Yp=cr(function(_,R){try{return jr(_,n,R)}catch(j){return bp(j)?j:new Jt(j)}}),Bh=_i(function(_,R){return en(R,function(j){j=Qs(j),hi(_,j,dt(_[j],_))}),_});function Uh(_){var R=_==null?0:_.length,j=Kt();return _=R?kr(_,function(J){if(typeof J[1]!="function")throw new Kn(o);return[j(J[0]),J[1]]}):[],cr(function(J){for(var oe=-1;++oe<R;){var de=_[oe];if(jr(de[0],this,J))return jr(de[1],this,J)}})}function Vh(_){return md(Xn(_,p))}function Ap(_){return function(){return _}}function Hh(_,R){return _==null||_!==_?R:_}var qh=ju(),Gh=ju(!0);function Ls(_){return _}function Ip(_){return qo(typeof _=="function"?_:Xn(_,p))}function Wh(_){return Cu(Xn(_,p))}function zh(_,R){return qr(_,Xn(R,p))}var Kh=cr(function(_,R){return function(j){return ws(j,_,R)}}),Yh=cr(function(_,R){return function(j){return ws(_,j,R)}});function Dp(_,R,j){var J=jn(R),oe=Vo(R,J);j==null&&!(nn(R)&&(oe.length||!J.length))&&(j=R,R=_,_=this,oe=Vo(R,jn(R)));var de=!(nn(j)&&"chain"in j)||!!j.chain,_e=Eo(_);return en(oe,function(Te){var De=R[Te];_[Te]=De,_e&&(_.prototype[Te]=function(){var Xe=this.__chain__;if(de||Xe){var et=_(this.__wrapped__),ct=et.__actions__=Un(this.__actions__);return ct.push({func:De,args:arguments,thisArg:_}),et.__chain__=Xe,et}return De.apply(_,Fs([this.value()],arguments))})}),_}function Qh(){return $r._===this&&($r._=du),this}function Pp(){}function Xh(_){return _=dr(_),cr(function(R){return Ru(R,_)})}var Jh=Mu(kr),Zh=Mu(ul),em=Mu(oa);function Qp(_){return Lt(_)?fl(Qs(_)):Kr(_)}function tm(_){return function(R){return _==null?n:Hi(_,R)}}var rm=$c(),sm=$c(!0);function kp(){return[]}function Np(){return!1}function im(){return{}}function am(){return""}function om(){return!0}function lm(_,R){if(_=dr(_),_<1||_>M)return[];var j=z,J=mn(_,z);R=Kt(R),_-=z;for(var oe=Ga(J,R);++j<_;)R(j);return oe}function um(_){return lr(_)?kr(_,Qs):Zs(_)?[_]:Un(Qc(Or(_)))}function cm(_){var R=++$i;return Or(_)+R}var dm=jl(function(_,R){return _+R},0),pm=bn("ceil"),fm=jl(function(_,R){return _/R},1),hm=bn("floor");function mm(_){return _&&_.length?ao(_,Ls,Ca):n}function gm(_,R){return _&&_.length?ao(_,Kt(R,2),Ca):n}function ym(_){return Ha(_,Ls)}function vm(_,R){return Ha(_,Kt(R,2))}function xm(_){return _&&_.length?ao(_,Ls,Ra):n}function Em(_,R){return _&&_.length?ao(_,Kt(R,2),Ra):n}var _m=jl(function(_,R){return _*R},1),Sm=bn("round"),bm=jl(function(_,R){return _-R},0);function Tm(_){return _&&_.length?Oo(_,Ls):0}function Cm(_,R){return _&&_.length?Oo(_,Kt(R,2)):0}return k.after=be,k.ary=Ve,k.assign=kf,k.assignIn=Up,k.assignInWith=Zd,k.assignWith=Nf,k.at=Of,k.before=ut,k.bind=dt,k.bindAll=Bh,k.bindKey=at,k.castArray=tf,k.chain=Zu,k.chunk=Gu,k.compact=Xc,k.concat=Ps,k.cond=Uh,k.conforms=Vh,k.constant=Ap,k.countBy=Wd,k.create=Lf,k.curry=Nt,k.curryRight=jt,k.debounce=$t,k.defaults=jf,k.defaultsDeep=Mf,k.defer=rn,k.delay=je,k.difference=Sr,k.differenceBy=vn,k.differenceWith=sn,k.drop=Rn,k.dropRight=gs,k.dropRightWhile=tl,k.dropWhile=dn,k.fill=Gl,k.filter=rc,k.flatMap=cd,k.flatMapDeep=vp,k.flatMapDepth=Yd,k.flatten=Wu,k.flattenDeep=zl,k.flattenDepth=Zn,k.flip=Re,k.flow=qh,k.flowRight=Gh,k.fromPairs=Jc,k.functions=qf,k.functionsIn=Gf,k.groupBy=dd,k.initial=zu,k.intersection=Zc,k.intersectionBy=Pa,k.intersectionWith=Ku,k.invert=zf,k.invertBy=Kf,k.invokeMap=Qd,k.iteratee=Ip,k.keyBy=xp,k.keys=jn,k.keysIn=Os,k.map=xo,k.mapKeys=Qf,k.mapValues=Xf,k.matches=Wh,k.matchesProperty=zh,k.memoize=$e,k.merge=Jf,k.mergeWith=Vp,k.method=Kh,k.methodOf=Yh,k.mixin=Dp,k.negate=ht,k.nthArg=Xh,k.omit=Zf,k.omitBy=eh,k.once=Bt,k.orderBy=Ep,k.over=Jh,k.overArgs=zt,k.overEvery=Zh,k.overSome=em,k.partial=Wt,k.partialRight=Zt,k.partition=Xl,k.pick=th,k.pickBy=Hp,k.property=Qp,k.propertyOf=tm,k.pull=Yu,k.pullAll=Yl,k.pullAllBy=Gn,k.pullAllWith=Na,k.pullAt=Xs,k.range=rm,k.rangeRight=sm,k.rearg=xn,k.reject=f,k.remove=es,k.rest=wr,k.reverse=Qu,k.sampleSize=A,k.set=nh,k.setWith=sh,k.shuffle=L,k.slice=td,k.sortBy=le,k.sortedUniq=sd,k.sortedUniqBy=go,k.split=Ah,k.spread=La,k.tail=Fd,k.take=Bd,k.takeRight=ad,k.takeRightWhile=Xu,k.takeWhile=lp,k.tap=mp,k.throttle=Sp,k.thru=Js,k.toArray=$p,k.toPairs=qp,k.toPairsIn=Gp,k.toPath=um,k.toPlainObject=Bp,k.transform=ih,k.unary=Zp,k.union=up,k.unionBy=Ud,k.unionWith=Vd,k.uniq=yo,k.uniqBy=cp,k.uniqWith=rl,k.unset=ah,k.unzip=Ju,k.unzipWith=Yr,k.update=oh,k.updateWith=lh,k.values=lc,k.valuesIn=uh,k.without=dp,k.words=Kp,k.wrap=ef,k.xor=Hd,k.xorBy=pp,k.xorWith=fp,k.zip=qd,k.zipObject=Gd,k.zipObjectDeep=hp,k.zipWith=ks,k.entries=qp,k.entriesIn=Gp,k.extend=Up,k.extendWith=Zd,Dp(k,k),k.add=dm,k.attempt=Yp,k.camelCase=fh,k.capitalize=Wp,k.ceil=pm,k.clamp=ch,k.clone=rf,k.cloneDeep=sf,k.cloneDeepWith=af,k.cloneWith=nf,k.conformsTo=lf,k.deburr=zp,k.defaultTo=Hh,k.divide=fm,k.endsWith=hh,k.eq=Ji,k.escape=mh,k.escapeRegExp=gh,k.every=zd,k.find=nc,k.findIndex=Da,k.findKey=$f,k.findLast=Kd,k.findLastIndex=Wl,k.findLastKey=Ff,k.floor=hm,k.forEach=sc,k.forEachRight=Ql,k.forIn=Bf,k.forInRight=Uf,k.forOwn=Vf,k.forOwnRight=Hf,k.get=Cp,k.gt=uf,k.gte=cf,k.has=Wf,k.hasIn=Rp,k.head=ho,k.identity=Ls,k.includes=ic,k.indexOf=Xi,k.inRange=dh,k.invoke=Yf,k.isArguments=Jl,k.isArray=lr,k.isArrayBuffer=df,k.isArrayLike=Ns,k.isArrayLikeObject=pn,k.isBoolean=pf,k.isBuffer=nl,k.isDate=ff,k.isElement=hf,k.isEmpty=mf,k.isEqual=gf,k.isEqualWith=yf,k.isError=bp,k.isFinite=vf,k.isFunction=Eo,k.isInteger=Op,k.isLength=Xd,k.isMap=Lp,k.isMatch=xf,k.isMatchWith=Ef,k.isNaN=_f,k.isNative=Sf,k.isNil=Tf,k.isNull=bf,k.isNumber=jp,k.isObject=nn,k.isObjectLike=an,k.isPlainObject=pd,k.isRegExp=Tp,k.isSafeInteger=Cf,k.isSet=Mp,k.isString=Jd,k.isSymbol=Zs,k.isTypedArray=oc,k.isUndefined=Rf,k.isWeakMap=wf,k.isWeakSet=Af,k.join=ka,k.kebabCase=yh,k.last=qn,k.lastIndexOf=Kl,k.lowerCase=xh,k.lowerFirst=Eh,k.lt=If,k.lte=Df,k.max=mm,k.maxBy=gm,k.mean=ym,k.meanBy=vm,k.min=xm,k.minBy=Em,k.stubArray=kp,k.stubFalse=Np,k.stubObject=im,k.stubString=am,k.stubTrue=om,k.multiply=_m,k.nth=ed,k.noConflict=Qh,k.noop=Pp,k.now=xe,k.pad=_h,k.padEnd=Sh,k.padStart=bh,k.parseInt=Th,k.random=ph,k.reduce=_p,k.reduceRight=ac,k.repeat=Ch,k.replace=Rh,k.result=rh,k.round=Sm,k.runInContext=Ae,k.sample=y,k.size=q,k.snakeCase=wh,k.some=X,k.sortedIndex=rd,k.sortedIndexBy=ap,k.sortedIndexOf=Oa,k.sortedLastIndex=$d,k.sortedLastIndexBy=nd,k.sortedLastIndexOf=mo,k.startCase=Ih,k.startsWith=Dh,k.subtract=bm,k.sum=Tm,k.sumBy=Cm,k.template=Ph,k.times=lm,k.toFinite=_o,k.toInteger=dr,k.toLength=Fp,k.toLower=kh,k.toNumber=bi,k.toSafeInteger=Pf,k.toString=Or,k.toUpper=Nh,k.trim=Oh,k.trimEnd=Lh,k.trimStart=jh,k.truncate=Mh,k.unescape=$h,k.uniqueId=cm,k.upperCase=Fh,k.upperFirst=wp,k.each=sc,k.eachRight=Ql,k.first=ho,Dp(k,function(){var _={};return hs(k,function(R,j){Er.call(k.prototype,j)||(_[j]=R)}),_}(),{chain:!1}),k.VERSION=s,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){k[_].placeholder=k}),en(["drop","take"],function(_,R){te.prototype[_]=function(j){j=j===n?1:Jr(dr(j),0);var J=this.__filtered__&&!R?new te(this):this.clone();return J.__filtered__?J.__takeCount__=mn(j,J.__takeCount__):J.__views__.push({size:mn(j,z),type:_+(J.__dir__<0?"Right":"")}),J},te.prototype[_+"Right"]=function(j){return this.reverse()[_](j).reverse()}}),en(["filter","map","takeWhile"],function(_,R){var j=R+1,J=j==re||j==G;te.prototype[_]=function(oe){var de=this.clone();return de.__iteratees__.push({iteratee:Kt(oe,3),type:j}),de.__filtered__=de.__filtered__||J,de}}),en(["head","last"],function(_,R){var j="take"+(R?"Right":"");te.prototype[_]=function(){return this[j](1).value()[0]}}),en(["initial","tail"],function(_,R){var j="drop"+(R?"":"Right");te.prototype[_]=function(){return this.__filtered__?new te(this):this[j](1)}}),te.prototype.compact=function(){return this.filter(Ls)},te.prototype.find=function(_){return this.filter(_).head()},te.prototype.findLast=function(_){return this.reverse().find(_)},te.prototype.invokeMap=cr(function(_,R){return typeof _=="function"?new te(this):this.map(function(j){return ws(j,_,R)})}),te.prototype.reject=function(_){return this.filter(ht(Kt(_)))},te.prototype.slice=function(_,R){_=dr(_);var j=this;return j.__filtered__&&(_>0||R<0)?new te(j):(_<0?j=j.takeRight(-_):_&&(j=j.drop(_)),R!==n&&(R=dr(R),j=R<0?j.dropRight(-R):j.take(R-_)),j)},te.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},te.prototype.toArray=function(){return this.take(z)},hs(te.prototype,function(_,R){var j=/^(?:filter|find|map|reject)|While$/.test(R),J=/^(?:head|last)$/.test(R),oe=k[J?"take"+(R=="last"?"Right":""):R],de=J||/^find/.test(R);oe&&(k.prototype[R]=function(){var _e=this.__wrapped__,Te=J?[1]:arguments,De=_e instanceof te,Xe=Te[0],et=De||lr(_e),ct=function(xr){var br=oe.apply(k,Fs([xr],Te));return J&&kt?br[0]:br};et&&j&&typeof Xe=="function"&&Xe.length!=1&&(De=et=!1);var kt=this.__chain__,Ut=!!this.__actions__.length,er=de&&!kt,pr=De&&!Ut;if(!de&&et){_e=pr?_e:new te(this);var tr=_.apply(_e,Te);return tr.__actions__.push({func:Js,args:[ct],thisArg:n}),new Y(tr,kt)}return er&&pr?_.apply(this,Te):(tr=this.thru(ct),er?J?tr.value()[0]:tr.value():tr)})}),en(["pop","push","shift","sort","splice","unshift"],function(_){var R=Bn[_],j=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);k.prototype[_]=function(){var oe=arguments;if(J&&!this.__chain__){var de=this.value();return R.apply(lr(de)?de:[],oe)}return this[j](function(_e){return R.apply(lr(_e)?_e:[],oe)})}}),hs(te.prototype,function(_,R){var j=k[R];if(j){var J=j.name+"";Er.call(ya,J)||(ya[J]=[]),ya[J].push({name:R,func:j})}}),ya[Xo(n,S).name]=[{name:"wrapper",func:n}],te.prototype.clone=pe,te.prototype.reverse=me,te.prototype.value=ge,k.prototype.at=ec,k.prototype.chain=vo,k.prototype.commit=tc,k.prototype.next=od,k.prototype.plant=gp,k.prototype.reverse=ud,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=yp,k.prototype.first=k.prototype.head,hn&&(k.prototype[hn]=ld),k},ca=vc();Mn?((Mn.exports=ca)._=ca,sa._=ca):$r._=ca}).call(lodash)}(lodash$1,lodash$1.exports)),lodash$1.exports}var lodashExports=requireLodash();function bind(t,e){return function(){return t.apply(e,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf:getPrototypeOf$1}=Object,{iterator:iterator$1,toStringTag}=Symbol,kindOf=(t=>e=>{const n=toString$2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray:isArray$4}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$1(t){return t!==null&&!isUndefined$1(t)&&t.constructor!==null&&!isUndefined$1(t.constructor)&&isFunction$4(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView$1(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString$2=typeOfTest("string"),isFunction$4=typeOfTest("function"),isNumber$2=typeOfTest("number"),isObject$3=t=>t!==null&&typeof t=="object",isBoolean$1=t=>t===!0||t===!1,isPlainObject$2=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf$1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(toStringTag in t)&&!(iterator$1 in t)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$3(t)&&isFunction$4(t.pipe),isFormData=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction$4(t.append)&&((e=kindOf(t))==="formdata"||e==="object"&&isFunction$4(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),isArray$4(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let l;for(s=0;s<o;s++)l=a[s],e.call(null,t[l],l,t)}}function findKey(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=t=>!isUndefined$1(t)&&t!==_global;function merge$4(){const{caseless:t}=isContextDefined(this)&&this||{},e={},n=(s,i)=>{const a=t&&findKey(e,i)||i;isPlainObject$2(e[a])&&isPlainObject$2(s)?e[a]=merge$4(e[a],s):isPlainObject$2(s)?e[a]=merge$4({},s):isArray$4(s)?e[a]=s.slice():e[a]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&forEach(arguments[s],n);return e}const extend$1=(t,e,n,{allOwnKeys:s}={})=>(forEach(e,(i,a)=>{n&&isFunction$4(i)?t[a]=bind(i,n):t[a]=i},{allOwnKeys:s}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject=(t,e,n,s)=>{let i,a,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!s||s(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&getPrototypeOf$1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},toArray$2=t=>{if(!t)return null;if(isArray$4(t))return t;let e=t.length;if(!isNumber$2(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},isTypedArray$1=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf$1(Uint8Array)),forEachEntry=(t,e)=>{const s=(t&&t[iterator$1]).call(t);let i;for(;(i=s.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},matchAll=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),hasOwnProperty=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};forEach(n,(i,a)=>{let o;(o=e(i,a,t))!==!1&&(s[a]=o||i)}),Object.defineProperties(t,s)},freezeMethods=t=>{reduceDescriptors(t,(e,n)=>{if(isFunction$4(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(isFunction$4(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(t,e)=>{const n={},s=i=>{i.forEach(a=>{n[a]=!0})};return isArray$4(t)?s(t):s(String(t).split(e)),n},noop$6=()=>{},toFiniteNumber=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function isSpecCompliantForm(t){return!!(t&&isFunction$4(t.append)&&t[toStringTag]==="FormData"&&t[iterator$1])}const toJSONObject=t=>{const e=new Array(10),n=(s,i)=>{if(isObject$3(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const a=isArray$4(s)?[]:{};return forEach(s,(o,l)=>{const u=n(o,i+1);!isUndefined$1(u)&&(a[l]=u)}),e[i]=void 0,a}}return s};return n(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject$3(t)||isFunction$4(t))&&isFunction$4(t.then)&&isFunction$4(t.catch),_setImmediate=((t,e)=>t?setImmediate:e?((n,s)=>(_global.addEventListener("message",({source:i,data:a})=>{i===_global&&a===n&&s.length&&s.shift()()},!1),i=>{s.push(i),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$4(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable$1=t=>t!=null&&isFunction$4(t[iterator$1]),utils$3={isArray:isArray$4,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView:isArrayBufferView$1,isString:isString$2,isNumber:isNumber$2,isBoolean:isBoolean$1,isObject:isObject$3,isPlainObject:isPlainObject$2,isReadableStream,isRequest,isResponse,isHeaders,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isRegExp,isFunction:isFunction$4,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$4,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$2,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$6,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable:isIterable$1};function AxiosError$1(t,e,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}utils$3.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$3.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(t,e,n,s,i,a)=>{const o=Object.create(prototype$1);return utils$3.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),AxiosError$1.call(o,t.message,e,n,s,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const httpAdapter=null;function isVisitable(t){return utils$3.isPlainObject(t)||utils$3.isArray(t)}function removeBrackets(t){return utils$3.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,n){return t?t.concat(e).map(function(i,a){return i=removeBrackets(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function isFlatArray(t){return utils$3.isArray(t)&&!t.some(isVisitable)}const predicates=utils$3.toFlatObject(utils$3,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(t,e,n){if(!utils$3.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=utils$3.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,b){return!utils$3.isUndefined(b[x])});const s=n.metaTokens,i=n.visitor||d,a=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&utils$3.isSpecCompliantForm(e);if(!utils$3.isFunction(i))throw new TypeError("visitor must be a function");function c(E){if(E===null)return"";if(utils$3.isDate(E))return E.toISOString();if(utils$3.isBoolean(E))return E.toString();if(!u&&utils$3.isBlob(E))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$3.isArrayBuffer(E)||utils$3.isTypedArray(E)?u&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function d(E,x,b){let S=E;if(E&&!b&&typeof E=="object"){if(utils$3.endsWith(x,"{}"))x=s?x:x.slice(0,-2),E=JSON.stringify(E);else if(utils$3.isArray(E)&&isFlatArray(E)||(utils$3.isFileList(E)||utils$3.endsWith(x,"[]"))&&(S=utils$3.toArray(E)))return x=removeBrackets(x),S.forEach(function(T,I){!(utils$3.isUndefined(T)||T===null)&&e.append(o===!0?renderKey([x],I,a):o===null?x:x+"[]",c(T))}),!1}return isVisitable(E)?!0:(e.append(renderKey(b,x,a),c(E)),!1)}const p=[],m=Object.assign(predicates,{defaultVisitor:d,convertValue:c,isVisitable});function g(E,x){if(!utils$3.isUndefined(E)){if(p.indexOf(E)!==-1)throw Error("Circular reference detected in "+x.join("."));p.push(E),utils$3.forEach(E,function(S,C){(!(utils$3.isUndefined(S)||S===null)&&i.call(e,S,utils$3.isString(C)?C.trim():C,x,m))===!0&&g(S,x?x.concat(C):[C])}),p.pop()}}if(!utils$3.isObject(t))throw new TypeError("data must be an object");return g(t),e}function encode$2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData$1(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,n){this._pairs.push([e,n])};prototype.toString=function(e){const n=e?function(s){return e.call(this,s,encode$2)}:encode$2;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function encode$1(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,n){if(!e)return t;const s=n&&n.encode||encode$1;utils$3.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=utils$3.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$3.forEach(this.handlers,function(s){s!==null&&e(s)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils$2,...platform$2};function toURLEncodedForm(t,e){return toFormData$1(t,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,a){return platform$1.isNode&&utils$3.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils$3.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},n=Object.keys(t);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],e[a]=t[a];return e}function formDataToJSON(t){function e(n,s,i,a){let o=n[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=a>=n.length;return o=!o&&utils$3.isArray(i)?i.length:o,u?(utils$3.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!utils$3.isObject(i[o]))&&(i[o]=[]),e(n,s,i[o],a)&&utils$3.isArray(i[o])&&(i[o]=arrayToObject(i[o])),!l)}if(utils$3.isFormData(t)&&utils$3.isFunction(t.entries)){const n={};return utils$3.forEachEntry(t,(s,i)=>{e(parsePropPath(s),i,n,0)}),n}return null}function stringifySafely(t,e,n){if(utils$3.isString(t))try{return(e||JSON.parse)(t),utils$3.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const defaults$3={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,a=utils$3.isObject(e);if(a&&utils$3.isHTMLForm(e)&&(e=new FormData(e)),utils$3.isFormData(e))return i?JSON.stringify(formDataToJSON(e)):e;if(utils$3.isArrayBuffer(e)||utils$3.isBuffer(e)||utils$3.isStream(e)||utils$3.isFile(e)||utils$3.isBlob(e)||utils$3.isReadableStream(e))return e;if(utils$3.isArrayBufferView(e))return e.buffer;if(utils$3.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((l=utils$3.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return toFormData$1(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const n=this.transitional||defaults$3.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(utils$3.isResponse(e)||utils$3.isReadableStream(e))return e;if(e&&utils$3.isString(e)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?AxiosError$1.from(l,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$3.forEach(["delete","get","head","post","put","patch"],t=>{defaults$3.headers[t]={}});const ignoreDuplicateOf=utils$3.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const e={};let n,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils$3.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,e,n,s,i){if(utils$3.isFunction(s))return s.call(this,e,n);if(i&&(e=n),!!utils$3.isString(e)){if(utils$3.isString(s))return e.indexOf(s)!==-1;if(utils$3.isRegExp(s))return s.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function buildAccessors(t,e){const n=utils$3.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,a,o){return this[s].call(this,e,i,a,o)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,n,s){const i=this;function a(l,u,c){const d=normalizeHeader(u);if(!d)throw new Error("header name must be a non-empty string");const p=utils$3.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||u]=normalizeValue(l))}const o=(l,u)=>utils$3.forEach(l,(c,d)=>a(c,d,u));if(utils$3.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(utils$3.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))o(parseHeaders(e),n);else if(utils$3.isObject(e)&&utils$3.isIterable(e)){let l={},u,c;for(const d of e){if(!utils$3.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?utils$3.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}o(l,n)}else e!=null&&a(n,e,s);return this}get(e,n){if(e=normalizeHeader(e),e){const s=utils$3.findKey(this,e);if(s){const i=this[s];if(!n)return i;if(n===!0)return parseTokens(i);if(utils$3.isFunction(n))return n.call(this,i,s);if(utils$3.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const s=utils$3.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||matchHeaderValue(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let i=!1;function a(o){if(o=normalizeHeader(o),o){const l=utils$3.findKey(s,o);l&&(!n||matchHeaderValue(s,s[l],l,n))&&(delete s[l],i=!0)}}return utils$3.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const a=n[s];(!e||matchHeaderValue(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,s={};return utils$3.forEach(this,(i,a)=>{const o=utils$3.findKey(s,a);if(o){n[o]=normalizeValue(i),delete n[a];return}const l=e?formatHeader(a):String(a).trim();l!==a&&delete n[a],n[l]=normalizeValue(i),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils$3.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=e&&utils$3.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[$internals]=this[$internals]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=normalizeHeader(o);s[l]||(buildAccessors(i,o),s[l]=!0)}return utils$3.isArray(e)?e.forEach(a):a(e),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$3.reduceDescriptors(AxiosHeaders$1.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});utils$3.freezeMethods(AxiosHeaders$1);function transformData(t,e){const n=this||defaults$3,s=e||n,i=AxiosHeaders$1.from(s.headers);let a=s.data;return utils$3.forEach(t,function(l){a=l.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function isCancel$1(t){return!!(t&&t.__CANCEL__)}function CanceledError$1(t,e,n){AxiosError$1.call(this,t??"canceled",AxiosError$1.ERR_CANCELED,e,n),this.name="CanceledError"}utils$3.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const n=new Array(t),s=new Array(t);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),d=s[a];o||(o=c),n[i]=u,s[i]=c;let p=a,m=0;for(;p!==i;)m+=n[p++],p=p%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),c-o<e)return;const g=d&&c-d;return g?Math.round(m*1e3/g):void 0}}function throttle$1(t,e){let n=0,s=1e3/e,i,a;const o=(c,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=s?o(c,d):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},s-p)))},()=>i&&o(i)]}const progressEventReducer=(t,e,n=3)=>{let s=0;const i=speedometer(50,250);return throttle$1(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,u=o-s,c=i(u),d=o<=l;s=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-o)/c:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(p)},n)},progressEventDecorator=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},asyncDecorator=t=>(...e)=>utils$3.asap(()=>t(...e)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,platform$1.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(platform$1.origin),platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent)):()=>!0,cookies=platform$1.hasStandardBrowserEnv?{write(t,e,n,s,i,a){const o=[t+"="+encodeURIComponent(e)];utils$3.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),utils$3.isString(s)&&o.push("path="+s),utils$3.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e,n){let s=!isAbsoluteURL(e);return t&&(s||n==!1)?combineURLs(t,e):e}const headersToObject=t=>t instanceof AxiosHeaders$1?{...t}:t;function mergeConfig$1(t,e){e=e||{};const n={};function s(c,d,p,m){return utils$3.isPlainObject(c)&&utils$3.isPlainObject(d)?utils$3.merge.call({caseless:m},c,d):utils$3.isPlainObject(d)?utils$3.merge({},d):utils$3.isArray(d)?d.slice():d}function i(c,d,p,m){if(utils$3.isUndefined(d)){if(!utils$3.isUndefined(c))return s(void 0,c,p,m)}else return s(c,d,p,m)}function a(c,d){if(!utils$3.isUndefined(d))return s(void 0,d)}function o(c,d){if(utils$3.isUndefined(d)){if(!utils$3.isUndefined(c))return s(void 0,c)}else return s(void 0,d)}function l(c,d,p){if(p in e)return s(c,d);if(p in t)return s(void 0,c)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,d,p)=>i(headersToObject(c),headersToObject(d),p,!0)};return utils$3.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=u[d]||i,m=p(t[d],e[d],d);utils$3.isUndefined(m)&&p!==l||(n[d]=m)}),n}const resolveConfig=t=>{const e=mergeConfig$1({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=e;e.headers=o=AxiosHeaders$1.from(o),e.url=buildURL(buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(utils$3.isFormData(n)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[c,...d]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(s&&utils$3.isFunction(s)&&(s=s(e)),s||s!==!1&&isURLSameOrigin(e.url))){const c=i&&a&&cookies.read(a);c&&o.set(i,c)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(n,s){const i=resolveConfig(t);let a=i.data;const o=AxiosHeaders$1.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=i,d,p,m,g,E;function x(){g&&g(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function S(){if(!b)return;const T=AxiosHeaders$1.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:T,config:t,request:b};settle(function(O){n(O),x()},function(O){s(O),x()},D),b=null}"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(S)},b.onabort=function(){b&&(s(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,t,b)),b=null)},b.onerror=function(){s(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||transitionalDefaults;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),s(new AxiosError$1(I,D.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,t,b)),b=null},a===void 0&&o.setContentType(null),"setRequestHeader"in b&&utils$3.forEach(o.toJSON(),function(I,D){b.setRequestHeader(D,I)}),utils$3.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),l&&l!=="json"&&(b.responseType=i.responseType),c&&([m,E]=progressEventReducer(c,!0),b.addEventListener("progress",m)),u&&b.upload&&([p,g]=progressEventReducer(u),b.upload.addEventListener("progress",p),b.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(d=T=>{b&&(s(!T||T.type?new CanceledError$1(null,t,b):T),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const C=parseProtocol(i.url);if(C&&platform$1.protocols.indexOf(C)===-1){s(new AxiosError$1("Unsupported protocol "+C+":",AxiosError$1.ERR_BAD_REQUEST,t));return}b.send(a||null)})},composeSignals=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,i;const a=function(c){if(!i){i=!0,l();const d=c instanceof Error?c:this.reason;s.abort(d instanceof AxiosError$1?d:new CanceledError$1(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,a(new AxiosError$1(`timeout ${e} of ms exceeded`,AxiosError$1.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),t=null)};t.forEach(c=>c.addEventListener("abort",a));const{signal:u}=s;return u.unsubscribe=()=>utils$3.asap(l),u}},streamChunk=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,i;for(;s<n;)i=s+e,yield t.slice(s,i),s=i},readBytes=async function*(t,e){for await(const n of readStream(t))yield*streamChunk(n,e)},readStream=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},trackStream=(t,e,n,s)=>{const i=readBytes(t,e);let a=0,o,l=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await i.next();if(c){l(),u.close();return}let p=d.byteLength;if(n){let m=a+=p;n(m)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),test$2=(t,...e)=>{try{return!!t(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test$2(()=>{let t=!1;const e=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test$2(()=>utils$3.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(t=>t.body)};isFetchSupported&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$3.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,s)})})})(new Response);const getBodyLength=async t=>{if(t==null)return 0;if(utils$3.isBlob(t))return t.size;if(utils$3.isSpecCompliantForm(t))return(await new Request(platform$1.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(utils$3.isArrayBufferView(t)||utils$3.isArrayBuffer(t))return t.byteLength;if(utils$3.isURLSearchParams(t)&&(t=t+""),utils$3.isString(t))return(await encodeText(t)).byteLength},resolveBodyLength=async(t,e)=>{const n=utils$3.toFiniteNumber(t.getContentLength());return n??getBodyLength(e)},fetchAdapter=isFetchSupported&&(async t=>{let{url:e,method:n,data:s,signal:i,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:m}=resolveConfig(t);c=c?(c+"").toLowerCase():"text";let g=composeSignals([i,a&&a.toAbortSignal()],o),E;const x=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let b;try{if(u&&supportsRequestStream&&n!=="get"&&n!=="head"&&(b=await resolveBodyLength(d,s))!==0){let D=new Request(e,{method:"POST",body:s,duplex:"half"}),P;if(utils$3.isFormData(s)&&(P=D.headers.get("content-type"))&&d.setContentType(P),D.body){const[O,B]=progressEventDecorator(b,progressEventReducer(asyncDecorator(u)));s=trackStream(D.body,DEFAULT_CHUNK_SIZE,O,B)}}utils$3.isString(p)||(p=p?"include":"omit");const S="credentials"in Request.prototype;E=new Request(e,{...m,signal:g,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:S?p:void 0});let C=await fetch(E,m);const T=supportsResponseStream&&(c==="stream"||c==="response");if(supportsResponseStream&&(l||T&&x)){const D={};["status","statusText","headers"].forEach(F=>{D[F]=C[F]});const P=utils$3.toFiniteNumber(C.headers.get("content-length")),[O,B]=l&&progressEventDecorator(P,progressEventReducer(asyncDecorator(l),!0))||[];C=new Response(trackStream(C.body,DEFAULT_CHUNK_SIZE,O,()=>{B&&B(),x&&x()}),D)}c=c||"text";let I=await resolvers[utils$3.findKey(resolvers,c)||"text"](C,t);return!T&&x&&x(),await new Promise((D,P)=>{settle(D,P,{data:I,headers:AxiosHeaders$1.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:E})})}catch(S){throw x&&x(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,t,E),{cause:S.cause||S}):AxiosError$1.from(S,S&&S.code,t,E)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$3.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils$3.isFunction(t)||t===null||t===!1,adapters={getAdapter:t=>{t=utils$3.isArray(t)?t:[t];const{length:e}=t;let n,s;const i={};for(let a=0;a<e;a++){n=t[a];let o;if(s=n,!isResolvedHandle(n)&&(s=knownAdapters[(o=String(n)).toLowerCase()],s===void 0))throw new AxiosError$1(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(renderReason).join(`
`):" "+renderReason(a[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError$1(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$3.adapter)(t).then(function(s){return throwIfCancellationRequested(t),s.data=transformData.call(t,t.transformResponse,s),s.headers=AxiosHeaders$1.from(s.headers),s},function(s){return isCancel$1(s)||(throwIfCancellationRequested(t),s&&s.response&&(s.response.data=transformData.call(t,t.transformResponse,s.response),s.response.headers=AxiosHeaders$1.from(s.response.headers))),Promise.reject(s)})}const VERSION$2="1.10.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(e,n,s){function i(a,o){return"[Axios v"+VERSION$2+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,l)=>{if(e===!1)throw new AxiosError$1(i(o," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,o,l):!0}};validators$1.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function assertOptions(t,e,n){if(typeof t!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const a=s[i],o=e[a];if(o){const l=t[a],u=l===void 0||o(l,a,t);if(u!==!0)throw new AxiosError$1("option "+a+" must be "+u,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+a,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig$1(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:a}=n;s!==void 0&&validator.assertOptions(s,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),i!=null&&(utils$3.isFunction(i)?n.paramsSerializer={serialize:i}:validator.assertOptions(i,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&utils$3.merge(a.common,a[n.method]);a&&utils$3.forEach(["delete","get","head","post","put","patch","common"],E=>{delete a[E]}),n.headers=AxiosHeaders$1.concat(o,a);const l=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(u=u&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,p=0,m;if(!u){const E=[dispatchRequest.bind(this),void 0];for(E.unshift.apply(E,l),E.push.apply(E,c),m=E.length,d=Promise.resolve(n);p<m;)d=d.then(E[p++],E[p++]);return d}m=l.length;let g=n;for(p=0;p<m;){const E=l[p++],x=l[p++];try{g=E(g)}catch(b){x.call(this,b);break}}try{d=dispatchRequest.call(this,g)}catch(E){return Promise.reject(E)}for(p=0,m=c.length;p<m;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=mergeConfig$1(this.defaults,e);const n=buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL(n,e.params,e.paramsSerializer)}};utils$3.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(n,s){return this.request(mergeConfig$1(s||{},{method:e,url:n,data:(s||{}).data}))}});utils$3.forEach(["post","put","patch"],function(e){function n(s){return function(a,o,l){return this.request(mergeConfig$1(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Axios$1.prototype[e]=n(),Axios$1.prototype[e+"Form"]=n(!0)});let CancelToken$1=class Jp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{s.subscribe(l),a=l}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},e(function(a,o,l){s.reason||(s.reason=new CanceledError$1(a,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Jp(function(i){e=i}),cancel:e}}};function spread$1(t){return function(n){return t.apply(null,n)}}function isAxiosError$1(t){return utils$3.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([t,e])=>{HttpStatusCode$1[e]=t});function createInstance(t){const e=new Axios$1(t),n=bind(Axios$1.prototype.request,e);return utils$3.extend(n,Axios$1.prototype,e,{allOwnKeys:!0}),utils$3.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return createInstance(mergeConfig$1(t,i))},n}const axios=createInstance(defaults$3);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils$3.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function t(){this.__data__=[],this.size=0}return _listCacheClear=t,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function t(e,n){return e===n||e!==e&&n!==n}return eq_1=t,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var t=requireEq();function e(n,s){for(var i=n.length;i--;)if(t(n[i][0],s))return i;return-1}return _assocIndexOf=e,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var t=require_assocIndexOf(),e=Array.prototype,n=e.splice;function s(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():n.call(a,o,1),--this.size,!0}return _listCacheDelete=s,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var t=require_assocIndexOf();function e(n){var s=this.__data__,i=t(s,n);return i<0?void 0:s[i][1]}return _listCacheGet=e,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var t=require_assocIndexOf();function e(n){return t(this.__data__,n)>-1}return _listCacheHas=e,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var t=require_assocIndexOf();function e(n,s){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,s])):i[a][1]=s,this}return _listCacheSet=e,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var t=require_listCacheClear(),e=require_listCacheDelete(),n=require_listCacheGet(),s=require_listCacheHas(),i=require_listCacheSet();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,_ListCache=a,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var t=require_ListCache();function e(){this.__data__=new t,this.size=0}return _stackClear=e,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function t(e){var n=this.__data__,s=n.delete(e);return this.size=n.size,s}return _stackDelete=t,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function t(e){return this.__data__.get(e)}return _stackGet=t,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function t(e){return this.__data__.has(e)}return _stackHas=t,_stackHas}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var t=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=t,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var t=require_freeGlobal(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return _root=n,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var t=require_root(),e=t.Symbol;return _Symbol=e,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var t=require_Symbol(),e=Object.prototype,n=e.hasOwnProperty,s=e.toString,i=t?t.toStringTag:void 0;function a(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var c=!0}catch{}var d=s.call(o);return c&&(l?o[i]=u:delete o[i]),d}return _getRawTag=a,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var t=Object.prototype,e=t.toString;function n(s){return e.call(s)}return _objectToString=n,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var t=require_Symbol(),e=require_getRawTag(),n=require_objectToString(),s="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:s:a&&a in Object(l)?e(l):n(l)}return _baseGetTag=o,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return isObject_1=t,isObject_1}var isFunction_1$1,hasRequiredIsFunction$1;function requireIsFunction$1(){if(hasRequiredIsFunction$1)return isFunction_1$1;hasRequiredIsFunction$1=1;var t=require_baseGetTag(),e=requireIsObject(),n="[object AsyncFunction]",s="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==s||u==i||u==n||u==a}return isFunction_1$1=o,isFunction_1$1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var t=require_root(),e=t["__core-js_shared__"];return _coreJsData=e,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var t=require_coreJsData(),e=function(){var s=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function n(s){return!!e&&e in s}return _isMasked=n,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var t=Function.prototype,e=t.toString;function n(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return _toSource=n,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var t=requireIsFunction$1(),e=require_isMasked(),n=requireIsObject(),s=require_toSource(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||e(m))return!1;var g=t(m)?d:a;return g.test(s(m))}return _baseIsNative=p,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function t(e,n){return e?.[n]}return _getValue=t,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var t=require_baseIsNative(),e=require_getValue();function n(s,i){var a=e(s,i);return t(a)?a:void 0}return _getNative=n,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var t=require_getNative(),e=require_root(),n=t(e,"Map");return _Map=n,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var t=require_getNative(),e=t(Object,"create");return _nativeCreate=e,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var t=require_nativeCreate();function e(){this.__data__=t?t(null):{},this.size=0}return _hashClear=e,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return _hashDelete=t,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__",n=Object.prototype,s=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var l=o[a];return l===e?void 0:l}return s.call(o,a)?o[a]:void 0}return _hashGet=i,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var t=require_nativeCreate(),e=Object.prototype,n=e.hasOwnProperty;function s(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return _hashHas=s,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__";function n(s,i){var a=this.__data__;return this.size+=this.has(s)?0:1,a[s]=t&&i===void 0?e:i,this}return _hashSet=n,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var t=require_hashClear(),e=require_hashDelete(),n=require_hashGet(),s=require_hashHas(),i=require_hashSet();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,_Hash=a,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var t=require_Hash(),e=require_ListCache(),n=require_Map();function s(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return _mapCacheClear=s,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return _isKeyable=t,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var t=require_isKeyable();function e(n,s){var i=n.__data__;return t(s)?i[typeof s=="string"?"string":"hash"]:i.map}return _getMapData=e,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var t=require_getMapData();function e(n){var s=t(this,n).delete(n);return this.size-=s?1:0,s}return _mapCacheDelete=e,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var t=require_getMapData();function e(n){return t(this,n).get(n)}return _mapCacheGet=e,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var t=require_getMapData();function e(n){return t(this,n).has(n)}return _mapCacheHas=e,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var t=require_getMapData();function e(n,s){var i=t(this,n),a=i.size;return i.set(n,s),this.size+=i.size==a?0:1,this}return _mapCacheSet=e,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var t=require_mapCacheClear(),e=require_mapCacheDelete(),n=require_mapCacheGet(),s=require_mapCacheHas(),i=require_mapCacheSet();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,_MapCache=a,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var t=require_ListCache(),e=require_Map(),n=require_MapCache(),s=200;function i(a,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<s-1)return u.push([a,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(a,o),this.size=l.size,this}return _stackSet=i,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var t=require_ListCache(),e=require_stackClear(),n=require_stackDelete(),s=require_stackGet(),i=require_stackHas(),a=require_stackSet();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=s,o.prototype.has=i,o.prototype.set=a,_Stack=o,_Stack}var _arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function t(e,n){for(var s=-1,i=e==null?0:e.length;++s<i&&n(e[s],s,e)!==!1;);return e}return _arrayEach=t,_arrayEach}var _defineProperty$2,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$2;hasRequired_defineProperty=1;var t=require_getNative(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return _defineProperty$2=e,_defineProperty$2}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var t=require_defineProperty();function e(n,s,i){s=="__proto__"&&t?t(n,s,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[s]=i}return _baseAssignValue=e,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var t=require_baseAssignValue(),e=requireEq(),n=Object.prototype,s=n.hasOwnProperty;function i(a,o,l){var u=a[o];(!(s.call(a,o)&&e(u,l))||l===void 0&&!(o in a))&&t(a,o,l)}return _assignValue=i,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var t=require_assignValue(),e=require_baseAssignValue();function n(s,i,a,o){var l=!a;a||(a={});for(var u=-1,c=i.length;++u<c;){var d=i[u],p=o?o(a[d],s[d],d,a,s):void 0;p===void 0&&(p=s[d]),l?e(a,d,p):t(a,d,p)}return a}return _copyObject=n,_copyObject}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function t(e,n){for(var s=-1,i=Array(e);++s<e;)i[s]=n(s);return i}return _baseTimes=t,_baseTimes}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function t(e){return e!=null&&typeof e=="object"}return isObjectLike_1=t,isObjectLike_1}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var t=require_baseGetTag(),e=requireIsObjectLike(),n="[object Arguments]";function s(i){return e(i)&&t(i)==n}return _baseIsArguments=s,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var t=require_baseIsArguments(),e=requireIsObjectLike(),n=Object.prototype,s=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&s.call(o,"callee")&&!i.call(o,"callee")};return isArguments_1=a,isArguments_1}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var t=Array.isArray;return isArray_1=t,isArray_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function t(){return!1}return stubFalse_1=t,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,function(t,e){var n=require_root(),s=requireStubFalse(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||s;t.exports=c}(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(s,i){var a=typeof s;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<i}return _isIndex=n,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return isLength_1=e,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var t=require_baseGetTag(),e=requireIsLength(),n=requireIsObjectLike(),s="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",c="[object Map]",d="[object Number]",p="[object Object]",m="[object RegExp]",g="[object Set]",E="[object String]",x="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",C="[object Float32Array]",T="[object Float64Array]",I="[object Int8Array]",D="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",B="[object Uint8ClampedArray]",F="[object Uint16Array]",H="[object Uint32Array]",Q={};Q[C]=Q[T]=Q[I]=Q[D]=Q[P]=Q[O]=Q[B]=Q[F]=Q[H]=!0,Q[s]=Q[i]=Q[b]=Q[a]=Q[S]=Q[o]=Q[l]=Q[u]=Q[c]=Q[d]=Q[p]=Q[m]=Q[g]=Q[E]=Q[x]=!1;function Z(ne){return n(ne)&&e(ne.length)&&!!Q[t(ne)]}return _baseIsTypedArray=Z,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function t(e){return function(n){return e(n)}}return _baseUnary=t,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,function(t,e){var n=require_freeGlobal(),s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===s,o=a&&n.process,l=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var t=require_baseIsTypedArray(),e=require_baseUnary(),n=require_nodeUtil(),s=n&&n.isTypedArray,i=s?e(s):t;return isTypedArray_1=i,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var t=require_baseTimes(),e=requireIsArguments(),n=requireIsArray(),s=requireIsBuffer(),i=require_isIndex(),a=requireIsTypedArray(),o=Object.prototype,l=o.hasOwnProperty;function u(c,d){var p=n(c),m=!p&&e(c),g=!p&&!m&&s(c),E=!p&&!m&&!g&&a(c),x=p||m||g||E,b=x?t(c.length,String):[],S=b.length;for(var C in c)(d||l.call(c,C))&&!(x&&(C=="length"||g&&(C=="offset"||C=="parent")||E&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||i(C,S)))&&b.push(C);return b}return _arrayLikeKeys=u,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var t=Object.prototype;function e(n){var s=n&&n.constructor,i=typeof s=="function"&&s.prototype||t;return n===i}return _isPrototype=e,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function t(e,n){return function(s){return e(n(s))}}return _overArg=t,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var t=require_overArg(),e=t(Object.keys,Object);return _nativeKeys=e,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var t=require_isPrototype(),e=require_nativeKeys(),n=Object.prototype,s=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var l in Object(a))s.call(a,l)&&l!="constructor"&&o.push(l);return o}return _baseKeys=i,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var t=requireIsFunction$1(),e=requireIsLength();function n(s){return s!=null&&e(s.length)&&!t(s)}return isArrayLike_1=n,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var t=require_arrayLikeKeys(),e=require_baseKeys(),n=requireIsArrayLike();function s(i){return n(i)?t(i):e(i)}return keys_1=s,keys_1}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var t=require_copyObject(),e=requireKeys();function n(s,i){return s&&t(i,e(i),s)}return _baseAssign=n,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function t(e){var n=[];if(e!=null)for(var s in Object(e))n.push(s);return n}return _nativeKeysIn=t,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var t=requireIsObject(),e=require_isPrototype(),n=require_nativeKeysIn(),s=Object.prototype,i=s.hasOwnProperty;function a(o){if(!t(o))return n(o);var l=e(o),u=[];for(var c in o)c=="constructor"&&(l||!i.call(o,c))||u.push(c);return u}return _baseKeysIn=a,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var t=require_arrayLikeKeys(),e=require_baseKeysIn(),n=requireIsArrayLike();function s(i){return n(i)?t(i,!0):e(i)}return keysIn_1=s,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var t=require_copyObject(),e=requireKeysIn();function n(s,i){return s&&t(i,e(i),s)}return _baseAssignIn=n,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,function(t,e){var n=require_root(),s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===s,o=a?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(c,d){if(d)return c.slice();var p=c.length,m=l?l(p):new c.constructor(p);return c.copy(m),m}t.exports=u}(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function t(e,n){var s=-1,i=e.length;for(n||(n=Array(i));++s<i;)n[s]=e[s];return n}return _copyArray=t,_copyArray}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function t(e,n){for(var s=-1,i=e==null?0:e.length,a=0,o=[];++s<i;){var l=e[s];n(l,s,e)&&(o[a++]=l)}return o}return _arrayFilter=t,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function t(){return[]}return stubArray_1=t,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var t=require_arrayFilter(),e=requireStubArray(),n=Object.prototype,s=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return s.call(o,l)}))}:e;return _getSymbols=a,_getSymbols}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var t=require_copyObject(),e=require_getSymbols();function n(s,i){return t(s,e(s),i)}return _copySymbols=n,_copySymbols}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function t(e,n){for(var s=-1,i=n.length,a=e.length;++s<i;)e[a+s]=n[s];return e}return _arrayPush=t,_arrayPush}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var t=require_overArg(),e=t(Object.getPrototypeOf,Object);return _getPrototype=e,_getPrototype}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var t=require_arrayPush(),e=require_getPrototype(),n=require_getSymbols(),s=requireStubArray(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var l=[];o;)t(l,n(o)),o=e(o);return l}:s;return _getSymbolsIn=a,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var t=require_copyObject(),e=require_getSymbolsIn();function n(s,i){return t(s,e(s),i)}return _copySymbolsIn=n,_copySymbolsIn}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var t=require_arrayPush(),e=requireIsArray();function n(s,i,a){var o=i(s);return e(s)?o:t(o,a(s))}return _baseGetAllKeys=n,_baseGetAllKeys}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var t=require_baseGetAllKeys(),e=require_getSymbols(),n=requireKeys();function s(i){return t(i,n,e)}return _getAllKeys=s,_getAllKeys}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var t=require_baseGetAllKeys(),e=require_getSymbolsIn(),n=requireKeysIn();function s(i){return t(i,n,e)}return _getAllKeysIn=s,_getAllKeysIn}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var t=require_getNative(),e=require_root(),n=t(e,"DataView");return _DataView=n,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var t=require_getNative(),e=require_root(),n=t(e,"Promise");return _Promise=n,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var t=require_getNative(),e=require_root(),n=t(e,"Set");return _Set=n,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var t=require_getNative(),e=require_root(),n=t(e,"WeakMap");return _WeakMap=n,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var t=require_DataView(),e=require_Map(),n=require_Promise(),s=require_Set(),i=require_WeakMap(),a=require_baseGetTag(),o=require_toSource(),l="[object Map]",u="[object Object]",c="[object Promise]",d="[object Set]",p="[object WeakMap]",m="[object DataView]",g=o(t),E=o(e),x=o(n),b=o(s),S=o(i),C=a;return(t&&C(new t(new ArrayBuffer(1)))!=m||e&&C(new e)!=l||n&&C(n.resolve())!=c||s&&C(new s)!=d||i&&C(new i)!=p)&&(C=function(T){var I=a(T),D=I==u?T.constructor:void 0,P=D?o(D):"";if(P)switch(P){case g:return m;case E:return l;case x:return c;case b:return d;case S:return p}return I}),_getTag=C,_getTag}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var t=Object.prototype,e=t.hasOwnProperty;function n(s){var i=s.length,a=new s.constructor(i);return i&&typeof s[0]=="string"&&e.call(s,"index")&&(a.index=s.index,a.input=s.input),a}return _initCloneArray=n,_initCloneArray}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var t=require_root(),e=t.Uint8Array;return _Uint8Array=e,_Uint8Array}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var t=require_Uint8Array();function e(n){var s=new n.constructor(n.byteLength);return new t(s).set(new t(n)),s}return _cloneArrayBuffer=e,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var t=require_cloneArrayBuffer();function e(n,s){var i=s?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return _cloneDataView=e,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var t=/\w*$/;function e(n){var s=new n.constructor(n.source,t.exec(n));return s.lastIndex=n.lastIndex,s}return _cloneRegExp=e,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var t=require_Symbol(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function s(i){return n?Object(n.call(i)):{}}return _cloneSymbol=s,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var t=require_cloneArrayBuffer();function e(n,s){var i=s?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return _cloneTypedArray=e,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var t=require_cloneArrayBuffer(),e=require_cloneDataView(),n=require_cloneRegExp(),s=require_cloneSymbol(),i=require_cloneTypedArray(),a="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",c="[object RegExp]",d="[object Set]",p="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",E="[object DataView]",x="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",T="[object Int32Array]",I="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",O="[object Uint32Array]";function B(F,H,Q){var Z=F.constructor;switch(H){case g:return t(F);case a:case o:return new Z(+F);case E:return e(F,Q);case x:case b:case S:case C:case T:case I:case D:case P:case O:return i(F,Q);case l:return new Z;case u:case p:return new Z(F);case c:return n(F);case d:return new Z;case m:return s(F)}}return _initCloneByTag=B,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var t=requireIsObject(),e=Object.create,n=function(){function s(){}return function(i){if(!t(i))return{};if(e)return e(i);s.prototype=i;var a=new s;return s.prototype=void 0,a}}();return _baseCreate=n,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var t=require_baseCreate(),e=require_getPrototype(),n=require_isPrototype();function s(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return _initCloneObject=s,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var t=require_getTag(),e=requireIsObjectLike(),n="[object Map]";function s(i){return e(i)&&t(i)==n}return _baseIsMap=s,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var t=require_baseIsMap(),e=require_baseUnary(),n=require_nodeUtil(),s=n&&n.isMap,i=s?e(s):t;return isMap_1=i,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var t=require_getTag(),e=requireIsObjectLike(),n="[object Set]";function s(i){return e(i)&&t(i)==n}return _baseIsSet=s,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var t=require_baseIsSet(),e=require_baseUnary(),n=require_nodeUtil(),s=n&&n.isSet,i=s?e(s):t;return isSet_1=i,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var t=require_Stack(),e=require_arrayEach(),n=require_assignValue(),s=require_baseAssign(),i=require_baseAssignIn(),a=require_cloneBuffer(),o=require_copyArray(),l=require_copySymbols(),u=require_copySymbolsIn(),c=require_getAllKeys(),d=require_getAllKeysIn(),p=require_getTag(),m=require_initCloneArray(),g=require_initCloneByTag(),E=require_initCloneObject(),x=requireIsArray(),b=requireIsBuffer(),S=requireIsMap(),C=requireIsObject(),T=requireIsSet(),I=requireKeys(),D=requireKeysIn(),P=1,O=2,B=4,F="[object Arguments]",H="[object Array]",Q="[object Boolean]",Z="[object Date]",ne="[object Error]",re="[object Function]",se="[object GeneratorFunction]",G="[object Map]",K="[object Number]",M="[object Object]",W="[object RegExp]",ee="[object Set]",z="[object String]",ae="[object Symbol]",ce="[object WeakMap]",he="[object ArrayBuffer]",fe="[object DataView]",Ce="[object Float32Array]",Me="[object Float64Array]",Ye="[object Int8Array]",We="[object Int16Array]",Be="[object Int32Array]",rt="[object Uint8Array]",tt="[object Uint8ClampedArray]",Ue="[object Uint16Array]",Pe="[object Uint32Array]",Qe={};Qe[F]=Qe[H]=Qe[he]=Qe[fe]=Qe[Q]=Qe[Z]=Qe[Ce]=Qe[Me]=Qe[Ye]=Qe[We]=Qe[Be]=Qe[G]=Qe[K]=Qe[M]=Qe[W]=Qe[ee]=Qe[z]=Qe[ae]=Qe[rt]=Qe[tt]=Qe[Ue]=Qe[Pe]=!0,Qe[ne]=Qe[re]=Qe[ce]=!1;function Je(nt,ft,At,ot,qe,mt){var st,St=ft&P,bt=ft&O,Mt=ft&B;if(At&&(st=qe?At(nt,ot,qe,mt):At(nt)),st!==void 0)return st;if(!C(nt))return nt;var pt=x(nt);if(pt){if(st=m(nt),!St)return o(nt,st)}else{var rr=p(nt),Ft=rr==re||rr==se;if(b(nt))return a(nt,St);if(rr==M||rr==F||Ft&&!qe){if(st=bt||Ft?{}:E(nt),!St)return bt?u(nt,i(st,nt)):l(nt,s(st,nt))}else{if(!Qe[rr])return qe?nt:{};st=g(nt,rr,St)}}mt||(mt=new t);var Qt=mt.get(nt);if(Qt)return Qt;mt.set(nt,st),T(nt)?nt.forEach(function(Ar){st.add(Je(Ar,ft,At,Ar,nt,mt))}):S(nt)&&nt.forEach(function(Ar,Ir){st.set(Ir,Je(Ar,ft,At,Ir,nt,mt))});var nr=Mt?bt?d:c:bt?D:I,Ht=pt?void 0:nr(nt);return e(Ht||nt,function(Ar,Ir){Ht&&(Ir=Ar,Ar=nt[Ir]),n(st,Ir,Je(Ar,ft,At,Ir,nt,mt))}),st}return _baseClone=Je,_baseClone}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var t=require_baseClone(),e=1,n=4;function s(i){return t(i,e|n)}return cloneDeep_1=s,cloneDeep_1}var cloneDeepExports=requireCloneDeep();const cloneDeep=getDefaultExportFromCjs(cloneDeepExports);var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var t=require_baseGetTag(),e=requireIsObjectLike(),n="[object Symbol]";function s(i){return typeof i=="symbol"||e(i)&&t(i)==n}return isSymbol_1=s,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var t=requireIsArray(),e=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function i(a,o){if(t(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:s.test(a)||!n.test(a)||o!=null&&a in Object(o)}return _isKey=i,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var t=require_MapCache(),e="Expected a function";function n(s,i){if(typeof s!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=a.cache;if(u.has(l))return u.get(l);var c=s.apply(this,o);return a.cache=u.set(l,c)||u,c};return a.cache=new(n.Cache||t),a}return n.Cache=t,memoize_1=n,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var t=requireMemoize(),e=500;function n(s){var i=t(s,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return _memoizeCapped=n,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var t=require_memoizeCapped(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,s=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,l,u,c){a.push(u?c.replace(n,"$1"):l||o)}),a});return _stringToPath=s,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function t(e,n){for(var s=-1,i=e==null?0:e.length,a=Array(i);++s<i;)a[s]=n(e[s],s,e);return a}return _arrayMap=t,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var t=require_Symbol(),e=require_arrayMap(),n=requireIsArray(),s=requireIsSymbol(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(s(l))return a?a.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return _baseToString=o,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var t=require_baseToString();function e(n){return n==null?"":t(n)}return toString_1=e,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var t=requireIsArray(),e=require_isKey(),n=require_stringToPath(),s=requireToString();function i(a,o){return t(a)?a:e(a,o)?[a]:n(s(a))}return _castPath=i,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var t=requireIsSymbol();function e(n){if(typeof n=="string"||t(n))return n;var s=n+"";return s=="0"&&1/n==-1/0?"-0":s}return _toKey=e,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var t=require_castPath(),e=require_toKey();function n(s,i){i=t(i,s);for(var a=0,o=i.length;s!=null&&a<o;)s=s[e(i[a++])];return a&&a==o?s:void 0}return _baseGet=n,_baseGet}var get_1,hasRequiredGet$1;function requireGet$1(){if(hasRequiredGet$1)return get_1;hasRequiredGet$1=1;var t=require_baseGet();function e(n,s,i){var a=n==null?void 0:t(n,s);return a===void 0?i:a}return get_1=e,get_1}var getExports=requireGet$1();const get$5=getDefaultExportFromCjs(getExports);var isArrayExports=requireIsArray();const isArray$3=getDefaultExportFromCjs(isArrayExports);var extendStatics$1=function(t,e){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},extendStatics$1(t,e)};function __extends$1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics$1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var __assign$4=function(){return __assign$4=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},__assign$4.apply(this,arguments)};function __awaiter$1(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{c(s.next(d))}catch(p){o(p)}}function u(d){try{c(s.throw(d))}catch(p){o(p)}}function c(d){d.done?a(d.value):i(d.value).then(l,u)}c((s=s.apply(t,[])).next())})}function __generator$1(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return u([c,d])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(s=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __values$3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$4(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function __spreadArray$2(t,e,n){if(arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var EvaluationOperator={IS:"is",IS_NOT:"is not",CONTAINS:"contains",DOES_NOT_CONTAIN:"does not contain",LESS_THAN:"less",LESS_THAN_EQUALS:"less or equal",GREATER_THAN:"greater",GREATER_THAN_EQUALS:"greater or equal",VERSION_LESS_THAN:"version less",VERSION_LESS_THAN_EQUALS:"version less or equal",VERSION_GREATER_THAN:"version greater",VERSION_GREATER_THAN_EQUALS:"version greater or equal",SET_IS:"set is",SET_IS_NOT:"set is not",SET_CONTAINS:"set contains",SET_DOES_NOT_CONTAIN:"set does not contain",SET_CONTAINS_ANY:"set contains any",SET_DOES_NOT_CONTAIN_ANY:"set does not contain any",REGEX_MATCH:"regex match",REGEX_DOES_NOT_MATCH:"regex does not match"},stringToUtf8ByteArray=function(t){for(var e=[],n=0,s=0;s<t.length;s++){var i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)==55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return Uint8Array.from(e)},C1_32=-862048943,C2_32=461845907,R1_32=15,R2_32=13,M_32=5,N_32=-430675100,hash32x86=function(t,e){e===void 0&&(e=0);for(var n=stringToUtf8ByteArray(t),s=n.length,i=s>>2,a=e,o=0;o<i;o++){var l=o<<2,u=readIntLe(n,l);a=mix32(u,a)}var c=i<<2,d=0;switch(s-c){case 3:d^=n[c+2]<<16,d^=n[c+1]<<8,d^=n[c],d=Math.imul(d,C1_32),d=rotateLeft(d,R1_32),d=Math.imul(d,C2_32),a^=d;break;case 2:d^=n[c+1]<<8,d^=n[c],d=Math.imul(d,C1_32),d=rotateLeft(d,R1_32),d=Math.imul(d,C2_32),a^=d;break;case 1:d^=n[c],d=Math.imul(d,C1_32),d=rotateLeft(d,R1_32),d=Math.imul(d,C2_32),a^=d;break}return a^=s,fmix32(a)>>>0},mix32=function(t,e){var n=t,s=e;return n=Math.imul(n,C1_32),n=rotateLeft(n,R1_32),n=Math.imul(n,C2_32),s^=n,s=rotateLeft(s,R2_32),s=Math.imul(s,M_32),s+N_32|0},fmix32=function(t){var e=t;return e^=e>>>16,e=Math.imul(e,-2048144789),e^=e>>>13,e=Math.imul(e,-1028477387),e^=e>>>16,e},rotateLeft=function(t,e,n){n===void 0&&(n=32),e>n&&(e=e%n);var s=4294967295<<n-e>>>0,i=(t&s)>>>0>>>n-e>>>0;return(t<<e|i)>>>0},readIntLe=function(t,e){e===void 0&&(e=0);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return reverseBytes(n)},reverseBytes=function(t){return(t&-16777216)>>>24|(t&16711680)>>>8|(t&65280)<<8|(t&255)<<24},select=function(t,e){var n,s;if(!(!e||e.length===0)){try{for(var i=__values$3(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(!o||!t||typeof t!="object")return;t=t[o]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}if(t)return t}},MAJOR_MINOR_REGEX="(\\d+)\\.(\\d+)",PATCH_REGEX="(\\d+)",PRERELEASE_REGEX="(-(([-\\w]+\\.?)*))?",VERSION_PATTERN="^".concat(MAJOR_MINOR_REGEX,"(\\.").concat(PATCH_REGEX).concat(PRERELEASE_REGEX,")?$"),SemanticVersion=function(){function t(e,n,s,i){i===void 0&&(i=void 0),this.major=e,this.minor=n,this.patch=s,this.preRelease=i}return t.parse=function(e){if(e){var n=new RegExp(VERSION_PATTERN).exec(e);if(n){var s=Number(n[1]),i=Number(n[2]);if(!(isNaN(s)||isNaN(i))){var a=Number(n[4])||0,o=n[5]||void 0;return new t(s,i,a,o)}}}},t.prototype.compareTo=function(e){return this.major>e.major?1:this.major<e.major?-1:this.minor>e.minor?1:this.minor<e.minor?-1:this.patch>e.patch?1:this.patch<e.patch||this.preRelease&&!e.preRelease?-1:!this.preRelease&&e.preRelease?1:this.preRelease&&e.preRelease?this.preRelease>e.preRelease?1:this.preRelease<e.preRelease?-1:0:0},t}(),EvaluationEngine=function(){function t(){}return t.prototype.evaluate=function(e,n){var s,i,a={},o={context:e,result:a};try{for(var l=__values$3(n),u=l.next();!u.done;u=l.next()){var c=u.value,d=this.evaluateFlag(o,c);d&&(a[c.key]=d)}}catch(p){s={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}return a},t.prototype.evaluateFlag=function(e,n){var s,i,a;try{for(var o=__values$3(n.segments),l=o.next();!l.done;l=o.next()){var u=l.value;if(a=this.evaluateSegment(e,n,u),a){var c=__assign$4(__assign$4(__assign$4({},n.metadata),u.metadata),a.metadata);a=__assign$4(__assign$4({},a),{metadata:c});break}}}catch(d){s={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return a},t.prototype.evaluateSegment=function(e,n,s){if(!s.conditions){var i=this.bucket(e,s);return i!==void 0?n.variants[i]:void 0}var a=this.evaluateConditions(e,s.conditions);if(a){var i=this.bucket(e,s);return i!==void 0?n.variants[i]:void 0}},t.prototype.evaluateConditions=function(e,n){var s,i,a,o;try{for(var l=__values$3(n),u=l.next();!u.done;u=l.next()){var c=u.value,d=!0;try{for(var p=(a=void 0,__values$3(c)),m=p.next();!m.done;m=p.next()){var g=m.value;if(d=this.matchCondition(e,g),!d)break}}catch(E){a={error:E}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}if(d)return!0}}catch(E){s={error:E}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}return!1},t.prototype.matchCondition=function(e,n){var s=select(e,n.selector);if(s)if(this.isSetOperator(n.op)){var i=this.coerceStringArray(s);return i?this.matchSet(i,n.op,n.values):!1}else{var a=this.coerceString(s);return a!==void 0?this.matchString(a,n.op,n.values):!1}else return this.matchNull(n.op,n.values)},t.prototype.getHash=function(e){return hash32x86(e)},t.prototype.bucket=function(e,n){var s,i,a,o;if(!n.bucket)return n.variant;var l=this.coerceString(select(e,n.bucket.selector));if(!l||l.length===0)return n.variant;var u="".concat(n.bucket.salt,"/").concat(l),c=this.getHash(u),d=c%100,p=Math.floor(c/100);try{for(var m=__values$3(n.bucket.allocations),g=m.next();!g.done;g=m.next()){var E=g.value,x=E.range[0],b=E.range[1];if(d>=x&&d<b)try{for(var S=(a=void 0,__values$3(E.distributions)),C=S.next();!C.done;C=S.next()){var T=C.value,I=T.range[0],D=T.range[1];if(p>=I&&p<D)return T.variant}}catch(P){a={error:P}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}}}catch(P){s={error:P}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}return n.variant},t.prototype.matchNull=function(e,n){var s=this.containsNone(n);switch(e){case EvaluationOperator.IS:case EvaluationOperator.CONTAINS:case EvaluationOperator.LESS_THAN:case EvaluationOperator.LESS_THAN_EQUALS:case EvaluationOperator.GREATER_THAN:case EvaluationOperator.GREATER_THAN_EQUALS:case EvaluationOperator.VERSION_LESS_THAN:case EvaluationOperator.VERSION_LESS_THAN_EQUALS:case EvaluationOperator.VERSION_GREATER_THAN:case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:case EvaluationOperator.SET_IS:case EvaluationOperator.SET_CONTAINS:case EvaluationOperator.SET_CONTAINS_ANY:return s;case EvaluationOperator.IS_NOT:case EvaluationOperator.DOES_NOT_CONTAIN:case EvaluationOperator.SET_DOES_NOT_CONTAIN:case EvaluationOperator.SET_DOES_NOT_CONTAIN_ANY:return!s;default:return!1}},t.prototype.matchSet=function(e,n,s){switch(n){case EvaluationOperator.SET_IS:return this.setEquals(e,s);case EvaluationOperator.SET_IS_NOT:return!this.setEquals(e,s);case EvaluationOperator.SET_CONTAINS:return this.matchesSetContainsAll(e,s);case EvaluationOperator.SET_DOES_NOT_CONTAIN:return!this.matchesSetContainsAll(e,s);case EvaluationOperator.SET_CONTAINS_ANY:return this.matchesSetContainsAny(e,s);case EvaluationOperator.SET_DOES_NOT_CONTAIN_ANY:return!this.matchesSetContainsAny(e,s);default:return!1}},t.prototype.matchString=function(e,n,s){var i=this;switch(n){case EvaluationOperator.IS:return this.matchesIs(e,s);case EvaluationOperator.IS_NOT:return!this.matchesIs(e,s);case EvaluationOperator.CONTAINS:return this.matchesContains(e,s);case EvaluationOperator.DOES_NOT_CONTAIN:return!this.matchesContains(e,s);case EvaluationOperator.LESS_THAN:case EvaluationOperator.LESS_THAN_EQUALS:case EvaluationOperator.GREATER_THAN:case EvaluationOperator.GREATER_THAN_EQUALS:return this.matchesComparable(e,n,s,function(a){return i.parseNumber(a)},this.comparator);case EvaluationOperator.VERSION_LESS_THAN:case EvaluationOperator.VERSION_LESS_THAN_EQUALS:case EvaluationOperator.VERSION_GREATER_THAN:case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:return this.matchesComparable(e,n,s,function(a){return SemanticVersion.parse(a)},this.versionComparator);case EvaluationOperator.REGEX_MATCH:return this.matchesRegex(e,s);case EvaluationOperator.REGEX_DOES_NOT_MATCH:return!this.matchesRegex(e,s);default:return!1}},t.prototype.matchesIs=function(e,n){if(this.containsBooleans(n)){var s=e.toLowerCase();if(s==="true"||s==="false")return n.some(function(i){return i.toLowerCase()===s})}return n.some(function(i){return e===i})},t.prototype.matchesContains=function(e,n){var s,i;try{for(var a=__values$3(n),o=a.next();!o.done;o=a.next()){var l=o.value;if(e.toLowerCase().includes(l.toLowerCase()))return!0}}catch(u){s={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return!1},t.prototype.matchesComparable=function(e,n,s,i,a){var o=this,l=i(e),u=s.map(function(c){return i(c)}).filter(function(c){return c!==void 0});return l===void 0||u.length===0?s.some(function(c){return o.comparator(e,n,c)}):u.some(function(c){return a(l,n,c)})},t.prototype.comparator=function(e,n,s){switch(n){case EvaluationOperator.LESS_THAN:case EvaluationOperator.VERSION_LESS_THAN:return e<s;case EvaluationOperator.LESS_THAN_EQUALS:case EvaluationOperator.VERSION_LESS_THAN_EQUALS:return e<=s;case EvaluationOperator.GREATER_THAN:case EvaluationOperator.VERSION_GREATER_THAN:return e>s;case EvaluationOperator.GREATER_THAN_EQUALS:case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:return e>=s;default:return!1}},t.prototype.versionComparator=function(e,n,s){var i=e.compareTo(s);switch(n){case EvaluationOperator.LESS_THAN:case EvaluationOperator.VERSION_LESS_THAN:return i<0;case EvaluationOperator.LESS_THAN_EQUALS:case EvaluationOperator.VERSION_LESS_THAN_EQUALS:return i<=0;case EvaluationOperator.GREATER_THAN:case EvaluationOperator.VERSION_GREATER_THAN:return i>0;case EvaluationOperator.GREATER_THAN_EQUALS:case EvaluationOperator.VERSION_GREATER_THAN_EQUALS:return i>=0;default:return!1}},t.prototype.matchesRegex=function(e,n){return n.some(function(s){return!!new RegExp(s).exec(e)})},t.prototype.containsNone=function(e){return e.some(function(n){return n==="(none)"})},t.prototype.containsBooleans=function(e){return e.some(function(n){switch(n.toLowerCase()){case"true":case"false":return!0;default:return!1}})},t.prototype.parseNumber=function(e){var n;return(n=Number(e))!==null&&n!==void 0?n:void 0},t.prototype.coerceString=function(e){if(e!=null)return typeof e=="object"?JSON.stringify(e):String(e)},t.prototype.coerceStringArray=function(e){var n=this;if(Array.isArray(e)){var s=e;return s.map(function(l){return n.coerceString(l)}).filter(Boolean)}var i=String(e);try{var a=JSON.parse(i);if(Array.isArray(a)){var s=e;return s.map(function(u){return n.coerceString(u)}).filter(Boolean)}else{var o=this.coerceString(i);return o?[o]:void 0}}catch{var o=this.coerceString(i);return o?[o]:void 0}},t.prototype.isSetOperator=function(e){switch(e){case EvaluationOperator.SET_IS:case EvaluationOperator.SET_IS_NOT:case EvaluationOperator.SET_CONTAINS:case EvaluationOperator.SET_DOES_NOT_CONTAIN:case EvaluationOperator.SET_CONTAINS_ANY:case EvaluationOperator.SET_DOES_NOT_CONTAIN_ANY:return!0;default:return!1}},t.prototype.setEquals=function(e,n){var s=new Set(e),i=new Set(n);return s.size===i.size&&__spreadArray$2([],__read$4(i),!1).every(function(a){return s.has(a)})},t.prototype.matchesSetContainsAll=function(e,n){var s,i;if(e.length<n.length)return!1;try{for(var a=__values$3(n),o=a.next();!o.done;o=a.next()){var l=o.value;if(!this.matchesIs(l,e))return!1}}catch(u){s={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return!0},t.prototype.matchesSetContainsAny=function(e,n){var s,i;try{for(var a=__values$3(n),o=a.next();!o.done;o=a.next()){var l=o.value;if(this.matchesIs(l,e))return!0}}catch(u){s={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return!1},t}(),topologicalSort=function(t,e){var n,s,i=__assign$4({},t),a=[],o=e||Object.keys(i);try{for(var l=__values$3(o),u=l.next();!u.done;u=l.next()){var c=u.value,d=parentTraversal(c,i);d&&a.push.apply(a,__spreadArray$2([],__read$4(d),!1))}}catch(p){n={error:p}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return a},parentTraversal=function(t,e,n){var s,i;n===void 0&&(n=[]);var a=e[t];if(a){if(!a.dependencies||a.dependencies.length===0)return delete e[a.key],[a]}else return;n.push(a.key);var o=[],l=function(p){if(n.some(function(g){return g===p}))throw Error("Detected a cycle between flags ".concat(n));var m=parentTraversal(p,e,n);m&&o.push.apply(o,__spreadArray$2([],__read$4(m),!1))};try{for(var u=__values$3(a.dependencies),c=u.next();!c.done;c=u.next()){var d=c.value;l(d)}}catch(p){s={error:p}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(s)throw s.error}}return o.push(a),n.pop(),delete e[a.key],o};const version$8="3.7.5",VERSION=version$8,_hasatob=typeof atob=="function",_hasbtoa=typeof btoa=="function",_hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(t=>{let e={};return t.forEach((n,s)=>e[n]=s),e})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),_mkUriSafe=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),_tidyB64=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=t=>{let e,n,s,i,a="";const o=t.length%3;for(let l=0;l<t.length;){if((n=t.charCodeAt(l++))>255||(s=t.charCodeAt(l++))>255||(i=t.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=n<<16|s<<8|i,a+=b64chs[e>>18&63]+b64chs[e>>12&63]+b64chs[e>>6&63]+b64chs[e&63]}return o?a.slice(0,o-3)+"===".substring(o):a},_btoa=_hasbtoa?t=>btoa(t):_hasBuffer?t=>Buffer.from(t,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let s=0,i=t.length;s<i;s+=4096)n.push(_fromCC.apply(null,t.subarray(s,s+4096)));return _btoa(n.join(""))},fromUint8Array=(t,e=!1)=>e?_mkUriSafe(_fromUint8Array(t)):_fromUint8Array(t),cb_utob=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?_fromCC(192|e>>>6)+_fromCC(128|e&63):_fromCC(224|e>>>12&15)+_fromCC(128|e>>>6&63)+_fromCC(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return _fromCC(240|e>>>18&7)+_fromCC(128|e>>>12&63)+_fromCC(128|e>>>6&63)+_fromCC(128|e&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=t=>t.replace(re_utob,cb_utob),_encode=_hasBuffer?t=>Buffer.from(t,"utf8").toString("base64"):_TE?t=>_fromUint8Array(_TE.encode(t)):t=>_btoa(utob(t)),encode=(t,e=!1)=>e?_mkUriSafe(_encode(t)):_encode(t),encodeURI$1=t=>encode(t,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return _fromCC((n>>>10)+55296)+_fromCC((n&1023)+56320);case 3:return _fromCC((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return _fromCC((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=t=>t.replace(re_btou,cb_btou),atobPolyfill=t=>{if(t=t.replace(/\s+/g,""),!b64re.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",s,i;for(let a=0;a<t.length;)e=b64tab[t.charAt(a++)]<<18|b64tab[t.charAt(a++)]<<12|(s=b64tab[t.charAt(a++)])<<6|(i=b64tab[t.charAt(a++)]),n+=s===64?_fromCC(e>>16&255):i===64?_fromCC(e>>16&255,e>>8&255):_fromCC(e>>16&255,e>>8&255,e&255);return n},_atob=_hasatob?t=>atob(_tidyB64(t)):_hasBuffer?t=>Buffer.from(t,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?t=>_U8Afrom(Buffer.from(t,"base64")):t=>_U8Afrom(_atob(t).split("").map(e=>e.charCodeAt(0))),toUint8Array=t=>_toUint8Array(_unURI(t)),_decode=_hasBuffer?t=>Buffer.from(t,"base64").toString("utf8"):_TD?t=>_TD.decode(_toUint8Array(t)):t=>btou(_atob(t)),_unURI=t=>_tidyB64(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),decode=t=>_decode(_unURI(t)),isValid$3=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},_noEnum=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const t=(e,n)=>Object.defineProperty(String.prototype,e,_noEnum(n));t("fromBase64",function(){return decode(this)}),t("toBase64",function(e){return encode(this,e)}),t("toBase64URI",function(){return encode(this,!0)}),t("toBase64URL",function(){return encode(this,!0)}),t("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){const t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(n));t("toBase64",function(e){return fromUint8Array(this,e)}),t("toBase64URI",function(){return fromUint8Array(this,!0)}),t("toBase64URL",function(){return fromUint8Array(this,!0)})},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version$8,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode,encode,encodeURI:encodeURI$1,encodeURL:encodeURI$1,utob,btou,decode,isValid:isValid$3,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins};var FetchError=function(t){__extends$1(e,t);function e(n,s){var i=t.call(this,s)||this;return i.statusCode=n,Object.setPrototypeOf(i,e.prototype),i}return e}(Error),TimeoutError=function(t){__extends$1(e,t);function e(n){var s=t.call(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return e}(Error),SdkEvaluationApi=function(){function t(e,n,s){this.deploymentKey=e,this.serverUrl=n,this.httpClient=s}return t.prototype.getVariants=function(e,n){return __awaiter$1(this,void 0,void 0,function(){var s,i,a,o;return __generator$1(this,function(l){switch(l.label){case 0:return s=gBase64.encodeURL(JSON.stringify(e)),i={Authorization:"Api-Key ".concat(this.deploymentKey),"X-Amp-Exp-User":s},n?.flagKeys&&(i["X-Amp-Exp-Flag-Keys"]=gBase64.encodeURL(JSON.stringify(n.flagKeys))),n?.trackingOption&&(i["X-Amp-Exp-Track"]=n.trackingOption),a=new URL("".concat(this.serverUrl,"/sdk/v2/vardata?v=0")),n?.evaluationMode&&a.searchParams.append("eval_mode",n?.evaluationMode),n?.deliveryMethod&&a.searchParams.append("delivery_method",n?.deliveryMethod),[4,this.httpClient.request({requestUrl:a.toString(),method:"GET",headers:i,timeoutMillis:n?.timeoutMillis})];case 1:if(o=l.sent(),o.status!=200)throw new FetchError(o.status,"Fetch error response: status=".concat(o.status));return[2,JSON.parse(o.body)]}})})},t}(),SdkFlagApi=function(){function t(e,n,s){this.deploymentKey=e,this.serverUrl=n,this.httpClient=s}return t.prototype.getFlags=function(e){return __awaiter$1(this,void 0,void 0,function(){var n,s,i;return __generator$1(this,function(a){switch(a.label){case 0:return n={Authorization:"Api-Key ".concat(this.deploymentKey)},e?.libraryName&&e?.libraryVersion&&(n["X-Amp-Exp-Library"]="".concat(e.libraryName,"/").concat(e.libraryVersion)),[4,this.httpClient.request({requestUrl:"".concat(this.serverUrl,"/sdk/v2/flags"),method:"GET",headers:n,timeoutMillis:e?.timeoutMillis})];case 1:if(s=a.sent(),s.status!=200)throw Error("Flags error response: status=".concat(s.status));return i=JSON.parse(s.body),[2,i.reduce(function(o,l){return o[l.key]=l,o},{})]}})})},t}(),safeGlobal$1=typeof globalThis<"u"?globalThis:global||self,getGlobalScope=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},isLocalStorageAvailable=function(){var t=getGlobalScope();if(t)try{var e="EXP_test";return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),!0}catch{return!1}return!1},Poller=function(){function t(e,n){this.poller=void 0,this.action=e,this.ms=n}return t.prototype.start=function(){this.poller||(this.poller=safeGlobal$1.setInterval(this.action,this.ms),this.action())},t.prototype.stop=function(){this.poller&&(safeGlobal$1.clearInterval(this.poller),this.poller=void 0)},t}(),ApplicationContextProviderImpl=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:getLanguage(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),getLanguage=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},EventBridgeImpl=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t}(),__assign$3=function(){return __assign$3=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},__assign$3.apply(this,arguments)};function __values$2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$3(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}typeof SuppressedError=="function"&&SuppressedError;var isEqual$2=function(t,e){var n,s,i=["string","number","boolean","undefined"],a=typeof t,o=typeof e;if(a!==o)return!1;try{for(var l=__values$2(i),u=l.next();!u.done;u=l.next()){var c=u.value;if(c===a)return t===e}}catch(b){n={error:b}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var d=Array.isArray(t),p=Array.isArray(e);if(d!==p)return!1;if(d&&p){for(var m=0;m<t.length;m++)if(!isEqual$2(t[m],e[m]))return!1}else{var g=Object.keys(t).sort(),E=Object.keys(e).sort();if(!isEqual$2(g,E))return!1;var x=!0;return Object.keys(t).forEach(function(b){isEqual$2(t[b],e[b])||(x=!1)}),x}return!0},ID_OP_SET="$set",ID_OP_UNSET="$unset",ID_OP_CLEAR_ALL="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,s=new Array(n);n--;)s[n]=[e[n],t[e[n]]];return s});var IdentityStoreImpl=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=__assign$3({},this.identity.userProperties),s=__assign$3(__assign$3({},this.identity),{userProperties:n});return{setUserId:function(i){return s.userId=i,this},setDeviceId:function(i){return s.deviceId=i,this},setUserProperties:function(i){return s.userProperties=i,this},setOptOut:function(i){return s.optOut=i,this},updateUserProperties:function(i){var a,o,l,u,c,d,p=s.userProperties||{};try{for(var m=__values$2(Object.entries(i)),g=m.next();!g.done;g=m.next()){var E=__read$3(g.value,2),x=E[0],b=E[1];switch(x){case ID_OP_SET:try{for(var S=(l=void 0,__values$2(Object.entries(b))),C=S.next();!C.done;C=S.next()){var T=__read$3(C.value,2),I=T[0],D=T[1];p[I]=D}}catch(B){l={error:B}}finally{try{C&&!C.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}break;case ID_OP_UNSET:try{for(var P=(c=void 0,__values$2(Object.keys(b))),O=P.next();!O.done;O=P.next()){var I=O.value;delete p[I]}}catch(B){c={error:B}}finally{try{O&&!O.done&&(d=P.return)&&d.call(P)}finally{if(c)throw c.error}}break;case ID_OP_CLEAR_ALL:p={};break}}}catch(B){a={error:B}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}return s.userProperties=p,this},commit:function(){return e.setIdentity(s),this}}},t.prototype.getIdentity=function(){return __assign$3({},this.identity)},t.prototype.setIdentity=function(e){var n=__assign$3({},this.identity);this.identity=__assign$3({},e),isEqual$2(n,this.identity)||this.listeners.forEach(function(s){s(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),safeGlobal=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,AnalyticsConnector=function(){function t(){this.identityStore=new IdentityStoreImpl,this.eventBridge=new EventBridgeImpl,this.applicationContextProvider=new ApplicationContextProviderImpl}return t.getInstance=function(e){return safeGlobal.analyticsConnectorInstances||(safeGlobal.analyticsConnectorInstances={}),safeGlobal.analyticsConnectorInstances[e]||(safeGlobal.analyticsConnectorInstances[e]=new t),safeGlobal.analyticsConnectorInstances[e]},t}(),uaParser$1={exports:{}},uaParser=uaParser$1.exports,hasRequiredUaParser;function requireUaParser(){return hasRequiredUaParser||(hasRequiredUaParser=1,function(t,e){(function(n,s){var i="0.7.33",a="",o="?",l="function",u="undefined",c="object",d="string",p="major",m="model",g="name",E="type",x="vendor",b="version",S="architecture",C="console",T="mobile",I="tablet",D="smarttv",P="wearable",O="embedded",B=350,F="Amazon",H="Apple",Q="ASUS",Z="BlackBerry",ne="Browser",re="Chrome",se="Edge",G="Firefox",K="Google",M="Huawei",W="LG",ee="Microsoft",z="Motorola",ae="Opera",ce="Samsung",he="Sharp",fe="Sony",Ce="Xiaomi",Me="Zebra",Ye="Facebook",We=function(st,St){var bt={};for(var Mt in st)St[Mt]&&St[Mt].length%2===0?bt[Mt]=St[Mt].concat(st[Mt]):bt[Mt]=st[Mt];return bt},Be=function(st){for(var St={},bt=0;bt<st.length;bt++)St[st[bt].toUpperCase()]=st[bt];return St},rt=function(st,St){return typeof st===d?tt(St).indexOf(tt(st))!==-1:!1},tt=function(st){return st.toLowerCase()},Ue=function(st){return typeof st===d?st.replace(/[^\d\.]/g,a).split(".")[0]:s},Pe=function(st,St){if(typeof st===d)return st=st.replace(/^\s\s*/,a),typeof St===u?st:st.substring(0,B)},Qe=function(st,St){for(var bt=0,Mt,pt,rr,Ft,Qt,nr;bt<St.length&&!Qt;){var Ht=St[bt],Ar=St[bt+1];for(Mt=pt=0;Mt<Ht.length&&!Qt;)if(Qt=Ht[Mt++].exec(st),Qt)for(rr=0;rr<Ar.length;rr++)nr=Qt[++pt],Ft=Ar[rr],typeof Ft===c&&Ft.length>0?Ft.length===2?typeof Ft[1]==l?this[Ft[0]]=Ft[1].call(this,nr):this[Ft[0]]=Ft[1]:Ft.length===3?typeof Ft[1]===l&&!(Ft[1].exec&&Ft[1].test)?this[Ft[0]]=nr?Ft[1].call(this,nr,Ft[2]):s:this[Ft[0]]=nr?nr.replace(Ft[1],Ft[2]):s:Ft.length===4&&(this[Ft[0]]=nr?Ft[3].call(this,nr.replace(Ft[1],Ft[2])):s):this[Ft]=nr||s;bt+=2}},Je=function(st,St){for(var bt in St)if(typeof St[bt]===c&&St[bt].length>0){for(var Mt=0;Mt<St[bt].length;Mt++)if(rt(St[bt][Mt],st))return bt===o?s:bt}else if(rt(St[bt],st))return bt===o?s:bt;return st},nt={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ft={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},At={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,b],[/opios[\/ ]+([\w\.]+)/i],[b,[g,ae+" Mini"]],[/\bopr\/([\w\.]+)/i],[b,[g,ae]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,b],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[g,"UC"+ne]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[b,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[b,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[b,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+ne],b],[/\bfocus\/([\w\.]+)/i],[b,[g,G+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[g,ae+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[g,ae+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[g,"MIUI "+ne]],[/fxios\/([-\w\.]+)/i],[b,[g,G]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+ne]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+ne],b],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,b],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Ye],b],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[g,re+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,re+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[g,"Android "+ne]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[b,Je,nt]],[/(webkit|khtml)\/([\w\.]+)/i],[g,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[g,G+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,b],[/(cobalt)\/([\w\.]+)/i],[g,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,tt]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,a,tt]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[x,ce],[E,I]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[x,ce],[E,T]],[/((ipod|iphone)\d+,\d+)/i],[m,[x,H],[E,T]],[/(ipad\d+,\d+)/i],[m,[x,H],[E,I]],[/\((ip(?:hone|od)[\w ]*);/i],[m,[x,H],[E,T]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[x,H],[E,I]],[/(macintosh);/i],[m,[x,H]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[x,M],[E,I]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[x,M],[E,T]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[x,Ce],[E,T]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[x,Ce],[E,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[x,"OPPO"],[E,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[x,"Vivo"],[E,T]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[m,[x,"Realme"],[E,T]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[x,z],[E,T]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[x,z],[E,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[x,W],[E,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[x,W],[E,T]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[x,"Lenovo"],[E,I]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[x,"Nokia"],[E,T]],[/(pixel c)\b/i],[m,[x,K],[E,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[x,K],[E,T]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[x,fe],[E,T]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[x,fe],[E,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[x,"OnePlus"],[E,T]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[x,F],[E,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[x,F],[E,T]],[/(playbook);[-\w\),; ]+(rim)/i],[m,x,[E,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[x,Z],[E,T]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[x,Q],[E,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[x,Q],[E,T]],[/(nexus 9)/i],[m,[x,"HTC"],[E,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[m,/_/g," "],[E,T]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[x,"Acer"],[E,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[x,"Meizu"],[E,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[x,he],[E,T]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,m,[E,T]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,m,[E,I]],[/(surface duo)/i],[m,[x,ee],[E,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[x,"Fairphone"],[E,T]],[/(u304aa)/i],[m,[x,"AT&T"],[E,T]],[/\bsie-(\w*)/i],[m,[x,"Siemens"],[E,T]],[/\b(rct\w+) b/i],[m,[x,"RCA"],[E,I]],[/\b(venue[\d ]{2,7}) b/i],[m,[x,"Dell"],[E,I]],[/\b(q(?:mv|ta)\w+) b/i],[m,[x,"Verizon"],[E,I]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[x,"Barnes & Noble"],[E,I]],[/\b(tm\d{3}\w+) b/i],[m,[x,"NuVision"],[E,I]],[/\b(k88) b/i],[m,[x,"ZTE"],[E,I]],[/\b(nx\d{3}j) b/i],[m,[x,"ZTE"],[E,T]],[/\b(gen\d{3}) b.+49h/i],[m,[x,"Swiss"],[E,T]],[/\b(zur\d{3}) b/i],[m,[x,"Swiss"],[E,I]],[/\b((zeki)?tb.*\b) b/i],[m,[x,"Zeki"],[E,I]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],m,[E,I]],[/\b(ns-?\w{0,9}) b/i],[m,[x,"Insignia"],[E,I]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[x,"NextBook"],[E,I]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],m,[E,T]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],m,[E,T]],[/\b(ph-1) /i],[m,[x,"Essential"],[E,T]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[x,"Envizen"],[E,I]],[/\b(trio[-\w\. ]+) b/i],[m,[x,"MachSpeed"],[E,I]],[/\btu_(1491) b/i],[m,[x,"Rotor"],[E,I]],[/(shield[\w ]+) b/i],[m,[x,"Nvidia"],[E,I]],[/(sprint) (\w+)/i],[x,m,[E,T]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[x,ee],[E,T]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[x,Me],[E,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[x,Me],[E,T]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,m,[E,C]],[/droid.+; (shield) bui/i],[m,[x,"Nvidia"],[E,C]],[/(playstation [345portablevi]+)/i],[m,[x,fe],[E,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[x,ee],[E,C]],[/smart-tv.+(samsung)/i],[x,[E,D]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[x,ce],[E,D]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,W],[E,D]],[/(apple) ?tv/i],[x,[m,H+" TV"],[E,D]],[/crkey/i],[[m,re+"cast"],[x,K],[E,D]],[/droid.+aft(\w)( bui|\))/i],[m,[x,F],[E,D]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[x,he],[E,D]],[/(bravia[\w ]+)( bui|\))/i],[m,[x,fe],[E,D]],[/(mitv-\w{5}) bui/i],[m,[x,Ce],[E,D]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[x,Pe],[m,Pe],[E,D]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[E,D]],[/((pebble))app/i],[x,m,[E,P]],[/droid.+; (glass) \d/i],[m,[x,K],[E,P]],[/droid.+; (wt63?0{2,3})\)/i],[m,[x,Me],[E,P]],[/(quest( 2)?)/i],[m,[x,Ye],[E,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[E,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[m,[E,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[E,I]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[E,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[E,T]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[g,se+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,b],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[b,Je,ft]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[b,Je,ft]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,b],[/\(bb(10);/i],[b,[g,Z]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[g,G+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[b,[g,re+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],b],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,b],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,b]]},ot=function(st,St){if(typeof st===c&&(St=st,st=s),!(this instanceof ot))return new ot(st,St).getResult();var bt=st||(typeof n!==u&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),Mt=St?We(At,St):At;return this.getBrowser=function(){var pt={};return pt[g]=s,pt[b]=s,Qe.call(pt,bt,Mt.browser),pt.major=Ue(pt.version),pt},this.getCPU=function(){var pt={};return pt[S]=s,Qe.call(pt,bt,Mt.cpu),pt},this.getDevice=function(){var pt={};return pt[x]=s,pt[m]=s,pt[E]=s,Qe.call(pt,bt,Mt.device),pt},this.getEngine=function(){var pt={};return pt[g]=s,pt[b]=s,Qe.call(pt,bt,Mt.engine),pt},this.getOS=function(){var pt={};return pt[g]=s,pt[b]=s,Qe.call(pt,bt,Mt.os),pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return bt},this.setUA=function(pt){return bt=typeof pt===d&&pt.length>B?Pe(pt,B):pt,this},this.setUA(bt),this};ot.VERSION=i,ot.BROWSER=Be([g,b,p]),ot.CPU=Be([S]),ot.DEVICE=Be([m,x,E,C,T,D,I,P,O]),ot.ENGINE=ot.OS=Be([g,b]),t.exports&&(e=t.exports=ot),e.UAParser=ot;var qe=typeof n!==u&&(n.jQuery||n.Zepto);if(qe&&!qe.ua){var mt=new ot;qe.ua=mt.getResult(),qe.ua.get=function(){return mt.getUA()},qe.ua.set=function(st){mt.setUA(st);var St=mt.getResult();for(var bt in St)qe.ua[bt]=St[bt]}}})(typeof window=="object"?window:uaParser)}(uaParser$1,uaParser$1.exports)),uaParser$1.exports}var uaParserExports=requireUaParser(),__assign$2=function(){return __assign$2=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},__assign$2.apply(this,arguments)};function __awaiter(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{c(s.next(d))}catch(p){o(p)}}function u(d){try{c(s.throw(d))}catch(p){o(p)}}function c(d){d.done?a(d.value):i(d.value).then(l,u)}c((s=s.apply(t,[])).next())})}function __generator(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return u([c,d])}}function u(c){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(s=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function __values$1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$2(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function __spreadArray$1(t,e,n){if(arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var parseAmplitudeCookie=function(t,e){var n,s;e===void 0&&(e=!1);var i=generateKey(t,e),a=void 0,o=safeGlobal$1.document.cookie.split("; ");try{for(var l=__values$1(o),u=l.next();!u.done;u=l.next()){var c=u.value,d=__read$2(c.split("="),2),p=d[0],m=d[1];p===i&&(a=decodeURIComponent(m))}}catch(b){n={error:b}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}if(a)try{if(e){var g=Buffer.from(a,"base64").toString("utf-8");return JSON.parse(decodeURIComponent(g))}var E=a.split("."),x=void 0;return E.length>=2&&E[1]&&(x=Buffer.from(E[1],"base64").toString("utf-8")),{deviceId:E[0],userId:x}}catch{return}},parseAmplitudeLocalStorage=function(t){var e=generateKey(t,!0);try{var n=safeGlobal$1.localStorage.getItem(e);if(!n)return;var s=JSON.parse(n);return typeof s!="object"?void 0:s}catch{return}},parseAmplitudeSessionStorage=function(t){var e=generateKey(t,!0);try{var n=safeGlobal$1.sessionStorage.getItem(e);if(!n)return;var s=JSON.parse(n);return typeof s!="object"?void 0:s}catch{return}},generateKey=function(t,e){if(e)return t?.length<10?void 0:"AMP_".concat(t.substring(0,10));if(!(t?.length<6))return"amp_".concat(t.substring(0,6))},AmplitudeIntegrationPlugin=function(){function t(e,n,s){this.type="integration",this.apiKey=e,this.identityStore=n.identityStore,this.eventBridge=n.eventBridge,this.contextProvider=n.applicationContextProvider,this.timeoutMillis=s,this.loadPersistedState(),s<=0&&(this.setup=void 0)}return t.prototype.setup=function(e,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return e?.automaticFetchOnAmplitudeIdentityChange&&this.identityStore.addIdentityListener(function(){n?.fetch()}),[2,this.waitForConnectorIdentity(this.timeoutMillis)]})})},t.prototype.getUser=function(){var e=this.identityStore.getIdentity();return{user_id:e.userId,device_id:e.deviceId,user_properties:e.userProperties,version:this.contextProvider.versionName}},t.prototype.track=function(e){return this.eventBridge.receiver?(this.eventBridge.logEvent({eventType:e.eventType,eventProperties:e.eventProperties}),!0):!1},t.prototype.loadPersistedState=function(){if(!this.apiKey||this.apiKey.startsWith("client-"))return!1;var e=parseAmplitudeCookie(this.apiKey,!0);return e?(this.commitIdentityToConnector(e),!0):(e=parseAmplitudeCookie(this.apiKey,!1),e?(this.commitIdentityToConnector(e),!0):(e=parseAmplitudeLocalStorage(this.apiKey),e?(this.commitIdentityToConnector(e),!0):(e=parseAmplitudeSessionStorage(this.apiKey),e?(this.commitIdentityToConnector(e),!0):!1)))},t.prototype.commitIdentityToConnector=function(e){var n=this.identityStore.editIdentity();n.setDeviceId(e.deviceId),e.userId&&n.setUserId(e.userId),n.commit()},t.prototype.waitForConnectorIdentity=function(e){return __awaiter(this,void 0,void 0,function(){var n,s=this;return __generator(this,function(i){return n=this.identityStore.getIdentity(),!n.userId&&!n.deviceId?[2,Promise.race([new Promise(function(a){var o=function(){a(),s.identityStore.removeIdentityListener(o)};s.identityStore.addIdentityListener(o)}),new Promise(function(a,o){safeGlobal$1.setTimeout(o,e,"Timed out waiting for Amplitude Analytics SDK to initialize.")})])]:[2]})})},t}();function unfetch(t,e){return e=e||{},new Promise(function(n,s){var i=new XMLHttpRequest,a=[],o=[],l={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return a},entries:function(){return o},get:function(d){return l[d.toLowerCase()]},has:function(d){return d.toLowerCase()in l}}}};for(var c in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(d,p,m){a.push(p=p.toLowerCase()),o.push([p,m]),l[p]=l[p]?l[p]+","+m:m}),n(u())},i.onerror=s,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)})}var fetch$1=safeGlobal$1.fetch||unfetch,timeout=function(t,e){return e==null||e<=0?t:new Promise(function(n,s){safeGlobal$1.setTimeout(function(){s(new TimeoutError("Request timeout after "+e+" milliseconds"))},e),t.then(n,s)})},_request=function(t,e,n,s,i){var a=function(){return __awaiter(void 0,void 0,void 0,function(){var o,l,u;return __generator(this,function(c){switch(c.label){case 0:return[4,fetch$1(t,{method:e,headers:n,body:s})];case 1:return o=c.sent(),u={status:o.status},[4,o.text()];case 2:return l=(u.body=c.sent(),u),[2,l]}})})};return timeout(a(),i)},WrapperClient=function(){function t(e){this.client=e}return t.prototype.request=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.client.request(e.requestUrl,e.method,e.headers,null,e.timeoutMillis)];case 1:return[2,n.sent()]}})})},t}(),FetchHttpClient={request:_request},Source;(function(t){t.LocalStorage="localStorage",t.InitialVariants="initialVariants"})(Source||(Source={}));var VariantSource;(function(t){t.LocalStorage="storage",t.InitialVariants="initial",t.SecondaryLocalStorage="secondary-storage",t.SecondaryInitialVariants="secondary-initial",t.FallbackInline="fallback-inline",t.FallbackConfig="fallback-config",t.LocalEvaluation="local-evaluation"})(VariantSource||(VariantSource={}));var isFallback=function(t){return!t||t===VariantSource.FallbackInline||t===VariantSource.FallbackConfig||t===VariantSource.SecondaryInitialVariants},Defaults={debug:!1,instanceName:"$default_instance",fallbackVariant:{},initialVariants:{},initialFlags:void 0,source:Source.LocalStorage,serverUrl:"https://api.lab.amplitude.com",flagsServerUrl:"https://flag.lab.amplitude.com",serverZone:"US",fetchTimeoutMillis:1e4,retryFetchOnFailure:!0,automaticExposureTracking:!0,pollOnStart:!0,fetchOnStart:!0,automaticFetchOnAmplitudeIdentityChange:!1,userProvider:null,analyticsProvider:null,exposureTrackingProvider:null,httpClient:FetchHttpClient},version$7="1.12.3",MAX_QUEUE_SIZE=512,IntegrationManager=function(){function t(e,n){var s=this,i;this.isReady=new Promise(function(o){s.resolve=o}),this.config=e,this.client=n;var a=(i=e.instanceName)!==null&&i!==void 0?i:Defaults.instanceName;this.queue=new PersistentTrackingQueue(a),this.cache=new SessionDedupeCache(a)}return t.prototype.ready=function(){return this.integration?this.isReady:Promise.resolve()},t.prototype.setIntegration=function(e){var n=this;this.integration&&this.integration.teardown&&this.integration.teardown(),this.integration=e,e.setup?this.integration.setup(this.config,this.client).then(function(){n.queue.setTracker(n.integration.track.bind(e)),n.resolve()},function(s){console.error("Integration setup failed.",s),n.queue.setTracker(n.integration.track.bind(e)),n.resolve()}):(this.queue.setTracker(this.integration.track.bind(e)),this.resolve())},t.prototype.getUser=function(){return this.integration?this.integration.getUser():{}},t.prototype.track=function(e){if(this.cache.shouldTrack(e)){var n=this.getExposureEvent(e);this.queue.push(n)}},t.prototype.getExposureEvent=function(e){var n,s,i,a={eventType:"$exposure",eventProperties:e};return!((n=e.metadata)===null||n===void 0)&&n.exposureEvent?a={eventType:(s=e.metadata)===null||s===void 0?void 0:s.exposureEvent,eventProperties:e}:((i=e.metadata)===null||i===void 0?void 0:i.deliveryMethod)==="web"&&(a={eventType:"$impression",eventProperties:e}),a},t}(),SessionDedupeCache=function(){function t(e){this.isSessionStorageAvailable=isSessionStorageAvailable(),this.inMemoryCache={},this.storageKey="EXP_sent_".concat(e)}return t.prototype.shouldTrack=function(e){var n;if(((n=e.metadata)===null||n===void 0?void 0:n.deliveryMethod)==="web")return!0;this.loadCache();var s=this.inMemoryCache[e.flag_key],i=!1;return s||(i=!0,this.inMemoryCache[e.flag_key]=e.variant),this.storeCache(),i},t.prototype.loadCache=function(){if(this.isSessionStorageAvailable){var e=safeGlobal$1.sessionStorage.getItem(this.storageKey);this.inMemoryCache=e?JSON.parse(e):{}}},t.prototype.storeCache=function(){this.isSessionStorageAvailable&&safeGlobal$1.sessionStorage.setItem(this.storageKey,JSON.stringify(this.inMemoryCache))},t}(),PersistentTrackingQueue=function(){function t(e,n){n===void 0&&(n=MAX_QUEUE_SIZE),this.isLocalStorageAvailable=isLocalStorageAvailable(),this.inMemoryQueue=[],this.storageKey="EXP_unsent_".concat(e),this.maxQueueSize=n}return t.prototype.push=function(e){this.loadQueue(),this.inMemoryQueue.push(e),this.flush(),this.storeQueue()},t.prototype.setTracker=function(e){var n=this;this.tracker=e,this.poller=safeGlobal$1.setInterval(function(){n.loadFlushStore()},1e3),this.loadFlushStore()},t.prototype.flush=function(){var e,n;if(this.tracker&&this.inMemoryQueue.length!==0){try{for(var s=__values$1(this.inMemoryQueue),i=s.next();!i.done;i=s.next()){var a=i.value;if(!this.tracker(a))return}}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}this.inMemoryQueue=[],this.poller&&(safeGlobal$1.clearInterval(this.poller),this.poller=void 0)}},t.prototype.loadQueue=function(){if(this.isLocalStorageAvailable){var e=safeGlobal$1.localStorage.getItem(this.storageKey);this.inMemoryQueue=e?JSON.parse(e):[]}},t.prototype.storeQueue=function(){this.isLocalStorageAvailable&&(this.inMemoryQueue.length>this.maxQueueSize&&(this.inMemoryQueue=this.inMemoryQueue.slice(this.inMemoryQueue.length-this.maxQueueSize)),safeGlobal$1.localStorage.setItem(this.storageKey,JSON.stringify(this.inMemoryQueue)))},t.prototype.loadFlushStore=function(){this.loadQueue(),this.flush(),this.storeQueue()},t}(),isSessionStorageAvailable=function(){var t=getGlobalScope();if(t)try{var e="EXP_test";return t.sessionStorage.setItem(e,e),t.sessionStorage.removeItem(e),!0}catch{return!1}return!1},LocalStorage=function(){function t(){this.globalScope=getGlobalScope()}return t.prototype.get=function(e){var n;return(n=this.globalScope)===null||n===void 0?void 0:n.localStorage.getItem(e)},t.prototype.put=function(e,n){var s;(s=this.globalScope)===null||s===void 0||s.localStorage.setItem(e,n)},t.prototype.delete=function(e){var n;(n=this.globalScope)===null||n===void 0||n.localStorage.removeItem(e)},t}(),getVariantStorage=function(t,e,n){var s=t.substring(t.length-6),i="amp-exp-".concat(e,"-").concat(s);return new LoadStoreCache(i,n,transformVariantFromStorage)},getFlagStorage=function(t,e,n){n===void 0&&(n=new LocalStorage);var s=t.substring(t.length-6),i="amp-exp-".concat(e,"-").concat(s,"-flags");return new LoadStoreCache(i,n)},LoadStoreCache=function(){function t(e,n,s){this.cache={},this.namespace=e,this.storage=n,this.transformer=s}return t.prototype.get=function(e){return this.cache[e]},t.prototype.getAll=function(){return __assign$2({},this.cache)},t.prototype.put=function(e,n){this.cache[e]=n},t.prototype.putAll=function(e){var n,s;try{for(var i=__values$1(Object.keys(e)),a=i.next();!a.done;a=i.next()){var o=a.value;this.cache[o]=e[o]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}},t.prototype.remove=function(e){delete this.cache[e]},t.prototype.clear=function(){this.cache={}},t.prototype.load=function(){var e,n,s=this.storage.get(this.namespace),i;try{i=JSON.parse(s)||{}}catch{return}var a={};try{for(var o=__values$1(Object.keys(i)),l=o.next();!l.done;l=o.next()){var u=l.value;try{var c=void 0;this.transformer?c=this.transformer(i[u]):c=i[u],c&&(a[u]=c)}catch{}}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.clear(),this.putAll(a)},t.prototype.store=function(e){e===void 0&&(e=this.cache),this.storage.put(this.namespace,JSON.stringify(e))},t}(),transformVariantFromStorage=function(t){if(typeof t=="string")return{key:t,value:t};if(typeof t=="object"){var e=t.key,n=t.value,s=t.payload,i=t.metadata,a=t.expKey;i&&i.experimentKey?a=i.experimentKey:a&&(i=i||{},i.experimentKey=a);var o={};return e?o.key=e:n&&(o.key=n),n&&(o.value=n),i&&(o.metadata=i),s&&(o.payload=s),a&&(o.expKey=a),o}},exposureEvent=function(t,e,n,s){var i,a="[Experiment] Exposure",o=n?.value,l="[Experiment] ".concat(e);return{name:a,user:t,key:e,variant:n,userProperty:l,properties:{key:e,variant:o,source:s},userProperties:(i={},i[l]=o,i)}},isNullOrUndefined=function(t){return t==null},isNullUndefinedOrEmpty=function(t){return isNullOrUndefined(t)?!0:t&&Object.keys(t).length===0},isLocalEvaluationMode=function(t){var e;return((e=t?.metadata)===null||e===void 0?void 0:e.evaluationMode)==="local"},Backoff=function(){function t(e,n,s,i){this.started=!1,this.done=!1,this.attempts=e,this.min=n,this.max=s,this.scalar=i}return t.prototype.start=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:if(!this.started)this.started=!0;else throw Error("Backoff already started");return[4,this.backoff(e,0,this.min)];case 1:return n.sent(),[2]}})})},t.prototype.cancel=function(){this.done=!0,clearTimeout(this.timeoutHandle)},t.prototype.backoff=function(e,n,s){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(a){return this.done?[2]:(this.timeoutHandle=safeGlobal$1.setTimeout(function(){return __awaiter(i,void 0,void 0,function(){var o,l;return __generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,e()];case 1:return u.sent(),[3,3];case 2:return u.sent(),o=n+1,o<this.attempts&&(l=Math.min(s*this.scalar,this.max),this.backoff(e,o,l)),[3,3];case 3:return[2]}})})},s),[2])})})},t}(),convertUserToContext=function(t){var e,n,s,i;if(!t)return{};var a={user:t},o=getGlobalScope();o&&(a.page={url:o.location.href});var l={};if(!t.groups)return a;try{for(var u=__values$1(Object.keys(t.groups)),c=u.next();!c.done;c=u.next()){var d=c.value,p=t.groups[d];if(p.length>0&&p[0]){var m=p[0],g={group_name:m},E=(i=(s=t.group_properties)===null||s===void 0?void 0:s[d])===null||i===void 0?void 0:i[m];E&&Object.keys(E).length>0&&(g.group_properties=E),l[d]=g}}}catch(x){e={error:x}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return Object.keys(l).length>0&&(a.groups=l),delete a.user.groups,delete a.user.group_properties,a},convertVariant=function(t){return t==null?{}:typeof t=="string"?{key:t,value:t}:t},convertEvaluationVariantToVariant=function(t){if(!t)return{};var e=void 0;t.metadata&&(e=t.metadata.experimentKey);var n={};return t.key&&(n.key=t.key),t.value&&(n.value=t.value),t.payload&&(n.payload=t.payload),e&&(n.expKey=e),t.metadata&&(n.metadata=t.metadata),n},SessionAnalyticsProvider=function(){function t(e){this.setProperties={},this.unsetProperties={},this.analyticsProvider=e}return t.prototype.track=function(e){this.setProperties[e.key]!=e.variant.value&&(this.setProperties[e.key]=e.variant.value,delete this.unsetProperties[e.key],this.analyticsProvider.track(e))},t.prototype.setUserProperty=function(e){this.setProperties[e.key]!=e.variant.value&&this.analyticsProvider.setUserProperty(e)},t.prototype.unsetUserProperty=function(e){this.unsetProperties[e.key]||(this.unsetProperties[e.key]="unset",delete this.setProperties[e.key],this.analyticsProvider.unsetUserProperty(e))},t}(),SessionExposureTrackingProvider=function(){function t(e){this.tracked={},this.exposureTrackingProvider=e}return t.prototype.track=function(e){var n=this.tracked[e.flag_key];n&&n.variant===e.variant||(this.tracked[e.flag_key]=e,this.exposureTrackingProvider.track(e))},t}(),fetchBackoffTimeout=1e4,fetchBackoffAttempts=8,fetchBackoffMinMillis=500,fetchBackoffMaxMillis=1e4,fetchBackoffScalar=1.5,flagPollerIntervalMillis=6e4,euServerUrl="https://api.lab.eu.amplitude.com",euFlagsServerUrl="https://flag.lab.eu.amplitude.com",ExperimentClient=function(){function t(e,n){var s=this,i,a;if(this.engine=new EvaluationEngine,this.poller=new Poller(function(){return s.doFlags()},flagPollerIntervalMillis),this.isRunning=!1,this.apiKey=e,this.config=__assign$2(__assign$2(__assign$2({},Defaults),n),{serverUrl:n?.serverUrl||(((i=n?.serverZone)===null||i===void 0?void 0:i.toLowerCase())==="eu"?euServerUrl:Defaults.serverUrl),flagsServerUrl:n?.flagsServerUrl||(((a=n?.serverZone)===null||a===void 0?void 0:a.toLowerCase())==="eu"?euFlagsServerUrl:Defaults.flagsServerUrl)}),this.config.initialVariants)for(var o in this.config.initialVariants)this.config.initialVariants[o]=transformVariantFromStorage(this.config.initialVariants[o]);this.config.userProvider&&(this.userProvider=this.config.userProvider),this.config.analyticsProvider&&(this.analyticsProvider=new SessionAnalyticsProvider(this.config.analyticsProvider)),this.config.exposureTrackingProvider&&(this.exposureTrackingProvider=new SessionExposureTrackingProvider(this.config.exposureTrackingProvider)),this.integrationManager=new IntegrationManager(this.config,this);var l=new WrapperClient(this.config.httpClient||FetchHttpClient);this.flagApi=new SdkFlagApi(this.apiKey,this.config.flagsServerUrl,l),this.evaluationApi=new SdkEvaluationApi(this.apiKey,this.config.serverUrl,l);var u=new LocalStorage;this.variants=getVariantStorage(this.apiKey,this.config.instanceName,u),this.flags=getFlagStorage(this.apiKey,this.config.instanceName,u);try{this.flags.load(),this.variants.load()}catch{}this.mergeInitialFlagsWithStorage()}return t.prototype.start=function(e){var n;return __awaiter(this,void 0,void 0,function(){var s,i;return __generator(this,function(a){switch(a.label){case 0:return this.isRunning?[2]:(this.isRunning=!0,this.setUser(e),s=this.doFlags(),i=(n=this.config.fetchOnStart)!==null&&n!==void 0?n:!0,i?[4,Promise.all([this.fetch(e),s])]:[3,2]);case 1:return a.sent(),[3,4];case 2:return[4,s];case 3:a.sent(),a.label=4;case 4:return this.config.pollOnStart&&this.poller.start(),[2]}})})},t.prototype.stop=function(){this.isRunning&&(this.poller.stop(),this.isRunning=!1)},t.prototype.fetch=function(e,n){return e===void 0&&(e=this.user),__awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(i){switch(i.label){case 0:this.setUser(e||{}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchInternal(e,this.config.fetchTimeoutMillis,this.config.retryFetchOnFailure,n)];case 2:return i.sent(),[3,4];case 3:return s=i.sent(),this.config.debug&&(s instanceof TimeoutError?console.debug(s):console.error(s)),[3,4];case 4:return[2,this]}})})},t.prototype.variant=function(e,n){var s,i;if(!this.apiKey)return{value:void 0};var a=this.variantAndSource(e,n);return this.config.automaticExposureTracking&&this.exposureInternal(e,a),this.debug("[Experiment] variant for ".concat(e," is ").concat(((s=a.variant)===null||s===void 0?void 0:s.key)||((i=a.variant)===null||i===void 0?void 0:i.value))),a.variant||{}},t.prototype.exposure=function(e){var n=this.variantAndSource(e);this.exposureInternal(e,n)},t.prototype.all=function(){if(!this.apiKey)return{};var e=this.evaluate();for(var n in e){var s=this.flags.get(n);isLocalEvaluationMode(s)||delete e[n]}return __assign$2(__assign$2(__assign$2({},this.secondaryVariants()),this.sourceVariants()),e)},t.prototype.clear=function(){this.variants.clear();try{this.variants.store()}catch{}},t.prototype.getUser=function(){var e;if(!this.user)return this.user;if(!((e=this.user)===null||e===void 0)&&e.user_properties){var n=__assign$2({},this.user.user_properties);return __assign$2(__assign$2({},this.user),{user_properties:n})}else return __assign$2({},this.user)},t.prototype.setUser=function(e){var n;if(!e){this.user=null;return}if(!((n=this.user)===null||n===void 0)&&n.user_properties){var s=__assign$2({},e.user_properties);this.user=__assign$2(__assign$2({},e),{user_properties:s})}else this.user=__assign$2({},e)},t.prototype.getUserProvider=function(){return this.userProvider},t.prototype.setUserProvider=function(e){return this.userProvider=e,this},t.prototype.mergeInitialFlagsWithStorage=function(){var e=this;if(this.config.initialFlags){var n=JSON.parse(this.config.initialFlags);n.forEach(function(s){e.flags.get(s.key)||e.flags.put(s.key,s)})}},t.prototype.evaluate=function(e){var n,s,i=this.addContext(this.user),a=topologicalSort(this.flags.getAll(),e),o=convertUserToContext(i),l=this.engine.evaluate(o,a),u={};try{for(var c=__values$1(Object.keys(l)),d=c.next();!d.done;d=c.next()){var p=d.value;u[p]=convertEvaluationVariantToVariant(l[p])}}catch(m){n={error:m}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}return u},t.prototype.variantAndSource=function(e,n){var s={};this.config.source===Source.LocalStorage?s=this.localStorageVariantAndSource(e,n):this.config.source===Source.InitialVariants&&(s=this.initialVariantsVariantAndSource(e,n));var i=this.flags.get(e);return(isLocalEvaluationMode(i)||!s.variant&&i)&&(s=this.localEvaluationVariantAndSource(e,i,n)),s},t.prototype.localEvaluationVariantAndSource=function(e,n,s){var i,a={},o=this.evaluate([n.key])[e],l=VariantSource.LocalEvaluation,u=(i=o?.metadata)===null||i===void 0?void 0:i.default;if(!isNullOrUndefined(o)&&!u)return{variant:convertVariant(o),source:l,hasDefaultVariant:!1};if(u&&(a={variant:convertVariant(o),source:l,hasDefaultVariant:!0}),!isNullOrUndefined(s))return{variant:convertVariant(s),source:VariantSource.FallbackInline,hasDefaultVariant:a.hasDefaultVariant};var c=this.config.initialVariants[e];if(!isNullOrUndefined(c))return{variant:convertVariant(c),source:VariantSource.SecondaryInitialVariants,hasDefaultVariant:a.hasDefaultVariant};var d=convertVariant(this.config.fallbackVariant),p={variant:d,source:VariantSource.FallbackConfig,hasDefaultVariant:a.hasDefaultVariant};return isNullUndefinedOrEmpty(d)?a:p},t.prototype.localStorageVariantAndSource=function(e,n){var s,i={},a=this.variants.get(e),o=(s=a?.metadata)===null||s===void 0?void 0:s.default;if(!isNullOrUndefined(a)&&!o)return{variant:convertVariant(a),source:VariantSource.LocalStorage,hasDefaultVariant:!1};if(o&&(i={variant:convertVariant(a),source:VariantSource.LocalStorage,hasDefaultVariant:!0}),!isNullOrUndefined(n))return{variant:convertVariant(n),source:VariantSource.FallbackInline,hasDefaultVariant:i.hasDefaultVariant};var l=this.config.initialVariants[e];if(!isNullOrUndefined(l))return{variant:convertVariant(l),source:VariantSource.SecondaryInitialVariants,hasDefaultVariant:i.hasDefaultVariant};var u=convertVariant(this.config.fallbackVariant),c={variant:u,source:VariantSource.FallbackConfig,hasDefaultVariant:i.hasDefaultVariant};return isNullUndefinedOrEmpty(u)?i:c},t.prototype.initialVariantsVariantAndSource=function(e,n){var s,i={},a=this.config.initialVariants[e];if(!isNullOrUndefined(a))return{variant:convertVariant(a),source:VariantSource.InitialVariants,hasDefaultVariant:!1};var o=this.variants.get(e),l=(s=o?.metadata)===null||s===void 0?void 0:s.default;if(!isNullOrUndefined(o)&&!l)return{variant:convertVariant(o),source:VariantSource.LocalStorage,hasDefaultVariant:!1};if(l&&(i={variant:convertVariant(o),source:VariantSource.LocalStorage,hasDefaultVariant:!0}),!isNullOrUndefined(n))return{variant:convertVariant(n),source:VariantSource.FallbackInline,hasDefaultVariant:i.hasDefaultVariant};var u=convertVariant(this.config.fallbackVariant),c={variant:u,source:VariantSource.FallbackConfig,hasDefaultVariant:i.hasDefaultVariant};return isNullUndefinedOrEmpty(u)?i:c},t.prototype.fetchInternal=function(e,n,s,i){return __awaiter(this,void 0,void 0,function(){var a,o;return __generator(this,function(l){switch(l.label){case 0:if(!this.apiKey)throw Error("Experiment API key is empty");this.debug("[Experiment] Fetch all: retry=".concat(s)),s&&this.stopRetries(),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,this.doFetch(e,n,i)];case 2:return a=l.sent(),[4,this.storeVariants(a,i)];case 3:return l.sent(),[2,a];case 4:throw o=l.sent(),s&&this.shouldRetryFetch(o)&&this.startRetries(e,i),o;case 5:return[2]}})})},t.prototype.cleanUserPropsForFetch=function(e){var n=__assign$2({},e);return delete n.cookie,n},t.prototype.doFetch=function(e,n,s){return __awaiter(this,void 0,void 0,function(){var i,a,o,l,u,c,d;return __generator(this,function(p){switch(p.label){case 0:return[4,this.addContextOrWait(e)];case 1:return e=p.sent(),e=this.cleanUserPropsForFetch(e),this.debug("[Experiment] Fetch variants for user: ",e),[4,this.evaluationApi.getVariants(e,__assign$2({timeoutMillis:n},s))];case 2:i=p.sent(),a={};try{for(o=__values$1(Object.keys(i)),l=o.next();!l.done;l=o.next())u=l.value,a[u]=convertEvaluationVariantToVariant(i[u])}catch(m){c={error:m}}finally{try{l&&!l.done&&(d=o.return)&&d.call(o)}finally{if(c)throw c.error}}return this.debug("[Experiment] Received variants: ",a),[2,a]}})})},t.prototype.doFlags=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.flagApi.getFlags({libraryName:"experiment-js-client",libraryVersion:version$7,timeoutMillis:this.config.fetchTimeoutMillis})];case 1:return e=s.sent(),this.flags.clear(),this.flags.putAll(e),[3,3];case 2:if(n=s.sent(),n instanceof TimeoutError)this.config.debug&&console.debug(n);else throw n;return[3,3];case 3:try{this.flags.store()}catch{}return this.mergeInitialFlagsWithStorage(),[2]}})})},t.prototype.storeVariants=function(e,n){return __awaiter(this,void 0,void 0,function(){var s,i,a,o,o;return __generator(this,function(l){s=n&&n.flagKeys?n.flagKeys:[],s.length===0&&this.variants.clear(),i=function(u){s=s.filter(function(c){return c!==u}),a.variants.put(u,e[u])},a=this;for(o in e)i(o);for(o in s)this.variants.remove(o);try{this.variants.store()}catch{}return this.debug("[Experiment] Stored variants: ",e),[2]})})},t.prototype.startRetries=function(e,n){return __awaiter(this,void 0,void 0,function(){var s=this;return __generator(this,function(i){return this.debug("[Experiment] Retry fetch"),this.retriesBackoff=new Backoff(fetchBackoffAttempts,fetchBackoffMinMillis,fetchBackoffMaxMillis,fetchBackoffScalar),this.retriesBackoff.start(function(){return __awaiter(s,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,this.fetchInternal(e,fetchBackoffTimeout,!1,n)];case 1:return a.sent(),[2]}})})}),[2]})})},t.prototype.stopRetries=function(){this.retriesBackoff&&this.retriesBackoff.cancel()},t.prototype.addContext=function(e){var n,s=(n=this.userProvider)===null||n===void 0?void 0:n.getUser(),i=this.integrationManager.getUser(),a=__assign$2(__assign$2(__assign$2({},s?.user_properties),i.user_properties),e?.user_properties);return __assign$2(__assign$2(__assign$2(__assign$2({library:"experiment-js-client/".concat(version$7)},s),i),e),{user_properties:a})},t.prototype.addContextOrWait=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.integrationManager.ready()];case 1:return n.sent(),[2,this.addContext(e)]}})})},t.prototype.sourceVariants=function(){if(this.config.source==Source.LocalStorage)return this.variants.getAll();if(this.config.source==Source.InitialVariants)return this.config.initialVariants},t.prototype.secondaryVariants=function(){if(this.config.source==Source.LocalStorage)return this.config.initialVariants;if(this.config.source==Source.InitialVariants)return this.variants.getAll()},t.prototype.exposureInternal=function(e,n){var s,i,a,o,l,u,c,d,p,m=(a=(i=(s=n.variant)===null||s===void 0?void 0:s.metadata)===null||i===void 0?void 0:i.trackExposure)!==null&&a!==void 0?a:!0;if(m){this.legacyExposureInternal(e,n.variant,n.source);var g={flag_key:e},E=isFallback(n.source);if(!(E&&!n.hasDefaultVariant)){!((o=n.variant)===null||o===void 0)&&o.expKey&&(g.experiment_key=(l=n.variant)===null||l===void 0?void 0:l.expKey);var x=(u=n.variant)===null||u===void 0?void 0:u.metadata;!E&&!x?.default&&(!((c=n.variant)===null||c===void 0)&&c.key?g.variant=n.variant.key:!((d=n.variant)===null||d===void 0)&&d.value&&(g.variant=n.variant.value)),x&&(g.metadata=x),(p=this.exposureTrackingProvider)===null||p===void 0||p.track(g),this.integrationManager.track(g)}}},t.prototype.legacyExposureInternal=function(e,n,s){var i,a,o,l,u;if(this.analyticsProvider){var c=this.addContext(this.getUser()),d=exposureEvent(c,e,n,s);isFallback(s)||!n?.value?(a=(i=this.analyticsProvider)===null||i===void 0?void 0:i.unsetUserProperty)===null||a===void 0||a.call(i,d):n?.value&&((l=(o=this.analyticsProvider)===null||o===void 0?void 0:o.setUserProperty)===null||l===void 0||l.call(o,d),(u=this.analyticsProvider)===null||u===void 0||u.track(d))}},t.prototype.debug=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.config.debug&&console.debug.apply(console,__spreadArray$1([e],__read$2(n),!1))},t.prototype.shouldRetryFetch=function(e){return e instanceof FetchError?e.statusCode<400||e.statusCode>=500||e.statusCode===429:!0},t.prototype.addPlugin=function(e){e.type==="integration"&&this.integrationManager.setIntegration(e)},t}(),SessionStorage=function(){function t(){this.globalScope=getGlobalScope()}return t.prototype.get=function(e){var n;return(n=this.globalScope)===null||n===void 0?void 0:n.sessionStorage.getItem(e)},t.prototype.put=function(e,n){var s;(s=this.globalScope)===null||s===void 0||s.sessionStorage.setItem(e,n)},t.prototype.delete=function(e){var n;(n=this.globalScope)===null||n===void 0||n.sessionStorage.removeItem(e)},t}(),DefaultUserProvider=function(){function t(e,n){var s,i,a;this.globalScope=getGlobalScope(),this.userAgent=typeof((s=this.globalScope)===null||s===void 0?void 0:s.navigator)<"u"?(i=this.globalScope)===null||i===void 0?void 0:i.navigator.userAgent:void 0,this.ua=new uaParserExports.UAParser(this.userAgent).getResult(),this.localStorage=new LocalStorage,this.sessionStorage=new SessionStorage,this.userProvider=e,this.apiKey=n,this.storageKey="EXP_".concat((a=this.apiKey)===null||a===void 0?void 0:a.slice(0,10),"_DEFAULT_USER_PROVIDER")}return t.prototype.getUser=function(){var e,n,s,i,a,o=((e=this.userProvider)===null||e===void 0?void 0:e.getUser())||{};return __assign$2({language:this.getLanguage(),platform:"Web",os:this.getOs(this.ua),device_model:this.getDeviceModel(this.ua),device_category:(s=(n=this.ua.device)===null||n===void 0?void 0:n.type)!==null&&s!==void 0?s:"desktop",referring_url:(a=(i=this.globalScope)===null||i===void 0?void 0:i.document)===null||a===void 0?void 0:a.referrer.replace(/\/$/,""),cookie:this.getCookie(),browser:this.getBrowser(this.ua),landing_url:this.getLandingUrl(),first_seen:this.getFirstSeen(),url_param:this.getUrlParam(),user_agent:this.userAgent},o)},t.prototype.getLanguage=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},t.prototype.getOs=function(e){var n,s;return[(n=e.browser)===null||n===void 0?void 0:n.name,(s=e.browser)===null||s===void 0?void 0:s.major].filter(function(i){return i!=null}).join(" ")},t.prototype.getDeviceModel=function(e){var n;return(n=e.os)===null||n===void 0?void 0:n.name},t.prototype.getBrowser=function(e){var n,s=(n=e.browser)===null||n===void 0?void 0:n.name;return s?.includes("Chrom")&&(s="Chrome"),s?.includes("Firefox")&&(s="Firefox"),s?.includes("Safari")&&(s="Safari"),s?.includes("Edge")&&(s="Edge"),s?.includes("Opera")&&(s="Opera"),s},t.prototype.getCookie=function(){var e,n,s,i,a;if(!((n=(e=this.globalScope)===null||e===void 0?void 0:e.document)===null||n===void 0)&&n.cookie)return Object.fromEntries((a=(i=(s=this.globalScope)===null||s===void 0?void 0:s.document)===null||i===void 0?void 0:i.cookie)===null||a===void 0?void 0:a.split("; ").map(function(o){return o.split("=")}))},t.prototype.getLandingUrl=function(){var e,n;try{var s=JSON.parse(this.sessionStorage.get(this.storageKey)||"{}");return s.landing_url||(s.landing_url=(n=(e=this.globalScope)===null||e===void 0?void 0:e.location)===null||n===void 0?void 0:n.href.replace(/\/$/,""),this.sessionStorage.put(this.storageKey,JSON.stringify(s))),s.landing_url}catch{return}},t.prototype.getFirstSeen=function(){try{var e=JSON.parse(this.localStorage.get(this.storageKey)||"{}");return e.first_seen||(e.first_seen=(Date.now()/1e3).toString(),this.localStorage.put(this.storageKey,JSON.stringify(e))),e.first_seen}catch{return}},t.prototype.getUrlParam=function(){var e,n,s,i,a;if(!this.globalScope)return{};var o={};try{for(var l=__values$1(new URL((i=(s=this.globalScope)===null||s===void 0?void 0:s.location)===null||i===void 0?void 0:i.href).searchParams),u=l.next();!u.done;u=l.next()){var c=__read$2(u.value,2),d=c[0],p=c[1];o[d]=__spreadArray$1(__spreadArray$1([],__read$2((a=o[d])!==null&&a!==void 0?a:[]),!1),__read$2(p.split(",")),!1)}}catch(m){e={error:m}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return Object.entries(o).reduce(function(m,g){var E=__read$2(g,2),x=E[0],b=E[1];return m[x]=b.length==1?b[0]:b,m},{})},t}(),instances={},getInstanceName=function(t){return t?.instanceName||Defaults.instanceName},initialize$1=function(t,e){var n=getInstanceName(e),s=e?.internalInstanceNameSuffix,i=s?"".concat(n,".").concat(t,".").concat(s):"".concat(n,".").concat(t);return instances[i]||(e=__assign$2(__assign$2({},e),{userProvider:new DefaultUserProvider(e?.userProvider,t)}),instances[i]=new ExperimentClient(t,e)),instances[i]},initializeWithAmplitudeAnalytics=function(t,e){var n=getInstanceName(e),s=initialize$1(t,e);return s.addPlugin(new AmplitudeIntegrationPlugin(t,AnalyticsConnector.getInstance(n),1e4)),s},Experiment={initialize:initialize$1,initializeWithAmplitudeAnalytics},isEmpty_1,hasRequiredIsEmpty;function requireIsEmpty(){if(hasRequiredIsEmpty)return isEmpty_1;hasRequiredIsEmpty=1;var t=require_baseKeys(),e=require_getTag(),n=requireIsArguments(),s=requireIsArray(),i=requireIsArrayLike(),a=requireIsBuffer(),o=require_isPrototype(),l=requireIsTypedArray(),u="[object Map]",c="[object Set]",d=Object.prototype,p=d.hasOwnProperty;function m(g){if(g==null)return!0;if(i(g)&&(s(g)||typeof g=="string"||typeof g.splice=="function"||a(g)||l(g)||n(g)))return!g.length;var E=e(g);if(E==u||E==c)return!g.size;if(o(g))return!t(g).length;for(var x in g)if(p.call(g,x))return!1;return!0}return isEmpty_1=m,isEmpty_1}var isEmptyExports=requireIsEmpty();const isEmpty=getDefaultExportFromCjs(isEmptyExports);function isFunction$3(t){return typeof t=="function"}function createErrorClass(t){var e=function(s){Error.call(s),s.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var UnsubscriptionError=createErrorClass(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(s,i){return i+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function arrRemove(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Subscription$1=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,s,i,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=__values$4(o),u=l.next();!u.done;u=l.next()){var c=u.value;c.remove(this)}}catch(x){e={error:x}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(isFunction$3(d))try{d()}catch(x){a=x instanceof UnsubscriptionError?x.errors:[x]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var m=__values$4(p),g=m.next();!g.done;g=m.next()){var E=g.value;try{execFinalizer(E)}catch(x){a=a??[],x instanceof UnsubscriptionError?a=__spreadArray$3(__spreadArray$3([],__read$5(a)),__read$5(x.errors)):a.push(x)}}}catch(x){s={error:x}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}if(a)throw new UnsubscriptionError(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)execFinalizer(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&arrRemove(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&arrRemove(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),EMPTY_SUBSCRIPTION=Subscription$1.EMPTY;function isSubscription(t){return t instanceof Subscription$1||t&&"closed"in t&&isFunction$3(t.remove)&&isFunction$3(t.add)&&isFunction$3(t.unsubscribe)}function execFinalizer(t){isFunction$3(t)?t():t.unsubscribe()}var config={Promise:void 0},timeoutProvider={setTimeout:function(t,e){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return setTimeout.apply(void 0,__spreadArray$3([t,e],__read$5(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function reportUnhandledError(t){timeoutProvider.setTimeout(function(){throw t})}function noop$5(){}function errorContext(t){t()}var Subscriber=function(t){__extends$2(e,t);function e(n){var s=t.call(this)||this;return s.isStopped=!1,n?(s.destination=n,isSubscription(n)&&n.add(s)):s.destination=EMPTY_OBSERVER,s}return e.create=function(n,s,i){return new SafeSubscriber(n,s,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Subscription$1),ConsumerObserver=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(s){handleUnhandledError(s)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(s){handleUnhandledError(s)}else handleUnhandledError(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){handleUnhandledError(n)}},t}(),SafeSubscriber=function(t){__extends$2(e,t);function e(n,s,i){var a=t.call(this)||this,o;return isFunction$3(n)||!n?o={next:n??void 0,error:s??void 0,complete:i??void 0}:o=n,a.destination=new ConsumerObserver(o),a}return e}(Subscriber);function handleUnhandledError(t){reportUnhandledError(t)}function defaultErrorHandler$1(t){throw t}var EMPTY_OBSERVER={closed:!0,next:noop$5,error:defaultErrorHandler$1,complete:noop$5},observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(t){return t}function pipeFromArray(t){return t.length===0?identity$1:t.length===1?t[0]:function(n){return t.reduce(function(s,i){return i(s)},n)}}var Observable=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,s){var i=this,a=isSubscriber(e)?e:new SafeSubscriber(e,n,s);return errorContext(function(){var o=i,l=o.operator,u=o.source;a.add(l?l.call(a,u):u?i._subscribe(a):i._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var s=this;return n=getPromiseCtor(n),new n(function(i,a){var o=new SafeSubscriber({next:function(l){try{e(l)}catch(u){a(u),o.unsubscribe()}},error:a,complete:i});s.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[observable]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return pipeFromArray(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=getPromiseCtor(e),new e(function(s,i){var a;n.subscribe(function(o){return a=o},function(o){return i(o)},function(){return s(a)})})},t.create=function(e){return new t(e)},t}();function getPromiseCtor(t){var e;return(e=t??config.Promise)!==null&&e!==void 0?e:Promise}function isObserver(t){return t&&isFunction$3(t.next)&&isFunction$3(t.error)&&isFunction$3(t.complete)}function isSubscriber(t){return t&&t instanceof Subscriber||isObserver(t)&&isSubscription(t)}function hasLift(t){return isFunction$3(t?.lift)}function operate(t){return function(e){if(hasLift(e))return e.lift(function(n){try{return t(n,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function createOperatorSubscriber(t,e,n,s,i){return new OperatorSubscriber(t,e,n,s,i)}var OperatorSubscriber=function(t){__extends$2(e,t);function e(n,s,i,a,o,l){var u=t.call(this,n)||this;return u.onFinalize=o,u.shouldUnsubscribe=l,u._next=s?function(c){try{s(c)}catch(d){n.error(d)}}:t.prototype._next,u._error=a?function(c){try{a(c)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,u}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;t.prototype.unsubscribe.call(this),!s&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Subscriber),ObjectUnsubscribedError=createErrorClass(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(t){__extends$2(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var s=new AnonymousSubject(this,this);return s.operator=n,s},e.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},e.prototype.next=function(n){var s=this;errorContext(function(){var i,a;if(s._throwIfClosed(),!s.isStopped){s.currentObservers||(s.currentObservers=Array.from(s.observers));try{for(var o=__values$4(s.currentObservers),l=o.next();!l.done;l=o.next()){var u=l.value;u.next(n)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var s=this;errorContext(function(){if(s._throwIfClosed(),!s.isStopped){s.hasError=s.isStopped=!0,s.thrownError=n;for(var i=s.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var s=n.observers;s.length;)s.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var s=this,i=this,a=i.hasError,o=i.isStopped,l=i.observers;return a||o?EMPTY_SUBSCRIPTION:(this.currentObservers=null,l.push(n),new Subscription$1(function(){s.currentObservers=null,arrRemove(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var s=this,i=s.hasError,a=s.thrownError,o=s.isStopped;i?n.error(a):o&&n.complete()},e.prototype.asObservable=function(){var n=new Observable;return n.source=this,n},e.create=function(n,s){return new AnonymousSubject(n,s)},e}(Observable),AnonymousSubject=function(t){__extends$2(e,t);function e(n,s){var i=t.call(this)||this;return i.destination=n,i.source=s,i}return e.prototype.next=function(n){var s,i;(i=(s=this.destination)===null||s===void 0?void 0:s.next)===null||i===void 0||i.call(s,n)},e.prototype.error=function(n){var s,i;(i=(s=this.destination)===null||s===void 0?void 0:s.error)===null||i===void 0||i.call(s,n)},e.prototype.complete=function(){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||s===void 0||s.call(n)},e.prototype._subscribe=function(n){var s,i;return(i=(s=this.source)===null||s===void 0?void 0:s.subscribe(n))!==null&&i!==void 0?i:EMPTY_SUBSCRIPTION},e}(Subject),dateTimestampProvider={now:function(){return Date.now()}},Action$1=function(t){__extends$2(e,t);function e(n,s){return t.call(this)||this}return e.prototype.schedule=function(n,s){return this},e}(Subscription$1),intervalProvider={setInterval:function(t,e){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return setInterval.apply(void 0,__spreadArray$3([t,e],__read$5(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},AsyncAction=function(t){__extends$2(e,t);function e(n,s){var i=t.call(this,n,s)||this;return i.scheduler=n,i.work=s,i.pending=!1,i}return e.prototype.schedule=function(n,s){var i;if(s===void 0&&(s=0),this.closed)return this;this.state=n;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,s)),this.pending=!0,this.delay=s,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,s),this},e.prototype.requestAsyncId=function(n,s,i){return i===void 0&&(i=0),intervalProvider.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,s,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return s;s!=null&&intervalProvider.clearInterval(s)},e.prototype.execute=function(n,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,s);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,s){var i=!1,a;try{this.work(n)}catch(o){i=!0,a=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,s=n.id,i=n.scheduler,a=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(a,this),s!=null&&(this.id=this.recycleAsyncId(i,s,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Action$1),Scheduler$1=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,s){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(s,n)},t.now=dateTimestampProvider.now,t}(),AsyncScheduler=function(t){__extends$2(e,t);function e(n,s){s===void 0&&(s=Scheduler$1.now);var i=t.call(this,n,s)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var s=this.actions;if(this._active){s.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=s.shift());if(this._active=!1,i){for(;n=s.shift();)n.unsubscribe();throw i}},e}(Scheduler$1),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler,QueueAction=function(t){__extends$2(e,t);function e(n,s){var i=t.call(this,n,s)||this;return i.scheduler=n,i.work=s,i}return e.prototype.schedule=function(n,s){return s===void 0&&(s=0),s>0?t.prototype.schedule.call(this,n,s):(this.delay=s,this.state=n,this.scheduler.flush(this),this)},e.prototype.execute=function(n,s){return s>0||this.closed?t.prototype.execute.call(this,n,s):this._execute(n,s)},e.prototype.requestAsyncId=function(n,s,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?t.prototype.requestAsyncId.call(this,n,s,i):(n.flush(this),0)},e}(AsyncAction),QueueScheduler=function(t){__extends$2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),EMPTY=new Observable(function(t){return t.complete()});function empty(t){return t?emptyScheduled(t):EMPTY}function emptyScheduled(t){return new Observable(function(e){return t.schedule(function(){return e.complete()})})}function isScheduler(t){return t&&isFunction$3(t.schedule)}function last(t){return t[t.length-1]}function popScheduler(t){return isScheduler(last(t))?t.pop():void 0}function popNumber(t,e){return typeof last(t)=="number"?t.pop():e}var isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function isPromise$2(t){return isFunction$3(t?.then)}function isInteropObservable(t){return isFunction$3(t[observable])}function isAsyncIterable(t){return Symbol.asyncIterator&&isFunction$3(t?.[Symbol.asyncIterator])}function createInvalidObservableTypeError(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator();function isIterable(t){return isFunction$3(t?.[iterator])}function readableStreamLikeToAsyncGenerator(t){return __asyncGenerator(this,arguments,function(){var n,s,i,a;return __generator$2(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,__await(n.read())];case 3:return s=o.sent(),i=s.value,a=s.done,a?[4,__await(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,__await(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(t){return isFunction$3(t?.getReader)}function innerFrom(t){if(t instanceof Observable)return t;if(t!=null){if(isInteropObservable(t))return fromInteropObservable(t);if(isArrayLike(t))return fromArrayLike(t);if(isPromise$2(t))return fromPromise(t);if(isAsyncIterable(t))return fromAsyncIterable(t);if(isIterable(t))return fromIterable(t);if(isReadableStreamLike(t))return fromReadableStreamLike(t)}throw createInvalidObservableTypeError(t)}function fromInteropObservable(t){return new Observable(function(e){var n=t[observable]();if(isFunction$3(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(t){return new Observable(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function fromPromise(t){return new Observable(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,reportUnhandledError)})}function fromIterable(t){return new Observable(function(e){var n,s;try{for(var i=__values$4(t),a=i.next();!a.done;a=i.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}e.complete()})}function fromAsyncIterable(t){return new Observable(function(e){process$1(t,e).catch(function(n){return e.error(n)})})}function fromReadableStreamLike(t){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(t))}function process$1(t,e){var n,s,i,a;return __awaiter$2(this,void 0,void 0,function(){var o,l;return __generator$2(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=__asyncValues(t),u.label=1;case 1:return[4,n.next()];case 2:if(s=u.sent(),!!s.done)return[3,4];if(o=s.value,e.next(o),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=u.sent(),i={error:l},[3,11];case 6:return u.trys.push([6,,9,10]),s&&!s.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function executeSchedule(t,e,n,s,i){s===void 0&&(s=0),i===void 0&&(i=!1);var a=e.schedule(function(){n(),i?t.add(this.schedule(null,s)):this.unsubscribe()},s);if(t.add(a),!i)return a}function observeOn(t,e){return e===void 0&&(e=0),operate(function(n,s){n.subscribe(createOperatorSubscriber(s,function(i){return executeSchedule(s,t,function(){return s.next(i)},e)},function(){return executeSchedule(s,t,function(){return s.complete()},e)},function(i){return executeSchedule(s,t,function(){return s.error(i)},e)}))})}function subscribeOn(t,e){return e===void 0&&(e=0),operate(function(n,s){s.add(t.schedule(function(){return n.subscribe(s)},e))})}function scheduleObservable(t,e){return innerFrom(t).pipe(subscribeOn(e),observeOn(e))}function schedulePromise(t,e){return innerFrom(t).pipe(subscribeOn(e),observeOn(e))}function scheduleArray(t,e){return new Observable(function(n){var s=0;return e.schedule(function(){s===t.length?n.complete():(n.next(t[s++]),n.closed||this.schedule())})})}function scheduleIterable(t,e){return new Observable(function(n){var s;return executeSchedule(n,e,function(){s=t[iterator](),executeSchedule(n,e,function(){var i,a,o;try{i=s.next(),a=i.value,o=i.done}catch(l){n.error(l);return}o?n.complete():n.next(a)},0,!0)}),function(){return isFunction$3(s?.return)&&s.return()}})}function scheduleAsyncIterable(t,e){if(!t)throw new Error("Iterable cannot be null");return new Observable(function(n){executeSchedule(n,e,function(){var s=t[Symbol.asyncIterator]();executeSchedule(n,e,function(){s.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function scheduleReadableStreamLike(t,e){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(t),e)}function scheduled(t,e){if(t!=null){if(isInteropObservable(t))return scheduleObservable(t,e);if(isArrayLike(t))return scheduleArray(t,e);if(isPromise$2(t))return schedulePromise(t,e);if(isAsyncIterable(t))return scheduleAsyncIterable(t,e);if(isIterable(t))return scheduleIterable(t,e);if(isReadableStreamLike(t))return scheduleReadableStreamLike(t,e)}throw createInvalidObservableTypeError(t)}function from$2(t,e){return e?scheduled(t,e):innerFrom(t)}function of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=popScheduler(t);return from$2(t,n)}function isValidDate(t){return t instanceof Date&&!isNaN(t)}function map$1(t,e){return operate(function(n,s){var i=0;n.subscribe(createOperatorSubscriber(s,function(a){s.next(t.call(e,a,i++))}))})}var isArray$2=Array.isArray;function callOrApply(t,e){return isArray$2(e)?t.apply(void 0,__spreadArray$3([],__read$5(e))):t(e)}function mapOneOrManyArgs(t){return map$1(function(e){return callOrApply(t,e)})}function mergeInternals(t,e,n,s,i,a,o,l){var u=[],c=0,d=0,p=!1,m=function(){p&&!u.length&&!c&&e.complete()},g=function(x){return c<s?E(x):u.push(x)},E=function(x){c++;var b=!1;innerFrom(n(x,d++)).subscribe(createOperatorSubscriber(e,function(S){e.next(S)},function(){b=!0},void 0,function(){if(b)try{c--;for(var S=function(){var C=u.shift();o||E(C)};u.length&&c<s;)S();m()}catch(C){e.error(C)}}))};return t.subscribe(createOperatorSubscriber(e,g,function(){p=!0,m()})),function(){}}function mergeMap(t,e,n){return n===void 0&&(n=1/0),isFunction$3(e)?mergeMap(function(s,i){return map$1(function(a,o){return e(s,a,i,o)})(innerFrom(t(s,i)))},n):(typeof e=="number"&&(n=e),operate(function(s,i){return mergeInternals(s,i,t,n)}))}function mergeAll(t){return t===void 0&&(t=1/0),mergeMap(identity$1,t)}var nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(t,e,n,s){if(isFunction$3(n)&&(s=n,n=void 0),s)return fromEvent(t,e,n).pipe(mapOneOrManyArgs(s));var i=__read$5(isEventTarget(t)?eventTargetMethods.map(function(l){return function(u){return t[l](e,u,n)}}):isNodeStyleEventEmitter(t)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(t,e)):isJQueryStyleEventEmitter(t)?jqueryMethods.map(toCommonHandlerRegistry(t,e)):[],2),a=i[0],o=i[1];if(!a&&isArrayLike(t))return mergeMap(function(l){return fromEvent(l,e,n)})(innerFrom(t));if(!a)throw new TypeError("Invalid event target");return new Observable(function(l){var u=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return l.next(1<c.length?c:c[0])};return a(u),function(){return o(u)}})}function toCommonHandlerRegistry(t,e){return function(n){return function(s){return t[n](e,s)}}}function isNodeStyleEventEmitter(t){return isFunction$3(t.addListener)&&isFunction$3(t.removeListener)}function isJQueryStyleEventEmitter(t){return isFunction$3(t.on)&&isFunction$3(t.off)}function isEventTarget(t){return isFunction$3(t.addEventListener)&&isFunction$3(t.removeEventListener)}function timer(t,e,n){n===void 0&&(n=async);var s=-1;return isScheduler(e)?n=e:s=e,new Observable(function(i){var a=isValidDate(t)?+t-n.now():t;a<0&&(a=0);var o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=s?this.schedule(void 0,s):i.complete())},a)})}function merge$3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=popScheduler(t),s=popNumber(t,1/0),i=t;return i.length?i.length===1?innerFrom(i[0]):mergeAll(s)(from$2(i,n)):EMPTY}function filter$1(t,e){return operate(function(n,s){var i=0;n.subscribe(createOperatorSubscriber(s,function(a){return t.call(e,a,i++)&&s.next(a)}))})}function catchError(t){return operate(function(e,n){var s=null,i=!1,a;s=e.subscribe(createOperatorSubscriber(n,void 0,void 0,function(o){a=innerFrom(t(o,catchError(t)(e))),s?(s.unsubscribe(),s=null,a.subscribe(n)):i=!0})),i&&(s.unsubscribe(),s=null,a.subscribe(n))})}function concatMap(t,e){return isFunction$3(e)?mergeMap(t,e,1):mergeMap(t,1)}function debounceTime(t,e){return e===void 0&&(e=asyncScheduler),operate(function(n,s){var i=null,a=null,o=null,l=function(){if(i){i.unsubscribe(),i=null;var c=a;a=null,s.next(c)}};function u(){var c=o+t,d=e.now();if(d<c){i=this.schedule(void 0,c-d),s.add(i);return}l()}n.subscribe(createOperatorSubscriber(s,function(c){a=c,o=e.now(),i||(i=e.schedule(u,t),s.add(i))},function(){l(),s.complete()},void 0,function(){a=i=null}))})}function mapTo(t){return map$1(function(){return t})}function exhaustMap(t,e){return operate(function(n,s){var i=0,a=null,o=!1;n.subscribe(createOperatorSubscriber(s,function(l){a||(a=createOperatorSubscriber(s,void 0,function(){a=null,o&&s.complete()}),innerFrom(t(l,i++)).subscribe(a))},function(){o=!0,!a&&s.complete()}))})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},extendStatics(t,e)};function __extends(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var StateObservable=function(t){__extends(e,t);function e(n,s){var i=t.call(this,function(a){var o=i.__notifier.subscribe(a);return o&&!o.closed&&a.next(i.value),o})||this;return i.__notifier=new Subject,i.value=s,n.subscribe(function(a){a!==i.value&&(i.value=a,i.__notifier.next(a))}),i}return e}(Observable);function createEpicMiddleware(t){t===void 0&&(t={});var e=queueScheduler.constructor,n=new e(queueScheduler.schedulerActionCtor),s=new Subject,i,a=function(o){i=o;var l=new Subject,u=new Subject,c=l.asObservable().pipe(observeOn(n)),d=new StateObservable(u.pipe(observeOn(n)),i.getState()),p=s.pipe(map$1(function(m){var g=m(c,d,t.dependencies);if(!g)throw new TypeError('Your root Epic "'+(m.name||"<anonymous>")+`" does not return a stream. Double check you're not missing a return statement!`);return g}),mergeMap(function(m){return from$2(m).pipe(subscribeOn(n),observeOn(n))}));return p.subscribe(i.dispatch),function(m){return function(g){var E=m(g);return u.next(i.getState()),l.next(g),E}}};return a.run=function(o){s.next(o)},a}function combineEpics(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return merge$3.apply(void 0,t.map(function(a){var o=a.apply(void 0,s);if(!o)throw new TypeError('combineEpics: one of the provided Epics "'+(a.name||"<anonymous>")+`" does not return a stream. Double check you're not missing a return statement!`);return o}))};try{Object.defineProperty(n,"name",{value:"combineEpics("+t.map(function(s){return s.name||"<anonymous>"}).join(", ")+")"})}catch{}return n}var keyHasType=function(t,e){return t===e||typeof e=="function"&&t===e.toString()};function ofType(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;return filter$1(n===1?function(s){return keyHasType(s.type,t[0])}:function(s){for(var i=0;i<n;i++)if(keyHasType(s.type,t[i]))return!0;return!1})}const SCREEN_VIEW="ANALYTICS: Screen View ",BUTTON_PRESSED="ANALYTICS: Button Pressed ",RESOURCE_LINK_CLICKED="ANALYTICS: Resource Link Clicked ",IDENTIFY_USER="ANALYTICS: Identify User ",ERROR="ANALYTICS: Report Error ",GENERIC_EVENT="ANALYTICS: Generic Event Handler ",FEEDBACK_SUBMITTED="ANALYTICS: Feedback Submitted ",REVIEW_COMPLETED="ANALYTICS: Review Completed ",NPS_REVIEW_COMPLETED="ANALYTICS: NPS Review Completed ",screenView=t=>({type:SCREEN_VIEW,payload:{screenName:t}}),resourceClicked=t=>({type:RESOURCE_LINK_CLICKED,payload:{resource:t}}),genericAnalyticsAndIterableEvent=(t,e)=>({type:GENERIC_EVENT,payload:{event:t,props:e}}),reviewCompleted=t=>({type:REVIEW_COMPLETED,payload:{event:"Star Review Submitted",props:t}}),npsReviewCompleted=t=>({type:NPS_REVIEW_COMPLETED,payload:{event:"Nps Submitted",props:t}}),SET_DASHBOARD_CARDS="DASHBOARD: Set dash cards ",GET_DASHBOARD_CARDS_START="DASHBOARD: Get dash cards ",GET_DASHBOARD_CARDS_FAILURE="DASHBOARD: Get dash cards failure ",GET_DASHBOARD_CARDS_SUCCESS="DASHBOARD: Get dash cards success ",TOGGLE_LICENSE_CHECKLIST_STEP="DASHBOARD: Toggle license checklist step ",SET_CHECKLIST_STEPS="DASHBOARD: Set license checklist steps",SET_CURRENT_LEVEL_IDX="DASHBOARD: Set set current level index",SET_SIDENAV_OPEN="DASHBOARD: Set sidenav open ",SET_SIDENAV_CLOSE="DASHBOARD: Set sidenav close ",GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_START="DASHBOARD: Get card data from a level and set current level index ",GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_FAILURE="DASHBOARD: Get card data from a level and set current level index failure ",GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_SUCCESS="DASHBOARD: Get card data from a level and set current level index success ",CLEAR_DASH="DASHBOARD: Clear dashboard ",TEST_SET="TEST: Set Test Data ",CLEAR_TEST="TEST: Clear Test Data ",FINISH_TEST="TEST: Finish Review Test ",CONTINUE_FROM_REVIEW="TEST: Continue From Review ",CONTINUE_FAILED_TEST="TEST: Continue Failed Test",UPSELL_SHOWN="UPSELL: Upsell shown ",CLICK_BUY_UPSELL="UPSELL: Clicked buy upsell ",FIND_PURCHASE_STATUS_START="UPSELL: Start find purchase status ",VOICEOVER_PURCHASE_STATUS_CHECK_SUCCESS="UPSELL: Voiceover Purchase Status Check Success ",SET_AUDIO_UPSELL="UPSELL: Set audio upsell ",onShowUpsell=(t,e,n)=>({type:UPSELL_SHOWN,payload:{variantId:t,product:e,location:n}}),clickBuyUpsell=(t,e,n,s)=>({type:CLICK_BUY_UPSELL,payload:{productIndex:t,redirectUrl:e,urlParams:n,location:s}}),SUBMIT_DRIVER_RECORD_START="User: Submit Driver Record Start ",SUBMIT_DRIVER_RECORD_SUCCESS="User: Submit Driver Record Success ",SUBMIT_DRIVER_RECORD_FAILURE="User: Submit Driver Record Failure ",VERIFY_ADDRESS_START="User: Verify Address Start ",VERIFY_ADDRESS_SUCCESS="User: Verify Address Success ",VERIFY_ADDRESS_FAILURE="User: Verify Address Failure ",SEND_USER_UPDATE_REQUEST_START="User: Send User Update Request Start ",SEND_USER_UPDATE_REQUEST_SUCCESS="User: Send User Update Request Success ",SEND_USER_UPDATE_REQUEST_FAILURE="User: Send User Update Request Failure ",USER_LOGIN_SUCCESS="User: User Login Success ",SEND_RESET_PASSWORD_START="USER: Reset Password Request Start ",SEND_RESET_PASSWORD_SUCCESS="USER: Reset Password Request Start ",submitDriverRecordStart=t=>({type:SUBMIT_DRIVER_RECORD_START,payload:{user:t}}),analyticsSuccess={type:"ANALYTICS: Send Analytics Success "},analyticsFailure={type:"ANALYTICS: Send Analytics Failure "};function getDeviceId(){let t=localStorage.getItem("segment.deviceId");return t||(t=crypto.randomUUID(),localStorage.setItem("segment.deviceId",t)),t}const track$1=(t,e)=>{const n=get$5(window,"aceRootScope.courseCurrent",null),s=Object.assign(e,{platform:"WEB",brand:get$5(window,"aceRootScope.domainConf.brandId"),app_type:n?n.appType:void 0,course_id:n?n._id:void 0,course_segment:n?n.type:void 0,course_state:n?n.state:void 0,course_key:n?n.key:void 0,user_id:get$5(window,"aceRootScope.userCurrent._id"),email:get$5(window,"aceRootScope.userCurrent.username"),user_type:get$5(window,"aceRootScope.progressCurrent.accountType",get$5(window,"aceRootScope.userCurrent.accountType","student")),device_id:getDeviceId()});if(window.analytics)try{return Promise.resolve(window.analytics.track(t,s))}catch(i){console.error(i)}else document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("segment-analytics-script");i?i.addEventListener("load",()=>{track$1(t,e)}):(console.error("Can't find segment analytics script."),Observable.empty())})},identify=(t,e={})=>{e.brand=get$5(t,"brandId",""),e.created_date=get$5(t,"createdAt",""),e.device_id=getDeviceId(),e.email=get$5(t,"username",""),e.first_name=get$5(t,"firstName",""),e.user_id=get$5(t,"_id",""),e.platform="WEB";const n=window?.aceRootScope?.courseCurrent,s=n?._id??t?.defCourseId,i=n?.appType;if(e.user_type=get$5(window,"aceRootScope.progressCurrent.accountType",get$5(window,"aceRootScope.userCurrent.accountType","student")),i&&(e.app_type=i),s&&(e.course_id=s),window.analytics)try{return Promise.resolve(window.analytics.identify(t._id,e))}catch(a){console.error(a)}else document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("segment-analytics-script");a?a.addEventListener("load",()=>{identify(t,e)}):(console.error("Can't find segment analytics script."),Observable.empty())})},screenViewEpic=t=>t.pipe(ofType(SCREEN_VIEW),mergeMap(e=>track$1("Screen Viewed",{to:e.payload.screenName})?[analyticsSuccess]:[analyticsFailure])),buttonPressedEpic=t=>t.pipe(ofType(BUTTON_PRESSED),mergeMap(e=>{const n=[],s=get$5(window,"aceRootScope.progressCurrent.currentLevel"),i=get$5(e,"payload.product",{}),a={to:get$5(e,"payload.to"),from:get$5(e,"payload.from"),context_id:get$5(e,"payload.contextId")};e.payload.type&&(a.type=e.payload.type);let o={};return isEmpty(i)||(o={type:e.payload.type,location:e.payload.action,product_id:i._id,product_name:i.title,price:i.price,level_idx:s,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${s}._id`),cta_text:i.ctaUnpurchased}),track$1("Button Pressed",Object.assign(a,o))?n.push(analyticsSuccess):n.push(analyticsFailure),n})),upsellShownEpic$1=t=>t.pipe(ofType(UPSELL_SHOWN,CLICK_BUY_UPSELL),mergeMap(e=>{const n=new Event("upsell-shown");window.dispatchEvent(n);const s=get$5(e,"payload.product",null);if(!s)throw"No product for sending Upsell Shown analytics event.";return track$1("Upsell Shown",{product_id:s._id,product_name:s.title,price:s.price,level_idx:get$5(window,"aceRootScope.progressCurrent.currentLevel",""),location:get$5(e,"payload.location","")})?[analyticsSuccess]:[analyticsFailure]}),catchError(e=>(console.error(e),[analyticsFailure]))),resourceClickedEpic=t=>t.pipe(ofType(RESOURCE_LINK_CLICKED),mergeMap(e=>{const n=get$5(e,"payload.resource",null);return n?track$1("Resource Link Clicked",{analytics_key:n.key,description:n.description,link:n.link,title:n.title})?[analyticsSuccess]:[analyticsFailure]:[]})),examCompletedEpic=(t,e)=>t.pipe(ofType(FINISH_TEST),mergeMap(()=>{const n=get$5(e,"value.test",null);if(n)return track$1("Exam Completed",{type:n.modeType,test_id:n.testId,grade_percent:get$5(n,"gradePercent",0)*100,timed_out:get$5(n,"is.timeout",!1),is_passed:get$5(n,"is.passed",!1),is_expired:get$5(n,"is.expired",!1)})?[analyticsSuccess]:[analyticsFailure]})),userLoginSuccessEpic=t=>t.pipe(ofType(USER_LOGIN_SUCCESS,IDENTIFY_USER),mergeMap(e=>{const n=get$5(e,"payload.user",null);if(n)return identify(n)?[analyticsSuccess]:[analyticsFailure]})),errorEpic=t=>t.pipe(ofType(ERROR),mergeMap(e=>{get$5(e,"payload.error")&&track$1("Error",{...get$5(e,"payload.error",{}),userAgent:get$5(navigator,"userAgent"),progressId:get$5(window,"aceRootScope.progressCurrent"),userId:get$5(window,"aceRootScope.userCurrent._id"),userName:get$5(window,"aceRootScope.userCurrent.username"),url:window.location.href,appVersion:get$5(window,"aceRootScope.version"),vertical:get$5(window,"aceRootScope.verticalType")})})),toggleLicenseChecklistItemEpic=t=>t.pipe(ofType(TOGGLE_LICENSE_CHECKLIST_STEP),mergeMap(e=>{const n=[];return e.payload.isComplete&&(track$1("Checklist Step Completed",{step_name:e.payload.stepName,step_number:e.payload.stepNumber})?n.push(analyticsSuccess):n.push(analyticsFailure)),n})),genericEventEpic$1=t=>t.pipe(ofType(GENERIC_EVENT,FEEDBACK_SUBMITTED,REVIEW_COMPLETED,NPS_REVIEW_COMPLETED),mergeMap(e=>{const n=[];return track$1(e.payload.event,e.payload.props)?n.push(analyticsSuccess):n.push(analyticsFailure),n})),analyticsEpic=combineEpics(buttonPressedEpic,errorEpic,examCompletedEpic,genericEventEpic$1,resourceClickedEpic,screenViewEpic,toggleLicenseChecklistItemEpic,upsellShownEpic$1,userLoginSuccessEpic),ConfigFeatureflag={"api-cookies-show":!1,"ltv-new-intermediary-page-show":!1,"renewal-expiration-show":!1,"rsa-messaging-test-red-text-cta-update":!1,"rewards-web-nav-show":!1};let experiment,hasFetched=!1;const amplitudeLoadedEvent=new CustomEvent("AmplitudeLoaded",{detail:{loaded:!0}});function getUser(t){return{user_id:t?._id,device_id:getDeviceId(),...t?{user_properties:{brand_id:t.brandId??"","Brand ID":t.brandId??"",course_id:t.defCourseId??"","Course ID":t.defCourseId??"",email:t.username??"",Email:t.username??"",firstName:t.firstName??"",lastName:t.lastName??""}}:void 0}}const ExperimentLib={getValue(t){const e=String(ConfigFeatureflag[t]);return this.variant(t,e).value??e},getFlag(t){const e=ConfigFeatureflag[t]?"treatment":"control";return!["control","off","",void 0,null,!1,0,"0"].includes(this.variant(t,e).value)},initialize(t,e,n){try{experiment=Experiment.initialize(e,{serverUrl:"https://sgprox.xgritapi.com/amplexp",flagsServerUrl:"https://sgprox.xgritapi.com/amplflags",exposureTrackingProvider:{track:s=>{t.track("$exposure",s)}}}),experiment.start(getUser(n)).then(()=>{n?._id&&(hasFetched=!0,window.dispatchEvent(amplitudeLoadedEvent))}).catch(s=>{console.error("AMPLITUDE EXPERIMENT",s)})}catch(s){const{message:i}=s;console.error("AMPLITUDE INIT",i)}},async fetch(t){return experiment?(await experiment.fetch(getUser(t)),hasFetched=!0,window.dispatchEvent(amplitudeLoadedEvent),!0):(console.error("AMPLITUDE FETCH NOT STARTED",t._id),!1)},isReady(){return hasFetched},variant(t,e){return experiment?experiment.variant(t,e):(console.error("AMPLITUDE NOT INITIALIZED",t),{value:e})},clear(){return experiment?(experiment.clear(),!0):!1}};function formatProdErrorMessage$1(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes$1={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes$1;function isPlainObject$1(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function createStore(t,e,n){if(typeof t!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(formatProdErrorMessage$1(1));return n(createStore)(t,e)}let s=t,i=e,a=new Map,o=a,l=0,u=!1;function c(){o===a&&(o=new Map,a.forEach((b,S)=>{o.set(S,b)}))}function d(){if(u)throw new Error(formatProdErrorMessage$1(3));return i}function p(b){if(typeof b!="function")throw new Error(formatProdErrorMessage$1(4));if(u)throw new Error(formatProdErrorMessage$1(5));let S=!0;c();const C=l++;return o.set(C,b),function(){if(S){if(u)throw new Error(formatProdErrorMessage$1(6));S=!1,c(),o.delete(C),a=null}}}function m(b){if(!isPlainObject$1(b))throw new Error(formatProdErrorMessage$1(7));if(typeof b.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof b.type!="string")throw new Error(formatProdErrorMessage$1(17));if(u)throw new Error(formatProdErrorMessage$1(9));try{u=!0,i=s(i,b)}finally{u=!1}return(a=o).forEach(C=>{C()}),b}function g(b){if(typeof b!="function")throw new Error(formatProdErrorMessage$1(10));s=b,m({type:actionTypes_default.REPLACE})}function E(){const b=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(formatProdErrorMessage$1(11));function C(){const I=S;I.next&&I.next(d())}return C(),{unsubscribe:b(C)}},[symbol_observable_default](){return this}}}return m({type:actionTypes_default.INIT}),{dispatch:m,subscribe:p,getState:d,replaceReducer:g,[symbol_observable_default]:E}}function assertReducerShape(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof n(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(n[o]=t[o])}const s=Object.keys(n);let i;try{assertReducerShape(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let u=!1;const c={};for(let d=0;d<s.length;d++){const p=s[d],m=n[p],g=o[p],E=m(g,l);if(typeof E>"u")throw l&&l.type,new Error(formatProdErrorMessage$1(14));c[p]=E,u=u||E!==g}return u=u||s.length!==Object.keys(o).length,u?c:o}}function compose(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...s)=>e(n(...s)))}function applyMiddleware(...t){return e=>(n,s)=>{const i=e(n,s);let a=()=>{throw new Error(formatProdErrorMessage$1(15))};const o={getState:i.getState,dispatch:(u,...c)=>a(u,...c)},l=t.map(u=>u(o));return a=compose(...l)(i.dispatch),{...i,dispatch:a}}}function isAction(t){return isPlainObject$1(t)&&"type"in t&&typeof t.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(t){return!!t&&!!t[DRAFT_STATE]}function isDraftable(t){return t?isPlainObject(t)||Array.isArray(t)||!!t[DRAFTABLE]||!!t.constructor?.[DRAFTABLE]||isMap(t)||isSet(t):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(t){if(!t||typeof t!="object")return!1;const e=getPrototypeOf(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===objectCtorString}function each$1(t,e){getArchtype(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function getArchtype(t){const e=t[DRAFT_STATE];return e?e.type_:Array.isArray(t)?1:isMap(t)?2:isSet(t)?3:0}function has$1(t,e){return getArchtype(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function set$3(t,e,n){const s=getArchtype(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function is(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function isMap(t){return t instanceof Map}function isSet(t){return t instanceof Set}function latest(t){return t.copy_||t.base_}function shallowCopy(t,e){if(isMap(t))return new Map(t);if(isSet(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=isPlainObject(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[DRAFT_STATE];let i=Reflect.ownKeys(s);for(let a=0;a<i.length;a++){const o=i[a],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(getPrototypeOf(t),s)}else{const s=getPrototypeOf(t);if(s!==null&&n)return{...t};const i=Object.create(s);return Object.assign(i,t)}}function freeze(t,e=!1){return isFrozen(t)||isDraft(t)||!isDraftable(t)||(getArchtype(t)>1&&(t.set=t.add=t.clear=t.delete=dontMutateFrozenCollections),Object.freeze(t),e&&Object.entries(t).forEach(([n,s])=>freeze(s,!0))),t}function dontMutateFrozenCollections(){die(2)}function isFrozen(t){return Object.isFrozen(t)}var plugins={};function getPlugin$1(t){const e=plugins[t];return e||die(0,t),e}var currentScope;function getCurrentScope(){return currentScope}function createScope(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(t,e){e&&(getPlugin$1("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function revokeScope(t){leaveScope(t),t.drafts_.forEach(revokeDraft),t.drafts_=null}function leaveScope(t){t===currentScope&&(currentScope=t.parent_)}function enterScope(t){return currentScope=createScope(currentScope,t)}function revokeDraft(t){const e=t[DRAFT_STATE];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function processResult(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[DRAFT_STATE].modified_&&(revokeScope(e),die(4)),isDraftable(t)&&(t=finalize(e,t),e.parent_||maybeFreeze(e,t)),e.patches_&&getPlugin$1("Patches").generateReplacementPatches_(n[DRAFT_STATE].base_,t,e.patches_,e.inversePatches_)):t=finalize(e,n,[]),revokeScope(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==NOTHING?t:void 0}function finalize(t,e,n){if(isFrozen(e))return e;const s=e[DRAFT_STATE];if(!s)return each$1(e,(i,a)=>finalizeProperty(t,s,e,i,a,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return maybeFreeze(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let a=i,o=!1;s.type_===3&&(a=new Set(i),i.clear(),o=!0),each$1(a,(l,u)=>finalizeProperty(t,s,i,l,u,n,o)),maybeFreeze(t,i,!1),n&&t.patches_&&getPlugin$1("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function finalizeProperty(t,e,n,s,i,a,o){if(isDraft(i)){const l=a&&e&&e.type_!==3&&!has$1(e.assigned_,s)?a.concat(s):void 0,u=finalize(t,i,l);if(set$3(n,s,u),isDraft(u))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(isDraftable(i)&&!isFrozen(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;finalize(t,i),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&maybeFreeze(t,i)}}function maybeFreeze(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&freeze(e,n)}function createProxyProxy(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=s,a=objectTraps;n&&(i=[s],a=arrayTraps);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return s.draft_=l,s.revoke_=o,l}var objectTraps={get(t,e){if(e===DRAFT_STATE)return t;const n=latest(t);if(!has$1(n,e))return readPropFromProto(t,n,e);const s=n[e];return t.finalized_||!isDraftable(s)?s:s===peek(t.base_,e)?(prepareCopy(t),t.copy_[e]=createProxy(s,t)):s},has(t,e){return e in latest(t)},ownKeys(t){return Reflect.ownKeys(latest(t))},set(t,e,n){const s=getDescriptorFromProto(latest(t),e);if(s?.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const i=peek(latest(t),e),a=i?.[DRAFT_STATE];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(is(n,i)&&(n!==void 0||has$1(t.base_,e)))return!0;prepareCopy(t),markChanged(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return peek(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,prepareCopy(t),markChanged(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=latest(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){die(11)},getPrototypeOf(t){return getPrototypeOf(t.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each$1(objectTraps,(t,e)=>{arrayTraps[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});arrayTraps.deleteProperty=function(t,e){return arrayTraps.set.call(this,t,e,void 0)};arrayTraps.set=function(t,e,n){return objectTraps.set.call(this,t[0],e,n,t[0])};function peek(t,e){const n=t[DRAFT_STATE];return(n?latest(n):t)[e]}function readPropFromProto(t,e,n){const s=getDescriptorFromProto(e,n);return s?"value"in s?s.value:s.get?.call(t.draft_):void 0}function getDescriptorFromProto(t,e){if(!(e in t))return;let n=getPrototypeOf(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=getPrototypeOf(n)}}function markChanged(t){t.modified_||(t.modified_=!0,t.parent_&&markChanged(t.parent_))}function prepareCopy(t){t.copy_||(t.copy_=shallowCopy(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const o=this;return function(u=a,...c){return o.produce(u,d=>n.call(this,d,...c))}}typeof n!="function"&&die(6),s!==void 0&&typeof s!="function"&&die(7);let i;if(isDraftable(e)){const a=enterScope(this),o=createProxy(e,void 0);let l=!0;try{i=n(o),l=!1}finally{l?revokeScope(a):leaveScope(a)}return usePatchesInScope(a,s),processResult(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===NOTHING&&(i=void 0),this.autoFreeze_&&freeze(i,!0),s){const a=[],o=[];getPlugin$1("Patches").generateReplacementPatches_(e,i,a,o),s(a,o)}return i}else die(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,u=>e(u,...l));let s,i;return[this.produce(e,n,(o,l)=>{s=o,i=l}),s,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){isDraftable(t)||die(8),isDraft(t)&&(t=current(t));const e=enterScope(this),n=createProxy(t,void 0);return n[DRAFT_STATE].isManual_=!0,leaveScope(e),n}finishDraft(t,e){const n=t&&t[DRAFT_STATE];(!n||!n.isManual_)&&die(9);const{scope_:s}=n;return usePatchesInScope(s,e),processResult(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const s=getPlugin$1("Patches").applyPatches_;return isDraft(t)?s(t,e):this.produce(t,i=>s(i,e))}};function createProxy(t,e){const n=isMap(t)?getPlugin$1("MapSet").proxyMap_(t,e):isSet(t)?getPlugin$1("MapSet").proxySet_(t,e):createProxyProxy(t,e);return(e?e.scope_:getCurrentScope()).drafts_.push(n),n}function current(t){return isDraft(t)||die(10,t),currentImpl(t)}function currentImpl(t){if(!isDraftable(t)||isFrozen(t))return t;const e=t[DRAFT_STATE];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=shallowCopy(t,e.scope_.immer_.useStrictShallowCopy_)}else n=shallowCopy(t,!0);return each$1(n,(s,i)=>{set$3(n,s,currentImpl(i))}),e&&(e.finalized_=!1),n}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function assertIsFunction(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function assertIsObject(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function assertIsArrayOfFunctions(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${e}[${n}]`)}}var ensureIsArray=t=>Array.isArray(t)?t:[t];function getDependencies(t){const e=Array.isArray(t[0])?t[0]:t;return assertIsArrayOfFunctions(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function collectInputSelectorResults(t,e){const n=[],{length:s}=t;for(let i=0;i<s;i++)n.push(t[i].apply(null,e));return n}var StrongRef=class{constructor(t){this.value=t}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(t,e={}){let n=createCacheNode();const{resultEqualityCheck:s}=e;let i,a=0;function o(){let l=n;const{length:u}=arguments;for(let p=0,m=u;p<m;p++){const g=arguments[p];if(typeof g=="function"||typeof g=="object"&&g!==null){let E=l.o;E===null&&(l.o=E=new WeakMap);const x=E.get(g);x===void 0?(l=createCacheNode(),E.set(g,l)):l=x}else{let E=l.p;E===null&&(l.p=E=new Map);const x=E.get(g);x===void 0?(l=createCacheNode(),E.set(g,l)):l=x}}const c=l;let d;if(l.s===TERMINATED)d=l.v;else if(d=t.apply(null,arguments),a++,s){const p=i?.deref?.()??i;p!=null&&s(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Ref(d):d}return c.s=TERMINATED,c.v=d,d}return o.clearCache=()=>{n=createCacheNode(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function createSelectorCreator(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,s=(...i)=>{let a=0,o=0,l,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),assertIsFunction(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...u},{memoize:p,memoizeOptions:m=[],argsMemoize:g=weakMapMemoize,argsMemoizeOptions:E=[]}=d,x=ensureIsArray(m),b=ensureIsArray(E),S=getDependencies(i),C=p(function(){return a++,c.apply(null,arguments)},...x),T=g(function(){o++;const D=collectInputSelectorResults(S,arguments);return l=C.apply(null,D),l},...b);return Object.assign(T,{resultFunc:c,memoizedResultFunc:C,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:g})};return Object.assign(s,{withTypes:()=>s}),s}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((t,e=createSelector)=>{assertIsObject(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),s=n.map(a=>t[a]);return e(s,(...a)=>a.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>createStructuredSelector});function createThunkMiddleware(t){return({dispatch:n,getState:s})=>i=>a=>typeof a=="function"?a(n,s,t):i(a)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function createAction(t,e){function n(...s){if(e){let i=e(...s);if(!i)throw new Error(formatProdErrorMessage(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>isAction(s)&&s.type===t,n}var Tuple=class fd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,fd.prototype)}static get[Symbol.species](){return fd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new fd(...e[0].concat(this)):new fd(...e.concat(this))}};function freezeDraftable(t){return isDraftable(t)?produce(t,()=>{}):t}function getOrInsertComputed(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function isBoolean(t){return typeof t=="boolean"}var buildGetDefaultMiddleware=()=>function(e){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new Tuple;return n&&(isBoolean(n)?o.push(thunk):o.push(withExtraArgument(n.extraArgument))),o},SHOULD_AUTOBATCH="RTK_autoBatch",createQueueWithTimer=t=>e=>{setTimeout(e,t)},autoBatchEnhancer=(t={type:"raf"})=>e=>(...n)=>{const s=e(...n);let i=!0,a=!1,o=!1;const l=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):t.type==="callback"?t.queueNotification:createQueueWithTimer(t.timeout),c=()=>{o=!1,a&&(a=!1,l.forEach(d=>d()))};return Object.assign({},s,{subscribe(d){const p=()=>i&&d(),m=s.subscribe(p);return l.add(d),()=>{m(),l.delete(d)}},dispatch(d){try{return i=!d?.meta?.[SHOULD_AUTOBATCH],a=!i,a&&(o||(o=!0,u(c))),s.dispatch(d)}finally{i=!0}}})},buildGetDefaultEnhancers=t=>function(n){const{autoBatch:s=!0}=n??{};let i=new Tuple(t);return s&&i.push(autoBatchEnhancer(typeof s=="object"?s:void 0)),i};function configureStore(t){const e=buildGetDefaultMiddleware(),{reducer:n=void 0,middleware:s,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(isPlainObject$1(n))l=combineReducers(n);else throw new Error(formatProdErrorMessage(1));let u;typeof s=="function"?u=s(e):u=e();let c=compose;i&&(c=composeWithDevTools({trace:!1,...typeof i=="object"&&i}));const d=applyMiddleware(...u),p=buildGetDefaultEnhancers(d);let m=typeof o=="function"?o(p):p();const g=c(...m);return createStore(l,a,g)}function executeReducerBuilderCallback(t){const e={},n=[];let s;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(formatProdErrorMessage(28));if(l in e)throw new Error(formatProdErrorMessage(29));return e[l]=o,i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return s=a,i}};return t(i),[e,n,s]}function isStateFunction(t){return typeof t=="function"}function createReducer(t,e){let[n,s,i]=executeReducerBuilderCallback(e),a;if(isStateFunction(t))a=()=>freezeDraftable(t());else{const l=freezeDraftable(t);a=()=>l}function o(l=a(),u){let c=[n[u.type],...s.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,p)=>{if(p)if(isDraft(d)){const g=p(d,u);return g===void 0?d:g}else{if(isDraftable(d))return produce(d,m=>p(m,u));{const m=p(d,u);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},l)}return o.getInitialState=a,o}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(t=21)=>{let e="",n=t;for(;n--;)e+=urlAlphabet[Math.random()*64|0];return e},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType$1(t,e){return`${t}/${e}`}function buildCreateSlice({creators:t}={}){const e=t?.asyncThunk?.[asyncThunkSymbol];return function(s){const{name:i,reducerPath:a=i}=s;if(!i)throw new Error(formatProdErrorMessage(11));const o=(typeof s.reducers=="function"?s.reducers(buildReducerCreators()):s.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(T,I){const D=typeof T=="string"?T:T.type;if(!D)throw new Error(formatProdErrorMessage(12));if(D in u.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return u.sliceCaseReducersByType[D]=I,c},addMatcher(T,I){return u.sliceMatchers.push({matcher:T,reducer:I}),c},exposeAction(T,I){return u.actionCreators[T]=I,c},exposeCaseReducer(T,I){return u.sliceCaseReducersByName[T]=I,c}};l.forEach(T=>{const I=o[T],D={reducerName:T,type:getType$1(i,T),createNotation:typeof s.reducers=="function"};isAsyncThunkSliceReducerDefinition(I)?handleThunkCaseReducerDefinition(D,I,c,e):handleNormalReducerDefinition(D,I,c)});function d(){const[T={},I=[],D=void 0]=typeof s.extraReducers=="function"?executeReducerBuilderCallback(s.extraReducers):[s.extraReducers],P={...T,...u.sliceCaseReducersByType};return createReducer(s.initialState,O=>{for(let B in P)O.addCase(B,P[B]);for(let B of u.sliceMatchers)O.addMatcher(B.matcher,B.reducer);for(let B of I)O.addMatcher(B.matcher,B.reducer);D&&O.addDefaultCase(D)})}const p=T=>T,m=new Map,g=new WeakMap;let E;function x(T,I){return E||(E=d()),E(T,I)}function b(){return E||(E=d()),E.getInitialState()}function S(T,I=!1){function D(O){let B=O[T];return typeof B>"u"&&I&&(B=getOrInsertComputed(g,D,b)),B}function P(O=p){const B=getOrInsertComputed(m,I,()=>new WeakMap);return getOrInsertComputed(B,O,()=>{const F={};for(const[H,Q]of Object.entries(s.selectors??{}))F[H]=wrapSelector(Q,O,()=>getOrInsertComputed(g,O,b),I);return F})}return{reducerPath:T,getSelectors:P,get selectors(){return P(D)},selectSlice:D}}const C={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:b,...S(a),injectInto(T,{reducerPath:I,...D}={}){const P=I??a;return T.inject({reducerPath:P,reducer:x},D),{...C,...S(P,!0)}}};return C}}function wrapSelector(t,e,n,s){function i(a,...o){let l=e(a);return typeof l>"u"&&s&&(l=n()),t(l,...o)}return i.unwrapped=t,i}var createSlice=buildCreateSlice();function buildReducerCreators(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function handleNormalReducerDefinition({type:t,reducerName:e,createNotation:n},s,i){let a,o;if("reducer"in s){if(n&&!isCaseReducerWithPrepareDefinition(s))throw new Error(formatProdErrorMessage(17));a=s.reducer,o=s.prepare}else a=s;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?createAction(t,o):createAction(t))}function isAsyncThunkSliceReducerDefinition(t){return t._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(t){return t._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:t,reducerName:e},n,s,i){if(!i)throw new Error(formatProdErrorMessage(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:u,settled:c,options:d}=n,p=i(t,a,d);s.exposeAction(e,p),o&&s.addCase(p.fulfilled,o),l&&s.addCase(p.pending,l),u&&s.addCase(p.rejected,u),c&&s.addMatcher(p.settled,c),s.exposeCaseReducer(e,{fulfilled:o||noop$4,pending:l||noop$4,rejected:u||noop$4,settled:c||noop$4})}function noop$4(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(t){this.code=t,this.message=`${task} ${cancelled} (reason: ${t})`}name="TaskAbortError";message},assertFunction=(t,e)=>{if(typeof t!="function")throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(t,e=noop2)=>(t.catch(e),t),addAbortSignalListener=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),abortControllerWithReason=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},validateActive=t=>{if(t.aborted){const{reason:e}=t;throw new TaskAbortError(e)}};function raceWithSignal(t,e){let n=noop2;return new Promise((s,i)=>{const a=()=>i(new TaskAbortError(t.reason));if(t.aborted){a();return}n=addAbortSignalListener(t,a),e.finally(()=>n()).then(s,i)}).finally(()=>{n=noop2})}var runTask=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof TaskAbortError?"cancelled":"rejected",error:n}}finally{e?.()}},createPause=t=>e=>catchRejection(raceWithSignal(t,e).then(n=>(validateActive(t),n))),createDelay=t=>{const e=createPause(t);return n=>e(new Promise(s=>setTimeout(s,n)))},{assign:assign$4}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(t,e)=>{const n=s=>addAbortSignalListener(t,()=>abortControllerWithReason(s,t.reason));return(s,i)=>{assertFunction(s);const a=new AbortController;n(a);const o=runTask(async()=>{validateActive(t),validateActive(a.signal);const l=await s({pause:createPause(a.signal),delay:createDelay(a.signal),signal:a.signal});return validateActive(a.signal),l},()=>abortControllerWithReason(a,taskCompleted));return i?.autoJoin&&e.push(o.catch(noop2)),{result:createPause(t)(o),cancel(){abortControllerWithReason(a,taskCancelled)}}}},createTakePattern=(t,e)=>{const n=async(s,i)=>{validateActive(e);let a=()=>{};const l=[new Promise((u,c)=>{let d=t({predicate:s,effect:(p,m)=>{m.unsubscribe(),u([p,m.getState(),m.getOriginalState()])}});a=()=>{d(),c()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await raceWithSignal(e,Promise.race(l));return validateActive(e),u}finally{a()}};return(s,i)=>catchRejection(n(s,i))},getListenerEntryPropsFrom=t=>{let{type:e,actionCreator:n,matcher:s,predicate:i,effect:a}=t;if(e)i=createAction(e).match;else if(n)e=n.type,i=n.match;else if(s)i=s;else if(!i)throw new Error(formatProdErrorMessage(21));return assertFunction(a),{predicate:i,type:e,effect:a}},createListenerEntry=assign$4(t=>{const{type:e,predicate:n,effect:s}=getListenerEntryPropsFrom(t);return{id:nanoid(),effect:s,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(t,e)=>{const{type:n,effect:s,predicate:i}=getListenerEntryPropsFrom(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===s)},cancelActiveListeners=t=>{t.pending.forEach(e=>{abortControllerWithReason(e,listenerCancelled)})},createClearListenerMiddleware=t=>()=>{t.forEach(cancelActiveListeners),t.clear()},safelyNotifyError=(t,e,n)=>{try{t(e,n)}catch(s){setTimeout(()=>{throw s},0)}},addListener=assign$4(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign$4(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...t)=>{console.error(`${alm}/error`,...t)},createListenerMiddleware=(t={})=>{const e=new Map,{extra:n,onError:s=defaultErrorHandler}=t;assertFunction(s);const i=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),p=>{d.unsubscribe(),p?.cancelActive&&cancelActiveListeners(d)}),a=d=>{const p=findListenerEntry(e,d)??createListenerEntry(d);return i(p)};assign$4(a,{withTypes:()=>a});const o=d=>{const p=findListenerEntry(e,d);return p&&(p.unsubscribe(),d.cancelActive&&cancelActiveListeners(p)),!!p};assign$4(o,{withTypes:()=>o});const l=async(d,p,m,g)=>{const E=new AbortController,x=createTakePattern(a,E.signal),b=[];try{d.pending.add(E),await Promise.resolve(d.effect(p,assign$4({},m,{getOriginalState:g,condition:(S,C)=>x(S,C).then(Boolean),take:x,delay:createDelay(E.signal),pause:createPause(E.signal),extra:n,signal:E.signal,fork:createFork(E.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((S,C,T)=>{S!==E&&(abortControllerWithReason(S,listenerCancelled),T.delete(S))})},cancel:()=>{abortControllerWithReason(E,listenerCancelled),d.pending.delete(E)},throwIfCancelled:()=>{validateActive(E.signal)}})))}catch(S){S instanceof TaskAbortError||safelyNotifyError(s,S,{raisedBy:"effect"})}finally{await Promise.all(b),abortControllerWithReason(E,listenerCompleted),d.pending.delete(E)}},u=createClearListenerMiddleware(e);return{middleware:d=>p=>m=>{if(!isAction(m))return p(m);if(addListener.match(m))return a(m.payload);if(clearAllListeners.match(m)){u();return}if(removeListener.match(m))return o(m.payload);let g=d.getState();const E=()=>{if(g===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return g};let x;try{if(x=p(m),e.size>0){const b=d.getState(),S=Array.from(e.values());for(const C of S){let T=!1;try{T=C.predicate(m,b,g)}catch(I){T=!1,safelyNotifyError(s,I,{raisedBy:"predicate"})}T&&l(C,m,d,E)}}}finally{g=INTERNAL_NIL_TOKEN}return x},startListening:a,stopListening:o,clearListeners:u}};function formatProdErrorMessage(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}class AsyncStorage{constructor(e){if(this.name="async storage",e===localStorage||e===sessionStorage)this.storage=e;else throw new Error("storage must be a reference to localStorage or sessionStorage")}write(e,n){return Promise.resolve().then(()=>{try{return this.storage.setItem(e,n)}catch(s){console.error(s),this.clearAll()}})}read(e){return Promise.resolve().then(()=>{try{return this.storage.getItem(e)}catch(n){console.error(n)}})}remove(e){return Promise.resolve().then(()=>{try{return this.storage.removeItem(e)}catch(n){console.error(n)}})}clearAll(){return Promise.resolve().then(()=>{try{return this.storage.clear()}catch(e){console.error(e)}})}key(e){return Promise.resolve().then(()=>{try{return this.storage.key(e)}catch(n){console.error(n)}})}length(){return Promise.resolve().then(()=>{try{return this.storage.length}catch(e){console.error(e)}})}}const START_GET_AFFILIATE_DATA="Affiliate: Start Get Affiliate Data ",GET_AFFILIATE_DATA_SUCCESS="Affiliate: Get Affiliate Data Success ",GET_AFFILIATE_DATA_FAILURE="Affiliate: Get Affiliate Data Failure ",startGetAffiliateData=(t,e)=>t.pipe(ofType(START_GET_AFFILIATE_DATA),mergeMap(n=>{const s=n.payload?.progressId||get$5(e,"value.progress._id",""),i=get$5(n,"payload.from","COURSE_LIST");return getAffiliates({progressId:s,platform:"WEB",from:i}).then(a=>a?{type:GET_AFFILIATE_DATA_SUCCESS,payload:{response:a,requestSource:i}}:{type:"DO_NOTHING"}).catch(()=>({type:GET_AFFILIATE_DATA_FAILURE,payload:{requestSource:i}}))})),affiliate$1=combineEpics(startGetAffiliateData),COURSE_RESTART_START="COURSE: Start Course Restart ",COURSE_RESTART_SUCCESS="COURSE: Course Restart Success ",COURSE_RESTART_FAILURE="COURSE: Course Restart Failure ",COURSE_SWITCH_START="COURSE: Switch Course Start ",COURSE_SWITCH_SUCCESS="COURSE: Switch Course Success ",COURSE_SWITCH_FAILURE="COURSE: Switch Course Failure ",COURSE_GET_START="COURSE: Get Course Start ",COURSE_GET_SUCCESS="COURSE: Get Course Success ",COURSE_GET_FAILURE="COURSE: Get Course Failure ",COURSE_SWITCH_DATA_REFRESH_SUCCESS="COURSE: Set course data after course switch success ",COURSE_SWITCH_DATA_REFRESH_FAILURE="COURSE: Set course data after course switch success ",COURSE_SET_DEFAULT="COURSE: Set Default Course ",localStoreKeysList=["upsell","progress","user","audio","course","affiliate","virtualInstructor"],sessionStoreKeysList=["milestone","purchase","ui","practiceTests","test","dashboard","dialog","verification","timers","courseflow","subscriptions","testList","featureFlags","remotetest"];function getInitialState$1(t,e){let n=null;const s=localStorage.getItem(`ace-redux-${t}`),i=sessionStorage.getItem(`ace-redux-${t}`);try{localStoreKeysList.includes(t)&&s?n=JSON.parse(s):sessionStoreKeysList.includes(t)&&i&&(n=JSON.parse(i))}catch(a){const{message:o}=a;console.error(`Error parsing ${t} from storage:`,o)}return n??e??{}}const defaultState$i={_id:""},courseSlice=createSlice({name:"course",initialState:getInitialState$1("course",defaultState$i),reducers:{setCourse:(t,e)=>e.payload},selectors:{selectCourseState:t=>t,selectCourseIsVerifySignIn:t=>t.isVerifySignIn??!1,selectCourseAppTypeList:t=>t.appTypeList??[]}}),{setCourse}=courseSlice.actions,{selectCourseState,selectCourseIsVerifySignIn,selectCourseAppTypeList}=courseSlice.selectors,course=courseSlice.reducer;var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var t=i(),e=a(),n=o(),s=typeof window<"u"?window:commonjsGlobal;util={assign:t,create:e,trim:n,bind:l,slice:u,each:c,map:d,pluck:p,isList:m,isFunction:g,isObject:E,Global:s};function i(){return Object.assign?Object.assign:function(b,S,C,T){for(var I=1;I<arguments.length;I++)c(Object(arguments[I]),function(D,P){b[P]=D});return b}}function a(){if(Object.create)return function(b,S,C,T){var I=u(arguments,1);return t.apply(this,[Object.create(b)].concat(I))};{let x=function(){};return function(S,C,T,I){var D=u(arguments,1);return x.prototype=S,t.apply(this,[new x].concat(D))}}}function o(){return String.prototype.trim?function(b){return String.prototype.trim.call(b)}:function(b){return b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function l(x,b){return function(){return b.apply(x,Array.prototype.slice.call(arguments,0))}}function u(x,b){return Array.prototype.slice.call(x,b||0)}function c(x,b){p(x,function(S,C){return b(S,C),!1})}function d(x,b){var S=m(x)?[]:{};return p(x,function(C,T){return S[T]=b(C,T),!1}),S}function p(x,b){if(m(x)){for(var S=0;S<x.length;S++)if(b(x[S],S))return x[S]}else for(var C in x)if(x.hasOwnProperty(C)&&b(x[C],C))return x[C]}function m(x){return x!=null&&typeof x!="function"&&typeof x.length=="number"}function g(x){return x&&{}.toString.call(x)==="[object Function]"}function E(x){return x&&{}.toString.call(x)==="[object Object]"}return util}var storeEngine,hasRequiredStoreEngine;function requireStoreEngine(){if(hasRequiredStoreEngine)return storeEngine;hasRequiredStoreEngine=1;var t=requireUtil(),e=t.slice,n=t.pluck,s=t.each,i=t.bind,a=t.create,o=t.isList,l=t.isFunction,u=t.isObject;storeEngine={createStore:p};var c={version:"2.0.12",enabled:!1,get:function(m,g){var E=this.storage.read(this._namespacePrefix+m);return this._deserialize(E,g)},set:function(m,g){return g===void 0?this.remove(m):(this.storage.write(this._namespacePrefix+m,this._serialize(g)),g)},remove:function(m){this.storage.remove(this._namespacePrefix+m)},each:function(m){var g=this;this.storage.each(function(E,x){m.call(g,g._deserialize(E),(x||"").replace(g._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(m){return this._namespacePrefix=="__storejs_"+m+"_"},createStore:function(){return p.apply(this,arguments)},addPlugin:function(m){this._addPlugin(m)},namespace:function(m){return p(this.storage,this.plugins,m)}};function d(){var m=typeof console>"u"?null:console;if(m){var g=m.warn?m.warn:m.log;g.apply(m,arguments)}}function p(m,g,E){E||(E=""),m&&!o(m)&&(m=[m]),g&&!o(g)&&(g=[g]);var x=E?"__storejs_"+E+"_":"",b=E?new RegExp("^"+x):null,S=/^[a-zA-Z0-9_\-]*$/;if(!S.test(E))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var C={_namespacePrefix:x,_namespaceRegexp:b,_testStorage:function(I){try{var D="__storejs__test__";I.write(D,D);var P=I.read(D)===D;return I.remove(D),P}catch{return!1}},_assignPluginFnProp:function(I,D){var P=this[D];this[D]=function(){var B=e(arguments,0),F=this;function H(){if(P)return s(arguments,function(Z,ne){B[ne]=Z}),P.apply(F,B)}var Q=[H].concat(B);return I.apply(F,Q)}},_serialize:function(I){return JSON.stringify(I)},_deserialize:function(I,D){if(!I)return D;var P="";try{P=JSON.parse(I)}catch{P=I}return P!==void 0?P:D},_addStorage:function(I){this.enabled||this._testStorage(I)&&(this.storage=I,this.enabled=!0)},_addPlugin:function(I){var D=this;if(o(I)){s(I,function(B){D._addPlugin(B)});return}var P=n(this.plugins,function(B){return I===B});if(!P){if(this.plugins.push(I),!l(I))throw new Error("Plugins must be function values that return objects");var O=I.call(this);if(!u(O))throw new Error("Plugins must return an object of function properties");s(O,function(B,F){if(!l(B))throw new Error("Bad plugin property: "+F+" from plugin "+I.name+". Plugins should only return functions.");D._assignPluginFnProp(B,F)})}},addStorage:function(I){d("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(I)}},T=a(C,c,{plugins:[]});return T.raw={},s(T,function(I,D){l(I)&&(T.raw[D]=i(T,I))}),s(m,function(I){T._addStorage(I)}),s(g,function(I){T._addPlugin(I)}),T}return storeEngine}var localStorage_1,hasRequiredLocalStorage;function requireLocalStorage(){if(hasRequiredLocalStorage)return localStorage_1;hasRequiredLocalStorage=1;var t=requireUtil(),e=t.Global;localStorage_1={name:"localStorage",read:s,write:i,each:a,remove:o,clearAll:l};function n(){return e.localStorage}function s(u){return n().getItem(u)}function i(u,c){return n().setItem(u,c)}function a(u){for(var c=n().length-1;c>=0;c--){var d=n().key(c);u(s(d),d)}}function o(u){return n().removeItem(u)}function l(){return n().clear()}return localStorage_1}var sessionStorage_1,hasRequiredSessionStorage;function requireSessionStorage(){if(hasRequiredSessionStorage)return sessionStorage_1;hasRequiredSessionStorage=1;var t=requireUtil(),e=t.Global;sessionStorage_1={name:"sessionStorage",read:s,write:i,each:a,remove:o,clearAll:l};function n(){return e.sessionStorage}function s(u){return n().getItem(u)}function i(u,c){return n().setItem(u,c)}function a(u){for(var c=n().length-1;c>=0;c--){var d=n().key(c);u(s(d),d)}}function o(u){return n().removeItem(u)}function l(){return n().clear()}return sessionStorage_1}var cookieStorage,hasRequiredCookieStorage;function requireCookieStorage(){if(hasRequiredCookieStorage)return cookieStorage;hasRequiredCookieStorage=1;var t=requireUtil(),e=t.Global,n=t.trim;cookieStorage={name:"cookieStorage",read:i,write:o,each:a,remove:l,clearAll:u};var s=e.document;function i(d){if(!d||!c(d))return null;var p="(?:^|.*;\\s*)"+escape(d).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(s.cookie.replace(new RegExp(p),"$1"))}function a(d){for(var p=s.cookie.split(/; ?/g),m=p.length-1;m>=0;m--)if(n(p[m])){var g=p[m].split("="),E=unescape(g[0]),x=unescape(g[1]);d(x,E)}}function o(d,p){d&&(s.cookie=escape(d)+"="+escape(p)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function l(d){!d||!c(d)||(s.cookie=escape(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function u(){a(function(d,p){l(p)})}function c(d){return new RegExp("(?:^|;\\s*)"+escape(d).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}return cookieStorage}var memoryStorage_1,hasRequiredMemoryStorage;function requireMemoryStorage(){if(hasRequiredMemoryStorage)return memoryStorage_1;hasRequiredMemoryStorage=1,memoryStorage_1={name:"memoryStorage",read:e,write:n,each:s,remove:i,clearAll:a};var t={};function e(o){return t[o]}function n(o,l){t[o]=l}function s(o){for(var l in t)t.hasOwnProperty(l)&&o(t[l],l)}function i(o){delete t[o]}function a(o){t={}}return memoryStorage_1}var store_modern,hasRequiredStore_modern;function requireStore_modern(){if(hasRequiredStore_modern)return store_modern;hasRequiredStore_modern=1;var t=requireStoreEngine(),e=[requireLocalStorage(),requireSessionStorage(),requireCookieStorage(),requireMemoryStorage()],n=[];return store_modern=t.createStore(e,n),store_modern}var store_modernExports=requireStore_modern();const storeModern=getDefaultExportFromCjs(store_modernExports),SET_IS_LOADING="UI: Set Is Loading ",SET_IS_NOT_LOADING="UI: Set Is Not Loading ",REDIRECT_TO_URL="UI: Redirect To URL ",REDIRECT_TO_URL_SUCCESS="UI: Redirect To URL Success ",SHOW_MODAL="UI: Show Modal ",HIDE_MODAL="UI: Hide Modal ",SET_BRAND="UI: Set Brand ",SEND_PARENT_EMAIL_START="UI: Start send parent email request ",SEND_PARENT_EMAIL_SUCCESS="UI: Send parent email request success ",SEND_PARENT_EMAIL_FAILURE="UI: Send parent email request failure ",GO_BACK="UI: Go back in history ",SET_PASSWORD_IS_VERIFIED="UI: Set Password Verified ",SET_PASSWORD_IS_NOT_VERIFIED="UI: Set Password Unverified ",REQUEST_ERROR="UI: Request Error ",SET_LOGO="UI: Set Logo ",SET_TITLE_LONG="UI: Set Long Title ",SET_TITLE_SHORT="UI: Set Short Title ",GET_RESOURCE_LINKS_START="UI: Start Get Resource Links ",GET_RESOURCE_LINKS_SUCCESS="UI: Get Resource Links Success ",GET_RESOURCE_LINKS_FAILURE="UI: Get Resource Links Failure ",SET_DOMAIN_CONF="UI: Set Domain Configuration ",SET_VOICEOVER_UI_STUFF="UI: Set voiceover UI vars ",OPEN_UPSELL_MODAL="UI: Open Timely Upsell Modal ",CLICK_AUDIO_ICON="UI: Audio Icon Clicked ",SET_VOICEOVER_IS_BADGED="UI: Set voiceover icon is badged ",SET_VOICEOVER_IS_NOT_BADGED="UI: Set voiceover icon is not badged ",NAVIGATE_STATE_CHANGE="UI: Navigate State Change ",SET_ACTIVE_STATE="UI: Set active state ",RESET_NAVIGATION="UI: Reset Navigation ",UNAUTHORIZED_REQUEST_ERROR="UI: 40102 Unauthorized request error ",SET_IS_SIGNIN_VERIFIED="UI: Set is signin verified ",LOG_REQUEST="UI: Log event in API logger ",SET_URL_PARAMS="UI: Set URL Params ",SET_IS_MOBILE="UI: Set is mobile ",SET_IS_REDIRECTED_FROM_BOOKMARKS="UI: Set is redirected from bookmarks ",SET_IS_REDIRECTED_FROM_EXAM="UI: Set is redirected from exam ",SET_TOPIC_REDIRECT_DATA="UI: Set topic redirect data ",CLEAR_TOPIC_REDIRECT_DATA="UI: Clear topic redirect data ",hideModal=t=>({type:HIDE_MODAL,payload:{index:t}}),redirectToUrl=(t,e,n)=>({type:REDIRECT_TO_URL,payload:{url:t,params:e,options:n}}),setBrand=t=>({type:SET_BRAND,payload:{brand:t}});function getStorageSizes(t){let e=0;const n={};for(let s in t){if(!localStorage.hasOwnProperty(s))continue;const i=(s.length+localStorage[s].length)*2;e+=i,n[s]=(i/1024).toFixed(2)+"KB"}return{totalSize:(e/1024).toFixed(2)+" KB",localStorageKeys:n}}const storeInterface={name:"localStorage with exception handling",localStorage:()=>window.localStorage,read:t=>localStorage.getItem(t),write:(t,e)=>{try{return localStorage.setItem(t,e)}catch(n){if(window.localStorage){const s=getStorageSizes(window.localStorage);return store.dispatch({type:LOG_REQUEST,payload:{code:5e4,message:"Web localStorage Exceeded: "+t+" : "+n.message,level:"ERROR",data:s}}),["CourseFlow"].forEach(a=>localStorage.removeItem(a)),localStorage.setItem(t,e)}}},each:t=>{Object.keys(localStorage).forEach(e=>{t(localStorage.getItem(e))})},remove:t=>localStorage.removeItem(t),clearAll:()=>localStorage.clear()};let root,apiConf,stateParams;const store$1=storeModern.createStore(storeInterface);function init$4(){root=window.aceRootScope,apiConf=window.aceConstants?.ACEAPICONF}function safeGet(t){return store$1.get(t)}function set$2(t,e,n,s){root[`${e}Current`]=n;const i=safeGet(t);return i?(i[e]=n,store$1.set(t,lodashExports.merge(i,{[e]:n}),s)):(store$1.set(t,{},s),safeGet(t)?set$2(t,e,n,s):void 0)}function get$4(t,e){const n=safeGet(t);return n&&n[e]}function clear(t,e){let n;return!e&&t&&safeGet(t)?n=store$1.remove(t):e&&t&&safeGet(t)&&set$2(t,e),n}function memorizeProfilerFrom(t="DASHBOARD",e=root.progressCurrent._id){return set$2("profilerFrom",`_profilerFrom${e}`,t)}function recallProfilerFrom(t=root.progressCurrent._id){return get$4("profilerFrom",`_profilerFrom${t}`)}function forgetProfilerFrom(){return clear("profilerFrom")}function memorizeDebugInfo(t={}){return set$2("debugInfo","_debugInfo",t)}function recallDebugInfo(){return get$4("debugInfo","_debugInfo")}function forgetDebugInfo(){return clear("debugInfo")}function memorizeAppReloadToken(t=24*(60*(60*1e3))){return set$2("reloadTokens","_AppReloadToken",!0,new Date().getTime()+t)}function recallAppReloadToken(){return get$4("reloadTokens","_AppReloadToken")}function forgetAppReloadToken(){return clear("reloadTokens")}function memorizeBookmark(t={url:window.location.href,params:stateParams},e=root.progressCurrent._id){return set$2("bookmarks",`_Bookmark${e}`,t)}function recallBookmark(t=root.progressCurrent._id){return get$4("bookmarks",`_Bookmark${t}`)}function forgetBookmark(){return clear("bookmarks")}function memorizeTimerPosition(t,e,n=root.progressCurrent._id){const s=get$4("timerPositions",`_TimerPosition${n}`)||{};return s[e]=t,set$2("timerPositions",`_TimerPosition${n}`,s)}function recallTimerPosition(t,e=root.progressCurrent._id){const n=get$4("timerPositions",`_TimerPosition${e}`);return n&&!isNaN(n[t])&&Math.max(n[t],0)||0}function forgetTimerPosition(){return clear("timerPositions")}function memorizeOnboarding(t="general",e=root.progressCurrent._id){return set$2("onboardings",`_Onboarding${e}_${t}`,!0)}function recallOnboarding(t="general",e=root.progressCurrent._id){return get$4("onboardings",`_Onboarding${e}_${t}`)}function forgetOnboarding(){return clear("onboardings")}function memorizeBucket(t,e=root.progressCurrent._id){return set$2("buckets",`_bucket${e}`,t)}function recallBucket(t=root.progressCurrent._id){return get$4("buckets",`_bucket${t}`)}function forgetBucket(){return clear("buckets")}function forgetProfilerProgress(){return clear("profiler")}function memorizeProfilerProgress(t,e=root.progressCurrent._id){return set$2("profiler",`_Profiler${e}`,t)}function recallProfilerProgress(t=root.progressCurrent._id){return get$4("profiler",`_Profiler${t}`)}function resetRecordOfPopups(){return clear("actions")}function memorizeAction(t,e,n=!0){return set$2("actions",`${t}_${e}`,n)}function recallAction(t,e){return get$4("actions",`${t}_${e}`)}function clearEverything(){const t=recallDebugInfo();store$1.clearAll(),sessionStorage.clear(),memorizeDebugInfo(t)}function removeItem$1(t){store$1.remove(t)}const ls=Object.freeze(Object.defineProperty({__proto__:null,get apiConf(){return apiConf},clear,clearEverything,forgetAppReloadToken,forgetBookmark,forgetBucket,forgetDebugInfo,forgetOnboarding,forgetProfilerFrom,forgetProfilerProgress,forgetTimerPosition,get:get$4,init:init$4,memorizeAction,memorizeAppReloadToken,memorizeBookmark,memorizeBucket,memorizeDebugInfo,memorizeOnboarding,memorizeProfilerFrom,memorizeProfilerProgress,memorizeTimerPosition,recallAction,recallAppReloadToken,recallBookmark,recallBucket,recallDebugInfo,recallOnboarding,recallProfilerFrom,recallProfilerProgress,recallTimerPosition,removeItem:removeItem$1,resetRecordOfPopups,get root(){return root},safeGet,set:set$2,store:store$1},Symbol.toStringTag,{value:"Module"}));let keyList=[];const ModelAbstract={name:"abstract",clearAll(){const{root:t}=ls,{store:e}=ls;return lodashExports.each(keyList,n=>{n!=="volume"&&n!=="domain"&&delete t[`${n}Current`]}),keyList=[],e.clearAll()},getCurrent(t=this.name){const{root:e,store:n}=ls;if(e){keyList.push(t);const s=e[`${t}Current`];if(s)return s;const i=n.get(t);if(i)return e[`${t}Current`]=i,i}return null},setCurrent(t,e=this.name){const{root:n,store:s}=ls;return n[`${e}Current`]=t,s.set(e,t),t},remove:t=>{const{root:e,store:n}=ls;delete e.key,n.remove(t)}},ChapterObj={...ModelAbstract,name:"chapter"},CourseObj={...ModelAbstract,name:"course",async get(t){const{user:e}=store.getState();e?.progressList?.length===1&&e.defProgressId&&store.dispatch({type:COURSE_SET_DEFAULT,payload:{progressId:e.defProgressId}});const n=lodashExports.omit(await courseGet(t),["metadata","tagList"]);return n.levelList=n.levelList.map(s=>({...s,chapterList:s.chapterList.map(i=>lodashExports.omit(i,["tagList","metadata","nodeList","pageList"]))})),this.setCurrent(n),ChapterObj.setCurrent(null),store.dispatch({type:setCourse.type,payload:n}),n},async getList(t,e){return call("course/list","GET",{isValue:t,appType:e||["DE","DD","RE"]})}},UPDATE_PROGRESS="PROGRESS: Update Progress ",CLEAR_PROGRESS="PROGRESS: Clear Progress ",SET_PROGRESS="PROGRESS: Set Progress ",updateProgress=t=>({type:UPDATE_PROGRESS,payload:{progress:t}}),SET_NEEDS_VERIFICATION="VERIFICATION: Needs verification ",SET_DOES_NOT_NEED_VERIFICATION="VERIFICATION: Does not need verification ",needsVerificationCheck=(t,e=void 0,n=void 0)=>({type:SET_NEEDS_VERIFICATION,payload:{modeType:t,pseudoId:e,questionId:n}}),defaultState$h={_id:"",username:"",createdAt:"",updatedAt:"",firstName:"",lastName:"",isAdmin:!1,isDebug:!1,defProgressId:"",defCourseId:"",howFound:"",failedIdentityCount:0,isVerified:!1,progressList:[],preferredName:"",sessionToken:"",driversLicense:""},userSlice=createSlice({name:"user",initialState:getInitialState$1("user",defaultState$h),reducers:{updateUser:(t,e)=>{const{aceRootScope:n}=window;return e.payload?(n.userCurrent={...n.userCurrent,...e.payload},{_id:e.payload._id??t._id,brandId:e.payload.brandId??t.brandId,username:e.payload.username??t.username,createdAt:e.payload.createdAt??t.createdAt,updatedAt:e.payload.updatedAt??t.updatedAt,firstName:e.payload.firstName??t.firstName,lastName:e.payload.lastName??t.lastName,isAdmin:e.payload.isAdmin??t.isAdmin,isDebug:e.payload.isDebug??t.isDebug,defProgressId:e.payload.defProgressId??t.defProgressId,defCourseId:e.payload.defCourseId??t.defCourseId,howFound:e.payload.howFound??t.howFound,failedIdentityCount:e.payload.failedIdentityCount??t.failedIdentityCount,isVerified:e.payload.isVerified??t.isVerified,progressList:e.payload.progressList??t.progressList,preferredName:e.payload.preferredName??t.preferredName,sessionToken:e.payload.sessionToken??t.sessionToken,driversLicense:e.payload.driversLicense??t.driversLicense}):t},clearUser:()=>defaultState$h,logoutUser:()=>defaultState$h},selectors:{selectUserState:t=>t,selectUserSessionToken:t=>t.sessionToken}}),{updateUser,clearUser,logoutUser}=userSlice.actions,{selectUserState:selectUserState$1,selectUserSessionToken}=userSlice.selectors,user=userSlice.reducer,courseRestartEpic=(t,e)=>t.pipe(ofType(COURSE_RESTART_START),mergeMap(()=>{const n=get$5(e,"value.progress._id",null);return n?progressCourseRestart(n).then(s=>({type:COURSE_RESTART_SUCCESS,payload:{result:s}})).catch(()=>({type:COURSE_RESTART_FAILURE})):[{type:COURSE_RESTART_FAILURE}]})),courseRestartSuccess=t=>t.pipe(ofType(COURSE_RESTART_SUCCESS),mergeMap(e=>{const n=get$5(e,"payload.result",{}),s=get$5(e,"payload.result.user",{});return[{type:SET_PROGRESS,payload:{progress:n}},{type:COURSE_SWITCH_START,payload:{userId:s._id,progressId:n._id}}]})),courseRestartFailure=t=>t.pipe(ofType(COURSE_RESTART_FAILURE),mergeMap(()=>[{type:SET_IS_NOT_LOADING},{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}])),courseSwitchStartEpic=t=>t.pipe(ofType(COURSE_SWITCH_START),mergeMap(e=>window.aceUser.setDefaultProgress(e.payload?.progressId).then(n=>({type:COURSE_SWITCH_SUCCESS,payload:{user:n}})).catch(n=>({type:COURSE_SWITCH_FAILURE,payload:{error:n}})))),courseSwitchSuccessEpic=t=>t.pipe(ofType(COURSE_SWITCH_SUCCESS),mergeMap(e=>{const n=get$5(e,"payload.user",null),s=get$5(n,"defCourseId","");return ExperimentLib.fetch(n).catch(i=>{console.error("Error fetching experiments",i)}),CourseObj.get(s).then(i=>({type:COURSE_SWITCH_DATA_REFRESH_SUCCESS,payload:{course:i,user:n}})).catch(i=>({type:COURSE_SWITCH_DATA_REFRESH_FAILURE,payload:{error:i}}))})),courseSwitchDataRefreshSuccessEpic=t=>t.pipe(ofType(COURSE_SWITCH_DATA_REFRESH_SUCCESS),mergeMap(e=>{const n=get$5(e,"payload.user",null);return[{type:updateUser.type,payload:n},{type:COURSE_GET_START,payload:{courseId:n.defCourseId,loadVerification:!0}},{type:REDIRECT_TO_URL,payload:{url:"dash.index",options:{replace:!0,windowReload:!0}}}]})),courseSwitchDataRefreshFailureEpic=t=>t.pipe(ofType(COURSE_SWITCH_DATA_REFRESH_FAILURE),mergeMap(e=>(console.error(get$5(e,"payload.error")),[{type:REDIRECT_TO_URL,payload:{url:"dash.index",options:{replace:!0,windowReload:!0}}},{type:SET_IS_NOT_LOADING}]))),courseSwitchFailureEpic=t=>t.pipe(ofType(COURSE_SWITCH_FAILURE),mergeMap(e=>(console.error(e.payload.error),[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}},{type:SET_IS_NOT_LOADING}]))),courseSetDefaultEpic=t=>t.pipe(ofType(COURSE_SET_DEFAULT),mergeMap(e=>window.aceUser.setDefaultProgress(e.payload?.progressId).then(()=>({type:"DO_NOTHING"})).catch(n=>({type:COURSE_SWITCH_FAILURE,payload:{error:n}})))),courseGetStartEpic=t=>t.pipe(ofType(COURSE_GET_START),concatMap(e=>{const n=get$5(e,"payload.courseId",""),s=get$5(e,"payload.loadVerification",!1);return CourseObj.get(n).then(i=>({type:COURSE_GET_SUCCESS,payload:{course:i,loadVerification:i.isVerifySignIn&&s}})).catch(i=>(console.error(i),{type:COURSE_GET_FAILURE,payload:{error:i}}))})),courseGetSuccessEpic=t=>t.pipe(ofType(COURSE_GET_SUCCESS),mergeMap(e=>{const n=[];return e?.payload?.loadVerification&&e?.payload?.course?.isVerifySignIn&&n.push({type:SET_NEEDS_VERIFICATION,payload:{modeType:"SIGNIN"}}),n})),courseEpic=combineEpics(courseRestartEpic,courseRestartSuccess,courseRestartFailure,courseSwitchStartEpic,courseSwitchSuccessEpic,courseSwitchFailureEpic,courseGetStartEpic,courseSwitchDataRefreshSuccessEpic,courseSwitchDataRefreshFailureEpic,courseGetSuccessEpic,courseSetDefaultEpic),URLS={WEBASSETS:"https://d1u7daj727sadp.cloudfront.net/webassets"};function getJarvisUrl(t="prd"){return`https://${t}.jarvishq.com/`}const ADDITIONAL_SCREEN_SECONDS=1,RE_ONBOARDING_QUESTIONS=["Is real estate regulated at the state or federal level?","What's the difference between the borrower and the lender?","What is a contingency?"],DRV_ONBOARDING_QUESTIONS=["What are the steps to safely changing lanes?","When should you turn your headlights on?","What is cover braking and why should I use it?"],BIFROST_URL="https://bifrost-stg.xgritapi.com/api/1/server",ACE_AUTH="Basic YmI5ODEyYTNiMzhmZmE1ZjRjZGUxMTM4MWIzODU0OTE6",CODE_BASE="api",FULL_SCREEN_LIST_NO_HEADER=["courseflow.complete","profiler.driving-school","profiler.informational","profiler.verifyPassword","purchase.confirmation","purchase.driverRecord","purchase.payment.flow","purchase.payment","purchase","user.forgot-password","user.parentSignup","user.password","user.reset","user.signin","user.signup"],FULL_SCREEN_LIST=["acetest.ready","acetest.reviewTest","acetest.test","casestudy.load","courseflow","courseflow.complete","courseflow.index","courseflow.question","foaf.categorize","foaf.ready","foaf.results","proctor.review-plus","proctor.signin","profiler.driving-school","profiler.formal","profiler.informational","profiler.verifyPassword","purchase.confirmation","purchase.driverRecord","purchase.payment.flow","purchase.payment","purchase","remotetest.test","user.forgot-password","user.parentSignup","user.password","user.reset","user.signin","user.signup","flashcards","webinar.view","tutoring.view","crashcourse.view","audio-lessons","glossary.view","practicetests","btw.view","otozen.view","zebra.view","testprep.view","profiler.manageSubscription"],profilerList=["profiler.informational","profiler.formal","profiler.driving-school"],NO_USER_LIST=["user.signup","user.parentSignup","user.password"],PUBLIC_LIST=lodashExports.union(NO_USER_LIST,["user.signin","user.reset","user.sync","user.sso","activity.hijack","activity.brand","activity.theme","help"]),NO_COURSE_LIST=["user.sync","user.sso","profiler.formal-standard","activity.hijack","activity.brand","activity.theme","user.signout","user.debug","rewards.share","help","activity.enroll","acetest.ready","acetest.purchase","acetest.test","journey","purchase.course","courseswitch.view","bookmark.view","testList.view"],PARENT_LIST=["dashboard.parent","activity.hijack","activity.brand","activity.theme","profiler.formal-standard","user.changePassword","user.reset","user.signout","help","buy.exit","user.debug","teacher.tests","teacher.log","teacher","manager","courseswitch.view","rewards.share","btw.view","otozen.view","zebra.view","testprep.view"],COURSE_LIST=["course.chapter","level.ready","level.review","level.summary","level.test","acetest.ready","acetest.test","foaf.ready","foaf.categorize","foaf.results","courseflow.index","courseflow.question"],NO_LOCK_LIST=lodashExports.union(NO_COURSE_LIST,["toc.view","activity.progress","activity.upgrade","dash.index","course.marketing","profiler.formal-standard","addons","renew.view","purchase","acetest.reviewTest","profiler.informational","profiler.formal","profiler.manageSubscription","courseswitch.view","practicetests","extras.videos","screen"]),NO_VERIFY_LIST=lodashExports.union(NO_LOCK_LIST,profilerList,["verify.index","verify.affidavit"]),REVIEW="COURSEFLOW: Review ",REVIEW_SUCCESS="COURSEFLOW: Review Success ",ADVANCE="COURSEFLOW: Advance ",ADVANCE_SUCCESS="COURSEFLOW: Advance Success ",BACKTRACK="COURSEFLOW: Backtrack ",BACKTRACK_SUCCESS="COURSEFLOW: Backtrack Success ",ADD_NODE_TO_LIST="COURSEFLOW: Add node to list ",UPDATE_BOOKMARK_NODE="COURSEFLOW: Update bookmark in node ",SET_ATTRIBUTES="COURSEFLOW: Set attributes ",SET_CURRENT_NODE="COURSEFLOW: Set current node id ",CLEAR_COURSEFLOW="COURSEFLOW: Clear ",START_COURSE="COURSEFLOW: Start Course ",START_COURSE_SUCCESS="COURSEFLOW: Start Course Success ",SUBMIT_ANSWER_START="COURSEFLOW: Start submit answer ",SUBMIT_MULTI_ANSWER_START="COURSEFLOW: Start submit multi answer ",SUBMIT_ANSWER_SUCCESS="COURSEFLOW: Submit answer success ",SET_NAVIGATION="COURSEFLOW: Setting course nav configuration",ADVANCE_NO_ACTION="COURSEFLOW: Advance with no action ",SET_ADVANCE_NO_ACTION_LOADING_STATE="COURSEFLOW: Set state of advance with no action ",submitAnswerStart=(t,e,n)=>({type:SUBMIT_ANSWER_START,payload:{answerKey:t,nodeId:e,isSingleChoice:n}}),submitMultiAnswerStart=(t,e,n)=>({type:SUBMIT_MULTI_ANSWER_START,payload:{answerKeyList:t,nodeId:e,isSingleChoice:n}}),submitAnswerSuccess=(t,e)=>({type:SUBMIT_ANSWER_SUCCESS,payload:{results:t,nodeId:e}}),OPEN_LINK="LINK: Open Link ";class AceAudio{constructor(){this.audioInterface=new Audio,this.autoplay=!1}setSource(e){return this.audioInterface.src=e,this.audioInterface.load(),new Promise(n=>{this.audioInterface.addEventListener("canplaythrough",()=>{n(!0)})})}getSource(){return this?.audioInterface?.src&&this?.audioInterface?.src!==this.audioInterface?.baseURI}getCurrentTime(){return this.audioInterface.currentTime}setCurrentTime(e){this.audioInterface.currentTime=e}getTotalTime(){return this.audioInterface?.duration}togglePlaybackSpeed(e){if(e==="Fast"){this.audioInterface.playbackRate=1.25;return}this.audioInterface.playbackRate=1}play(){if(this.getSource())try{this.audioInterface.play()}catch(e){console.error(e)}}pause(){try{this.audioInterface.pause()}catch(e){console.error(e)}}stop(){try{this.audioInterface.pause(),this.audioInterface.currentTime=0}catch(e){console.error(e)}}}const instance=new AceAudio;Object.freeze(instance);const audioStateEnum={playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},defaultState$g={state:"PAUSED",src:""},audioSlice=createSlice({name:"audio",initialState:{...getInitialState$1("audio",defaultState$g),state:"PAUSED"},reducers:{setAudioSource:(t,e)=>{t.src=e.payload.src},setAudioPlaying:t=>{t.state="PLAYING"},setAudioPaused:t=>{t.state="PAUSED"},setAudioStopped:t=>{t.state="STOPPED"},clearAudioState:()=>defaultState$g},selectors:{selectAudioState:t=>t}}),{setAudioSource,setAudioPaused,setAudioPlaying,setAudioStopped,clearAudioState}=audioSlice.actions,{selectAudioState}=audioSlice.selectors,audioListenerMiddleware=createListenerMiddleware();audioListenerMiddleware.startListening({actionCreator:setAudioSource,effect:async t=>{try{await instance.setSource(t.payload.src)}catch(e){console.error("Failed to set audio source:",e)}}});audioListenerMiddleware.startListening({actionCreator:setAudioPlaying,effect:(t,e)=>{const n=e.getState(),s=instance.getSource(),{src:i}=n.audio,{state:a}=n.audio,o=a===audioStateEnum.playing,l=n.ui.voiceOver?.isAvailable??!1;!s&&i?e.dispatch(setAudioSource({src:i})):o&&l&&s&&instance.play()}});audioListenerMiddleware.startListening({actionCreator:setAudioPaused,effect:()=>{instance.pause()}});audioListenerMiddleware.startListening({actionCreator:setAudioStopped,effect:()=>{instance.stop()}});const audio=audioSlice.reducer,timerStateEnum={running:"RUNNING",paused:"PAUSED",new:"NEW"},defaultState$f=[],timersSlice=createSlice({name:"timers",initialState:getInitialState$1("timers",defaultState$f),reducers:{startTimer:(t,e)=>{t.some(s=>s.id===e.payload.id)||t.push({id:e.payload.id,state:"NEW",count:0})},removeTimer:(t,e)=>t.filter(n=>n.id!==e.payload.id),runTimer:(t,e)=>{const n=t.find(s=>s.id===e.payload.id);n&&(n.state="RUNNING")},timerTick:t=>{t.map(e=>{e.state===timerStateEnum.running&&(e.count+=1)})},pauseTimer:(t,e)=>{const n=t.find(s=>s.id===e.payload.id);n&&(n.state="PAUSED")},resetTimer:(t,e)=>{const n=t.find(s=>s.id===e.payload.id);n&&(n.count=0)}},extraReducers:t=>{t.addCase("user/logoutUser",()=>defaultState$f),t.addCase("user/clearUser",()=>defaultState$f)},selectors:{selectTimerState:t=>t}}),{startTimer,removeTimer,runTimer,timerTick,pauseTimer,resetTimer}=timersSlice.actions,{selectTimerState}=timersSlice.selectors,timers$1=timersSlice.reducer,isShipped=t=>t.purchase.order.shipping&&t.purchase.order.shipping.is&&t.purchase.order.shipping.is.shipped,getTotalPrice=t=>{const e=t.purchase.order.items.reduce((n,s)=>s.price+n,0);return t.purchase.order.shipping.price?e+t.purchase.order.shipping.price:e},getProductIdList=t=>{let e=[];return t.purchase.order.items.length&&(e=e.concat(t.purchase.order.items.map(n=>n._id))),t.purchase.order.shipping._id&&e.push(t.purchase.order.shipping._id),e},getItemTypes=t=>t.purchase.order.items.map(e=>e.type),isAddressComplete=(t,e,n,s)=>!!(get$5(t,"length",0)&&get$5(e,"length",0)&&get$5(n,"length",0)&&get$5(s,"length",0)>=5),isUserLoggedIn=t=>!!(t&&t._id&&t.sessionToken),getDisplayName$1=t=>(t.preferredName||t.nickname||t.firstName||t.lastName||t.accountType)?.replace(/\w\S*/g,n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()),getNodeById=(t={},e="")=>{if(t.nodeList&&t.nodeList.length)return t.nodeList.find(n=>n._id===e)},getCourseflowQuestionNodeSelectedAnswers=(t={},e="")=>{if(t.nodeList&&t.nodeList.length){const n=getNodeById(t,e);return get$5(n,"data.answerList",[]).filter(o=>o.isSelected===!0).map(o=>o.value).join(", ")}return""},getChapterIsComplete=(t={},e="")=>{if(!e)return!1;if(t.levelDataOdyssey&&t.levelDataOdyssey.length){const n=t.levelDataOdyssey[t.currentLevelIdx]?.data?.chapterList?.find(s=>s._id===e);if(n)return n.isComplete}return!1},courseflowStartEpic=(t,e)=>t.pipe(ofType(START_COURSE),exhaustMap(()=>{const n=get$5(e,"value.progress._id");return febbyStart({progressId:n}).then(s=>({type:START_COURSE_SUCCESS,payload:{result:s}})).catch(s=>(s.buttonText="Ok",{type:REQUEST_ERROR,payload:{error:s}}))})),courseflowAdvanceEpic=(t,e)=>t.pipe(ofType(ADVANCE),exhaustMap(n=>{const s=get$5(e,"value.courseflow",{}),i=get$5(e,"value.progress._id",""),a=get$5(n,"payload.currentNodeId")||s?.currentNodeId,o=s.nodeList.find(l=>l._id===a);return o?.type==="COMPLETE"?[]:febbyAdvance({progressId:i,chapterCacheKey:s.chapterCacheKey,currentNodeId:a,isActive:s.isActive,nodeType:o.type,isPassed:get$5(n,"payload.isPassed",!0)}).then(l=>({type:ADVANCE_SUCCESS,payload:{result:l}})).catch(l=>{const u=l;return u.buttonText="Ok",u.title=l.cause==="40301"?"Check Your Timer!":null,{type:REQUEST_ERROR,payload:{error:u}}})})),courseflowBacktrackEpic=(t,e)=>t.pipe(ofType(BACKTRACK),exhaustMap(()=>{const n=get$5(e,"value.courseflow",{}),s=get$5(e,"value.progress._id","");return febbyBacktrack({progressId:s,chapterCacheKey:n.chapterCacheKey,currentNodeId:n.currentNodeId,isActive:n.isActive}).then(i=>({type:BACKTRACK_SUCCESS,payload:{result:i}})).catch(i=>(i.buttonText="Ok",{type:REQUEST_ERROR,payload:{error:i}}))})),courseflowReviewEpic=(t,e)=>t.pipe(ofType(REVIEW),exhaustMap(n=>{const s=get$5(n,"payload.nodeId"),i=get$5(e,"value.progress._id","");return febbyReview({progressId:i,chapterCacheKey:get$5(n,"payload.chapterCacheKey",""),...n.payload.type==="TEST"&&{nodeId:s,from:"TEST"}}).then(a=>({type:REVIEW_SUCCESS,payload:{result:a}})).catch(a=>(a.buttonText="Ok",{type:REQUEST_ERROR,payload:{error:a}}))})),courseflowRequestSuccessEpic=(t,e)=>t.pipe(ofType(START_COURSE_SUCCESS,ADVANCE_SUCCESS,BACKTRACK_SUCCESS,REVIEW_SUCCESS),mergeMap(n=>{const s=[],{result:i,testId:a}=n.payload,o=get$5(i,"nodeList[0]",{}),l=get$5(o,"type","PAGE"),u=get$5(o,"data",{}),c=get$5(e,"value.progress._id",null);let d,p={},m={};switch(l){case"PAGE":d="courseflow.index",p={nodeId:i.currentNodeId};break;case"COMPLETE":d="courseflow.complete",p={nodeId:i.currentNodeId};break;case"QUESTION":d="courseflow.question",p={nodeId:i.currentNodeId};break;case"REDIRECT":const g=get$5(o,"data.linkList[0]",{});d="dash.index",s.push({type:SHOW_MODAL,payload:{modal:{message:u.message,title:u.header,buttonText:g.title||"Ok",confirmDispatch:[{type:OPEN_LINK,payload:{linkObj:g}}]}}});break;case"TEST":d="acetest.ready",p={progressId:c,modeType:u.modeType,pseudoId:u.pseudoId,nodeId:o._id,isBacktrackAllowed:o.isBacktrackAllowed,from:"TEST"};break;case"CASESTUDY":const{casestudy:E}=u;d="casestudy.load",p={casestudyId:E._id,pageId:"cfpid",idxPointer:"cfidxptr",nodeId:o._id},m={reload:!0};break;case"BUCKETIVITY":const{bucketivity:x}=u;d="foaf.ready",p={bucketivityId:x._id,nodeId:o._id,pageId:"cfpid",idxPointer:"cfidxptr"};break;default:d="courseflow.index",p={nodeId:i.currentNodeId}}return o.isLeadingNode&&o.modal&&o.modal.action&&s.push({type:OPEN_LINK,payload:{linkObj:{type:"APP",key:o.modal.action,breakpoint:o.modal.breakpoint,filter:o.modal.filter,data:o.modal.data,pseudoId:o.linkId}}}),s.push({type:SET_ATTRIBUTES,payload:{attributes:{chapterCacheKey:i.chapterCacheKey,chapterId:i.chapterId,isActive:i.isActive,totalNodeCount:i.totalNodeCount,chapterTimeLeft:i.chapterTimeLeft,prevChapterCompletePercent:e.value.courseflow?.chapterCompletePercent,chapterCompletePercent:i.isActive?i.chapterCompletePercent:e.value.courseflow?.chapterCompletePercent}}}),i.nodeList&&i.nodeList.length&&i.nodeList.forEach(g=>{g.analyticList&&g.analyticList.length&&g.analyticList.forEach(E=>s.push(genericAnalyticsAndIterableEvent(E.event,E.props))),s.push({type:ADD_NODE_TO_LIST,payload:{node:g}})}),s.push({type:setAudioSource.type,payload:{src:get$5(o,"data.voiceoverUrl","")}}),sessionStorage.removeItem(`Advance_Cached_${a}_${c}`),d&&s.push({type:REDIRECT_TO_URL,payload:{url:d,params:p,options:m}}),s})),courseflowTimerEpic=(t,e)=>t.pipe(ofType(timerTick.type),concatMap(()=>{const n=[],s=get$5(e,"value.ui.urlParams.nodeId",null);if(s){const i=get$5(e,"value.courseflow.nodeList",[]).find(o=>o._id===s),a=get$5(e,"value.timers",[]).find(o=>o.id===s);i&&i.data&&a&&a.count>i.data.screenSeconds+ADDITIONAL_SCREEN_SECONDS&&a.state!==timerStateEnum.paused&&n.push({type:pauseTimer.type,payload:{id:s}})}return n})),courseflowStartSubmitQuestionGrading=(t,e)=>t.pipe(ofType(SUBMIT_ANSWER_START,SUBMIT_MULTI_ANSWER_START),exhaustMap(n=>{const s=get$5(e,"value",{}),i=get$5(s,"progress._id"),a=get$5(s,"courseflow.chapterId"),o=get$5(n,"payload.nodeId"),l=getNodeById(s.courseflow,o),c=get$5(n,"payload.isSingleChoice")?[{questionId:get$5(l,"data._id"),answerKey:get$5(n,"payload.answerKey")}]:[{questionId:get$5(l,"data._id"),answerKeyList:get$5(n,"payload.answerKeyList")}];return progressQuestionSet(i,o,a,c).then(d=>submitAnswerSuccess(d[0],o)).catch(d=>({type:REQUEST_ERROR,payload:{error:d}}))})),courseflowAdvanceNoAction=(t,e)=>t.pipe(ofType(ADVANCE_NO_ACTION),exhaustMap(n=>{const s=get$5(e,"value.test",null),i=get$5(e,"value.courseflow",{}),a=get$5(e,"value.progress._id",""),l=get$5(i,"nodeList",[]).find(d=>d.linkId===s.testId),u=get$5(n,"payload.currentNodeId")||l._id,c=i.nodeList.find(d=>d._id===u);return c?.type==="COMPLETE"?[]:febbyAdvance({progressId:a,chapterCacheKey:i.chapterCacheKey,currentNodeId:u,isActive:i.isActive,nodeType:c.type,isPassed:get$5(n,"payload.isPassed",!0)}).then(d=>(sessionStorage.setItem(`Advance_Cached_${s.testId}_${a}`,JSON.stringify(d)),{type:SET_ADVANCE_NO_ACTION_LOADING_STATE,payload:{disable:!1}})).catch(d=>(d.buttonText="Ok",{type:REQUEST_ERROR,payload:{error:d}}))})),courseflowEpic=combineEpics(courseflowStartEpic,courseflowRequestSuccessEpic,courseflowAdvanceEpic,courseflowBacktrackEpic,courseflowReviewEpic,courseflowTimerEpic,courseflowStartSubmitQuestionGrading,courseflowAdvanceNoAction),FRAGMENT_VIEW="VIEW",JourneyObj={...ModelAbstract,name:"journey",getActiveStep(t){return t?lodashExports.find(t.stepList,{_id:t.currentStepId}):null},async save(t){return store.dispatch({type:SET_CHECKLIST_STEPS,payload:{stepList:t.stepList}}),lodashExports.each(t.stepList,e=>{e.viewList=[],lodashExports.each(e.fragmentList,n=>{n.type===FRAGMENT_VIEW&&e.viewList.push(n)})}),this.setCurrent(t)}},getDashCardsStartEpic=(t,e)=>t.pipe(ofType(GET_DASHBOARD_CARDS_START),exhaustMap(()=>{const n=get$5(e,"value.progress._id",null);return getOdyssey(n).then(s=>({type:GET_DASHBOARD_CARDS_SUCCESS,payload:{odysseyResults:s}})).catch(s=>({type:GET_DASHBOARD_CARDS_FAILURE,payload:{error:s}}))})),getDashCardsSuccessEpic=t=>t.pipe(ofType(GET_DASHBOARD_CARDS_SUCCESS),mergeMap(e=>[{type:SET_DASHBOARD_CARDS,payload:{odysseyResults:e.payload.odysseyResults}}])),getDashCardsFailureEpic=t=>t.pipe(ofType(GET_DASHBOARD_CARDS_FAILURE),mergeMap(e=>[{type:REQUEST_ERROR,payload:{error:e.payload.error,confirmDispatch:{type:GET_DASHBOARD_CARDS_START},dismissDispatch:{type:GET_DASHBOARD_CARDS_START}}},{type:SET_DASHBOARD_CARDS,payload:{odysseyResults:{}}}])),toggleLicenseChecklistStepEpic=(t,e)=>t.pipe(ofType(TOGGLE_LICENSE_CHECKLIST_STEP),exhaustMap(n=>{const s=get$5(e,"value.progress._id",null);return toggleJourneyStep(n.payload.stepId,s,n.payload.isComplete).then(i=>(JourneyObj.save(i),{type:"DO_NOTHING"})).catch(i=>({type:REQUEST_ERROR,payload:{error:i}}))})),getJourneyCardDataStartEpic=(t,e)=>t.pipe(ofType(GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_START),exhaustMap(n=>{const s=get$5(e,"value.progress._id",null),i=get$5(n,"payload.cardId",null),a=get$5(n,"payload.currentLevelIdx",null);return getJourneyCardData(s,i).then(o=>({type:GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_SUCCESS,payload:{cardID:i,journeyCardData:o.cardData,currentLevelIdx:a}})).catch(o=>({type:GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_FAILURE,payload:{error:o}}))})),dashboardEpics=combineEpics(getDashCardsStartEpic,getDashCardsSuccessEpic,getDashCardsFailureEpic,toggleLicenseChecklistStepEpic,getJourneyCardDataStartEpic),renameObjectKeys=(t,e)=>Object.keys(e).reduce((n,s)=>({...n,[t[s]||s]:e[s]}),{}),getIterableTokenByVertical=t=>window.aceConstants.TOKENS.iterable[t]??null,getUserInfo=()=>{const t={...window.aceUser.getCurrent()};return delete t.progressList,delete t.sessionToken,delete t.resetCode,delete t.sessionList,delete t._id,delete t.createdAt,delete t.updatedAt,t},getUserEmail=()=>{const t=window.aceUser.getCurrent();return t?t.username:null},track=(t,e)=>{if(ExperimentLib.getFlag("iterable-initialization"))return;const s=window._iaq||[],i=get$5(window,"aceRootScope.courseCurrent",null),a=Object.assign(e,{platform:"WEB",brand:get$5(window,"aceRootScope.domainConf.brandId",""),course_id:i?i._id:"",course_segment:i?i.type:"",course_state:i?i.state:"",course_key:i?i.key:"",app_type:i?i.appType:"",appType:i?i.appType:"",user_type:get$5(window,"aceRootScope.progressCurrent.accountType",get$5(window,"aceRootScope.userCurrent.accountType","student"))}),l=renameObjectKeys({course_id:"courseId",course_segment:"courseType",course_state:"courseState",course_key:"courseKey"},a),c=(p=>({"Button Pressed":"buttonPress","Chapter Completed":"chapterComplete","Level Completed":"levelComplete","Course Completed":"courseComplete","Course Started":"courseStarted"})[p]||p)(t);[["account",getIterableTokenByVertical(get$5(window,"aceRootScope.domainCurrent","DE"))],["identify",getUserEmail(),getUserInfo()],["track",c,l]].forEach(p=>{s.push(p)})},upsellShownEpic=t=>t.pipe(ofType(UPSELL_SHOWN),mergeMap(e=>{const n=[],s=get$5(e,"payload.product",null);return s&&track("Upsell Shown",{product_id:s._id,product_name:s.title,price:s.price,level_idx:get$5(window,"aceRootScope.progressCurrent.currentLevel",""),location:get$5(e,"payload.location","")}),n})),genericEventEpic=t=>t.pipe(ofType(GENERIC_EVENT),mergeMap(e=>(e?.payload?.event&&track(e?.payload?.event,e?.payload?.props),[]))),iterableEpic=combineEpics(upsellShownEpic,genericEventEpic);function getContextWindow$1(){return window.open("about:blank","_blank")}function appendTransferToken(t,e){const n=new URL(t);return n.searchParams.set("transferToken",e),n.toString()}function openWindow({url:t,target:e="_blank",windowContext:n}){if(n&&!n.closed)n.location.href=t;else{const s=window.open(t,e);(!s||s.closed||typeof s.closed>"u")&&(window.location.href=t)}}const apiActionToNativeRoute={"360Video.view":"extras.videos","acetest.ready":"acetest.ready","activity.brand":"activity.brand","activity.hijack":"activity.hijack","activity.theme":"activity.theme","bookmark.view":"bookmark.view","check.list":"manager","course.purchase":"activity.upgrade","courseswitch.view":"courseswitch.view","custom.audiolessons":"audio-lessons","dash.index":"dash.index","dashboard.view":"dash.index","flashcards.view":"flashcards.view","glossary.view":"glossary.view","journey.list":"journey","license.checklist":"journey","practiceTest.view":"practicetests","referral.view":"rewards.share","rewards.share":"rewards.share","test.retake":"acetest.test","test.start":"acetest.test","testList.view":"testList.view","toc.view":"toc.view","user.changePassword":"user.changePassword","user.debug":"user.debug","user.signout":"user.signout","webinar.view":"webinar.view","tutoring.view":"tutoring.view","crashcourse.view":"crashcourse.view","renew.view":"renew.view","btw.view":"btw.view","otozen.view":"otozen.view","zebra.view":"zebra.view","testprep.view":"testprep.view",addons:"addons",manager:"manager"};function onGeneralError(t){const{error:e}=t;e&&store.dispatch({type:SHOW_MODAL,payload:{modal:{message:e.message,title:"Uh oh!",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}})}function onSilentError(t){store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index",params:{...t.urlParams}}})}function onPageVerifyTimeoutError(t){const{error:e}=t;e.code===40410?(ChapterObj.setCurrent(null),window.location.reload()):store.dispatch({type:SHOW_MODAL,payload:{title:"Whoops!",message:"We are experiencing some issues, please try again.",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}})}function onSignInVerifyTimeoutError(){store.dispatch({type:SHOW_MODAL,payload:{title:"Yikes!",message:"We are experiencing some issues, please try again.",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}})}function checkBreakRedirect(){const{course:t,progress:e}=store.getState();t.requiredBreakInMinutes&&e.breakMinutes&&e.breakMinutes<t.requiredBreakInMinutes&&store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})}function getMappedRoute(t){return t?apiActionToNativeRoute[t]:void 0}const reroute=t=>({"break.if.needed":checkBreakRedirect,"verify.timeout.error.page":onPageVerifyTimeoutError,"verify.timeout.error.signin":onSignInVerifyTimeoutError,"verify.timeout.error.leveltest":onSignInVerifyTimeoutError,"test.error":onGeneralError,"contract.error":onGeneralError,"general.error":onGeneralError,"silent.error":onSilentError})[t.source](t),openTemplate=(t,e)=>{const{aceRootScope:n}=window;return getTemplate(n.progressCurrent.appType,"OFFER",void 0,lodashExports.get(e,"params.embedId")).then(s=>{const i=lodashExports.sample(s),a=lodashExports.merge(e,i);if(!(s&&s.length===0)){if(lodashExports.get(a,"type")==="OFFER_PRIMED"){store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"ad.partial",data:a}}});return}return setTimeout(()=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"ad.full",data:a}}})},1500)}})},CHECK_MILESTONE_START="MILESTONE: Check Milestone Start ",CHECK_MILESTONE_SUCCESS="MILESTONE: Check Milestone Success ",CHECK_MILESTONE_FAILURE="MILESTONE: Check Milestone Failure ",checkMilestone=t=>({type:CHECK_MILESTONE_START,payload:t});async function openHelpWithTransferToken(t,e){try{const n=await getUserTransferToken(e);if(n?.transferToken){const s=appendTransferToken(t,n.transferToken);window.open(s,"_blank")}else window.open(t,"_blank")}catch{window.open(t,"_blank")}}const openLinkEpic=(t,e)=>t.pipe(ofType(OPEN_LINK),mergeMap(n=>{const s=[],i=get$5(n,"payload.linkObj",{}),a=get$5(e,"value"),o=get$5(a,"progress"),{dashboard:l}=a,{levelDataOdyssey:u,metadataOdyssey:c}=l,d=getMappedRoute(i?.key),p={...i,key:d??i.key,type:d?"APP":i.type};let m=u.findIndex(x=>x.type==="CHECK"||x.type==="JOURNEY");m===-1&&(m=u.findIndex(x=>x.type==="LEVEL"));const g=u.findIndex(x=>x.type==="SCHEDULE"),E=get$5(a,"course.helpCenterUrl",null)||get$5(window,"aceRootScope.domainConf.Links.Help",null);if(p.type==="URL"&&p.link&&window.open(p.link,"_blank"),p.type==="APP")switch(p.key){case"create.course":s.push({type:SET_IS_LOADING}),s.push({type:COURSE_RESTART_START});break;case"course.resume":window.aceRootScope.resumeCourse();break;case"todo.view":s.push({type:SET_CURRENT_LEVEL_IDX,payload:{currentLevelIdx:m}});break;case"remoteTest.view":s.push({type:CHECK_MILESTONE_START,payload:"EXAM"});break;case"request.emailParent":(!o.isPurchased||p.isShowModal)&&s.push({type:SHOW_MODAL,payload:{modal:{type:"emailParent",eventKey:p.data.embedId||p.data.campaignId,title:p.data.title,message:p.data.description,confirmText:p.data.buttonText}}});break;case"certificate.viewList":case"certificate.download":s.push({type:SHOW_MODAL,payload:{modal:{type:"certificate.viewList"}}});break;case"webinar.reschedule":if(g!==-1){const C=u[g];C?.data?.cardData||s.push({type:GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_START,payload:{progressId:o._id,cardId:C.data._id,currentLevelIdx:g}}),s.push({type:SET_CURRENT_LEVEL_IDX,payload:{currentLevelIdx:g}})}break;case"checklist.viewStep":s.push({type:SHOW_MODAL,payload:{modal:{type:"checklist.viewStep",data:p.data}}});break;case"profiler.formal-standard":case"profile.view":s.push({type:REDIRECT_TO_URL,payload:{url:"profiler.formal-standard",params:{callingFromPosition:"SIDEBAR",layoutStyle:"standard",stateId:"PROFILE__STUDENT_INFO",blockerId:"VARID_SIDEBAR"}}});break;case"tc":const x=get$5(a,"course.termsUrl",""),b=get$5(a,"ui.domainConf.Links.TermsAndConditions",null);x?window.open(x):b&&window.open(b);break;case"help":if(E){const C=get$5(a,"user._id",null);C?openHelpWithTransferToken(E,C):window.open(E,"_blank")}else console.error("Couldn't find help URL.");break;case"resources":s.push({type:SCREEN_VIEW,payload:{screenName:"Resources"}});break;case"profile":s.push({type:SCREEN_VIEW,payload:{screenName:"Profile home"}});break;case"keyTerms.view":const S=get$5(p,"link",null);S?window.open(S,"_blank"):console.error("Can't find url for keyTerms.view.");break;case"contact.cx":E&&window.open(E,"_blank");break;case"review.viewStar":s.push({type:SHOW_MODAL,payload:{modal:{type:"review.viewStar"}}});break;case"review.viewNps":s.push({type:SHOW_MODAL,payload:{modal:{type:"review.viewNps"}}});break;case"expiration.reminder":s.push({type:SHOW_MODAL,payload:{modal:{type:"expiration.reminder",message:get$5(c,"deadlineModal.message",""),title:get$5(c,"deadlineModal.title","")||get$5(c,"deadlineModal.data.label",""),buttonText:get$5(c,"deadlineModal.buttonText","")}}});break;case"VERIFICATION":s.push({type:SET_NEEDS_VERIFICATION,payload:{progressId:o._id,modeType:get$5(n,"payload.modeType","PAGE"),pseudoId:get$5(n,"payload.linkObj.pseudoId",void 0),questionId:get$5(n,"payload.linkObj.questionId",void 0)}});break;case"survey.viewEmbed":s.push({type:SHOW_MODAL,payload:{modal:{type:"survey.viewEmbed",embedId:get$5(n,"payload.linkObj.data.embedId","HWKXFCN"),linkUrl:get$5(n,"payload.linkObj.data.linkUrl","https://widget.surveymonkey.com/collect/website/js/jLZj7lA02r5W5n_2BDWfi45RaELYLH3nBm4qnGTYT_2Fg2V_2B2_2F2IarG_2Bg8QnK0WbwleW.js")}}});break;case"tutor.contact":s.push({type:SHOW_MODAL,payload:{modal:{type:"tutor.contact"}}});break;case"feature.showOnboardingCard":break;case"template.open":openTemplate("template.open",{breakpoint:p.breakpoint,filter:p.filter,params:p.data});break;default:d&&s.push({type:REDIRECT_TO_URL,payload:{url:p.key,params:{...p.data}}});break}return s})),linkEpic=combineEpics(openLinkEpic),defaultState$e={milestoneKey:"",action:"",course:{},milestoneData:{},remainingCount:0,failCode:""},milestoneSlice=createSlice({name:"milestone",initialState:getInitialState$1("milestone",defaultState$e),reducers:{setMilestone:(t,e)=>e.payload??defaultState$e},selectors:{selectMilestoneState:t=>t}}),{setMilestone}=milestoneSlice.actions,{selectMilestoneState}=milestoneSlice.selectors,milestone=milestoneSlice.reducer,MilestoneObj={name:"milestone",checkMilestone(t,e,n){return checkPurchaseAvailable(t,e,n).then(s=>(store.dispatch(setMilestone(s)),s))},getMilestoneKey(){return store.getState().milestone.milestoneKey}};/*! js-cookie v3.0.5 | MIT */function assign$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)t[s]=n[s]}return t}var defaultConverter={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$3(t,e){function n(i,a,o){if(!(typeof document>"u")){o=assign$3({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var u in o)o[u]&&(l+="; "+u,o[u]!==!0&&(l+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(a,i)+l}}function s(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var a=document.cookie?document.cookie.split("; "):[],o={},l=0;l<a.length;l++){var u=a[l].split("="),c=u.slice(1).join("=");try{var d=decodeURIComponent(u[0]);if(o[d]=t.read(c,d),i===d)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:s,remove:function(i,a){n(i,"",assign$3({},a,{expires:-1}))},withAttributes:function(i){return init$3(this.converter,assign$3({},this.attributes,i))},withConverter:function(i){return init$3(assign$3({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var api=init$3(defaultConverter,{path:"/"});class SessionSync{channel=null;listeners=new Map;isSupported=!1;constructor(){this.isSupported=typeof BroadcastChannel<"u",this.isSupported&&this.initialize()}initialize(){try{this.channel=new BroadcastChannel("xgrit-session-sync"),this.channel.addEventListener("message",e=>{const{type:n}=e.data,s=this.listeners.get(n);s&&s.forEach(i=>{try{i(e.data)}catch(a){console.error("[SessionSync] Error in event handler:",a)}})})}catch(e){console.error("[SessionSync] Failed to initialize:",e),this.isSupported=!1}}on(e,n){return this.isSupported?(this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)?.add(n),()=>{this.listeners.get(e)?.delete(n)}):()=>{}}post(e){if(!this.isSupported||!this.channel)return;const n={type:e,timestamp:Date.now()};try{this.channel.postMessage(n)}catch(s){console.error("[SessionSync] Failed to broadcast event:",s)}}getIsSupported(){return this.isSupported}}const sessionSync=new SessionSync,selectAffiliateState=t=>t.affiliate,selectCourseflowState=t=>t.courseflow,selectCourseflowNodeList=t=>t.courseflow.nodeList,selectCourseflowByNodeId=createSelector([selectCourseflowNodeList,(t,e)=>e],(t,e)=>e?t.find(n=>n._id===e):void 0),selectDashboardState=t=>t.dashboard,selectDashboardLevelDataOdyssey=t=>t.dashboard.levelDataOdyssey,selectDashboardWebinarCardDataByCurrentLevel=createSelector([selectDashboardLevelDataOdyssey,t=>t.dashboard.currentLevelIdx],(t,e)=>{const n=t[e];return n?.type==="SCHEDULE"?n.data:{}}),selectDashboardJourneyStepList=createSelector([selectDashboardLevelDataOdyssey],t=>t.reduce((e,n)=>n.type==="JOURNEY"?e.concat(n.data.stepList):e,[])),selectprogressState=t=>t.progress,selectprogressId=t=>t.progress._id??"",selectProgressCurrentLevel=t=>t.progress.currentLevel??0,selectCurrentProgressLocationValues=t=>({currentPagePlusOne:(t.progress.currentPage??0)+1,currentChapterPlusOne:(t.progress.currentChapter??0)+1,currentLevelPlusOne:(t.progress.currentLevel??0)+1}),selectProgressIsRandomAccess=t=>t.progress.isRandomAccess,selectPurchaseState=t=>t.purchase,selectPurchaseAvailablePersistentUpsellList=t=>t.purchase.persistentUpsellList.filter(e=>!e.is.purchased),selectPurchaseUnavailablePersistentUpsellList=t=>t.purchase.persistentUpsellList.filter(e=>e.is.purchased),selectPurchasePersistentUpsell=t=>t.purchase.persistentUpsellList,selectPurchaseIsShipped=createSelector(t=>t.purchase.order.shipping,t=>t?.is?.shipped),selectPurchaseEnteredAddress=t=>t.purchase.enteredAddress,selectPurchaseOrderItems=t=>t.purchase.order.items,selectPurchaseOrderShipping=t=>t.purchase.order.shipping,selectPurchaseContinueLinkUrl=t=>t.purchase.continueLinkUrl,selectPurchaseHasShipping=t=>Object.keys(t.purchase.order.shipping).length>0&&t.purchase.order.shipping.constructor===Object,selectPurchaseTotalPrice=createSelector([selectPurchaseOrderItems,selectPurchaseOrderShipping],(t,e)=>{const n=t.reduce((s,i)=>i.price+s,0);return e?.price?n+e.price:n}),selectPurchaseSummaryItems=createSelector([selectPurchaseHasShipping,selectPurchaseOrderItems,selectPurchaseOrderShipping],(t,e,n)=>!e.length&&!t?[]:e.length&&!t?e:!e.length&&t?[n]:[n,...e]),selectRemoteTestState=t=>t.remotetest,selectRemoteTestUserState=t=>t.remotetest.user,selectSubscriptionsState=t=>t.subscriptions,selectTempState=t=>t.temp,selectTestState=t=>t.test,selectTimerAndCount=createSelector(t=>t.ui.urlParams.nodeId,selectTimerState,(t,e)=>{const n=Array.isArray(e)?e.find(s=>s.id===t):null;return{timer:n,timerCount:n?n.count:null}}),selectUIState=t=>t.ui,selectUIIsMobile=t=>t.ui.isMobile,selectUIBrandState=t=>t.ui.brand,selectUiIsLoading=t=>t.ui.isLoading,selectUIUrlParams=t=>t.ui.urlParams,selectUrlParamsNodeId=t=>t.ui.urlParams?.nodeId??"",selectUIBrandingTitleLong=t=>t.ui.branding.titleLong,selectUIBrandingLogo=t=>t.ui.branding.logo,selectUIModals=t=>t.ui.modals,selectUIVoiceOverState=t=>t.ui.voiceOver,selectUIIsAIModalOpen=t=>t.ui.modals.some(e=>e.type==="ai.va"),selectUIsubtopicIdList=t=>t.ui.subtopicIdList,selectUserState=t=>t.user,selectUserId=t=>t.user._id,selectUserDefProgressId=t=>t.user.defProgressId,selectUserDisplayName=t=>(t.user.preferredName||t.user.nickname||t.user.firstName||t.user.lastName||t.user.accountType)?.replace(/\w\S*/g,n=>n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),selectNeedCheckVerification=t=>t.verification.needCheckVerification,selectVerificationModeType=t=>t.verification.modeType,selectVerificationPseudoId=t=>t.verification.pseudoId,selectVerificationQuestionId=t=>t.verification.questionId,selectVerificationWebinarUrl=t=>t.verification.webinarUrl,TeacherObj={...ModelAbstract,name:"teacher",async studentListGet(t){return teacherStudentListGet(t)},async studentLog(t,e){return teacherStudentLog(t,e)},async studentProgressLog(t,e){return teacherStudentProgressLog(t,e)},async studentLeveltest(t,e){return teacherStudentLevelTest(t,e)},async studentStudytest(t,e){return teacherStudentStudyTest(t,e)},async studentTestProgressLog(t,e){return teacherStudentTestProgressLog(t,e)},async studentLink(t,e){return teacherStudentLink(t,e)},async studentUnlink(t,e){return teacherStudentUnlink(t,e)}},VerifyObj={...ModelAbstract,name:"level",type:{knowledge:"KNLD",profile:"PRFL",voice:"VOIC"},removeVerificationRecord:t=>{store$1.remove(`Verification${t}`)},deleteVerification(t,e){return this.removeProgressVerify(t,e)},saveVerification(t){return this.saveProgressVerify(t)},removeProgressVerify(t,e){let n;if(t.type==="leveltest")n=this.calculateStub(t.levelIdx,t.questionIdx);else if(t.type==="signin")n="progressVerifySignIn",ModelAbstract.setCurrent(null,n);else if(t.type==="page"){ModelAbstract.setCurrent(null,"verify");return}else return!1;let s=this.getProgressVerifyKeys();if(s=lodashExports.filter(s,i=>{const a=i.indexOf(n)>=0;return a&&this.setCurrent(null,a),!a}),e){let i=100;for(;i-=1;)this.setCurrent(null,this.calculateStub(t.levelIdx,i))}return this.getProgressVerifyKeys(s),!0},calculateStub(t,e){let n="progressVerify_";return lodashExports.isInteger(parseInt(t,10))&&(n=`${n}L_${t}_`),lodashExports.isInteger(parseInt(e,10))&&(n=`${n}Q_${e}_`),n},setProgressVerifyKeys(t){return t||(t=[]),t=lodashExports.uniq(t),this.setCurrent(t,"progressVerifyKeysForExam")},getProgressVerifyKeys(){let t=this.getCurrent("progressVerifyKeysForExam");return t||(t=[]),t},saveProgressVerify(t){let e;if(t.verify,t.type==="leveltest"){e=this.calculateStub(t.levelIdx,t.questionIdx);const n=this.getProgressVerifyKeys();let s;return lodashExports.find(n,e)||(n.push(e),s=this.setCurrent(t.verify,e)),this.setProgressVerifyKeys(n),s}return t.type==="signin"?(e="progressVerifySignIn",ModelAbstract.setCurrent(t.verify,e)):t.type==="page"?(t.pageId,ModelAbstract.setCurrent(t.pageId,"verify")):!1}};function formatProgress$1(t){const e=lodashExports.pick(t.course,["_id","shortTitle","key","isHideProgress"]);return{...t,course:e}}const UserObj={...ModelAbstract,name:"user",LISTDEF_COURT:"Ticket Issued Court...",getCurrent(){const t=selectUserState(store.getState());return lodashExports.isEmpty(t.sessionToken)?null:t},setCurrentWithProgress(t,e=!1){const n=this.getCurrent()&&this.getCurrent().sessionToken;!lodashExports.isEmpty(t)&&!e&&(t={...t,sessionToken:n});let s=null;return t&&t.progressList&&t.progressList.length&&(t.progressList=t.progressList.map(formatProgress$1),s=t.progressList.find(i=>i._id===t.defProgressId)),s&&this.setCurrent(s,"progress"),store.dispatch(updateUser({_id:t._id,brandId:t.brandId,username:t.username,createdAt:t.createdAt,updatedAt:t.updatedAt,firstName:t.firstName,lastName:t.lastName?t.lastName.charAt(0):"",isAdmin:t.isAdmin,isDebug:t.isDebug,defProgressId:t.defProgressId,defCourseId:t.defCourseId,howFound:t.howFound,failedIdentityCount:t.failedIdentityCount,isVerified:t.isVerified,progressList:t.progressList,preferredName:t.preferredName,sessionToken:t.sessionToken,driversLicense:t.driversLicense})),store.dispatch(updateProgress(s)),t&&s?this.setCurrent(s.appType,"domain"):api.remove("userShared"),t},async setupUser({user:t}){sessionSync.post("session:refresh");const{aceRootScope:e}=window;return t.nickname=this.getDisplayName(t),this.setCurrentWithProgress(t,!0),e.progressCurrent&&(this.ping(e.progressCurrent._id,"Start"),e.progressCurrent.accountType==="parent"&&TeacherObj.studentListGet(e.progressCurrent._id).then(n=>(t={...t,studentList:n},n.length>0&&(n[0].nickname=this.getDisplayName(n[0]),TeacherObj.setCurrent(n[0],"student")),t))),t?._id&&setUser({id:t._id}),t},async sync(t=!0){const e=await userSync();if(!e)throw new Error("User sync failed: user is undefined");if(t)return this.setupUser({user:e});this.setCurrentWithProgress(e,!1)},async ssoSync(t){sessionSync.post("session:refresh");const e=await userSso(t);return store.dispatch(updateUser({sessionToken:e.sessionToken})),e?._id&&setUser({id:e._id}),this.setCurrentWithProgress(e,!1)},async setProfile(t,e){return userSetProfile(t,e).then(n=>(n.nickname=this.getDisplayName(n),this.setCurrentWithProgress(n),n))},ping(){console.warn("ping")},async signUp(t,e,n,s,i,a,o){const{aceRootScope:l}=window;return userSignUp(t,e,n,s,i,a,o).then(u=>u?(u.nickname=this.getDisplayName(u),this.setCurrentWithProgress(u,!0),VerifyObj.saveVerification({verify:{note:"free pass to avoid signin verify"},type:"signin"}),this.ping(l.progressCurrent._id,"Start"),u):Promise.reject(new Error("Cannot Sign Up User")))},signOut(){const{aceRootScope:t}=window;sessionSync.post("session:refresh"),destroyUserSession(),t.studentCurrent=null,VerifyObj.deleteVerification({type:"signin"}),this.setCurrent(null,"proctorVerification"),this.setCurrent(null,"progress"),t.hasPersistentUpsells=!1,t.hasVisitedAddonsPage=!1,this.clearAll(),ExperimentLib.clear(),store.dispatch({type:clearUser.type}),store.dispatch({type:CLEAR_PROGRESS}),store.dispatch({type:CLEAR_DASH}),store.dispatch({type:SET_VOICEOVER_UI_STUFF,payload:{voiceOver:{isAvailable:!1,isPurchaseable:!1,isPlaying:!1}}}),store.dispatch({type:RESET_NAVIGATION})},async updateProgress(t){t=formatProgress$1(t),store.dispatch(updateProgress(t));const e=this.getCurrent();if(e){const n=e.progressList?.map(i=>i._id===t._id?t:i),s={...e,progressList:[...n]};return this.setCurrentWithProgress(s)}},getDisplayName(t){return(t.preferredName||t.nickname||t.firstName||t.lastName||t.accountType).replace(/\w\S*/g,n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase())},async setCourse(t,e){return userSetCourse(t,e).then(n=>this.setCurrentWithProgress(n))},async setDefaultProgress(t){return progressSetDefault(t).then(e=>this.setCurrentWithProgress(e))},courseNeedsNewProfileExperience(){const{aceRootScope:t}=window,e=store.getState(),{course:n}=e,s=t.courseCurrent??n;return s.screenList&&s.screenList.length},isInfoMissing(t,e,n){const{aceRootScope:s}=window,i=store.getState(),{course:a}=i,o=s.courseCurrent??a;return this.courseNeedsNewProfileExperience(o.key)?!1:t&&t.isPurchased&&t.accountType==="student"?this.isInfoMissingPrepurchase(t,e,n):!1},isInfoMissingPrepurchase(t,e,n){const{aceRootScope:s}=window;return!!(!e.firstName||!e.lastName||!e.birthDate||!e.gender||!e.addressStreet||!e.addressCity||!e.addressState||!e.addressPostal||!e.phone||!e.howFound||t.appType==="RE"&&!lodashExports.get(s,"courseCurrent.key","").includes("PL")&&!(t.licenseKey&&t.licenseExpireDate)||t.courseType==="PTDE"&&!e.highSchool||t.courseType==="DD"&&(!e.driversLicense||!t.reasonForAttendance||this.isCourtMissing(t,n)))},isCourtMissing(t,e){const{appType:n}=t;return t.courseType!=="DD"||n==="RE"||t.accountType!=="student"?!1:(t.reasonForAttendance==="Traffic Citation"||t.reasonForAttendance==="Ticket Dismissal"||t.reasonForAttendance===e)&&(!t.court||t.court===this.LISTDEF_COURT)}};window.aceUser=UserObj;const init$2=t=>{t.isProcessing=!1;const e=get$4("sync","isTaxonomy"),n=get$4("sync","isCx"),s=e??!0,i=n??!1;t&&(t.isTaxonomy=s,t.isCx=i)},initLoading=()=>window.aceRootScope.isProcessing?!1:(window.aceRootScope.isProcessing=!0,!0),clearLoading=()=>window.aceRootScope.isProcessing?(window.aceRootScope.isProcessing=!1,!0):!1,goHome=()=>{store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})},openLink$1=(t,e,n,s)=>{{let i,a,o;switch(t.key){case"VERIFICATION":store.dispatch(needsVerificationCheck({...e}));break;case"check.list":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"manager"}});break;case"course.purchase":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"activity.upgrade"}});break;case"course.resume":return window.aceRootScope.resumeCourse();case"journey.list":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"journey"}});break;case"switcher.courses":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"courseswitch.view"}});break;case"courseswitch.view":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"courseswitch.view"}});break;case"referral.view":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"rewards.share"}});break;case"remoteTest.view":MilestoneObj.checkMilestone(window.aceRootScope.progressCurrent._id,"EXAM").then(l=>{l.action==="PURCHASE"&&l.milestoneData.productList.length>0?store.dispatch({type:REDIRECT_TO_URL,payload:{url:"remotetest.purchase"}}):store.dispatch({type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}})});break;case"request.emailParent":return i=window.aceRootScope.progressCurrent,(!i.isPurchased||t.isShowModal)&&store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"emailParent",eventKey:t.data.embedId||t.data.campaignId,title:t.data.title,message:t.data.description,confirmText:t.data.buttonText}}}),!1;case"review.viewStar":a=get$4("review",["star",n,s].join("-")),a||store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"review.viewStar"}}});break;case"template.open":return openTemplate("template.open",{breakpoint:n,filter:s});case"review.viewNps":o=get$4("review",["nps",n,s].join("-")),o||store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"review.viewNps"}}});break;case"survey.viewEmbed":store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"survey.viewEmbed",embedId:lodashExports.get(e,"payload.linkObj.data.embedId","HWKXFCN"),linkUrl:lodashExports.get(e,"payload.linkObj.data.linkUrl","https://widget.surveymonkey.com/collect/website/js/jLZj7lA02r5W5n_2BDWfi45RaELYLH3nBm4qnGTYT_2Fg2V_2B2_2F2IarG_2Bg8QnK0WbwleW.js")}}});break;case"dashboard.view":return goHome();case"test.start":case"test.retake":store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.test",params:e}});break;case"page.view":return goHome();case"create.course":return store.dispatch({type:SET_IS_LOADING}),progressCourseRestart(window.aceRootScope.progressCurrent._id).then(l=>{UserObj.setCourse(window.aceRootScope.userCurrent._id,l.course._id).then(()=>{store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index",params:{location:"replace"},options:{reload:!0}}}),store.dispatch({type:SET_IS_NOT_LOADING})})}).catch(l=>{console.error(l),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),store.dispatch({type:SET_IS_NOT_LOADING})});default:return!1}}},routeMap=[{type:"PROFILE.PERSONAL",layoutStyle:"fullscreen",clientRoute:"profiler.formal-standard",baseUrl:"/profiler/page-like"},{type:"PROFILE.VERIFICATION",layoutStyle:"fullscreen",clientRoute:"verify.index",baseUrl:"/verify/index"},{type:"INFORMATION",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.informational",baseUrl:"/profiler/informational"},{type:"PROFILE.STUDENT_INFO",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"},{type:"PROFILE.STUDENT_INFO",groupName:"profiler",layoutStyle:"standard",clientRoute:"profiler.formal-standard",baseUrl:"/profiler/page-like"},{type:"PROFILE.STUDENT_VERIFICATION_SCREEN",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"},{type:"PROFILE.CONTRACTS_SCREEN",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"},{type:"PROFILE.DRIVING_SCHOOL",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.driving-school",baseUrl:"/profiler/driving-school"},{type:"PROFILE.CONFIRM_REASON",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"},{type:"PROFILE.DRIVER_INFORMATION",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"},{type:"PROFILE.VERIFY_PARENT",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"},{type:"PROFILE.VERIFY_AFFIDAVIT",groupName:"profiler",layoutStyle:"fullscreen",clientRoute:"profiler.formal",baseUrl:"/profiler/formal"}];let remainingBlockers=[];const getRouteByType=(t,e="fullscreen")=>lodashExports.find(routeMap,n=>n.type===t&&n.layoutStyle===e),hasDirectBlocker=(t,e)=>{const n=routeMap.find(a=>a.clientRoute===t&&a.layoutStyle===e)||{},{type:s}=n;return lodashExports.find(remainingBlockers,a=>a.type===s&&a.layoutStyle===e)},isRouteNext=t=>{const e=lodashExports.head(remainingBlockers)||{},n=getRouteByType(e.type,e.layoutStyle);return lodashExports.get(n,"clientRoute")===t},getBlockerId=t=>(remainingBlockers.find(n=>n.type===t)||{})._id,getType=t=>(routeMap.find(n=>n.clientRoute===t)||{}).type,getRoute=(t,e)=>{const n=lodashExports.head(remainingBlockers)||{},s=getRouteByType(n.type,e);return s&&s.clientRoute||t},hasBlocker=(t,e="fullscreen")=>t!==getRoute(t,e),getBlockersNoFX=(t,e,n)=>{let s=e;return e||(s=recallProfilerFrom()||"DASHBOARD"),checkForBlockers(t,null,null,s,n).then(i=>(clearLoading(),i),()=>!1)},redirectToBlocker=(t,e)=>{const n=e==="SIDEBAR"?"standard":"fullscreen";if(hasBlocker(t)){const s=getRoute(t,n),i=getRouteByType(getType(s),n);if(s){const a=window.aceRootScope?.stateIdAngularHack(window.encodeURIComponent(getType(s)),"encode");return store.dispatch({type:REDIRECT_TO_URL,payload:{url:s,params:{stateId:a,blockerId:getBlockerId(getType(s)),direction:-1,layoutStyle:i.layoutStyle||"fullscreen",callingFromPosition:e}}}),!0}}return!1},redirectToBlockerIfAny=(t,e,n,s="DASHBOARD")=>(memorizeProfilerFrom(s),checkForBlockers(t,e,n,s).then(i=>(remainingBlockers=lodashExports.get(i,"blockingActionList",[]),remainingBlockers.length>0&&memorizeBookmark({url:window.location.href}),redirectToBlocker(void 0,s))).catch(i=>{if(i&&String(i).includes("BIOSIG"))throw new Error(`BIOSIG error detected: ${i}`);return remainingBlockers=[],!1})),INITIALIZE_PURCHASE_COMPONENT="PURCHASE: Initialize Component ",DISMOUNT_PURCHASE_COMPONENT="PURCHASE: Dismount Component ",ADD_ITEM_TO_ORDER="PURCHASE: Add Item To Order ",REMOVE_ITEM_FROM_ORDER="PURCHASE: Remove Item From Order ",ADD_SHIPPING_TO_ORDER="PURCHASE: Add Shipping To Order ",REMOVE_SHIPPING_FROM_ORDER="PURCHASE: Remove Shipping From Order ",SUBMIT_PAYMENT_FORM="PURCHASE: Submit Payment Form ",GET_STRIPE_TOKEN_START="PURCHASE: Get Stripe Token Start ",GET_STRIPE_TOKEN_SUCCESS="PURCHASE: Get Stripe Token Success ",GET_STRIPE_TOKEN_FAILURE="PURCHASE: Get Stripe Token Failure ",SET_CREDIT_CARD_INFO="PURCHASE: Set Credit Card Info ",CLEAR_CREDIT_CARD_INFO="PURCHASE: Clear Credit Card ",CLEAR_STRIPE_TOKEN="PURCHASE: Clear Stripe Token ",SUBMIT_PAYMENT_REQUEST_START="PURCHASE: Submit Payment Request Start ",SUBMIT_PAYMENT_REQUEST_SUCCESS="PURCHASE: Submit Payment Request Success ",SUBMIT_PAYMENT_REQUEST_FAILURE="PURCHASE: Submit Payment Request Failure ",CLEAR_ORDER="PURCHASE: Clear Order ",UPDATE_SHIPPING_ADDRESS="PURCHASE: Update Shipping Address ",CLEAR_PAYMENT_ERRORS="PURCHASE: Clear Payment Errors ",SET_ENTERED_ADDRESS="PURCHASE: Set Entered Address ",SET_ADDRESS_VERIFICATION_ERROR="PURCHASE: Set has verification error ",CLEAR_ADDRESS_VERIFICATION_ERROR="PURCHASE: Clear address verification error ",SET_CONTINUE_LINK_URL="PURCHASE: Set Continue Link URL ",SET_PRODUCT_VARIANT_ID="SET_PRODUCT_VARIANT",CHECK_FOR_PERSISTENT_UPSELLS="PURCHASE: Check For Persistent Upsells ",SET_PERSISTENT_UPSELLS="PURCHASE: Set Persistent Upsells ",CHECK_FOR_PERSISTENT_UPSELLS_ERROR="PURCHASE: Check For Persistent Upsells Error ",CLEAR_ITEMS_FROM_ORDER="PURCHASE: Clear Items From Order ",addItemToOrder=t=>({type:ADD_ITEM_TO_ORDER,payload:t}),removeItemFromOrder=t=>({type:REMOVE_ITEM_FROM_ORDER,payload:{itemId:t}}),addShipping=t=>({type:ADD_SHIPPING_TO_ORDER,payload:{shipping:t}}),submitPaymentForm=()=>({type:SUBMIT_PAYMENT_FORM,payload:null}),getStripeTokenSuccess=t=>({type:GET_STRIPE_TOKEN_SUCCESS,payload:{token:t}}),getStripeTokenFailure=t=>({type:GET_STRIPE_TOKEN_FAILURE,payload:{error:t}}),setCreditCardInfo=t=>({type:SET_CREDIT_CARD_INFO,payload:{creditCardInfo:t}}),initPurchaseComponent=()=>({type:INITIALIZE_PURCHASE_COMPONENT,payload:null}),dismountPurchaseComponent=()=>({type:DISMOUNT_PURCHASE_COMPONENT,payload:null}),setEnteredAddress=t=>({type:SET_ENTERED_ADDRESS,payload:{address:t}}),setPersistentUpsells=t=>({type:SET_PERSISTENT_UPSELLS,payload:{upsells:t}}),setContinueLinkUrl=t=>({type:SET_CONTINUE_LINK_URL,payload:{url:t}}),check_milestone_start_epic=(t,e)=>t.pipe(ofType(CHECK_MILESTONE_START),mergeMap(n=>{const s=get$5(e,"value.progress._id",null),i=get$5(n,"payload","");return checkPurchaseAvailable(s,i).then(a=>({type:CHECK_MILESTONE_SUCCESS,payload:{milestone:a,from:i}})).catch(a=>({type:CHECK_MILESTONE_FAILURE,payload:{error:a}}))})),check_milestone_success_epic=(t,e)=>t.pipe(ofType(CHECK_MILESTONE_SUCCESS),mergeMap(n=>{const s=[],i=get$5(n,"payload.from",""),a=get$5(n,"payload.milestone.action",null);if(s.push({type:setMilestone.type,payload:n.payload.milestone}),a==="PURCHASE"){const o=get$5(n,"payload.milestone.milestoneData.productList",[]),l=o.filter(u=>get$5(u,"is.purchaseRequired",!1));i==="EXAM"?s.push({type:REDIRECT_TO_URL,payload:{url:"remotetest.purchase"}}):o.length>0&&o.length===l.length?(o.forEach(u=>{s.push({type:ADD_ITEM_TO_ORDER,payload:u})}),s.push({type:REDIRECT_TO_URL,payload:{url:"purchase.payment.flow",params:{flow:"timely"}}})):s.push({type:REDIRECT_TO_URL,payload:{url:"purchase"}})}else if(a==="TIMELY"){const o=e.value,l=get$5(n,"payload.milestone.milestoneData.productList",[]),u=get$5(n,"payload.milestone.milestoneData.timelyProductId",""),c=get$5(n,"payload.milestone.milestoneData.timelyVariantId",""),d=l.filter(m=>m._id===u),p=d.length?d[0]:null;p&&!p.is.purchased&&!get$5(o,"upsell.upsellsShown",[]).includes(c)&&(s.push({type:OPEN_UPSELL_MODAL,payload:{upsell:p}}),s.push({type:UPSELL_SHOWN,payload:{variantId:c,product:p,location:"TIMELY"}}))}else if(a==="PROFILER"){const o=get$5(n,"payload.milestone.blockingActionList",[]);if(o.length){const l=routeMap.find(u=>u.type===o[0].type);s.push({type:REDIRECT_TO_URL,payload:{url:l.clientRoute,params:{callingFromPosition:"DASHBOARD",layoutStyle:"fullscreen",stateId:window.aceRootScope.stateIdAngularHack(l.type),blockerId:o[0]._id}}})}}else a===""&&i==="EXAM"&&s.push({type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}});return s})),milestoneEpic=combineEpics(check_milestone_start_epic,check_milestone_success_epic),SUBMIT_PROFILER_CHECK_START="PURCHASE: Submit Profiler Check Start ",SUBMIT_PROFILER_CHECK_SUCCESS="PURCHASE: Submit Profiler Check Success ",SUBMIT_PROFILER_CHECK_FAILURE="PURCHASE: Submit Profiler Check Failure ",startProfileCheckEpic=t=>t.pipe(ofType(SUBMIT_PROFILER_CHECK_START),mergeMap(e=>checkForBlockers(get$5(window,"aceRootScope.progressCurrent._id",""),"","",e.payload.from).then(n=>({type:SUBMIT_PROFILER_CHECK_SUCCESS,payload:{blockingActionList:n.blockingActionList}}),n=>(console.error(n.message),{type:SUBMIT_PROFILER_CHECK_FAILURE})))),profilerCheckSuccessEpic=(t,e)=>t.pipe(ofType(SUBMIT_PROFILER_CHECK_SUCCESS),mergeMap(n=>{const s=[],i=get$5(n,"payload.blockingActionList",[]);if(i.length){const a=routeMap.find(u=>u.type===i[0].type),o=a.baseUrl||"/dash/index",l={callingFromPosition:"DASHBOARD",layoutStyle:"fullscreen",stateId:window.aceRootScope.stateIdAngularHack(a.type),blockerId:i[0]._id};s.push({type:SET_CONTINUE_LINK_URL,payload:{url:`${o}/${l.callingFromPosition}/${l.layoutStyle}/${l.stateId}/${l.blockerId}`}})}else getItemTypes(e.value).includes("RECORD")&&s.push({type:SET_CONTINUE_LINK_URL,payload:{url:"/purchase/driver-record"}});return s})),profilerEpic=combineEpics(startProfileCheckEpic,profilerCheckSuccessEpic),purchaseInitEpic=t=>t.pipe(ofType(INITIALIZE_PURCHASE_COMPONENT,DISMOUNT_PURCHASE_COMPONENT),mergeMap(()=>of({type:CLEAR_STRIPE_TOKEN},{type:CLEAR_CREDIT_CARD_INFO},{type:CLEAR_ORDER}))),submitPaymentFormEpic=(t,e)=>t.pipe(ofType(SUBMIT_PAYMENT_FORM),mergeMap(()=>isShipped(e.value)?e.value.purchase.enteredAddress.complete?of({type:VERIFY_ADDRESS_START,payload:{address:{addressStreet:e.value.purchase.enteredAddress.addressStreet,addressApt:e.value.purchase.enteredAddress.addressApt,addressCity:e.value.purchase.enteredAddress.addressCity,addressState:e.value.purchase.enteredAddress.addressState,addressPostal:e.value.purchase.enteredAddress.addressPostal}}}):of({type:VERIFY_ADDRESS_FAILURE}):e.value.purchase.order.creditCardInfo.complete?of({type:GET_STRIPE_TOKEN_START}):getTotalPrice(e.value)===0?of({type:SUBMIT_PAYMENT_REQUEST_START}):Observable.empty())),getStripeTokenSuccessEpic=t=>t.pipe(ofType(GET_STRIPE_TOKEN_SUCCESS),mapTo({type:SUBMIT_PAYMENT_REQUEST_START})),submitPaymentRequestStartEpic=(t,e)=>t.pipe(ofType(SUBMIT_PAYMENT_REQUEST_START),mergeMap(()=>submitPurchase({chargeAmount:getTotalPrice(e.value),milestoneKey:e.value.milestone.milestoneKey,productIdList:getProductIdList(e.value),progressId:ModelAbstract.getCurrent("progress")._id,token:getTotalPrice(e.value)?e.value.purchase.order.stripeToken.id:""}).then(n=>({type:SUBMIT_PAYMENT_REQUEST_SUCCESS,payload:{milestone:n}})).catch(n=>({type:SUBMIT_PAYMENT_REQUEST_FAILURE,payload:{error:n}})))),submitPaymentRequestSuccessEpic=t=>t.pipe(ofType(SUBMIT_PAYMENT_REQUEST_SUCCESS),mergeMap(e=>of({type:setMilestone.type,payload:e.payload.milestone},{type:REDIRECT_TO_URL,payload:{url:"purchase.confirmation"}},{type:SUBMIT_PROFILER_CHECK_START,payload:{from:"DASHBOARD"}},{type:FIND_PURCHASE_STATUS_START,payload:{productTypeList:["FEATURE"],productOptionList:["voiceOver"]}}))),submitPaymentRequestErrorEpic=t=>t.pipe(ofType(SUBMIT_PAYMENT_REQUEST_FAILURE),map$1(e=>({type:SHOW_MODAL,payload:{modal:{type:"error",title:"Payment Error",message:e.payload.error.message,confirmDispatch:[{type:CLEAR_STRIPE_TOKEN},{type:CLEAR_CREDIT_CARD_INFO}]}}}))),checkPersistentUpsellsEpic=t=>t.pipe(ofType(CHECK_FOR_PERSISTENT_UPSELLS),mergeMap(()=>{const e=get$5(window,"aceRootScope.progressCurrent._id",null);return e?checkPurchaseAvailable(e,"PERSISTENT").then(n=>{const s=get$5(n,"milestoneData.productList",[]);return{type:SET_PERSISTENT_UPSELLS,payload:{upsells:s}}}).catch(n=>(console.error(n),{type:CHECK_FOR_PERSISTENT_UPSELLS_ERROR})):empty()})),setPersistentUpsellsEpic=t=>t.pipe(ofType(SET_PERSISTENT_UPSELLS),mergeMap(e=>(window.aceRootScope.hasPersistentUpsells=e.payload.upsells.length>0,empty()))),purchaseEpic=combineEpics(purchaseInitEpic,submitPaymentFormEpic,getStripeTokenSuccessEpic,submitPaymentRequestStartEpic,submitPaymentRequestSuccessEpic,submitPaymentRequestErrorEpic,checkPersistentUpsellsEpic,setPersistentUpsellsEpic),GET_CACHED_REMOTE_TEST_PROGRESS="REMOTETEST: Get Cached Remotetest Progress ",GET_REMOTE_TEST_PROGRESS_SUCCESS="REMOTETEST: Success Get API Remotetest Progress ",GET_REMOTE_TEST_PROGRESS_FAIL="REMOTETEST: Fail Get API Remotetest Progress ",POST_START_REMOTE_TEST_PROGRESS="REMOTETEST: Start Remotetest Progress ",POST_START_REMOTE_TEST_PROGRESS_SUCCESS="REMOTETEST: Start Remotetest Progress Success ",POST_START_REMOTE_TEST_PROGRESS_FAIL="REMOTETEST: Start Remotetest Progress Success ",POST_GRADE_REMOTE_TEST_PROGRESS_QUESTION="REMOTETEST: Grade Remotetest Progress Question ",FAIL_REMOTE_TEST_PROGRESS="REMOTETEST: Fail Remotetest Progress ",GET_REMOTE_TEST_PROGRESS_QUESTION="REMOTETEST: Get Remotetest Progress Question ",defaultState$d={dynamicId:{type:"",value:""}},tempSlice=createSlice({name:"temp",initialState:defaultState$d,reducers:{setTemp:(t,e)=>{t.dynamicId=e.payload},resetTemp:()=>defaultState$d}}),{setTemp,resetTemp}=tempSlice.actions,temp=tempSlice.reducer,IDEMIA_SCREEN_MINUMUM_WIDTH=700;function getScreenSize(){return window.innerWidth>=IDEMIA_SCREEN_MINUMUM_WIDTH?"TABLET":"PHONE"}const startGetCachedRemotetestEpic=(t,e)=>t.pipe(ofType(GET_CACHED_REMOTE_TEST_PROGRESS),mergeMap(()=>{const{value:n}=e,{progress:s,remotetest:i}=n,a=s._id;return i.isActive?i.question?[{type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{remotetest:i}}]:[{type:GET_REMOTE_TEST_PROGRESS_QUESTION,payload:{progressId:a,testId:i._id}}]:[{type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}}]})),startStartRemotetestExamEpic=(t,e)=>t.pipe(ofType(POST_START_REMOTE_TEST_PROGRESS),concatMap(()=>{const{value:n}=e,{progress:s,temp:i}=n,a=s._id??"",{dynamicId:o}=i,l=o?.value??"";return progressRemoteTestStart(a,l,getScreenSize())}),mergeMap(n=>{const{value:s}=e,{progress:i}=s,a=i._id;if(ModelAbstract.setCurrent(n,`RemoteTest${a}`),n.vendor==="IDEMIA")return window.open(n.redirectUrl,"_blank"),[{type:resetTemp.type},{type:REDIRECT_TO_URL,payload:{url:"remotetest.continue"}},genericAnalyticsAndIterableEvent("Exam Created",{type:n.vendor}),{type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:n}},{type:POST_START_REMOTE_TEST_PROGRESS_SUCCESS}];const o=n._id;return[{type:resetTemp.type},{type:GET_REMOTE_TEST_PROGRESS_QUESTION,payload:{progressId:a,testId:o}},{type:REDIRECT_TO_URL,payload:{url:"remotetest.test"}},genericAnalyticsAndIterableEvent("Exam Created",{type:n.vendor??"STS"}),{type:POST_START_REMOTE_TEST_PROGRESS_SUCCESS}]}),catchError(n=>{const s=Number(n.cause),i=[];if(s===40416)i.push({type:REDIRECT_TO_URL,payload:{url:"remotetest.purchase"}},{type:SHOW_MODAL,payload:{modal:{title:"Wait!",message:"Before you begin, you need to purchase a new exam.",buttonText:"Continue"}}});else if(s===40403||s===40412||s===40408){const a=s===40408?"You must be older than 14 1/2 and younger than 18 years old to take the Knowledge Exam. Please review your birth date.":"Before you begin, you need to give us your student info and agree to the terms and conditions.";i.push({type:REDIRECT_TO_URL,payload:{url:"remotetest.contract"}},{type:SHOW_MODAL,payload:{modal:{title:"Wait!",message:a,buttonText:"Continue"}}})}else s===40419?i.push({type:SHOW_MODAL,payload:{modal:{message:n.message,title:"Ouch!",buttonText:"Continue",confirmDispatch:[{type:HIDE_MODAL}],dismissDispatch:[{type:HIDE_MODAL}]}}}):i.push({type:SHOW_MODAL,payload:{modal:{message:Number.isNaN(n.cause)?"Something went wrong":n.message,title:"Ouch!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}});return i.push({type:POST_START_REMOTE_TEST_PROGRESS_FAIL}),i})),startFailRemotetestEpic=(t,e)=>t.pipe(ofType(FAIL_REMOTE_TEST_PROGRESS),concatMap(n=>{const{payload:s}=n,{progressId:i,testId:a,reasonCode:o}=s;return progressRemoteTestFail(i,a,o)}),mergeMap(n=>{const{value:s}=e,{progress:i}=s,a=i._id;return ModelAbstract.setCurrent(n,`RemoteTest${a}`),[{type:REDIRECT_TO_URL,payload:{url:"remotetest.summary"}}]}),catchError(n=>[{type:SHOW_MODAL,payload:{modal:{message:n.message,title:"Ouch!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}])),startGettingQuestionEpic=(t,e)=>t.pipe(ofType(GET_REMOTE_TEST_PROGRESS_QUESTION),concatMap(n=>{const{payload:s}=n,{progressId:i,testId:a}=s;return progressRemoteTestGetQuestion(i,a)}),mergeMap(n=>{const{value:s}=e,{progress:i}=s,a=i._id;return ModelAbstract.setCurrent(n,`RemoteTest${a}`),n.isPassed||!n.isActive?[{type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:n}},{type:REDIRECT_TO_URL,payload:{url:"remotetest.summary"},options:{reload:!0}}]:[{type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:n}},{type:REDIRECT_TO_URL,payload:{url:"remotetest.test",params:{location:"replace"},options:{reload:!0}}}]}),catchError(n=>[{type:SHOW_MODAL,payload:{modal:{message:n.message,title:"Oops!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}])),startGradingQuestionEpic=(t,e)=>t.pipe(ofType(POST_GRADE_REMOTE_TEST_PROGRESS_QUESTION),concatMap(n=>{const{payload:s}=n,{progressId:i,testId:a,questionId:o,answerKey:l}=s;return progressRemoteTestGradeQuestion(i,a,o,l)}),mergeMap(n=>{const{value:s}=e,{progress:i}=s,a=i._id;return ModelAbstract.setCurrent(n,`RemoteTest${a}`),n.isPassed||!n.isActive?[{type:REDIRECT_TO_URL,payload:{url:"remotetest.summary",options:{reload:!0}}},{type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:n}}]:[{type:REDIRECT_TO_URL,payload:{url:"remotetest.test",params:{location:"replace"},options:{reload:!0}}},{type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:n}}]}),catchError(n=>[{type:SHOW_MODAL,payload:{modal:{message:n.message,title:"Oops!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}])),remotetest$1=combineEpics(startGetCachedRemotetestEpic,startStartRemotetestExamEpic,startFailRemotetestEpic,startGradingQuestionEpic,startGettingQuestionEpic),START_GET_SUBSCRIPTIONS="SUBSCRIPTIONS: Start Get Subscriptions ",GET_SUBSCRIPTIONS_SUCCESS="SUBSCRIPTIONS: Get Subscriptions Success! ",CONFIRM_CANCEL_SUBSCRIPTION="SUBSCRIPTIONS: Confirm cancel subscription ",START_CANCEL_SUBSCRIPTION_REQUEST="SUBSCRIPTIONS: Start cancel subscription ",CANCEL_SUBSCRIPTION_SUCCESS="SUBSCRIPTIONS: Cancel subscription success! ",startGetSubscriptionsEpic=(t,e)=>t.pipe(ofType(START_GET_SUBSCRIPTIONS),mergeMap(()=>{const n=get$5(e,"value.progress._id",""),s=get$5(e,"value.ui.brand","");return getSubscriptions(n,s).then(i=>i.isSuccess?{type:GET_SUBSCRIPTIONS_SUCCESS,payload:{response:i}}:{type:"DO_NOTHING",payload:{}}).catch(()=>({type:"DO_NOTHING",payload:{}}))})),confirmCancelSubscriptionEpic=t=>t.pipe(ofType(CONFIRM_CANCEL_SUBSCRIPTION),mergeMap(e=>{const n=[];return n.push({type:BUTTON_PRESSED,payload:{to:"rsa.confirmCancel"}},{type:START_CANCEL_SUBSCRIPTION_REQUEST,payload:e.payload}),n})),startCancelSubscriptionEpic=(t,e)=>t.pipe(ofType(START_CANCEL_SUBSCRIPTION_REQUEST),concatMap(n=>{const s=get$5(n,"payload.id",""),i=get$5(e,"value.progress._id",""),a=get$5(e,"value.ui.brand","");return s&&i&&a?cancelSubscription(s,i,a).then(o=>{if(!o.isSuccess){const l=o.errorList?o.errorList[0]:{buttonText:"Continue"};return l.buttonText="Continue",{type:REQUEST_ERROR,payload:{error:l}}}return{type:CANCEL_SUBSCRIPTION_SUCCESS,payload:{result:o}}}).catch(o=>{const l=o;return l.buttonText="Continue",{type:REQUEST_ERROR,payload:{error:l}}}):[{type:LOG_REQUEST,payload:{data:{message:"Value undefined in subscription cancel request",subscriptionId:s,progressId:i,brandId:a}}}]})),cancelSubscriptioSuccessEpic=t=>t.pipe(ofType(CANCEL_SUBSCRIPTION_SUCCESS),mergeMap(()=>[{type:HIDE_MODAL,payload:{index:0}},{type:REDIRECT_TO_URL,payload:{url:"dash.index"}},{type:SHOW_MODAL,payload:{modal:{type:"cancelSubscription",title:"Your membership is canceled.",message:"<span>Would you have stayed if we offered a 25% discount?</span>",isMessageCustomHtml:!0,buttonText:"Yes",confirmDispatch:[{type:BUTTON_PRESSED,payload:{to:"RSA_DiscountSurvey_Yes"}},{type:HIDE_MODAL,payload:{}}],secondaryDispatch:[{type:BUTTON_PRESSED,payload:{to:"RSA_DiscountSurvey_No"}},{type:HIDE_MODAL,payload:{}}],secondaryButtonText:"No",secondaryButtonVariant:"solid"}}}])),subscriptions$1=combineEpics(startGetSubscriptionsEpic,startCancelSubscriptionEpic,confirmCancelSubscriptionEpic,cancelSubscriptioSuccessEpic),continueFromReviewEpic=(t,e)=>t.pipe(ofType(CONTINUE_FROM_REVIEW),mergeMap(n=>{const s=[],i=get$5(e,"value.test",null),a=get$5(e,"value.courseflow",{});if(i.modeType==="STUDY")s.push({type:REDIRECT_TO_URL,payload:{url:"practicetests"}});else if(!i.is.passed)s.push({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});else if(n.payload.flow==="REVIEW"||n.payload.flow==="TEST"){const l=get$5(a,"nodeList",[]).find(m=>m.linkId===i.testId),u=get$5(i,"is.passed"),{testId:c,progressId:d}=n.payload,p=sessionStorage.getItem(`Advance_Cached_${c}_${d}`);u&&p?s.push({type:ADVANCE_SUCCESS,payload:{result:JSON.parse(p),testId:c}}):s.push({type:ADVANCE,payload:{isPassed:get$5(i,"is.passed"),currentNodeId:l._id}})}else s.push({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});return s})),continueFailedTestEpic=t=>t.pipe(ofType(CONTINUE_FAILED_TEST),mergeMap(()=>{const e=[];return e.push({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),e})),finishTestEpic=(t,e)=>t.pipe(ofType(FINISH_TEST),mergeMap(()=>{const n=[],s=get$5(e,"value.test",{}),i=get$5(e,"value.progress",{});return store$1.set(`Test${s.testId}_${i._id}`,s),VerifyObj.removeVerificationRecord(s._id),s.resultList&&s.resultList.length&&s.resultList.slice().forEach(a=>VerifyObj.removeVerificationRecord(a._id)),s.followupAction&&s.followupAction.action&&n.push({type:OPEN_LINK,payload:{linkObj:{type:"APP",key:s.followupAction.action,data:s.followupAction.data}}}),n})),testEpics=combineEpics(continueFromReviewEpic,continueFailedTestEpic,finishTestEpic),timerApplicationInitEpic=(t,e)=>t.pipe(ofType("ACE_INIT"),mergeMap(()=>(timer(1e3,1e3).subscribe(()=>{const s=get$5(e,"value.timers",[]);s.length&&s.reduce((a,o)=>o.state===timerStateEnum.running?!0:a,!1)&&store.dispatch(timerTick())}),[]))),timerStartEpic=(t,e)=>t.pipe(ofType(startTimer.type),mergeMap(n=>{const s=[],i=get$5(e,"value.timers",[]),a=get$5(n,"payload.id",null),o=i.find(l=>l.id===a);return o&&o.state===timerStateEnum.new&&s.push({type:runTimer.type,payload:{id:a}}),s})),timers=combineEpics(timerStartEpic,timerApplicationInitEpic);async function setList({progressId:t="XXX",set:e={},setCurrent:n}){const i=(await call("resource","GET",{progressId:t}))?.list??[],a={...e,[t]:i};return n({...e,[t]:i},"resourceSet"),a}const ResourceObj={...ModelAbstract,name:"resource",async getList({progressId:t}){const e=this.getCurrent("resourceSet")||{};return e[t]&&e[t].length?(setList({progressId:t,set:e,setCurrent:this.setCurrent}).catch(s=>{console.error("Error fetching resource list",s)}),e[t]):(await setList({progressId:t,set:e,setCurrent:this.setCurrent}))[t]}},navigationRef=reactExports.createRef();function navigate(t,e){navigationRef.current&&navigationRef.current(t,e)}const pathToState={activity:"/activity","activity.upgrade":"/activity/upgrade","activity.enroll":"/activity/enroll","activity.progress":"/activity/progress","activity.hijack":"/activity/hijack","activity.brand":"/activity/brand","activity.theme":"/activity/theme",addons:"/addons","audio-lessons":"/resource/audio-lessons","bookmark.view":"/bookmarks",casestudy:"/casestudy","casestudy.load":"/casestudy/load/:casestudyId/:pageId/:idxPointer/:nodeId",courseflow:"/courseflow","courseflow.index":"/courseflow/page/:nodeId","courseflow.question":"/courseflow/question/:nodeId","courseflow.complete":"/courseflow/complete/:nodeId","dash.index":"/dash/index",dashboard:"/dashboard","dashboard.parent":"/dashboard/parent","360Videos.view":"/videos","extras.videos":"/videos",flashcards:"/flashcards","flashcards.view":"/resource/flashcards",foaf:"/foaf","foaf.ready":"/foaf/ready/:bucketivityId/:nodeId/:pageId/:idxPointer","foaf.categorize":"/foaf/categorize/:bucketivityId/:nodeId/:bucketivityProgressId/:pageId/:idxPointer","foaf.results":"/foaf/results/:bucketivityId/:nodeId/:bucketivityProgressId/:pageId/:idxPointer","glossary.view":"/resource/glossary",manager:"/manager",practicetests:"/resource/practicetests",proctor:"/proctor","proctor.review-plus":"/proctor/review-plus","proctor.reset":"/proctor/reset/:progressId/:modeType/:pseudoId","proctor.signin":"/proctor/signin/:progressId/:modeType/:pseudoId",profiler:"/profiler","profiler.informational":"/profiler/informational/:callingFromPosition/:layoutStyle/:stateId/:blockerId","profiler.formal":"/profiler/formal/:callingFromPosition/:layoutStyle/:stateId/:blockerId","profiler.formal-standard":"/profiler/page-like/:callingFromPosition/:layoutStyle/:stateId/:blockerId","profiler.driving-school":"/profiler/driving-school/:callingFromPosition/:layoutStyle/:stateId/:blockerId","profiler.verifyPassword":"/profiler/verify-password","profiler.manageSubscription":"/profiler/manage-subscription/:id/:manage",purchase:"/purchase","purchase.payment":"/purchase/payment","purchase.payment.flow":"/purchase/payment/:flow/:productType","purchase.confirmation":"/purchase/confirmation","purchase.driverRecord":"/purchase/driver-record",remotetest:"/remotetest","remotetest.ready":"/remotetest/ready","remotetest.purchase":"/remotetest/purchase","remotetest.contract":"/remotetest/contract","remotetest.test":"/remotetest/test/:questionIdx","remotetest.continue":"/remotetest/continue","remotetest.summary":"/remotetest/summary",rewards:"/rewards","rewards.share":"/rewards/share",courseswitch:"/courseswitch","courseswitch.view":"/courseswitch/view",teacher:"/teacher","teacher.log":"/teacher/log/:studentId","teacher.tests":"/teacher/tests/:studentId",acetest:"/acetest","acetest.ready":"/acetest/ready/:progressId/:modeType/:pseudoId/:nodeId/:from/:isBacktrackAllowed","acetest.test":"/acetest/test/:progressId/:testId/:modeType/:pseudoId/question/:questionId/:nodeId/:tour","acetest.reviewTest":"/acetest/review/:testid/:mode/:flow","testList.view":"/test-list",user:"/user","user.signin":"/user/signin","user.signup":"/user/signup","user.parentSignup":"/user/parent-signup","user.password":"/user/password","user.reset":"/user/reset","user.changePassword":"/user/change-password","user.sync":"/user/sync","user.sso":"/user/sso","user.signout":"/user/signout","user.debug":"/user/debug",verify:"/verify","verify.index":"/verify/index","verify.affidavit":"/verify/affidavit","webinar.view":"/resource/webinar","tutoring.view":"/resource/tutoring","crashcourse.view":"/resource/crashcourses","renew.view":"/renewals","btw.view":"/affiliates/btw","otozen.view":"/affiliates/otozen","zebra.view":"/affiliates/zebra","testprep.view":"/affiliates/testprep"};function createPath(t,e){const n=pathToState[t];return e?n?n.includes(":")?Object.keys(e).reduce((s,i)=>s.replace(`:${i}`,e[i]),n):n:"/dash/index":n}const setIsLoadingEpic=t=>t.pipe(ofType(GET_STRIPE_TOKEN_START,VERIFY_ADDRESS_START,SUBMIT_PAYMENT_REQUEST_START,SUBMIT_DRIVER_RECORD_START,SEND_USER_UPDATE_REQUEST_START,SEND_PARENT_EMAIL_START,SEND_RESET_PASSWORD_START,GET_DASHBOARD_CARDS_START,TOGGLE_LICENSE_CHECKLIST_STEP,ADVANCE,BACKTRACK,START_COURSE,REVIEW,SUBMIT_ANSWER_START,SUBMIT_MULTI_ANSWER_START,START_CANCEL_SUBSCRIPTION_REQUEST,POST_START_REMOTE_TEST_PROGRESS,START_GET_SUBSCRIPTIONS,COURSE_SWITCH_START),mapTo({type:SET_IS_LOADING})),setIsNotLoadingEpic=t=>t.pipe(ofType(GET_STRIPE_TOKEN_FAILURE,VERIFY_ADDRESS_SUCCESS,VERIFY_ADDRESS_FAILURE,SUBMIT_PAYMENT_REQUEST_SUCCESS,SUBMIT_PAYMENT_REQUEST_FAILURE,SUBMIT_DRIVER_RECORD_SUCCESS,SUBMIT_DRIVER_RECORD_FAILURE,SEND_USER_UPDATE_REQUEST_SUCCESS,SEND_USER_UPDATE_REQUEST_FAILURE,SEND_PARENT_EMAIL_SUCCESS,SEND_PARENT_EMAIL_FAILURE,SEND_RESET_PASSWORD_SUCCESS,REQUEST_ERROR,GET_DASHBOARD_CARDS_SUCCESS,GET_DASHBOARD_CARDS_FAILURE,SET_CHECKLIST_STEPS,ADVANCE_SUCCESS,BACKTRACK_SUCCESS,START_COURSE_SUCCESS,REVIEW_SUCCESS,SUBMIT_ANSWER_SUCCESS,CANCEL_SUBSCRIPTION_SUCCESS,POST_START_REMOTE_TEST_PROGRESS_SUCCESS,POST_START_REMOTE_TEST_PROGRESS_FAIL,GET_REMOTE_TEST_PROGRESS_SUCCESS,GET_REMOTE_TEST_PROGRESS_FAIL,GET_SUBSCRIPTIONS_SUCCESS,COURSE_SWITCH_SUCCESS,COURSE_SWITCH_FAILURE),mapTo({type:SET_IS_NOT_LOADING})),navigateStateChangeEpic=(t,e)=>t.pipe(ofType(NAVIGATE_STATE_CHANGE),mergeMap(n=>{const s=get$5(e,"value.ui",{}),{activeState:i}=s,a=get$5(n,"payload.currentState",{});return[{type:SET_ACTIVE_STATE,payload:{state:a,previousState:i}}]})),redirectToUrlEpic=(t,e)=>t.pipe(ofType(REDIRECT_TO_URL),mergeMap(n=>{const s=get$5(e,"value.ui",{}),{activeState:i}=s,a=get$5(n,"payload.params",{}),o=get$5(n,"payload.url",""),l=createPath(o,a);let u=get$5(n,"payload.options",{});return u.windowReload&&o!==i&&(u={...u,windowReload:!1}),[{type:SET_ACTIVE_STATE,payload:{state:o,previousState:i}},{type:SET_URL_PARAMS,payload:{params:a}},{type:REDIRECT_TO_URL_SUCCESS,payload:{fullPath:l,options:u}}]})),redirectToUrlSuccessEpic=t=>t.pipe(ofType(REDIRECT_TO_URL_SUCCESS),mergeMap(e=>{const{fullPath:n,options:s}=e.payload;return s.windowReload&&navigate(0,s),navigate(n,s),[]})),startSendParentEmailEpic=(t,e)=>t.pipe(ofType(SEND_PARENT_EMAIL_START),mergeMap(n=>{const s=get$5(e,"value.progress._id",null);return progressSendPromoEmail(s,n.payload.eventKey,{email:n.payload.email}).then(i=>i.isSuccess?{type:SEND_PARENT_EMAIL_SUCCESS}:{type:SHOW_MODAL,payload:{modal:{type:"error",title:"Send email error",message:"Please try that again.",confirmText:"Try again",confirmDispatch:[{type:HIDE_MODAL,payload:{index:0}}]}}}).catch(i=>({type:SEND_PARENT_EMAIL_FAILURE,payload:{error:i,...n.payload}}))})),sentParentEmailSuccessEpic=t=>t.pipe(ofType(SEND_PARENT_EMAIL_SUCCESS),mergeMap(()=>[{type:HIDE_MODAL,payload:{index:0}},{type:SHOW_MODAL,payload:{modal:{title:"Your email has been sent!",buttonText:"ok",confirmDispatch:[{type:HIDE_MODAL,payload:{index:0}}]}}}])),sendParentEmailFailureEpic=t=>t.pipe(ofType(SEND_PARENT_EMAIL_FAILURE),mergeMap(e=>{const n=get$5(e,"payload.error",{});return[{type:HIDE_MODAL,payload:{index:0}},{type:SHOW_MODAL,payload:{modal:{type:"error",title:"Send email error",message:n.message||"Please try that again.",confirmText:"Try again",confirmDispatch:[{type:OPEN_LINK,payload:{linkObj:{key:"request.emailParent",type:"APP",...e.payload}}}]}}}]})),goBackEpic=t=>t.pipe(ofType(GO_BACK),mergeMap(()=>(window.history.back(),[]))),requestErrorEpic=t=>t.pipe(ofType(REQUEST_ERROR),mergeMap(e=>{const n=[],s=get$5(e,"payload.error",null),i=get$5(e,"payload.confirmDispatch",null),a=get$5(e,"payload.dismissDispatch",null);return s?n.push({type:SHOW_MODAL,payload:{modal:{type:"requestError",title:s.title||null,message:s.message,confirmDispatch:i?[i]:null,dismissDispatch:a?[a]:null,buttonText:s.buttonText||null}}}):console.error("No error supplied to REQUEST_ERROR epic."),n})),getResourceLinksStartEpic=t=>t.pipe(ofType(GET_RESOURCE_LINKS_START),mergeMap(e=>{const{progressId:n}=e.payload;return n?ResourceObj.getList({progressId:n}).then(s=>({type:GET_RESOURCE_LINKS_SUCCESS,payload:{resourceList:s}})).catch(s=>({type:GET_RESOURCE_LINKS_FAILURE,payload:{error:s}})):[]})),openUpsellModalEpic=t=>t.pipe(ofType(OPEN_UPSELL_MODAL),mergeMap(e=>{const n=[],s=get$5(e,"payload.upsell",null),i=get$5(window,"aceRootScope.progressCurrent.currentLevel");return s&&n.push({type:SHOW_MODAL,payload:{modal:{type:"upsell",headline:s.headline,title:s.title,price:s.price,confirmText:s.ctaUnpurchased,dismissText:s.ctaDismissal,description:s.learnMore,confirmDispatch:[{type:ADD_ITEM_TO_ORDER,payload:{...s}},{type:REDIRECT_TO_URL,payload:{url:"purchase.payment.flow",params:{flow:"timely"}}},{type:GENERIC_EVENT,payload:{event:"Upsell Clicked",props:{to:"BUY",from:"TIMELY",price:s.price,product_id:s._id,level_idx:i,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${i}._id`)}}}],dismissDispatch:[{type:GENERIC_EVENT,payload:{event:"Upsell Clicked",props:{to:"DISMISS",from:"TIMELY",price:s.price,product_id:s._id,level_idx:i,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${i}._id`)}}}]}}}),n})),audioIconClickedEpic=(t,e)=>t.pipe(ofType(CLICK_AUDIO_ICON),mergeMap(()=>{const n=[],s=get$5(e,"value.ui.voiceOver",{}),i=get$5(e,"value.upsell.voiceover",{}),a=get$5(e,"value.audio.state","");return n.push({type:SET_VOICEOVER_IS_NOT_BADGED}),s.isPurchaseable&&!isEmpty(i)?n.push({type:OPEN_UPSELL_MODAL,payload:{upsell:i,location:"HEADER"}}):!s.isPurchaseable&&s.isAvailable&&(a===audioStateEnum.playing||a===audioStateEnum.paused?n.push({type:setAudioStopped.type}):n.push(setAudioPlaying.type)),n})),setVoiceoverNotBadgedEpic=(t,e)=>t.pipe(ofType(SET_VOICEOVER_IS_NOT_BADGED),mergeMap(()=>{const n=get$5(e,"value.progress._id",null);return n&&localStorage.setItem(`hasSeenAudioUpsellBadge-${n}`,"1"),[]})),unauthorizedRequestErrorEpic=t=>t.pipe(ofType(UNAUTHORIZED_REQUEST_ERROR),mergeMap(e=>{const n=[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}];return window.aceRootScope&&window.aceRootScope.isProcessing&&(window.aceRootScope.isProcessing=!1),[{type:SET_IS_NOT_LOADING},{type:SHOW_MODAL,payload:{modal:{type:"requestError",message:e.payload.message||"We've lost track of your session. Please log back in.",title:"Request Error",buttonText:"Continue",confirmDispatch:n,dismissDispatch:n}}}]})),logRequestEpic=(t,e)=>t.pipe(ofType(LOG_REQUEST),mergeMap(n=>{const s=get$5(n,"payload",{}),i=get$5(e,"value",{}),a=get$5(i,"course",{}),o={...s.data,progressId:get$5(i,"progress._id",""),userId:get$5(i,"user._id",""),vertical:get$5(window,"aceRootScope.verticalType"),brandId:get$5(i,"ui.brand",""),courseId:a._id,courseSegment:a.type,courseState:a.state,courseKey:a.key,domain:window.location.hostname,url:window.location.href};return sendLog(s.level||"INFO",o,s.message||"",s.code||2e4).then(()=>({type:"DO_NOTHING"})).catch(l=>(console.error(l),{type:"DO_NOTHING"}))})),uiEpic=combineEpics(setIsLoadingEpic,setIsNotLoadingEpic,redirectToUrlEpic,startSendParentEmailEpic,sentParentEmailSuccessEpic,sendParentEmailFailureEpic,goBackEpic,requestErrorEpic,getResourceLinksStartEpic,openUpsellModalEpic,audioIconClickedEpic,setVoiceoverNotBadgedEpic,unauthorizedRequestErrorEpic,logRequestEpic,redirectToUrlSuccessEpic,navigateStateChangeEpic),clickBuyUpsellEpic=(t,e)=>t.pipe(ofType(CLICK_BUY_UPSELL),mergeMap(n=>{const s=[];let i=null;return n.payload.location==="PERSISTENT"?i=get$5(e,"value.purchase.persistentUpsellList",[]).find(o=>o.key===n.payload.productIndex):n.payload.location==="PRACTICE_TESTS"?i=get$5(e,"value.practiceTests.upsell.milestoneData.productList",[]).find(o=>o.key===n.payload.productIndex):n.payload.location==="RENEWAL"&&(i=get$5(e,"value.renewals",[]).find(o=>o.key===n.payload.productIndex)),i?(s.push({type:ADD_ITEM_TO_ORDER,payload:i}),s.push({type:REDIRECT_TO_URL,payload:{url:"purchase.payment.flow",params:n.payload.urlParams}})):console.error("Cannot find product in application state."),s})),findPurchaseStatusStartEpic=(t,e)=>t.pipe(ofType(FIND_PURCHASE_STATUS_START),mergeMap(n=>{const s=get$5(e,"value.progress._id");return getResourcePurchaseStatus(s,n.payload.productTypeList,n.payload.productOptionList).then(i=>i.feature.voiceOver?{type:VOICEOVER_PURCHASE_STATUS_CHECK_SUCCESS,payload:{result:i}}:{type:"DO_NOTHING"}).catch(i=>(console.error(i),{type:"DO_NOTHING"}))})),findVoiceoverPurchaseStatusSuccessEpic=t=>t.pipe(ofType(VOICEOVER_PURCHASE_STATUS_CHECK_SUCCESS),mergeMap(e=>{const n=[],s=get$5(e,"payload.result.feature.voiceOver",null),i=get$5(e,"payload.result.upsell.milestoneData.productList[0]",null);return s&&n.push({type:SET_VOICEOVER_UI_STUFF,payload:{voiceOver:s}}),i&&n.push({type:SET_AUDIO_UPSELL,payload:{upsell:i}}),n})),upsellEpic=combineEpics(clickBuyUpsellEpic,findPurchaseStatusStartEpic,findVoiceoverPurchaseStatusSuccessEpic),ShippingObj={...ModelAbstract,name:"shipping",async verify(t,e,n,s,i){return call("shipping/verify","GET",{street:t,apt:e,city:n,state:s,postal:i})}},submitDriverRecordEpic=(t,e)=>t.pipe(ofType(SUBMIT_DRIVER_RECORD_START),mergeMap(n=>window.aceUser.setProfile(e.value.user._id,n.payload.user).then(s=>({type:SUBMIT_DRIVER_RECORD_SUCCESS,payload:{user:s}})).catch(s=>({type:SUBMIT_DRIVER_RECORD_FAILURE,payload:{error:s}})))),submitDriverRecordSuccessEpic=t=>t.pipe(ofType(SUBMIT_DRIVER_RECORD_SUCCESS),mergeMap(e=>of({type:"user/updateUser",payload:e.payload.user},{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}))),submitDriverRecordFailureEpic=t=>t.pipe(ofType(SUBMIT_DRIVER_RECORD_FAILURE),mergeMap(e=>[{type:SHOW_MODAL,payload:{modal:{type:"error",title:"Error Saving Driver Record",message:e.payload.error.message,confirmText:"Ok"}}}])),upDateShippingAddressEpic=t=>t.pipe(ofType(UPDATE_SHIPPING_ADDRESS),mergeMap(e=>e.payload.address.complete?of({type:VERIFY_ADDRESS_START,payload:{address:e.payload.address}}):of({type:VERIFY_ADDRESS_FAILURE,payload:{address:e.payload.address}}))),verifyAddressStartEpic=t=>t.pipe(ofType(VERIFY_ADDRESS_START),mergeMap(e=>ShippingObj.verify(e.payload.address.addressStreet,e.payload.address.addressApt,e.payload.address.addressCity,e.payload.address.addressState,e.payload.address.addressPostal).then(n=>n.isValid?{type:VERIFY_ADDRESS_SUCCESS,payload:{address:n.address}}:{type:VERIFY_ADDRESS_FAILURE,payload:{result:n,error:null}}).catch(n=>({type:VERIFY_ADDRESS_FAILURE,payload:{result:null,error:n}})))),verifyAddressSuccessEpic=(t,e)=>t.pipe(ofType(VERIFY_ADDRESS_SUCCESS),mergeMap(n=>{const s={payload:{id:e.value.user._id,userData:{shippingStreet:n.payload.address.street,shippingApt:n.payload.address.apt,shippingCity:n.payload.address.city,shippingState:n.payload.address.state,shippingPostal:n.payload.address.postal}}};return e.value.purchase.order.creditCardInfo.complete&&getTotalPrice(e.value)>0?window.aceUser.setProfile(s.payload.id,s.payload.userData).then(i=>(store.dispatch({type:GET_STRIPE_TOKEN_START}),{type:updateUser.type,payload:i})).catch(()=>({type:SUBMIT_PAYMENT_REQUEST_FAILURE})):getTotalPrice(e.value)===0?Promise.all([window.aceUser.setProfile(s.payload.id,s.payload.userData),submitPurchase({chargeAmount:getTotalPrice(e.value),milestoneKey:e.value.milestone.milestoneKey,productIdList:getProductIdList(e.value),progressId:ModelAbstract.getCurrent("progress")._id,token:getTotalPrice(e.value)?e.value.purchase.order.stripeToken.id:""})]).then(i=>(store.dispatch({type:updateUser.type,payload:i[0]}),{type:SUBMIT_PAYMENT_REQUEST_SUCCESS,payload:{milestone:i[1]}})).catch(()=>({type:SUBMIT_PAYMENT_REQUEST_FAILURE})):{type:SUBMIT_PAYMENT_REQUEST_FAILURE}})),verifyAddressFailureEpic=(t,e)=>t.pipe(ofType(VERIFY_ADDRESS_FAILURE),map$1(()=>{const{enteredAddress:n}=e.value.purchase;return{type:SHOW_MODAL,payload:{modal:{type:"addressVerification",title:"We couldnt verify the address you entered",extraInfoLabel:"You entered",confirmText:"Edit my address",dismissText:"I'm certain this address is correct",dismissDispatch:[{type:VERIFY_ADDRESS_SUCCESS,payload:{address:{street:n.addressStreet,apt:n.addressApt,city:n.addressCity,state:n.addressState,postal:n.addressPostal}}}]}}}})),sendUserUpdateRequestStartEpic=t=>t.pipe(ofType(SEND_USER_UPDATE_REQUEST_START),concatMap(e=>window.aceUser.setProfile(e.payload.id,e.payload.userData)),mergeMap(e=>of({type:SEND_USER_UPDATE_REQUEST_SUCCESS},{type:updateUser.type,payload:e})),catchError(e=>of({type:SEND_USER_UPDATE_REQUEST_FAILURE,payload:e}))),sendEmailResetStartEpic=(t,e)=>t.pipe(ofType(SEND_RESET_PASSWORD_START),mergeMap(n=>{const s=get$5(e,"value.user.username",null),i=get$5(n,"payload.token",null);return s?userRequestPassword(s,i).then(a=>a.isSuccess?{type:SEND_USER_UPDATE_REQUEST_SUCCESS}:{type:SEND_USER_UPDATE_REQUEST_FAILURE,payload:{error:a}}).catch(a=>({type:SEND_USER_UPDATE_REQUEST_FAILURE,payload:{error:a}})):[{type:SEND_USER_UPDATE_REQUEST_FAILURE,payload:{error:{message:"Cannot find email address in user account info.",buttonText:"Continue"}}}]})),sendEmailResetSuccessEpic=t=>t.pipe(ofType(SEND_USER_UPDATE_REQUEST_SUCCESS),mapTo({type:SHOW_MODAL,payload:{modal:{title:"Success!",message:"Check your email for a link to reset your password. If its not in your inbox, try checking your spam or junk folders.",buttonText:"Continue",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}})),sendEmailResetFailureEpic=t=>t.pipe(ofType(SEND_USER_UPDATE_REQUEST_FAILURE),mergeMap(e=>{const n=[],s=get$5(e,"payload.error",null);return n.push({type:REQUEST_ERROR,payload:{error:s,confirmDispatch:e.payload.tryAgain||{type:SEND_RESET_PASSWORD_START}}}),n})),logoutUserEpic=t=>t.pipe(ofType(logoutUser.type),mergeMap(()=>(window.aceUser&&window.aceUser.signOut&&window.aceUser.signOut(),[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}]))),loginSuccessEpic=t=>t.pipe(ofType(USER_LOGIN_SUCCESS),mergeMap(e=>{const n=[],s=get$5(e,"payload.user",{});return s.defCourseId&&n.push({type:COURSE_GET_START,payload:{courseId:s.defCourseId,loadVerification:s?.progressList?.length===1}}),n})),userEpic=combineEpics(submitDriverRecordEpic,submitDriverRecordSuccessEpic,upDateShippingAddressEpic,verifyAddressStartEpic,verifyAddressSuccessEpic,sendUserUpdateRequestStartEpic,verifyAddressFailureEpic,submitDriverRecordFailureEpic,sendEmailResetStartEpic,sendEmailResetSuccessEpic,sendEmailResetFailureEpic,logoutUserEpic,loginSuccessEpic),defaultState$c={messages:{},virtualInstructorStatus:{hasStudentAskedViQuestion:!1,proTipList:[],isInstructorGlobalEnabled:!0,instructorSupportUrl:""}},virtualInstructorSlice=createSlice({name:"virtualInstructor",initialState:defaultState$c,reducers:{setVirtualInstructorMessage:(t,e)=>{t.messages[e.payload.pageId]=e.payload.messages},clearVirtualInstructorMessages:t=>{t.messages={}},setVirtualInstructorStatus:(t,e)=>{t.virtualInstructorStatus=e.payload.virtualInstructorStatus},setHasStudentAskedVIQuestion:(t,e)=>{t.virtualInstructorStatus.hasStudentAskedViQuestion=e.payload.hasStudentAskedViQuestion},setIsVirtualInstructorGlobalEnabled:(t,e)=>{t.virtualInstructorStatus.isInstructorGlobalEnabled=e.payload.isInstructorGlobalEnabled}},selectors:{selectVirtualInstructorState:t=>t}}),{setHasStudentAskedVIQuestion,setIsVirtualInstructorGlobalEnabled,setVirtualInstructorMessage,setVirtualInstructorStatus,clearVirtualInstructorMessages}=virtualInstructorSlice.actions,{selectVirtualInstructorState}=virtualInstructorSlice.selectors,virtualInstructor=virtualInstructorSlice.reducer,setVirtualInstructorEpic=(t,e)=>t.pipe(ofType(START_COURSE,REVIEW),exhaustMap(()=>{const n=get$5(e,"value.progress._id");return instructorStatus(n).then(s=>({type:setVirtualInstructorStatus.type,payload:{virtualInstructorStatus:s}})).catch(s=>{console.error("Error setting virtual instructor status",s)})})),virtualInstructorEpic=combineEpics(setVirtualInstructorEpic),rootEpic=combineEpics(affiliate$1,subscriptions$1,timers,purchaseEpic,milestoneEpic,uiEpic,userEpic,analyticsEpic,profilerEpic,upsellEpic,iterableEpic,linkEpic,courseEpic,testEpics,dashboardEpics,courseflowEpic,remotetest$1,virtualInstructorEpic);var isNil_1,hasRequiredIsNil;function requireIsNil(){if(hasRequiredIsNil)return isNil_1;hasRequiredIsNil=1;function t(e){return e==null}return isNil_1=t,isNil_1}var isNilExports=requireIsNil();const isNil=getDefaultExportFromCjs(isNilExports),initialState$4={buttonsList:[],requestSource:"COURSE_LIST"},affiliate=(t=getInitialState$1("affiliate",initialState$4),e={type:"",payload:void 0})=>{switch(e.type){case GET_AFFILIATE_DATA_SUCCESS:return isNil(e.payload.response.buttonsList)?t:{buttonsList:e.payload.response.buttonsList,requestSource:e.payload.requestSource};case GET_AFFILIATE_DATA_FAILURE:return{buttonsList:[],requestSource:e.payload.requestSource};case"user/logoutUser":return initialState$4;default:return t}},defaultState$b={chapterCacheKey:"",chapterId:"",currentNodeId:"",isActive:!1,nodeList:[],forwardDisabled:!1,forwardLabel:"",choice:null,multiChoice:null,reorderSubmit:null,isVideoEnded:!1,readyToMoveOn:!1,chapterTimeLeft:"",prevChapterCompletePercent:0,chapterCompletePercent:0},courseflow=(t=getInitialState$1("courseflow",defaultState$b),e)=>{let n;switch(e.type){case ADD_NODE_TO_LIST:if(isEmpty(e.payload.node))return t;n=t.nodeList.slice();const s=n.findIndex(i=>i._id===e.payload.node._id);return s!==-1?n.splice(s,1,e.payload.node):n.unshift(e.payload.node),{...t,nodeList:n};case SET_ATTRIBUTES:return{...t,...e.payload.attributes};case SET_CURRENT_NODE:return{...t,currentNodeId:e.payload.nodeId};case SET_ADVANCE_NO_ACTION_LOADING_STATE:return{...t,readyToMoveOn:e.payload.disable};case UPDATE_BOOKMARK_NODE:return{...t,nodeList:t.nodeList.map(i=>i._id===e.payload.nodeId?{...i,isBookmarked:e.payload.isBookmarked}:i)};case CLEAR_COURSEFLOW:return{...defaultState$b};case SUBMIT_ANSWER_SUCCESS:{const i=get$5(e,"payload.results",null),a=i?.isSingleChoice;if(i){const o={...i};a?o.isCorrect=i.answerKey===i.correctKey:o.isCorrect=i.answerList.every(u=>u.isCorrect===u.isSelected);const l=t.nodeList.map(u=>{if(u._id===e.payload.nodeId){const c=u.data.answerList,d=[],p=[...o.answerList];return c.forEach(m=>{const g=p.findIndex(E=>E.key===m.key);g!==-1&&(d.push(p[g]),p.splice(g,1))}),o.answerList=d,{...u,data:o}}return u});return{...t,nodeList:l}}return t}case"user/logoutUser":return defaultState$b;case SET_NAVIGATION:return{...t,...e.payload};default:return t}},defaultState$a={metadataOdyssey:{},levelDataOdyssey:[],summaryOdyssey:[],currentLevelIdx:0,sidenavStatus:"open"},dashboard=(t=getInitialState$1("dashboard",defaultState$a),e={})=>{switch(e.type){case SET_DASHBOARD_CARDS:{if(isNil(e.payload.odysseyResults)||isNil(e.payload.odysseyResults.levelPathList)||isNil(e.payload.odysseyResults.metadata))return t;let n=e.payload.odysseyResults.levelPathList.findIndex(a=>a.data.isCurrent===!0),s="",i=t.metadataOdyssey.progressCompletePercent??0;return(n==null||n===-1||s==="SCHEDULE")&&(n=0),t.metadataOdyssey.courseId!==e.payload.odysseyResults.metadata.courseId&&(s=e.payload.odysseyResults.levelPathList[n]?.type,i=e.payload.odysseyResults.metadata.progressCompletePercent??0),{...t,metadataOdyssey:{previousProgressCompletePercent:i,...e.payload.odysseyResults.metadata},levelDataOdyssey:e.payload.odysseyResults.levelPathList,summaryOdyssey:e.payload.odysseyResults.summary,currentLevelIdx:n}}case SET_CURRENT_LEVEL_IDX:return isNil(e.payload.currentLevelIdx)?t:{...t,currentLevelIdx:e.payload.currentLevelIdx};case SET_CHECKLIST_STEPS:{const n=t.levelDataOdyssey.map(s=>{const i=s;return i.type==="JOURNEY"&&(i.data.stepList=i.data.stepList.map(a=>e.payload.stepList.find(o=>o._id===a._id))),i.type==="CHECK"&&(i.data.cardData.stepList=i.data?.cardData?.stepList?.map(a=>e.payload.stepList.find(o=>o._id===a._id))),i});return{...t,levelDataOdyssey:n}}case SET_SIDENAV_OPEN:return{...t,sidenavStatus:"open"};case SET_SIDENAV_CLOSE:return{...t,sidenavStatus:"closed"};case GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_SUCCESS:{const n=t.levelDataOdyssey.map(s=>s.data._id===e.payload.cardID?{...s,data:{...s.data,cardData:e?.payload?.journeyCardData}}:s);return{...t,levelDataOdyssey:n,currentLevelIdx:e?.payload?.currentLevelIdx}}case CLEAR_DASH:return defaultState$a;default:return t}},OPEN_DIALOG="DIALOG: Open ",defaultState$9={isVisible:!1,screenList:[],type:"",currentScreenIndex:0},dialog$1=(t=getInitialState$1("dialog",defaultState$9),e)=>{switch(e.type){case OPEN_DIALOG:return{...t,screenList:e.payload.screenList,isVisible:!0,type:e.payload.type};default:return t}},defaultState$8={showChangePasswordInProfile:!0,showPracticeTestsInResources:!0,showTermsConditionsInProfile:!0,showUpgradesAddonsInProfile:!0,showRewardsNav:!0},featureFlagsSlice=createSlice({name:"featureFlags",initialState:defaultState$8,reducers:{setFeatureFlagsByBrand:(t,e)=>{e.payload.brandId==="FLVS"&&(t.showChangePasswordInProfile=!1,t.showPracticeTestsInResources=!1,t.showTermsConditionsInProfile=!1,t.showUpgradesAddonsInProfile=!1)}}}),{setFeatureFlagsByBrand}=featureFlagsSlice.actions,featureFlags=featureFlagsSlice.reducer,defaultState$7={},progress$1=(t=getInitialState$1("progress",defaultState$7),e)=>{switch(e.type){case SET_PROGRESS:return isNil(e.payload.progress)?t:{...e.payload.progress};case UPDATE_PROGRESS:return isNil(e.payload.progress)?t:{...t,...e.payload.progress};case CLEAR_PROGRESS:return{...defaultState$7};default:return t}};var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return _setCacheAdd=e,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function t(e){return this.__data__.has(e)}return _setCacheHas=t,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var t=require_MapCache(),e=require_setCacheAdd(),n=require_setCacheHas();function s(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return s.prototype.add=s.prototype.push=e,s.prototype.has=n,_SetCache=s,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function t(e,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(e[s],s,e))return!0;return!1}return _arraySome=t,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function t(e,n){return e.has(n)}return _cacheHas=t,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var t=require_SetCache(),e=require_arraySome(),n=require_cacheHas(),s=1,i=2;function a(o,l,u,c,d,p){var m=u&s,g=o.length,E=l.length;if(g!=E&&!(m&&E>g))return!1;var x=p.get(o),b=p.get(l);if(x&&b)return x==l&&b==o;var S=-1,C=!0,T=u&i?new t:void 0;for(p.set(o,l),p.set(l,o);++S<g;){var I=o[S],D=l[S];if(c)var P=m?c(D,I,S,l,o,p):c(I,D,S,o,l,p);if(P!==void 0){if(P)continue;C=!1;break}if(T){if(!e(l,function(O,B){if(!n(T,B)&&(I===O||d(I,O,u,c,p)))return T.push(B)})){C=!1;break}}else if(!(I===D||d(I,D,u,c,p))){C=!1;break}}return p.delete(o),p.delete(l),C}return _equalArrays=a,_equalArrays}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function t(e){var n=-1,s=Array(e.size);return e.forEach(function(i,a){s[++n]=[a,i]}),s}return _mapToArray=t,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function t(e){var n=-1,s=Array(e.size);return e.forEach(function(i){s[++n]=i}),s}return _setToArray=t,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var t=require_Symbol(),e=require_Uint8Array(),n=requireEq(),s=require_equalArrays(),i=require_mapToArray(),a=require_setToArray(),o=1,l=2,u="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Map]",m="[object Number]",g="[object RegExp]",E="[object Set]",x="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",C="[object DataView]",T=t?t.prototype:void 0,I=T?T.valueOf:void 0;function D(P,O,B,F,H,Q,Z){switch(B){case C:if(P.byteLength!=O.byteLength||P.byteOffset!=O.byteOffset)return!1;P=P.buffer,O=O.buffer;case S:return!(P.byteLength!=O.byteLength||!Q(new e(P),new e(O)));case u:case c:case m:return n(+P,+O);case d:return P.name==O.name&&P.message==O.message;case g:case x:return P==O+"";case p:var ne=i;case E:var re=F&o;if(ne||(ne=a),P.size!=O.size&&!re)return!1;var se=Z.get(P);if(se)return se==O;F|=l,Z.set(P,O);var G=s(ne(P),ne(O),F,H,Q,Z);return Z.delete(P),G;case b:if(I)return I.call(P)==I.call(O)}return!1}return _equalByTag=D,_equalByTag}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var t=require_getAllKeys(),e=1,n=Object.prototype,s=n.hasOwnProperty;function i(a,o,l,u,c,d){var p=l&e,m=t(a),g=m.length,E=t(o),x=E.length;if(g!=x&&!p)return!1;for(var b=g;b--;){var S=m[b];if(!(p?S in o:s.call(o,S)))return!1}var C=d.get(a),T=d.get(o);if(C&&T)return C==o&&T==a;var I=!0;d.set(a,o),d.set(o,a);for(var D=p;++b<g;){S=m[b];var P=a[S],O=o[S];if(u)var B=p?u(O,P,S,o,a,d):u(P,O,S,a,o,d);if(!(B===void 0?P===O||c(P,O,l,u,d):B)){I=!1;break}D||(D=S=="constructor")}if(I&&!D){var F=a.constructor,H=o.constructor;F!=H&&"constructor"in a&&"constructor"in o&&!(typeof F=="function"&&F instanceof F&&typeof H=="function"&&H instanceof H)&&(I=!1)}return d.delete(a),d.delete(o),I}return _equalObjects=i,_equalObjects}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var t=require_Stack(),e=require_equalArrays(),n=require_equalByTag(),s=require_equalObjects(),i=require_getTag(),a=requireIsArray(),o=requireIsBuffer(),l=requireIsTypedArray(),u=1,c="[object Arguments]",d="[object Array]",p="[object Object]",m=Object.prototype,g=m.hasOwnProperty;function E(x,b,S,C,T,I){var D=a(x),P=a(b),O=D?d:i(x),B=P?d:i(b);O=O==c?p:O,B=B==c?p:B;var F=O==p,H=B==p,Q=O==B;if(Q&&o(x)){if(!o(b))return!1;D=!0,F=!1}if(Q&&!F)return I||(I=new t),D||l(x)?e(x,b,S,C,T,I):n(x,b,O,S,C,T,I);if(!(S&u)){var Z=F&&g.call(x,"__wrapped__"),ne=H&&g.call(b,"__wrapped__");if(Z||ne){var re=Z?x.value():x,se=ne?b.value():b;return I||(I=new t),T(re,se,S,C,I)}}return Q?(I||(I=new t),s(x,b,S,C,T,I)):!1}return _baseIsEqualDeep=E,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var t=require_baseIsEqualDeep(),e=requireIsObjectLike();function n(s,i,a,o,l){return s===i?!0:s==null||i==null||!e(s)&&!e(i)?s!==s&&i!==i:t(s,i,a,o,n,l)}return _baseIsEqual=n,_baseIsEqual}var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;var t=require_baseIsEqual();function e(n,s){return t(n,s)}return isEqual_1=e,isEqual_1}var isEqualExports=requireIsEqual();const isEqual$1=getDefaultExportFromCjs(isEqualExports),defaultState$6={requestStripeToken:!1,errors:[],shippingAddress:{},isAddressVerified:!1,hasCreditCardRequestError:!1,hasAddressVerificationError:!1,displayedProductVariantKey:"",continueLinkUrl:"/dash/index",persistentUpsellList:[],enteredAddress:{addressStreet:"",addressApt:"",addressCity:"",addressState:"",addressPostal:"",complete:!1},driverRecordInfo:{birthDate:"",ssnLast:"",driversLicense:"",driversAudit:"",formValid:!1},order:{creditCardInfo:{},items:[],shipping:{},stripeToken:{}}},purchase=(t=getInitialState$1("purchase",defaultState$6),e)=>{let n=!1;switch(e.type){case ADD_ITEM_TO_ORDER:return isNil(e.payload)?{...t}:(t.order.items.forEach(s=>{s._id===e.payload._id&&(n=!0)}),n?{...t}:{...t,order:{...t.order,items:[...t.order.items,e.payload]}});case REMOVE_ITEM_FROM_ORDER:return e.payload?{...t,order:{...t.order,items:t.order.items.filter(s=>s._id!==e.payload.itemId)}}:{...t};case ADD_SHIPPING_TO_ORDER:return e.payload.shipping?{...t,order:{...t.order,shipping:{...e.payload.shipping}}}:{...t};case REMOVE_SHIPPING_FROM_ORDER:return{...t,order:{...t.order,shipping:{}}};case SET_CREDIT_CARD_INFO:return!e.payload||!e.payload.creditCardInfo?{...t}:{...t,hasCreditCardRequestError:!1,order:{...t.order,creditCardInfo:{...e.payload.creditCardInfo}}};case CLEAR_CREDIT_CARD_INFO:return{...t,order:{...t.order,creditCardInfo:{}}};case GET_STRIPE_TOKEN_START:return{...t,requestStripeToken:!0};case GET_STRIPE_TOKEN_SUCCESS:return e.payload.token?{...t,requestStripeToken:!1,order:{...t.order,stripeToken:{...e.payload.token}}}:{...t,requestStripeToken:!1};case GET_STRIPE_TOKEN_FAILURE:return{...t,requestStripeToken:!1,hasCreditCardRequestError:!0};case CLEAR_STRIPE_TOKEN:return{...t,requestStripeToken:!1,order:{...t.order,stripeToken:{}}};case SUBMIT_PAYMENT_REQUEST_FAILURE:return{...t,hasCreditCardRequestError:!0};case CLEAR_ORDER:return defaultState$6;case VERIFY_ADDRESS_SUCCESS:return{...t,isAddressVerified:!0};case VERIFY_ADDRESS_FAILURE:return{...t,isAddressVerified:!1,hasAddressVerificationError:!0};case CLEAR_PAYMENT_ERRORS:return{...t,hasCreditCardRequestError:!1};case SET_ENTERED_ADDRESS:return!e.payload||!e.payload.address||isEqual$1({},e.payload)||isEqual$1({},e.payload.address)?{...t}:{...t,hasAddressVerificationError:!1,enteredAddress:{...e.payload.address}};case SET_ADDRESS_VERIFICATION_ERROR:return{...t,hasAddressVerificationError:!0};case CLEAR_ADDRESS_VERIFICATION_ERROR:return{...t,hasAddressVerificationError:!1};case SET_PRODUCT_VARIANT_ID:return{...t,displayedProductVariantKey:e.payload.variantKey};case SET_CONTINUE_LINK_URL:return e.payload.url?{...t,continueLinkUrl:e.payload.url}:{...t};case SET_PERSISTENT_UPSELLS:return e.payload.upsells?{...t,persistentUpsellList:[...e.payload.upsells]}:{...t};case CLEAR_ITEMS_FROM_ORDER:return{...t,order:{...t.order,items:[],shipping:{}}};default:return t}},defaultState$5=void 0,remotetest=(t=getInitialState$1("remotetest",defaultState$5),e)=>{switch(e.type){case GET_REMOTE_TEST_PROGRESS_SUCCESS:return isNil(e.payload.test)?{...t,isLoading:!1}:{...e.payload.test,isLoading:!1};case GET_REMOTE_TEST_PROGRESS_FAIL:return{...t,failMessage:e.payload.error,isLoading:!1};case FAIL_REMOTE_TEST_PROGRESS:return{...t,isActive:!1};default:return t}},defaultState$4=[],subscriptions=(t=getInitialState$1("subscriptions",defaultState$4),e)=>{switch(e.type){case GET_SUBSCRIPTIONS_SUCCESS:if(get$5(e,"payload.response.subscriptionList")){const{billingInfoUrl:n}=e.payload.response,{subscriptionList:s}=e.payload.response;return s.map(i=>({...i,billingInfoUrl:n}))}return t;case CANCEL_SUBSCRIPTION_SUCCESS:if(get$5(e,"payload.result.subscription")){const n=e.payload.result.subscription;return t.map(s=>s._id===n._id?{...s,...n}:s)}return t;case"user/logoutUser":return defaultState$4;default:return t}},defaultState$3={},test$1=(t=getInitialState$1("test",defaultState$3),e)=>{switch(e.type){case TEST_SET:return isNil(e.payload.test)?t:e.payload.test;case CLEAR_TEST:return defaultState$3;default:return t}},defaultState$2={brand:lodashExports.get(window,"aceRootScope.domainConf.brandId",""),isLoading:!1,isPasswordVerified:!1,isSigninVerified:!1,modals:[],statusMessageList:[],currentStatusMessage:0,activeState:"",previousState:"",urlParams:{},branding:{logo:lodashExports.get(window,"aceRootScope.domainConf.Logo",null),titleLong:lodashExports.get(window,"aceRootScope.domainConf.TitleLong",""),titleShort:lodashExports.get(window,"aceRootScope.domainConf.TitleShort","")},domainConf:{},voiceOver:{isAvailable:!1,isPurchaseable:!1,isBadged:!1,isPlaying:!1},header:{navigationList:[{title:"Home",key:"dash.index",type:"APP",data:{icon:"home",id:"nav-home",children:[]}},{title:"Help",key:"help",type:"APP",data:{icon:"help",id:"nav-help",children:[]}},{title:"Resources",key:"resources",type:"APP",data:{icon:"resources",id:"nav-resources",children:[]}},{title:"Records",key:"certificate.viewList",type:"APP",data:{icon:"records-new",id:"nav-certificates",children:[]}},{title:"Rewards",key:"rewards.share",type:"APP",data:{id:"nav-rewards",children:[]}},{title:"Profile",key:"profile",type:"APP",data:{icon:"profile",id:"nav-profile",children:[{title:"Manage Subscription",key:"profiler.manageSubscription",type:"APP",data:{id:"manage-subscriptions"}},{title:"Edit Profile",key:"profiler.formal-standard",type:"APP",data:{id:"edit-profile"}},{title:"Change password",key:"user.changePassword",type:"APP",data:{id:"change-password"}},{title:"Upgrades & Add-ons",key:"addons",type:"APP",data:{id:"addons"}},{title:"Terms & conditions",key:"tc",type:"APP",data:{id:"tc"}},{title:"Refer & earn money",key:"rewards.share",type:"APP",data:{id:"refer"}},{title:"High Contrast",key:"theme.hc",type:"APP",data:{id:"high-contrast-toggle"}},{title:"Log out",key:"user.signout",type:"APP",data:{id:"logout"}}]}}]},isMobile:!!navigator.maxTouchPoints,redirectedFromBookmarks:!1,redirectedFromExam:!1},ui=(t=getInitialState$1("ui",defaultState$2),e)=>{switch(e.type){case SET_IS_LOADING:return{...t,isLoading:!0};case SET_IS_NOT_LOADING:return{...t,isLoading:!1};case SHOW_MODAL:let n=!1;return t.modals.forEach(i=>{(lodashExports.isEqual(i,e.payload.modal)||lodashExports.isEqual(lodashExports.omit(i,lodashExports.functions(i)),lodashExports.omit(e.payload.modal,lodashExports.functions(e.payload.modal))))&&(n=!0)}),n?{...t}:{...t,modals:[e.payload.modal,...t.modals]};case HIDE_MODAL:return{...t,modals:t.modals.filter((i,a)=>a!==e.payload?.index)};case SET_BRAND:return{...t,brand:e.payload.brand};case SET_PASSWORD_IS_VERIFIED:return{...t,isPasswordVerified:!0};case SET_PASSWORD_IS_NOT_VERIFIED:return{...t,isPasswordVerified:!1};case SET_LOGO:return{...t,branding:{...t.branding,logo:e.payload.logo}};case SET_TITLE_LONG:return{...t,branding:{...t.branding,titleLong:e.payload.title}};case SET_TITLE_SHORT:return{...t,branding:{...t.branding,titleShort:e.payload.title}};case GET_RESOURCE_LINKS_SUCCESS:{const i=t.header.navigationList.findIndex(l=>l.key==="resources"),a=t.header.navigationList.find(l=>l.key==="resources"),o={...a,data:{...a.data,children:e.payload.resourceList}};return{...t,header:{...t.header,navigationList:t.header.navigationList.map((l,u)=>u===i?o:l)}}}case SET_DOMAIN_CONF:return{...t,domainConf:e.payload.conf};case SET_VOICEOVER_UI_STUFF:return{...t,voiceOver:{...t.voiceOver,...e.payload.voiceOver}};case SET_VOICEOVER_IS_BADGED:return{...t,voiceOver:{...t.voiceOver,isBadged:!0}};case SET_VOICEOVER_IS_NOT_BADGED:return{...t,voiceOver:{...t.voiceOver,isBadged:!1}};case SET_ACTIVE_STATE:return{...t,activeState:e.payload.state,previousState:e.payload.previousState};case RESET_NAVIGATION:const s=t.brand;return{...defaultState$2,brand:s};case SET_IS_SIGNIN_VERIFIED:return{...t,isSigninVerified:e.payload.isVerified};case SET_URL_PARAMS:return{...t,urlParams:e.payload.params};case SET_IS_MOBILE:return{...t,isMobile:e.payload.isMobile};case SET_IS_REDIRECTED_FROM_BOOKMARKS:return{...t,redirectedFromBookmarks:e.payload.redirectedFromBookmarks};case SET_IS_REDIRECTED_FROM_EXAM:return{...t,redirectedFromExam:e.payload.redirectedFromExam};case SET_TOPIC_REDIRECT_DATA:return{...t,subtopicIdList:e.payload.subtopicIdList};case CLEAR_TOPIC_REDIRECT_DATA:return{...t,subtopicIdList:[]};case"user/logoutUser":return defaultState$2;default:return t}},defaultState$1={upsellsShown:[],persistentUpsellList:[],voiceOver:null},upsell=(t=getInitialState$1("upsell",defaultState$1),e)=>{switch(e.type){case UPSELL_SHOWN:return!e.payload||!e.payload.variantId||t.upsellsShown.includes(e.payload.variantId)?{...t}:{...t,upsellsShown:[...t.upsellsShown,e.payload.variantId]};case SET_AUDIO_UPSELL:return{...t,voiceover:{...e.payload.upsell}};default:return{...t}}},defaultState={needCheckVerification:!1,modeType:null,pseudoId:null,questionId:null,webinarUrl:""},verification=(t=getInitialState$1("verification",defaultState),e)=>{switch(e.type){case SET_NEEDS_VERIFICATION:return{...t,needCheckVerification:!0,modeType:e?.payload?.modeType,pseudoId:e?.payload?.pseudoId,questionId:e?.payload?.questionId,webinarUrl:e?.payload?.webinarUrl};case SET_DOES_NOT_NEED_VERIFICATION:return defaultState;case"user/logoutUser":return defaultState;default:return t}},epicMiddleWare=createEpicMiddleware(),asyncLocalStorage=new AsyncStorage(localStorage),asyncSessionStorage=new AsyncStorage(sessionStorage),store=configureStore({reducer:{affiliate,audio,course,courseflow,dashboard,dialog:dialog$1,featureFlags,milestone,progress:progress$1,purchase,remotetest,subscriptions,temp,test:test$1,timers:timers$1,ui,upsell,user,verification,virtualInstructor},middleware:t=>t().concat([epicMiddleWare,audioListenerMiddleware.middleware]),devTools:location.hostname==="localhost"||location.hostname.includes("stg.")||location.hostname.includes("snd.")});epicMiddleWare.run(rootEpic);store.subscribe(()=>{const t=store.getState();localStoreKeysList.forEach(e=>asyncLocalStorage.write(`ace-redux-${e}`,JSON.stringify(t[e]))),sessionStoreKeysList.forEach(e=>asyncSessionStorage.write(`ace-redux-${e}`,JSON.stringify(t[e])))});store.dispatch({type:"ACE_INIT"});window.aceStore=store;const ErrorType={CLIENT_NETWORK:"CLIENT_NETWORK",CLIENT_TIMEOUT:"CLIENT_TIMEOUT",SERVER_UNREACHABLE:"SERVER_UNREACHABLE",SERVER_ERROR:"SERVER_ERROR",UNKNOWN:"UNKNOWN"};function shouldReportToSentry(t){return t?.errorType?t.errorType!==ErrorType.CLIENT_NETWORK&&t.errorType!==ErrorType.CLIENT_TIMEOUT:!0}let BASE_URL;function getErrorMsg(t){return get$5(isArray$3(t.errorList)?t.errorList[0]:t.errorList,"message","Unknown error")}function buildBifrostDebuggerLink({req:t,out:e,method:n,url:s}){if(window.aceRootScope?.isDevServer()||window.aceConstants?.DOMAINCONF?.isDev){const i=cloneDeep({brandId:t.headers["X-Aceable-Brandid"],buildnum:t.headers["X-Aceable-Buildnum"],platform:t.headers["X-Aceable-Platform"],...t.params,...t.data}),a=new URLSearchParams({authid:t.headers.Authorization,data:JSON.stringify(i),method:t.method,server:t.url,session:t.headers["X-Aceable-Session"]?.replace(/\.[^.]+$/,".OVERRIDE")});console.debug(`%cXGRIT-API %c${n}:${s} %chttps://bifrost-stg.xgritapi.com/debug/?${a}`,"margin: 1em","color: orange;","color: teal;")}}function getErrorCode(t){return String(get$5(isArray$3(t.errorList)?t.errorList[0]:t.errorList,"code","40404")).toString()}function semverToDecimal(t="1.0.0"){const e=t.split(".");return Number(e[0])*1e3+Number(e[1])+Number(e[2])/1e3}async function call(t,e,n){if(!t)return{};const s=selectUserSessionToken(store.getState()),i={method:e||"GET",url:(BASE_URL||apiConf.baseUrl)+t,timeout:9e4,withCredentials:ExperimentLib.getFlag("api-cookies-show"),headers:{Authorization:apiConf.basicAuth,"Content-Type":e==="POST"?"application/json":"text/plain","X-Aceable-Brandid":root.domainConf.brandId,"X-Aceable-Buildnum":semverToDecimal(root.version||"1.0.0"),"X-Aceable-Platform":"WEB","X-Aceable-Session":lodashExports.isEmpty(s)?null:s}},a=n||{};i.method==="GET"?i.params=a:i.data=a;try{buildBifrostDebuggerLink({req:i,out:a,method:e,url:t});const o=await axios(i),l=o.headers.date;return root.serverDriftMs=l?Date.now()-new Date(l).getTime():0,o.data}catch(o){const{response:l,code:u,message:c}=o;if(!l||!l.status){let p,m;u==="ECONNABORTED"?(p="Request Timeout - Server did not respond in time",m=ErrorType.CLIENT_TIMEOUT):u==="ERR_NETWORK"||c?.includes("Network Error")?(p="Network Connection Failed - Check your internet connection",m=ErrorType.CLIENT_NETWORK):u==="ERR_NAME_NOT_RESOLVED"?(p="Cannot Reach Server - DNS resolution failed",m=ErrorType.SERVER_UNREACHABLE):(p=`Cannot Connect to Server${u?` (${u})`:""}`,m=ErrorType.UNKNOWN);const g=new Error(p);throw g.errorType=m,g.errorCode=u,g}const d=getErrorCode(l.data);if(d==="40102"&&!i.url.includes("signout"))store.dispatch({type:UNAUTHORIZED_REQUEST_ERROR,payload:{message:getErrorMsg(l.data)}});else{const p=new Error(l.data?getErrorMsg(l.data):"Unknown API Error",{cause:d});throw p.errorCode=d,p.errorType=ErrorType.SERVER_ERROR,p.httpStatus=l.status,p}}}function isHijackable(){return["stg","gvt"].includes(apiConf.env)}function courseGet(t){return call(`course/${t}`,"GET")}function getDrivingSchools(){return call("store","GET")}function userSetCourse(t,e){return call(`user/${t}/course/${e}`,"POST")}function progressSetDefault(t){return call(`progress/${t}/set-default`,"POST")}function progressGet(t){return call(`progress/${t}`,"GET")}function progressCheckGetList(t,e){let n=`progress/${t}/check`;return e&&(n=`teacher/${t}/student/${e}/check`),call(n,"GET").then(s=>{let i="",a=-1;const o=[];return lodashExports.each(s,l=>{l.section!==i&&({section:i}=l,a+=1,delete l.section,o.push({section:i,isExpanded:!1,completeCount:0,checkList:[]})),o[a].checkList.push(l),o[a].completeCount+=l.isActive?1:0}),o})}function progressCheckSet(t,e,n,s){let i=`progress/${t}/check/${e}`;return s&&(i=`teacher/${t}/student/${s}/check/${e}`),call(i,"POST",{isActive:n})}function updateChapterProgress(t,e,n){return call(`progress/${t}/chapter/${e}`,"POST",{isMarkedForReview:n})}function progressQuestionSet(t,e,n,s){if(e&&t&&n&&s.length)return call(`progress/${t}/questionset`,"POST",{nodeId:e,chapterId:n,answerList:s})}function progressGetProductList(t,e,n){return call(`progress/${t}/purchase`,"GET",{typeList:e,isActive:n})}function progressSendPromoEmail(t,e,n){return call(`progress/${t}/email`,"POST",{id:t,eventKey:e,email:n.email,phone:n.phone,name:n.name})}function resetPassword({username:t,code:e,password:n,firstName:s=void 0,reCaptchaToken:i}){return call("user/password","POST",{username:t,code:e,password:n,firstName:s,reCaptchaToken:i})}function getTemplate(t,e,n,s){return call("template","GET",{appType:t,mode:e,key:n,variant:s})}function febbyStart({progressId:t=root.progressCurrent._id,from:e,chapterCacheKey:n}){return call("courseflow/start","GET",{progressId:t,from:e,chapterCacheKey:n})}function febbyReview({progressId:t=root.progressCurrent._id,chapterCacheKey:e,from:n,nodeId:s}){return call("courseflow/review","GET",{progressId:t,chapterCacheKey:e,nodeId:s,from:n})}function febbyAdvance({progressId:t=root.progressCurrent._id,chapterCacheKey:e,currentNodeId:n,isActive:s,isPassed:i=!0,nodeType:a}){return call("courseflow/advance","POST",{progressId:t,chapterCacheKey:e,currentNodeId:n,isActive:s,isPassed:i,nodeType:a})}function febbyBacktrack({progressId:t=root.progressCurrent._id,chapterCacheKey:e,currentNodeId:n,isActive:s=!0,nodeType:i}){return call("courseflow/backtrack","POST",{progressId:t,chapterCacheKey:e,currentNodeId:n,isActive:s,nodeType:i})}function courseflowVideoPause(t=root.progressCurrent._id,e,n){return call("courseflow/videopause","POST",{progressId:t,currentVideoSeconds:e,currentNodeId:n})}async function courseflowExit(t,e,n,s){return call("courseflow/exit","POST",{progressId:t,chapterCacheKey:e,currentNodeId:n,to:s})}function getWebinar({progressId:t}){return call("webinar","GET",{progressId:t})}function getTutors({progressId:t}){return call("class/private-tutor","GET",{progressId:t})}function getCrashCourses({progressId:t,isTestTutorEnabled:e}){return call("class/crash-courses","GET",{progressId:t,isTestTutorEnabled:e})}function sendTutorEmail({progressId:t,eventProperties:e}){return call("/class/private-tutor-contact","POST",{progressId:t,eventProperties:e})}function initFoaf({progressId:t,bucketivityId:e}){return call("progress-bucketivity","POST",{progressId:t,bucketivityId:e})}function getFoaf({progressId:t,bucketivityProgressId:e,bucketivityId:n}){return call(`progress-bucketivity/${e||""}`,"GET",{progressId:t,bucketivityId:n,bucketivityProgressId:e})}function updateFoaf(t,e){return call(`progress-bucketivity/${t}`,"POST",{bucketivityProgressId:t,eventList:e})}function checkForBlockers(t,e,n,s,i){return call("profiler","GET",{progressId:t,breakpoint:e,filter:n,position:s,isEnableAllFields:i})}function saveProfilerData(t,e){return call("profiler","POST",{progressId:t,fieldValueMap:e})}function verifyAffidavit(t,e){return call(`profiler/affidavit-verification?email=${t}&key=${e}`)}function getStudyTests(t){return call("progress-test/study-test","GET",{progressId:t})}function getStudyTestById(t){return call(`progress-test/study-test/${t}`,"GET")}function progressTestGetSummary(t,e,n,s){return call("progress-test/summary","GET",{progressId:t,modeType:e,pseudoId:n,from:s})}function progressTestProctorEnrollStudent(t,e,n,s){return call("progress-test/proctor/enrollStudent","POST",{progressId:t,examityCourseId:e,proctorType:n,isLegacyProctoring:s})}function progressTestLoad(t,e,n){return call("progress-test/load","GET",{progressId:t,modeType:e,pseudoId:n})}function progressTestGrade(t,e,n){return call(`progress-test/${t}`,"POST",{answerList:e,isTimeout:n})}function progressTestSendProctorEmailAddress(t,e,n,s){return call("progress-test/email-proctor","POST",{progressId:t,modeType:e,pseudoId:n,email:s})}function purchaseReceiptAnonymous(t){return call("purchase-receipt/anonymous","POST",{...t,provider:"STRIPE_22"})}function progressRemoteTestStart(t,e,n){return call(`progress/${t}/remotetest`,"POST",{verificationId:e,screenSize:n})}function progressRemoteTestFail(t,e,n){return call(`progress/${t}/remotetest/${e}/fail`,"POST",{reasonCode:n})}function progressRemoteTestGetQuestion(t,e){return call(`progress/${t}/remotetest/${e}/question`,"GET")}function progressRemoteTestGradeQuestion(t,e,n,s){return call(`progress/${t}/remotetest/${e}/question/${n}`,"POST",{answerKey:s})}function progressCourseRestart(t){return call("progress-course/restart","POST",{progressId:t})}function progressVerifyRegister(t,e,n,s,i,a,o,l,u,c,d,p){return call(`progress/${t}/verify`,"POST",{key:e,firstName:n,lastName:s,middleInitial:i,birthDate:a,addressStreet:o,addressApt:l,addressCity:u,addressState:c,addressPostal:d,phone:p})}function progressVerifyContract(t,e,n,s,i){return call(`progress/${t}/verify/contract`,"POST",{isContractSigned:e,isContractParent:n,parentLicense:s,contractSignature:i})}function progressVerifyUnified(t,e,n,s){return call("progress-verify/load","GET",{progressId:t,modeType:e,pseudoId:n,questionId:s})}function progressVerifyGrade(t,e,n){return call(`progress-verify/${t}/grade`,"POST",{progressId:e,answerId:n})}function checkPurchaseAvailable(t,e,n=""){return call("purchase-upsell/check","GET",{progressId:t,from:e,debugKey:n,isVariantEnabled:!0})}function submitPurchase(t){return["chargeAmount","milestoneKey","productIdList","progressId","token"].forEach(n=>{if(!Object.keys(t).includes(n))throw`Exception in AceableAPI.submitPurchase. ${n} is a required parameter. Check out the API docs.`}),t.provider=t.token.length>0?"STRIPE":"",t.platform="WEB",call("purchase-upsell/purchase","POST",{...t})}function getResourcePurchaseStatus(t,e,n){return call("resource/purchase-status","GET",{progressId:t,productTypeList:e,productOptionList:n})}function userSync(){return call("user/sync","GET")}function userSso(t){return call("user/sso","GET",{tempSsoToken:t})}function userSignUp(t,e,n,s,i,a,o){return call("user","POST",{username:t,password:e,firstName:n,lastName:s,accountType:i,courseId:a,reCaptchaToken:o})}async function userParentSignUp(t,e,n,s,i,a,o,l){return call("user/parent-signup","POST",{username:t,password:e,firstName:n,lastName:s,phone:i,studentUsername:a,brandId:o,reCaptchaToken:l})}function userVerifyPassword(t,e){return call(`user/${t}/passwordVerify`,"GET",{password:e})}function userSetProfile(t,e){return call(`user/${t}`,"POST",{...e})}function userRequestPassword(t,e){return call("user/password","GET",{username:t,reCaptchaToken:e})}function teacherStudentListGet(t){return call(`teacher/${t}/student`,"GET")}function teacherStudentLink(t,e){return call(`teacher/${t}/student`,"POST",{username:e})}function teacherStudentUnlink(t,e){return call(`teacher/${t}/student/${e}`,"DELETE")}function teacherStudentLog(t,e){return call(`teacher/${t}/student/${e}/log`,"GET")}function teacherStudentProgressLog(t,e){return call(`teacher/${t}/student/${e}/progress-log`,"GET")}function teacherStudentTestProgressLog(t,e){return call(`teacher/${t}/student/${e}/test-progress-log`,"GET")}function teacherStudentLevelTest(t,e){return call(`teacher/${t}/student/${e}/leveltest`,"GET")}function teacherStudentStudyTest(t,e){return call(`teacher/${t}/student/${e}/studytest`,"GET")}function countyGetList(t){return call("county","GET",{state:t})}function countyCourtGetList(t,e){return call("county/court","GET",{state:t,county:e})}function destroyUserSession(){const t=selectUserSessionToken(store.getState()),e=lodashExports.isEmpty(t)?null:t;if(e)return call("user/signout","POST",{sessionToken:e})}function hijack({baseUrl:t}){isHijackable()&&t&&(BASE_URL=t)}function toggleJourneyStep(t,e,n){return call(`journey/step/${t}`,"POST",{progressId:e,isComplete:n})}function sendSmsCode(t,e,n){return call("progress-verify/sendcode","POST",{phone:t,verificationKey:e,progressVerifyId:n})}function sendLog(t="INFO",e={},n="",s=5e4){return call("log","POST",{level:t,data:e,message:n,code:s})}function getSubscriptions(t,e){return call("subscription","GET",{progressId:t,brandId:e})}function cancelSubscription(t,e,n){return call(`subscription/${t}/cancel`,"POST",{progressId:e,brandId:n})}async function postBlankitivity(t,e){return call(`progress-blankitivity/${t}`,"POST",{answerResultList:e})}function getOdyssey(t,e=!1){return call(`odyssey/${t}`,"GET",{isSummary:e})}function getKeyTermById(t){return call(`keyterm/${t}`,"GET")}function getBookmark(t){return call("progress-bookmark","GET",{progressId:t})}function postBookmark({progressId:t,isActive:e=!1,chapterCacheKey:n,currentNodeId:s}){return call("courseflow/bookmark","POST",{progressId:t,isActive:e,chapterCacheKey:n,currentNodeId:s})}function bookmarkReview({progressId:t,chapterCacheKey:e,nodeId:n,from:s="BOOKMARK"}){return call("courseflow/review","GET",{progressId:t,chapterCacheKey:e,nodeId:n,from:s})}function progressTestPastGradeResults(t){return call(`progress-test/${t}`,"GET")}function progressTestPastTestList(t){return call("progress-test/test-taken","GET",{progressId:t})}function progressClassEventCreate(t,e){return call(`progress/${t}/class-event/${e}`,"POST")}function progressClassEventCancel(t,e){return call(`progress/${t}/class-event/${e}`,"DELETE")}function getJourneyCardData(t,e){return call(`journey/${t}/dashcard/${e}`,"GET")}function instructorQuestion(t,e,n,s,i){return call("instructor/ask","POST",{progressId:t,question:e,pseudoId:n,mode:"NODE",missedQuestion:{question:s,explanation:i}})}function instructorStatus(t){return call("instructor/status","GET",{progressId:t})}function instructorRate(t,e){return call(`instructor/${t}/rate`,"POST",{id:t,reviewRating:e})}function instructorQualitativeFeedback(t,e,n){return call("instructor/feedback","POST",{id:t,poorRatingReason:e,userFeedback:n})}function getAffiliates({progressId:t,platform:e,from:n}){return call("affiliate","GET",{progressId:t,platform:e,from:n})}function getUserTransferToken(t){return call(`user/${t}/transfer-token`,"GET")}const render=()=>{window.aceRootScope.completePercent=0,window.aceRootScope.completeIcon="";const t=(ModelAbstract.getCurrent("domain")||window.aceRootScope.domain||"").toLowerCase();window.aceRootScope.logoType="";const e="https://d1u7daj727sadp.cloudfront.net/",n={IsPoints:!0,IsApp:!0,IsHelp:!0,CourseList:null,AppList:window.aceConstants.DOMAINCONF.AppList,LogoSize:"contain",AwsMultimedia:e};if(window.aceConstants.DOMAINCONF.brandId==="IDS"){const s=`${e}ids-design/`;window.aceRootScope.verticalType="driving",window.aceRootScope.domainConf={brandId:"IDS",BodyClass:"app--driving",TitleLong:"I Drive Safely",TitleShort:"I Drive Safely",TitleBrowserTab:"I Drive Safely",LoadImg:"",LogoIcon:`${s}ids-logo-medium.svg`,LogoRewards:`${e}webassets/referral-icon-ids.svg`,VideoImg:`${s}video-poster.png`,BackImg:`${s}web-driving-background-1920x1080.jpg`,documentDomain:".idrivesafely.com",Links:{BaseOfAce:"https://app.idrivesafely.com",AndroidAppId:"",IphoneAppId:"",Choose:"https://www.idrivesafely.com/support/",Referral:"https://www.idrivesafely.com/support/?a=How-Does-the-Referral-Program-Work---id--VK3D36CNQ_azBTwj1xGN2w",HelpLocked:"https://www.idrivesafely.com/support/",TermsAndConditions:"https://www.idrivesafely.com/privacy-policy/",HelpContact:"https://www.idrivesafely.com/about-us/",Help:"https://www.idrivesafely.com/support/",ExternalReview:"https://www.trustpilot.com/review/www.idrivesafely.com",GoogleReview:"https://www.google.com/search?q=IDriveSafely&ludocid=17451644535782176375&#lrd=0x0:0xf230b23e15aef677,1"},Welcome:`I Drive Safely is America's leading online driving school, for defensive driving, drivers ed, traffic school, and much more! <a href="https://idrivesafely.com/" title="Learn About I Drive Safely">Learn More</a>!`,Signup:'I Drive Safely offers Drivers Ed and Defensive Driving courses in a variety of states &mdash; <a href="https://idrivesafely.com/" target="_BLANK">Find Yours</a>!',LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n}}else if(window.aceConstants.DOMAINCONF.brandId==="FLVS"){const s=`${e}flvs-design/`;window.aceRootScope.verticalType="driving",window.aceRootScope.domainConf={brandId:"FLVS",BodyClass:"app--driving",TitleLong:"FLVS Driver Education",TitleShort:"FLVS",TitleBrowserTab:"FLVS Driver Education",LoadImg:"",LogoIcon:`${e}webassets/logos/flvs/new/flvs_logo_new.png`,LogoRewards:"",VideoImg:`${s}video-poster.png`,BackImg:`${s}flvs-background-16x9.jpg`,documentDomain:"flvs-driversed.com",Links:{BaseOfAce:"https://app.flvs-driversed.com",AndroidAppId:"",IphoneAppId:"",Choose:"https://driversed.com/flvssupport/",Referral:"https://driversed.com/flvssupport/",HelpLocked:"https://driversed.com/flvssupport/",TermsAndConditions:"",HelpContact:"https://driversed.com/flvssupport/",Help:"https://driversed.com/flvssupport/",ExternalReview:"",GoogleReview:""},Welcome:"Welcome to FLVS Drivers Ed, Log into your account below.",Signup:"Welcome to FLVS Drivers Ed, Log into your account below.",LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n}}else if(window.aceConstants.DOMAINCONF.brandId==="AARP"){const s=`${e}aarp-design/`;window.aceRootScope.verticalType="driving",window.aceRootScope.domainConf={brandId:"AARP",BodyClass:"app--driving",TitleLong:"the AARP Smart Driver Course",TitleShort:"AARP",TitleBrowserTab:"AARP Smart Driver Course",LoadImg:"",LogoIcon:`${s}aarplogo.png`,LogoRewards:"",VideoImg:`${s}video-poster.png`,BackImg:`${s}aarp-driving-background-16x9.jpg`,documentDomain:".aarpdriversafety.org",Links:{BaseOfAce:"https://app.aarpdriversafety.org",AndroidAppId:"",IphoneAppId:"",Choose:"https://aarpdriversafety.org/support",Referral:"https://aarpdriversafety.org/support",HelpLocked:"https://aarpdriversafety.org/support",TermsAndConditions:"https://www.aarpdriversafety.org/signup/displayTermsAndConditions.html",HelpContact:"https://www.aarpdriversafety.org/sales/contactus.html?intcmp=DSP-HDR-NAV-CONTACT",Help:"https://aarpdriversafety.org/support",ExternalReview:"https://www.trustpilot.com/review/www.aarpdriversafety.org",GoogleReview:"https://www.google.com/search?q=AARP&ludocid=17451644535782176375&#lrd=0x0:0xf230b23e15aef677,1"},Welcome:"This course teaches proven driving techniques to help keep you and your loved ones safe on the road.",Signup:"The AARP Smart Driver course is the nation's first refresher course designed for drivers age 50 and older.",LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n}}else if(window.aceConstants.DOMAINCONF.brandId==="DEC"){const s=`${e}dec-design/`;window.aceRootScope.verticalType="driving",window.aceRootScope.domainConf={brandId:"DEC",BodyClass:"app--driving",TitleLong:"DriversEd.com",TitleShort:"DriversEd.com",TitleBrowserTab:"DriversEd.com",LoadImg:"",LogoIcon:`${s}dec-logo.svg`,LogoRewards:`${e}webassets/referral-icon-dec.svg`,VideoImg:`${s}video-poster.png`,BackImg:`${s}dec-background-16x9.jpg`,documentDomain:".driversed.com",Links:{BaseOfAce:"https://app.driversed.com",AndroidAppId:"",IphoneAppId:"",Choose:"https://driversed.com/support/",Referral:"https://driversed.com/support/?a=How-Does-the-Referral-Program-Work---id--Q0cSEW_1T06MQkcXR9aqig",HelpLocked:"https://driversed.com/support/",TermsAndConditions:"https://driversed.com/about-us/privacy-policy.aspx",HelpContact:"https://driversed.com/support/",Help:"https://driversed.com/support/",ExternalReview:"https://www.trustpilot.com/review/www.driversed.com",GoogleReview:"https://www.google.com/search?q=driversed.com&ludocid=17451644535782176375&#lrd=0x0:0xf230b23e15aef677,1"},Welcome:'<p><a href="https://driversed.com/" target="_blank">DriversEd.com</a> has set the standard in drivers education for over 20 years. Havent purchased a course yet?</p> <p>Learn more about <a href="https://driversed.com/" title="Learn About Drivers Ed Courses" target="_blank">DriversEd.com</a></p>',Signup:'<p><a href="https://driversed.com/" target="_blank">DriversEd.com</a> has set the standard in drivers education for over 20 years. Havent purchased a course yet?</p> <p>Learn more about <a href="https://driversed.com/" title="Learn About Drivers Ed Courses" target="_blank">DriversEd.com</a></p>',LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n}}else["re","realestate"].includes(t)?(window.aceRootScope.verticalType="realestate",window.aceRootScope.domainConf={brandId:"ACE",BodyClass:"app--realestate",Logo:`${e}design/logo-lg.svg`,LogoIcon:`${e}webassets/logos/aceable/horizontal-logo-blue.svg`,LogoRewards:`${e}webassets/referral-icon.svg`,TitleLong:"Aceable Agent",TitleShort:"Aceable",TitleBrowserTab:"Aceable Agent",LoadImg:`${e}design/ace-notaco.gif`,VideoImg:`${e}design/ace-video.png`,HeaderImg:`${e}design/ace-header-right.png`,BackImg:`${e}design/backdrop-re-pool.jpg`,documentDomain:".aceable.com",Labels:{courseTest:"course test",pass:"pass",isPassingGrade:"is a passing grade",failCourseTestReason:"since you have failed your course test too many times."},Keys:{gtm:"GTM-KMHH8WM"},Links:{BaseOfAce:"https://www.aceableagent.com",AndroidAppId:"com.aceable.aceablere_android",IphoneAppId:"aceable-inc./id1183000995",Choose:"https://www.aceableagent.com/support/",Referral:"https://www.aceableagent.com/support/?a=How-does-the-Referral-Program-work---id--W90EkHmKTDWDoUi5uHOiRA",HelpLocked:"https://aceableagent.com/support/?a=What-do-I-do-if-I%27m-locked-out-How-do-I-unlock-my-account---id--hMETTS3-QeuVULMznALkfQ",TermsAndConditions:"https://aceableagent.com/tandc",HelpContact:"https://aceableagent.com/support/?a=Student-Concierge-Contact-Info-and-Business-Hours---id--ouE8tQ0IRXaav6cQolFtgA",Help:"https://www.aceableagent.com/support/",ExternalReview:"https://www.trustpilot.com/review/aceableagent.com",GoogleReview:"https://www.google.com/search?q=Aceable&ludocid=17451644535782176375&#lrd=0x0:0xf230b23e15aef677,1"},Welcome:`Aceable Agent is the best Real Estate Education experience around. Haven't purchased an Aceable Course yet? <a href="https://aceableagent.com/" title="Learn About Aceable Agent Courses">Learn More</a>!`,Signup:'Aceable offers Real Estate courses in a variety of states &mdash; <a href="https://aceableagent.com/" target="_BLANK">Find Yours</a>, or sign up for a free trial!',LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n}):["de","dd","driving"].includes(t)?(window.aceRootScope.verticalType="driving",window.aceRootScope.domainConf={brandId:"ACE",BodyClass:"app--driving",Logo:`${e}design/logo-lg.svg`,LogoIcon:`${e}webassets/logos/aceable/horizontal-logo-blue.svg`,LogoRewards:`${e}webassets/referral-icon.svg`,TitleLong:"Aceable Driving",TitleShort:"Aceable",TitleBrowserTab:"Aceable Driving",LoadImg:`${e}design/ace-notaco.gif`,VideoImg:`${e}design/ace-video.png`,HeaderImg:`${e}design/ace-header-right.png`,BackImg:`${e}design/backdrop-desert-min.jpg`,documentDomain:".aceable.com",Labels:{courseTest:"course test",pass:"pass",isPassingGrade:"is a passing grade",failCourseTestReason:"since you have failed your course test too many times."},Keys:{gtm:"GTM-NC57CX"},Links:{BaseOfAce:"https://www.aceable.com",AndroidAppId:"com.aceable.aceablede_android",IphoneAppId:"aceable-inc./id597625681",Choose:"https://aceable.com/support",Referral:"https://www.aceable.com/support/?a=How-does-the-Referral-Program-work---id--Ktd36zgkSheW4XCCz4OPNw",HelpLocked:"https://aceable.com/support/?a=Contact-Us-Info-and-Business-Hours---id--3uVrK_huTa6RvNG6cQ84sQ",TermsAndConditions:"https://aceable.com/tandc",HelpContact:"https://aceable.com/support/?a=Contact-Us-Info-and-Business-Hours---id--3uVrK_huTa6RvNG6cQ84sQ",Help:"https://aceable.com/support",ExternalReview:"https://www.trustpilot.com/review/www.aceable.com",GoogleReview:"https://www.google.com/search?q=Aceable&ludocid=17451644535782176375&#lrd=0x0:0xf230b23e15aef677,1"},Welcome:`Aceable Driving is the best Drivers Education experience around. Haven't purchased an Aceable Course yet? <a href="https://aceable.com/" title="Learn About Aceable Driving Courses">Learn More</a>!`,Signup:'Aceable offers Drivers Ed and Defensive Driving courses in a variety of states &mdash; <a href="https://aceable.com/" target="_BLANK">Find Yours</a>, or sign up for a free trial!',LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n}):window.aceRootScope.domainConf={brandId:"ACE",BodyClass:"app--no-vertical",Logo:`${e}design/logo-lg.svg`,LogoIcon:`${e}webassets/logos/aceable/horizontal-logo-blue.svg`,LogoRewards:`${e}webassets/referral-icon.svg`,TitleLong:"Aceable",TitleShort:"Aceable",TitleBrowserTab:"Aceable",LoadImg:`${e}design/ace-notaco.gif`,VideoImg:`${e}design/ace-video.png`,HeaderImg:`${e}design/ace-header-right.png`,BackImg:`${e}design/backdrop-graduation.jpg`,documentDomain:".aceable.com",Labels:{courseTest:"course test",pass:"pass",isPassingGrade:"is a passing grade",failCourseTestReason:"since you have failed your course test too many times."},Keys:{gtm:"GTM-NC57CX"},Links:{BaseOfAce:"https://www.aceable.com",AndroidAppId:"com.aceable.aceablede_android",IphoneAppId:"aceable-inc./id597625681",Choose:"https://aceable.com/support",Referral:"https://www.aceable.com/support/?a=How-does-the-Referral-Program-work---id--Ktd36zgkSheW4XCCz4OPNw",TermsAndConditions:"https://aceable.com/tandc",HelpContact:"https://aceable.com/support/?a=Contact-Us-Info-and-Business-Hours---id--3uVrK_huTa6RvNG6cQ84sQ",Help:"https://aceable.com/support",ExternalReview:"https://www.trustpilot.com/review/www.aceable.com",GoogleReview:"https://www.google.com/search?q=Aceable&ludocid=17451644535782176375&#lrd=0x0:0xf230b23e15aef677,1"},Welcome:`Aceable is the best Driving and Real Estate Education experience around. Haven't purchased an Aceable Course yet?<br />Learn more about <a href="https://aceable.com/" title="Learn About Aceable Driving Courses">Aceable Driving</a> or <a href="https://aceableagent.com/" title="Aceable Real Estate">Aceable Agent</a>!`,Signup:'Aceable offers Driving and Real Estate courses in a variety of states &mdash; Learn more about <a href="https://aceable.com/" title="Learn About Aceable Driving Courses">Aceable Driving</a> or <a href="https://aceableagent.com/" title="Aceable Real Estate">Aceable Agent</a>, or sign up for a free trial!',LockedHtml:"If you have any concerns or are unsure why you were locked, please reach out to our customer support.",...n};store.dispatch(setBrand(window.aceRootScope.domainConf.brandId)),store.dispatch({type:SET_LOGO,payload:{logo:window.aceRootScope.domainConf.LogoIcon}}),store.dispatch({type:SET_TITLE_SHORT,payload:{title:window.aceRootScope.domainConf.TitleShort}}),store.dispatch({type:SET_TITLE_LONG,payload:{title:window.aceRootScope.domainConf.TitleLong}}),store.dispatch({type:SET_DOMAIN_CONF,payload:{conf:window.aceRootScope.domainConf}}),store.dispatch(setFeatureFlagsByBrand(window.aceRootScope.domainConf.brandId))},setProgressBar=t=>{window.aceRootScope.isProgressShown=/^(casestudy\.|course\.(?!(upgrade|table))|coursetest\.|level\.|studytest\.|verify\.confirm)/.test(t)&&window.aceRootScope.progressCurrent},init$1=()=>{window.aceRootScope.completePercent=0,window.aceRootScope.completeIcon="",render(),store.dispatch(setBrand(window.aceRootScope.domainConf.brandId)),store.dispatch({type:SET_LOGO,payload:{logo:window.aceRootScope.domainConf.LogoIcon}}),store.dispatch({type:SET_TITLE_SHORT,payload:{title:window.aceRootScope.domainConf.TitleShort}}),store.dispatch({type:SET_TITLE_LONG,payload:{title:window.aceRootScope.domainConf.TitleLong}}),store.dispatch({type:SET_DOMAIN_CONF,payload:{conf:window.aceRootScope.domainConf}}),store.dispatch(setFeatureFlagsByBrand({brandId:window.aceRootScope.domainConf.brandId}))},CourseFlowObj={...ModelAbstract,name:"CourseFlow",getLeadingCourseFlow(t={}){const e=this.getCurrent()||[],n=t.nodeId;let s;return n?s=e.find(i=>i.currentNodeId===n):s=e[0],s},getLeadingNode(t={}){const e=this.getLeadingCourseFlow(t),n=e&&e.currentNodeId;return e&&e.nodeList?e.nodeList.find(i=>i._id===n)||{}:{}}},getActiveCourseFlow=t=>CourseFlowObj.getLeadingCourseFlow(t)||{},getActiveNode=t=>{const e=CourseFlowObj.getLeadingNode(t);return e||store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"Returning to dashboard, choose Continue Course to continue.",title:"Yikes",buttonText:"I understand",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],hideCloseIcon:!0}}}),e},resumeCourse=t=>{if(initLoading())return window.aceRootScope?.progressSync(t).then(e=>{clearLoading(),redirectToBlockerIfAny(e._id,null,null,"DASHBOARD").then(n=>{if(!n)return dispatchStart()}).catch(()=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"We had to log you out.  Please reach out to us if the problem persists.",title:"There's a problem with this course.",buttonText:"I understand",hideCloseIcon:!0,confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}]}}})})},e=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{message:`Server said: ${e.message}`,title:"Yikes!"}}}),clearLoading()})},move=({direction:t,chapter:e,params:n})=>{getActiveCourseFlow(n);const i=getActiveNode(n).type;if(e&&e.type==="TEST"&&e.state==="APPROVED"){dispatchReview(e);return}if(e&&(e.isComplete||!e.isCurrent)){dispatchReview(e);return}return e?.isCurrent?dispatchStart():i==="COMPLETE"?(store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index",params:{location:"replace"},options:{reload:!0}}}),!1):t===-1?store.dispatch({type:BACKTRACK}):t===1?store.dispatch({type:ADVANCE}):!1};function dispatchStart(){return store.dispatch({type:START_COURSE})}function dispatchReview(t){const{chapterCacheKey:e,nodeId:n,type:s}=t;e?store.dispatch({type:REVIEW,payload:{chapterCacheKey:e,nodeId:n,...s==="TEST"&&{type:s,nodeId:n,from:"TEST"}}}):dispatchStart()}const globals={getFakeUsername(t){const e=window.aceRootScope.courseCurrent,n=window.aceRootScope.userCurrent,s=lodashExports.cloneDeep(n),i=new Date,a=i.getHours(),o=i.getMinutes(),l=i.getSeconds(),u=i.getDate(),c=i.getMonth()+1;let d="",p=s?.firstName&&s?.firstName.toLowerCase();return p=p||"webmaster",t?(t.key&&(d=t.key),t.firstName&&(p=t.firstName.toLowerCase())):e?.key&&(d=e.key),`${p}+${d.replace(".","").toLowerCase()}${c}.${u}_${a}.${o}.${l}@xgrit.com`},isDebug(){return window.aceRootScope.userCurrent.isDebug},stateIdAngularHack(t,e="encode"){return e==="encode"?t.replace(/\./g,"__"):t.replace(/__/g,".")},resumeCourse,moveCourse:move,progressSync(t){const{progressCurrent:e,userCurrent:n}=window.aceRootScope,s=e?._id??n?.defProgressId;return e||t||s?(!t||s?progressGet(s):Promise.resolve(t)).then(a=>(a&&(store.dispatch({type:UPDATE_PROGRESS,payload:{progress:a}}),UserObj.updateProgress(a)),a),a=>{throw a}):Promise.resolve(!1)},isDevServer(){return window.aceRootScope.domain?.includes("ace-web-")||window.aceRootScope.domain.includes("localhost")},waitTime(t){if(t||(t=window.aceRootScope.progressCurrent),!t.unlockDate)return"";let e=(new Date(t.unlockDate)-new Date)/36e5,n="hours";return e<=0?(n="seconds",e=0):e<=.0167?(n="seconds",e=Math.round(e*60*60)):e<=1?(n="minutes",e=Math.round(e*60)):e=Math.round(e*4)/4,`${e} ${n}`}};var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,n=t&&e&&typeof e.get=="function"?e.get:null,s=t&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=i&&a&&typeof a.get=="function"?a.get:null,l=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,d=typeof WeakSet=="function"&&WeakSet.prototype,p=d?WeakSet.prototype.has:null,m=typeof WeakRef=="function"&&WeakRef.prototype,g=m?WeakRef.prototype.deref:null,E=Boolean.prototype.valueOf,x=Object.prototype.toString,b=Function.prototype.toString,S=String.prototype.match,C=String.prototype.slice,T=String.prototype.replace,I=String.prototype.toUpperCase,D=String.prototype.toLowerCase,P=RegExp.prototype.test,O=Array.prototype.concat,B=Array.prototype.join,F=Array.prototype.slice,H=Math.floor,Q=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Z=Object.getOwnPropertySymbols,ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,re=typeof Symbol=="function"&&typeof Symbol.iterator=="object",se=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===re||!0)?Symbol.toStringTag:null,G=Object.prototype.propertyIsEnumerable,K=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ke){return ke.__proto__}:null);function M(ke,Oe){if(ke===1/0||ke===-1/0||ke!==ke||ke&&ke>-1e3&&ke<1e3||P.call(/e/,Oe))return Oe;var Yt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ke=="number"){var Xt=ke<0?-H(-ke):H(ke);if(Xt!==ke){var ir=String(Xt),ie=C.call(Oe,ir.length+1);return T.call(ir,Yt,"$&_")+"."+T.call(T.call(ie,/([0-9]{3})/g,"$&_"),/_$/,"")}}return T.call(Oe,Yt,"$&_")}var W=require$$0,ee=W.custom,z=Pe(ee)?ee:null,ae={__proto__:null,double:'"',single:"'"},ce={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};objectInspect=function ke(Oe,Yt,Xt,ir){var ie=Yt||{};if(nt(ie,"quoteStyle")&&!nt(ae,ie.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(nt(ie,"maxStringLength")&&(typeof ie.maxStringLength=="number"?ie.maxStringLength<0&&ie.maxStringLength!==1/0:ie.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ue=nt(ie,"customInspect")?ie.customInspect:!0;if(typeof ue!="boolean"&&ue!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nt(ie,"indent")&&ie.indent!==null&&ie.indent!=="	"&&!(parseInt(ie.indent,10)===ie.indent&&ie.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nt(ie,"numericSeparator")&&typeof ie.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ve=ie.numericSeparator;if(typeof Oe>"u")return"undefined";if(Oe===null)return"null";if(typeof Oe=="boolean")return Oe?"true":"false";if(typeof Oe=="string")return pt(Oe,ie);if(typeof Oe=="number"){if(Oe===0)return 1/0/Oe>0?"0":"-0";var Ie=String(Oe);return ve?M(Oe,Ie):Ie}if(typeof Oe=="bigint"){var Ze=String(Oe)+"n";return ve?M(Oe,Ze):Ze}var wt=typeof ie.depth>"u"?5:ie.depth;if(typeof Xt>"u"&&(Xt=0),Xt>=wt&&wt>0&&typeof Oe=="object")return Me(Oe)?"[Array]":"[Object]";var Gt=Ar(ie,Xt);if(typeof ir>"u")ir=[];else if(ot(ir,Oe)>=0)return"[Circular]";function sr(hr,ar,He){if(ar&&(ir=F.call(ir),ir.push(ar)),He){var _t={depth:ie.depth};return nt(ie,"quoteStyle")&&(_t.quoteStyle=ie.quoteStyle),ke(hr,_t,Xt+1,ir)}return ke(hr,ie,Xt+1,ir)}if(typeof Oe=="function"&&!We(Oe)){var Ee=At(Oe),we=Qr(Oe,sr);return"[Function"+(Ee?": "+Ee:" (anonymous)")+"]"+(we.length>0?" { "+B.call(we,", ")+" }":"")}if(Pe(Oe)){var Ne=re?T.call(String(Oe),/^(Symbol\(.*\))_[^)]*$/,"$1"):ne.call(Oe);return typeof Oe=="object"&&!re?Ft(Ne):Ne}if(Mt(Oe)){for(var ze="<"+D.call(String(Oe.nodeName)),it=Oe.attributes||[],xt=0;xt<it.length;xt++)ze+=" "+it[xt].name+"="+he(fe(it[xt].value),"double",ie);return ze+=">",Oe.childNodes&&Oe.childNodes.length&&(ze+="..."),ze+="</"+D.call(String(Oe.nodeName))+">",ze}if(Me(Oe)){if(Oe.length===0)return"[]";var lt=Qr(Oe,sr);return Gt&&!Ht(lt)?"["+Ir(lt,Gt)+"]":"[ "+B.call(lt,", ")+" ]"}if(Be(Oe)){var Et=Qr(Oe,sr);return!("cause"in Error.prototype)&&"cause"in Oe&&!G.call(Oe,"cause")?"{ ["+String(Oe)+"] "+B.call(O.call("[cause]: "+sr(Oe.cause),Et),", ")+" }":Et.length===0?"["+String(Oe)+"]":"{ ["+String(Oe)+"] "+B.call(Et,", ")+" }"}if(typeof Oe=="object"&&ue){if(z&&typeof Oe[z]=="function"&&W)return W(Oe,{depth:wt-Xt});if(ue!=="symbol"&&typeof Oe.inspect=="function")return Oe.inspect()}if(qe(Oe)){var It=[];return s&&s.call(Oe,function(hr,ar){It.push(sr(ar,Oe,!0)+" => "+sr(hr,Oe))}),nr("Map",n.call(Oe),It,Gt)}if(St(Oe)){var Tt=[];return l&&l.call(Oe,function(hr){Tt.push(sr(hr,Oe))}),nr("Set",o.call(Oe),Tt,Gt)}if(mt(Oe))return Qt("WeakMap");if(bt(Oe))return Qt("WeakSet");if(st(Oe))return Qt("WeakRef");if(tt(Oe))return Ft(sr(Number(Oe)));if(Qe(Oe))return Ft(sr(Q.call(Oe)));if(Ue(Oe))return Ft(E.call(Oe));if(rt(Oe))return Ft(sr(String(Oe)));if(typeof window<"u"&&Oe===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Oe===globalThis||typeof commonjsGlobal<"u"&&Oe===commonjsGlobal)return"{ [object globalThis] }";if(!Ye(Oe)&&!We(Oe)){var Rt=Qr(Oe,sr),Dt=K?K(Oe)===Object.prototype:Oe instanceof Object||Oe.constructor===Object,Ct=Oe instanceof Object?"":"null prototype",or=!Dt&&se&&Object(Oe)===Oe&&se in Oe?C.call(ft(Oe),8,-1):Ct?"Object":"",_r=Dt||typeof Oe.constructor!="function"?"":Oe.constructor.name?Oe.constructor.name+" ":"",Dr=_r+(or||Ct?"["+B.call(O.call([],or||[],Ct||[]),": ")+"] ":"");return Rt.length===0?Dr+"{}":Gt?Dr+"{"+Ir(Rt,Gt)+"}":Dr+"{ "+B.call(Rt,", ")+" }"}return String(Oe)};function he(ke,Oe,Yt){var Xt=Yt.quoteStyle||Oe,ir=ae[Xt];return ir+ke+ir}function fe(ke){return T.call(String(ke),/"/g,"&quot;")}function Ce(ke){return!se||!(typeof ke=="object"&&(se in ke||typeof ke[se]<"u"))}function Me(ke){return ft(ke)==="[object Array]"&&Ce(ke)}function Ye(ke){return ft(ke)==="[object Date]"&&Ce(ke)}function We(ke){return ft(ke)==="[object RegExp]"&&Ce(ke)}function Be(ke){return ft(ke)==="[object Error]"&&Ce(ke)}function rt(ke){return ft(ke)==="[object String]"&&Ce(ke)}function tt(ke){return ft(ke)==="[object Number]"&&Ce(ke)}function Ue(ke){return ft(ke)==="[object Boolean]"&&Ce(ke)}function Pe(ke){if(re)return ke&&typeof ke=="object"&&ke instanceof Symbol;if(typeof ke=="symbol")return!0;if(!ke||typeof ke!="object"||!ne)return!1;try{return ne.call(ke),!0}catch{}return!1}function Qe(ke){if(!ke||typeof ke!="object"||!Q)return!1;try{return Q.call(ke),!0}catch{}return!1}var Je=Object.prototype.hasOwnProperty||function(ke){return ke in this};function nt(ke,Oe){return Je.call(ke,Oe)}function ft(ke){return x.call(ke)}function At(ke){if(ke.name)return ke.name;var Oe=S.call(b.call(ke),/^function\s*([\w$]+)/);return Oe?Oe[1]:null}function ot(ke,Oe){if(ke.indexOf)return ke.indexOf(Oe);for(var Yt=0,Xt=ke.length;Yt<Xt;Yt++)if(ke[Yt]===Oe)return Yt;return-1}function qe(ke){if(!n||!ke||typeof ke!="object")return!1;try{n.call(ke);try{o.call(ke)}catch{return!0}return ke instanceof Map}catch{}return!1}function mt(ke){if(!c||!ke||typeof ke!="object")return!1;try{c.call(ke,c);try{p.call(ke,p)}catch{return!0}return ke instanceof WeakMap}catch{}return!1}function st(ke){if(!g||!ke||typeof ke!="object")return!1;try{return g.call(ke),!0}catch{}return!1}function St(ke){if(!o||!ke||typeof ke!="object")return!1;try{o.call(ke);try{n.call(ke)}catch{return!0}return ke instanceof Set}catch{}return!1}function bt(ke){if(!p||!ke||typeof ke!="object")return!1;try{p.call(ke,p);try{c.call(ke,c)}catch{return!0}return ke instanceof WeakSet}catch{}return!1}function Mt(ke){return!ke||typeof ke!="object"?!1:typeof HTMLElement<"u"&&ke instanceof HTMLElement?!0:typeof ke.nodeName=="string"&&typeof ke.getAttribute=="function"}function pt(ke,Oe){if(ke.length>Oe.maxStringLength){var Yt=ke.length-Oe.maxStringLength,Xt="... "+Yt+" more character"+(Yt>1?"s":"");return pt(C.call(ke,0,Oe.maxStringLength),Oe)+Xt}var ir=ce[Oe.quoteStyle||"single"];ir.lastIndex=0;var ie=T.call(T.call(ke,ir,"\\$1"),/[\x00-\x1f]/g,rr);return he(ie,"single",Oe)}function rr(ke){var Oe=ke.charCodeAt(0),Yt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Oe];return Yt?"\\"+Yt:"\\x"+(Oe<16?"0":"")+I.call(Oe.toString(16))}function Ft(ke){return"Object("+ke+")"}function Qt(ke){return ke+" { ? }"}function nr(ke,Oe,Yt,Xt){var ir=Xt?Ir(Yt,Xt):B.call(Yt,", ");return ke+" ("+Oe+") {"+ir+"}"}function Ht(ke){for(var Oe=0;Oe<ke.length;Oe++)if(ot(ke[Oe],`
`)>=0)return!1;return!0}function Ar(ke,Oe){var Yt;if(ke.indent==="	")Yt="	";else if(typeof ke.indent=="number"&&ke.indent>0)Yt=B.call(Array(ke.indent+1)," ");else return null;return{base:Yt,prev:B.call(Array(Oe+1),Yt)}}function Ir(ke,Oe){if(ke.length===0)return"";var Yt=`
`+Oe.prev+Oe.base;return Yt+B.call(ke,","+Yt)+`
`+Oe.prev}function Qr(ke,Oe){var Yt=Me(ke),Xt=[];if(Yt){Xt.length=ke.length;for(var ir=0;ir<ke.length;ir++)Xt[ir]=nt(ke,ir)?Oe(ke[ir],ke):""}var ie=typeof Z=="function"?Z(ke):[],ue;if(re){ue={};for(var ve=0;ve<ie.length;ve++)ue["$"+ie[ve]]=ie[ve]}for(var Ie in ke)nt(ke,Ie)&&(Yt&&String(Number(Ie))===Ie&&Ie<ke.length||re&&ue["$"+Ie]instanceof Symbol||(P.call(/[^\w$]/,Ie)?Xt.push(Oe(Ie,ke)+": "+Oe(ke[Ie],ke)):Xt.push(Ie+": "+Oe(ke[Ie],ke))));if(typeof Z=="function")for(var Ze=0;Ze<ie.length;Ze++)G.call(ke,ie[Ze])&&Xt.push("["+Oe(ie[Ze])+"]: "+Oe(ke[ie[Ze]],ke));return Xt}return objectInspect}var sideChannelList,hasRequiredSideChannelList;function requireSideChannelList(){if(hasRequiredSideChannelList)return sideChannelList;hasRequiredSideChannelList=1;var t=requireObjectInspect(),e=requireType(),n=function(l,u,c){for(var d=l,p;(p=d.next)!=null;d=p)if(p.key===u)return d.next=p.next,c||(p.next=l.next,l.next=p),p},s=function(l,u){if(l){var c=n(l,u);return c&&c.value}},i=function(l,u,c){var d=n(l,u);d?d.value=c:l.next={key:u,next:l.next,value:c}},a=function(l,u){return l?!!n(l,u):!1},o=function(l,u){if(l)return n(l,u,!0)};return sideChannelList=function(){var u,c={assert:function(d){if(!c.has(d))throw new e("Side channel does not contain "+t(d))},delete:function(d){var p=u&&u.next,m=o(u,d);return m&&p&&p===m&&(u=void 0),!!m},get:function(d){return s(u,d)},has:function(d){return a(u,d)},set:function(d,p){u||(u={next:void 0}),i(u,d,p)}};return c},sideChannelList}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range$1,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range$1=RangeError),range$1}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs$2,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs$2=Math.abs),abs$2}var floor$1,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor$1=Math.floor),floor$1}var max$2,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max$2=Math.max),max$2}var min$2,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min$2=Math.min),min$2}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round$2,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round$2=Math.round),round$2}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign$1,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1;hasRequiredSign=1;var t=require_isNaN();return sign$1=function(n){return t(n)||n===0?n:n<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var t=requireGOPD();if(t)try{t([],"length")}catch{t=null}return gopd=t,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return esDefineProperty=t,esDefineProperty}var shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var t=requireEsObjectAtoms();return Object_getPrototypeOf=t.getPrototypeOf||null,Object_getPrototypeOf}var implementation$1,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$1;hasRequiredImplementation=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,s="[object Function]",i=function(u,c){for(var d=[],p=0;p<u.length;p+=1)d[p]=u[p];for(var m=0;m<c.length;m+=1)d[m+u.length]=c[m];return d},a=function(u,c){for(var d=[],p=c,m=0;p<u.length;p+=1,m+=1)d[m]=u[p];return d},o=function(l,u){for(var c="",d=0;d<l.length;d+=1)c+=l[d],d+1<l.length&&(c+=u);return c};return implementation$1=function(u){var c=this;if(typeof c!="function"||e.apply(c)!==s)throw new TypeError(t+c);for(var d=a(arguments,1),p,m=function(){if(this instanceof p){var S=c.apply(this,i(d,arguments));return Object(S)===S?S:this}return c.apply(u,i(d,arguments))},g=n(0,c.length-d.length),E=[],x=0;x<g;x++)E[x]="$"+x;if(p=Function("binder","return function ("+o(E,",")+"){ return binder.apply(this,arguments); }")(m),c.prototype){var b=function(){};b.prototype=c.prototype,p.prototype=new b,b.prototype=null}return p},implementation$1}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation();return functionBind=Function.prototype.bind||t,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var t=requireFunctionBind(),e=requireFunctionApply(),n=requireFunctionCall(),s=requireReflectApply();return actualApply=s||t.call(n,e),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var t=requireFunctionBind(),e=requireType(),n=requireFunctionCall(),s=requireActualApply();return callBindApplyHelpers=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return s(t,n,a)},callBindApplyHelpers}var get$3,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get$3;hasRequiredGet=1;var t=requireCallBindApplyHelpers(),e=requireGopd(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var s=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,a=i.getPrototypeOf;return get$3=s&&typeof s.get=="function"?t([s.get]):typeof a=="function"?function(l){return a(l==null?l:i(l))}:!1,get$3}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var t=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),n=requireGet();return getProto=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=requireFunctionBind();return hasown=n.call(t,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=requireEsObjectAtoms(),n=requireEsErrors(),s=require_eval(),i=requireRange(),a=requireRef(),o=requireSyntax(),l=requireType(),u=requireUri(),c=requireAbs(),d=requireFloor(),p=requireMax(),m=requireMin(),g=requirePow(),E=requireRound(),x=requireSign(),b=Function,S=function(We){try{return b('"use strict"; return ('+We+").constructor;")()}catch{}},C=requireGopd(),T=requireEsDefineProperty(),I=function(){throw new l},D=C?function(){try{return arguments.callee,I}catch{try{return C(arguments,"callee").get}catch{return I}}}():I,P=requireHasSymbols()(),O=requireGetProto(),B=requireObject_getPrototypeOf(),F=requireReflect_getPrototypeOf(),H=requireFunctionApply(),Q=requireFunctionCall(),Z={},ne=typeof Uint8Array>"u"||!O?t:O(Uint8Array),re={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":P&&O?O([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":Z,"%AsyncGenerator%":Z,"%AsyncGeneratorFunction%":Z,"%AsyncIteratorPrototype%":Z,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":Z,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":P&&O?O(O([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!P||!O?t:O(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":C,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!P||!O?t:O(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":P&&O?O(""[Symbol.iterator]()):t,"%Symbol%":P?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":D,"%TypedArray%":ne,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":Q,"%Function.prototype.apply%":H,"%Object.defineProperty%":T,"%Object.getPrototypeOf%":B,"%Math.abs%":c,"%Math.floor%":d,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":E,"%Math.sign%":x,"%Reflect.getPrototypeOf%":F};if(O)try{null.error}catch(We){var se=O(O(We));re["%Error.prototype%"]=se}var G=function We(Be){var rt;if(Be==="%AsyncFunction%")rt=S("async function () {}");else if(Be==="%GeneratorFunction%")rt=S("function* () {}");else if(Be==="%AsyncGeneratorFunction%")rt=S("async function* () {}");else if(Be==="%AsyncGenerator%"){var tt=We("%AsyncGeneratorFunction%");tt&&(rt=tt.prototype)}else if(Be==="%AsyncIteratorPrototype%"){var Ue=We("%AsyncGenerator%");Ue&&O&&(rt=O(Ue.prototype))}return re[Be]=rt,rt},K={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=requireFunctionBind(),W=requireHasown(),ee=M.call(Q,Array.prototype.concat),z=M.call(H,Array.prototype.splice),ae=M.call(Q,String.prototype.replace),ce=M.call(Q,String.prototype.slice),he=M.call(Q,RegExp.prototype.exec),fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ce=/\\(\\)?/g,Me=function(Be){var rt=ce(Be,0,1),tt=ce(Be,-1);if(rt==="%"&&tt!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(tt==="%"&&rt!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var Ue=[];return ae(Be,fe,function(Pe,Qe,Je,nt){Ue[Ue.length]=Je?ae(nt,Ce,"$1"):Qe||Pe}),Ue},Ye=function(Be,rt){var tt=Be,Ue;if(W(K,tt)&&(Ue=K[tt],tt="%"+Ue[0]+"%"),W(re,tt)){var Pe=re[tt];if(Pe===Z&&(Pe=G(tt)),typeof Pe>"u"&&!rt)throw new l("intrinsic "+Be+" exists, but is not available. Please file an issue!");return{alias:Ue,name:tt,value:Pe}}throw new o("intrinsic "+Be+" does not exist!")};return getIntrinsic=function(Be,rt){if(typeof Be!="string"||Be.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof rt!="boolean")throw new l('"allowMissing" argument must be a boolean');if(he(/^%?[^%]*%?$/,Be)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var tt=Me(Be),Ue=tt.length>0?tt[0]:"",Pe=Ye("%"+Ue+"%",rt),Qe=Pe.name,Je=Pe.value,nt=!1,ft=Pe.alias;ft&&(Ue=ft[0],z(tt,ee([0,1],ft)));for(var At=1,ot=!0;At<tt.length;At+=1){var qe=tt[At],mt=ce(qe,0,1),st=ce(qe,-1);if((mt==='"'||mt==="'"||mt==="`"||st==='"'||st==="'"||st==="`")&&mt!==st)throw new o("property names with quotes must have matching quotes");if((qe==="constructor"||!ot)&&(nt=!0),Ue+="."+qe,Qe="%"+Ue+"%",W(re,Qe))Je=re[Qe];else if(Je!=null){if(!(qe in Je)){if(!rt)throw new l("base intrinsic for "+Be+" exists, but the property is not available.");return}if(C&&At+1>=tt.length){var St=C(Je,qe);ot=!!St,ot&&"get"in St&&!("originalValue"in St.get)?Je=St.get:Je=Je[qe]}else ot=W(Je,qe),Je=Je[qe];ot&&!nt&&(re[Qe]=Je)}}return Je},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBindApplyHelpers(),n=e([t("%String.prototype.indexOf%")]);return callBound=function(i,a){var o=t(i,!!a);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},callBound}var sideChannelMap,hasRequiredSideChannelMap;function requireSideChannelMap(){if(hasRequiredSideChannelMap)return sideChannelMap;hasRequiredSideChannelMap=1;var t=requireGetIntrinsic(),e=requireCallBound(),n=requireObjectInspect(),s=requireType(),i=t("%Map%",!0),a=e("Map.prototype.get",!0),o=e("Map.prototype.set",!0),l=e("Map.prototype.has",!0),u=e("Map.prototype.delete",!0),c=e("Map.prototype.size",!0);return sideChannelMap=!!i&&function(){var p,m={assert:function(g){if(!m.has(g))throw new s("Side channel does not contain "+n(g))},delete:function(g){if(p){var E=u(p,g);return c(p)===0&&(p=void 0),E}return!1},get:function(g){if(p)return a(p,g)},has:function(g){return p?l(p,g):!1},set:function(g,E){p||(p=new i),o(p,g,E)}};return m},sideChannelMap}var sideChannelWeakmap,hasRequiredSideChannelWeakmap;function requireSideChannelWeakmap(){if(hasRequiredSideChannelWeakmap)return sideChannelWeakmap;hasRequiredSideChannelWeakmap=1;var t=requireGetIntrinsic(),e=requireCallBound(),n=requireObjectInspect(),s=requireSideChannelMap(),i=requireType(),a=t("%WeakMap%",!0),o=e("WeakMap.prototype.get",!0),l=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("WeakMap.prototype.delete",!0);return sideChannelWeakmap=a?function(){var p,m,g={assert:function(E){if(!g.has(E))throw new i("Side channel does not contain "+n(E))},delete:function(E){if(a&&E&&(typeof E=="object"||typeof E=="function")){if(p)return c(p,E)}else if(s&&m)return m.delete(E);return!1},get:function(E){return a&&E&&(typeof E=="object"||typeof E=="function")&&p?o(p,E):m&&m.get(E)},has:function(E){return a&&E&&(typeof E=="object"||typeof E=="function")&&p?u(p,E):!!m&&m.has(E)},set:function(E,x){a&&E&&(typeof E=="object"||typeof E=="function")?(p||(p=new a),l(p,E,x)):s&&(m||(m=s()),m.set(E,x))}};return g}:s,sideChannelWeakmap}var sideChannel,hasRequiredSideChannel;function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var t=requireType(),e=requireObjectInspect(),n=requireSideChannelList(),s=requireSideChannelMap(),i=requireSideChannelWeakmap(),a=i||s||n;return sideChannel=function(){var l,u={assert:function(c){if(!u.has(c))throw new t("Side channel does not contain "+e(c))},delete:function(c){return!!l&&l.delete(c)},get:function(c){return l&&l.get(c)},has:function(c){return!!l&&l.has(c)},set:function(c,d){l||(l=a()),l.set(c,d)}};return u},sideChannel}var formats,hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats;hasRequiredFormats=1;var t=String.prototype.replace,e=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};return formats={default:n.RFC3986,formatters:{RFC1738:function(s){return t.call(s,e,"+")},RFC3986:function(s){return String(s)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986},formats}var utils$1,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$1;hasRequiredUtils=1;var t=requireFormats(),e=Object.prototype.hasOwnProperty,n=Array.isArray,s=function(){for(var b=[],S=0;S<256;++S)b.push("%"+((S<16?"0":"")+S.toString(16)).toUpperCase());return b}(),i=function(S){for(;S.length>1;){var C=S.pop(),T=C.obj[C.prop];if(n(T)){for(var I=[],D=0;D<T.length;++D)typeof T[D]<"u"&&I.push(T[D]);C.obj[C.prop]=I}}},a=function(S,C){for(var T=C&&C.plainObjects?{__proto__:null}:{},I=0;I<S.length;++I)typeof S[I]<"u"&&(T[I]=S[I]);return T},o=function b(S,C,T){if(!C)return S;if(typeof C!="object"&&typeof C!="function"){if(n(S))S.push(C);else if(S&&typeof S=="object")(T&&(T.plainObjects||T.allowPrototypes)||!e.call(Object.prototype,C))&&(S[C]=!0);else return[S,C];return S}if(!S||typeof S!="object")return[S].concat(C);var I=S;return n(S)&&!n(C)&&(I=a(S,T)),n(S)&&n(C)?(C.forEach(function(D,P){if(e.call(S,P)){var O=S[P];O&&typeof O=="object"&&D&&typeof D=="object"?S[P]=b(O,D,T):S.push(D)}else S[P]=D}),S):Object.keys(C).reduce(function(D,P){var O=C[P];return e.call(D,P)?D[P]=b(D[P],O,T):D[P]=O,D},I)},l=function(S,C){return Object.keys(C).reduce(function(T,I){return T[I]=C[I],T},S)},u=function(b,S,C){var T=b.replace(/\+/g," ");if(C==="iso-8859-1")return T.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(T)}catch{return T}},c=1024,d=function(S,C,T,I,D){if(S.length===0)return S;var P=S;if(typeof S=="symbol"?P=Symbol.prototype.toString.call(S):typeof S!="string"&&(P=String(S)),T==="iso-8859-1")return escape(P).replace(/%u[0-9a-f]{4}/gi,function(ne){return"%26%23"+parseInt(ne.slice(2),16)+"%3B"});for(var O="",B=0;B<P.length;B+=c){for(var F=P.length>=c?P.slice(B,B+c):P,H=[],Q=0;Q<F.length;++Q){var Z=F.charCodeAt(Q);if(Z===45||Z===46||Z===95||Z===126||Z>=48&&Z<=57||Z>=65&&Z<=90||Z>=97&&Z<=122||D===t.RFC1738&&(Z===40||Z===41)){H[H.length]=F.charAt(Q);continue}if(Z<128){H[H.length]=s[Z];continue}if(Z<2048){H[H.length]=s[192|Z>>6]+s[128|Z&63];continue}if(Z<55296||Z>=57344){H[H.length]=s[224|Z>>12]+s[128|Z>>6&63]+s[128|Z&63];continue}Q+=1,Z=65536+((Z&1023)<<10|F.charCodeAt(Q)&1023),H[H.length]=s[240|Z>>18]+s[128|Z>>12&63]+s[128|Z>>6&63]+s[128|Z&63]}O+=H.join("")}return O},p=function(S){for(var C=[{obj:{o:S},prop:"o"}],T=[],I=0;I<C.length;++I)for(var D=C[I],P=D.obj[D.prop],O=Object.keys(P),B=0;B<O.length;++B){var F=O[B],H=P[F];typeof H=="object"&&H!==null&&T.indexOf(H)===-1&&(C.push({obj:P,prop:F}),T.push(H))}return i(C),S},m=function(S){return Object.prototype.toString.call(S)==="[object RegExp]"},g=function(S){return!S||typeof S!="object"?!1:!!(S.constructor&&S.constructor.isBuffer&&S.constructor.isBuffer(S))},E=function(S,C){return[].concat(S,C)},x=function(S,C){if(n(S)){for(var T=[],I=0;I<S.length;I+=1)T.push(C(S[I]));return T}return C(S)};return utils$1={arrayToObject:a,assign:l,combine:E,compact:p,decode:u,encode:d,isBuffer:g,isRegExp:m,maybeMap:x,merge:o},utils$1}var stringify_1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify_1;hasRequiredStringify=1;var t=requireSideChannel(),e=requireUtils(),n=requireFormats(),s=Object.prototype.hasOwnProperty,i={brackets:function(b){return b+"[]"},comma:"comma",indices:function(b,S){return b+"["+S+"]"},repeat:function(b){return b}},a=Array.isArray,o=Array.prototype.push,l=function(x,b){o.apply(x,a(b)?b:[b])},u=Date.prototype.toISOString,c=n.default,d={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:c,formatter:n.formatters[c],indices:!1,serializeDate:function(b){return u.call(b)},skipNulls:!1,strictNullHandling:!1},p=function(b){return typeof b=="string"||typeof b=="number"||typeof b=="boolean"||typeof b=="symbol"||typeof b=="bigint"},m={},g=function x(b,S,C,T,I,D,P,O,B,F,H,Q,Z,ne,re,se,G,K){for(var M=b,W=K,ee=0,z=!1;(W=W.get(m))!==void 0&&!z;){var ae=W.get(b);if(ee+=1,typeof ae<"u"){if(ae===ee)throw new RangeError("Cyclic object value");z=!0}typeof W.get(m)>"u"&&(ee=0)}if(typeof F=="function"?M=F(S,M):M instanceof Date?M=Z(M):C==="comma"&&a(M)&&(M=e.maybeMap(M,function(Qe){return Qe instanceof Date?Z(Qe):Qe})),M===null){if(D)return B&&!se?B(S,d.encoder,G,"key",ne):S;M=""}if(p(M)||e.isBuffer(M)){if(B){var ce=se?S:B(S,d.encoder,G,"key",ne);return[re(ce)+"="+re(B(M,d.encoder,G,"value",ne))]}return[re(S)+"="+re(String(M))]}var he=[];if(typeof M>"u")return he;var fe;if(C==="comma"&&a(M))se&&B&&(M=e.maybeMap(M,B)),fe=[{value:M.length>0?M.join(",")||null:void 0}];else if(a(F))fe=F;else{var Ce=Object.keys(M);fe=H?Ce.sort(H):Ce}var Me=O?String(S).replace(/\./g,"%2E"):String(S),Ye=T&&a(M)&&M.length===1?Me+"[]":Me;if(I&&a(M)&&M.length===0)return Ye+"[]";for(var We=0;We<fe.length;++We){var Be=fe[We],rt=typeof Be=="object"&&Be&&typeof Be.value<"u"?Be.value:M[Be];if(!(P&&rt===null)){var tt=Q&&O?String(Be).replace(/\./g,"%2E"):String(Be),Ue=a(M)?typeof C=="function"?C(Ye,tt):Ye:Ye+(Q?"."+tt:"["+tt+"]");K.set(b,ee);var Pe=t();Pe.set(m,K),l(he,x(rt,Ue,C,T,I,D,P,O,C==="comma"&&se&&a(M)?null:B,F,H,Q,Z,ne,re,se,G,Pe))}}return he},E=function(b){if(!b)return d;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.encodeDotInKeys<"u"&&typeof b.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(b.encoder!==null&&typeof b.encoder<"u"&&typeof b.encoder!="function")throw new TypeError("Encoder has to be a function.");var S=b.charset||d.charset;if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var C=n.default;if(typeof b.format<"u"){if(!s.call(n.formatters,b.format))throw new TypeError("Unknown format option provided.");C=b.format}var T=n.formatters[C],I=d.filter;(typeof b.filter=="function"||a(b.filter))&&(I=b.filter);var D;if(b.arrayFormat in i?D=b.arrayFormat:"indices"in b?D=b.indices?"indices":"repeat":D=d.arrayFormat,"commaRoundTrip"in b&&typeof b.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var P=typeof b.allowDots>"u"?b.encodeDotInKeys===!0?!0:d.allowDots:!!b.allowDots;return{addQueryPrefix:typeof b.addQueryPrefix=="boolean"?b.addQueryPrefix:d.addQueryPrefix,allowDots:P,allowEmptyArrays:typeof b.allowEmptyArrays=="boolean"?!!b.allowEmptyArrays:d.allowEmptyArrays,arrayFormat:D,charset:S,charsetSentinel:typeof b.charsetSentinel=="boolean"?b.charsetSentinel:d.charsetSentinel,commaRoundTrip:!!b.commaRoundTrip,delimiter:typeof b.delimiter>"u"?d.delimiter:b.delimiter,encode:typeof b.encode=="boolean"?b.encode:d.encode,encodeDotInKeys:typeof b.encodeDotInKeys=="boolean"?b.encodeDotInKeys:d.encodeDotInKeys,encoder:typeof b.encoder=="function"?b.encoder:d.encoder,encodeValuesOnly:typeof b.encodeValuesOnly=="boolean"?b.encodeValuesOnly:d.encodeValuesOnly,filter:I,format:C,formatter:T,serializeDate:typeof b.serializeDate=="function"?b.serializeDate:d.serializeDate,skipNulls:typeof b.skipNulls=="boolean"?b.skipNulls:d.skipNulls,sort:typeof b.sort=="function"?b.sort:null,strictNullHandling:typeof b.strictNullHandling=="boolean"?b.strictNullHandling:d.strictNullHandling}};return stringify_1=function(x,b){var S=x,C=E(b),T,I;typeof C.filter=="function"?(I=C.filter,S=I("",S)):a(C.filter)&&(I=C.filter,T=I);var D=[];if(typeof S!="object"||S===null)return"";var P=i[C.arrayFormat],O=P==="comma"&&C.commaRoundTrip;T||(T=Object.keys(S)),C.sort&&T.sort(C.sort);for(var B=t(),F=0;F<T.length;++F){var H=T[F],Q=S[H];C.skipNulls&&Q===null||l(D,g(Q,H,P,O,C.allowEmptyArrays,C.strictNullHandling,C.skipNulls,C.encodeDotInKeys,C.encode?C.encoder:null,C.filter,C.sort,C.allowDots,C.serializeDate,C.format,C.formatter,C.encodeValuesOnly,C.charset,B))}var Z=D.join(C.delimiter),ne=C.addQueryPrefix===!0?"?":"";return C.charsetSentinel&&(C.charset==="iso-8859-1"?ne+="utf8=%26%2310003%3B&":ne+="utf8=%E2%9C%93&"),Z.length>0?ne+Z:""},stringify_1}var parse$2,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$2;hasRequiredParse=1;var t=requireUtils(),e=Object.prototype.hasOwnProperty,n=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(m){return m.replace(/&#(\d+);/g,function(g,E){return String.fromCharCode(parseInt(E,10))})},a=function(m,g){return m&&typeof m=="string"&&g.comma&&m.indexOf(",")>-1?m.split(","):m},o="utf8=%26%2310003%3B",l="utf8=%E2%9C%93",u=function(g,E){var x={__proto__:null},b=E.ignoreQueryPrefix?g.replace(/^\?/,""):g;b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var S=E.parameterLimit===1/0?void 0:E.parameterLimit,C=b.split(E.delimiter,S),T=-1,I,D=E.charset;if(E.charsetSentinel)for(I=0;I<C.length;++I)C[I].indexOf("utf8=")===0&&(C[I]===l?D="utf-8":C[I]===o&&(D="iso-8859-1"),T=I,I=C.length);for(I=0;I<C.length;++I)if(I!==T){var P=C[I],O=P.indexOf("]="),B=O===-1?P.indexOf("="):O+1,F,H;B===-1?(F=E.decoder(P,s.decoder,D,"key"),H=E.strictNullHandling?null:""):(F=E.decoder(P.slice(0,B),s.decoder,D,"key"),H=t.maybeMap(a(P.slice(B+1),E),function(Z){return E.decoder(Z,s.decoder,D,"value")})),H&&E.interpretNumericEntities&&D==="iso-8859-1"&&(H=i(String(H))),P.indexOf("[]=")>-1&&(H=n(H)?[H]:H);var Q=e.call(x,F);Q&&E.duplicates==="combine"?x[F]=t.combine(x[F],H):(!Q||E.duplicates==="last")&&(x[F]=H)}return x},c=function(m,g,E,x){for(var b=x?g:a(g,E),S=m.length-1;S>=0;--S){var C,T=m[S];if(T==="[]"&&E.parseArrays)C=E.allowEmptyArrays&&(b===""||E.strictNullHandling&&b===null)?[]:[].concat(b);else{C=E.plainObjects?{__proto__:null}:{};var I=T.charAt(0)==="["&&T.charAt(T.length-1)==="]"?T.slice(1,-1):T,D=E.decodeDotInKeys?I.replace(/%2E/g,"."):I,P=parseInt(D,10);!E.parseArrays&&D===""?C={0:b}:!isNaN(P)&&T!==D&&String(P)===D&&P>=0&&E.parseArrays&&P<=E.arrayLimit?(C=[],C[P]=b):D!=="__proto__"&&(C[D]=b)}b=C}return b},d=function(g,E,x,b){if(g){var S=x.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,C=/(\[[^[\]]*])/,T=/(\[[^[\]]*])/g,I=x.depth>0&&C.exec(S),D=I?S.slice(0,I.index):S,P=[];if(D){if(!x.plainObjects&&e.call(Object.prototype,D)&&!x.allowPrototypes)return;P.push(D)}for(var O=0;x.depth>0&&(I=T.exec(S))!==null&&O<x.depth;){if(O+=1,!x.plainObjects&&e.call(Object.prototype,I[1].slice(1,-1))&&!x.allowPrototypes)return;P.push(I[1])}if(I){if(x.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+x.depth+" and strictDepth is true");P.push("["+S.slice(I.index)+"]")}return c(P,E,x,b)}},p=function(g){if(!g)return s;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=typeof g.charset>"u"?s.charset:g.charset,x=typeof g.duplicates>"u"?s.duplicates:g.duplicates;if(x!=="combine"&&x!=="first"&&x!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var b=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:s.allowDots:!!g.allowDots;return{allowDots:b,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:s.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:s.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:s.arrayLimit,charset:E,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:s.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:s.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:s.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:s.decoder,delimiter:typeof g.delimiter=="string"||t.isRegExp(g.delimiter)?g.delimiter:s.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:s.depth,duplicates:x,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:s.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:s.plainObjects,strictDepth:typeof g.strictDepth=="boolean"?!!g.strictDepth:s.strictDepth,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:s.strictNullHandling}};return parse$2=function(m,g){var E=p(g);if(m===""||m===null||typeof m>"u")return E.plainObjects?{__proto__:null}:{};for(var x=typeof m=="string"?u(m,E):m,b=E.plainObjects?{__proto__:null}:{},S=Object.keys(x),C=0;C<S.length;++C){var T=S[C],I=d(T,x[T],E,typeof m=="string");b=t.merge(b,I,E)}return E.allowSparse===!0?b:t.compact(b)},parse$2}var lib$2,hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$2;hasRequiredLib$2=1;var t=requireStringify(),e=requireParse(),n=requireFormats();return lib$2={formats:n,parse:e,stringify:t},lib$2}var libExports$2=requireLib$2();const qs=getDefaultExportFromCjs(libExports$2);function getDefault(t){return{_id:"DEFAULT",codebase:"API",environment:t.env.toUpperCase(),order:0,pullRequestUrl:"",serverKey:`ace-api-${t.env}`,serverUrl:t.baseUrl,title:t.title,updatedAt:new Date,isDefault:!0}}const ApiEndpoint={init(){const t=window.aceConstants.ACEAPICONF,e=get$4("api","hijack")||set$2("api","hijack",getDefault(t)).hijack;hijack({baseUrl:e.serverUrl})},async getServerList(t={env:"stg",title:"API Staging"}){try{const{data:e}=await axios.get(BIFROST_URL,{params:{aceauth:ACE_AUTH,criteria:{codebase:CODE_BASE}},paramsSerializer(n){return qs.stringify(n,{arrayFormat:"brackets"})}});return["stg"].includes(t.env)&&e.unshift(getDefault({env:"loc",title:"API Localhost",baseUrl:"http://localhost:3030/api/1/",basicAuth:"Basic NjQ2MUZIMlRXODY1dnVzOXB4eDlvdzdCSzQ4Mlk3WFc6"})),e.length?e:[getDefault(t)]}catch{return[getDefault(t)]}},getCurrentApi(t="",e=[],n=""){const s=`ace-${CODE_BASE}-stg-pr-${n}`;return n&&e.find(i=>i.serverKey===s)||e.find(i=>i.environment===t)||e[0]}},{aceRootScope}=window,isParent$1=()=>aceRootScope?.progressCurrent&&aceRootScope?.progressCurrent.accountType==="parent",isFirefox=()=>navigator.userAgent.toLowerCase().includes("firefox"),initVolume=()=>{ModelAbstract.getCurrent("volume")===null&&ModelAbstract.setCurrent(1,"volume")},AceToolbelt={initVolume,isFirefox,isParent:isParent$1};function getDomain(){return window.location.host.split(".")[0]}function logCourseflowExit(t="BACKGROUND"){const e=store.getState(),n=e.progress._id,s=e.courseflow?.currentNodeId,i=e.courseflow?.chapterCacheKey;s&&i&&courseflowExit(n,i,s,t).catch(a=>{console.error(a)})}function handleVisibilityChange(t,e){const n=t.ui.activeState??"dash.index",s=t.progress.updatedAt,i=t.ui.modals??[];document.hidden?COURSE_LIST.includes(n)&&logCourseflowExit("BACKGROUND"):e?window.location.reload():n==="dash.index"&&s&&window.aceRootScope.progressSync().then(a=>{s!==a.updatedAt&&i.length===0&&window.location.reload()})}function useSessionSync(){const t=reactExports.useRef(!1);reactExports.useEffect(()=>{const e=sessionSync.on("session:refresh",()=>{document.hidden?t.current=!0:window.location.reload()}),n=()=>{handleVisibilityChange(store.getState(),t.current)};return document.addEventListener("visibilitychange",n),()=>{e(),document.removeEventListener("visibilitychange",n)}},[])}const configureData=()=>{window.aceRootScope={},Object.assign(window.aceRootScope,globals),window.aceRootScope.domain=getDomain(),init$4(),ApiEndpoint.init(),init$1(),init$2(window.aceRootScope),AceToolbelt.initVolume();const t=window.document.getElementById("ace-app")??{getAttribute:()=>""};window.aceRootScope.version=t.getAttribute("ace-version");const e=UserObj.getCurrent();if(e&&!lodashExports.isEmpty(e._id)){store.dispatch({type:IDENTIFY_USER,payload:{user:e}}),store.dispatch(genericAnalyticsAndIterableEvent("Application Opened",{user_id:e._id}));const n=e.progressList.find(s=>s._id===e.defProgressId);n&&(window.aceRootScope.progressCurrent=n)}return handleVisibilityChange(store.getState(),!1),window.aceRootScope.toolbelt=AceToolbelt,window.location.pathname!=="localhost"&&(init$5({dsn:"https://856419d8b26c4c379e3f554a77b5eb9c@o1007654.ingest.sentry.io/5970685",sampleRate:1,tracesSampleRate:.01,environment:isHijackable()?"dev":"production",release:"dev-web@"+window.aceRootScope.version,beforeSend(n,s){const i=s.originalException;return shouldReportToSentry(i)?n:null}}),e?._id&&setUser({id:e._id})),null},stepIsPublic=(t,e)=>lodashExports.includes(PUBLIC_LIST,t)?!1:(UserObj.signOut(),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"user.signin",params:{rename:t,reparams:JSON.stringify(e)}}}),!0),legacyAngularUtils={onAngularStateChangeStart:(t,e,n)=>{const s=CourseObj.getCurrent(),i=UserObj.getCurrent(),a=ModelAbstract.getCurrent("progress"),o=a&&a.accountType==="parent";if(window.aceRootScope.isMenu=!1,ModelAbstract.getCurrent("student"),window.aceRootScope.pageTitle=`${window.aceRootScope.domainConf.TitleBrowserTab} | ${lodashExports.get(t,"data.pageTitle","Welcome")}`,!i)stepIsPublic(t,e);else{if(i&&a&&!a.isLocked&&hasDirectBlocker(t,lodashExports.get(e,"callingFromPosition")))return redirectToBlocker(t,lodashExports.get(e,"callingFromPosition"));if(i&&t.includes("user.password"))return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"user.signout",params:{redirect:"user.password"}}}),!1;if(lodashExports.includes(NO_USER_LIST,t)||o&&!lodashExports.includes(PARENT_LIST,t)||!o&&t.startsWith("teacher")){const l=o?"dashboard.parent":"dash.index";return store.dispatch({type:REDIRECT_TO_URL,payload:{url:l}}),!1}else if(!a||!s){if(!a&&!s)return navigate(`/user/signin${n}`),!1;if(!lodashExports.includes(NO_COURSE_LIST,t))return lodashExports.isEmpty(i.progressList)?(store.dispatch({type:REDIRECT_TO_URL,payload:{url:"activity.enroll"}}),!1):(store.dispatch({type:REDIRECT_TO_URL,payload:{url:"courseswitch.view"}}),!1)}else if(s&&!window.aceRootScope?.courseCurrent)lodashExports.includes(NO_COURSE_LIST,t)||store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"The course you are trying to access is not allowed on web at this time. Please download our iOS app for iPhone and iPad to continue taking the course.",title:"We're Sorry!",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}]}}});else if(i.username?.includes("@")){if(!o)if(a.isLocked){if(!lodashExports.includes(NO_LOCK_LIST,t))return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),!1}else{if(t==="activity.upgrade"&&a.isPurchased)return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),!1;if(UserObj.isInfoMissing(a,i,null)&&s.type!=="GEN"){if(!lodashExports.includes(NO_LOCK_LIST,t)){store.dispatch({type:REDIRECT_TO_URL,payload:{url:"profiler.formal-standard",params:{callingFromPosition:"SIDEBAR",layoutStyle:"standard",stateId:"PROFILE__STUDENT_INFO",blockerId:"VARID_SIDEBAR"}}});return}}else if(s.verifyType&&!a.verificationId&&!UserObj.courseNeedsNewProfileExperience()){if(!lodashExports.includes(NO_VERIFY_LIST,t))return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"verify.index"}}),!1}else if((a.isAffidavitRequired&&!a.isAffidavitReceived||a.parentInformation?.isAffidavitRequired&&!a.isAffidavitReceived)&&!lodashExports.includes(NO_VERIFY_LIST,t))return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"verify.affidavit"}}),!1}}else if(!lodashExports.includes(NO_COURSE_LIST,t)){store.dispatch({type:REDIRECT_TO_URL,payload:{url:"profiler.formal-standard",params:{callingFromPosition:"SIDEBAR",layoutStyle:"standard",stateId:"PROFILE__STUDENT_INFO",blockerId:"VARID_SIDEBAR"}}});return}}return!1},onAngularStateChangeSuccess:(t,e,n)=>{window.aceRootScope.currentStateName=t,window.aceRootScope.stateStyleClass=`active-state-is--${t.replace(/\./,"-")}`,document.body.classList.toggle("kludge--fullscreen",lodashExports.includes(FULL_SCREEN_LIST,t)),document.body.classList.toggle("no-header",lodashExports.includes(FULL_SCREEN_LIST_NO_HEADER,t));const s=window.aceRootScope.progressCurrent,i=lodashExports.includes(COURSE_LIST,n),a=lodashExports.includes(COURSE_LIST,t);i&&!a&&t!=="user.signout"&&logCourseflowExit("DASH"),store.dispatch({type:HIDE_MODAL}),setProgressBar(t),window.aceRootScope.isCoursePage=a,window.aceRootScope.progressMarker=s?`L${window.aceRootScope.progressCurrent.currentLevel+1}  C${window.aceRootScope.progressCurrent.currentChapter+1}  P${window.aceRootScope.progressCurrent.currentPage+1}`:"",window.aceRootScope.toState=t,window.aceRootScope.isProcessing=!1,window.aceRootScope.errorCode=null,window.aceRootScope.completeIcon="",window.aceRootScope.timerIcon="",window.aceRootScope.completePercent=0,window.aceRootScope.timerPercent=0,clearInterval(window.aceRootScope.qstnInterval),clearTimeout(window.aceRootScope.qstnTimeout)},onAngularStateChangeError:(t,e,n,s,i,a)=>{a.code===404&&store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"We are having trouble connecting to internet. Please try again.",title:"Oof!"}}}),a.modal?(window.aceRootScope.isProcessing=!0,store.dispatch({type:SHOW_MODAL,payload:{modal:{message:a.message??"An unknown error occurred.",title:a.title??"Oops!",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:a.redirect??"dash.index"}}]}}})):a.redirect&&store.dispatch({type:REDIRECT_TO_URL,payload:{url:a.redirect,params:a.params||null}})},updateBodyClasses:(t,e)=>{const n=Object.keys(e).reduce((s,i)=>{let a=s;if(e[i]){const o=e[i];typeof o=="string"&&(a+=`${o} `)}return a},"");t.allDynamicBodySelectors=n}},useAppcuesTrack=()=>{const t=useLocation(),e=useSelector(selectUserState),n=useSelector(selectCourseState),s=useSelector(selectprogressState);reactExports.useEffect(()=>{if(e.username?.includes("@xgritqa.com"))return;if(!window.Appcues){console.warn("Appcues not initialized yet");return}const i={app_type:s.appType??"",brand:window.aceConstants.DOMAINCONF.brandId||(window.aceRootScope?.domainConf?.brandId??""),course_id:n._id||"",course_key:n.key??"",course_segment:n.type??"",course_state:n.state??"",email:e.username??"",platform:"WEB",to:t.pathname,user_id:e._id||"",user_type:s.accountType??e.accountType??"student"};try{window.Appcues.track("Page Loaded",i)}catch(a){console.error("Error tracking with Appcues:",a)}},[t.pathname])};function useDocumentTitle(t,e=!1){const n=reactExports.useRef(document.title);reactExports.useEffect(()=>{document.title=t},[t]),reactExports.useEffect(()=>()=>{e||(document.title=n.current)},[])}const utilities={getQueryParams:()=>{const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries())},toggleDebug:(t,e)=>{call("debug/toggle","POST").then(n=>{const s={...t,isDebug:n.isDebug};ModelAbstract.setCurrent(s,"user"),e(updateUser(s))}).catch(n=>{console.error("Error toggling debug",n)})},isIOSMobile:()=>/iPhone|iPod|iPad/i.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,isHighContrastBrand:t=>t==="FLVS",verifyIsNotPaid:async(t,e,n,s,i)=>{const a=()=>e>-1&&(n>e||n===e&&s>=i),o=async l=>{try{const u=await MilestoneObj.checkMilestone(l,"COURSE");return u&&u.action==="PURCHASE"}catch(u){return console.error("Milestone check failed:",u),!1}};return a()?o(t._id):!1}},defaultThemeKey=window.aceConstants.DOMAINCONF.brandId==="FLVS"?"high-contrast":"light",initialState$3={theme:defaultThemeKey,setTheme:()=>null},ThemeProviderContext=reactExports.createContext(initialState$3);function ThemeProvider({children:t,defaultTheme:e=defaultThemeKey,storageKey:n="theme",...s}){const[i,a]=reactExports.useState(()=>{const l=api.get(n);if(l?.startsWith("ace-")){const u=l.replace("ace-","");return api.set(n,u),u}return l||e});reactExports.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark","high-contrast"),l.classList.add(window.aceConstants.DOMAINCONF.brandId.toLowerCase()),i==="system"){const u=window.aceConstants.DOMAINCONF.brandId!=="FLVS"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(u);return}l.classList.add(i)},[i]);const o=reactExports.useMemo(()=>({theme:i,setTheme:l=>{api.set(n,l),a(l)}}),[i,n]);return jsxRuntimeExports.jsx(ThemeProviderContext.Provider,{...s,value:o,children:t})}const useTheme=()=>{const t=reactExports.useContext(ThemeProviderContext);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},hotkeys=[],useHotkeys=t=>{const e=reactExports.useCallback(n=>{const{ctrlKey:s,shiftKey:i,altKey:a}=n||{};let o;if(t){const u=t.map(c=>({combo:c.combo,description:c.description,callback:c.callback}));o=[...hotkeys,...u]}else o=hotkeys;const l=o.find(u=>{if(n?.key)return`${i?"shift+":""}${s?"ctrl+":""}${a?"alt+":""}${n.key.toLowerCase()}`===u.combo});l&&l.callback()},[t]);reactExports.useEffect(()=>{const n=document;return n&&n.addEventListener("keydown",e),()=>{n&&n.removeEventListener("keydown",e)}},[e])};var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=i(a,s(l)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=i(o,l));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports),useDelayedUnmounting=(t=200)=>{const[e,n]=reactExports.useState("unmounted"),s=()=>{e!=="unmounting"&&n("mounting")},i=()=>{e!=="mounting"&&n("unmounting")};return reactExports.useLayoutEffect(()=>{let a;return e==="unmounting"?a=setTimeout(()=>{n("unmounted")},t):e==="mounting"&&(a=setTimeout(()=>{n("mounted")},t)),()=>{clearTimeout(a)}},[e,t]),[e,s,i]},useKeyPress=(t,e,n=[])=>{const s=i=>{t.includes(i.key)&&e(i)};reactExports.useEffect(()=>(window.addEventListener("keyup",s),()=>{window.removeEventListener("keyup",s)}),n)},useOutOfBounds=(t,e,n)=>{const[s,i]=reactExports.useState(null),[a,o]=reactExports.useState(!1);return reactExports.useLayoutEffect(()=>{let l=s;s||(l=document.querySelector(t),i(l)),e&&(l.getBoundingClientRect().right>e?o(!0):a?setTimeout(()=>o(!1),200):o(!1))},[e,n]),a},useActiveHoverStates=(t=!1)=>{const e={DEFAULT:"Default",HOVER:"Hover",ACTIVE:"Active",DISABLED:"Disabled"},[n,s]=reactExports.useState(t?e.DISABLED:e.DEFAULT);return reactExports.useEffect(()=>{s(t?e.DISABLED:e.DEFAULT)},[t]),[n,()=>{n===e.DEFAULT&&s(e.HOVER)},()=>{(n===e.HOVER||n===e.ACTIVE)&&s(e.DEFAULT)},()=>{n===e.HOVER&&s(e.ACTIVE)},()=>{n===e.ACTIVE&&s(e.HOVER)}]},useWindowSize=()=>{const[t,e]=reactExports.useState([0,0]);return reactExports.useEffect(()=>{function n(){e([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t},useReduxMobileState=()=>{const t=useDispatch(),[e]=useWindowSize(),n=useSelector(selectUIIsMobile);reactExports.useEffect(()=>{(()=>{e<=480&&!n?t({type:SET_IS_MOBILE,payload:{isMobile:!0}}):e>480&&n&&t({type:SET_IS_MOBILE,payload:{isMobile:!1}})})()},[n,t,e])},useModal=()=>{const[t,e]=reactExports.useState(!1);function n(){return e(!t),!t}return{toggleModal:n,showModal:t}},DropDownMenu=({id:t,windowWidth:e,selected:n,className:s,children:i})=>{const a=useOutOfBounds(`#grit-dropdown-menu-${t}`,e,n);return jsxRuntimeExports.jsx("ul",{className:classNames("grit dropdown-menu floating",s,{"dropdown-menu--outOfBounds":a}),id:`grit-dropdown-menu-${t}`,role:"menu","aria-hidden":!n,"data-test":"DropDownMenu",children:i})},MenuItem$1=({onClick:t,itemNumber:e,children:n,"data-test":s,badged:i,meta:a,isCurrent:o})=>jsxRuntimeExports.jsx("li",{className:"grit menu-item",children:jsxRuntimeExports.jsxs("button",{className:`lists-menus__list-title ${o?"current":""}`,onClick:l=>{t(l)},onKeyDown:l=>{l.key==="Enter"&&t(l)},"data-test":s,"aria-label":`Menu Item with title ${n}`,children:[e?jsxRuntimeExports.jsx("span",{className:"item-number",children:e}):null,i?jsxRuntimeExports.jsx("span",{className:"badge"}):null,n?jsxRuntimeExports.jsx("span",{className:"text",children:n}):null,a?jsxRuntimeExports.jsx("span",{className:"meta",children:a}):null]})}),useExperiment=(t,e=500)=>{const[n,s]=reactExports.useState(),[i,a]=reactExports.useState(!0),o=ConfigFeatureflag[t];function l(){const u=typeof o=="boolean"?ExperimentLib.getFlag(t):typeof o=="object"?ExperimentLib.variant(t):ExperimentLib.getValue(t);s(u),a(!1),window.removeEventListener("AmplitudeLoaded",l)}return reactExports.useEffect(()=>{if(ExperimentLib.isReady())l();else{window.addEventListener("AmplitudeLoaded",l);const u=setTimeout(()=>{a(!1),window.removeEventListener("AmplitudeLoaded",l)},e);return()=>{clearTimeout(u),window.removeEventListener("AmplitudeLoaded",l)}}},[t,e]),[n??o,i]};function createDOMMotionComponentProxy(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const isKeyframesTarget=t=>Array.isArray(t);function shallowCompare(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}function getValueState(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function resolveVariantFromProps(t,e,n,s){if(typeof e=="function"){const[i,a]=getValueState(s);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=getValueState(s);e=e(n!==void 0?n:t.custom,i,a)}return e}function resolveVariant(t,e,n){const s=t.getProps();return resolveVariantFromProps(s,e,n!==void 0?n:s.custom,t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function getValueTransition(t,e){return t?t[e]||t.default||t:void 0}const MotionGlobalConfig={useManualTiming:!1},isNotNull$2=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(isNotNull$2),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||s===void 0?i[a]:s}const noop$3=t=>t;function createRenderStep(t){let e=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){a.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,d=!1,p=!1)=>{const g=p&&s?e:n;return d&&a.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),a.delete(c)},process:c=>{if(o=c,s){i=!0;return}s=!0,[e,n]=[n,e],n.clear(),e.forEach(l),s=!1,i&&(i=!1,u.process(c))}};return u}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=stepsOrder.reduce((S,C)=>(S[C]=createRenderStep(a),S),{}),{read:l,resolveKeyframes:u,update:c,preRender:d,render:p,postRender:m}=o,g=()=>{const S=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(S-i.timestamp,maxElapsed),1),i.timestamp=S,i.isProcessing=!0,l.process(i),u.process(i),c.process(i),d.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(g))},E=()=>{n=!0,s=!0,i.isProcessing||t(g)};return{schedule:stepsOrder.reduce((S,C)=>{const T=o[C];return S[C]=(I,D=!1,P=!1)=>(n||E(),T.schedule(I,D,P)),S},{}),cancel:S=>{for(let C=0;C<stepsOrder.length;C++)o[stepsOrder[C]].cancel(S)},state:i,steps:o}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$3,!0),calcBezier=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,n,s,i){let a,o,l=0;do o=e+(n-e)/2,a=calcBezier(o,s,i)-t,a>0?n=o:e=o;while(Math.abs(a)>subdivisionPrecision&&++l<subdivisionMaxIterations);return o}function cubicBezier(t,e,n,s){if(t===e&&n===s)return noop$3;const i=a=>binarySubdivide(a,0,1,t,n);return a=>a===0||a===1?a:calcBezier(i(a),e,s)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}let invariant=noop$3;const isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function getVariableValue(t,e,n=1){const[s,i]=parseCSSVariable(t);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const o=a.trim();return isNumericalString(o)?parseFloat(o):o}return isCSSVariableToken(i)?getVariableValue(i,e,n+1):i}const clamp$2=(t,e,n)=>n>e?e:n<t?t:n,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp$2(0,1,t)},scale={...number,default:1},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=t=>t===number||t===px,getPosFromMatrix=(t,e)=>parseFloat(t.split(", ")[e]),getTranslateFromMatrix=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return getPosFromMatrix(i[1],e);{const a=s.match(/^matrix\((.+)\)$/u);return a?getPosFromMatrix(a[1],t):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=t=>e=>e.test(t),auto={test:t=>t==="auto",parse:t=>t},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=removeNonTranslationalTransform(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,o])=>{var l;(l=s.getValue(a))===null||l===void 0||l.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(e,n,s,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&n){const u=s.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(t)||e&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,e)),splitColor=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,a,o,l]=s.match(floatRegex);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},clampRgbUnit=t=>clamp$2(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(n)+", "+sanitize(alpha.transform(s))+")"};function parseHex(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha.transform(s))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(floatRegex))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(colorRegex))===null||n===void 0?void 0:n.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const l=e.replace(complexRegex,u=>(color.test(u)?(s.color.push(a),i.push(COLOR_TOKEN),n.push(color.parse(u))):u.startsWith(VAR_FUNCTION_TOKEN)?(s.var.push(a),i.push(VAR_TOKEN),n.push(u)):(s.number.push(a),i.push(NUMBER_TOKEN),n.push(parseFloat(u))),++a,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:l,indexes:s,types:i}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:n}=analyseComplexValue(t),s=e.length;return i=>{let a="";for(let o=0;o<s;o++)if(a+=e[o],i[o]!==void 0){const l=n[o];l===NUMBER_TOKEN?a+=sanitize(i[o]):l===COLOR_TOKEN?a+=color.transform(i[o]):a+=i[o]}return a}}const convertNumbersToZero=t=>typeof t=="number"?0:t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(floatRegex)||[];if(!s)return t;const i=n.replace(s,"");let a=maxDefaults.has(e)?1:0;return s!==n&&(a*=100),e+"("+a+i+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let n=getDefaultValueType(t);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,n){let s=0,i;for(;s<t.length&&!i;){const a=t[s];typeof a=="string"&&!invalidTemplates.has(a)&&analyseComplexValue(a).values.length&&(i=t[s]),s++}if(i&&n)for(const a of e)t[a]=getAnimatableNone(n,i)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,n,s,i,a){super(e,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),isCSSVariableToken(c))){const d=getVariableValue(c,n.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(s)||e.length!==2)return;const[i,a]=e,o=findDimensionValueType(i),l=findDimensionValueType(a);if(o!==l)if(isNumOrPxType(o)&&isNumOrPxType(l))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)isNone(e[i])&&s.push(i);s.length&&makeNoneKeyframesAnimatable(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=positionalValues[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function isGenerator(t){return typeof t=="function"}let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:t=>{now$1=t,queueMicrotask(clearTime)}},isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function canAnimate(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=isAnimatable(i,e),l=isAnimatable(a,e);return!o||!l?!1:hasKeyframesChanged(t)||(n==="spring"||isGenerator(n))&&s}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:a,delay:o,onComplete:l,onUpdate:u,isGenerator:c}=this.options;if(!c&&!canAnimate(e,s,i,a))if(o)this.options.duration=0;else{u?.(getFinalKeyframe(e,this.options,n)),l?.(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function velocityPerSecond(t,e){return e?t*(1e3/e):0}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,n){const s=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(n-t(s),e-s)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:t=800,bounce:e=.25,velocity:n=0,mass:s=1}){let i,a,o=1-e;o=clamp$2(minDamping,maxDamping,o),t=clamp$2(minDuration,maxDuration$1,millisecondsToSeconds(t)),o<1?(i=c=>{const d=c*o,p=d*t,m=d-n,g=calcAngularFreq(c,o),E=Math.exp(-p);return safeMin-m/g*E},a=c=>{const p=c*o*t,m=p*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-p),x=calcAngularFreq(Math.pow(c,2),o);return(-i(c)+safeMin>0?-1:1)*((m-g)*E)/x}):(i=c=>{const d=Math.exp(-c*t),p=(c-n)*t+1;return-safeMin+d*p},a=c=>{const d=Math.exp(-c*t),p=(n-c)*(t*t);return d*p});const l=5/t,u=approximateRoot(i,a,l);if(t=secondsToMilliseconds(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(u,2)*s;return{stiffness:c,damping:o*2*Math.sqrt(s*c),duration:t}}}const rootIterations=12;function approximateRoot(t,e,n){let s=n;for(let i=1;i<rootIterations;i++)s=s-t(s)/e(s);return s}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(n=>t[n]!==void 0)}function getSpringOptions(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys)){const n=findSpring(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function spring({keyframes:t,restDelta:e,restSpeed:n,...s}){const i=t[0],a=t[t.length-1],o={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:d,velocity:p,isResolvedFromDuration:m}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),g=p||0,E=u/(2*Math.sqrt(l*c)),x=a-i,b=millisecondsToSeconds(Math.sqrt(l/c)),S=Math.abs(x)<5;n||(n=S?.01:2),e||(e=S?.005:.5);let C;if(E<1){const T=calcAngularFreq(b,E);C=I=>{const D=Math.exp(-E*b*I);return a-D*((g+E*b*x)/T*Math.sin(T*I)+x*Math.cos(T*I))}}else if(E===1)C=T=>a-Math.exp(-b*T)*(x+(g+b*x)*T);else{const T=b*Math.sqrt(E*E-1);C=I=>{const D=Math.exp(-E*b*I),P=Math.min(T*I,300);return a-D*((g+E*b*x)*Math.sinh(P)+T*x*Math.cosh(P))/T}}return{calculatedDuration:m&&d||null,next:T=>{const I=C(T);if(m)o.done=T>=d;else{let D=0;E<1&&(D=T===0?secondsToMilliseconds(g):calcGeneratorVelocity(C,T,I));const P=Math.abs(D)<=n,O=Math.abs(a-I)<=e;o.done=P&&O}return o.value=o.done?a:I,o}}}function inertia({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:u,restDelta:c=.5,restSpeed:d}){const p=t[0],m={done:!1,value:p},g=B=>l!==void 0&&B<l||u!==void 0&&B>u,E=B=>l===void 0?u:u===void 0||Math.abs(l-B)<Math.abs(u-B)?l:u;let x=n*e;const b=p+x,S=o===void 0?b:o(b);S!==b&&(x=S-p);const C=B=>-x*Math.exp(-B/s),T=B=>S+C(B),I=B=>{const F=C(B),H=T(B);m.done=Math.abs(F)<=c,m.value=m.done?S:H};let D,P;const O=B=>{g(m.value)&&(D=B,P=spring({keyframes:[m.value,E(m.value)],velocity:calcGeneratorVelocity(T,B,m.value),damping:i,stiffness:a,restDelta:c,restSpeed:d}))};return O(0),{calculatedDuration:null,next:B=>{let F=!1;return!P&&D===void 0&&(F=!0,I(B),O(B)),D!==void 0&&B>=D?P.next(B-D):(!F&&I(B),m)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$3,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,n,s,i]=t;return cubicBezier(e,n,s,i)}else if(typeof t=="string")return easingLookup[t];return t},combineFunctions=(t,e)=>n=>e(t(n)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},mixNumber$1=(t,e,n)=>t+(e-t)*n;function hueToRgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=hueToRgb(u,l,t+1/3),a=hueToRgb(u,l,t),o=hueToRgb(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}function mixImmediate(t,e){return n=>n>0?e:t}const mixLinearColor=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let n=e.parse(t);return e===hsla&&(n=hslaToRgba(n)),n}const mixColor=(t,e)=>{const n=asRGBA(t),s=asRGBA(e);if(!n||!s)return mixImmediate(t,e);const i={...n};return a=>(i.red=mixLinearColor(n.red,s.red,a),i.green=mixLinearColor(n.green,s.green,a),i.blue=mixLinearColor(n.blue,s.blue,a),i.alpha=mixNumber$1(n.alpha,s.alpha,a),rgba.transform(i))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mixNumber(t,e){return n=>mixNumber$1(t,e,n)}function getMixer$1(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const n=[...t],s=n.length,i=t.map((a,o)=>getMixer$1(a)(a,e[o]));return a=>{for(let o=0;o<s;o++)n[o]=i[o](a);return n}}function mixObject(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=getMixer$1(t[i])(t[i],e[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function matchOrder(t,e){var n;const s=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],l=t.indexes[o][i[o]],u=(n=t.values[l])!==null&&n!==void 0?n:0;s[a]=u,i[o]++}return s}const mixComplex=(t,e)=>{const n=complex.createTransformer(e),s=analyseComplexValue(t),i=analyseComplexValue(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?invisibleValues.has(t)&&!i.values.length||invisibleValues.has(e)&&!s.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(s,i),i.values),n):mixImmediate(t,e)};function mix(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mixNumber$1(t,e,n):getMixer$1(t)(t,e)}function createMixers(t,e,n){const s=[],i=n||mix,a=t.length-1;for(let o=0;o<a;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||noop$3:e;l=pipe(u,l)}s.push(l)}return s}function interpolate(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const a=t.length;if(invariant(a===e.length),a===1)return()=>e[0];if(a===2&&t[0]===t[1])return()=>e[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=createMixers(e,s,i),l=o.length,u=c=>{let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const p=progress(t[d],t[d+1],c);return o[d](p)};return n?c=>u(clamp$2(t[0],t[a-1],c)):u}function fillOffset(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=progress(0,e,s);t.push(mixNumber$1(n,1,i))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(n=>n*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=isEasingArray(s)?s.map(easingDefinitionToFunction):easingDefinitionToFunction(s),a={done:!1,value:e[0]},o=convertOffsetToTimes(n&&n.length===e.length?n:defaultOffset(e),t),l=interpolate(o,e,{ease:Array.isArray(i)?i:defaultEasing(e,i)});return{calculatedDuration:t,next:u=>(a.value=l(u),a.done=u>=t,a)}}const maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<maxGeneratorDuration;)e+=n,s=t.next(e);return e>=maxGeneratorDuration?1/0:e}const frameloopDriver=t=>{const e=({timestamp:n})=>t(n);return{start:()=>frame.update(e,!0),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=t=>t/100;class MainThreadAnimation extends BaseAnimation{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:s,element:i,keyframes:a}=this.options,o=i?.KeyframeResolver||KeyframeResolver,l=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new o(a,l,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,l=isGenerator(n)?n:generators[n]||keyframes;let u,c;l!==keyframes&&typeof e[0]!="number"&&(u=pipe(percentToProgress,mix(e[0],e[1])),e=[0,100]);const d=l({...this.options,keyframes:e});a==="mirror"&&(c=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=calcGeneratorDuration(d));const{calculatedDuration:p}=d,m=p+i,g=m*(s+1)-i;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:B}=this.options;return{done:!0,value:B[B.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:c,totalDuration:d,resolvedDuration:p}=s;if(this.startTime===null)return a.next(0);const{delay:m,repeat:g,repeatType:E,repeatDelay:x,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-m*(this.speed>=0?1:-1),C=this.speed>=0?S<0:S>d;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let T=this.currentTime,I=a;if(g){const B=Math.min(this.currentTime,d)/p;let F=Math.floor(B),H=B%1;!H&&B>=1&&(H=1),H===1&&F--,F=Math.min(F,g+1),!!(F%2)&&(E==="reverse"?(H=1-H,x&&(H-=x/p)):E==="mirror"&&(I=o)),T=clamp$2(0,1,H)*p}const D=C?{done:!1,value:u[0]}:I.next(T);l&&(D.value=l(D.value));let{done:P}=D;!C&&c!==null&&(P=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return O&&i!==void 0&&(D.value=getFinalKeyframe(u,this.options,i)),b&&b(D.value),O&&this.finish(),D}get duration(){const{resolved:e}=this;return e?millisecondsToSeconds(e.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=frameloopDriver,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),resolution=10,generateLinearEasing=(t,e)=>{let n="";const s=Math.max(Math.round(e/resolution),2);for(let i=0;i<s;i++)n+=t(progress(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const supportsFlags={linearEasing:void 0};function memoSupports(t,e){const n=memo(t);return()=>{var s;return(s=supportsFlags[e])!==null&&s!==void 0?s:n()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(t){return!!(typeof t=="function"&&supportsLinearEasing()||!t||typeof t=="string"&&(t in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(t)||Array.isArray(t)&&t.every(isWaapiSupportedEasing))}const cubicBezierAsString=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"&&supportsLinearEasing()?generateLinearEasing(t,e):isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(n=>mapEasingToNativeEasing(n,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const d=mapEasingToNativeEasing(l,i);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:s,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function attachTimeline(t,e){t.timeline=e,t.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(t){return isGenerator(t.type)||t.type==="spring"||!isWaapiSupportedEasing(t.ease)}function pregenerateKeyframes(t,e){const n=new MainThreadAnimation({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const i=[];let a=0;for(;!s.done&&a<maxDuration;)s=n.sample(a),i.push(s.value),a+=sampleDelta;return{times:void 0,keyframes:i,duration:a-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(e){super(e);const{name:n,motionValue:s,element:i,keyframes:a}=this.options;this.resolver=new DOMKeyframesResolver(a,(o,l)=>this.onKeyframesResolved(o,l),n,s,i),this.resolver.scheduleResolve()}initPlayback(e,n){var s;let{duration:i=300,times:a,ease:o,type:l,motionValue:u,name:c,startTime:d}=this.options;if(!(!((s=u.owner)===null||s===void 0)&&s.current))return!1;if(typeof o=="string"&&supportsLinearEasing()&&isUnsupportedEase(o)&&(o=unsupportedEasingFunctions[o]),requiresPregeneratedKeyframes(this.options)){const{onComplete:m,onUpdate:g,motionValue:E,element:x,...b}=this.options,S=pregenerateKeyframes(e,b);e=S.keyframes,e.length===1&&(e[1]=e[0]),i=S.duration,a=S.times,o=S.ease,l="keyframes"}const p=startWaapiAnimation(u.owner.current,c,e,{...this.options,duration:i,times:a,ease:o});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(attachTimeline(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:m}=this.options;u.set(getFinalKeyframe(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:a,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return millisecondsToSeconds(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return millisecondsToSeconds(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=secondsToMilliseconds(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return noop$3;const{animation:s}=n;attachTimeline(s,e)}return noop$3}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:i,type:a,ease:o,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:p,element:m,...g}=this.options,E=new MainThreadAnimation({...g,keyframes:s,duration:i,type:a,ease:o,times:l,isGenerator:!0}),x=secondsToMilliseconds(this.time);c.setWithVelocity(E.sample(x-sampleDelta).value,E.sample(x).value,sampleDelta)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:i,repeatType:a,damping:o,type:l}=e;return supportsWaapi()&&s&&acceleratedValues.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&a!=="mirror"&&o!==0&&l!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(i=>supportsScrollTimeline()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{s.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:u,elapsed:c,...d}){return!!Object.keys(d).length}const animateMotionValue=(t,e,n,s={},i,a)=>o=>{const l=getValueTransition(s,t)||{},u=l.delay||s.delay||0;let{elapsed:c=0}=s;c=c-secondsToMilliseconds(u);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-c,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:i};isTransitionDefined(l)||(d={...d,...getDefaultTransition(t,d)}),d.duration&&(d.duration=secondsToMilliseconds(d.duration)),d.repeatDelay&&(d.repeatDelay=secondsToMilliseconds(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!a&&e.get()!==void 0){const m=getFinalKeyframe(d.keyframes,l);if(m!==void 0)return frame.update(()=>{d.onUpdate(m),d.onComplete()}),new GroupPlaybackControls([])}return!a&&AcceleratedAnimation.supports(d)?new AcceleratedAnimation(d):new MainThreadAnimation(d)},isCustomValue=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),resolveFinalValueInKeyframes=t=>isKeyframesTarget(t)?t[t.length-1]||0:t;function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t)),collectMotionValues={current:void 0};class MotionValue{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const a=time.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SubscriptionManager);const s=this.events[e].add(n);return e==="change"?()=>{s(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}function setMotionValue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,motionValue(n))}function setTarget(t,e){const n=resolveVariant(t,e);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const o in a){const l=resolveFinalValueInKeyframes(a[o]);setMotionValue(t,o,l)}}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isMotionValue=t=>!!(t&&t.getVelocity);function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const n=t.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(e)}function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function animateTarget(t,e,{delay:n=0,transitionOverride:s,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;s&&(o=s);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in u){const m=t.getValue(p,(a=t.latestValues[p])!==null&&a!==void 0?a:null),g=u[p];if(g===void 0||d&&shouldBlockAnimation(d,p))continue;const E={delay:n,...getValueTransition(o||{},p)};let x=!1;if(window.MotionHandoffAnimation){const S=getOptimisedAppearId(t);if(S){const C=window.MotionHandoffAnimation(S,p,frame);C!==null&&(E.startTime=C,x=!0)}}addValueToWillChange(t,p),m.start(animateMotionValue(p,m,g,t.shouldReduceMotion&&transformProps.has(p)?{type:!1}:E,t,x));const b=m.animation;b&&c.push(b)}return l&&Promise.all(c).then(()=>{frame.update(()=>{l&&setTarget(t,l)})}),c}function animateVariant(t,e,n={}){var s;const i=resolveVariant(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(animateTarget(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:m}=a;return animateChildren(t,e,d+c,p,m,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[c,d]=u==="beforeChildren"?[o,l]:[l,o];return c().then(()=>d())}else return Promise.all([o(),l(n.delay)])}function animateChildren(t,e,n=0,s=0,i=1,a){const o=[],l=(t.variantChildren.size-1)*s,u=i===1?(c=0)=>c*s:(c=0)=>l-c*s;return Array.from(t.variantChildren).sort(sortByTreeOrder).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(animateVariant(c,e,{...a,delay:n+u(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function sortByTreeOrder(t,e){return t.sortNodePosition(e)}function animateVisualElement(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>animateVariant(t,a,n));s=Promise.all(i)}else if(typeof e=="string")s=animateVariant(t,e,n);else{const i=typeof e=="function"?resolveVariant(t,e,n.custom):e;s=Promise.all(animateTarget(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<numVariantProps;n++){const s=variantProps[n],i=t.props[s];(isVariantLabel(i)||i===!1)&&(e[s]=i)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:n,options:s})=>animateVisualElement(t,n,s)))}function createAnimationState(t){let e=animateList(t),n=createState(),s=!0;const i=u=>(c,d)=>{var p;const m=resolveVariant(t,d,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:g,transitionEnd:E,...x}=m;c={...c,...x,...E}}return c};function a(u){e=u(t)}function o(u){const{props:c}=t,d=getVariantContext(t.parent)||{},p=[],m=new Set;let g={},E=1/0;for(let b=0;b<numAnimationTypes;b++){const S=reversePriorityOrder[b],C=n[S],T=c[S]!==void 0?c[S]:d[S],I=isVariantLabel(T),D=S===u?C.isActive:null;D===!1&&(E=b);let P=T===d[S]&&T!==c[S]&&I;if(P&&s&&t.manuallyAnimateOnMount&&(P=!1),C.protectedKeys={...g},!C.isActive&&D===null||!T&&!C.prevProp||isAnimationControls(T)||typeof T=="boolean")continue;const O=checkVariantsDidChange(C.prevProp,T);let B=O||S===u&&C.isActive&&!P&&I||b>E&&I,F=!1;const H=Array.isArray(T)?T:[T];let Q=H.reduce(i(S),{});D===!1&&(Q={});const{prevResolvedValues:Z={}}=C,ne={...Z,...Q},re=K=>{B=!0,m.has(K)&&(F=!0,m.delete(K)),C.needsAnimating[K]=!0;const M=t.getValue(K);M&&(M.liveStyle=!1)};for(const K in ne){const M=Q[K],W=Z[K];if(g.hasOwnProperty(K))continue;let ee=!1;isKeyframesTarget(M)&&isKeyframesTarget(W)?ee=!shallowCompare(M,W):ee=M!==W,ee?M!=null?re(K):m.add(K):M!==void 0&&m.has(K)?re(K):C.protectedKeys[K]=!0}C.prevProp=T,C.prevResolvedValues=Q,C.isActive&&(g={...g,...Q}),s&&t.blockInitialAnimation&&(B=!1),B&&(!(P&&O)||F)&&p.push(...H.map(K=>({animation:K,options:{type:S}})))}if(m.size){const b={};m.forEach(S=>{const C=t.getBaseTarget(S),T=t.getValue(S);T&&(T.liveStyle=!0),b[S]=C??null}),p.push({animation:b})}let x=!!p.length;return s&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),s=!1,x?e(p):Promise.resolve()}function l(u,c){var d;if(n[u].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(u,c)}),n[u].isActive=c;const p=o(u);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=createState(),s=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function extractEventInfo(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addDomEvent(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function addPointerEvent(t,e,n,s){return addDomEvent(t,e,addPointerInfo(n),s)}const distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const n=distance(t.x,e.x),s=distance(t.y,e.y);return Math.sqrt(n**2+s**2)}class PanSession{constructor(e,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=getPanInfo(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=distance2D(p.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:E}=p,{timestamp:x}=frameData;this.history.push({...E,timestamp:x});const{onStart:b,onMove:S}=this.handlers;m||(b&&b(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=transformPoint(m,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=getPanInfo(p.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,b),E&&E(p,b)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=extractEventInfo(e),l=transformPoint(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=frameData;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,getPanInfo(l,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=lastDevicePoint(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>secondsToMilliseconds(e)));)n--;if(!s)return{x:0,y:0};const a=millisecondsToSeconds(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function createLock(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(t){let e=!1;if(t==="y")e=globalVerticalLock();else if(t==="x")e=globalHorizontalLock();else{const n=globalHorizontalLock(),s=globalVerticalLock();n&&s?e=()=>{n(),s()}:(n&&n(),s&&s())}return e}function isDragActive(){const t=getGlobalLock(!0);return t?(t(),!1):!0}function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,n){return Math.abs(t-e)<=n}function calcAxisDelta(t,e,n,s=.5){t.origin=s,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(n)/calcLength(e),t.translate=mixNumber$1(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,n,s){calcAxisDelta(t.x,e.x,n.x,s?s.originX:void 0),calcAxisDelta(t.y,e.y,n.y,s?s.originY:void 0)}function calcRelativeAxis(t,e,n){t.min=n.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,n){calcRelativeAxis(t.x,e.x,n.x),calcRelativeAxis(t.y,e.y,n.y)}function calcRelativeAxisPosition(t,e,n){t.min=e.min-n.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,n){calcRelativeAxisPosition(t.x,e.x,n.x),calcRelativeAxisPosition(t.y,e.y,n.y)}function applyConstraints(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?mixNumber$1(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?mixNumber$1(n,t,s.max):Math.min(t,n)),t}function calcRelativeAxisConstraints(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:n,bottom:s,right:i}){return{x:calcRelativeAxisConstraints(t.x,n,i),y:calcRelativeAxisConstraints(t.y,e,s)}}function calcViewportAxisConstraints(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin$1(t,e){let n=.5;const s=calcLength(t),i=calcLength(e);return i>s?n=progress(e.min,e.max-s,t.min):s>i&&(n=progress(t.min,t.max-i,e.min)),clamp$2(0,1,n)}function rebaseAxisConstraints(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,n){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,n)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(t){return[t("x"),t("y")]}function convertBoundingBoxToBox({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:n}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(n)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,n){const s=t-n,i=e*s;return n+i}function applyPointDelta(t,e,n,s,i){return i!==void 0&&(t=scalePoint(t,i,s)),scalePoint(t,n,s)+e}function applyAxisDelta(t,e=0,n=1,s,i){t.min=applyPointDelta(t.min,e,n,s,i),t.max=applyPointDelta(t.max,e,n,s,i)}function applyBoxDelta(t,{x:e,y:n}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&transformBox(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,applyBoxDelta(t,o)),s&&hasTransform(a.latestValues)&&transformBox(t,a.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,n,s,i=.5){const a=mixNumber$1(t.min,t.max,i);applyAxisDelta(t,e,n,a,s)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,n){const s=measureViewportBox(t,n),{scroll:i}=e;return i&&(translateAxis(s.x,i.offset.x),translateAxis(s.y,i.offset.y)),s}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(d,"page").point)},a=(d,p)=>{const{drag:m,dragPropagation:g,onDragStart:E}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(b=>{let S=this.getAxisMotionValue(b).get()||0;if(percent.test(S)){const{projection:C}=this.visualElement;if(C&&C.layout){const T=C.layout.layoutBox[b];T&&(S=calcLength(T)*(parseFloat(S)/100))}}this.originPoint[b]=S}),E&&frame.postRender(()=>E(d,p)),addValueToWillChange(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,p)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:E,onDrag:x}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:b}=p;if(g&&this.currentDirection===null){this.currentDirection=getCurrentDirection(b),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",p.point,b),this.updateAxis("y",p.point,b),this.visualElement.render(),x&&x(d,p)},l=(d,p)=>this.stop(d,p),u=()=>eachAxis(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:getContextWindow(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&frame.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!shouldDrag(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=applyConstraints(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&isRefObject(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=calcRelativeConstraints(i.layoutBox,n):this.constraints=!1,this.elastic=resolveDragElastic(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rebaseAxisConstraints(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!isRefObject(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=measurePageBox(s,i.root,this.visualElement.getTransformPagePoint());let o=calcViewportConstraints(i.layout.layoutBox,a);if(n){const l=n(convertBoxToBoundingBox(o));this.hasMutatedConstraints=!!l,l&&(o=convertBoundingBoxToBox(l))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},c=eachAxis(d=>{if(!shouldDrag(d,n,this.currentDirection))return;let p=u&&u[d]||{};o&&(p={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,E={type:"inertia",velocity:s?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(d,E)});return Promise.all(c).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),s.start(animateMotionValue(e,s,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(n=>{const{drag:s}=this.getProps();if(!shouldDrag(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(e[n]-mixNumber$1(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!isRefObject(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};eachAxis(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=calcOrigin$1({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),eachAxis(o=>{if(!shouldDrag(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];l.set(mixNumber$1(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,n=addPointerEvent(e,"pointerdown",u=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();isRefObject(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),frame.read(s);const o=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(eachAxis(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=u[d].translate,p.set(p.get()+u[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=defaultElastic,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function shouldDrag(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function getCurrentDirection(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$3,this.removeListeners=noop$3,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$3}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,n)=>{t&&frame.postRender(()=>t(e,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$3}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(n),onMove:s,onEnd:(a,o)=>{delete this.session,i&&frame.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence$2(){const t=reactExports.useContext(PresenceContext);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,i=reactExports.useId();reactExports.useEffect(()=>s(i),[]);const a=reactExports.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,a]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const n=pixelsToPercent(t,e.target.x),s=pixelsToPercent(t,e.target.y);return`${n}% ${s}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=complex.parse(t);if(i.length>5)return s;const a=complex.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const c=mixNumber$1(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),a(i)}},scaleCorrectors={};function addScaleCorrector(t){Object.assign(scaleCorrectors,t)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;addScaleCorrector(defaultScaleCorrectors),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||frame.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,n]=usePresence$2(),s=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:s,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,n,s,i,a){i?(t.opacity=mixNumber$1(0,n.opacity!==void 0?n.opacity:1,easeCrossfadeIn(s)),t.opacityExit=mixNumber$1(e.opacity!==void 0?e.opacity:1,0,easeCrossfadeOut(s))):a&&(t.opacity=mixNumber$1(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<numBorders;o++){const l=`border${borders[o]}Radius`;let u=getRadius(e,l),c=getRadius(n,l);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||isPx(u)===isPx(c)?(t[l]=Math.max(mixNumber$1(asNumber(u),asNumber(c),s),0),(percent.test(c)||percent.test(u))&&(t[l]+="%")):t[l]=c}(e.rotate||n.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,n.rotate||0,s))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$3);function compress(t,e,n){return s=>s<t?0:s>e?1:n(progress(t,e,s))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,n,s,i){return t-=e,t=scalePoint(t,1/n,s),i!==void 0&&(t=scalePoint(t,1/i,s)),t}function removeAxisDelta(t,e=0,n=1,s=.5,i,a=t,o=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=mixNumber$1(a.min,a.max,s);t===a&&(l-=e),t.min=removePointDelta(t.min,e,n,l,i),t.max=removePointDelta(t.max,e,n,l,i)}function removeAxisTransforms(t,e,[n,s,i],a,o){removeAxisDelta(t,e[n],e[s],e[i],e.scale,a,o)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,n,s){removeAxisTransforms(t.x,e,xKeys,n?n.x:void 0,s?s.x:void 0),removeAxisTransforms(t.y,e,yKeys,n?n.y:void 0,s?s.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,n){let s="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(s=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:p,rotateY:m,skewX:g,skewY:E}=n;c&&(s=`perspective(${c}px) ${s}`),d&&(s+=`rotate(${d}deg) `),p&&(s+=`rotateX(${p}deg) `),m&&(s+=`rotateY(${m}deg) `),g&&(s+=`skewX(${g}deg) `),E&&(s+=`skewY(${E}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(s+=`scale(${l}, ${u})`),s||"none"}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function resolveMotionValue(t){const e=isMotionValue(t)?t.get():t;return isCustomValue(e)?e.toValue():e}function delay(t,e){const n=time.now(),s=({timestamp:i})=>{const a=i-n;a>=e&&(cancelFrame(s),t(a-e))};return frame.read(s,!0),()=>cancelFrame(s)}function isSVGElement$1(t){return t instanceof SVGElement&&t.tagName!=="svg"}function animateSingleValue(t,e,n){const s=isMotionValue(t)?t:motionValue(t);return s.start(animateMotionValue("",s,e,n)),s.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(i||a))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(s)}function createProjectionNode$1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=e?.()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new SubscriptionManager),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement$1(o),this.instance=o;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||u)&&(this.isLayoutDirty=!0),t){let p;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=delay(m,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:b,onLayoutAnimationComplete:S}=d.getProps(),C=!this.targetLayout||!boxEqualsRounded(this.targetLayout,E)||g,T=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,T);const I={...getValueTransition(x,"layout"),onPlay:b,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const l=time.now();frameData.delta=clamp$2(0,1e3/60,l-frameData.timestamp),frameData.timestamp=l,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!isDeltaZero(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(l||hasTransform(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),roundBox(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return createBox();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:d}=this.root;d&&(translateAxis(u.x,d.offset.x),translateAxis(u.y,d.offset.y))}return u}removeElementScroll(o){var l;const u=createBox();if(copyBoxInto(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:p,options:m}=d;d!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&copyBoxInto(u,o),translateAxis(u.x,p.offset.x),translateAxis(u.y,p.offset.y))}return u}applyTransform(o,l=!1){const u=createBox();copyBoxInto(u,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),hasTransform(d.latestValues)&&transformBox(u,d.latestValues)}return hasTransform(this.latestValues)&&transformBox(u,this.latestValues),u}removeTransform(o){const l=createBox();copyBoxInto(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!hasTransform(c.latestValues))continue;hasScale(c.latestValues)&&c.updateSnapshot();const d=createBox(),p=c.measurePageBox();copyBoxInto(d,p),removeBoxTransforms(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return hasTransform(this.latestValues)&&removeBoxTransforms(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,g.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(c=!1),c)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=createBox());const{target:E}=l;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(o,l=!1){const u=this.snapshot,c=u?u.latestValues:{},d={...this.latestValues},p=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=createBox(),g=u?u.source:void 0,E=this.layout?this.layout.source:void 0,x=g!==E,b=this.getStack(),S=!b||b.members.length<=1,C=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let T;this.mixTargetDelta=I=>{const D=I/1e3;mixAxisDelta(p.x,o.x,D),mixAxisDelta(p.y,o.y,D),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,m,D),T&&boxEquals(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=createBox()),copyBoxInto(T,this.relativeTarget)),x&&(this.animationValues=d,mixValues(d,c,this.latestValues,D,C,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:c,latestValues:d}=o;if(!(!l||!u||!c)){if(this!==o&&this.layout&&c&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||createBox();const p=calcLength(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=calcLength(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}copyBoxInto(l,u),transformBox(l,d),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new NodeStack),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const c={};u.z&&resetDistortingTransform("z",o,c,this.animationValues);for(let d=0;d<transformAxes.length;d++)resetDistortingTransform(`rotate${transformAxes[d]}`,o,c,this.animationValues),resetDistortingTransform(`skew${transformAxes[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=resolveMotionValue(o?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=resolveMotionValue(o?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:g,y:E}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${E.origin*100}% 0`,p.animationValues?c.opacity=p===this?(u=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in scaleCorrectors){if(m[x]===void 0)continue;const{correct:b,applyTo:S}=scaleCorrectors[x],C=c.transform==="none"?m[x]:b(m[x],p);if(S){const T=S.length;for(let I=0;I<T;I++)c[S[I]]=C}else c[x]=C}return this.options.layoutId&&(c.pointerEvents=p===this?resolveMotionValue(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:a}=t.options,o=n.source!==t.layout.source;a==="size"?eachAxis(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],g=calcLength(m);m.min=s[p].min,m.max=m.min+g}):shouldAnimatePositionOnly(a,n.layoutBox,s)&&eachAxis(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],g=calcLength(s[p]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+g)});const l=createDelta();calcBoxDelta(l,s,n.layoutBox);const u=createDelta();o?calcBoxDelta(u,t.applyTransform(i,!0),n.measuredBox):calcBoxDelta(u,s,n.layoutBox);const c=!isDeltaZero(l);let d=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const E=createBox();calcRelativePosition(E,n.layoutBox,m.layoutBox);const x=createBox();calcRelativePosition(x,s,g.layoutBox),boxEqualsRounded(E,x)||(d=!0),p.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=E,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function propagateDirtyNodes(t){isDebug&&metrics.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,n){t.translate=mixNumber$1(e.translate,0,n),t.scale=mixNumber$1(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,n,s){t.min=mixNumber$1(e.min,n.min,s),t.max=mixNumber$1(e.max,n.max,s)}function mixBox(t,e,n,s){mixAxis(t.x,e.x,n.x,s),mixAxis(t.y,e.y,n.y,s)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$3;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,n){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(n),.2)}function checkNodeWasScrollRoot(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function addHoverEvent(t,e){const n=e?"pointerenter":"pointerleave",s=e?"onHoverStart":"onHoverEnd",i=(a,o)=>{if(a.pointerType==="touch"||isDragActive())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e);const u=l[s];u&&frame.postRender(()=>u(a,o))};return addPointerEvent(t.current,n,i,{passive:!t.getProps()[s]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1;function fireSyntheticPointerEvent(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,extractEventInfo(n))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop$3,this.removeEndListeners=noop$3,this.removeAccessibleListeners=noop$3,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=addPointerEvent(window,"pointerup",(l,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:p}=this.node.getProps(),m=!p&&!isNodeOrChild(this.node.current,l.target)?d:c;m&&frame.update(()=>m(l,u))},{passive:!(s.onTap||s.onPointerUp)}),o=addPointerEvent(window,"pointercancel",(l,u)=>this.cancelPress(l,u),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=pipe(a,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(u,c)=>{const{onTap:d}=this.node.getProps();d&&frame.postRender(()=>d(u,c))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",o),fireSyntheticPointerEvent("down",(l,u)=>{this.startPress(l,u)})},n=addDomEvent(this.node.current,"keydown",e),s=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(a,o)=>this.cancelPress(a,o))},i=addDomEvent(this.node.current,"blur",s);this.removeAccessibleListeners=pipe(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&frame.postRender(()=>s(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&frame.postRender(()=>s(e,n))}mount(){const e=this.node.getProps(),n=addPointerEvent(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const n=t||document;observers.has(n)||observers.set(n,{});const s=observers.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),s[i]}function observeIntersection(t,e,n){const s=initIntersectionObserver(e);return observerCallbacks.set(t,n),s.observe(t),()=>{observerCallbacks.delete(t),s.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:thresholdNames[i]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),m=c?d:p;m&&m(u)};return observeIntersection(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(t,e,n,s,i){var a,o;const{visualElement:l}=reactExports.useContext(MotionContext),u=reactExports.useContext(LazyContext),c=reactExports.useContext(PresenceContext),d=reactExports.useContext(MotionConfigContext).reducedMotion,p=reactExports.useRef();s=s||u.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:l,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=p.current,g=reactExports.useContext(SwitchLayoutGroupContext);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&createProjectionNode(p.current,n,i,g);const E=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{m&&E.current&&m.update(n,c)});const x=n[optimizedAppearDataAttribute],b=reactExports.useRef(!!x&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return useIsomorphicLayoutEffect$2(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),microtask.render(m.render),b.current&&m.animationState&&m.animationState.animateChanges())}),reactExports.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,x)}),b.current=!1))}),m}function createProjectionNode(t,e,n,s){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&isRefObject(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:c})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function useMotionRef(t,e,n){return reactExports.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):isRefObject(n)&&(n.current=s))},[e])}function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:n,animate:s}=t;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(s)?s:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:n}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:n}),[variantLabelsAsDependency(e),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(n=>!!e[n])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:i}){t&&loadFeatures(t);function a(l,u){let c;const d={...reactExports.useContext(MotionConfigContext),...l,layoutId:useLayoutId(l)},{isStatic:p}=d,m=useCreateMotionContext(l),g=s(l,p);if(!p&&isBrowser){useStrictMode();const E=getProjectionFunctionality(d);c=E.MeasureLayout,m.visualElement=useVisualElement(i,g,d,e,E.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:m,children:[c&&m.visualElement?jsxRuntimeExports.jsx(c,{visualElement:m.visualElement,...d}):null,n(i,l,useMotionRef(g,m.visualElement,u),g,p,m.visualElement)]})}const o=reactExports.forwardRef(a);return o[motionComponentSymbol]=i,o}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:n}=featureDefinitions;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function renderHTML(t,{style:e,vars:n},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const a in n)t.style.setProperty(a,n[a])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,n,s){renderHTML(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(camelCaseAttributes.has(i)?i:camelToDash(i),e.attrs[i])}function isForcedMotionValue(t,{layout:e,layoutId:n}){return transformProps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}function scrapeMotionValuesFromProps$1(t,e,n){var s;const{style:i}=t,a={};for(const o in i)(isMotionValue(i[o])||e.style&&isMotionValue(e.style[o])||isForcedMotionValue(o,t)||((s=n?.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function scrapeMotionValuesFromProps(t,e,n){const s=scrapeMotionValuesFromProps$1(t,e,n);for(const i in t)if(isMotionValue(t[i])||isMotionValue(e[i])){const a=transformPropOrder.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=t[i]}return s}function useConstant$1(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},s,i,a){const o={latestValues:makeLatestValues(s,i,a,t),renderState:e()};return n&&(o.mount=l=>n(s,l,o)),o}const makeUseVisualState=t=>(e,n)=>{const s=reactExports.useContext(MotionContext),i=reactExports.useContext(PresenceContext),a=()=>makeState(t,e,s,i);return n?a():useConstant$1(a)};function makeLatestValues(t,e,n,s){const i={},a=s(t,{});for(const m in a)i[m]=resolveMotionValue(a[m]);let{initial:o,animate:l}=t;const u=isControllingVariants(t),c=isVariantNode(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const p=d?l:o;if(p&&typeof p!="boolean"&&!isAnimationControls(p)){const m=Array.isArray(p)?p:[p];for(let g=0;g<m.length;g++){const E=resolveVariantFromProps(t,m[g]);if(E){const{transitionEnd:x,transition:b,...S}=E;for(const C in S){let T=S[C];if(Array.isArray(T)){const I=d?T.length-1:0;T=T[I]}T!==null&&(i[C]=T)}for(const C in x)i[C]=x[C]}}}return i}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,n){let s="",i=!0;for(let a=0;a<numTransforms;a++){const o=transformPropOrder[a],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const c=getValueAsType(l,numberValueTypes[o]);if(!u){i=!1;const d=translateAlias[o]||o;s+=`${d}(${c}) `}n&&(e[o]=c)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function buildHTMLStyles(t,e,n){const{style:s,vars:i,transformOrigin:a}=t;let o=!1,l=!1;for(const u in e){const c=e[u];if(transformProps.has(u)){o=!0;continue}else if(isCSSVariableName(u)){i[u]=c;continue}else{const d=getValueAsType(c,numberValueTypes[u]);u.startsWith("origin")?(l=!0,a[u]=d):s[u]=d}}if(e.transform||(o||n?s.transform=buildTransform(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:u="50%",originY:c="50%",originZ:d=0}=a;s.transformOrigin=`${u} ${c} ${d}`}}function calcOrigin(t,e,n){return typeof t=="string"?t:px.transform(e+n*t)}function calcSVGTransformOrigin(t,e,n){const s=calcOrigin(e,t.x,t.width),i=calcOrigin(n,t.y,t.height);return`${s} ${i}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,n=1,s=0,i=!0){t.pathLength=1;const a=i?dashKeys:camelKeys;t[a.offset]=px.transform(-s);const o=px.transform(e),l=px.transform(n);t[a.array]=`${o} ${l}`}function buildSVGAttrs(t,{attrX:e,attrY:n,attrScale:s,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...c},d,p){if(buildHTMLStyles(t,c,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:E}=t;m.transform&&(E&&(g.transform=m.transform),delete m.transform),E&&(i!==void 0||a!==void 0||g.transform)&&(g.transformOrigin=calcSVGTransformOrigin(E,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),o!==void 0&&buildSVGPath(m,o,l,u,!1)}const isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(t,e,{renderState:n,latestValues:s})=>{frame.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(n,s,isSVGTag(e.tagName),t.transformTemplate),renderSVG(e,n)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(t,e,n){for(const s in e)!isMotionValue(e[s])&&!isForcedMotionValue(s,n)&&(t[s]=e[s])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,e,t),Object.assign({},n.vars,n.style)},[e])}function useStyle(t,e){const n=t.style||{},s={};return copyRawValuesOnly(s,n,t),Object.assign(s,useInitialMotionValues(t,e)),s}function useHTMLProps(t,e){const n={},s=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){t&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(shouldForward(i)||n===!0&&isValidMotionProp(i)||!e&&!isValidMotionProp(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}function useSVGProps(t,e,n,s){const i=reactExports.useMemo(()=>{const a=createSvgRenderState();return buildSVGAttrs(a,e,isSVGTag(s),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};copyRawValuesOnly(a,t.style,t),i.style={...a,...i.style}}return i}function createUseRender(t=!1){return(n,s,i,{latestValues:a},o)=>{const u=(isSVGComponent(n)?useSVGProps:useHTMLProps)(s,a,o,n),c=filterProps(s,typeof n=="string",t),d=n!==reactExports.Fragment?{...c,...u,ref:i}:{},{children:p}=s,m=reactExports.useMemo(()=>isMotionValue(p)?p.get():p,[p]);return reactExports.createElement(n,{...d,children:m})}}function createMotionComponentFactory(t,e){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...isSVGComponent(s)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:t,useRender:createUseRender(i),createVisualElement:e,Component:s};return createRendererMotionComponent(o)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addListener(e),e()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(t,e,n){for(const s in e){const i=e[s],a=n[s];if(isMotionValue(i))t.addValue(s,i);else if(isMotionValue(a))t.addValue(s,motionValue(i,{owner:t}));else if(a!==i)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(s);t.addValue(s,motionValue(o!==void 0?o:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=time.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,frame.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const g=p[m];u[m]!==void 0&&isMotionValue(g)&&g.set(u[m],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=transformProps.has(e),i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&frame.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const n=featureDefinitions[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<propEventHandlers.length;s++){const i=propEventHandlers[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=motionValue(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(isNumericalString(i)||isZeroValueString(i))?i=parseFloat(i):!findValueType(i)&&complex.test(n)&&(i=getAnimatableNone(e,n)),this.setBaseTarget(e,isMotionValue(i)?i.get():i)),isMotionValue(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=resolveVariantFromProps(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!isMotionValue(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}}function getComputedStyle$2(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,n){if(transformProps.has(n)){const s=getDefaultValueType(n);return s&&s.default||0}else{const s=getComputedStyle$2(e),i=(isCSSVariableName(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return measureViewportBox(e,n)}build(e,n,s){buildHTMLStyles(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return scrapeMotionValuesFromProps$1(e,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(transformProps.has(n)){const s=getDefaultValueType(n);return s&&s.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return scrapeMotionValuesFromProps(e,n,s)}build(e,n,s){buildSVGAttrs(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,i){renderSVG(e,n,s,i)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:e}){const n=reactExports.useId(),s=reactExports.useRef(null),i=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:c}=i.current;if(e||!s.current||!o||!l)return;s.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:s,sizeRef:i,children:reactExports.cloneElement(t,{ref:s})})}const PresenceChild=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=useConstant$1(newChildrenMap),u=reactExports.useId(),c=reactExports.useCallback(p=>{l.set(p,!0);for(const m of l.values())if(!m)return;s&&s()},[l,s]),d=reactExports.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:p=>(l.set(p,!1),()=>l.delete(p))}),a?[Math.random(),c]:[n,c]);return reactExports.useMemo(()=>{l.forEach((p,m)=>l.set(m,!1))},[n]),reactExports.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(t=jsxRuntimeExports.jsx(PopChild,{isPresent:n,children:t})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:d,children:t})};function newChildrenMap(){return new Map}const getChildKey=t=>t.key||"";function onlyElements(t){const e=[];return reactExports.Children.forEach(t,n=>{reactExports.isValidElement(n)&&e.push(n)}),e}const AnimatePresence=({children:t,exitBeforeEnter:e,custom:n,initial:s=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=reactExports.useMemo(()=>onlyElements(t),[t]),u=l.map(getChildKey),c=reactExports.useRef(!0),d=reactExports.useRef(l),p=useConstant$1(()=>new Map),[m,g]=reactExports.useState(l),[E,x]=reactExports.useState(l);useIsomorphicLayoutEffect$2(()=>{c.current=!1,d.current=l;for(let C=0;C<E.length;C++){const T=getChildKey(E[C]);u.includes(T)?p.delete(T):p.get(T)!==!0&&p.set(T,!1)}},[E,u.length,u.join("-")]);const b=[];if(l!==m){let C=[...l];for(let T=0;T<E.length;T++){const I=E[T],D=getChildKey(I);u.includes(D)||(C.splice(T,0,I),b.push(I))}o==="wait"&&b.length&&(C=b),x(onlyElements(C)),g(l);return}const{forceRender:S}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:E.map(C=>{const T=getChildKey(C),I=l===E||u.includes(T),D=()=>{if(p.has(T))p.set(T,!0);else return;let P=!0;p.forEach(O=>{O||(P=!1)}),P&&(S?.(),x(d.current),i&&i())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:I,initial:!c.current||s?void 0:!1,custom:I?void 0:n,presenceAffectsLayout:a,mode:o,onExitComplete:I?void 0:D,children:C},T)})})};function useMotionValue(t){const e=useConstant$1(()=>motionValue(t)),{isStatic:n}=reactExports.useContext(MotionConfigContext);if(n){const[,s]=reactExports.useState(t);reactExports.useEffect(()=>e.on("change",s),[])}return e}function useCombineMotionValues(t,e){const n=useMotionValue(e()),s=()=>n.set(e());return s(),useIsomorphicLayoutEffect$2(()=>{const i=()=>frame.preRender(s,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),cancelFrame(s)}}),n}const isCustomValueType=t=>t&&typeof t=="object"&&t.mix,getMixer=t=>isCustomValueType(t)?t.mix:void 0;function transform$1(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],i=t[1+n],a=t[2+n],o=t[3+n],l=interpolate(i,a,{mixer:getMixer(a[0]),...o});return e?l(s):l}function useComputed(t){collectMotionValues.current=[],t();const e=useCombineMotionValues(collectMotionValues.current,t);return collectMotionValues.current=void 0,e}function useTransform(t,e,n,s){if(typeof t=="function")return useComputed(t);const i=typeof e=="function"?e:transform$1(e,n,s);return Array.isArray(t)?useListTransform(t,i):useListTransform([t],([a])=>i(a))}function useListTransform(t,e){const n=useConstant$1(()=>[]);return useCombineMotionValues(t,()=>{n.length=0;const s=t.length;for(let i=0;i<s;i++)n[i]=t[i].get();return e(n)})}const Button$2=React$1.forwardRef((t,e)=>{const{children:n,color:s="primary",disabled:i=!1,iconButton:a=!1,selected:o=!1,iconLeft:l,iconRight:u,onClick:c,stretch:d=!1,linkButton:p=!1,type:m,variant:g="solid",width:E="","data-test":x,id:b,className:S,...C}=t;return jsxRuntimeExports.jsxs("button",{...C,ref:e,className:classNames("grit button controls__button-label",g,{stretch:d,iconLeft:l&&n,iconRight:u&&n,iconOnly:(u??l)&&!n,iconButton:a,linkButton:p,[s]:!o,[`${s}--selected`]:o,[S??""]:S}),"data-test":x,disabled:i,onClick:c,type:m,id:b,style:d&&E?{width:E}:void 0,children:[l?jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${l}`}):null,n?jsxRuntimeExports.jsx("span",{className:"children",children:n}):null,u?jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${u}`}):null]})});Button$2.displayName="Button";const Carat=({size:t,className:e})=>{const n=`https://d1u7daj727sadp.cloudfront.net/webassets/grit-icons/${t}/carat.svg`;return jsxRuntimeExports.jsx("span",{"data-size":t,className:classNames("inline-flex bg-subtle","data-[size=xx-small]:w-2 data-[size=xx-small]:h-2","data-[size=x-small]:w-4 data-[size=x-small]:h-4","data-[size=small]:w-6 data-[size=small]:h-6","data-[size=medium]:w-8 data-[size=medium]:h-8","data-[size=large]:w-11 data-[size=large]:h-11",e),style:{maskImage:`url("${n}")`,WebkitMaskImage:`url("${n}")`}})},getIconStyle=(t,e)=>{const s=`url(${`https://d1u7daj727sadp.cloudfront.net/webassets/grit-icons/${e}`}/${t}.svg)`,i={"xx-small":8,"x-small":16,small:24,medium:32,large:44};return{WebkitMaskImage:s,maskImage:s,height:i[e],width:i[e]}},IconButton=({badged:t=!1,selected:e=!1,color:n="primary",iconName:s,iconSize:i,disabled:a=!1,onClick:o,"data-test":l,displayCarat:u=!1,...c})=>jsxRuntimeExports.jsxs("button",{...c,disabled:a,onClick:o,className:`grit icon-button ${n}${e?"--selected":""} ${i}`,"data-test":"infoIcon","aria-label":`Icon Button with icon ${s}`,children:[jsxRuntimeExports.jsx("span",{style:{...getIconStyle(s??"",i)},"data-test":l}),t?jsxRuntimeExports.jsx("span",{className:"badged",style:{...getIconStyle("dot-8","xx-small")}}):null,u&&jsxRuntimeExports.jsx(Carat,{size:"x-small"})]}),Avatar=({letter:t,size:e="small"})=>jsxRuntimeExports.jsx("div",{"data-test":"avatar",className:`grit avatar ${e}`,"aria-hidden":!0,children:e==="small"?jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:t}):jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:t})}),UserDropdown=({badged:t,onClick:e,selected:n})=>{const s=useSelector(a=>a.user),i=(s.firstName??s.accountType??"-")[0];return jsxRuntimeExports.jsx("div",{className:"grit user-dropdown",children:jsxRuntimeExports.jsxs("button",{className:`${n?"selected":""} ${t?"badged":""}`,onClick:e,"data-test":"nav-profile","aria-label":`User Dropdown with title ${s.firstName}`,children:[jsxRuntimeExports.jsx(Avatar,{letter:i,size:"small"}),jsxRuntimeExports.jsx("span",{className:"icon",style:{...getIconStyle("carat","x-small")}}),t?jsxRuntimeExports.jsx("span",{className:"badged",style:{...getIconStyle("dot-8","xx-small")}}):null]})})},GlobalNavItem=({isExpanded:t,selected:e,onClick:n,badged:s,text:i,icon:a,children:o,id:l,isIconButton:u,isLastItem:c,className:d})=>{const p=l==="nav-profile";return jsxRuntimeExports.jsxs("li",{role:"none",className:classNames("grit global-nav-item",{expanded:t},d),children:[p?jsxRuntimeExports.jsx(UserDropdown,{selected:e||t,badged:s,onClick:n}):null,u&&!p?jsxRuntimeExports.jsx(IconButton,{iconName:a,iconSize:"small",color:"secondary",selected:e,onClick:m=>{e||n(m)},badged:s,"data-test":l,displayCarat:l==="nav-resources","aria-haspopup":l==="nav-resources"?!0:void 0,"aria-expanded":l==="nav-resources"?t:void 0}):null,!u&&!p?jsxRuntimeExports.jsx(Button$2,{onClick:m=>{n(m)},"data-test":l,color:"secondary",selected:e,variant:"text",iconRight:l==="nav-resources"?"carat-xs":"",iconButton:u,className:l==="nav-resources"?"[&>.icon]:w-4! [&>.icon]:h-4! [&>.icon]:p-0!":"","aria-haspopup":l==="nav-resources"?!0:void 0,"aria-expanded":l==="nav-resources"?t:void 0,children:jsxRuntimeExports.jsxs("span",{className:"controls__web-nav-label",children:[s?jsxRuntimeExports.jsx("span",{className:"badge"}):null,i]})}):null,jsxRuntimeExports.jsx(AnimatePresence,{children:t?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{type:"spring",bounce:.5,duration:.3},className:`dropdown-menu-wrapper ${p?"profiler":""} ${c?"last-item":""}`,"data-test":"menuProfiler",children:o}):null})]})},Alert=({description:t,title:e,variant:n="information",icon:s,extraClassName:i,messageLinkList:a})=>{const o=useDispatch(),l={error:"x-inverted",success:"checkmark-inverted",warning:"alert",information:"info"},u=s?.toLowerCase()??l[n];let c=u==="calendar"?"calendar-normal":u;c=u==="time"?"clock":c;const d=(p,m)=>{o({type:OPEN_LINK,payload:{linkObj:m}})};return jsxRuntimeExports.jsxs("div",{"data-test":"alert",className:`grit alert ${n.toLowerCase()} ${i??""}`,children:[jsxRuntimeExports.jsx("div",{className:"icon-container",children:jsxRuntimeExports.jsx("span",{style:getIconStyle(c,"small"),className:"icon"})}),jsxRuntimeExports.jsx("div",{className:"alert-content",children:jsxRuntimeExports.jsxs("div",{className:"alert-title-description",children:[jsxRuntimeExports.jsx("div",{"data-test":"alertTitle",children:jsxRuntimeExports.jsx("span",{className:"lists-menus__list-title subtle-color ",children:e})}),t?jsxRuntimeExports.jsx("div",{"data-test":"alertDescription",children:jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",dangerouslySetInnerHTML:{__html:t}})}):null,a?.[0].title&&jsxRuntimeExports.jsx("div",{className:"alert-button","data-test":"alertButton",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"alertLink",color:"primary",linkButton:!0,variant:"text",onClick:p=>{d(p,a[0])},children:a[0].title})})]})})]})},ListMenuItem=({item:t,onClick:e,statusMessage:n="",statusColor:s="positive"})=>{const{label:i,text:a,count:o,arrow:l,description:u,badged:c,id:d}=t,p={positive:"information",negative:"error",warning:"warning"};return jsxRuntimeExports.jsx("li",{className:"list-menu-item",children:jsxRuntimeExports.jsxs("button",{onClick:e,"data-test":d,"aria-label":`List Menu Item with title ${a}`,children:[jsxRuntimeExports.jsxs("div",{className:"button-content-wrapper",children:[c?jsxRuntimeExports.jsx("div",{className:"badged",style:{...getIconStyle("dot-8","xx-small")}}):null,i?jsxRuntimeExports.jsx("span",{className:"lists-menus__list-title",children:i}):null,jsxRuntimeExports.jsxs("span",{className:"content",children:[jsxRuntimeExports.jsx("span",{className:"lists-menus__list-title","data-test":"title",children:a}),jsxRuntimeExports.jsx("span",{className:"lists-menus__list-description","data-test":"description",children:u})]}),jsxRuntimeExports.jsxs("span",{className:"right-content",children:[o?jsxRuntimeExports.jsxs("span",{className:"lists-menus__list-title count",children:["(",o,")"]}):null,l?jsxRuntimeExports.jsx("span",{className:"lists-menus__list-title arrow icon gritIcon--arrow-right"}):null]})]}),n&&jsxRuntimeExports.jsx("div",{className:"message",children:jsxRuntimeExports.jsx(Alert,{variant:p[s],icon:"info",title:n})})]})})},ListMenu=({items:t,onClickMenuItem:e})=>jsxRuntimeExports.jsx("ul",{className:"grit list-menu border-none",children:t.map((n,s)=>jsxRuntimeExports.jsx(ListMenuItem,{onClick:i=>e(i,n),item:n},s))}),ButtonGroup=({buttons:t,doSomethingAfterClick:e,disabled:n,activeId:s})=>jsxRuntimeExports.jsx("div",{"data-test":"buttonGroup",className:"grit button-group",children:t.map((i,a)=>jsxRuntimeExports.jsx("button",{name:i,onClick:o=>{if(a!==s){e(o,a);return}},className:`metadata__regular ${a===s?" active":""}`,disabled:n,children:i},a))}),ToggleButton=reactExports.forwardRef(({active:t,onClick:e,variant:n,customStyles:s,"data-test":i,disabled:a=!1},o)=>{const l=()=>{switch(n){case"bookmark":return`bookmark${t?"":"-empty"}`;case"voiceover":return`voiceover${t?"-on-xs":"-off-xs"}`;case"checkbox":return`checkbox${t?"-checked":"-unchecked"}`;case"checkbox-xs":return`checkbox${t?"-checked-xs":"-unchecked-xs"}`;case"star":return`star${t?"-filled":"-empty"}`;case"toggle":return`toggle${t?"-on":"-off"}`;case"settings":return`settings${t?"-on":"-off"}`;case"like":return`like${t?"-on":"-off-small"}`;case"dislike":return`dislike${t?"-on":"-off-small"}`;default:return"checkmark"}},u=(d,p)=>{switch(d){case"like":return p?"Unlike":"Like";case"dislike":return p?"Remove dislike":"Dislike";case"bookmark":return p?"Remove bookmark":"Bookmark";case"settings":return p?"Close settings panel":"Open settings panel";case"toggle":return p?"Turn off toggle":"Turn on toggle";case"checkbox":return p?"Uncheck checkbox":"Check checkbox";default:return d}},c=(d,p)=>{switch(d){case"bookmark":return p?"bg-controls-primary! hover:bg-controls-primary-hover! active:bg-controls-primary-active!":"bg-controls-secondary! hover:bg-controls-secondary-hover! active:bg-controls-secondary-active!";default:return""}};return jsxRuntimeExports.jsx("button",{ref:o,onClick:e,className:`grit toggleButton ${n} ${t?"active":""}`,style:s,"data-test":i,disabled:a,"aria-label":u(n,t),"aria-pressed":t,children:jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${l()} 
          ${c(n,t)} `,children:t?"On":"Off"})})});ToggleButton.displayName="ToggleButton";const PreferencePanelItem=({text:t,type:e,state:n,options:s,activeId:i,handleItemClick:a,disabled:o})=>{const l=t.replaceAll(/[^A-Z0-9]+/gi,""),u=l+e;return jsxRuntimeExports.jsxs("li",{"data-test":`${l}Section`,className:"grit preference-panel-item metadata__regular",children:[jsxRuntimeExports.jsx("span",{className:o?"disabled":"",children:t}),jsxRuntimeExports.jsx("span",{children:e==="toggle"?jsxRuntimeExports.jsx(ToggleButton,{"data-test":u,disabled:o,variant:"toggle",active:n??!1,onClick:()=>{a()}}):jsxRuntimeExports.jsx(ButtonGroup,{activeId:i??0,disabled:o,buttons:s??[],doSomethingAfterClick:(c,d)=>{a(c.target.name,d)}})})]})},dialog=(t,e)=>jsxRuntimeExports.jsx("div",{className:"subscription-status",children:jsxRuntimeExports.jsx(Alert,{variant:t?"error":"information",title:e})}),SubscriptionCard=({subscription:t,onClickManageSubscription:e})=>{const n=useDispatch(),s=useNavigate(),i=()=>{if(t.status==="trialing")return dialog(t.cancelAtPeriodEnd,t.nextRenewalMessage);if(t.status==="active"){const l=t.cancelAtPeriodEnd?t.expirationMessage:t.nextRenewalMessage;return dialog(t.cancelAtPeriodEnd,l)}return t.status==="canceled"&&t.cancelAtPeriodEnd?dialog(t.cancelAtPeriodEnd,t.expirationMessage):null},a=l=>{l.preventDefault(),window.open(`tel:${t.rsaAssistanceNumber}`,"_self"),n({type:BUTTON_PRESSED,payload:{to:"rsa.call"}})},o=l=>{e&&e(l),n({type:SET_ACTIVE_STATE,payload:{state:"profiler.manageSubscription"}}),s(`/profiler/manage-subscription/${t._id}/view`)};return isEmpty(t)?null:jsxRuntimeExports.jsxs("div",{className:"subscription-card",children:[i(),jsxRuntimeExports.jsxs("div",{className:"name-wrap",children:[jsxRuntimeExports.jsxs("div",{className:"left-section",children:[jsxRuntimeExports.jsx("h6",{className:"allstate-title headings__h6","data-test":"rsaTitle",children:"Allstate Roadside Assistance"}),jsxRuntimeExports.jsxs("p",{className:"member-id paragraph__condensed",children:["Member ID",jsxRuntimeExports.jsx("span",{className:"meta-data metadata__regular","data-test":"memberId",children:t.memberId})]})]}),t.status!=="canceled"&&!t.cancelAtPeriodEnd?jsxRuntimeExports.jsx("div",{className:"manage-button",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"manage-subscription",variant:"ghost",disabled:t.status==="pending",onClick:l=>{o(l)},children:"More Info"})}):null]}),t.status!=="pending"?jsxRuntimeExports.jsx("div",{className:"rsa-info",children:jsxRuntimeExports.jsx(Button$2,{onClick:a,variant:"text",children:"Call for Roadside Assistance"})}):null]})},hasSubscriptions=t=>t?.length?t.reduce((n,s)=>s.status!=="canceled"?s.status:n,"canceled")!=="canceled":!1,ProfileDropdownMenu=({windowWidth:t,subscriptionList:e,userInfo:n,onClickManageSubscription:s,onClickEditProfile:i,brand:a,className:o,showEditProfile:l,onClickUpdatePassword:u})=>{const[c]=useExperiment("renewal-expiration-show"),d=useOutOfBounds("section.profile-drop-down",t,null),{user:p,progress:m,featureFlags:g,ui:E,audio:x,dashboard:b}=store.getState(),{voiceOver:S}=E,{theme:C,setTheme:T}=useTheme(),[I,D]=reactExports.useState(localStorage.getItem("playbackRate")??"Normal"),{aceRootScope:P}=window,{domainConf:O}=P||{},B=O?.TitleLong||a,F=O?.TitleShort||a,H=S.isAvailable&&(x.state===audioStateEnum.playing||x.state===audioStateEnum.paused),Q=S.isAvailable&&!S.isPurchaseable,Z=p?.accountType!=="parent"&&!lodashExports.isEmpty(S)&&(S.isAvailable||S.isPurchaseable),[ne,re]=reactExports.useState(H),se=(p?.firstName??p?.accountType??"-")[0],G=isUserLoggedIn(p)&&m.accountType==="student",K=[{text:" View Terms & Conditions",id:"tc",linkObj:{title:"Terms & conditions",key:"tc",type:"APP",data:{id:"tc"}}},{text:"Log out",id:"logout",linkObj:{title:"Log out",key:"user.signout",type:"APP",data:{id:"logout"}}}],M=()=>{let fe=!1;re(!ne),store.dispatch({type:CLICK_AUDIO_ICON}),x.state===audioStateEnum.playing||x.state===audioStateEnum.paused?store.dispatch(setAudioPaused()):(store.dispatch(setAudioPlaying()),fe=!0),store.dispatch(genericAnalyticsAndIterableEvent("Feature Toggled",{is_active:fe,type:"AUDIO"}))},W={system:"System",light:"Light",dark:"Dark","high-contrast":"Contrast"},ee=[{text:"Audio Read-Along",type:"toggle",state:ne,handleItemClick:()=>{M()},disabled:!Q,show:Z},{text:"Read-Along Speed",type:"selection",options:["Normal","Fast"],activeId:I==="Normal"?0:1,handleItemClick:fe=>{fe&&(localStorage.setItem("playbackRate",fe),D(fe),instance.togglePlaybackSpeed(fe))},disabled:!ne||!Q,show:Z},...p?.isDebug?[{text:"Theme",type:"selection",options:Object.values(W),activeId:Object.keys(W).findIndex(fe=>fe===C)??0,handleItemClick:fe=>{const Ce=Object.keys(W).find(Me=>W[Me]===fe)??"system";ee[2].activeId=Object.keys(W).findIndex(Me=>Me===fe)??0,T(Ce)},show:!0}]:[{text:"Higher Contrast",type:"toggle",state:C==="high-contrast",handleItemClick:()=>{T(C==="high-contrast"?"light":"high-contrast")},disabled:!C,show:!0}]],z=(fe,Ce)=>{fe.preventDefault();const{linkObj:Me}=Ce;store.dispatch({type:OPEN_LINK,payload:{linkObj:Me}})},ae=b.metadataOdyssey?.isAmbassadorLinkShown,{hasRenewals:ce,deadlineModal:he}=b.metadataOdyssey||{};return reactExports.useEffect(()=>{re(H),D(localStorage.getItem("playbackRate")??"Normal")},[x]),jsxRuntimeExports.jsxs("section",{role:"menu",className:classNames("grit profile-drop-down",o,{"profile-drop-down--aarp":a==="AARP","profile-drop-down--outOfBounds":d,purchase:a!=="FLVS"&&P?.progressCurrent?.isPurchased===!1}),children:[jsxRuntimeExports.jsxs("div",{className:"user-info-card",children:[jsxRuntimeExports.jsxs("div",{className:"name-section divider",children:[jsxRuntimeExports.jsx(Avatar,{letter:se,size:"large"}),a!=="AARP"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2","data-test":"userFullName",children:`${n?.firstName??p.accountType} ${n?.lastName??""}`}),jsxRuntimeExports.jsx("p",{className:"email-info paragraph__regular","data-test":"userName",children:n?.username})]}),jsxRuntimeExports.jsxs("div",{className:"button-wrapper",children:[l&&jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"edit-profile",onClick:fe=>{i(fe)},iconLeft:"edit",children:"Edit Profile"}),isUserLoggedIn(p)&&g.showChangePasswordInProfile&&jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"updatePassword",onClick:fe=>{u(fe)},iconLeft:"lock-open",children:"Update Password"})]})]}),jsxRuntimeExports.jsx("section",{className:"main-links-section",children:jsxRuntimeExports.jsxs("ul",{className:"grit list-menu",children:[ae&&jsxRuntimeExports.jsx(ListMenuItem,{item:{text:`${F} Referral Program`,description:`Share ${B} with your friends and earn extra money.`,arrow:!0,id:"refer"},onClick:()=>{store.dispatch({type:BUTTON_PRESSED,payload:{to:"referral.view",from:"profile.view"}}),store.dispatch({type:OPEN_LINK,payload:{linkObj:{title:"Refer & earn money",key:"rewards.share",type:"APP",data:{id:"refer"}}}})}}),G&&g.showUpgradesAddonsInProfile&&jsxRuntimeExports.jsx(ListMenuItem,{item:{text:"Course Upgrades & Add-Ons",description:"Upgrade your course experience.",arrow:!0,id:"addons"},onClick:()=>store.dispatch({type:OPEN_LINK,payload:{linkObj:{title:"Upgrades & Add-ons",key:"addons",type:"APP",data:{id:"addons"}}}})}),ce&&!c&&jsxRuntimeExports.jsx(ListMenuItem,{item:{text:"Renewals",description:"Renew your course before your expiration date.",arrow:!0,id:"renew"},statusMessage:he?.data?.label,statusColor:he?.data?.expirationPhaseColor,onClick:()=>store.dispatch({type:OPEN_LINK,payload:{linkObj:{title:"Renew Your Course",key:"renew.view",type:"APP",data:{id:"renew"}}}})})]})}),hasSubscriptions(e)?jsxRuntimeExports.jsxs("section",{className:"subscription-section","data-test":"subscription",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6 subsection-title","data-test":"subscriptionTitle",children:"Subscriptions"}),e.map(fe=>fe.status!=="canceled"?jsxRuntimeExports.jsx(SubscriptionCard,{subscription:fe,onClickManageSubscription:Ce=>{s(Ce)}},fe._id):null)]}):null,jsxRuntimeExports.jsxs("div",{className:"settings-wrapper",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6 subsection-title",children:"Settings"}),jsxRuntimeExports.jsx("ul",{children:ee.map((fe,Ce)=>fe.show&&jsxRuntimeExports.jsx(PreferencePanelItem,{text:fe.text,type:fe.type,state:fe.state,activeId:fe.activeId,options:fe.options,handleItemClick:fe.handleItemClick,disabled:fe.disabled},Ce))})]})]}),jsxRuntimeExports.jsx(ListMenu,{items:K,onClickMenuItem:(fe,Ce)=>{z(fe,Ce)}})]})},isStudent=(t,e)=>isUserLoggedIn(t)&&get$5(e,"accountType","")==="student",isParent=(t,e)=>isUserLoggedIn(t)&&get$5(e,"accountType","")==="parent"&&get$5(e,"courseType","")==="PTDE",shouldDisplayNavItem=(t,e,n,s,i)=>{const{isDevServer:a}=window.aceRootScope,{featureFlags:o,dashboard:l}=store.getState(),u=n?.topicCourseType==="TEST_PREP";switch(t.key){case"dash.index":return isUserLoggedIn(e);case"help":return!0;case"practiceTest.view":return isStudent(e,i)&&o.showPracticeTestsInResources;case"testList.view":return isStudent(e,i);case"license.checklist":return isStudent(e,i);case"360Video.view":return isStudent(e,i);case"check.list":return isStudent(e,i);case"keyTerms.view":return isStudent(e,i);case"certificate.viewList":return isStudent(e,i);case"user.signout":return isUserLoggedIn(e);case"tc":return n?.isRequireTermsAndConditions&&o.showTermsConditionsInProfile;case"rewards.share":{const c=ExperimentLib.getFlag("rewards-web-nav-show");return l.metadataOdyssey?.isAmbassadorLinkShown&&c}case"theme.hc":return isUserLoggedIn(e)&&s==="FLVS";case"resources":return get$5(t,"data.children.length",0)>0&&isUserLoggedIn(e)&&(!n?.isHideProgress||u);case"bookmark.view":return isStudent(e,i);case"profile":return isUserLoggedIn(e);case"user.debug":return get$5(e,"isDebug",!1);case"activity.hijack":return isHijackable();case"activity.theme":return isHijackable()&&window.location.hostname==="localhost";case"activity.brand":return isHijackable()&&!isUserLoggedIn(e)&&a();case"api":return isHijackable();case"addons":return isStudent(e,i)&&o.showUpgradesAddonsInProfile;case"user.changePassword":return isUserLoggedIn(e)&&s==="AARP"&&o.showChangePasswordInProfile;case"profiler.manageSubscription":return!0;default:return!1}},isItemActive=(t,e)=>t.key===e?!0:get$5(t,"data.children.length",0)?!!t.data?.children?.filter(n=>isItemActive(n,e)).length:!1,showUpdatePassword=()=>{if(!isStudent)return!1;const{featureFlags:t}=store.getState();return t.showChangePasswordInProfile},showEditProfile=(t,e)=>isStudent?!(e==="AARP"&&!t?.driversLicense):!1,GlobalNavigation=t=>{const{activeState:e,brand:n,course:s,navItems:i,progress:a,subscriptions:o,user:l}=t,u=showEditProfile(l,n),c=showUpdatePassword(),[d,p]=reactExports.useState(!1),[m,g]=reactExports.useState(i),[E,x]=reactExports.useState(window.innerWidth),[b,S]=reactExports.useState(null),{theme:C,setTheme:T}=useTheme(),I=useDispatch(),D=useSelector(selectUIsubtopicIdList),[P]=useExperiment("rewards-web-nav-show"),O=i.find(ne=>ne.key==="profile")?.data?.children?.find(ne=>ne.key==="profiler.formal-standard"),B=i.find(ne=>ne.key==="profile")?.data?.children?.find(ne=>ne.key==="user.changePassword"),F=1024;reactExports.useEffect(()=>{let ne=null,re=null;return d||(ne=fromEvent(window,"resize").pipe(debounceTime(200)).subscribe(se=>{x(se.target.innerWidth)}),re=fromEvent(window,"click").subscribe(se=>{const G=se;document.querySelector(".settings-wrapper")?.contains(G.target)||(S(null),p(!1))}),p(!0)),()=>{ne&&(ne.unsubscribe(),re.unsubscribe())}},[]),reactExports.useEffect(()=>{g(i.filter(ne=>shouldDisplayNavItem(ne,l,s,n,a)))},[i,s]);const H=(ne,re,se=!1)=>{ne.stopPropagation(),ne.preventDefault(),re.key==="theme.hc"&&T(C==="light"?"high-contrast":"light"),re.key==="bookmark.view"&&I(genericAnalyticsAndIterableEvent("Bookmark Clicked",{action_type:"collection",is_bookmark_max:!1})),P&&re.key==="rewards.share"&&I({type:BUTTON_PRESSED,payload:{to:"referral.view",from:"rewards.nav"}}),re.key==="glossary.view"&&D?.length&&I({type:CLEAR_TOPIC_REDIRECT_DATA}),se&&I(resourceClicked(re)),I({type:OPEN_LINK,payload:{linkObj:re}}),b===re.data.id?S(null):get$5(re,"data.children.length",0)?S(re.data.id):S(null)},Q=ne=>{const{featureFlags:re}=store.getState();return ne.data?.children?.map((se,G)=>{if(shouldDisplayNavItem(se,l,s,n,a)||ne.key==="resources"){if((!re.showPracticeTestsInResources||isParent(l,a))&&se.key==="practiceTest.view")return null;const K=ne.key==="resources";return jsxRuntimeExports.jsx(MenuItem$1,{onClick:M=>{H(M,se,K)},badged:!1,"data-test":se.data.id||se.key,isCurrent:se.key===e,children:`${se.title} ${se.key==="theme.hc"?C==="light"?": OFF":": ON":""}`},`${se.data.id}-${G}`)}return null})},Z=ne=>P&&ne==="rewards.share"&&E<=F?"hidden!":"";return jsxRuntimeExports.jsx("nav",{className:classNames("grit global-navigation",{"global-navigation--desktop":E>=F,"global-navigation--mobile":E<F}),role:"navigation","aria-label":"Main Menu",children:jsxRuntimeExports.jsx("ul",{className:"nav-list",role:"menubar",children:m.map((ne,re)=>jsxRuntimeExports.jsx(GlobalNavItem,{text:ne.title,icon:ne.data?.icon,id:ne.data?.id,onClick:se=>{H(se,ne)},badged:!1,isIconButton:E<F,selected:isItemActive(ne,e),isLastItem:i.length-1===re,isExpanded:b===ne.data?.id,className:Z(ne.key),children:ne.data?.children?.length&&ne.data.id==="nav-profile"?jsxRuntimeExports.jsx(ProfileDropdownMenu,{className:"dropdown-menu",userInfo:l,brand:n,windowWidth:E,subscriptionList:o,onClickManageSubscription:se=>{H(se,ne)},onClickEditProfile:se=>{H(se,O)},onClickUpdatePassword:se=>{H(se,B)},showEditProfile:u,showUpdatePassword:c,data:ne}):jsxRuntimeExports.jsx(DropDownMenu,{className:"dropdown-menu",windowWidth:E,id:ne.data?.id,selected:b===ne.data?.id,children:Q(ne)},ne.data?.id)},ne.data?.id))})})},SiteHeader=()=>{const{theme:t}=useTheme(),e=useSelector(selectCourseState),n=useSelector(selectprogressState),s=useSelector(selectDashboardState),i=useSelector(selectSubscriptionsState),a=useSelector(selectUIBrandingTitleLong),o=useSelector(selectUIBrandingLogo),l=useSelector(selectUIState),u=useSelector(selectUserState),c=useNavigate(),d=useDispatch(),{summaryOdyssey:p}=s,{aceRootScope:m}=window,g=!!u._id,E=p?.find(C=>C.course._id===e._id),{course:x}=E||{},{isTopicEnabled:b}=x||{};return reactExports.useEffect(()=>{n._id&&d({type:GET_RESOURCE_LINKS_START,payload:{progressId:n._id}});const C=`hasSeenAudioUpsellBadge-${n._id}`,T=localStorage.getItem(C)!=="1";d(T?{type:SET_VOICEOVER_IS_BADGED}:{type:SET_VOICEOVER_IS_NOT_BADGED}),u._id&&(d({type:FIND_PURCHASE_STATUS_START,payload:{productTypeList:["FEATURE"],productOptionList:["voiceOver"]}}),d({type:START_GET_SUBSCRIPTIONS}))},[n._id,b]),useHotkeys([...[{combo:"shift+ctrl+g",description:"Home",callback:()=>{g&&(d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),c("/dash/index"))}},{combo:"shift+ctrl+c",description:"Course Switcher",callback:()=>{d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"courseswitch.view"}}),c("/courseswitch/view")}},{combo:"shift+alt+d",description:"Toggle Debug Mode",callback:()=>{isHijackable()&&utilities.toggleDebug(u,d)}},{combo:"shift+ctrl+h",description:"Hijack - switch API",callback:()=>{isHijackable()&&(d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"activity.hijack"}}),c("/activity/hijack"))}},{combo:"shift+ctrl+l",description:"Progress Log",callback:()=>{g&&(d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"activity.progress"}}),c("/activity/progress"))}},{combo:"shift+ctrl+p",description:"Practice Test",callback:()=>{g&&(d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"practicetests"}}),c("/resource/practicetests"))}},{combo:"shift+ctrl+r",description:"Resume The Course",callback:()=>{g&&m.resumeCourse()}},{combo:"shift+ctrl+u",description:"Student Profile",callback:()=>{g&&(d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"profiler.formal-standard"}}),c("/profiler/page-like/SIDEBAR/standard/PROFILE__STUDENT_INFO/VARID_SIDEBAR"))}},{combo:"shift+ctrl+f",description:"help",callback:()=>{g&&d({type:OPEN_LINK,payload:{linkObj:{link:"https://www.aceableagent.com/support/",type:"URL"}}})}}]]),jsxRuntimeExports.jsxs("header",{"data-test":"mainHeader",className:"grit site-header taxonomy parappa__header",children:[o?jsxRuntimeExports.jsx(Link,{to:"/dash/index","data-test":"logo",className:"logo",children:jsxRuntimeExports.jsx("div",{className:`logo-heading logo-heading--${l.brand}`,style:{backgroundImage:`url(${o})`},children:a})}):null,jsxRuntimeExports.jsx(GlobalNavigation,{brand:l.brand,theme:t,navItems:l.header.navigationList,user:u,course:e,progress:n,activeState:l.activeState,subscriptions:i})]})},styles$1={ace:{light:{subtleDefault:{color:"rgba(67,100,111,1)"},subtleHover:{color:"rgba(111,140,149,1)"},subtleActive:{color:"rgba(175,193,198,1)"},regularDefault:{color:"rgba(33,51,63,1)"},regularHover:{color:"rgba(67,100,111,1)"},regularActive:{color:"rgba(111,140,149,1)"},confidentDefault:{color:"rgba(18,189,205,1)"},confidentHover:{color:"rgba(78,206,218,1)"},confidentActive:{color:"rgba(136,222,230,1)"},earnestDefault:{color:"rgba(255,48,114,1)"},earnestHover:{color:"rgba(255,100,150,1)"},earnestActive:{color:"rgba(255,151,184,1)"},positiveDefault:{color:"rgba(44,225,171,1)"},positiveHover:{color:"rgba(97,233,192,1)"},positiveActive:{color:"rgba(149,240,213,1)"},negativeDefault:{color:"rgba(236,81,100,1)"},negativeHover:{color:"rgba(241,125,139,1)"},negativeActive:{color:"rgba(245,168,177,1)"},disabledFGDefault:{color:"rgba(211,221,223,1)"},disabledBGDefault:{color:"rgba(241,245,245,1)"},reverseDefault:{color:"rgba(255,255,255,1)"},reverseHover:{color:"rgba(250,251,251,1)"},reverseActive:{color:"rgba(241,245,245,1)"},subduedDefault:{color:"rgba(175, 193, 198, 1)"},subduedHover:{color:"rgba(175, 193, 198, 1)"},subduedActive:{color:"rgba(175, 193, 198, 1)"},brandDefault:{color:"rgba(18,189,205,1)"},linkDefault:{color:"rgba(38,137,202,1)"},linkHover:{color:"rgba(93,167,216,1)"},linkActive:{color:"rgba(146,196,228,1)"},currentMenuItemDefault:{color:"rgba(37, 115, 167, 1)"},pageBGDefault:{color:"rgba(255,255,255,1)"},overlayBGDefault:{color:" rgba(33,51,63,0.65)"},navBGDefault:{color:"rgba(250,251,251,1)"},sectionBGDefault:{color:" rgba(241,245,245,0.50)"},sectionBGInfoDefault:{color:"rgba(231,248,250,1)"},sectionBGWarningDefault:{color:"rgba(254,247,232,1)"},sectionBGErrorDefault:{color:"rgba(253,237,239,1)"},subsectionBGDefault:{color:" rgba(232,238,239,0.50)"},subsectionBGCompleteDefault:{color:"rgba(233,252,246,1)"},subsectionBGCurrentDefault:{color:"rgba(231,248,250,1)"},subsectionBGUpcomingDefault:{color:"rgba(241,245,245,1)"},buttonSolidDefault:{color:"rgba(38,137,202,1)",border:"2px solid #2689CA"},buttonSolidHover:{color:"rgba(93,167,216,1)",border:"2px solid #5DA7D8"},buttonSolidActive:{color:"rgba(146,196,228,1)",border:"2px solid #92C4E4"},buttonSolidDisabled:{color:"rgba(241,245,245,1)",border:"2px solid #F1F5F5"},buttonGhostDefault:{color:" rgba(255,255,255,0.00)",border:"2px solid #2689CA"},buttonGhostHover:{color:" rgba(255,255,255,0.00)",border:"2px solid #5DA7D8"},buttonGhostActive:{color:" rgba(255,255,255,0.00)",border:"2px solid #92C4E4"},buttonGhostDisabled:{color:"rgba(255,255,255,0.00)",border:"2px solid #F1F5F5"},animatedButtonSolidDefault:{color:"rgba(38,137,202,1)",border:"2px solid #2689CA"},animatedButtonSolidHover:{color:"rgba(93,167,216,1)",border:"2px solid #5DA7D8"},animatedButtonSolidActive:{color:"rgba(146,196,228,1)",border:"2px solid #92C4E4"},animatedButtonAffirmedDefault:{color:"rgba(44,225,171,1)",border:"2px solid #2CE1AB"},animatedButtonAffirmedHover:{color:"rgba(97,233,192,1)",border:"2px solid #61E9C0"},animatedButtonAffirmedActive:{color:"rgba(149,240,213,1)",border:"2px solid #95F0D5"},answerButtonInitialDefault:{color:"rgba(255,255,255,1)",border:"2px solid #AFC1C6"},answerButtonInitialHover:{color:"rgba(248,253,253,1)",border:"2px solid #4ECEDA"},answerButtonInitialActive:{color:"rgba(243,251,252,1)",border:"2px solid #12BDCD"},answerButtonSelectedDefault:{color:"rgba(248,253,253,1)",border:"2px solid #12BDCD"},answerButtonSelectedHover:{color:"rgba(243,251,252,1)",border:"2px solid #4ECEDA"},answerButtonSelectedActive:{color:"rgba(231,248,250,1)",border:"2px solid #12BDCD"},answerButtonCorrectDefault:{color:"rgba(255,255,255,1)",border:"2px solid #2CE1AB"},answerButtonSelectedCorrectDefault:{color:"rgba(233,252,246,1)",border:"2px solid #2CE1AB"},answerButtonSelectedIncorrectDefault:{color:"rgba(253,237,239,1)",border:"2px solid #EC5164"},reviewButtonDefault:{color:"rgba(248,251,253,1)",border:"2px solid #F8FBFD"},reviewButtonActive:{color:"rgba(233,243,249,1)",border:"2px solid #E9F3F9"},reviewButtonHover:{color:"rgba(244,249,252,1)",border:"2px solid #F4F9FC"},buttonCourseNavDefault:{color:"rgba(250,251,251,1)",border:"2px solid #FAFBFB"},buttonCourseNavHover:{color:"rgba(244,249,252,1)",border:"2px solid #F4F9FC"},buttonCourseNavActive:{color:"rgba(233,243,249,1)",border:"2px solid #E9F3F9"},imageMapButtonInitialDefault:{color:" rgba(255,255,255,0.30)",border:"2px solid rgba(255,255,255,0.50)",boxShadow:"0 2px 4px 0 rgba(33,51,63,0.30)"},imageMapButtonInitialHover:{color:" rgba(255,255,255,0.30)",border:"2px solid #4ECEDA",boxShadow:"0 2px 4px 0 rgba(33,51,63,0.30)"},imageMapButtonInitialActive:{color:" rgba(255,255,255,0.60)",border:"2px solid #12BDCD",boxShadow:"0 2px 4px 0 rgba(33,51,63,0.30)"},imageMapButtonSelectedDefault:{color:" rgba(248,253,253,0.60)",border:"2px solid #12BDCD",boxShadow:"0 4px 4px 0 rgba(33,51,63,0.70)"},imageMapButtonSelectedHover:{color:" rgba(243,251,252,0.60)",border:"2px solid #4ECEDA",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},imageMapButtonSelectedActive:{color:" rgba(231,248,250,0.60)",border:"2px solid #12BDCD",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},imageMapButtonCorrectDefault:{color:" rgba(255,255,255,0.30)",border:"2px solid #2CE1AB",boxShadow:"0 2px 4px 0 rgba(33,51,63,0.30)"},imageMapButtonSelectedCorrectDefault:{color:" rgba(44,225,171,0.30)",border:"2px solid #2CE1AB",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},imageMapButtonSelectedIncorrectDefault:{color:" rgba(236,81,100,0.30)",border:"2px solid #EC5164",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},brandGradientBGFlatDefault:{color:"linear-gradient(135deg, #12A1CD 0%, #12CDAE 100%)"},brandGradientBGFlotingDefault:{color:"linear-gradient(135deg, #12A1CD 0%, #12CDAE 100%)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGFlatDefault:{color:"rgba(255,255,255,1)"},cardBGRestingDefault:{color:"rgba(250,251,251,1)",boxShadow:"0 0 1px 0 rgba(33,51,63,0.30)"},cardBGHoveringDefault:{color:"rgba(250,251,251,1)",boxShadow:"0 1px 3px 0 rgba(33,51,63,0.15)"},cardBGHoveringHover:{color:"rgba(241,245,245,1)",boxShadow:"0 1px 3px 0 rgba(33,51,63,0.15)"},cardBGHoveringActive:{color:"rgba(232,238,239,1)",boxShadow:"0 1px 3px 0 rgba(33,51,63,0.15)"},cardBGFloatingDefault:{color:"rgba(250,251,251,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGFloatingHover:{color:"rgba(241,245,245,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGFloatingActive:{color:"rgba(232,238,239,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGReverseDefault:{color:"rgba(33,51,63,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},paginationCurrentDefault:{color:"rgba(33,51,63,1)"},paginationNonCurrentDefault:{color:"rgba(211,221,223,1)"},progressCompleteDefault:{color:"rgba(44,225,171,1)"},progressCurrentDefault:{color:"rgba(18,189,205,1)"},progressUpcomingDefault:{color:"rgba(211,221,223,1)"},dividerDefault:{color:"rgba(232,238,239,1)"},dividerCorrectDefault:{color:"rgba(97,233,192,1)"},dividerIncorrectDefault:{color:"rgba(241,125,139,1)"},dividerDropdownMenuDefault:{color:"rgba(78,185,218,1)"},menuBGDefault:{color:" rgba(255,255,255,0.00)"},menuBGHover:{color:" rgba(232,238,239,0.50)"},menuBGActive:{color:"rgba(232,238,239,1)"},dropdownMenuBGDefault:{color:"rgba(18,189,205,1)"},dropdownMenuBGHover:{color:"rgba(78,185,218,1)"},dropdownMenuBGActive:{color:"rgba(136,208,230,1)"},chapterItemDefault:{color:"rgba(255,255,255,1)",border:"2px solid #FFFFFF"},chapterItemActive:{color:"rgba(244,249,252,1)",border:"2px solid #F4F9FC"},chapterItemHover:{color:"rgba(248,251,253,1)",border:"2px solid #F8FBFD"},errorSectionBGDefault:{color:"rgba(253,237,239,1)"},inputFieldsDefault:{color:"rgba(255,255,255,1)",border:"1px solid #AFC1C6"},inputFieldsActive:{color:"rgba(248,253,253,1)",border:"1px solid #12BDCD"},inputFieldsHover:{color:"rgba(255,255,255,1)",border:"1px solid #43646F"},inputFieldsError:{color:"rgba(255,244,248,1)",border:"1px solid #EC5164"},inputFieldsLocked:{color:"rgba(241,245,245,1)",border:"1px solid #AFC1C6"},fillBlankDefault:{color:"rgba(255,255,255,1)",border:"2px solid #D3DDDF"},fillBlankActive:{color:"rgba(243,251,252,1)",border:"2px solid #12BDCD"},fillBlankHover:{color:"rgba(248,253,253,1)",border:"2px solid #4ECEDA"},fillBlankCorrect:{color:"rgba(233,252,246,1)",border:"2px solid #E9FCF6"},sliderButtonDefault:{color:"rgba(250,251,251,1)",border:"2px solid #D3DDDF",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},sliderButtonHover:{color:"rgba(241,245,245,1)",border:"2px solid #D3DDDF",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},sliderButtonActive:{color:"rgba(232,238,239,1)",border:"2px solid #D3DDDF",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},sliderBarDefault:{color:"rgba(211,221,223,1)"},sliderBarFilledDefault:{color:"rgba(33,51,63,1)"},buttonLabelCReverseDefault:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseHover:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseFocus:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseActive:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseDisabled:{color:"rgba(211,221,223,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCGhostDefault:{color:"#2689CA",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCGhostDisabled:{color:"#D8E2E9",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCGhostHover:{color:"#4EB9DA",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCGhostFocus:{color:"#88D0E6",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCGhostActive:{color:"#88D0E6",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"}},dark:{subtleDefault:{color:"rgba(67,100,111,1)"},subtleHover:{color:"rgba(111,140,149,1)"},subtleActive:{color:"rgba(175,193,198,1)"},regularDefault:{color:"rgba(33,51,63,1)"},regularHover:{color:"rgba(67,100,111,1)"},regularActive:{color:"rgba(111,140,149,1)"},confidentDefault:{color:"rgba(18,189,205,1)"},confidentHover:{color:"rgba(78,206,218,1)"},confidentActive:{color:"rgba(136,222,230,1)"},earnestDefault:{color:"rgba(255,48,114,1)"},earnestHover:{color:"rgba(255,100,150,1)"},earnestActive:{color:"rgba(255,151,184,1)"},positiveDefault:{color:"rgba(44,225,171,1)"},positiveHover:{color:"rgba(97,233,192,1)"},positiveActive:{color:"rgba(149,240,213,1)"},negativeDefault:{color:"rgba(236,81,100,1)"},negativeHover:{color:"rgba(241,125,139,1)"},negativeActive:{color:"rgba(245,168,177,1)"},disabledFGDefault:{color:"rgba(211,221,223,1)"},disabledBGDefault:{color:"rgba(241,245,245,1)"},reverseDefault:{color:"rgba(255,255,255,1)"},reverseHover:{color:"rgba(250,251,251,1)"},reverseActive:{color:"rgba(241,245,245,1)"},brandDefault:{color:"rgba(18,189,205,1)"},linkDefault:{color:"rgba(38,137,202,1)"},linkHover:{color:"rgba(93,167,216,1)"},linkActive:{color:"rgba(146,196,228,1)"},pageBGDefault:{color:"rgba(255,255,255,1)"},overlayBGDefault:{color:" rgba(33,51,63,0.65)"},navBGDefault:{color:"rgba(250,251,251,1)"},sectionBGDefault:{color:" rgba(241,245,245,0.50)"},sectionBGInfoDefault:{color:"rgba(231,248,250,1)"},sectionBGWarningDefault:{color:"rgba(254,247,232,1)"},sectionBGErrorDefault:{color:"rgba(253,237,239,1)"},subsectionBGDefault:{color:" rgba(232,238,239,0.50)"},subsectionBGCompleteDefault:{color:"rgba(233,252,246,1)"},subsectionBGCurrentDefault:{color:"rgba(231,248,250,1)"},subsectionBGUpcomingDefault:{color:"rgba(241,245,245,1)"},buttonSolidDefault:{color:"rgba(38,137,202,1)",border:"2px solid #2689CA"},buttonSolidHover:{color:"rgba(93,167,216,1)",border:"2px solid #5DA7D8"},buttonSolidActive:{color:"rgba(146,196,228,1)",border:"2px solid #92C4E4"},buttonSolidDisabled:{color:"rgba(241,245,245,1)",border:"2px solid #F1F5F5"},buttonGhostDefault:{color:" rgba(255,255,255,0.00)",border:"2px solid #2689CA"},buttonGhostHover:{color:" rgba(255,255,255,0.00)",border:"2px solid #5DA7D8"},buttonGhostActive:{color:" rgba(255,255,255,0.00)",border:"2px solid #92C4E4"},animatedButtonSolidDefault:{color:"rgba(38,137,202,1)",border:"2px solid #2689CA"},animatedButtonSolidHover:{color:"rgba(93,167,216,1)",border:"2px solid #5DA7D8"},animatedButtonSolidActive:{color:"rgba(146,196,228,1)",border:"2px solid #92C4E4"},animatedButtonAffirmedDefault:{color:"rgba(44,225,171,1)",border:"2px solid #2CE1AB"},animatedButtonAffirmedHover:{color:"rgba(97,233,192,1)",border:"2px solid #61E9C0"},animatedButtonAffirmedActive:{color:"rgba(149,240,213,1)",border:"2px solid #95F0D5"},answerButtonInitialDefault:{color:"rgba(255,255,255,1)",border:"2px solid #AFC1C6"},answerButtonInitialHover:{color:"rgba(248,253,253,1)",border:"2px solid #4ECEDA"},answerButtonInitialActive:{color:"rgba(243,251,252,1)",border:"2px solid #12BDCD"},answerButtonSelectedDefault:{color:"rgba(248,253,253,1)",border:"2px solid #12BDCD"},answerButtonSelectedHover:{color:"rgba(243,251,252,1)",border:"2px solid #4ECEDA"},answerButtonSelectedActive:{color:"rgba(231,248,250,1)",border:"2px solid #12BDCD"},answerButtonCorrectDefault:{color:"rgba(255,255,255,1)",border:"2px solid #2CE1AB"},answerButtonSelectedCorrectDefault:{color:"rgba(233,252,246,1)",border:"2px solid #2CE1AB"},answerButtonSelectedIncorrectDefault:{color:"rgba(253,237,239,1)",border:"2px solid #EC5164"},reviewButtonDefault:{color:"rgba(248,251,253,1)",border:"2px solid #F8FBFD"},reviewButtonActive:{color:"rgba(233,243,249,1)",border:"2px solid #E9F3F9"},reviewButtonHover:{color:"rgba(244,249,252,1)",border:"2px solid #F4F9FC"},buttonCourseNavDefault:{color:"rgba(250,251,251,1)",border:"2px solid #FAFBFB"},buttonCourseNavHover:{color:"rgba(244,249,252,1)",border:"2px solid #F4F9FC"},buttonCourseNavActive:{color:"rgba(233,243,249,1)",border:"2px solid #E9F3F9"},imageMapButtonInitialDefault:{color:" rgba(255,255,255,0.30)",border:"2px solid rgba(255,255,255,0.50)",boxShadow:"0 2px 4px 0 rgba(36,57,71,0.20)"},imageMapButtonInitialHover:{color:" rgba(255,255,255,0.30)",border:"2px solid #4ECEDA",boxShadow:"0 2px 4px 0 rgba(33,51,63,0.30)"},imageMapButtonInitialActive:{color:" rgba(255,255,255,0.60)",border:"2px solid #12BDCD",boxShadow:"0 2px 4px 0 rgba(36,57,71,0.20)"},imageMapButtonSelectedDefault:{color:" rgba(255,255,255,0.60)",border:"2px solid #12BDCD",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},imageMapButtonSelectedHover:{color:" rgba(243,250,252,0.60)",border:"2px solid #4ECEDA",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},imageMapButtonSelectedActive:{color:" rgba(231,245,250,0.60)",border:"2px solid #12BDCD",boxShadow:"0 4px 4px 0 rgba(36,57,71,0.70)"},imageMapButtonCorrectDefault:{color:" rgba(255,255,255,0.30)",border:"2px solid #2CE1AB",boxShadow:"0 2px 4px 0 rgba(36,57,71,0.20)"},imageMapButtonSelectedCorrectDefault:{color:" rgba(44,225,171,0.30)",border:"2px solid #2CE1AB",boxShadow:"0 4px 4px 0 rgba(33,51,63,0.70)"},imageMapButtonSelectedIncorrectDefault:{color:" rgba(236,81,100,0.30)",border:"2px solid #EC5164",boxShadow:"0 4px 4px 0 rgba(33,51,63,0.70)"},brandGradientBGFlatDefault:{color:"linear-gradient(135deg, #12A1CD 0%, #12CDAE 100%)"},brandGradientBGFlotingDefault:{color:"linear-gradient(135deg, #12A1CD 0%, #12CDAE 100%)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGFlatDefault:{color:"rgba(255,255,255,1)"},cardBGRestingDefault:{color:"rgba(250,251,251,1)",boxShadow:"0 0 1px 0 rgba(33,51,63,0.30)"},cardBGHoveringDefault:{color:"rgba(250,251,251,1)",boxShadow:"0 1px 3px 0 rgba(33,51,63,0.15)"},cardBGHoveringHover:{color:"rgba(241,245,245,1)",boxShadow:"0 1px 3px 0 rgba(33,51,63,0.15)"},cardBGHoveringActive:{color:"rgba(241,245,245,1)",boxShadow:"0 1px 3px 0 rgba(33,51,63,0.15)"},cardBGFloatingDefault:{color:"rgba(250,251,251,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGFloatingHover:{color:"rgba(241,245,245,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},cardBGFloatingActive:{color:"rgba(241,245,245,1)",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},paginationCurrentDefault:{color:"rgba(33,51,63,1)"},paginationNonCurrentDefault:{color:"rgba(211,221,223,1)"},progressCompleteDefault:{color:"rgba(44,225,171,1)"},progressCurrentDefault:{color:"rgba(18,189,205,1)"},progressUpcomingDefault:{color:"rgba(211,221,223,1)"},dividerDefault:{color:"rgba(232,238,239,1)"},dividerCorrectDefault:{color:"rgba(97,233,192,1)"},dividerIncorrectDefault:{color:"rgba(241,125,139,1)"},dividerDropdownMenuDefault:{color:"rgba(78,185,218,1)"},menuBGDefault:{color:"rgba(255,255,255,1)"},menuBGHover:{color:" rgba(232,238,239,0.50)"},menuBGActive:{color:"rgba(232,238,239,1)"},dropdownMenuBGDefault:{color:"rgba(18,161,205,1)"},dropdownMenuBGHover:{color:"rgba(78,185,218,1)"},dropdownMenuBGActive:{color:"rgba(136,208,230,1)"},chapterItemDefault:{color:"rgba(255,255,255,1)",border:"2px solid #FFFFFF"},chapterItemActive:{color:"rgba(244,249,252,1)",border:"2px solid #F4F9FC"},chapterItemHover:{color:"rgba(248,251,253,1)",border:"2px solid #F8FBFD"},errorSectionBGDefault:{color:"rgba(253,237,239,1)"},inputFieldsDefault:{color:"rgba(255,255,255,1)",border:"1px solid #AFC1C6"},inputFieldsActive:{color:"rgba(248,253,253,1)",border:"1px solid #12BDCD"},inputFieldsHover:{color:"rgba(255,255,255,1)",border:"1px solid #43646F"},inputFieldsError:{color:"rgba(255,244,248,1)",border:"1px solid #EC5164"},inputFieldsLocked:{color:"rgba(241,245,245,1)",border:"1px solid #AFC1C6"},fillBlankDefault:{color:"rgba(255,255,255,1)",border:"2px solid #D3DDDF"},fillBlankActive:{color:"rgba(243,251,252,1)",border:"2px solid #12BDCD"},fillBlankHover:{color:"rgba(248,253,253,1)",border:"2px solid #4ECEDA"},fillBlankCorrect:{color:"rgba(233,252,246,1)",border:"2px solid #E9FCF6"},sliderButtonDefault:{color:"rgba(250,251,251,1)",border:"2px solid #D3DDDF",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},sliderButtonHover:{color:"rgba(241,245,245,1)",border:"2px solid #D3DDDF",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},sliderButtonActive:{color:"rgba(232,238,239,1)",border:"2px solid #D3DDDF",boxShadow:"0 6px 10px 0 rgba(33,51,63,0.15)"},sliderBarDefault:{color:"rgba(211,221,223,1)"},sliderBarFilledDefault:{color:"rgba(33,51,63,1)"},buttonLabelCReverseDefault:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseHover:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseActive:{color:"rgba(255,255,255,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"},buttonLabelCReverseDisabled:{color:"rgba(211,221,223,1)",fontSize:"13px",lineHeight:"13px",fontFamily:"Nunito Sans",fontWeight:"900",textAlign:"center"}}}},getStyleName=(t,e)=>{let n=e?.reduce((s,i)=>i?s+i:s,"");return n||(n="Default"),t+n},getStyles$1=(t,e="ace",n="light",s=[],i="background")=>{const a=getStyleName(t,s);let o=e;styles$1[e.toLowerCase()]||(o="ace");let l;switch(n.toLowerCase()){case"ace-light":l="light";break;case"ace-dark":l="dark";break;default:l="light"}const u={...styles$1[o.toLowerCase()][l.toLowerCase()][a]};return i==="background"&&(a.includes("radient")?u.background=u.color:u.backgroundColor=u.color,delete u.color),u},getGlobalColor=(t,e="ace",n="light")=>getStyles$1(t,e,n,["Default"],"color"),Modal=({children:t,fullscreen:e=!1,hideCloseIcon:n=!1,onDismiss:s,primaryButton:i,secondaryButton:a,subtitle:o,title:l,mountState:u=""})=>{const c=reactExports.useCallback(d=>{if(d.key==="Escape"&&s(),d.key==="ArrowRight"||d.key==="ArrowLeft")return null},[]);return reactExports.useEffect(()=>{const d=document;return d.addEventListener("keydown",c),()=>{d&&d.removeEventListener("keydown",c)}},[c]),jsxRuntimeExports.jsx("div",{className:`grit modal-overlay ${u}`,children:jsxRuntimeExports.jsxs("section",{"data-test":"modal",className:`modal${e?" fullscreen":""}`,children:[n?null:jsxRuntimeExports.jsx("div",{className:"icon-row",children:jsxRuntimeExports.jsx(Button$2,{iconButton:!0,variant:"text",color:"secondary",iconLeft:"close",onClick:()=>s(),"data-test":"closeModalOverlay"})}),jsxRuntimeExports.jsxs("div",{className:"content-wrapper",children:[jsxRuntimeExports.jsxs("header",{children:[l?jsxRuntimeExports.jsx("h2",{"data-test":"modalTitle",className:"headings__h2",children:l}):null,o?jsxRuntimeExports.jsx("p",{"data-test":"modalText",className:"paragraph__condensed",children:o}):null]}),jsxRuntimeExports.jsx("main",{children:t}),i||a?jsxRuntimeExports.jsxs("footer",{className:"modal-footer",children:[i?jsxRuntimeExports.jsx(Button$2,{onClick:()=>i.callback(),"data-test":"modalPrimaryButton",children:i.text}):null,a?jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"modalSecondaryButton",onClick:()=>a.callback(),children:a.text}):null]}):null]})]})})},ErrorModal=({title:t,message:e,extraInfoLabel:n,extraInfo:s,confirmText:i,onConfirm:a,dismissText:o,onDismiss:l})=>jsxRuntimeExports.jsxs("div",{className:"gritSharedModal errorModalContent",children:[t?jsxRuntimeExports.jsx("h2",{className:"headings__h2 error mb3","data-test":"errorTitle",children:t}):null,e?jsxRuntimeExports.jsx("div",{className:"gritSharedModal bodyText paragraph__regular",children:e}):null,n?jsxRuntimeExports.jsx("div",{className:"gritSharedModal extraInfoLabel",children:n}):null,s?jsxRuntimeExports.jsx("div",{className:"gritSharedModal infoBox paragraph__regular",children:s}):null,jsxRuntimeExports.jsxs("div",{className:"buttonWrap",children:[jsxRuntimeExports.jsx(Button$2,{"data-test":"confirmModalButton",onClick:a,children:i??"Ok"}),o?jsxRuntimeExports.jsx(Button$2,{"data-test":"dismissModalButton",onClick:l,variant:"text",children:o}):null]})]}),BodyMessage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Common Mistakes:"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Forgetting to include a house number with your street name"}),jsxRuntimeExports.jsx("li",{children:"Filling the apartment number field with n/a, none, etc."})]})]}),FormattedAddress=({address:t})=>jsxRuntimeExports.jsxs("p",{children:[t.addressStreet,jsxRuntimeExports.jsx("br",{}),t.addressApt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[t.addressApt," ",jsxRuntimeExports.jsx("br",{})]}):null,t.addressCity,", ",t.addressState,"",t.addressPostal]}),AddressVerificationModal=({address:t,title:e,dismissText:n,onConfirm:s,onDismiss:i})=>jsxRuntimeExports.jsx(ErrorModal,{title:e,dismissText:n,body:jsxRuntimeExports.jsx(BodyMessage,{}),extraInfo:jsxRuntimeExports.jsx(FormattedAddress,{address:t,onConfirm:s}),onConfirm:s,onDismiss:i}),LoadingSpinner$1=({isLoading:t,centered:e})=>useSelector(selectUiIsLoading)||t?jsxRuntimeExports.jsx("div",{className:classNames({gritLoadingSpinner:!0,"gritLoadingSpinner--centered":e}),children:jsxRuntimeExports.jsx("svg",{className:"circular-loader",viewBox:"25 25 50 50",children:jsxRuntimeExports.jsx("circle",{className:"loader-path","data-test":"spinner",cx:"50",cy:"50",r:"20",fill:"none",stroke:"#12A1CD",strokeWidth:"6"})})}):null,AdModal=({onDismiss:t,data:e})=>{const n=useDispatch(),{linkList:s}=e,i=e.content?.description,a=e.content?.title,o=e.asset?.logo,{embedId:l}=e.params,u=(c,d)=>{c.preventDefault(),n(genericAnalyticsAndIterableEvent("Offer Link Clicked",{offer:l})),n({type:OPEN_LINK,payload:{linkObj:{key:d.key,link:d.link,type:d.type}}}),t()};return reactExports.useEffect(()=>{n(genericAnalyticsAndIterableEvent("Component Shown",{to:"offer.view",additional_info:l})),n(genericAnalyticsAndIterableEvent("Offer Link Shown",{offer:l}))},[]),jsxRuntimeExports.jsx(Modal,{onDismiss:t,fullscreen:!0,children:e?jsxRuntimeExports.jsxs("div",{className:"gritAdModal__container",children:[jsxRuntimeExports.jsx("figure",{"data-test":"modalIcon",className:"ace-ad__icon mb3 md-mb5",children:jsxRuntimeExports.jsx("img",{alt:"",className:"offer-icon",src:o??"https://d1u7daj727sadp.cloudfront.net/webassets/offer-icon.svg"})}),jsxRuntimeExports.jsxs("div",{className:"gritAdModal__textWrap",children:[jsxRuntimeExports.jsx("h1",{"data-test":"modalTitle",className:"gritAdModal__heading headings__h1",children:a}),jsxRuntimeExports.jsx("p",{"data-test":"modalText",className:"gritAdModal__message paragraph__regular",children:i})]}),jsxRuntimeExports.jsxs("div",{className:"gritAdModal__buttonWrap",children:[s?.map(c=>jsxRuntimeExports.jsx(Button$2,{"data-test":"modalPrimaryButton",onClick:d=>{u(d,c)},children:c.title??"Confirm"},c.key)),jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"modalSecondaryButton",onClick:()=>{t()},children:"No thanks"})]})]}):jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0})})},AdModalPartial=({data:t,onDismiss:e})=>{const n=useDispatch(),s=t.content?.title,i=t.content?.description,{linkList:a}=t,{embedId:o}=t.params,l=(u,c)=>{u.preventDefault(),n(genericAnalyticsAndIterableEvent("Offer Link Clicked",{offer:o})),n({type:OPEN_LINK,payload:{linkObj:{key:c.key,link:c.link,type:c.type}}}),e()};return reactExports.useEffect(()=>{n(genericAnalyticsAndIterableEvent("Component Shown",{to:"offer.view",additional_info:o})),n(genericAnalyticsAndIterableEvent("Offer Link Shown",{offer:o}))},[]),jsxRuntimeExports.jsx(Modal,{onDismiss:e,fullscreen:!0,children:t?jsxRuntimeExports.jsx("div",{className:"gritAdPartialModal",role:"document",children:jsxRuntimeExports.jsx("aside",{className:"ace-ad template--mannello-2017-10",children:jsxRuntimeExports.jsx("section",{"data-test":"partialAd",className:"ace-ad__bloop on-dark row p--c mb4 shadow--hover",children:jsxRuntimeExports.jsxs("div",{className:"ace-ad__contents m--lc col-sm",children:[jsxRuntimeExports.jsx("h1",{"data-test":"partialAdTitle",className:"mb3",children:s}),jsxRuntimeExports.jsx("p",{className:"mb3",children:i}),jsxRuntimeExports.jsx("div",{children:a?.map((u,c)=>jsxRuntimeExports.jsx("a",{onClick:d=>{l(d,u)},onKeyDown:d=>{l(d,u)},role:"link",tabIndex:c,className:"ace-btn ace-btn--link","data-test":"partialAdButton",children:`${u.title} `},c))})]})})})}):jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0})})},CertificateModel={name:"certificate",async getList(t){return call("progress-certificate","GET",{progressId:t}).then(e=>e)},async getSignedUrl(t){return call(`progress-certificate/${t}/signed-url`,"GET").then(e=>e)}},RecordListItem=({cert:t,handleOpenCertificate:e,handleOpenTracking:n})=>{const{trackingLink:s,_id:i,isUrlPdfAvailable:a}=t.progress;return jsxRuntimeExports.jsxs("div",{className:`grit record-list-item ${t.progress.statusType}`,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"lists-menus__large-list-title","data-test":"certificatesTitle",children:t.content.title}),jsxRuntimeExports.jsx("span",{className:"lists-menus__list-description","data-test":"certificatesDescription",dangerouslySetInnerHTML:{__html:t.progress.description}})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{className:"icon"})})]}),jsxRuntimeExports.jsxs("div",{children:[a&&jsxRuntimeExports.jsx(Button$2,{"data-test":"certificateButton",variant:"text",onClick:o=>{o.preventDefault(),e(i)},children:"View Certificate"}),s&&jsxRuntimeExports.jsx(Button$2,{variant:"text",onClick:o=>{o.preventDefault(),n(s.link)},children:s.title})]})]})},CertificateListModal=({brand:t,onDismiss:e})=>{const n=useSelector(selectprogressId),s=useDispatch(),[i,a]=reactExports.useState([]),[o,l]=reactExports.useState(!0),[u,c]=reactExports.useState(!1);reactExports.useEffect(()=>{let m=!1;return n&&call("progress-certificate","GET",{_id:n}).then(g=>{m||a(g)}).catch(()=>{m||c(!0)}).finally(()=>{m||l(!1)}),()=>{m=!0}},[n]);const d=m=>{openWindow({url:m})},p=m=>{const g=t==="AARP";let E=null;g||(E=getContextWindow$1()),CertificateModel.getSignedUrl(m).then(x=>{g?x.driversLicense?s({type:SHOW_MODAL,payload:{modal:{type:"dlNumberVerification",submitCallback:()=>{openWindow({url:x.signedUrl})},data:{driversLicense:x.driversLicense}}}}):s({type:SHOW_MODAL,payload:{modal:{type:"error",title:"Error",message:"We apologize, but your are unable to verify your certificate, please contact support."}}}):openWindow({url:x.signedUrl,windowContext:E})}).catch(()=>{E?.close(),s({type:SHOW_MODAL,payload:{modal:{type:"error",title:"Error",message:"We apologize, but your certificate is currently unavailable. Please check back later."}}})})};return o?jsxRuntimeExports.jsx(Modal,{onDismiss:e,fullscreen:!0,children:jsxRuntimeExports.jsx("div",{className:"certificate-list-modal",children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}),";"]})})}):jsxRuntimeExports.jsx(Modal,{onDismiss:e,fullscreen:!0,children:jsxRuntimeExports.jsx("div",{className:"certificate-list-modal",children:jsxRuntimeExports.jsx("div",{className:"content",children:i.length>0&&!u?jsxRuntimeExports.jsx("ul",{"data-test":"multiCertModal",children:i.map(m=>jsxRuntimeExports.jsx("li",{"data-test":"certificateItem",children:jsxRuntimeExports.jsx(RecordListItem,{cert:m,handleOpenCertificate:p,handleOpenTracking:d})},m._id))}):jsxRuntimeExports.jsx(Alert,{variant:"information",title:"",description:"We apologize, but your records are currently unavailable. Please check back later."})})})})},ChecklistContent=({step:t})=>{const e=useDispatch(),n=t.htmlContent??t.fragmentList?.[0]?.content??"",s=!t.htmlContent&&t.linkList?.[0]?.hasOwnProperty("isDashboard"),i=a=>{e(genericAnalyticsAndIterableEvent("Checklist Step Link Clicked",{from:"overlay",stepId:t._id,stepTitle:t.title,linkType:a.type,linkKey:a.key,url:a.link})),e({type:OPEN_LINK,payload:{linkObj:a}})};return jsxRuntimeExports.jsxs("div",{className:"checklist-content",children:[t.linkList?.length&&!s?jsxRuntimeExports.jsxs("div",{className:"grit checklist-resources",children:[jsxRuntimeExports.jsx("span",{className:"metadata__regular",children:"Resources"}),t.info?jsxRuntimeExports.jsx("legend",{children:t.info}):null,t.linkList.map(a=>jsxRuntimeExports.jsx(Button$2,{onClick:()=>{i(a)},variant:"text",linkButton:!0,className:"metadata__regular",children:a.title},a._id))]}):null,n?jsxRuntimeExports.jsx("div",{className:"checklist-content__html-wrapper",children:jsxRuntimeExports.jsx("div",{className:"ace-content",children:jsxRuntimeExports.jsx("div",{className:"ace-content--mark-up",children:jsxRuntimeExports.jsx("div",{className:"content__markup-new",children:jsxRuntimeExports.jsx("div",{className:"journey__markup",dangerouslySetInnerHTML:{__html:n}})})})})}):null]})},ChecklistItem=({hideButton:t,hideChecklistExcerpt:e,onClickCheckbox:n,onClickButton:s,step:i})=>{const{excerptText:a,isComplete:o,moreInfoButtonLabel:l,shareUrl:u,title:c}=i??{},p=!!(i?.htmlContent??i?.fragmentList?.[0]?.content??"")&&!t;return jsxRuntimeExports.jsxs("div",{className:"grit checklist-item",children:[jsxRuntimeExports.jsx(ToggleButton,{active:o,variant:"checkbox",onClick:n}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:`lists-menus__large-list-title${o?"--checked":""}`,"data-test":"checklistItem",children:c}),u?jsxRuntimeExports.jsx(IconButton,{iconName:"share",iconSize:"x-small",color:"secondary",onClick:()=>window.open(u)}):jsxRuntimeExports.jsx("div",{style:{width:44,height:44}})]}),a&&!e?jsxRuntimeExports.jsx("p",{className:"lists-menus__list-description",children:a}):null,p?jsxRuntimeExports.jsx(Button$2,{"data-test":"checklistMoreInfo",onClick:s,variant:"text",iconRight:"arrow-forward",children:l??"More info"}):jsxRuntimeExports.jsx("div",{style:{height:a?16:0}})]})]})},toggleStep=t=>{const e=parseInt(t._id.replace(/[^0-9.]/g,""),10)-1;e==null?console.error(`Tracking: Step number is not a number toggleStep() ${t._id}`):store.dispatch({type:TOGGLE_LICENSE_CHECKLIST_STEP,payload:{from:"overlay",stepId:t._id,isComplete:!t.isComplete,stepName:t.title,stepNumber:e}})},ChecklistStepModal=({step:t,onDismiss:e})=>{const[n,s]=reactExports.useState({...t,excerptText:""});return jsxRuntimeExports.jsx(Modal,{fullscreen:!0,onDismiss:e,children:jsxRuntimeExports.jsxs("div",{className:"checklist-step-modal",children:[jsxRuntimeExports.jsx("div",{className:"checklist-header-wrapper",children:jsxRuntimeExports.jsx(ChecklistItem,{hideButton:!0,onClickCheckbox:()=>{toggleStep(n),s({...n,isComplete:!n.isComplete})},step:n})}),jsxRuntimeExports.jsx(ChecklistContent,{step:n})]})})},CourseSurvey=({embedId:t,linkUrl:e,onDismiss:n})=>{const s=t||"embed",i=document.getElementById(s),a=document.createElement("script"),o=!0;return reactExports.useEffect(()=>{a.type="text/javascript",a.async=!0,a.id="smcx-sdk",a.src=e,i?.parentNode?.replaceChild(a,i)}),jsxRuntimeExports.jsxs(Modal,{onDismiss:n,fullscreen:o,hideCloseIcon:!1,children:[jsxRuntimeExports.jsxs("section",{className:"content-block center mb2",children:[jsxRuntimeExports.jsx("h1",{children:"Course Survey"}),jsxRuntimeExports.jsx("p",{children:"Let us know how we did!"})]}),jsxRuntimeExports.jsx("section",{"data-test":"surveyContainer",className:"survey",children:jsxRuntimeExports.jsx("div",{id:s,children:jsxRuntimeExports.jsx("a",{className:"ace-btn ace-btn--primary ace-btn--wide",children:"Let "})})})]})};var reactTextMask$1={exports:{}},reactTextMask=reactTextMask$1.exports,hasRequiredReactTextMask;function requireReactTextMask(){return hasRequiredReactTextMask||(hasRequiredReactTextMask=1,function(t,e){(function(n,s){t.exports=s(requireReact())})(reactTextMask,function(n){return function(s){function i(o){if(a[o])return a[o].exports;var l=a[o]={exports:{},id:o,loaded:!1};return s[o].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var a={};return i.m=s,i.c=a,i.p="",i(0)}([function(s,i,a){function o(P){return P&&P.__esModule?P:{default:P}}function l(P,O){var B={};for(var F in P)O.indexOf(F)>=0||Object.prototype.hasOwnProperty.call(P,F)&&(B[F]=P[F]);return B}function u(P,O){if(!(P instanceof O))throw new TypeError("Cannot call a class as a function")}function c(P,O){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?P:O}function d(P,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);P.prototype=Object.create(O&&O.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(P,O):P.__proto__=O)}Object.defineProperty(i,"__esModule",{value:!0}),i.conformToMask=void 0;var p=Object.assign||function(P){for(var O=1;O<arguments.length;O++){var B=arguments[O];for(var F in B)Object.prototype.hasOwnProperty.call(B,F)&&(P[F]=B[F])}return P},m=function(){function P(O,B){for(var F=0;F<B.length;F++){var H=B[F];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(O,H.key,H)}}return function(O,B,F){return B&&P(O.prototype,B),F&&P(O,F),O}}(),g=a(3);Object.defineProperty(i,"conformToMask",{enumerable:!0,get:function(){return o(g).default}});var E=a(11),x=o(E),b=a(9),S=o(b),C=a(5),T=o(C),I=a(2),D=function(P){function O(){var B;u(this,O);for(var F=arguments.length,H=Array(F),Q=0;Q<F;Q++)H[Q]=arguments[Q];var Z=c(this,(B=O.__proto__||Object.getPrototypeOf(O)).call.apply(B,[this].concat(H)));return Z.setRef=Z.setRef.bind(Z),Z.onBlur=Z.onBlur.bind(Z),Z.onChange=Z.onChange.bind(Z),Z}return d(O,P),m(O,[{key:"setRef",value:function(B){this.inputElement=B}},{key:"initTextMask",value:function(){var B=this.props,F=this.props.value;this.textMaskInputElement=(0,T.default)(p({inputElement:this.inputElement},B)),this.textMaskInputElement.update(F)}},{key:"componentDidMount",value:function(){this.initTextMask()}},{key:"componentDidUpdate",value:function(B){var F=this.props,H=F.value,Q=F.pipe,Z=F.mask,ne=F.guide,re=F.placeholderChar,se=F.showMask,G={guide:ne,placeholderChar:re,showMask:se},K=typeof Q=="function"&&typeof B.pipe=="function"?Q.toString()!==B.pipe.toString():(0,I.isNil)(Q)&&!(0,I.isNil)(B.pipe)||!(0,I.isNil)(Q)&&(0,I.isNil)(B.pipe),M=Z.toString()!==B.mask.toString(),W=Object.keys(G).some(function(z){return G[z]!==B[z]})||M||K,ee=H!==this.inputElement.value;(ee||W)&&this.initTextMask()}},{key:"render",value:function(){var F=this.props,H=F.render,Q=l(F,["render"]);return delete Q.mask,delete Q.guide,delete Q.pipe,delete Q.placeholderChar,delete Q.keepCharPositions,delete Q.value,delete Q.onBlur,delete Q.onChange,delete Q.showMask,H(this.setRef,p({onBlur:this.onBlur,onChange:this.onChange,defaultValue:this.props.value},Q))}},{key:"onChange",value:function(B){this.textMaskInputElement.update(),typeof this.props.onChange=="function"&&this.props.onChange(B)}},{key:"onBlur",value:function(B){typeof this.props.onBlur=="function"&&this.props.onBlur(B)}}]),O}(x.default.PureComponent);i.default=D,D.propTypes={mask:S.default.oneOfType([S.default.array,S.default.func,S.default.bool,S.default.shape({mask:S.default.oneOfType([S.default.array,S.default.func]),pipe:S.default.func})]).isRequired,guide:S.default.bool,value:S.default.oneOfType([S.default.string,S.default.number]),pipe:S.default.func,placeholderChar:S.default.string,keepCharPositions:S.default.bool,showMask:S.default.bool},D.defaultProps={render:function(P,O){return x.default.createElement("input",p({ref:P},O))}}},function(s,i){Object.defineProperty(i,"__esModule",{value:!0}),i.placeholderChar="_",i.strFunction="function"},function(s,i,a){function o(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.placeholderChar;if(!l(x))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(x.indexOf(b)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+("The placeholder character that was received is: "+JSON.stringify(b)+`

`)+("The mask that was received is: "+JSON.stringify(x)));return x.map(function(S){return S instanceof RegExp?b:S}).join("")}function l(x){return Array.isArray&&Array.isArray(x)||x instanceof Array}function u(x){return typeof x=="string"||x instanceof String}function c(x){return typeof x=="number"&&x.length===void 0&&!isNaN(x)}function d(x){return typeof x>"u"||x===null}function p(x){for(var b=[],S=void 0;S=x.indexOf(E),S!==-1;)b.push(S),x.splice(S,1);return{maskWithoutCaretTraps:x,indexes:b}}Object.defineProperty(i,"__esModule",{value:!0}),i.convertMaskToPlaceholder=o,i.isArray=l,i.isString=u,i.isNumber=c,i.isNil=d,i.processCaretTraps=p;var m=a(1),g=[],E="[]"},function(s,i,a){function o(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,u.isArray)(g)){if((typeof g>"u"?"undefined":l(g))!==c.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");g=g(m,E),g=(0,u.processCaretTraps)(g).maskWithoutCaretTraps}var x=E.guide,b=x===void 0||x,S=E.previousConformedValue,C=S===void 0?p:S,T=E.placeholderChar,I=T===void 0?c.placeholderChar:T,D=E.placeholder,P=D===void 0?(0,u.convertMaskToPlaceholder)(g,I):D,O=E.currentCaretPosition,B=E.keepCharPositions,F=b===!1&&C!==void 0,H=m.length,Q=C.length,Z=P.length,ne=g.length,re=H-Q,se=re>0,G=O+(se?-re:0),K=G+Math.abs(re);if(B===!0&&!se){for(var M=p,W=G;W<K;W++)P[W]===I&&(M+=I);m=m.slice(0,G)+M+m.slice(G,H)}for(var ee=m.split(p).map(function(nt,ft){return{char:nt,isNew:ft>=G&&ft<K}}),z=H-1;z>=0;z--){var ae=ee[z].char;if(ae!==I){var ce=z>=G&&Q===ne;ae===P[ce?z-re:z]&&ee.splice(z,1)}}var he=p,fe=!1;e:for(var Ce=0;Ce<Z;Ce++){var Me=P[Ce];if(Me===I){if(ee.length>0)for(;ee.length>0;){var Ye=ee.shift(),We=Ye.char,Be=Ye.isNew;if(We===I&&F!==!0){he+=I;continue e}if(g[Ce].test(We)){if(B===!0&&Be!==!1&&C!==p&&b!==!1&&se){for(var rt=ee.length,tt=null,Ue=0;Ue<rt;Ue++){var Pe=ee[Ue];if(Pe.char!==I&&Pe.isNew===!1)break;if(Pe.char===I){tt=Ue;break}}tt!==null?(he+=We,ee.splice(tt,1)):Ce--}else he+=We;continue e}fe=!0}F===!1&&(he+=P.substr(Ce,Z));break}he+=Me}if(F&&se===!1){for(var Qe=null,Je=0;Je<he.length;Je++)P[Je]===I&&(Qe=Je);he=Qe!==null?he.substr(0,Qe+1):p}return{conformedValue:he,meta:{someCharsRejected:fe}}}Object.defineProperty(i,"__esModule",{value:!0});var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};i.default=o;var u=a(2),c=a(1),d=[],p=""},function(s,i){function a(u){var c=u.previousConformedValue,d=c===void 0?l:c,p=u.previousPlaceholder,m=p===void 0?l:p,g=u.currentCaretPosition,E=g===void 0?0:g,x=u.conformedValue,b=u.rawValue,S=u.placeholderChar,C=u.placeholder,T=u.indexesOfPipedChars,I=T===void 0?o:T,D=u.caretTrapIndexes,P=D===void 0?o:D;if(E===0||!b.length)return 0;var O=b.length,B=d.length,F=C.length,H=x.length,Q=O-B,Z=Q>0,ne=B===0,re=Q>1&&!Z&&!ne;if(re)return E;var se=Z&&(d===x||x===C),G=0,K=void 0,M=void 0;if(se)G=E-Q;else{var W=x.toLowerCase(),ee=b.toLowerCase(),z=ee.substr(0,E).split(l),ae=z.filter(function(At){return W.indexOf(At)!==-1});M=ae[ae.length-1];var ce=m.substr(0,ae.length).split(l).filter(function(At){return At!==S}).length,he=C.substr(0,ae.length).split(l).filter(function(At){return At!==S}).length,fe=he!==ce,Ce=m[ae.length-1]!==void 0&&C[ae.length-2]!==void 0&&m[ae.length-1]!==S&&m[ae.length-1]!==C[ae.length-1]&&m[ae.length-1]===C[ae.length-2];!Z&&(fe||Ce)&&ce>0&&C.indexOf(M)>-1&&b[E]!==void 0&&(K=!0,M=b[E]);for(var Me=I.map(function(At){return W[At]}),Ye=Me.filter(function(At){return At===M}).length,We=ae.filter(function(At){return At===M}).length,Be=C.substr(0,C.indexOf(S)).split(l).filter(function(At,ot){return At===M&&b[ot]!==At}).length,rt=Be+We+Ye+(K?1:0),tt=0,Ue=0;Ue<H;Ue++){var Pe=W[Ue];if(G=Ue+1,Pe===M&&tt++,tt>=rt)break}}if(Z){for(var Qe=G,Je=G;Je<=F;Je++)if(C[Je]===S&&(Qe=Je),C[Je]===S||P.indexOf(Je)!==-1||Je===F)return Qe}else if(K){for(var nt=G-1;nt>=0;nt--)if(x[nt]===M||P.indexOf(nt)!==-1||nt===0)return nt}else for(var ft=G;ft>=0;ft--)if(C[ft-1]===S||P.indexOf(ft)!==-1||ft===0)return ft}Object.defineProperty(i,"__esModule",{value:!0}),i.default=a;var o=[],l=""},function(s,i,a){function o(O){return O&&O.__esModule?O:{default:O}}function l(O){var B={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:B,update:function(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O,Q=H.inputElement,Z=H.mask,ne=H.guide,re=H.pipe,se=H.placeholderChar,G=se===void 0?S.placeholderChar:se,K=H.keepCharPositions,M=K!==void 0&&K,W=H.showMask,ee=W!==void 0&&W;if(typeof F>"u"&&(F=Q.value),F!==B.previousConformedValue){(typeof Z>"u"?"undefined":p(Z))===I&&Z.pipe!==void 0&&Z.mask!==void 0&&(re=Z.pipe,Z=Z.mask);var z=void 0,ae=void 0;if(Z instanceof Array&&(z=(0,b.convertMaskToPlaceholder)(Z,G)),Z!==!1){var ce=c(F),he=Q.selectionEnd,fe=B.previousConformedValue,Ce=B.previousPlaceholder,Me=void 0;if((typeof Z>"u"?"undefined":p(Z))===S.strFunction){if(ae=Z(ce,{currentCaretPosition:he,previousConformedValue:fe,placeholderChar:G}),ae===!1)return;var Ye=(0,b.processCaretTraps)(ae),We=Ye.maskWithoutCaretTraps,Be=Ye.indexes;ae=We,Me=Be,z=(0,b.convertMaskToPlaceholder)(ae,G)}else ae=Z;var rt={previousConformedValue:fe,guide:ne,placeholderChar:G,pipe:re,placeholder:z,currentCaretPosition:he,keepCharPositions:M},tt=(0,x.default)(ce,ae,rt),Ue=tt.conformedValue,Pe=(typeof re>"u"?"undefined":p(re))===S.strFunction,Qe={};Pe&&(Qe=re(Ue,d({rawValue:ce},rt)),Qe===!1?Qe={value:fe,rejected:!0}:(0,b.isString)(Qe)&&(Qe={value:Qe}));var Je=Pe?Qe.value:Ue,nt=(0,g.default)({previousConformedValue:fe,previousPlaceholder:Ce,conformedValue:Je,placeholder:z,rawValue:ce,currentCaretPosition:he,placeholderChar:G,indexesOfPipedChars:Qe.indexesOfPipedChars,caretTrapIndexes:Me}),ft=Je===z&&nt===0,At=ee?z:C,ot=ft?At:Je;B.previousConformedValue=ot,B.previousPlaceholder=z,Q.value!==ot&&(Q.value=ot,u(Q,nt))}}}}}function u(O,B){document.activeElement===O&&(D?P(function(){return O.setSelectionRange(B,B,T)},0):O.setSelectionRange(B,B,T))}function c(O){if((0,b.isString)(O))return O;if((0,b.isNumber)(O))return String(O);if(O==null)return C;throw new Error(`The 'value' provided to Text Mask needs to be a string or a number. The value received was:

 `+JSON.stringify(O))}Object.defineProperty(i,"__esModule",{value:!0});var d=Object.assign||function(O){for(var B=1;B<arguments.length;B++){var F=arguments[B];for(var H in F)Object.prototype.hasOwnProperty.call(F,H)&&(O[H]=F[H])}return O},p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O};i.default=l;var m=a(4),g=o(m),E=a(3),x=o(E),b=a(2),S=a(1),C="",T="none",I="object",D=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),P=typeof requestAnimationFrame<"u"?requestAnimationFrame:setTimeout},function(s,i){function a(l){return function(){return l}}var o=function(){};o.thatReturns=a,o.thatReturnsFalse=a(!1),o.thatReturnsTrue=a(!0),o.thatReturnsNull=a(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(l){return l},s.exports=o},function(s,i,a){function o(l,u,c,d,p,m,g,E){if(!l){var x;if(u===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[c,d,p,m,g,E],S=0;x=new Error(u.replace(/%s/g,function(){return b[S++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}}s.exports=o},function(s,i,a){var o=a(6),l=a(7),u=a(10);s.exports=function(){function c(m,g,E,x,b,S){S!==u&&l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function d(){return c}c.isRequired=c;var p={array:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:d,element:c,instanceOf:d,node:c,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d};return p.checkPropTypes=o,p.PropTypes=p,p}},function(s,i,a){s.exports=a(8)()},function(s,i){var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";s.exports=a},function(s,i){s.exports=n}])})}(reactTextMask$1)),reactTextMask$1.exports}var reactTextMaskExports=requireReactTextMask();const MaskedInput=getDefaultExportFromCjs(reactTextMaskExports),InputMask=({"data-test":t,disabled:e,id:n,name:s,onChange:i,onBlur:a,onFocus:o,pattern:l,placeholder:u,required:c,type:d,value:p,mask:m,autocomplete:g,readOnly:E})=>m&&m.length?jsxRuntimeExports.jsx(MaskedInput,{"data-test":t,disabled:e,id:n,name:s,onChange:i,onBlur:a,onFocus:o,pattern:l,placeholder:u,required:c,type:d,value:p,mask:m}):jsxRuntimeExports.jsx("input",{"data-test":t,disabled:e,id:n,name:s,onChange:i,onBlur:a,onFocus:o,pattern:l,placeholder:u,required:c,type:d,value:p,autoComplete:g,readOnly:E}),Input=({"data-test":t,disabled:e=!1,error:n=!1,helperText:s,hideLink:i=!1,id:a,label:o,link:l,name:u,onChange:c,onBlur:d,onFocus:p,optional:m=!1,pattern:g,placeholder:E,required:x=!1,success:b=!1,textarea:S=!1,type:C="text",value:T="",mask:I,rows:D=1,autocomplete:P,dynamicHeight:O=0,maxLength:B,onDrop:F,onPaste:H,readOnly:Q=!1})=>{const[Z,ne]=reactExports.useState(!1),re=!!b||!!e,se=b?"checkmark":"lock-solid",G=reactExports.useRef(null),K=()=>{ne(!Z)};return reactExports.useEffect(()=>{if(O&&G.current){const M=G.current;M.style.height="auto",M.style.height=`${M.scrollHeight<=150?M.scrollHeight:150}px`}},[T,G]),jsxRuntimeExports.jsxs("div",{className:`grit input ${n?"error":""} ${b?"success":""} ${e?"disabled":""}`,children:[o?jsxRuntimeExports.jsx("label",{className:"fields__label",htmlFor:a,children:`${o} ${m?"(optional)":""}`}):null,jsxRuntimeExports.jsxs("div",{className:"inputElementWrapper",children:[S?jsxRuntimeExports.jsx("textarea",{ref:G,"data-test":t,disabled:e,id:a,name:u,onChange:c,onBlur:d,placeholder:E,required:x,value:T,rows:D,maxLength:B,onDrop:F,onPaste:H,onFocus:p}):jsxRuntimeExports.jsx(InputMask,{"data-test":t,disabled:e,id:a,name:u,onChange:c,onBlur:d,pattern:g,placeholder:E,required:x,type:Z?"text":C,value:T,mask:I,autocomplete:P,onFocus:p,readOnly:Q}),re?jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${se}`}):null,!re&&C==="password"&&jsxRuntimeExports.jsx("button",{className:"password-toggle-button ",type:"button",onClick:K,"aria-label":"Toggle password visibility","data-test":"showPasswordBtn",children:jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${Z?"sauron-hidden":"sauron"}`})})]}),jsxRuntimeExports.jsxs("div",{className:"inputFooter",children:[jsxRuntimeExports.jsx("div",{children:s?jsxRuntimeExports.jsx("div",{"data-test":`helper-text__${n?"error":"hint"}`,className:`fields__helper-text ${n?"error":""}`,children:s}):null}),jsxRuntimeExports.jsx("div",{children:l&&!i?jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{"data-test":"whatsThis",className:"fields__field-link",onClick:l.callback,children:l.text})}):null})]})]})},ErrorMessage=({errorMessage:t})=>jsxRuntimeExports.jsxs("div",{className:"gritDialogScreen__errorMessage",children:[jsxRuntimeExports.jsx("span",{className:"icon errorIcon",style:{...getIconStyle("info","small")}}),jsxRuntimeExports.jsx("p",{"data-test":"error-message",className:"gritDialogScreen__errorText gritParagraphCondensed",children:t})]}),DialogScreenDlNumber=({isCurrent:t,dlNumber:e,onVerificationFailed:n,onConfirm:s})=>{const[a,o]=reactExports.useState(0),l=useDispatch(),u=Object.freeze({INITIAL:0,DIRTY:1,SUBMITTED_INCORRECT:2,SUBMITTED_CORRECT:3,PENALIZED:4}),c=Object.freeze({0:"zero",1:"one",2:"two",3:"three"}),[d,p]=reactExports.useState(u.INITIAL),[m,g]=reactExports.useState("");reactExports.useEffect(()=>{m.replace("_","").length===0?p(u.INITIAL):p(u.DIRTY)},[m]),reactExports.useEffect(()=>{d===u.SUBMITTED_CORRECT&&s&&s()},[d]),reactExports.useEffect(()=>{a===3&&(n&&n(),p(u.PENALIZED))},[a]);const E=x=>{if(x.preventDefault(),m.replace("_","").length===4){const b=e?.replace(/[^a-z0-9]/gi,"").toLowerCase();m.toLowerCase().trim()===b?.substring(b.length-4)?p(u.SUBMITTED_CORRECT):p(u.SUBMITTED_INCORRECT),o(a+1)}};return jsxRuntimeExports.jsx("section",{className:classNames("gritDialogScreen","gritDialogScreen--verifyDlNumber",{"gritDialogScreen--current":t}),children:d!==u.PENALIZED?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[d===u.SUBMITTED_INCORRECT?jsxRuntimeExports.jsx(ErrorMessage,{errorMessage:`That doesn't match our records. Please try again. You have ${c[3-a]} attempt${3-a!==1?"s":""} remaining.`}):null,jsxRuntimeExports.jsx("h1",{role:"alert",className:"gritDialogScreen__heading headings__h1","data-test":"dlNumberDialogTitle",children:"Verify to continue"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular","data-test":"dlNumberDialogText",children:"Before viewing or editing your profile, we need to verify your identity."}),jsxRuntimeExports.jsxs("form",{className:"gritDialogScreen__form",onSubmit:x=>{E(x)},children:[jsxRuntimeExports.jsx(Input,{label:"Last 4 of Driver License Number",onChange:x=>{g(x.target.value)},"data-test":"dlNumberInput",id:"",name:"",mask:[/[a-zA-Z0-9]/,/[a-zA-Z0-9]/,/[a-zA-Z0-9]/,/[a-zA-Z0-9]/],value:m}),jsxRuntimeExports.jsx(Button$2,{disabled:d!==u.DIRTY,"data-test":"dlNumberSubmit",type:"submit",children:"Continue"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h1",{role:"alert",className:"gritDialogScreen__heading gritHeading-1 headings__h1","data-test":"dlNumberDialogErrorTitle",children:"Verification unsuccessful"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular","data-test":"dlNumberDialogErrorText",children:"You ran out of attempts to answer the verification question correctly. In order to proceed, you will need to log back in."}),jsxRuntimeExports.jsx(Button$2,{type:"submit","data-test":"dlNumberContinue",onClick:()=>l(redirectToUrl("user.signout")),children:"Continue"})]})})},Dot=({active:t,onClick:e})=>jsxRuntimeExports.jsx("button",{onClick:e,className:"dot-button","aria-label":"Dot Pagination Button",children:jsxRuntimeExports.jsx("span",{className:`dot ${t?"active":""}`})}),DotPagination=({currentIndex:t=0,length:e,onClick:n})=>{const s=[...Array(e).keys()].map((i,a)=>jsxRuntimeExports.jsx(Dot,{onClick:()=>n(a),active:a===t},a));return jsxRuntimeExports.jsx("div",{className:"grit dot-pagination",children:jsxRuntimeExports.jsx("div",{className:"dot-wrapper",children:s})})},FullScreenDialog=({onClickBack:t,screenList:e,currentIndex:n,mountState:s,underModal:i})=>jsxRuntimeExports.jsxs("section",{className:classNames("gritFullscreenDialog",`gritFullscreenDialog--${s}`,{"gritFullscreenDialog--underModal":i}),children:[jsxRuntimeExports.jsxs("header",{className:"gritFullscreenDialog__header",children:[t?jsxRuntimeExports.jsx(Button$2,{variant:"text",iconLeft:"arrow-backward",onClick:t}):null,e&&e.length>1?jsxRuntimeExports.jsx(DotPagination,{currentIndex:n,length:e.length,onClick:()=>{}}):null]}),jsxRuntimeExports.jsx("ul",{className:"gritFullscreenDialog__screenList",children:e?e.map((a,o)=>jsxRuntimeExports.jsx("li",{className:classNames("gritFullscreenDialog__screenListItem",{"gritFullscreenDialog__screenListItem--current":o===n}),children:a},`screenListItem-${o}`)):jsxRuntimeExports.jsx("li",{className:"gritFullscreenDialog__screenListItem",children:jsxRuntimeExports.jsx("p",{children:"There are no screens to display"})})})]}),ExpirationReminder=({onDismiss:t,data:e,message:n,title:s,buttonText:i})=>{const a=useDispatch(),o=useSelector(selectDashboardState),{metadataOdyssey:l}=o,u=l?.subtitle??n,c=l?.title??s,d=l?.buttonText??i??"I understand";return jsxRuntimeExports.jsx(Modal,{subtitle:u,title:c,primaryButton:{text:d,callback:()=>{set$2("expiration",["reminder",e?.breakpoint,e?.filter].join("-"),!0),a(hideModal(0))}},onDismiss:()=>{t()}})},useOnClickOutside=(t,e)=>{reactExports.useEffect(()=>{const n=s=>{const i=t.current;!i||i.contains(s.target||null)||e(s)};return document.addEventListener("pointerdown",n),()=>{document.removeEventListener("pointerdown",n)}},[t,e])},Icon=({altText:t,badged:e,brand:n,className:s,disabled:i,handleClick:a,id:o,mood:l,size:u,style:c,theme:d,type:p,"data-test":m})=>{const[g,E,x,b,S]=useActiveHoverStates(i),C={...c,...getStyles$1(l==="default"?"regular":l,n,d,[g==="Disabled"?"Default":g],"background")},T=classNames({gritIcon:!0,"gritIcon--clickable":typeof a=="function",[`gritIcon--${u}`]:u,[`gritIcon--${p}`]:p,"gritIcon--badged":e,[s??""]:s});return jsxRuntimeExports.jsxs("div",{className:"gritIcon__wrap",children:[jsxRuntimeExports.jsx("button",{className:T,onClick:I=>{a&&a(I)},onMouseEnter:E,onMouseLeave:x,onMouseDown:b,onMouseUp:S,style:C,"data-test":m,id:o,children:t}),e&&jsxRuntimeExports.jsx("button",{className:`gritIcon__badge bgColor-earnest-${n}-${d}`,onClick:I=>{a&&a(I)},tabIndex:0,"aria-label":t??"icon badge"})]})},GenericModal=({title:t,primaryButton:e,secondaryButton:n,onDismiss:s,mountState:i,message:a,children:o,hideCloseIcon:l=!1,allowOutsideClick:u=!1,isInformationModal:c=!1,isMessageCustomHtml:d=!0,primaryButtonLeftIcon:p})=>{const m=useNavigate(),g=useDispatch(),E=reactExports.useRef(null);return useOnClickOutside(E,u?()=>{g(hideModal(0)),g({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),m("/dash/index")}:()=>{}),jsxRuntimeExports.jsx("div",{ref:E,children:jsxRuntimeExports.jsxs("section",{className:classNames("gritModal","gritModal__cardStyle","gritModal--generic",`gritModal--${i}`,{"gritModal--oneButton":e&&!n,"gritModal--twoButtons":e&&n}),id:"modal-container",role:"dialog","aria-modal":"true",children:[l?null:jsxRuntimeExports.jsx(Icon,{type:"close",size:"tiny",altText:"Close",mood:"regular",handleClick:()=>{s()},"data-test":"modalClose",className:"gritModal__closeIcon"}),jsxRuntimeExports.jsxs("div",{className:"gritModal__textWrap",children:[jsxRuntimeExports.jsx("h2",{"data-test":"modalTitle",className:"headings__h2",children:t}),d?jsxRuntimeExports.jsx("p",{"data-test":"modalText",className:"paragraph__regular",dangerouslySetInnerHTML:{__html:a}}):jsxRuntimeExports.jsx("p",{"data-test":"modalText",className:"paragraph__regular",children:a}),o]}),e||n?jsxRuntimeExports.jsxs("div",{className:"gritModal__buttonWrap",children:[e&&!c?jsxRuntimeExports.jsx(Button$2,{iconLeft:p??void 0,"data-test":"modalPrimaryButton",onClick:b=>e.callback(b),disabled:e.disabled,children:e.label||"Confirm"}):null,n?jsxRuntimeExports.jsx(Button$2,{variant:n.variant??"text",color:n.color??(n.variant==="solid"?"primary":"secondary"),"data-test":"modalSecondaryButton",onClick:b=>n.callback(b),children:n.label||"No thanks"}):null]}):null]})})},InfoConfirmationModal=({data:t,onDismiss:e,onConfirm:n})=>{const s=t.info||[],{title:i}=t.content,{subtitle:a}=t.content,{buttonText:o}=t.content,{secondaryButtonText:l}=t.content;return jsxRuntimeExports.jsx(Modal,{hideCloseIcon:!1,title:i,subtitle:a,primaryButton:{text:o||"Continue",callback:()=>{n()}},secondaryButton:t.content.hideSecondaryButton?null:{text:l||"Cancel",callback:()=>{e()}},onDismiss:e,children:s.map((u,c)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{"data-test":"infoItem",className:"paragraph__condensed-bold",children:u.field}),":"," ",jsxRuntimeExports.jsx("span",{"data-test":"infoValue",className:"paragraph__condensed",children:u.value})]},c))})},SingleCard=({currentIndex:t,currentCard:e,mountState:n,title:s,description:i,descriptionArray:a,position:o="middle",image:l,imagePosition:u="top",showPagination:c=!1,showTryItNowButtons:d=!1,tag:p="NEW",goToNextCard:m,totalCards:g,confirmCallback:E,dismissCallback:x})=>{const b=reactExports.useRef(null),S=()=>{e===g-1&&x&&x(),e===t&&m()},C=()=>{E&&E()},T=()=>{x&&x()};return useOnClickOutside(b,S),jsxRuntimeExports.jsxs("section",{ref:b,className:`grit feature-card-modal gritModal--${n} ${o} ${e===t?"show":"hide"}`,role:"dialog","aria-modal":"true","data-test":"onboardingCard",children:[u==="top"&&l?jsxRuntimeExports.jsx("div",{className:"content-image--top",children:jsxRuntimeExports.jsx("img",{className:"image--top",src:l,alt:s})}):null,jsxRuntimeExports.jsxs("div",{className:"content-wrap",children:[c?jsxRuntimeExports.jsxs("p",{className:"metadata__x-small pagination",children:[jsxRuntimeExports.jsx("span",{children:e+1}),"of",jsxRuntimeExports.jsx("span",{children:g})]}):null,jsxRuntimeExports.jsxs("h6",{className:"headings__h6 title",children:[jsxRuntimeExports.jsx("span",{className:"new",children:p})," ",jsxRuntimeExports.jsx("span",{"data-test":"onboardingTitle",children:s})]}),a?a.map((I,D)=>jsxRuntimeExports.jsx("p",{className:"paragraph__condensed description",children:I},D)):jsxRuntimeExports.jsx("p",{className:"paragraph__condensed description",children:i}),d?jsxRuntimeExports.jsxs("div",{className:"button-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{"data-test":"onboardingTry",variant:"text",linkButton:!0,onClick:C,children:"Try it Now"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"onboardingDismiss",variant:"text",color:"secondary",linkButton:!0,onClick:T,children:"Maybe Later"})]}):jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Button$2,{"data-test":"newFeatureGotIt",variant:"text",linkButton:!0,onClick:S,children:"Got it"})})]}),u==="bottom"&&l?jsxRuntimeExports.jsx("div",{className:"content-image--bottom",children:jsxRuntimeExports.jsx("img",{className:"image--bottom",src:l,alt:s})}):null]})},NewFeatureCard=({cardData:t,mountState:e,onDismiss:n,submitFinalCallBack:s,submitCallback:i,secondaryCallback:a})=>{const[o,l]=reactExports.useState(0),u=()=>{if(o===t.length-1){if(s){s();return}n()}l(c=>c+1)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t.map((c,d)=>jsxRuntimeExports.jsx(SingleCard,{mountState:e,position:c.position,title:c.title,currentCard:o,currentIndex:d,description:c.description,descriptionArray:c.descriptionArray,image:c.image,imagePosition:c.imagePosition,showPagination:c.showPagination,showTryItNowButtons:c.showTryItNowButtons,goToNextCard:u,totalCards:t.length,tag:c.tag,confirmCallback:i??void 0,dismissCallback:a??void 0},c.title))})},ReviewObj={...ModelAbstract,name:"review",async log(t,e,n,s,i,a){return call("review/","POST",{progressId:t,type:e,rating:n,breakpoint:s,filter:i,content:a})}},getDisplayName=t=>(t.preferredName??t.nickname??t.firstName??t.lastName??t.accountType).replace(/\w\S*/g,n=>n.charAt(0).toUpperCase()+(n.substring(1)?.toLowerCase()??"")),NPSDialog=({mountState:t,onDismiss:e})=>{const s="nps",a=[1,2,3,4,5,6,7,8,9,10],{dispatch:o}=store,{user:l,progress:u,course:c}=store.getState(),d=CourseObj.getCurrent(),p=d?.key||c.key,m=d?.brandId||c.brandId;let g,E;const x=c.actionList?.find(re=>re.action==="review.viewNps");x&&({breakpoint:g,filter:E}=x);const[b,S]=reactExports.useState(0),[C,T]=reactExports.useState(!0),[I,D]=reactExports.useState(null),[P,O]=reactExports.useState(""),B=!b;reactExports.useEffect(()=>{o(genericAnalyticsAndIterableEvent("Component Shown",{to:"review.viewNps"}))},[]);const F=(re,se)=>{set$2("review",[s,g,E].join("-"),b),o(npsReviewCompleted({type:s,breakpoint:g,filter:E,score:b,from:I,by:re,contact:se}))},H=()=>{b&&(D(b>=8?"review.happy":"review.unhappy"),ReviewObj.log(u._id,s.toUpperCase(),b,g,E),O(`https://aceable-design.typeform.com/to/eF66oDkN#userid=${l._id}&brand=${m}&coursekey=${p}&score=${b}`),T(!1))},Q=()=>{F("review"),e()},Z=C?{disabled:B,callback:H,"data-test":"submitRatingButton",title:"Google Review",label:"Submit!"}:{"data-test":"tellUsMoreYes",title:"feedback accepted",callback:()=>{window.open(P,"_blank")?.focus(),Q()},label:"Yes!"},ne=C?null:{"data-test":"tellUsMoreNo",title:"feedback declined",callback:Q,label:"No thanks"};return jsxRuntimeExports.jsx(GenericModal,{message:C?"On a scale from 1-10, how likely would you be to recommend us to a friend?":"",mountState:t,onDismiss:e,primaryButton:Z,secondaryButton:ne,title:C?`Hey, ${getDisplayName(l)}!`:"Can you tell us more?",children:C?jsxRuntimeExports.jsx("div",{className:"nps-dialog",children:jsxRuntimeExports.jsxs("form",{autoComplete:"off",name:"npsReviewForm",className:"nps-form",children:[jsxRuntimeExports.jsx("div",{"data-test":"ratingBar",className:"nps-labels xrow flex",children:a.map(re=>jsxRuntimeExports.jsx("label",{"data-test":"ratingScore",className:classNames("nps-label col-nps mb2",{active:re===b}),onClick:se=>{se.preventDefault(),S(re)},role:"presentation",children:jsxRuntimeExports.jsx("button",{className:classNames("ace-btn ace-btn--small ace-btn--nps",{"ace-btn--secondary":re!==b,"ace-btn--rounded":re===b}),"aria-label":`Rating ${re}`,children:re})},re))}),jsxRuntimeExports.jsxs("div",{className:"nps-labels-footer",children:[jsxRuntimeExports.jsxs("label",{className:"nps-label-footer unlikely",children:[" ",jsxRuntimeExports.jsx("span",{children:"1 - "}),"Not likely at all"," "]}),jsxRuntimeExports.jsxs("label",{className:"nps-label-footer likely",children:[" ",jsxRuntimeExports.jsx("span",{children:"10 - "}),"Very likely"," "]})]})]})}):null})},emailValidator=t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase()),ParentEmailModal=({confirmText:t,onDismiss:e,title:n,message:s,eventKey:i})=>{const[a,o]=reactExports.useState(""),l=useDispatch(),u=({email:c,eventKey:d})=>{l({type:BUTTON_PRESSED,payload:{to:"parentRequestEmail",from:"parentRequest",context_id:d}}),l({type:SEND_PARENT_EMAIL_START,payload:{email:c,eventKey:d??"PARENT_INVITE",title:n,message:s,confirmText:t}})};return jsxRuntimeExports.jsx(Modal,{onDismiss:e,children:jsxRuntimeExports.jsxs("div",{className:"parent-email-modal",id:"parent-email-modal-container",children:[jsxRuntimeExports.jsx("h2",{"data-test":"askParentModalTitle",className:"headings__h2",children:n||"Tell your parent"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:s??"Mom got the credit card? We will send them everything they need to know about getting your license online."}),jsxRuntimeExports.jsx(Input,{"data-test":"askParentModalEmailField",id:"askParentModalEmailField",name:"askParentModalEmailField",placeholder:"joe@parent.com",label:"Parent email address",onChange:c=>{o(c.target.value)},value:a}),jsxRuntimeExports.jsx(Button$2,{stretch:!0,disabled:!emailValidator(a),onClick:()=>{u({email:a,eventKey:i})},id:"parentEmailModalButton",children:t||"Send parent information"})]})})},StarRatingDialog=({brand:t,mountState:e,onDismiss:n,theme:s})=>{const i=useDispatch(),{user:a,progress:o,course:l}=store.getState(),{aceRootScope:u}=window,[c,d]=reactExports.useState(0),[p,m]=reactExports.useState(0),[g,E]=reactExports.useState("review.rate"),x=4,b="star",S=lodashExports.get(u,"domainConf.Links.ExternalReview",u.domainConf.Links.GoogleReview),C=[1,2,3,4,5],T=g==="review.happy";let I,D;const P=l.actionList?.find(ee=>ee.action==="review.viewStar");P&&({breakpoint:I,filter:D}=P);const O=ee=>{let z;return ee&&(z=ee.preferredName||ee.nickname||ee.firstName||ee.lastName||ee.accountType),z?.replace(/\w\S*/g,ae=>ae.charAt(0).toUpperCase()+(ae.substring(1)?.toLowerCase()??""))},B=()=>{n()},F=(ee,z)=>{z.preventDefault();const ae=ee>=x?"review.happy":"review.unhappy";E(ae),m(ee),ReviewObj.log(o._id,b.toUpperCase(),ee),i(reviewCompleted({breakpoint:I,filter:D,review:p,from:g,by:"review"}))},H=ee=>ee<=c,Q=(ee,z)=>{set$2("review",[b,I,D].join("-"),p),i(reviewCompleted({breakpoint:I,filter:D,review:p,from:g,by:ee,contactClose:z}))},Z=()=>{window.open(S,"_blank"),Q("review")},ne=ee=>{window.open(u.domainConf.Links.HelpContact,"_blank"),Q("contact",ee)},re=p?{callback:T?Z:()=>{ne("support")},label:T?"Sure, no problem!":"Contact our team"}:null,se=p?{"data-test":"noThanksButton",callback:B,label:"No thanks"}:null,G={default:"Quick Question: How would you rate your experience so far?",happy:"Give us a review?",unhappy:"Can we help? Our customer support team is here for you."},K={default:`Hey, ${O(a)}!`,happy:"YES!",unhappy:"Ugh, not good."},M=p?T?G.happy:G.unhappy:G.default,W=p?T?K.happy:K.unhappy:`Hey, ${O(a)}!`;return jsxRuntimeExports.jsx(GenericModal,{brand:t,message:M,mountState:e,onDismiss:n,primaryButton:re,secondaryButton:se,theme:s,title:W,children:g==="review.rate"?jsxRuntimeExports.jsx("section",{"data-test":"reviewStarsContainer",className:"review-stars center-padded",children:C.map((ee,z)=>jsxRuntimeExports.jsx("a",{"data-test":"reviewStars",className:classNames("ace-btn",{danger:H(ee),quiet:!H(ee)}),onMouseEnter:()=>{d(ee)},onClick:ae=>{F(ee,ae)},role:"presentation",children:jsxRuntimeExports.jsx("i",{className:classNames("fa",{"fa-star":H(ee),"fa-star-o":!H(ee)})})},ee.toString()+z.toString()))}):null})},getBrandUIElements=({queryBrandId:t,isRE:e=!1,isIns:n=!1,isMtg:s=!1})=>{const i=t??window.aceRootScope?.domainConf?.brandId??"ACE",a="https://d1u7daj727sadp.cloudfront.net/webassets/logos";let o,l,u,c,d,p;switch(i){case"ACE":e?(d={text:"Aceable Agent website",href:"https://www.aceableagent.com/"},o=`${a}/aceable/aceable-horizontal-teal-re.svg`):n?(d={text:"Aceable Insurance website",href:"https://insurance.aceable.com "},o=`${a}/aceable/aceable-horizontal-teal-ins.svg`):s?(d={text:"Aceable Mortgage website",href:"https://mortgage.aceable.com/"},o=`${a}/aceable/aceable-horizontal-teal-mtg.svg`):(d={text:"Aceable website",href:"https://www.aceable.com/"},o=`${a}/aceable/aceable-horizontal-teal-dr.svg`,p="For CA residents: ACEABLE TRAFFIC SCHOOL #E0803"),c="https://aceable.com",u="Find an Aceable course",l=`${new Date().getFullYear()} Aceable, Inc. All rights reserved.`;break;case"ACE-PA":d={text:"PrepAgent by Aceable",href:"https://prepagent.com"},o=`${a}/prepagent/horizontal-blue.svg`,c="https://prepagent.com",u="Get a PrepAgent course",l=`${new Date().getFullYear()} Aceable, Inc. All rights reserved.`,p="";break;case"DEC":d={text:"DriversEd.com website",href:"https://driversed.com"},o=`${a}/dec/horizontal-logo.svg`,c="https://driversed.com",u="Find a DriversEd.com course",l=`${new Date().getFullYear()} Driversed.com. All Rights Reserved.`;break;case"IDS":d={text:"I Drive Safely website",href:"https://idrivesafely.com"},o=`${a}/ids/stacked-logo.svg`,c="https://idrivesafely.com",u="Find an I Drive Safely course",l=`${new Date().getFullYear()} I Drive Safely. All Rights Reserved`;break;case"AARP":d={text:"AARP Driver Safety website",href:"https://www.aarpdriversafety.org/"},o=`${a}/aarp/logomark.svg`,c="https://www.aarpdriversafety.org/",u="Find an AARP Driver Safety course";break;case"FLVS":o=`${a}/flvs/new/flvs_logo_new.png`,c="",u="Find a FLVS course",d={text:"Florida Virtual School",href:"https://flvs.net"};break;default:o=`${a}/aceable/aceable-horizontal-teal-dr.svg`,c="";break}return{backLink:d,disclaimerText:l,logoUrl:o,noAccountText:u,noAccountHref:c,schoolDisclaimer:p}},validateEmail=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.exec(t),validatePassword=(t,e)=>{const n=/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{9,}$/;return e==="AARP"?{valid:t.length&&n.test(t),message:"Must be at least 9 characters with 1 uppercase letter, 1 lowercase letter, and 1 number."}:{valid:t.length&&t.length>=8,message:"Password must be at least 8 characters."}},syncInit=async({sessionToken:t,isCx:e,isTaxonomy:n,redirect:s,fromSso:i})=>{const{aceRootScope:a}=window,{userCurrent:o}=a||{},l=Number(e)||0;if(!t)return!1;try{const u=o?.sessionToken;u&&u!==t&&(clearEverything(),resetRecordOfPopups(),UserObj.signOut());let c;i?c=await UserObj.ssoSync(t):c=await UserObj.sync(),c.defCourseId&&await CourseObj.get(c.defCourseId),set$2("sync","isTaxonomy",n),set$2("sync","isCx",e),a.isTaxonomy=!!n,a.isCx=!!l,store.dispatch({type:IDENTIFY_USER,payload:{user:c}}),store.dispatch({type:REDIRECT_TO_URL,payload:{url:s}})}catch(u){return console.error("Error syncing user:",u),!1}},Checkbox=({checked:t=!1,id:e,label:n,onChange:s,variant:i="md",required:a=!1,name:o,"data-test":l})=>{const u=i==="lg",c=u?"large-list-title":"checklist-title--small";return u?jsxRuntimeExports.jsxs("div",{className:"grit checkbox lg",children:[jsxRuntimeExports.jsx(ToggleButton,{active:t,onClick:s,variant:"checkbox"}),n?jsxRuntimeExports.jsx("label",{role:"presentation",onClick:s,className:`lists-menus__${c}`,children:n}):null]}):jsxRuntimeExports.jsxs("div",{className:"grit checkbox md",children:[jsxRuntimeExports.jsx("input",{id:e,name:o??e,type:"checkbox",checked:t,onChange:s,required:a}),n?jsxRuntimeExports.jsx("label",{"data-test":l,className:`lists-menus__${c}`,htmlFor:e,children:n}):null]})},validateForm=t=>{const e={};return t.name||(e.name="Your name is required"),t.email?validateEmail(t.email)||(e.email="The email entered is not a valid email address."):e.email="Email address is required",t.question||(e.question="Please provide a question for the tutor."),e},TutorContactForm=({onDismiss:t,title:e,mountState:n,tutorEmail:s,onConfirm:i})=>{const a=useSelector(D=>D.user),o=useDispatch(),[l,u]=reactExports.useState({name:a.preferredName??"",email:a.username??"",isScheduled:!1,question:""}),[c,d]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),[g,E]=reactExports.useState(!1),[x,b]=reactExports.useState(!1),S=D=>{const P=validateForm(D);b(Object.keys(P).length===0)},C=D=>{const{name:P}=D.target;if(P==="email"){d(!!l.email.length&&!validateEmail(l.email));return}if(P==="name"){m(l.name.length===0);return}if(P==="question"){E(l.question.length===0);return}},T=D=>{const{name:P,value:O}=D.target;u(B=>{const F={...B,[P]:O};return S(F),F})},I=async()=>{const D={progressId:a.defProgressId??"",eventProperties:{tutorName:e,studentName:l.name,studentEmail:l.email,email:s,question:l.question,isScheduled:l.isScheduled}},P=await sendTutorEmail(D);i(),o({type:SHOW_MODAL,payload:{modal:{message:P.message,title:P.isSuccess?"Success!":"Error!",buttonText:"Continue",confirmDispatch:[{type:HIDE_MODAL}],dismissDispatch:[{type:HIDE_MODAL}]}}})};return jsxRuntimeExports.jsx(Modal,{mountState:n,onDismiss:t,hideCloseIcon:!1,children:jsxRuntimeExports.jsxs("div",{className:"tutor-contact-form",children:[jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:e}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed subtle",children:"Fill out the form below to contact the tutor."}),jsxRuntimeExports.jsxs("div",{className:"tutor-contact-form__input-wrapper",children:[jsxRuntimeExports.jsx(Input,{id:"name",label:"Name",name:"name",type:"text",placeholder:"Your name",required:!0,onChange:T,value:l.name,onBlur:C,helperText:p?"The name field can't be empty.":"",error:p}),jsxRuntimeExports.jsx(Input,{id:"email",name:"email",label:"Email",type:"email",placeholder:"Your email",required:!0,onChange:T,value:l.email,onBlur:C,helperText:c?"The email entered is not a valid email address.":"",error:c}),jsxRuntimeExports.jsx(Checkbox,{name:"isScheduled",id:"is-session-scheduled",label:"I have already scheduled a session",onChange:()=>{u(D=>({...D,isScheduled:!D.isScheduled}))},checked:l.isScheduled,variant:"lg"}),jsxRuntimeExports.jsx(Input,{id:"question",label:"Question",name:"question",type:"text",textarea:!0,placeholder:"Your question",required:!0,onChange:T,value:l.question,rows:4,onBlur:C,helperText:g?"Please provide a question for the tutor.":"",error:g})]}),jsxRuntimeExports.jsx(Button$2,{disabled:!x,onClick:I,children:"Send Message"})]})})},CloseIcon=({id:t,...e})=>jsxRuntimeExports.jsx("a",{className:"text-regular! leading-none w-4 h-4 relative visited:text-regular [&>svg]:relative [&>svg]:-top-1",href:"#",id:t,...e,children:jsxRuntimeExports.jsx("svg",{className:"fill-current w-4 h-4 cursor-pointer leading-none",height:"512px",width:"512px",viewBox:"0 0 512 512",children:jsxRuntimeExports.jsx("path",{d:`M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  
      L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  
      c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  
      c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z`})})}),UpsellModal=({headline:t,onClose:e,title:n,price:s,onConfirm:i,onDismiss:a,dismissText:o,description:l})=>jsxRuntimeExports.jsxs("div",{id:"modal-container",className:"gritSharedModal white-bg no-padding square-corners",role:"dialog","aria-modal":"true",children:[jsxRuntimeExports.jsxs("div",{className:"gritSharedModal headWrapper",children:[jsxRuntimeExports.jsx("h2",{id:"modal-headline",className:"headings__h2",children:t??"Modal Headline"}),jsxRuntimeExports.jsx(CloseIcon,{onClick:u=>{u.preventDefault(),e()},id:"modal-close-icon-button"})]}),jsxRuntimeExports.jsxs("div",{className:"bodyWrapper",children:[jsxRuntimeExports.jsxs("div",{className:"gritSharedModal titleAndPriceWrapper",children:[jsxRuntimeExports.jsx("div",{className:"gritSharedModal productTitle paragraph__bold",id:"product-title",children:n??"Upsell Title"}),jsxRuntimeExports.jsxs("span",{className:"font-[900] text-xl text-controls-primary mr-2 leading-[1.6875]",id:"product-price",children:["$",s??"price"]})]}),l&&jsxRuntimeExports.jsx("div",{className:"gritSharedModal descriptionWrapper upsell paragraph__regular",children:jsxRuntimeExports.jsx("div",{"data-section":"upsell-modal-description-text",id:"product-description-text",dangerouslySetInnerHTML:{__html:l}})})]}),jsxRuntimeExports.jsxs("div",{className:"gritSharedModal buttonWrap mt4 m4",children:[jsxRuntimeExports.jsx(Button$2,{id:"modal-buy-button",onClick:i,children:"Buy with Card"}),jsxRuntimeExports.jsx(Button$2,{variant:"text",id:"modal-dismiss-button",onClick:a,children:o??"No Thanks"})]})]}),initialState$2=[{id:0,isLoading:!1,isStudent:!1,isInstructor:!0,showFeedbackOptions:!1,isUseful:void 0,showOnboardinQuestions:!1,isInstructorGlobalEnabled:!0,onboardingQuestionsSelected:[],showRatingPrompt:!1,input:"",content:"Hey there! How can I help? The more detailed your question, the better I can help you.",answerId:""}],initialOnboardingState=[{id:0,isLoading:!1,isStudent:!1,isInstructor:!0,showFeedbackOptions:!1,isUseful:void 0,showOnboardinQuestions:!1,isInstructorGlobalEnabled:!0,onboardingQuestionsSelected:[],showRatingPrompt:!1,input:"",content:"Hi! Got questions about the course material? As your Virtual Instructor, I can get an answer for you any time. Just open this chat window and ask away!",answerId:""}],quizState=[{id:0,isLoading:!1,isStudent:!1,isInstructor:!0,showFeedbackOptions:!1,isUseful:void 0,showOnboardinQuestions:!1,isInstructorGlobalEnabled:!0,onboardingQuestionsSelected:[],showRatingPrompt:!1,input:"",content:"I'm here to help. What specific questions do you have?",answerId:""}];function reducer$2(t,e){switch(e.type){case"set_preferred_name":return[{...t[0],content:`Hey ${e.value}! How can I help? The more detailed your question, the better I can help you.`}];case"use_quiz_state":return quizState;case"use_instructor_onboarding_state":return initialOnboardingState;case"add_new_student_state":return[...t,{id:t.length,isLoading:!1,isStudent:!0,isInstructor:!1,showFeedbackOptions:!1,isUseful:void 0,showRatingPrompt:!1,input:"",content:e.value,answerId:""}];case"add_new_instructor_state":return[...t,{id:t.length,isLoading:!1,isStudent:!1,isInstructor:!0,showFeedbackOptions:!1,onboardingQuestionsSelected:[],showRatingPrompt:!e.value.isOnboardingAnswer,isUseful:void 0,input:"",content:"",answerId:""}];case"instructor_is_loading":return[...t.slice(0,-1),{...t[t.length-1],isLoading:!0}];case"set_instructor_answer":return[...t.slice(0,-1),{...t[t.length-1],answerId:e.value.answerId,content:e.value.content,isLoading:e.value.isLoading,showRatingPrompt:e.value.showRatingPrompt,showOnboardinQuestions:e.value.showOnboardinQuestions,isInstructorGlobalEnabled:e.value.isInstructorGlobalEnabled}];case"set_onboarding_question_selected":return t.map((n,s)=>s===e.value.index?{...n,onboardingQuestionsSelected:[...n.onboardingQuestionsSelected,e.value.selectedQuestion]}:n);case"set_instructor_useful":return t.map((n,s)=>s===e.value.index?{...n,isUseful:e.value.isUseful}:n);case"save_history_in_redux_state":{const{virtualInstructor:n}=store.getState();return[...n.messages[e.value.nodeId]]}case"save_to_redux_store":return store.dispatch({type:setVirtualInstructorMessage.type,payload:{pageId:e.value.nodeId,messages:[...t]}}),t;default:throw new Error}}function r(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=r(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function clsx(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=r(t))&&(s&&(s+=" "),s+=e);return s}const falsyToString=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cx=clsx,cva=(t,e)=>n=>{var s;if(e?.variants==null)return cx(t,n?.class,n?.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(c=>{const d=n?.[c],p=a?.[c];if(d===null)return null;const m=falsyToString(d)||falsyToString(p);return i[c][m]}),l=n&&Object.entries(n).reduce((c,d)=>{let[p,m]=d;return m===void 0||(c[p]=m),c},{}),u=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,d)=>{let{class:p,className:m,...g}=d;return Object.entries(g).every(E=>{let[x,b]=E;return Array.isArray(b)?b.includes({...a,...l}[x]):{...a,...l}[x]===b})?[...c,p,m]:c},[]);return cx(t,o,u,n?.class,n?.className)},CLASS_PART_SEPARATOR="-",createClassGroupUtils=t=>{const e=createClassMap(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:o=>{const l=o.split(CLASS_PART_SEPARATOR);return l[0]===""&&l.length!==1&&l.shift(),getGroupRecursive(l,e)||getGroupIdForArbitraryProperty(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&s[o]?[...u,...s[o]]:u}}},getGroupRecursive=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),i=s?getGroupRecursive(t.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(CLASS_PART_SEPARATOR);return e.validators.find(({validator:o})=>o(a))?.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=t=>{if(arbitraryPropertyRegex.test(t)){const e=arbitraryPropertyRegex.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},createClassMap=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const i in n)processClassesRecursively(n[i],s,i,e);return s},processClassesRecursively=(t,e,n,s)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:getPart(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(isThemeGetter(i)){processClassesRecursively(i(s),e,n,s);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{processClassesRecursively(o,getPart(e,a),n,s)})})},getPart=(t,e)=>{let n=t;return e.split(CLASS_PART_SEPARATOR).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},isThemeGetter=t=>t.isThemeGetter,createLruCache=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,s=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=s.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",MODIFIER_SEPARATOR_LENGTH=MODIFIER_SEPARATOR.length,createParseClassName=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const a=[];let o=0,l=0,u=0,c;for(let E=0;E<i.length;E++){let x=i[E];if(o===0&&l===0){if(x===MODIFIER_SEPARATOR){a.push(i.slice(u,E)),u=E+MODIFIER_SEPARATOR_LENGTH;continue}if(x==="/"){c=E;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const d=a.length===0?i:i.substring(u),p=stripImportantModifier(d),m=p!==d,g=c&&c>u?c-u:void 0;return{modifiers:a,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}};if(e){const i=e+MODIFIER_SEPARATOR,a=s;s=o=>o.startsWith(i)?a(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=s;s=a=>n({className:a,parseClassName:i})}return s},stripImportantModifier=t=>t.endsWith(IMPORTANT_MODIFIER)?t.substring(0,t.length-1):t.startsWith(IMPORTANT_MODIFIER)?t.substring(1):t,createSortModifiers=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let a=[];return s.forEach(o=>{o[0]==="["||e[o]?(i.push(...a.sort(),o),a=[]):a.push(o)}),i.push(...a.sort()),i}},createConfigUtils=t=>({cache:createLruCache(t.cacheSize),parseClassName:createParseClassName(t),sortModifiers:createSortModifiers(t),...createClassGroupUtils(t)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:a}=e,o=[],l=t.trim().split(SPLIT_CLASSES_REGEX);let u="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{isExternal:p,modifiers:m,hasImportantModifier:g,baseClassName:E,maybePostfixModifierPosition:x}=n(d);if(p){u=d+(u.length>0?" "+u:u);continue}let b=!!x,S=s(b?E.substring(0,x):E);if(!S){if(!b){u=d+(u.length>0?" "+u:u);continue}if(S=s(E),!S){u=d+(u.length>0?" "+u:u);continue}b=!1}const C=a(m).join(":"),T=g?C+IMPORTANT_MODIFIER:C,I=T+S;if(o.includes(I))continue;o.push(I);const D=i(S,b);for(let P=0;P<D.length;++P){const O=D[P];o.push(T+O)}u=d+(u.length>0?" "+u:u)}return u};function twJoin(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=toValue(e))&&(s&&(s+=" "),s+=n);return s}const toValue=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=toValue(t[s]))&&(n&&(n+=" "),n+=e);return n};function createTailwindMerge(t,...e){let n,s,i,a=o;function o(u){const c=e.reduce((d,p)=>p(d),t());return n=createConfigUtils(c),s=n.cache.get,i=n.cache.set,a=l,l(u)}function l(u){const c=s(u);if(c)return c;const d=mergeClassList(u,n);return i(u,d),d}return function(){return a(twJoin.apply(null,arguments))}}const fromTheme=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=t=>fractionRegex.test(t),isNumber$1=t=>!!t&&!Number.isNaN(Number(t)),isInteger=t=>!!t&&Number.isInteger(Number(t)),isPercent=t=>t.endsWith("%")&&isNumber$1(t.slice(0,-1)),isTshirtSize=t=>tshirtUnitRegex.test(t),isAny=()=>!0,isLengthOnly=t=>lengthUnitRegex.test(t)&&!colorFunctionRegex.test(t),isNever=()=>!1,isShadow=t=>shadowRegex.test(t),isImage=t=>imageRegex.test(t),isAnyNonArbitrary=t=>!isArbitraryValue(t)&&!isArbitraryVariable(t),isArbitrarySize=t=>getIsArbitraryValue(t,isLabelSize,isNever),isArbitraryValue=t=>arbitraryValueRegex.test(t),isArbitraryLength=t=>getIsArbitraryValue(t,isLabelLength,isLengthOnly),isArbitraryNumber=t=>getIsArbitraryValue(t,isLabelNumber,isNumber$1),isArbitraryPosition=t=>getIsArbitraryValue(t,isLabelPosition,isNever),isArbitraryImage=t=>getIsArbitraryValue(t,isLabelImage,isImage),isArbitraryShadow=t=>getIsArbitraryValue(t,isLabelShadow,isShadow),isArbitraryVariable=t=>arbitraryVariableRegex.test(t),isArbitraryVariableLength=t=>getIsArbitraryVariable(t,isLabelLength),isArbitraryVariableFamilyName=t=>getIsArbitraryVariable(t,isLabelFamilyName),isArbitraryVariablePosition=t=>getIsArbitraryVariable(t,isLabelPosition),isArbitraryVariableSize=t=>getIsArbitraryVariable(t,isLabelSize),isArbitraryVariableImage=t=>getIsArbitraryVariable(t,isLabelImage),isArbitraryVariableShadow=t=>getIsArbitraryVariable(t,isLabelShadow,!0),getIsArbitraryValue=(t,e,n)=>{const s=arbitraryValueRegex.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},getIsArbitraryVariable=(t,e,n=!1)=>{const s=arbitraryVariableRegex.exec(t);return s?s[1]?e(s[1]):n:!1},isLabelPosition=t=>t==="position"||t==="percentage",isLabelImage=t=>t==="image"||t==="url",isLabelSize=t=>t==="length"||t==="size"||t==="bg-size",isLabelLength=t=>t==="length",isLabelNumber=t=>t==="number",isLabelFamilyName=t=>t==="family-name",isLabelShadow=t=>t==="shadow",getDefaultConfig=()=>{const t=fromTheme("color"),e=fromTheme("font"),n=fromTheme("text"),s=fromTheme("font-weight"),i=fromTheme("tracking"),a=fromTheme("leading"),o=fromTheme("breakpoint"),l=fromTheme("container"),u=fromTheme("spacing"),c=fromTheme("radius"),d=fromTheme("shadow"),p=fromTheme("inset-shadow"),m=fromTheme("text-shadow"),g=fromTheme("drop-shadow"),E=fromTheme("blur"),x=fromTheme("perspective"),b=fromTheme("aspect"),S=fromTheme("ease"),C=fromTheme("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...I(),isArbitraryVariable,isArbitraryValue],P=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],B=()=>[isArbitraryVariable,isArbitraryValue,u],F=()=>[isFraction,"full","auto",...B()],H=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],Q=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],Z=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],ne=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],re=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...B()],K=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],M=()=>[t,isArbitraryVariable,isArbitraryValue],W=()=>[...I(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],ae=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],ce=()=>["","none","full",c,isArbitraryVariable,isArbitraryValue],he=()=>["",isNumber$1,isArbitraryVariableLength,isArbitraryLength],fe=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Me=()=>[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Ye=()=>["","none",E,isArbitraryVariable,isArbitraryValue],We=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],Be=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],rt=()=>[isNumber$1,isArbitraryVariable,isArbitraryValue],tt=()=>[isFraction,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,b]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,l]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",l,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ne()}],"auto-rows":[{"auto-rows":ne()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...re(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...re()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":re()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[l,"screen",...K()]}],"min-w":[{"min-w":[l,"screen","none",...K()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",n,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[a,...B()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:ae()}],"gradient-via-pos":[{via:ae()}],"gradient-to-pos":[{to:ae()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",d,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",p,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",m,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":Me()}],"mask-image-linear-to-pos":[{"mask-linear-to":Me()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":Me()}],"mask-image-t-to-pos":[{"mask-t-to":Me()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":Me()}],"mask-image-r-to-pos":[{"mask-r-to":Me()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":Me()}],"mask-image-b-to-pos":[{"mask-b-to":Me()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":Me()}],"mask-image-l-to-pos":[{"mask-l-to":Me()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":Me()}],"mask-image-x-to-pos":[{"mask-x-to":Me()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":Me()}],"mask-image-y-to-pos":[{"mask-y-to":Me()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Me()}],"mask-image-radial-to-pos":[{"mask-radial-to":Me()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":Me()}],"mask-image-conic-to-pos":[{"mask-conic-to":Me()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Ye()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",g,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Ye()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",S,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",C,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:Be()}],"scale-x":[{"scale-x":Be()}],"scale-y":[{"scale-y":Be()}],"scale-z":[{"scale-z":Be()}],"scale-3d":["scale-3d"],skew:[{skew:rt()}],"skew-x":[{"skew-x":rt()}],"skew-y":[{"skew-y":rt()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tt()}],"translate-x":[{"translate-x":tt()}],"translate-y":[{"translate-y":tt()}],"translate-z":[{"translate-z":tt()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...t){return twMerge(clsx(t))}const answerExplanationVariants=cva("grid has-[>span]:grid-cols-[32px_1fr] has-[>span]:gap-x-2 border-2 p-4",{variants:{variant:{correct:"border-content-positive bg-positive [&>span]:bg-content-positive",strong:"border-content-positive bg-positive [&>span]:bg-content-positive",incorrect:"border-content-negative bg-negative [&>span]:bg-content-negative",weak:"border-content-negative bg-negative [&>span]:bg-content-negative",average:"border-content-warning bg-warning"},isInstructorEnabled:{true:"rounded-t-2xl rounded-r-2xl",false:"rounded-2xl"}}}),AnswerExplanation=({variant:t,isInstructorEnabled:e=!1,...n})=>jsxRuntimeExports.jsx("div",{className:answerExplanationVariants({variant:t,isInstructorEnabled:e}),"data-test":"popupAnswerExplanation",...n}),AnswerExplanationContent=({className:t,...e})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col gap-2 pt-2 pl-2 items-start",t),...e}),AnswerExplanationBetaTag=({...t})=>jsxRuntimeExports.jsx("div",{className:"flex justify-center pt-0 px-2 items-center rounded-2xl bg-brand-1 text-center! text-[13px] font-extrabold leading-[21px] text-content-reverse",...t,children:"BETA"}),AnswerExplanationStrengthMeter=({variant:t})=>{const e=n=>{switch(t){case"STRONG":return"bg-content-positive";case"AVERAGE":return n<2?"bg-content-warning":"bg-subdued";case"WEAK":return n<1?"bg-content-negative":"bg-subdued";default:return"bg-subdued"}};return jsxRuntimeExports.jsxs("div",{className:"flex items-center self-stretch gap-4 max-w-[240px]",children:[jsxRuntimeExports.jsx("p",{className:"text-regular text-[13px] font-extrabold leading-[21px]","data-test":"popupResult",children:"Your answer strength"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 grow","data-test":`${t}AnswerStrength`,children:[0,1,2].map(n=>jsxRuntimeExports.jsx("div",{className:cn(e(n),"rounded-lg h-1 grow")},n))})]})},AnswerExplanationTitle=({className:t,...e})=>jsxRuntimeExports.jsx("div",{className:cn("text-regular font-bold text-xl leading-6.5 ",t),...e,"data-test":"popupResult"}),AnswerExplanationDescription=({className:t,...e})=>jsxRuntimeExports.jsx("div",{className:cn("text-regular font-semibold text-[13px] leading-[21px] ",t),...e,"data-test":"popupAnswerExplanationDescrp"}),AnswerExplanationRemediationQuestion=({...t})=>{const{onClick:e}=t;return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1 items-start mt-6",children:[jsxRuntimeExports.jsx("p",{"data-test":"followUpQuestion",className:"text-regular text-[13px] font-extrabold leading-[21px]",children:"Do you have any questions about this?"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"openVi",linkButton:!0,variant:"text",onClick:e,children:"Yes, I've Got a Question"})]})},AnswerExplanationLxExample=({...t})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start gap-2 self-stretch mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-regular text-[13px] font-extrabold leading-[21px]",children:"Example of a strong answer"}),jsxRuntimeExports.jsx("p",{className:"text-regular text-[13px] font-semibold leading-[21px] mt-0!","data-test":"strongAnswerExample",...t})]}),Root$2=AnswerExplanation,Title=AnswerExplanationTitle,Description=AnswerExplanationDescription,Content$2=AnswerExplanationContent,RemediationQuestion=AnswerExplanationRemediationQuestion,BetaTag=AnswerExplanationBetaTag,StrengthMeter=AnswerExplanationStrengthMeter,LxExample=AnswerExplanationLxExample,XInverted=({size:t,className:e})=>{const n=`https://d1u7daj727sadp.cloudfront.net/webassets/grit-icons/${t}/x-inverted.svg`;return jsxRuntimeExports.jsx("span",{"data-size":t,className:classNames("inline-flex bg-subtle","data-[size=xx-small]:w-2 data-[size=xx-small]:h-2","data-[size=x-small]:w-4 data-[size=x-small]:h-4","data-[size=small]:w-6 data-[size=small]:h-6","data-[size=medium]:w-8 data-[size=medium]:h-8","data-[size=large]:w-11 data-[size=large]:h-11",e),style:{maskImage:`url("${n}")`,WebkitMaskImage:`url("${n}")`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center"}})},InstructorAvatar=()=>jsxRuntimeExports.jsx("div",{"data-test":"avatarAce",className:"avatar",children:jsxRuntimeExports.jsx("img",{src:"https://d1u7daj727sadp.cloudfront.net/webassets/ai/ace-avatar.svg",alt:"Chatbot avatar",width:32,"aria-hidden":!0})}),OpenAISVG=()=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"107",height:"15",viewBox:"0 0 107 15",fill:"none",children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#clip0_4464_27833)",children:[jsxRuntimeExports.jsx("path",{className:"openAI",d:"M72.3101 7.49029C72.3101 5.12721 73.774 3.47803 75.8043 3.47803C77.8347 3.47803 79.2986 5.12721 79.2986 7.49029C79.2986 9.85336 77.8347 11.5025 75.8043 11.5025C73.774 11.5025 72.3101 9.85336 72.3101 7.49029ZM77.9567 7.49029C77.9567 5.80044 77.0678 4.70249 75.8043 4.70249C74.5408 4.70249 73.652 5.79592 73.652 7.49029C73.652 9.18465 74.5408 10.2781 75.8043 10.2781C77.0678 10.2781 77.9567 9.18465 77.9567 7.49029ZM83.063 11.5025C82.3528 11.5025 81.83 11.2089 81.4858 10.7887V13.337H80.231V5.692H81.4858V6.29745C81.83 5.87273 82.3528 5.58356 83.063 5.58356C84.601 5.58356 85.4767 6.93002 85.4767 8.54305C85.4767 10.1561 84.5966 11.5025 83.063 11.5025ZM81.4509 8.3804V8.71475C81.4509 9.76752 82.0348 10.3639 82.8103 10.3639C83.7209 10.3639 84.2132 9.62745 84.2132 8.54305C84.2132 7.45866 83.7209 6.72218 82.8103 6.72218C82.0348 6.72218 81.4509 7.30956 81.4509 8.3804ZM88.8708 11.5025C87.3023 11.5025 86.2044 10.3007 86.2044 8.54305C86.2044 6.78543 87.2936 5.58356 88.8185 5.58356C90.3434 5.58356 91.254 6.83061 91.254 8.39395V8.82771H87.4069C87.5027 9.80366 88.0648 10.4001 88.8708 10.4001C89.4895 10.4001 89.9775 10.0748 90.1474 9.48738L91.2235 9.9121C90.8358 10.9106 89.9687 11.5071 88.8708 11.5071V11.5025ZM88.8098 6.67699C88.1606 6.67699 87.6596 7.07912 87.4722 7.84723H89.9905C89.9818 7.21919 89.6028 6.67699 88.8098 6.67699ZM92.1995 11.3851V5.692H93.4543V6.29745C93.768 5.91792 94.2603 5.58356 94.9705 5.58356C96.1208 5.58356 96.8092 6.40589 96.8092 7.63487V11.3851H95.5543V8.01441C95.5543 7.30956 95.2842 6.79899 94.5915 6.79899C94.0251 6.79899 93.4499 7.23274 93.4499 8.04604V11.3851H92.1951H92.1995ZM100.486 3.60002H102.003L104.848 11.3851H103.497L102.848 9.60486H99.6063L98.9702 11.3851H97.6413L100.486 3.60002ZM101.218 5.14077L100.046 8.39395H102.408L101.214 5.14077H101.218ZM107 3.60002V11.3851H105.662V3.60002H107Z",fill:"#AEC1C5"}),jsxRuntimeExports.jsx("path",{className:"openAI-logo",d:"M69.243 6.45575C69.3998 5.96777 69.4521 5.45268 69.4042 4.94211C69.3563 4.43154 69.1951 3.93905 68.9467 3.49625C68.5764 2.82754 68.01 2.2989 67.3303 1.98262C66.6506 1.66633 65.8925 1.58501 65.1649 1.74766C64.8381 1.36361 64.4329 1.05636 63.9798 0.848521C63.5267 0.640678 63.0387 0.532238 62.542 0.536757C61.797 0.536757 61.0737 0.776227 60.4681 1.23258C59.8668 1.68441 59.4181 2.32601 59.1871 3.05797C58.7035 3.1619 58.246 3.36974 57.8452 3.67247C57.4444 3.97519 57.1089 4.35925 56.8649 4.80656C56.4902 5.47527 56.3334 6.2479 56.4118 7.01602C56.4902 7.78413 56.7995 8.50706 57.3006 9.08088C57.1437 9.56886 57.0915 10.084 57.1394 10.5945C57.1917 11.1051 57.3485 11.5976 57.5969 12.0404C57.9672 12.7091 58.5336 13.2377 59.2133 13.554C59.893 13.8703 60.6511 13.9516 61.3787 13.789C61.7055 14.173 62.1107 14.4803 62.5638 14.6881C63.0169 14.896 63.5049 15.0044 64.0016 14.9999C64.7466 14.9999 65.4742 14.7604 66.0755 14.3041C66.6767 13.8522 67.1255 13.2106 67.3564 12.4741C67.84 12.3702 68.2975 12.1624 68.6984 11.8596C69.0992 11.5569 69.4303 11.1729 69.6787 10.7256C70.0534 10.0568 70.2102 9.28421 70.1318 8.5161C70.0534 7.74798 69.744 7.02505 69.243 6.45575ZM64.0321 14.051C63.3393 14.051 62.7991 13.8296 62.3329 13.423C62.3546 13.4094 62.3895 13.3914 62.4156 13.3733L65.191 11.7105C65.2607 11.6699 65.3174 11.6111 65.3566 11.5388C65.3958 11.4666 65.4176 11.3852 65.4176 11.3039V7.24645L66.5896 7.95131C66.5896 7.95131 66.6027 7.96034 66.607 7.96486C66.607 7.96938 66.6114 7.97842 66.6157 7.98293V11.3446C66.6157 12.8672 65.3914 14.0555 64.0321 14.0555V14.051ZM58.3898 11.566C58.0848 11.0192 57.9716 10.3731 58.0805 9.74959C58.1023 9.76315 58.1371 9.78574 58.1633 9.7993L60.9386 11.462C61.0084 11.5027 61.0868 11.5253 61.1652 11.5253C61.2436 11.5253 61.322 11.5027 61.3918 11.462L64.7815 9.43331V10.8385C64.7815 10.8385 64.7815 10.8521 64.7815 10.8611C64.7815 10.8656 64.7727 10.8747 64.7684 10.8792L61.9625 12.56C61.3613 12.9169 60.6511 13.0163 59.9801 12.8311C59.3091 12.6458 58.7384 12.1895 58.3942 11.5705L58.3898 11.566ZM57.6579 5.28098C57.9628 4.72975 58.4465 4.30955 59.0172 4.09267V7.51755C59.0172 7.59888 59.039 7.68021 59.0782 7.7525C59.1174 7.82479 59.1741 7.88353 59.2438 7.9242L62.6335 9.95292L61.4615 10.6578C61.4615 10.6578 61.4484 10.6623 61.444 10.6668C61.4353 10.6668 61.431 10.6668 61.4223 10.6668L58.6164 8.986C58.0151 8.62453 57.5794 8.03264 57.4008 7.34133C57.2222 6.64551 57.3137 5.90903 57.6579 5.2855V5.28098ZM67.2998 7.60791L63.9101 5.57919L65.0821 4.87885C65.0821 4.87885 65.0952 4.87434 65.0995 4.86982H65.1213L67.9272 6.55063C68.3585 6.80817 68.7071 7.18771 68.938 7.64406C69.1689 8.10041 69.2648 8.6155 69.2255 9.12607C69.182 9.64116 68.999 10.1291 68.6984 10.5358C68.3977 10.9469 67.9925 11.2587 67.5263 11.4349V8.01004C67.5263 7.92872 67.5046 7.84739 67.4653 7.77509C67.4261 7.7028 67.3695 7.64406 67.2998 7.6034V7.60791ZM68.4674 5.78252C68.4674 5.78252 68.4108 5.74637 68.3847 5.73282L65.6093 4.07008C65.5396 4.02941 65.4611 4.00682 65.3827 4.00682C65.3043 4.00682 65.2215 4.02941 65.1562 4.07008L61.7665 6.0988V4.6936C61.7665 4.6936 61.7665 4.68005 61.7665 4.67101C61.7665 4.66649 61.7752 4.65746 61.7795 4.65294L64.5854 2.97213C65.0167 2.71458 65.5047 2.58807 66.0014 2.61066C66.4981 2.63325 66.9774 2.80043 67.3826 3.09412C67.7878 3.38781 68.1058 3.79898 68.2975 4.2734C68.4892 4.74782 68.5459 5.27195 68.4631 5.778L68.4674 5.78252ZM61.126 8.29018L59.954 7.58532C59.954 7.58532 59.9409 7.57629 59.9365 7.57177C59.9365 7.56725 59.9322 7.55821 59.9278 7.5537V4.19207C59.9278 3.67698 60.0716 3.17545 60.3374 2.73717C60.6032 2.30342 60.9822 1.95551 61.4353 1.73863C61.8841 1.52175 62.3851 1.44042 62.8775 1.50368C63.3698 1.57145 63.836 1.77929 64.2151 2.10913C64.1933 2.12268 64.1584 2.14076 64.1323 2.15883L61.3569 3.82157C61.2872 3.86223 61.2306 3.92097 61.1913 3.99327C61.1521 4.06556 61.1303 4.14689 61.1303 4.22822V8.28566L61.126 8.29018ZM61.7621 6.86691L63.2696 5.96325L64.7771 6.86691V8.67424L63.2696 9.5779L61.7621 8.67424V6.86691Z",fill:"#AEC1C5"}),jsxRuntimeExports.jsx("path",{className:"powered-by",d:"M1.71014 8.37205V11.3858H0.372559V3.60071H3.37449C5.04756 3.60071 6.09323 4.41401 6.09323 5.98638C6.09323 7.55875 5.04756 8.37205 3.37449 8.37205H1.71014ZM1.71014 7.17921H3.30043C4.26331 7.17921 4.77307 6.74545 4.77307 5.98638C4.77307 5.2273 4.25895 4.79354 3.30043 4.79354H1.71014V7.17921ZM11.5525 8.54374C11.5525 10.3104 10.4545 11.5032 8.90781 11.5032C7.3611 11.5032 6.26315 10.3104 6.26315 8.54374C6.26315 6.77708 7.3611 5.58425 8.90781 5.58425C10.4545 5.58425 11.5525 6.77708 11.5525 8.54374ZM7.52666 8.54374C7.52666 9.70495 8.05821 10.4098 8.90781 10.4098C9.75742 10.4098 10.289 9.70495 10.289 8.54374C10.289 7.38254 9.75742 6.67768 8.90781 6.67768C8.05821 6.67768 7.52666 7.38254 7.52666 8.54374ZM14.9901 5.69269H16.0271L17.0117 9.46548L17.9833 5.69269H19.2294L17.5781 11.3858H16.4889L15.4868 7.65364L14.4847 11.3858H13.3955L11.7442 5.69269H13.0295L14.0229 9.46548L14.9945 5.69269H14.9901ZM22.0701 11.5032C20.5016 11.5032 19.4037 10.3014 19.4037 8.54374C19.4037 6.78612 20.4929 5.58425 22.0179 5.58425C23.5428 5.58425 24.4534 6.8313 24.4534 8.39464V8.8284H20.6062C20.7021 9.80435 21.2641 10.4008 22.0701 10.4008C22.6888 10.4008 23.1768 10.0754 23.3467 9.48807L24.4229 9.91279C24.0351 10.9113 23.1681 11.5078 22.0701 11.5078V11.5032ZM22.0091 6.67768C21.36 6.67768 20.8589 7.07981 20.6716 7.84792H23.1899C23.1812 7.21988 22.8021 6.67768 22.0091 6.67768ZM28.4618 5.67913V6.98041C28.3049 6.95782 28.1786 6.94878 27.9999 6.94878C27.207 6.94878 26.597 7.48194 26.597 8.39012V11.3812H25.3422V5.68817H26.597V6.53309C26.8366 5.99993 27.403 5.65654 28.1045 5.65654C28.2526 5.65654 28.3659 5.66558 28.4618 5.67913ZM31.333 11.5032C29.7645 11.5032 28.6666 10.3014 28.6666 8.54374C28.6666 6.78612 29.7558 5.58425 31.2807 5.58425C32.8056 5.58425 33.7163 6.8313 33.7163 8.39464V8.8284H29.8691C29.9649 9.80435 30.527 10.4008 31.333 10.4008C31.9517 10.4008 32.4397 10.0754 32.6096 9.48807L33.6857 9.91279C33.298 10.9113 32.431 11.5078 31.333 11.5078V11.5032ZM31.272 6.67768C30.6228 6.67768 30.1218 7.07981 29.9344 7.84792H32.4527C32.444 7.21988 32.065 6.67768 31.272 6.67768ZM36.679 11.5032C35.141 11.5032 34.2652 10.1568 34.2652 8.54374C34.2652 6.9307 35.1453 5.58425 36.679 5.58425C37.3892 5.58425 37.912 5.87794 38.2562 6.29814V3.59619H39.511V11.3812H38.2562V10.7848C37.912 11.2095 37.3892 11.4987 36.679 11.4987V11.5032ZM38.291 8.38108C38.291 7.30573 37.7072 6.72286 36.9317 6.72286C36.0211 6.72286 35.5287 7.45935 35.5287 8.54374C35.5287 9.62814 36.0211 10.3646 36.9317 10.3646C37.7072 10.3646 38.291 9.76821 38.291 8.71544V8.38108ZM45.8678 11.5032C45.1576 11.5032 44.6348 11.2095 44.2906 10.7893V11.3858H43.0358V3.60071H44.2906V6.30266C44.6348 5.87794 45.1576 5.58877 45.8678 5.58877C47.4058 5.58877 48.2815 6.93522 48.2815 8.54826C48.2815 10.1613 47.4014 11.5078 45.8678 11.5078V11.5032ZM44.2557 8.38108V8.71544C44.2557 9.76821 44.8395 10.3646 45.6151 10.3646C46.5257 10.3646 47.018 9.62814 47.018 8.54374C47.018 7.45935 46.5257 6.72286 45.6151 6.72286C44.8395 6.72286 44.2557 7.31024 44.2557 8.38108ZM51.4795 11.9144C51.1658 12.7819 50.6865 13.3783 49.545 13.3783C49.2836 13.3783 49.2095 13.3693 49.0309 13.3467V12.2533C49.1965 12.2759 49.2923 12.2849 49.4492 12.2849C49.8674 12.2849 50.0679 12.1674 50.2421 11.7111L50.4513 11.1779L48.4558 5.69269H49.7716L51.1222 9.68236L52.438 5.69269H53.7364L51.4795 11.9189V11.9144Z",fill:"#AEC1C5"})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"clip0_4464_27833",children:jsxRuntimeExports.jsx("rect",{width:"107",height:"15",fill:"white"})})})]}),TimeProgressBar=reactExports.forwardRef(function(e,n){const{duration:s,onComplete:i}=e,[a,o]=reactExports.useState(0);return reactExports.useImperativeHandle(n,()=>({resetProgress:()=>{o(0)}})),reactExports.useEffect(()=>{const l=s/100,u=setInterval(()=>{o(c=>c===100?(i(),0):c+1)},l);return()=>{clearInterval(u)}},[s,i]),jsxRuntimeExports.jsx("div",{className:"grit time-progress-bar",children:jsxRuntimeExports.jsx("div",{style:{width:`${a}%`}})})}),ProTips=({proTips:t,isTesting:e})=>{const[n,s]=reactExports.useState(0),i=reactExports.useRef(null),a=useDispatch(),o=()=>{s(u=>Array.isArray(t)?(u+1)%t.length:u)},l=()=>{o(),e||a({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_PROTIP"}}),i.current&&i.current.resetProgress()};return jsxRuntimeExports.jsxs("button",{"aria-label":"Pro Tips Button","data-test":"proTipsButton",className:"pro-tips-button",onClick:l,children:[jsxRuntimeExports.jsx("span",{className:"tips-icon",style:{...getIconStyle("light-bulb","medium")}}),jsxRuntimeExports.jsx("div",{"data-test":"proTipsTitle",className:"paragraph__bold tips-text",children:"Pro Tip"}),!!t.length&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{"data-test":"proTipsTip",className:"paragraph__condensed-bold",children:t[n].tip}),jsxRuntimeExports.jsx("div",{"data-test":"proTipsExample",className:"paragraph__condensed-italic",children:t[n].example})]}),jsxRuntimeExports.jsx(TimeProgressBar,{ref:i,duration:1e4,onComplete:()=>{o()}})]})},Feedback=({title:t,type:e,answerId:n,onButtonClick:s})=>{const[i,a]=reactExports.useState(!0),[o,l]=reactExports.useState(!1),[u,c]=reactExports.useState(""),[d,p]=reactExports.useState(!1),m=reactExports.useRef(null),g=useDispatch(),E=async(b,S)=>{try{await instructorQualitativeFeedback(b,S.poorRatingReason,u),g({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_QUICK_FEEDBACK"}}),d&&p(!1),l(!0),s&&s(),setTimeout(()=>{a(!1)},1e3)}catch(C){p(!0),console.error(C)}},x=async b=>{try{await instructorQualitativeFeedback(b,"",u),g({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_TEXT_FEEDBACK"}}),d&&p(!1),l(!0),setTimeout(()=>{a(!1)},1e3)}catch(S){p(!0),console.error(S)}};return reactExports.useEffect(()=>{m.current&&m.current.scrollIntoView({behavior:"smooth",block:"end"})},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:m,className:`feedback-container ${i?"":"off"}`,children:[jsxRuntimeExports.jsx("div",{className:"feedback-title",children:jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:t})}),d&&jsxRuntimeExports.jsx(Alert,{variant:"error",title:"We weren't able to save this feedback. Please try again!"}),e==="CHOICES"&&!o&&jsxRuntimeExports.jsxs("div",{className:"choices-container",children:[jsxRuntimeExports.jsx(Button$2,{variant:"chat-pill",onClick:()=>E(n,{poorRatingReason:"NO_ANSWER"}),children:"No Answer"}),jsxRuntimeExports.jsx(Button$2,{variant:"chat-pill",onClick:()=>E(n,{poorRatingReason:"INCOMPLETE_ANSWER"}),children:"Incomplete Answer"}),jsxRuntimeExports.jsx(Button$2,{variant:"chat-pill",onClick:()=>E(n,{poorRatingReason:"INCORRECT_ANSWER"}),children:"Incorrect Answer"}),jsxRuntimeExports.jsx(Button$2,{variant:"chat-pill",onClick:()=>E(n,{poorRatingReason:"CONFUSING_ANSWER"}),children:"Confusing Answer"}),jsxRuntimeExports.jsx(Button$2,{variant:"chat-pill",onClick:()=>E(n,{poorRatingReason:"OTHER"}),children:"Other"})]}),e==="CHOICES"&&o&&jsxRuntimeExports.jsx(Alert,{variant:"success",title:"Feedback submitted!",description:""}),e==="TEXT"&&!o&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Input,{id:"instructorWrittenFeedback",name:"instructorWrittenFeedback",onChange:b=>{c(b.target.value)},textarea:!0,value:u}),jsxRuntimeExports.jsx("div",{className:"submit-feedback-container",children:jsxRuntimeExports.jsx(Button$2,{variant:"text",linkButton:!0,disabled:!u,onClick:()=>x(n),children:"Submit Feedback"})})]}),e==="TEXT"&&o&&jsxRuntimeExports.jsx(Alert,{variant:"success",title:"Feedback submitted!",description:""}),jsxRuntimeExports.jsx(Icon,{type:"close",size:"tiny",altText:"Close",mood:"regular",brand:"ACE",theme:"light",handleClick:()=>{a(!1)}})]}),jsxRuntimeExports.jsx("div",{ref:m})]})},InstructorMessageContent=({content:t})=>jsxRuntimeExports.jsx("div",{"data-test":"chatMessage",className:"instructor-bubble paragraph__condensed-bold",children:t}),StudentMessageContent=({content:t})=>jsxRuntimeExports.jsx("div",{"data-test":"chatMessage",className:"student-bubble paragraph__condensed-bold",children:t}),TypingIndicator=()=>jsxRuntimeExports.jsxs("div",{className:"typing",children:[jsxRuntimeExports.jsx("div",{className:"dot"}),jsxRuntimeExports.jsx("div",{className:"dot"}),jsxRuntimeExports.jsx("div",{className:"dot"})]}),Message=({index:t,isLoading:e,isStudent:n,isInstructor:s,isUseful:i,isInstructorGlobalEnabled:a,showRatingPrompt:o,content:l,answerId:u,dispatch:c})=>{const{aceRootScope:d}=window,{user:p,ui:m}=store.getState(),{urlParams:g}=m||{},{userCurrent:E}=d||{},x=(p.firstName||E.firstName||p.accountType)[0],[b,S]=reactExports.useState(!1),[C,T]=reactExports.useState(!1),I=useDispatch(),D=(O,B)=>{const H={"-1":void 0,0:!1,1:!0}[O];switch(c({type:"set_instructor_useful",value:{index:t,isUseful:H}}),H){case!0:T(!1),I({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_RATING_UP"}});break;case!1:I({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_RATING_DOWN"}}),S(!0);break;case void 0:T(!1);break}B&&(instructorRate(B,O).catch(Q=>{console.error(Q)}),c({type:"save_to_redux_store",value:{nodeId:g.nodeId}}))},P=()=>{T(!0)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s&&!e?jsxRuntimeExports.jsxs("div",{className:`instructor-container ${a?"":"disabled"}`,children:[jsxRuntimeExports.jsx(InstructorMessageContent,{content:l}),o?jsxRuntimeExports.jsxs("div",{className:"instructor-avatar-ratings-container",children:[jsxRuntimeExports.jsx(InstructorAvatar,{}),o&&a?jsxRuntimeExports.jsxs("div",{className:"rating-submit-container",children:[jsxRuntimeExports.jsx(ToggleButton,{"data-test":"dislike",variant:"dislike",active:i===!1,onClick:()=>{D(i===!1?-1:0,u)}}),jsxRuntimeExports.jsx(ToggleButton,{"data-test":"like",variant:"like",active:i===!0,onClick:()=>{D(i?-1:1,u)}})]}):null]}):jsxRuntimeExports.jsx(InstructorAvatar,{}),i===!1&&b?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Feedback,{title:"How did I fall short?",type:"CHOICES",onButtonClick:P,answerId:u}),C&&jsxRuntimeExports.jsx(Feedback,{title:"Any more feedback you can share?",type:"TEXT",answerId:u})]}):null]}):null,s&&e?jsxRuntimeExports.jsxs("div",{className:"instructor-loading-container",children:[jsxRuntimeExports.jsx(InstructorAvatar,{}),jsxRuntimeExports.jsx(TypingIndicator,{})]}):null,n?jsxRuntimeExports.jsxs("div",{className:"student-container",children:[jsxRuntimeExports.jsx(StudentMessageContent,{content:l}),jsxRuntimeExports.jsx("div",{className:"student-avatar-container",children:jsxRuntimeExports.jsx(Avatar,{letter:x,size:"small"})})]}):null]})},safeRandomValue=()=>{const t=new Uint32Array(1),e=2**32;return window.crypto.getRandomValues(t)[0]/e},shuffleArray=t=>{const e=t.slice();for(let n=e.length-1;n>0;n-=1){const s=Math.floor(safeRandomValue()*n),i=e[n];e[n]=e[s],e[s]=i}return e},OnboardingQuestions=({handleOnboardingSelectedQuestion:t,index:e,questionsAlreadySelected:n,courseType:s,dispatch:i})=>{const[a,o]=reactExports.useState(!1),l=async u=>{i({type:"set_onboarding_question_selected",value:{index:e,selectedQuestion:u}}),o(!0),await t(u),o(!1)};return jsxRuntimeExports.jsx("div",{className:"message onboarding-wrapper",children:(s==="RE"?RE_ONBOARDING_QUESTIONS:DRV_ONBOARDING_QUESTIONS).map((u,c)=>jsxRuntimeExports.jsx(Button$2,{variant:"chat-pill",selected:n.includes(u),onClick:()=>{l(u).catch(d=>{console.error(d)})},disabled:n.includes(u)||a,"data-test":`chat-pill-${e}`,children:u},c))})},VirtualAssistantChat=({mountState:t,onDismiss:e,isQuizResult:n,quizData:s})=>{const{ui:i,user:a}=store.getState(),{messages:o,virtualInstructorStatus:l}=useSelector(selectVirtualInstructorState),{aceRootScope:u}=window,{progressCurrent:c}=u||{},{urlParams:d}=i||{},m=ModelAbstract.getCurrent("progress")?.appType??"RE",g=o[d.nodeId]||null,E=reactExports.useRef(null),x=reactExports.useRef(null);useOnClickOutside(E,e);const[b,S]=reactExports.useState(""),[C,T]=reactExports.useState(!1),[I,D]=reactExports.useState(0),[P,O]=reactExports.useReducer(reducer$2,initialState$2),[B,F]=reactExports.useState([]),[H,Q]=reactExports.useState(!0),Z=useDispatch(),ne=async re=>{D(Date.now()),re?(O({type:"add_new_student_state",value:re}),Z({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_ONBOARDQ"}})):(O({type:"add_new_student_state",value:b}),Z({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_SUBMIT"}})),O({type:"add_new_instructor_state",value:{isOnboardingAnswer:!1}});try{const se=re||b;S(""),T(!0),O({type:"instructor_is_loading"});const G=await instructorQuestion(c._id,se,d.nodeId,s?.question??"",s?.explanation??"");G.isInstructorGlobalEnabled||Z({type:setIsVirtualInstructorGlobalEnabled.type,payload:{isInstructorGlobalEnabled:!1}}),Q(G.isInstructorGlobalEnabled),O({type:"set_instructor_answer",value:{content:G.message,isLoading:!1,answerId:G.id,showRatingPrompt:!0,showOnboardinQuestions:!1,isInstructorGlobalEnabled:G.isInstructorGlobalEnabled}}),!l.hasStudentAskedViQuestion&&G.isInstructorGlobalEnabled&&(Z({type:setHasStudentAskedVIQuestion.type,payload:{hasStudentAskedViQuestion:!0}}),O({type:"add_new_instructor_state",value:{isOnboardingAnswer:!0}}),O({type:"instructor_is_loading"}),setTimeout(()=>{O({type:"set_instructor_answer",value:{content:"That was a great question! I'm here for you any time you need.",isLoading:!1,answerId:G.id,showRatingPrompt:!1,showOnboardinQuestions:!1,isInstructorGlobalEnabled:H}}),O({type:"save_to_redux_store",value:{nodeId:d.nodeId}}),D(Date.now())},1e3))}catch(se){O({type:"set_instructor_answer",value:{content:"Oops, there's been a glitch! Please ask me again.",isLoading:!1,answerId:"",showRatingPrompt:!1,showOnboardinQuestions:!1,isInstructorGlobalEnabled:!0}}),console.warn("err",se)}D(Date.now()),T(!1),O({type:"save_to_redux_store",value:{nodeId:d.nodeId}})};return reactExports.useEffect(()=>{x.current&&x.current.scrollIntoView({behavior:"smooth",block:"end"})},[I]),reactExports.useEffect(()=>{n?g?(O({type:"save_history_in_redux_state",value:{nodeId:d.nodeId}}),D(Date.now())):O({type:"use_quiz_state"}):(()=>{if(c?._id){const G=shuffleArray(l.proTipList);F(G||[]),l.hasStudentAskedViQuestion?g?(O({type:"save_history_in_redux_state",value:{nodeId:d.nodeId}}),D(Date.now())):O({type:"set_preferred_name",value:getDisplayName$1(a)}):(T(!0),O({type:"use_instructor_onboarding_state"}),setTimeout(()=>{O({type:"add_new_instructor_state",value:{isOnboardingAnswer:!0}}),O({type:"instructor_is_loading"}),D(Date.now())},500),setTimeout(()=>{O({type:"set_instructor_answer",value:{content:"You can ask me questions like:",isLoading:!1,answerId:"",showRatingPrompt:!1,showOnboardinQuestions:!0,isInstructorGlobalEnabled:!0}}),D(Date.now()),T(!1)},3e3))}})()},[]),jsxRuntimeExports.jsxs("section",{"data-test":"instructorChat",ref:E,className:`grit va-assistant gritModal--${t}`,"aria-label":"Virtual Instructor Chat Conversation",children:[jsxRuntimeExports.jsxs("nav",{children:[jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:"Virtual Instructor"}),jsxRuntimeExports.jsxs("div",{className:"window-commands",children:[!lodashExports.isEmpty(l.instructorSupportUrl)&&jsxRuntimeExports.jsx(IconButton,{"data-test":"helpForVI",iconSize:"x-small",iconName:"help",color:"reverse",onClick:()=>{Z({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_HELP"}}),Z({type:OPEN_LINK,payload:{linkObj:{link:l.instructorSupportUrl,type:"URL"}}})}}),jsxRuntimeExports.jsx(IconButton,{"data-test":"minimizeVI",iconSize:"x-small",iconName:"minimize",color:"reverse",onClick:e})]})]}),jsxRuntimeExports.jsxs("main",{children:[!!B.length&&!n&&jsxRuntimeExports.jsx(ProTips,{proTips:B}),jsxRuntimeExports.jsxs("div",{className:"messages-list",ref:x,children:[n&&jsxRuntimeExports.jsxs("div",{className:"instructor-container",children:[jsxRuntimeExports.jsxs(AnswerExplanation,{"data-test":"popupContextExplanation",variant:"incorrect",isInstructorEnabled:!0,children:[jsxRuntimeExports.jsx(XInverted,{size:"small",className:"w-8! h-8!"}),jsxRuntimeExports.jsxs(AnswerExplanationContent,{children:[jsxRuntimeExports.jsxs("div",{"data-test":"questionAndAnswer",className:"flex flex-col gap-2 mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-regular font-extrabold text-[13px] leading-[21px]",children:"Question:"}),jsxRuntimeExports.jsx("p",{className:"text-regular font-semibold text-[13px] leading-[21px] mt-0!",children:s?.question}),jsxRuntimeExports.jsx("p",{className:"font-extrabold text-[13px] leading-[21px] mt-0! text-content-negative ",children:"Your answer:"}),jsxRuntimeExports.jsx("p",{className:"text-regular font-semibold text-[13px] leading-[21px] mt-0!",children:s?.answer})]}),jsxRuntimeExports.jsx(AnswerExplanationTitle,{"data-test":"explanationTitle",children:"That's incorrect. Here's why:"}),jsxRuntimeExports.jsx(AnswerExplanationDescription,{children:s?.explanation})]})]}),jsxRuntimeExports.jsx(InstructorAvatar,{})]}),P.map((re,se)=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Message,{index:se,isLoading:re.isLoading,isStudent:re.isStudent,isUseful:re.isUseful,isInstructor:re.isInstructor,isInstructorGlobalEnabled:re.isInstructorGlobalEnabled,showRatingPrompt:re.showRatingPrompt,content:re.content,answerId:re.answerId,dispatch:O},se),re.showOnboardinQuestions&&jsxRuntimeExports.jsx(OnboardingQuestions,{handleOnboardingSelectedQuestion:ne,index:se,questionsAlreadySelected:re.onboardingQuestionsSelected,courseType:m,dispatch:O})]}))]})]}),jsxRuntimeExports.jsxs("footer",{children:[jsxRuntimeExports.jsxs("form",{onSubmit:re=>{re.preventDefault()},className:"instructor-form",children:[jsxRuntimeExports.jsx(Input,{"data-test":"writeQuestion",id:"messageInput",name:"messageInput",placeholder:"Ask Ace a question",value:b,onChange:re=>{S(re.target.value)},textarea:!0,dynamicHeight:150,maxLength:1e3}),jsxRuntimeExports.jsx(Button$2,{"data-test":"sendQuestion",variant:"solid",onClick:()=>ne(),disabled:C||!H,"aria-label":"Send question to Virtual Instructor",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",children:[jsxRuntimeExports.jsx("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H24C26.2091 0 28 1.79086 28 4V24C28 26.2091 26.2091 28 24 28H4C1.79086 28 0 26.2091 0 24V4Z",fill:"#2689CA"}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 6.69824L20.6402 12.2317C21.0645 12.5853 21.1218 13.2159 20.7682 13.6401C20.4147 14.0644 19.7841 14.1217 19.3598 13.7682L14 9.30166L8.64021 13.7682C8.21593 14.1217 7.58537 14.0644 7.2318 13.6401C6.87824 13.2159 6.93556 12.5853 7.35984 12.2317L14 6.69824Z",fill:"white"}),jsxRuntimeExports.jsx("path",{d:"M13 8C13 7.44772 13.4477 7 14 7C14.5523 7 15 7.44772 15 8V20C15 20.5523 14.5523 21 14 21C13.4477 21 13 20.5523 13 20V8Z",fill:"white"})]})})]}),jsxRuntimeExports.jsx("div",{"data-test":"openAILogo",className:"logo-openAI",children:jsxRuntimeExports.jsx(OpenAISVG,{})})]})]})},ParentLink=({data:t,onDismiss:e})=>{const[n,s]=reactExports.useState(""),[i,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),u=t.link||{},c=async m=>{const g=await u({username:m});l(g)},d=m=>{m.preventDefault(),c(n),s("")},p=()=>{a(!validateEmail(n))};return jsxRuntimeExports.jsx(Modal,{onDismiss:e,children:jsxRuntimeExports.jsx("div",{className:"grit link-student",children:o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{id:"successTitle",className:"hero text-cap headings__h2",children:"Success!"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"You have added a new student to your portal."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{id:"addStudentTitle",className:"hero text-cap headings__h2",children:"Add a Student"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"To link a student, enter the email address the student used to sign up with. If they don't have an account yet, they will need to create one before you can link them."}),jsxRuntimeExports.jsx("form",{name:"linkForm",className:"link-student__form-wrapper",onSubmit:d,noValidate:!0,children:jsxRuntimeExports.jsxs("div",{className:"link-student__form",children:[jsxRuntimeExports.jsx("label",{className:"control-label sr-only",htmlFor:"email",children:"Student's Email Address"}),jsxRuntimeExports.jsx(Input,{required:!0,helperText:i?"Please enter a valid email address.":"",error:i,id:"email",name:"email",onBlur:p,onChange:m=>{s(m.target.value)},placeholder:"Student's Email Address",value:n}),jsxRuntimeExports.jsx("div",{className:"btn-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"linkStudentBtn",id:"linkStudentsButton",disabled:!validateEmail(n),stretch:!0,linkButton:!0,type:"submit",children:"Link Student"})})]})})]})})})},fullScreenList=["dlNumberVerification"],ModalManager=()=>{const t=useDispatch(),e=useSelector(selectUIModals),{theme:n}=useTheme(),s=useSelector(selectUIBrandState),i=useSelector(selectPurchaseEnteredAddress),a=200,o=e[0],[l,u,c]=useDelayedUnmounting(),[d,p]=reactExports.useState(!0),m=getStyles$1("page",s,n,["BGDefault"],"background"),g=getStyles$1("overlay",s,n,["BGDefault"],"background"),E=e.findIndex(b=>b.type==="newFeatureCard"||b.type==="tutor.contact"),x=(b,S)=>{c(),setTimeout(()=>{t(hideModal(0)),b==="confirm"&&S.confirmDispatch?.length&&S.confirmDispatch.forEach(C=>{C&&t(C)}),b==="dismiss"&&S.dismissDispatch?.length&&S.dismissDispatch.forEach(C=>{C&&t(C)}),b==="secondary"&&S.secondaryDispatch?.length&&S.secondaryDispatch.forEach(C=>{C&&t(C)})},a)};return reactExports.useLayoutEffect(()=>{let b=!0;return l==="unmounted"&&setTimeout(()=>{b&&u()},a),function(){b=!1}},[l]),reactExports.useEffect(()=>{o||p(!0)},[o]),reactExports.useEffect(()=>{if(!o||o.type!=="ai.va")return;const b=S=>{(S.key==="Escape"||S.key==="Esc")&&x("dismiss",o)};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[o,x]),e.length?jsxRuntimeExports.jsx("div",{className:classNames("gritModalOverlay",`gritModalOverlay--${l}`,{"gritModalOverlay--fullscreen":fullScreenList.includes(o.type)}),style:fullScreenList.includes(o.type)?m:g,role:"dialog","aria-modal":"true","aria-live":"polite",children:(()=>{switch(o.type){case"error":return jsxRuntimeExports.jsx(ErrorModal,{...o,onConfirm:()=>{x("confirm",o)},onDismiss:()=>{x("dismiss",o)}});case"addressVerification":return jsxRuntimeExports.jsx(AddressVerificationModal,{...o,onConfirm:()=>{x("confirm",o)},onDismiss:()=>{x("dismiss",o)},address:i});case"upsell":return jsxRuntimeExports.jsx(UpsellModal,{...o,onConfirm:()=>{x("confirm",o)},onDismiss:()=>{x("dismiss",o)},onClose:()=>{x("dismiss",o)}});case"emailParent":return jsxRuntimeExports.jsx(ParentEmailModal,{onDismiss:()=>{x("dismiss",o)},title:o.title,message:o.message,eventKey:o.eventKey,confirmText:o.confirmText});case"certificate.viewList":return jsxRuntimeExports.jsx(CertificateListModal,{brand:s,onDismiss:()=>{x("dismiss",o)}});case"checklist.viewStep":return jsxRuntimeExports.jsx(ChecklistStepModal,{step:o.data,onDismiss:()=>{x("dismiss",o)}});case"requestError":return jsxRuntimeExports.jsx(GenericModal,{message:o.message??"Try again?",title:o.title||"Request Error",onDismiss:()=>{x("dismiss",o)},mountState:l,primaryButton:{label:o.buttonText||"Try Again",callback:()=>{x("confirm",o)}}});case"dlNumberVerification":return jsxRuntimeExports.jsx(FullScreenDialog,{currentIndex:0,onClickBack:d?()=>{t(redirectToUrl("dash.index")),t(hideModal(0))}:void 0,screenList:[jsxRuntimeExports.jsx(DialogScreenDlNumber,{onConfirm:()=>{o.redirectToProfiler?t({type:REDIRECT_TO_URL,payload:{url:"profiler.formal-standard",params:{callingFromPosition:"SIDEBAR",layoutStyle:"standard",stateId:"PROFILE__STUDENT_INFO",blockerId:"VARID_SIDEBAR"}}}):o.submitCallback&&o.submitCallback(),x("confirm",o)},dlNumber:o.data.driversLicense,onVerificationFailed:()=>{p(!1)}},"DialogScreenDlNumber1")]});case"newFeatureCard":return jsxRuntimeExports.jsx(NewFeatureCard,{cardData:o.cardData,mountState:l,onDismiss:()=>{x("dismiss",o)},submitFinalCallBack:()=>{t(hideModal(E)),o.submitFinalCallBack&&o.submitFinalCallBack()},submitCallback:()=>{t(hideModal(E)),o.submitCallback&&o.submitCallback()},secondaryCallback:()=>{t(hideModal(E)),o.secondaryCallback&&o.secondaryCallback()}});case"confirm.flke.purchase":return jsxRuntimeExports.jsx(Modal,{title:"A Quick Reminder!",subtitle:"You must be older than 14 1/2, younger than 18, and have a valid social security number to take the Florida Knowledge Exam online. Do you meet these criteria?",onDismiss:()=>{x("dismiss",o)},mountState:l,primaryButton:{text:"Yes, Let's Purchase",callback:()=>{o.submitCallback&&o.submitCallback(),t(hideModal(0))}},secondaryButton:{text:"No, Please Cancel",callback:()=>{t(redirectToUrl("dash.index")),t(hideModal(0))}}});case"review.viewStar":return jsxRuntimeExports.jsx(StarRatingDialog,{message:o.message,title:o.title,onDismiss:()=>{x("dismiss",o)},mountState:l,primaryButton:{label:o.buttonText||"Continue",callback:()=>{x("confirm",o)}}});case"review.viewNps":return jsxRuntimeExports.jsx(NPSDialog,{onDismiss:()=>{x("dismiss",o)},mountState:l});case"expiration.reminder":return jsxRuntimeExports.jsx(ExpirationReminder,{onDismiss:()=>{x("dismiss",o)},data:o.data,message:o.message,title:o.title,buttonText:o.buttonText});case"testReview":return jsxRuntimeExports.jsx(Modal,{onDismiss:()=>{x("dismiss",o)},subtitle:o.message,title:o.title,hideCloseIcon:o.hideCloseIcon,primaryButton:{text:"Continue",callback:()=>{o.submitCallback&&o.submitCallback(),t(hideModal(0))}},secondaryButton:{text:"Go Back and Review",callback:()=>{x("dismiss",o)}}});case"startTest":return jsxRuntimeExports.jsx(Modal,{onDismiss:()=>{x("dismiss",o)},subtitle:o.message,title:o.title,primaryButton:{text:o.buttonText||"Start Test",callback:()=>(o.submitCallback&&o.submitCallback(),t(hideModal(0)))},secondaryButton:{text:o.secondaryButtonText||"Go Back and Review",callback:()=>t(hideModal(0))}});case"test.timeUp":return jsxRuntimeExports.jsx(Modal,{onDismiss:()=>{o.submitCallback&&o.submitCallback(),t(hideModal(0))},primaryButton:{text:o.buttonText||"See Results",callback:()=>{o.submitCallback&&o.submitCallback(),t(hideModal(0))}},subtitle:`The time allowed for this test is up. Your test will be graded and any unanswered questions will be marked as
        incorrect.`,title:"Pencils Down",hideCloseIcon:!0});case"ad.full":return jsxRuntimeExports.jsx(AdModal,{data:o.data,onDismiss:()=>{x("dismiss",o)}});case"ad.partial":return jsxRuntimeExports.jsx(AdModalPartial,{data:o.data,onDismiss:()=>{x("dismiss",o)}});case"parent.unlink":return jsxRuntimeExports.jsx(Modal,{onDismiss:()=>{x("dismiss",o)},title:o.title,subtitle:o.message,hideCloseIcon:!0,primaryButton:{text:o.buttonText,callback:()=>{o.submitCallback&&o.submitCallback(),t(hideModal(0))}},secondaryButton:{text:o.secondaryButtonText,callback:()=>{x("dismiss",o)}}});case"parent.link":return jsxRuntimeExports.jsx(ParentLink,{data:o.data,onDismiss:()=>{x("dismiss",o)}});case"info.confirmation":return jsxRuntimeExports.jsx(InfoConfirmationModal,{data:o.data,onDismiss:()=>{x("dismiss",o)},onConfirm:()=>{o.submitCallback&&o.submitCallback(),t(hideModal(0))}});case"survey.viewEmbed":return jsxRuntimeExports.jsx(CourseSurvey,{onDismiss:()=>{x("dismiss",o)},embedId:o.embedId,linkUrl:o.linkUrl});case"ai.va":return jsxRuntimeExports.jsx(VirtualAssistantChat,{isQuizResult:!1,mountState:l,onDismiss:()=>{x("dismiss",o)}});case"instructor.quiz":return jsxRuntimeExports.jsx(VirtualAssistantChat,{isQuizResult:!0,quizData:o.data?{explanation:o.data.explanation,answer:o.data.answer,question:o.data.question}:void 0,mountState:l,onDismiss:()=>{x("dismiss",o)}});case"tutor.contact":return jsxRuntimeExports.jsx(TutorContactForm,{mountState:l,title:o.title,tutorEmail:o.tutorEmail,onDismiss:()=>{x("dismiss",o)},onConfirm:()=>{t(hideModal(E))}});default:return jsxRuntimeExports.jsx(GenericModal,{message:o.message,isMessageCustomHtml:o.isMessageCustomHtml,title:o.title,allowOutsideClick:o.allowOutsideClick,onDismiss:()=>{x("dismiss",o)},mountState:l,hideCloseIcon:o.hideCloseIcon,isInformationModal:o.isInformational,primaryButtonLeftIcon:o.primaryButtonLeftIcon,primaryButton:{label:o.buttonText||"Continue",callback:()=>{o.submitCallback&&o.submitCallback(),x("confirm",o)}},secondaryButton:o.secondaryDispatch||o.secondaryCallback?{variant:o.secondaryButtonVariant??"text",color:o.secondaryButtonColor,label:o.secondaryButtonText||"Cancel",callback:()=>{o.secondaryCallback&&o.secondaryCallback(),x("secondary",o)}}:void 0})}})()}):null};var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var t=requireReact();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function l(p,m){var g=m(),E=s({inst:{value:g,getSnapshot:m}}),x=E[0].inst,b=E[1];return a(function(){x.value=g,x.getSnapshot=m,u(x)&&b({inst:x})},[p,g,m]),i(function(){return u(x)&&b({inst:x}),p(function(){u(x)&&b({inst:x})})},[p]),o(g),g}function u(p){var m=p.getSnapshot;p=p.value;try{var g=m();return!n(p,g)}catch{return!0}}function c(p,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return useSyncExternalStoreShim_production.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var t=requireReact(),e=requireShim();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var s=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(c,d,p,m,g){var E=a(null);if(E.current===null){var x={hasValue:!1,value:null};E.current=x}else x=E.current;E=l(function(){function S(P){if(!C){if(C=!0,T=P,P=m(P),g!==void 0&&x.hasValue){var O=x.value;if(g(O,P))return I=O}return I=P}if(O=I,s(T,P))return O;var B=m(P);return g!==void 0&&g(O,B)?(T=P,O):(T=P,I=B)}var C=!1,T,I,D=p===void 0?null:p;return[function(){return S(d())},D===null?void 0:function(){return S(D())}]},[d,p,m,g]);var b=i(c,E[0],E[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),u(b),b},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},__assign$1.apply(this,arguments)};function __rest$1(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function __values(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function __spreadArray(t,e,n){if(arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}var ActionTypes;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(ActionTypes||(ActionTypes={}));var SpecialTargets;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(SpecialTargets||(SpecialTargets={}));var start$1=ActionTypes.Start,stop$1=ActionTypes.Stop,raise$1=ActionTypes.Raise,send$1=ActionTypes.Send,cancel$1=ActionTypes.Cancel,nullEvent=ActionTypes.NullEvent,assign$2=ActionTypes.Assign;ActionTypes.After;ActionTypes.DoneState;var log$2=ActionTypes.Log,init=ActionTypes.Init,invoke=ActionTypes.Invoke;ActionTypes.ErrorExecution;var errorPlatform=ActionTypes.ErrorPlatform,error$1=ActionTypes.ErrorCustom,update=ActionTypes.Update,choose=ActionTypes.Choose,pure=ActionTypes.Pure,STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY="",_a;function matchesState(t,e,n){n===void 0&&(n=STATE_DELIMITER);var s=toStateValue(t,n),i=toStateValue(e,n);return isString$1(i)?isString$1(s)?i===s:!1:isString$1(s)?s in i:Object.keys(s).every(function(a){return a in i?matchesState(s[a],i[a]):!1})}function getEventType(t){try{return isString$1(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(t,e){try{return isArray$1(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function isStateLike(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function toStateValue(t,e){if(isStateLike(t))return t.value;if(isArray$1(t))return pathToStateValue(t);if(typeof t!="string")return t;var n=toStatePath(t,e);return pathToStateValue(n)}function pathToStateValue(t){if(t.length===1)return t[0];for(var e={},n=e,s=0;s<t.length-1;s++)s===t.length-2?n[t[s]]=t[s+1]:(n[t[s]]={},n=n[t[s]]);return e}function mapValues(t,e){for(var n={},s=Object.keys(t),i=0;i<s.length;i++){var a=s[i];n[a]=e(t[a],a,t,i)}return n}function mapFilterValues(t,e,n){var s,i,a={};try{for(var o=__values(Object.keys(t)),l=o.next();!l.done;l=o.next()){var u=l.value,c=t[u];n(c)&&(a[u]=e(c,u,t))}}catch(d){s={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return a}var path=function(t){return function(e){var n,s,i=e;try{for(var a=__values(t),o=a.next();!o.done;o=a.next()){var l=o.value;i=i[l]}}catch(u){n={error:u}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return i}};function nestedPath(t,e){return function(n){var s,i,a=n;try{for(var o=__values(t),l=o.next();!l.done;l=o.next()){var u=l.value;a=a[e][u]}}catch(c){s={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return a}}function toStatePaths(t){if(!t)return[[]];if(isString$1(t))return[[t]];var e=flatten$1(Object.keys(t).map(function(n){var s=t[n];return typeof s!="string"&&(!s||!Object.keys(s).length)?[[n]]:toStatePaths(t[n]).map(function(i){return[n].concat(i)})}));return e}function flatten$1(t){var e;return(e=[]).concat.apply(e,__spreadArray([],__read$1(t),!1))}function toArrayStrict(t){return isArray$1(t)?t:[t]}function toArray$1(t){return t===void 0?[]:toArrayStrict(t)}function mapContext(t,e,n){var s,i;if(isFunction$2(t))return t(e,n.data);var a={};try{for(var o=__values(Object.keys(t)),l=o.next();!l.done;l=o.next()){var u=l.value,c=t[u];isFunction$2(c)?a[u]=c(e,n.data):a[u]=c}}catch(d){s={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return a}function isBuiltInEvent(t){return/^(done|error)\./.test(t)}function isPromiseLike(t){return!!(t instanceof Promise||t!==null&&(isFunction$2(t)||typeof t=="object")&&isFunction$2(t.then))}function isBehavior(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function partition(t,e){var n,s,i=__read$1([[],[]],2),a=i[0],o=i[1];try{for(var l=__values(t),u=l.next();!u.done;u=l.next()){var c=u.value;e(c)?a.push(c):o.push(c)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return[a,o]}function updateHistoryStates(t,e){return mapValues(t.states,function(n,s){if(n){var i=(isString$1(e)?void 0:e[s])||(n?n.current:void 0);if(i)return{current:i,states:updateHistoryStates(n,i)}}})}function updateHistoryValue(t,e){return{current:e,states:updateHistoryStates(t,e)}}function updateContext(t,e,n,s){var i=t&&n.reduce(function(a,o){var l,u,c=o.assignment,d={state:s,action:o,_event:e},p={};if(isFunction$2(c))p=c(a,e.data,d);else try{for(var m=__values(Object.keys(c)),g=m.next();!g.done;g=m.next()){var E=g.value,x=c[E];p[E]=isFunction$2(x)?x(a,e.data,d):x}}catch(b){l={error:b}}finally{try{g&&!g.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}return Object.assign({},a,p)},t);return i}var warn$1=function(){};function isArray$1(t){return Array.isArray(t)}function isFunction$2(t){return typeof t=="function"}function isString$1(t){return typeof t=="string"}function toGuard(t,e){if(t)return isString$1(t)?{type:DEFAULT_GUARD_TYPE,name:t,predicate:e?e[t]:void 0}:isFunction$2(t)?{type:DEFAULT_GUARD_TYPE,name:t.name,predicate:t}:t}function isObservable(t){try{return"subscribe"in t&&isFunction$2(t.subscribe)}catch{return!1}}var symbolObservable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();_a={},_a[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this};function isMachine(t){return!!t&&"__xstatenode"in t}function isActor$1(t){return!!t&&typeof t.send=="function"}function toEventObject(t,e){return isString$1(t)||typeof t=="number"?__assign$1({type:t},e):t}function toSCXMLEvent(t,e){if(!isString$1(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=toEventObject(t);return __assign$1({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function toTransitionConfigArray(t,e){var n=toArrayStrict(e).map(function(s){return typeof s>"u"||typeof s=="string"||isMachine(s)?{target:s,event:t}:__assign$1(__assign$1({},s),{event:t})});return n}function normalizeTarget(t){if(!(t===void 0||t===TARGETLESS_KEY))return toArray$1(t)}function evaluateGuard(t,e,n,s,i){var a=t.options.guards,o={state:i,cond:e,_event:s};if(e.type===DEFAULT_GUARD_TYPE)return(a?.[e.name]||e.predicate)(n,s.data,o);var l=a?.[e.type];if(!l)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return l(n,s.data,o)}function toInvokeSource$1(t){return typeof t=="string"?{type:t}:t}function toObserver(t,e,n){var s=function(){},i=typeof t=="object",a=i?t:null;return{next:((i?t.next:t)||s).bind(a),error:((i?t.error:e)||s).bind(a),complete:((i?t.complete:n)||s).bind(a)}}function createInvokeId(t,e){return"".concat(t,":invocation[").concat(e,"]")}function isRaisableAction(t){return(t.type===raise$1||t.type===send$1&&t.to===SpecialTargets.Internal)&&typeof t.delay!="number"}var initEvent=toSCXMLEvent({type:init});function getActionFunction(t,e){return e&&e[t]||void 0}function toActionObject(t,e){var n;if(isString$1(t)||typeof t=="number"){var s=getActionFunction(t,e);isFunction$2(s)?n={type:t,exec:s}:s?n=s:n={type:t,exec:void 0}}else if(isFunction$2(t))n={type:t.name||t.toString(),exec:t};else{var s=getActionFunction(t.type,e);if(isFunction$2(s))n=__assign$1(__assign$1({},t),{exec:s});else if(s){var i=s.type||t.type;n=__assign$1(__assign$1(__assign$1({},s),t),{type:i})}else n=t}return n}var toActionObjects=function(t,e){if(!t)return[];var n=isArray$1(t)?t:[t];return n.map(function(s){return toActionObject(s,e)})};function toActivityDefinition(t){var e=toActionObject(t);return __assign$1(__assign$1({id:isString$1(t)?t:e.id},e),{type:e.type})}function raise(t,e){return{type:raise$1,event:typeof t=="function"?t:toEventObject(t),delay:e?e.delay:void 0,id:e?.id}}function resolveRaise(t,e,n,s){var i={_event:n},a=toSCXMLEvent(isFunction$2(t.event)?t.event(e,n.data,i):t.event),o;if(isString$1(t.delay)){var l=s&&s[t.delay];o=isFunction$2(l)?l(e,n.data,i):l}else o=isFunction$2(t.delay)?t.delay(e,n.data,i):t.delay;return __assign$1(__assign$1({},t),{type:raise$1,_event:a,delay:o})}function send(t,e){return{to:e?e.to:void 0,type:send$1,event:isFunction$2(t)?t:toEventObject(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:isFunction$2(t)?t.name:getEventType(t)}}function resolveSend(t,e,n,s){var i={_event:n},a=toSCXMLEvent(isFunction$2(t.event)?t.event(e,n.data,i):t.event),o;if(isString$1(t.delay)){var l=s&&s[t.delay];o=isFunction$2(l)?l(e,n.data,i):l}else o=isFunction$2(t.delay)?t.delay(e,n.data,i):t.delay;var u=isFunction$2(t.to)?t.to(e,n.data,i):t.to;return __assign$1(__assign$1({},t),{to:u,_event:a,event:a.data,delay:o})}function sendParent$1(t,e){return send(t,__assign$1(__assign$1({},e),{to:SpecialTargets.Parent}))}var resolveLog=function(t,e,n){return __assign$1(__assign$1({},t),{value:isString$1(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},cancel=function(t){return{type:cancel$1,sendId:t}};function start(t){var e=toActivityDefinition(t);return{type:ActionTypes.Start,activity:e,exec:void 0}}function stop(t){var e=isFunction$2(t)?t:toActivityDefinition(t);return{type:ActionTypes.Stop,activity:e,exec:void 0}}function resolveStop(t,e,n){var s=isFunction$2(t.activity)?t.activity(e,n.data):t.activity,i=typeof s=="string"?{id:s}:s,a={type:ActionTypes.Stop,activity:i};return a}var assign$1=function(t){return{type:assign$2,assignment:t}};function after(t,e){var n=e?"#".concat(e):"";return"".concat(ActionTypes.After,"(").concat(t,")").concat(n)}function done(t,e){var n="".concat(ActionTypes.DoneState,".").concat(t),s={type:n,data:e};return s.toString=function(){return n},s}function doneInvoke(t,e){var n="".concat(ActionTypes.DoneInvoke,".").concat(t),s={type:n,data:e};return s.toString=function(){return n},s}function error(t,e){var n="".concat(ActionTypes.ErrorPlatform,".").concat(t),s={type:n,data:e};return s.toString=function(){return n},s}var pluckAssigns=function(t){var e,n,s=[];try{for(var i=__values(t),a=i.next();!a.done;a=i.next())for(var o=a.value,l=0;l<o.actions.length;){if(o.actions[l].type===assign$2){s.push(o.actions[l]),o.actions.splice(l,1);continue}l++}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return s};function resolveActions(t,e,n,s,i,a,o){o===void 0&&(o=!1);var l=o?[]:pluckAssigns(i),u=l.length?updateContext(n,s,l,e):n,c=o?[n]:void 0,d=[];function p(E,x){var b;switch(x.type){case raise$1:{var S=resolveRaise(x,u,s,t.options.delays);return a&&typeof S.delay=="number"&&a(S,u,s),S}case send$1:var C=resolveSend(x,u,s,t.options.delays);return a&&C.to!==SpecialTargets.Internal&&(E==="entry"?d.push(C):a(C,u,s)),C;case log$2:{var T=resolveLog(x,u,s);return a?.(T,u,s),T}case choose:{var I=x,D=(b=I.conds.find(function(G){var K=toGuard(G.cond,t.options.guards);return!K||evaluateGuard(t,K,u,s,a?void 0:e)}))===null||b===void 0?void 0:b.actions;if(!D)return[];var P=__read$1(resolveActions(t,e,u,s,[{type:E,actions:toActionObjects(toArray$1(D),t.options.actions)}],a,o),2),O=P[0],B=P[1];return u=B,c?.push(u),O}case pure:{var D=x.get(u,s.data);if(!D)return[];var F=__read$1(resolveActions(t,e,u,s,[{type:E,actions:toActionObjects(toArray$1(D),t.options.actions)}],a,o),2),H=F[0],Q=F[1];return u=Q,c?.push(u),H}case stop$1:{var T=resolveStop(x,u,s);return a?.(T,n,s),T}case assign$2:{u=updateContext(u,s,[x],a?void 0:e),c?.push(u);break}default:var Z=toActionObject(x,t.options.actions),ne=Z.exec;if(a)a(Z,u,s);else if(ne&&c){var re=c.length-1,se=__assign$1(__assign$1({},Z),{exec:function(G){for(var K=[],M=1;M<arguments.length;M++)K[M-1]=arguments[M];ne.apply(void 0,__spreadArray([c[re]],__read$1(K),!1))}});Z=se}return Z}}function m(E){var x,b,S=[];try{for(var C=__values(E.actions),T=C.next();!T.done;T=C.next()){var I=T.value,D=p(E.type,I);D&&(S=S.concat(D))}}catch(P){x={error:P}}finally{try{T&&!T.done&&(b=C.return)&&b.call(C)}finally{if(x)throw x.error}}return d.forEach(function(P){a(P,u,s)}),d.length=0,S}var g=flatten$1(i.map(m));return[g,u]}var provide=function(t,e){var n=e(t);return n};function createNullActor(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[symbolObservable]=function(){return this},e}function createInvocableActor(t,e,n,s){var i,a=toInvokeSource$1(t.src),o=(i=e?.options.services)===null||i===void 0?void 0:i[a.type],l=t.data?mapContext(t.data,n,s):void 0,u=o?createDeferredActor(o,t.id,l):createNullActor(t.id);return u.meta=t,u}function createDeferredActor(t,e,n){var s=createNullActor(e);if(s.deferred=!0,isMachine(t)){var i=s.state=provide(void 0,function(){return(n?t.withContext(n):t).initialState});s.getSnapshot=function(){return i}}return s}function isActor(t){try{return typeof t.send=="function"}catch{return!1}}function isSpawnedActor(t){return isActor(t)&&"id"in t}function toActorRef(t){var e;return __assign$1((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[symbolObservable]=function(){return this},e),t)}var isLeafNode=function(t){return t.type==="atomic"||t.type==="final"};function getAllChildren(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function getChildren(t){return getAllChildren(t).filter(function(e){return e.type!=="history"})}function getAllStateNodes(t){var e=[t];return isLeafNode(t)?e:e.concat(flatten$1(getChildren(t).map(getAllStateNodes)))}function getConfiguration(t,e){var n,s,i,a,o,l,u,c,d=new Set(t),p=getAdjList(d),m=new Set(e);try{for(var g=__values(m),E=g.next();!E.done;E=g.next())for(var x=E.value,b=x.parent;b&&!m.has(b);)m.add(b),b=b.parent}catch(F){n={error:F}}finally{try{E&&!E.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}var S=getAdjList(m);try{for(var C=__values(m),T=C.next();!T.done;T=C.next()){var x=T.value;if(x.type==="compound"&&(!S.get(x)||!S.get(x).length))p.get(x)?p.get(x).forEach(function(H){return m.add(H)}):x.initialStateNodes.forEach(function(H){return m.add(H)});else if(x.type==="parallel")try{for(var I=(o=void 0,__values(getChildren(x))),D=I.next();!D.done;D=I.next()){var P=D.value;m.has(P)||(m.add(P),p.get(P)?p.get(P).forEach(function(H){return m.add(H)}):P.initialStateNodes.forEach(function(H){return m.add(H)}))}}catch(H){o={error:H}}finally{try{D&&!D.done&&(l=I.return)&&l.call(I)}finally{if(o)throw o.error}}}}catch(F){i={error:F}}finally{try{T&&!T.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}try{for(var O=__values(m),B=O.next();!B.done;B=O.next())for(var x=B.value,b=x.parent;b&&!m.has(b);)m.add(b),b=b.parent}catch(F){u={error:F}}finally{try{B&&!B.done&&(c=O.return)&&c.call(O)}finally{if(u)throw u.error}}return m}function getValueFromAdj(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var s=n[0];if(s){if(isLeafNode(s))return s.key}else return{}}var i={};return n.forEach(function(a){i[a.key]=getValueFromAdj(a,e)}),i}function getAdjList(t){var e,n,s=new Map;try{for(var i=__values(t),a=i.next();!a.done;a=i.next()){var o=a.value;s.has(o)||s.set(o,[]),o.parent&&(s.has(o.parent)||s.set(o.parent,[]),s.get(o.parent).push(o))}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return s}function getValue(t,e){var n=getConfiguration([t],e);return getValueFromAdj(t,getAdjList(n))}function has(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function nextEvents(t){return __spreadArray([],__read$1(new Set(flatten$1(__spreadArray([],__read$1(t.map(function(e){return e.ownEvents})),!1)))),!1)}function isInFinalState(t,e){return e.type==="compound"?getChildren(e).some(function(n){return n.type==="final"&&has(t,n)}):e.type==="parallel"?getChildren(e).every(function(n){return isInFinalState(t,n)}):!1}function getMeta(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function getTagsFromConfiguration(t){return new Set(flatten$1(t.map(function(e){return e.tags})))}function stateValuesEqual(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(isString$1(t)||isString$1(e))return t===e;var n=Object.keys(t),s=Object.keys(e);return n.length===s.length&&n.every(function(i){return stateValuesEqual(t[i],e[i])})}function isStateConfig(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function bindActionToState(t,e){var n=t.exec,s=__assign$1(__assign$1({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return s}var State=function(){function t(e){var n=this,s;this.actions=[],this.activities=EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||EMPTY_ACTIVITY_MAP,this.meta=getMeta(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(s=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&s!==void 0?s:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return nextEvents(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var s=initEvent;return new t({value:e,context:n,_event:s,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var s=initEvent;return new t({value:e.value,context:n,_event:s,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var s=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),isString$1(e))return[e];var i=Object.keys(e);return i.concat.apply(i,__spreadArray([],__read$1(i.map(function(a){return s.toStrings(e[a],n).map(function(o){return a+n+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var s=__rest$1(e,["configuration","transitions","tags","machine"]);return __assign$1(__assign$1({},s),{tags:Array.from(n)})},t.prototype.matches=function(e){return matchesState(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;warn$1(!!this.machine);var s=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!s?.transitions.length&&s.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),defaultOptions$2={deferEvents:!1},Scheduler=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=__assign$1(__assign$1({},defaultOptions$2),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t}(),children=new Map,sessionIdIndex=0,registry={bookId:function(){return"x:".concat(sessionIdIndex++)},register:function(t,e){return children.set(t,e),t},get:function(t){return children.get(t)},free:function(t){children.delete(t)}};function getGlobal(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function getDevTools(){var t=getGlobal();if(t&&"__xstate__"in t)return t.__xstate__}function registerService(t){if(getGlobal()){var e=getDevTools();e&&e.register(t)}}function spawnBehavior(t,e){e===void 0&&(e={});var n=t.initialState,s=new Set,i=[],a=!1,o=function(){if(!a){for(a=!0;i.length>0;){var c=i.shift();n=t.transition(n,c,u),s.forEach(function(d){return d.next(n)})}a=!1}},l=toActorRef({id:e.id,send:function(c){i.push(c),o()},getSnapshot:function(){return n},subscribe:function(c,d,p){var m=toObserver(c,d,p);return s.add(m),m.next(n),{unsubscribe:function(){s.delete(m)}}}}),u={parent:e.parent,self:l,id:e.id||"anonymous",observers:s};return n=t.start?t.start(u):n,l}var DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1},InterpreterStatus;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var s=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(d,p){if(isArray$1(d))return s.batch(d),s.state;var m=toSCXMLEvent(toEventObject(d,p));if(s.status===InterpreterStatus.Stopped)return s.state;if(s.status!==InterpreterStatus.Running&&!s.options.deferEvents)throw new Error('Event "'.concat(m.name,'" was sent to uninitialized service "').concat(s.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(m.data)));return s.scheduler.schedule(function(){s.forward(m);var g=s._nextState(m);s.update(g,m)}),s._state},this.sendTo=function(d,p,m){var g=s.parent&&(p===SpecialTargets.Parent||s.parent.id===p),E=g?s.parent:isString$1(p)?p===SpecialTargets.Internal?s:s.children.get(p)||registry.get(p):isActor$1(p)?p:void 0;if(!E){if(!g)throw new Error("Unable to send event to child '".concat(p,"' from service '").concat(s.id,"'."));return}if("machine"in E){if(s.status!==InterpreterStatus.Stopped||s.parent!==E||s.state.done){var x=__assign$1(__assign$1({},d),{name:d.name===error$1?"".concat(error(s.id)):d.name,origin:s.sessionId});!m&&s.machine.config.predictableActionArguments?s._outgoingQueue.push([E,x]):E.send(x)}}else!m&&s.machine.config.predictableActionArguments?s._outgoingQueue.push([E,d.data]):E.send(d.data)},this._exec=function(d,p,m,g){g===void 0&&(g=s.machine.options.actions);var E=d.exec||getActionFunction(d.type,g),x=isFunction$2(E)?E:E?E.exec:d.exec;if(x)try{return x(p,m.data,s.machine.config.predictableActionArguments?{action:d,_event:m}:{action:d,state:s.state,_event:m})}catch(re){throw s.parent&&s.parent.send({type:"xstate.error",data:re}),re}switch(d.type){case raise$1:{var b=d;s.defer(b);break}case send$1:var S=d;if(typeof S.delay=="number"){s.defer(S);return}else S.to?s.sendTo(S._event,S.to,m===initEvent):s.send(S._event);break;case cancel$1:s.cancel(d.sendId);break;case start$1:{if(s.status!==InterpreterStatus.Running)return;var C=d.activity;if(!s.machine.config.predictableActionArguments&&!s.state.activities[C.id||C.type])break;if(C.type===ActionTypes.Invoke){var T=toInvokeSource$1(C.src),I=s.machine.options.services?s.machine.options.services[T.type]:void 0,D=C.id,P=C.data,O="autoForward"in C?C.autoForward:!!C.forward;if(!I)return;var B=P?mapContext(P,p,m):void 0;if(typeof I=="string")return;var F=isFunction$2(I)?I(p,m.data,{data:B,src:T,meta:C.meta}):I;if(!F)return;var H=void 0;isMachine(F)&&(F=B?F.withContext(B):F,H={autoForward:O}),s.spawn(F,D,H)}else s.spawnActivity(C);break}case stop$1:{s.stopChild(d.activity.id);break}case log$2:var Q=d,Z=Q.label,ne=Q.value;Z?s.logger(Z,ne):s.logger(ne);break}};var i=__assign$1(__assign$1({},t.defaultOptions),n),a=i.clock,o=i.logger,l=i.parent,u=i.id,c=u!==void 0?u:e.id;this.id=c,this.logger=o,this.clock=a,this.parent=l,this.options=i,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:provide(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var s,i;try{for(var a=__values(e.actions),o=a.next();!o.done;o=a.next()){var l=o.value;this.exec(l,e,n)}}catch(u){s={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}},t.prototype.update=function(e,n){var s,i,a,o,l,u,c,d,p=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===initEvent)&&this.options.execute)this.execute(this.state);else for(var m=void 0;m=this._outgoingQueue.shift();)m[0].send(m[1]);if(this.children.forEach(function(F){p.state.children[F.id]=F}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var g=__values(this.eventListeners),E=g.next();!E.done;E=g.next()){var x=E.value;x(e.event)}}catch(F){s={error:F}}finally{try{E&&!E.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}try{for(var b=__values(this.listeners),S=b.next();!S.done;S=b.next()){var x=S.value;x(e,e.event)}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}try{for(var C=__values(this.contextListeners),T=C.next();!T.done;T=C.next()){var I=T.value;I(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(F){l={error:F}}finally{try{T&&!T.done&&(u=C.return)&&u.call(C)}finally{if(l)throw l.error}}if(this.state.done){var D=e.configuration.find(function(F){return F.type==="final"&&F.parent===p.machine}),P=D&&D.doneData?mapContext(D.doneData,e.context,n):void 0;this._doneEvent=doneInvoke(this.id,P);try{for(var O=__values(this.doneListeners),B=O.next();!B.done;B=O.next()){var x=B.value;x(this._doneEvent)}}catch(F){c={error:F}}finally{try{B&&!B.done&&(d=O.return)&&d.call(O)}finally{if(c)throw c.error}}this._stop(),this._stopChildren(),registry.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===InterpreterStatus.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,s){var i=this,a=toObserver(e,n,s);this.listeners.add(a.next),this.status!==InterpreterStatus.NotStarted&&a.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),a.complete()};return this.status===InterpreterStatus.Stopped?a.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(a.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===InterpreterStatus.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===InterpreterStatus.Running)return this;this.machine._init(),registry.register(this.sessionId,this),this.initialized=!0,this.status=InterpreterStatus.Running;var s=e===void 0?this.initialState:provide(this,function(){return isStateConfig(e)?n.machine.resolveState(e):n.machine.resolveState(State.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(s,initEvent)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){isFunction$2(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,s,i,a,o,l,u,c,d;try{for(var p=__values(this.listeners),m=p.next();!m.done;m=p.next()){var g=m.value;this.listeners.delete(g)}}catch(O){e={error:O}}finally{try{m&&!m.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}try{for(var E=__values(this.stopListeners),x=E.next();!x.done;x=E.next()){var g=x.value;g(),this.stopListeners.delete(g)}}catch(O){s={error:O}}finally{try{x&&!x.done&&(i=E.return)&&i.call(E)}finally{if(s)throw s.error}}try{for(var b=__values(this.contextListeners),S=b.next();!S.done;S=b.next()){var g=S.value;this.contextListeners.delete(g)}}catch(O){a={error:O}}finally{try{S&&!S.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}try{for(var C=__values(this.doneListeners),T=C.next();!T.done;T=C.next()){var g=T.value;this.doneListeners.delete(g)}}catch(O){l={error:O}}finally{try{T&&!T.done&&(u=C.return)&&u.call(C)}finally{if(l)throw l.error}}if(!this.initialized)return this;this.initialized=!1,this.status=InterpreterStatus.Stopped,this._initialState=void 0;try{for(var I=__values(Object.keys(this.delayedEventsMap)),D=I.next();!D.done;D=I.next()){var P=D.value;this.clock.clearTimeout(this.delayedEventsMap[P])}}catch(O){c={error:O}}finally{try{D&&!D.done&&(d=I.return)&&d.call(I)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var s;if(!(!((s=e._state)===null||s===void 0)&&s.done)){var i=toSCXMLEvent({type:"xstate.stop"}),a=provide(e,function(){var o=flatten$1(__spreadArray([],__read$1(e.state.configuration),!1).sort(function(p,m){return m.order-p.order}).map(function(p){return toActionObjects(p.onExit,e.machine.options.actions)})),l=__read$1(resolveActions(e.machine,e.state,e.state.context,i,[{type:"exit",actions:o}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),u=l[0],c=l[1],d=new State({value:e.state.value,context:c,_event:i,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:u.filter(function(p){return!isRaisableAction(p)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return d.changed=!0,d});e.update(a,i),e._stopChildren(),registry.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===InterpreterStatus.NotStarted&&this.options.deferEvents)){if(this.status!==InterpreterStatus.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var s=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,a,o=n.state,l=!1,u=[],c=function(g){var E=toSCXMLEvent(g);n.forward(E),o=provide(n,function(){return n.machine.transition(o,E,void 0,s||void 0)}),u.push.apply(u,__spreadArray([],__read$1(n.machine.config.predictableActionArguments?o.actions:o.actions.map(function(x){return bindActionToState(x,o)})),!1)),l=l||!!o.changed};try{for(var d=__values(e),p=d.next();!p.done;p=d.next()){var m=p.value;c(m)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}o.changed=l,o.actions=u,n.update(o,toSCXMLEvent(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var s=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var i=toSCXMLEvent(e);if(i.name.indexOf(errorPlatform)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(errorPlatform)===0}))throw i.data.data;var a=provide(this,function(){return s.machine.transition(s.state,i,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,s;try{for(var i=__values(this.forwardTo),a=i.next();!a.done;a=i.next()){var o=a.value,l=this.children.get(o);if(!l)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));l.send(e)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,s=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=s)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,s){s===void 0&&(s=this.machine.options.actions),this._exec(e,n.context,n._event,s)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),isFunction$2(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,s){if(this.status!==InterpreterStatus.Running)return createDeferredActor(e,n);if(isPromiseLike(e))return this.spawnPromise(Promise.resolve(e),n);if(isFunction$2(e))return this.spawnCallback(e,n);if(isSpawnedActor(e))return this.spawnActor(e,n);if(isObservable(e))return this.spawnObservable(e,n);if(isMachine(e))return this.spawnMachine(e,__assign$1(__assign$1({},s),{id:n}));if(isBehavior(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var s=this;n===void 0&&(n={});var i=new t(e,__assign$1(__assign$1({},this.options),{parent:this,id:n.id||e.id})),a=__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),n);a.sync&&i.onTransition(function(l){s.send(update,{state:l,id:i.id})});var o=i;return this.children.set(i.id,o),a.autoForward&&this.forwardTo.add(i.id),i.onDone(function(l){s.removeChild(i.id),s.send(toSCXMLEvent(l,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,n){var s=spawnBehavior(e,{id:n,parent:this});return this.children.set(n,s),s},t.prototype.spawnPromise=function(e,n){var s,i=this,a=!1,o;e.then(function(u){a||(o=u,i.removeChild(n),i.send(toSCXMLEvent(doneInvoke(n,u),{origin:n})))},function(u){if(!a){i.removeChild(n);var c=error(n,u);try{i.send(toSCXMLEvent(c,{origin:n}))}catch{i.devTools&&i.devTools.send(c,i.state),i.machine.strict&&i.stop()}}});var l=(s={id:n,send:function(){},subscribe:function(u,c,d){var p=toObserver(u,c,d),m=!1;return e.then(function(g){m||(p.next(g),!m&&p.complete())},function(g){m||p.error(g)}),{unsubscribe:function(){return m=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return o}},s[symbolObservable]=function(){return this},s);return this.children.set(n,l),l},t.prototype.spawnCallback=function(e,n){var s,i=this,a=!1,o=new Set,l=new Set,u,c=function(m){u=m,l.forEach(function(g){return g(m)}),!a&&i.send(toSCXMLEvent(m,{origin:n}))},d;try{d=e(c,function(m){o.add(m)})}catch(m){this.send(error(n,m))}if(isPromiseLike(d))return this.spawnPromise(d,n);var p=(s={id:n,send:function(m){return o.forEach(function(g){return g(m)})},subscribe:function(m){var g=toObserver(m);return l.add(g.next),{unsubscribe:function(){l.delete(g.next)}}},stop:function(){a=!0,isFunction$2(d)&&d()},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},s[symbolObservable]=function(){return this},s);return this.children.set(n,p),p},t.prototype.spawnObservable=function(e,n){var s,i=this,a,o=e.subscribe(function(u){a=u,i.send(toSCXMLEvent(u,{origin:n}))},function(u){i.removeChild(n),i.send(toSCXMLEvent(error(n,u),{origin:n}))},function(){i.removeChild(n),i.send(toSCXMLEvent(doneInvoke(n),{origin:n}))}),l=(s={id:n,send:function(){},subscribe:function(u,c,d){return e.subscribe(u,c,d)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},s[symbolObservable]=function(){return this},s);return this.children.set(n,l),l},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var s=n(this.state.context,e);this.spawnEffect(e.id,s)}},t.prototype.spawnEffect=function(e,n){var s;this.children.set(e,(s={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},s[symbolObservable]=function(){return this},s))},t.prototype.attachDev=function(){var e=getGlobal();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign$1(__assign$1({name:this.id,autoPause:!0,stateSanitizer:function(s){return{value:s.value,context:s.context,actions:s.actions}}},n),{features:__assign$1({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[symbolObservable]=function(){return this},t.prototype.getSnapshot=function(){return this.status===InterpreterStatus.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=interpret,t}();function interpret(t,e){var n=new Interpreter(t,e);return n}function toInvokeSource(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function toInvokeDefinition(t){return __assign$1(__assign$1({type:invoke},t),{toJSON:function(){t.onDone,t.onError;var e=__rest$1(t,["onDone","onError"]);return __assign$1(__assign$1({},e),{type:invoke,src:toInvokeSource(t.src)})}})}var NULL_EVENT="",STATE_IDENTIFIER="#",WILDCARD="*",EMPTY_OBJECT={},isStateId=function(t){return t[0]===STATE_IDENTIFIER},createDefaultOptions=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},StateNode=function(){function t(e,n,s,i){s===void 0&&(s="context"in e?e.context:void 0);var a=this,o;this.config=e,this._context=s,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(createDefaultOptions(),n),this.parent=i?.parent,this.key=this.config.key||i?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:STATE_DELIMITER),this.id=this.config.id||__spreadArray([this.machine.key],__read$1(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?mapValues(this.config.states,function(c,d){var p,m=new t(c,{},void 0,{parent:a,key:d});return Object.assign(a.idMap,__assign$1((p={},p[m.id]=m,p),m.idMap)),m}):EMPTY_OBJECT;var l=0;function u(c){var d,p;c.order=l++;try{for(var m=__values(getAllChildren(c)),g=m.next();!g.done;g=m.next()){var E=g.value;u(E)}}catch(x){d={error:x}}finally{try{g&&!g.done&&(p=m.return)&&p.call(m)}finally{if(d)throw d.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(c){var d=c.event;return d===NULL_EVENT}):NULL_EVENT in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=toArray$1(this.config.entry||this.config.onEntry).map(function(c){return toActionObject(c)}),this.onExit=toArray$1(this.config.exit||this.config.onExit).map(function(c){return toActionObject(c)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=toArray$1(this.config.invoke).map(function(c,d){var p,m;if(isMachine(c)){var g=createInvokeId(a.id,d);return a.machine.options.services=__assign$1((p={},p[g]=c,p),a.machine.options.services),toInvokeDefinition({src:g,id:g})}else if(isString$1(c.src)){var g=c.id||createInvokeId(a.id,d);return toInvokeDefinition(__assign$1(__assign$1({},c),{id:g,src:c.src}))}else if(isMachine(c.src)||isFunction$2(c.src)){var g=c.id||createInvokeId(a.id,d);return a.machine.options.services=__assign$1((m={},m[g]=c.src,m),a.machine.options.services),toInvokeDefinition(__assign$1(__assign$1({id:g},c),{src:g}))}else{var E=c.src;return toInvokeDefinition(__assign$1(__assign$1({id:createInvokeId(a.id,d)},c),{src:E}))}}),this.activities=toArray$1(this.config.activities).concat(this.invoke).map(function(c){return toActivityDefinition(c)}),this.transition=this.transition.bind(this),this.tags=toArray$1(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||getAllStateNodes(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var s=this.options,i=s.actions,a=s.activities,o=s.guards,l=s.services,u=s.delays;return new t(this.config,{actions:__assign$1(__assign$1({},i),e.actions),activities:__assign$1(__assign$1({},a),e.activities),guards:__assign$1(__assign$1({},o),e.guards),services:__assign$1(__assign$1({},l),e.services),delays:__assign$1(__assign$1({},u),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return isFunction$2(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:mapValues(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,s){return n[s.eventType]=n[s.eventType]||[],n[s.eventType].push(s),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===NULL_EVENT,s=this.transitions.filter(function(i){var a=i.eventType===e;return n?a:a||i.eventType===WILDCARD});return this.__cache.candidates[e]=s,s},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var s=function(a,o){var l=isFunction$2(a)?"".concat(e.id,":delay[").concat(o,"]"):a,u=after(l,e.id);return e.onEntry.push(send(u,{delay:a})),e.onExit.push(cancel(u)),u},i=isArray$1(n)?n.map(function(a,o){var l=s(a.delay,o);return __assign$1(__assign$1({},a),{event:l})}):flatten$1(Object.keys(n).map(function(a,o){var l=n[a],u=isString$1(l)?{target:l}:l,c=isNaN(+a)?a:+a,d=s(c,o);return toArray$1(u).map(function(p){return __assign$1(__assign$1({},p),{event:d,delay:c})})}));return i.map(function(a){var o=a.delay;return __assign$1(__assign$1({},e.formatTransition(a)),{delay:o})})},t.prototype.getStateNodes=function(e){var n,s=this;if(!e)return[];var i=e instanceof State?e.value:toStateValue(e,this.delimiter);if(isString$1(i)){var a=this.getStateNode(i).initial;return a!==void 0?this.getStateNodes((n={},n[i]=a,n)):[this,this.states[i]]}var o=Object.keys(i),l=[this];return l.push.apply(l,__spreadArray([],__read$1(flatten$1(o.map(function(u){return s.getStateNode(u).getStateNodes(i[u])}))),!1)),l},t.prototype.handles=function(e){var n=getEventType(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof State?e:State.create(e),s=Array.from(getConfiguration([],this.getStateNodes(n.value)));return new State(__assign$1(__assign$1({},n),{value:this.resolve(n.value),configuration:s,done:isInFinalState(s,this),tags:getTagsFromConfiguration(s),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,s){var i=this.getStateNode(e),a=i.next(n,s);return!a||!a.transitions.length?this.next(n,s):a},t.prototype.transitionCompoundNode=function(e,n,s){var i=Object.keys(e),a=this.getStateNode(i[0]),o=a._transition(e[i[0]],n,s);return!o||!o.transitions.length?this.next(n,s):o},t.prototype.transitionParallelNode=function(e,n,s){var i,a,o={};try{for(var l=__values(Object.keys(e)),u=l.next();!u.done;u=l.next()){var c=u.value,d=e[c];if(d){var p=this.getStateNode(c),m=p._transition(d,n,s);m&&(o[c]=m)}}}catch(S){i={error:S}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}var g=Object.keys(o).map(function(S){return o[S]}),E=flatten$1(g.map(function(S){return S.transitions})),x=g.some(function(S){return S.transitions.length>0});if(!x)return this.next(n,s);var b=flatten$1(Object.keys(o).map(function(S){return o[S].configuration}));return{transitions:E,exitSet:flatten$1(g.map(function(S){return S.exitSet})),configuration:b,source:n,actions:flatten$1(Object.keys(o).map(function(S){return o[S].actions}))}},t.prototype._transition=function(e,n,s){return isString$1(e)?this.transitionLeafNode(e,n,s):Object.keys(e).length===1?this.transitionCompoundNode(e,n,s):this.transitionParallelNode(e,n,s)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,toSCXMLEvent(n))},t.prototype.next=function(e,n){var s,i,a=this,o=n.name,l=[],u=[],c;try{for(var d=__values(this.getCandidates(o)),p=d.next();!p.done;p=d.next()){var m=p.value,g=m.cond,E=m.in,x=e.context,b=E?isString$1(E)&&isStateId(E)?e.matches(toStateValue(this.getStateNodeById(E).path,this.delimiter)):matchesState(toStateValue(E,this.delimiter),path(this.path.slice(0,-2))(e.value)):!0,S=!1;try{S=!g||evaluateGuard(this.machine,g,x,n,e)}catch(I){throw new Error("Unable to evaluate guard '".concat(g.name||g.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(I.message))}if(S&&b){m.target!==void 0&&(u=m.target),l.push.apply(l,__spreadArray([],__read$1(m.actions),!1)),c=m;break}}}catch(I){s={error:I}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}if(c){if(!u.length)return{transitions:[c],exitSet:[],configuration:e.value?[this]:[],source:e,actions:l};var C=flatten$1(u.map(function(I){return a.getRelativeStateNodes(I,e.historyValue)})),T=!!c.internal;return{transitions:[c],exitSet:T?[]:flatten$1(u.map(function(I){return a.getPotentiallyReenteringNodes(I)})),configuration:C,source:e,actions:l}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],s=this,i=e;s&&s!==i;)n.push(s),s=s.parent;return s!==i?[]:(n.push(i),n)},t.prototype.getActions=function(e,n,s,i,a,o,l){var u,c,d,p,m=this,g=o?getConfiguration([],this.getStateNodes(o.value)):[],E=new Set;try{for(var x=__values(Array.from(e).sort(function(Q,Z){return Q.order-Z.order})),b=x.next();!b.done;b=x.next()){var S=b.value;(!has(g,S)||has(s.exitSet,S)||S.parent&&E.has(S.parent))&&E.add(S)}}catch(Q){u={error:Q}}finally{try{b&&!b.done&&(c=x.return)&&c.call(x)}finally{if(u)throw u.error}}try{for(var C=__values(g),T=C.next();!T.done;T=C.next()){var S=T.value;(!has(e,S)||has(s.exitSet,S.parent))&&s.exitSet.push(S)}}catch(Q){d={error:Q}}finally{try{T&&!T.done&&(p=C.return)&&p.call(C)}finally{if(d)throw d.error}}s.exitSet.sort(function(Q,Z){return Z.order-Q.order});var I=Array.from(E).sort(function(Q,Z){return Q.order-Z.order}),D=new Set(s.exitSet),P=flatten$1(I.map(function(Q){var Z=[];if(Q.type!=="final")return Z;var ne=Q.parent;if(!ne.parent)return Z;Z.push(done(Q.id,Q.doneData),done(ne.id,Q.doneData?mapContext(Q.doneData,i,a):void 0));var re=ne.parent;return re.type==="parallel"&&getChildren(re).every(function(se){return isInFinalState(s.configuration,se)})&&Z.push(done(re.id)),Z})),O=I.map(function(Q){var Z=Q.onEntry,ne=Q.activities.map(function(re){return start(re)});return{type:"entry",actions:toActionObjects(l?__spreadArray(__spreadArray([],__read$1(Z),!1),__read$1(ne),!1):__spreadArray(__spreadArray([],__read$1(ne),!1),__read$1(Z),!1),m.machine.options.actions)}}).concat({type:"state_done",actions:P.map(function(Q){return raise(Q)})}),B=Array.from(D).map(function(Q){return{type:"exit",actions:toActionObjects(__spreadArray(__spreadArray([],__read$1(Q.onExit),!1),__read$1(Q.activities.map(function(Z){return stop(Z)})),!1),m.machine.options.actions)}}),F=B.concat({type:"transition",actions:toActionObjects(s.actions,this.machine.options.actions)}).concat(O);if(n){var H=toActionObjects(flatten$1(__spreadArray([],__read$1(e),!1).sort(function(Q,Z){return Z.order-Q.order}).map(function(Q){return Q.onExit})),this.machine.options.actions).filter(function(Q){return!isRaisableAction(Q)});return F.concat({type:"stop",actions:H})}return F},t.prototype.transition=function(e,n,s,i){e===void 0&&(e=this.initialState);var a=toSCXMLEvent(n),o;if(e instanceof State)o=s===void 0?e:this.resolveState(State.from(e,s));else{var l=isString$1(e)?this.resolve(pathToStateValue(this.getResolvedPath(e))):this.resolve(e),u=s??this.machine.context;o=this.resolveState(State.from(l,u))}if(this.strict&&!this.events.includes(a.name)&&!isBuiltInEvent(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var c=this._transition(o.value,o,a)||{transitions:[],configuration:[],exitSet:[],source:o,actions:[]},d=getConfiguration([],this.getStateNodes(o.value)),p=c.configuration.length?getConfiguration(d,c.configuration):d;return c.configuration=__spreadArray([],__read$1(p),!1),this.resolveTransition(c,o,o.context,i,a)},t.prototype.resolveRaisedTransition=function(e,n,s,i){var a,o=e.actions;return e=this.transition(e,n,void 0,i),e._event=s,e.event=s.data,(a=e.actions).unshift.apply(a,__spreadArray([],__read$1(o),!1)),e},t.prototype.resolveTransition=function(e,n,s,i,a){var o,l,u,c,d=this;a===void 0&&(a=initEvent);var p=e.configuration,m=!n||e.transitions.length>0,g=m?e.configuration:n?n.configuration:[],E=isInFinalState(g,this),x=m?getValue(this.machine,p):void 0,b=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,S=this.getActions(new Set(g),E,e,s,a,n,i),C=n?__assign$1({},n.activities):{};try{for(var T=__values(S),I=T.next();!I.done;I=T.next()){var D=I.value;try{for(var P=(u=void 0,__values(D.actions)),O=P.next();!O.done;O=P.next()){var B=O.value;B.type===start$1?C[B.activity.id||B.activity.type]=B:B.type===stop$1&&(C[B.activity.id||B.activity.type]=!1)}}catch(he){u={error:he}}finally{try{O&&!O.done&&(c=P.return)&&c.call(P)}finally{if(u)throw u.error}}}}catch(he){o={error:he}}finally{try{I&&!I.done&&(l=T.return)&&l.call(T)}finally{if(o)throw o.error}}var F=__read$1(resolveActions(this,n,s,a,S,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),H=F[0],Q=F[1],Z=__read$1(partition(H,isRaisableAction),2),ne=Z[0],re=Z[1],se=H.filter(function(he){var fe;return he.type===start$1&&((fe=he.activity)===null||fe===void 0?void 0:fe.type)===invoke}),G=se.reduce(function(he,fe){return he[fe.activity.id]=createInvocableActor(fe.activity,d.machine,Q,a),he},n?__assign$1({},n.children):{}),K=new State({value:x||n.value,context:Q,_event:a,_sessionid:n?n._sessionid:null,historyValue:x?b?updateHistoryValue(b,x):void 0:n?n.historyValue:void 0,history:!x||e.source?n:void 0,actions:x?re:[],activities:x?C:n?n.activities:{},events:[],configuration:g,transitions:e.transitions,children:G,done:E,tags:getTagsFromConfiguration(g),machine:this}),M=s!==Q;K.changed=a.name===update||M;var W=K.history;W&&delete W.history;var ee=!E&&(this._transient||p.some(function(he){return he._transient}));if(!m&&(!ee||a.name===NULL_EVENT))return K;var z=K;if(!E)for(ee&&(z=this.resolveRaisedTransition(z,{type:nullEvent},a,i));ne.length;){var ae=ne.shift();z=this.resolveRaisedTransition(z,ae._event,a,i)}var ce=z.changed||(W?!!z.actions.length||M||typeof W.value!=typeof z.value||!stateValuesEqual(z.value,W.value):void 0);return z.changed=ce,z.history=W,z},t.prototype.getStateNode=function(e){if(isStateId(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=isStateId(e)?e.slice(STATE_IDENTIFIER.length):e;if(n===this.id)return this;var s=this.machine.idMap[n];if(!s)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return s},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&isStateId(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=toStatePath(e,this.delimiter).slice(),s=this;n.length;){var i=n.shift();if(!i.length)break;s=s.getStateNode(i)}return s},t.prototype.resolve=function(e){var n,s=this;if(!e)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return mapValues(this.initialStateValue,function(a,o){return a?s.getStateNode(o).resolve(e[o]||a):EMPTY_OBJECT});case"compound":if(isString$1(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(n={},n[e]=i.initialStateValue,n):e}return Object.keys(e).length?mapValues(e,function(a,o){return a?s.getStateNode(o).resolve(a):EMPTY_OBJECT}):this.initialStateValue||{};default:return e||EMPTY_OBJECT}},t.prototype.getResolvedPath=function(e){if(isStateId(e)){var n=this.machine.idMap[e.slice(STATE_IDENTIFIER.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return toStatePath(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=mapFilterValues(this.states,function(s){return s.initialStateValue||EMPTY_OBJECT},function(s){return s.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=isLeafNode(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var s=this.getStateNodes(e);return this.resolveTransition({configuration:s,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;isString$1(n.target)?e=isStateId(n.target)?pathToStateValue(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,s){return s===void 0&&(s=!0),s?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=toStatePaths(this.initialStateValue);return flatten$1(n.map(function(s){return e.getFromRelativePath(s)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=__read$1(e),s=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(s,"' from node with no states"));var a=this.getStateNode(s);if(a.type==="history")return a.resolveHistory();if(!this.states[s])throw new Error("Child state '".concat(s,"' does not exist on '").concat(this.id,"'"));return this.states[s].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:mapFilterValues(this.states,function(n,s){if(!e)return n.historyValue();var i=isString$1(e)?void 0:e[s];return n.historyValue(i||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var s=this.parent;if(!e){var i=this.target;return i?flatten$1(toStatePaths(i).map(function(o){return s.getFromRelativePath(o)})):s.initialStateNodes}var a=nestedPath(s.path,"states")(e).current;return isString$1(a)?[s.getStateNode(a)]:flatten$1(toStatePaths(a).map(function(o){return n.history==="deep"?s.getFromRelativePath(o):[s.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=flatten$1(Object.keys(this.states).map(function(s){return e.states[s].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,s,i;if(this.__cache.events)return this.__cache.events;var a=this.states,o=new Set(this.ownEvents);if(a)try{for(var l=__values(Object.keys(a)),u=l.next();!u.done;u=l.next()){var c=u.value,d=a[c];if(d.states)try{for(var p=(s=void 0,__values(d.events)),m=p.next();!m.done;m=p.next()){var g=m.value;o.add("".concat(g))}}catch(E){s={error:E}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}}}catch(E){e={error:E}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(s){if(!isString$1(s))return s;var i=s[0]===n.delimiter;if(i&&!n.parent)return n.getStateNodeByPath(s.slice(1));var a=i?n.key+s:s;if(n.parent)try{var o=n.parent.getStateNodeByPath(a);return o}catch(l){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(l.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,s=normalizeTarget(e.target),i="internal"in e?e.internal:s?s.some(function(u){return isString$1(u)&&u[0]===n.delimiter}):!0,a=this.machine.options.guards,o=this.resolveTarget(s),l=__assign$1(__assign$1({},e),{actions:toActionObjects(toArray$1(e.actions)),cond:toGuard(e.cond,a),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return __assign$1(__assign$1({},l),{target:l.target?l.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(n.id)})}});return l},t.prototype.formatTransitions=function(){var e,n,s=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var a=this.config.on,o=WILDCARD,l=a[o],u=l===void 0?[]:l,c=__rest$1(a,[typeof o=="symbol"?o:o+""]);i=flatten$1(Object.keys(c).map(function(C){var T=toTransitionConfigArray(C,c[C]);return T}).concat(toTransitionConfigArray(WILDCARD,u)))}var d=this.config.always?toTransitionConfigArray("",this.config.always):[],p=this.config.onDone?toTransitionConfigArray(String(done(this.id)),this.config.onDone):[],m=flatten$1(this.invoke.map(function(C){var T=[];return C.onDone&&T.push.apply(T,__spreadArray([],__read$1(toTransitionConfigArray(String(doneInvoke(C.id)),C.onDone)),!1)),C.onError&&T.push.apply(T,__spreadArray([],__read$1(toTransitionConfigArray(String(error(C.id)),C.onError)),!1)),T})),g=this.after,E=flatten$1(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],__read$1(p),!1),__read$1(m),!1),__read$1(i),!1),__read$1(d),!1).map(function(C){return toArray$1(C).map(function(T){return s.formatTransition(T)})}));try{for(var x=__values(g),b=x.next();!b.done;b=x.next()){var S=b.value;E.push(S)}}catch(C){e={error:C}}finally{try{b&&!b.done&&(n=x.return)&&n.call(x)}finally{if(e)throw e.error}}return E},t}();function Machine(t,e,n){return n===void 0&&(n=t.context),new StateNode(t,e,n)}function createMachine(t,e){return new StateNode(t,e)}var assign=assign$1,sendParent=sendParent$1,index$1=reactExports.useLayoutEffect;function useConstant(t){var e=reactExports.useRef();return e.current||(e.current={v:t()}),e.current.v}var __assign=function(){return __assign=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},__assign.apply(this,arguments)},__rest=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};function useIdleInterpreter(t,e){var n=useConstant(function(){return typeof t=="function"?t():t}),s=e.context,i=e.guards,a=e.actions,o=e.activities,l=e.services,u=e.delays;e.state;var c=__rest(e,["context","guards","actions","activities","services","delays","state"]),d=useConstant(function(){var p={context:s,guards:i,actions:a,activities:o,services:l,delays:u},m=n.withConfig(p,function(){return __assign(__assign({},n.context),s)});return interpret(m,c)});return index$1(function(){Object.assign(d.machine.options.actions,a),Object.assign(d.machine.options.guards,i),Object.assign(d.machine.options.activities,o),Object.assign(d.machine.options.services,l),Object.assign(d.machine.options.delays,u)},[a,i,o,l,u]),d}function isInterpreterStateEqual(t,e,n){if(t.status===InterpreterStatus.NotStarted)return!0;var s=n.changed===void 0&&(Object.keys(n.children).length>0||typeof e.changed=="boolean");return!(n.changed||s)}var __read=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a};function identity(t){return t}function useMachine(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var s=__read(e,1),i=s[0],a=i===void 0?{}:i,o=useIdleInterpreter(t,a),l=reactExports.useCallback(function(){return o.status===InterpreterStatus.NotStarted?a.state?State.create(a.state):o.machine.initialState:o.getSnapshot()},[o]),u=reactExports.useCallback(function(p,m){return isInterpreterStateEqual(o,p,m)},[o]),c=reactExports.useCallback(function(p){var m=o.subscribe(p).unsubscribe;return m},[o]),d=withSelectorExports.useSyncExternalStoreWithSelector(c,l,l,identity,u);return reactExports.useEffect(function(){var p=a.state;return o.start(p?State.create(p):void 0),function(){o.stop(),o.status=InterpreterStatus.NotStarted}},[]),[d,o.send,o]}const AnimatedButton=({affirmed:t,children:e,"data-test":n,disabled:s=!1,onClick:i,stretch:a=!1,affirmativeLabel:o="Added",isSubmit:l=!1,type:u="solid",ariaLabel:c="Animated Button"})=>{const d=()=>{const p=[];return t&&p.push("affirmed"),a&&p.push("stretch"),p.join(" ")};return jsxRuntimeExports.jsxs("button",{"data-test":n,onClick:i,disabled:s,type:l?"submit":"button",className:`grit animated-button ${u} ${d()}`,"aria-label":c,children:[t?jsxRuntimeExports.jsx("i",{className:"icon gritIcon--checkmark-xs",children:jsxRuntimeExports.jsx("span",{children:o})}):null,jsxRuntimeExports.jsx("span",{className:"controls__button-label",children:e})]})},timerMachine=Machine({id:"timer",initial:"running",context:{elapsed:0,duration:60,interval:1},states:{running:{invoke:{src:t=>e=>{const n=setInterval(()=>{e("TICK")},1e3*t.interval);return()=>{clearInterval(n)}}},always:{target:"timeout",cond:t=>t.duration!==0&&t.elapsed>=t.duration},on:{TICK:{actions:[assign({elapsed:t=>t.elapsed+t.interval}),sendParent(t=>({type:"TIMER_TICK",payload:{elapsed:t.elapsed}}))]}}},timeout:{type:"final"}},on:{RESET:{actions:assign({elapsed:0})}}}),machineEvents={RETRY_SEND_SMS:()=>({type:"RETRY_SEND_SMS"}),CONFIRM_RECEIVED_CODE:()=>({type:"CONFIRM_RECEIVED_CODE"}),CONTINUE_BIOMETRICS:()=>({type:"CONTINUE_BIOMETRICS"}),GRADE_ANSWER:t=>({type:"GRADE_ANSWER",payload:{answerId:t}}),TIMEOUT:()=>({type:"GRADE_ANSWER",payload:{answerId:"TIMEOUT"}}),LOAD:(t,e,n,s)=>({type:"LOAD_VERIFICATION",payload:{progressId:t,modeType:e,pseudoId:n,questionId:s,elapsed:0}})},getVerificationType=(t,e)=>t==="PSMS"&&e==="SMS"?"isSms":t==="BIOM"?"isBiom":t==="BIOSIG"?"isBioSig":"isProfile",hasNoQuestion=t=>!t.verification?.question;function isVerified(t){return t.verification?.isVerified}const isProfile=t=>getVerificationType(t.verification?.verifyType,t.verification?.questionType)==="isProfile",isSms=t=>getVerificationType(t.verification?.verifyType,t.verification?.questionType)==="isSms";function isBiom(t){return getVerificationType(t.verification?.verifyType,t.verification?.questionType)==="isBiom"}function isBioSig(t){return getVerificationType(t.verification?.verifyType,t.verification?.questionType)==="isBioSig"}function isPenalized(t){return t.verification?.penaltySummary?.isPenalized}const hasProgressUpdate=t=>!isEmpty(t.verification?.upProgress),machineStatesEnum={IDLE:"idle",EXIT:"exitVerification",SEND_SMS:"sendSmsCode",SEND_SMS_FAILURE:"sendSmsCodeRequestFailure",SEND_SMS_SUCCESS:"sendSmsCodeRequestSuccess",ENTER_SMS_CODE:"enterSmsCode",MULTICHOICE:"multichoiceQuestion",SHOW_QUESTION:"showMultichoiceQuestion",SUBMITTING_ANSWER:"submittingAnswer",SUBMIT_ANSWER_SUCCESS:"submitAnswerSuccess",SUBMIT_ANSWER_FAILURE:"submitAnswerFailure",LOADING_VERIFICATION:"loading",LOAD_VERIFICATION_SUCCESS:"loadVerificationSuccess",LOAD_VERIFICATION_FAILURE:"loadVerificationFailure",SENDING_LOAD_REQUEST:"loadRequest",SHOW_RESULTS:"showResults",SMS:"smsQuestion",GRADING_ANSWER:"gradingAnswer",BIOMETRICS:"biometrics",INFO_BIOMETRICS:"infoBiometrics",TYPING_VERIFICATION:"typing",BIOSIG:"biosig",BIOSIG_VERIFICATION:"biosigVerification"},initialContext={verification:null,error:null,userEntry:"",progressId:"",modeType:"",pseudoId:"",questionId:"",smsPhoneNumber:"",elapsedSeconds:0,verificationUrl:""},verificationMachine=createMachine({id:"verification",initial:"idle",context:initialContext,states:{[machineStatesEnum.IDLE]:{on:{LOAD_VERIFICATION:machineStatesEnum.LOADING_VERIFICATION}},[machineStatesEnum.LOADING_VERIFICATION]:{initial:machineStatesEnum.SENDING_LOAD_REQUEST,states:{[machineStatesEnum.SENDING_LOAD_REQUEST]:{invoke:{id:"getVerification",src:"loadVerification",onDone:{target:machineStatesEnum.LOAD_VERIFICATION_SUCCESS,actions:assign({verification:(t,e)=>e.data})},onError:{target:machineStatesEnum.LOAD_VERIFICATION_FAILURE,actions:assign({error:(t,e)=>e.data})}},entry:[assign((t,e)=>({progressId:e.payload.progressId,modeType:e.payload.modeType,pseudoId:e.payload.pseudoId,questionId:e.payload.questionId}))]},[machineStatesEnum.LOAD_VERIFICATION_SUCCESS]:{always:[{target:`#verification.${machineStatesEnum.EXIT}`,cond:t=>!!hasNoQuestion(t)},{target:`#verification.${machineStatesEnum.MULTICHOICE}`,cond:t=>!!isProfile(t)},{target:`#verification.${machineStatesEnum.SMS}`,cond:t=>!!isSms(t)},{target:`#verification.${machineStatesEnum.BIOMETRICS}`,cond:t=>!!isBiom(t)},{target:`#verification.${machineStatesEnum.BIOSIG}`,cond:t=>!!isBioSig(t)}]},[machineStatesEnum.LOAD_VERIFICATION_FAILURE]:{always:{target:`#verification.${machineStatesEnum.EXIT}`}}}},[machineStatesEnum.MULTICHOICE]:{initial:machineStatesEnum.SHOW_QUESTION,states:{[machineStatesEnum.SHOW_QUESTION]:{invoke:{id:"enterMultichoiceTimer",src:"runTimer",onDone:`#verification.${machineStatesEnum.GRADING_ANSWER}`,data:{duration:t=>t.verification?.timeoutSeconds,elapsed:0,interval:1}},on:{GRADE_ANSWER:`#verification.${machineStatesEnum.GRADING_ANSWER}`,TIMER_TICK:{actions:assign({elapsedSeconds:(t,e)=>e.payload.elapsed})}}}}},[machineStatesEnum.SMS]:{initial:machineStatesEnum.SEND_SMS,states:{[machineStatesEnum.SEND_SMS]:{invoke:{id:"sendSmsCodeRequest",src:"sendSmsRequest",onDone:{target:machineStatesEnum.SEND_SMS_SUCCESS},onError:{target:machineStatesEnum.SEND_SMS_FAILURE}},entry:["showLoadingSpinner"],exit:["hideLoadingSpinner"]},[machineStatesEnum.SEND_SMS_FAILURE]:{on:{RETRY_SEND_SMS:machineStatesEnum.SEND_SMS}},[machineStatesEnum.SEND_SMS_SUCCESS]:{on:{RETRY_SEND_SMS:machineStatesEnum.SEND_SMS,CONFIRM_RECEIVED_CODE:machineStatesEnum.ENTER_SMS_CODE}},[machineStatesEnum.ENTER_SMS_CODE]:{invoke:{id:"enterSmsTimer",src:"runTimer",onDone:`#verification.${machineStatesEnum.GRADING_ANSWER}`,data:{duration:t=>t.verification?.timeoutSeconds,elapsed:0,interval:1}},on:{GRADE_ANSWER:`#verification.${machineStatesEnum.GRADING_ANSWER}`,TIMER_TICK:{actions:assign({elapsedSeconds:(t,e)=>e.payload.elapsed})}}}}},[machineStatesEnum.BIOMETRICS]:{initial:machineStatesEnum.INFO_BIOMETRICS,states:{[machineStatesEnum.INFO_BIOMETRICS]:{on:{CONTINUE_BIOMETRICS:machineStatesEnum.TYPING_VERIFICATION}},[machineStatesEnum.TYPING_VERIFICATION]:{invoke:{id:"enterBIOMVerification",src:"runTimer",onDone:`#verification.${machineStatesEnum.GRADING_ANSWER}`,data:{duration:t=>t.verification?.timeoutSeconds,elapsed:0,interval:1}},on:{GRADE_ANSWER:`#verification.${machineStatesEnum.GRADING_ANSWER}`,TIMER_TICK:{actions:assign({elapsedSeconds:(t,e)=>e.payload.elapsed})}}}}},[machineStatesEnum.BIOSIG]:{initial:machineStatesEnum.BIOSIG_VERIFICATION,states:{[machineStatesEnum.BIOSIG_VERIFICATION]:{on:{GRADE_ANSWER:`#verification.${machineStatesEnum.GRADING_ANSWER}`}}}},[machineStatesEnum.GRADING_ANSWER]:{initial:machineStatesEnum.SUBMITTING_ANSWER,states:{[machineStatesEnum.SUBMITTING_ANSWER]:{invoke:{id:"submitAnswer",src:"sendGradeRequest",onDone:{target:machineStatesEnum.SUBMIT_ANSWER_SUCCESS,actions:assign({verification:(t,e)=>e.data})},onError:{target:machineStatesEnum.SUBMIT_ANSWER_FAILURE,actions:assign({error:(t,e)=>e.data})}},entry:["showLoadingSpinner"],exit:["hideLoadingSpinner"]},[machineStatesEnum.SUBMIT_ANSWER_SUCCESS]:{entry:[{type:"xstate.assign",assignment:{target:"updateProgress",cond:hasProgressUpdate}}],always:[{target:`#verification.${machineStatesEnum.EXIT}`,cond:t=>!!(isVerified(t)===!0&&isBiom(t)&&isPenalized(t)===!1)},{target:`#verification.${machineStatesEnum.SHOW_RESULTS}`,cond:t=>isVerified(t)===!0},{target:`#verification.${machineStatesEnum.SHOW_RESULTS}`,cond:t=>!!isPenalized(t)},{target:`#verification.${machineStatesEnum.MULTICHOICE}`,cond:t=>!!isProfile(t)},{target:`#verification.${machineStatesEnum.SMS}.${machineStatesEnum.ENTER_SMS_CODE}`,cond:t=>!!isSms(t)},{target:`#verification.${machineStatesEnum.BIOMETRICS}.${machineStatesEnum.INFO_BIOMETRICS}`,cond:t=>!!isBiom(t)}]},[machineStatesEnum.SUBMIT_ANSWER_FAILURE]:{on:{RETRY:machineStatesEnum.SUBMITTING_ANSWER}}}},[machineStatesEnum.SHOW_RESULTS]:{on:{EXIT:machineStatesEnum.EXIT}},[machineStatesEnum.EXIT]:{entry:["doPenalty","resetContext"],on:{LOAD_VERIFICATION:machineStatesEnum.LOADING_VERIFICATION}}}},{actions:{resetContext:()=>{assign({...initialContext})},doPenalty:t=>{t.verification?.penaltySummary?.isPenalized&&(t.verification.penaltySummary.isSignOut?store.dispatch(redirectToUrl("user.signout")):store.dispatch(redirectToUrl("dash.index",{},{reload:!0})))},showLoadingSpinner:()=>{store.dispatch({type:SET_IS_LOADING})},hideLoadingSpinner:()=>{store.dispatch({type:SET_IS_NOT_LOADING})},analyticsVerificationFailed:()=>{},updateProgress:t=>{store.dispatch({type:UPDATE_PROGRESS,payload:{progress:t.verification?.upProgress??null}})},updateElapsedTime:()=>{}},services:{runTimer:timerMachine,loadVerification:t=>progressVerifyUnified(t.progressId,t.modeType,t.pseudoId,t.questionId),sendSmsRequest:t=>sendSmsCode(null,t.verification?.verificationKey??"",t.verification?._id??""),sendGradeRequest:(t,e)=>{const n=t.verification?.verifyType==="BIOSIG"?"":e.payload?.answerId,s=t.verification?.isAbandoned;return progressVerifyGrade(t.verification?._id,t.progressId,n??(s?"ABANDONED":"TIMEOUT"))}}}),DialogScreen=({type:t,isCurrent:e,errorMessage:n,body:s,buttonList:i,title:a})=>jsxRuntimeExports.jsxs("div",{className:classNames("gritDialogScreen",`gritDialogScreen--${t}`,{"gritDialogScreen--current":e}),children:[n?jsxRuntimeExports.jsx(ErrorMessage,{errorMessage:n}):null,jsxRuntimeExports.jsx("h1",{"data-test":"header",className:"gritDialogScreen__heading headings__h1",children:a}),jsxRuntimeExports.jsx("p",{"data-test":"body",className:"gritDialogScreen__bodyText paragraph__regular",children:s}),i.length?jsxRuntimeExports.jsx("ul",{className:"gritDialogScreen__buttonList",children:i.map(o=>jsxRuntimeExports.jsx("li",{className:"gritDialogScreen__buttonListItem",children:o},`modal-button-${o.key}`))}):null]}),BioSigVerification=({iframeUrlSrc:t,updateCTAState:e})=>{const[n,s]=reactExports.useState(!0),[i,a]=reactExports.useState(!0),o=reactExports.useRef(!1);return reactExports.useEffect(()=>{const l=u=>{u.origin.includes("verifyexpress.com")&&(u.data==="Finish"&&(o.current=!o.current),o.current&&u.data==="Init"&&(a(!1),e(),document.fullscreenElement&&document.exitFullscreen().catch(c=>{console.error("Error attempting to exit full screen mode:",c)})))};return window.addEventListener("message",l),()=>{window.removeEventListener("message",l)}},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n&&jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}),jsxRuntimeExports.jsx("iframe",{width:"100%",height:"100%",style:{border:"none",display:i?"block":"none"},title:"biosign_cerification",allowFullScreen:!0,onLoad:()=>{s(!1)},src:t})]})},DialogScreenBioSig=({iframeUrlSrc:t,onClick:e})=>{const[n,s]=reactExports.useState(!1),i=()=>{s(a=>!a)};return jsxRuntimeExports.jsx("div",{className:"gritDialogScreen__verify-biosig",children:jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h1",{className:"gritDialogScreen__heading headings__h1",children:"BioSig Verification"}),jsxRuntimeExports.jsx("p",{"data-test":"body",className:"gritDialogScreen__bodyText paragraph__regular",children:"The state requires us to verify your identity as the course-taker. We accomplish this through biometric signature verification, which uses input from a finger, stylus, or mouse."}),jsxRuntimeExports.jsx(BioSigVerification,{iframeUrlSrc:t,updateCTAState:i}),n&&jsxRuntimeExports.jsx(Button$2,{"data-test":"continueButton",stretch:!0,onClick:()=>{e()},children:"Continue"},"dialogueScreenButton1")]})})};/**
 * TypingDNA - Typing Biometrics JavaScript API
 * https://www.typingdna.com/scripts/typingdna.js
 * https://api.typingdna.com/scripts/typingdna.js (alternative)
 *
 * GitHub repository
 * https://github.com/TypingDNA/TypingDnaRecorder-JavaScript
 *
 * @version 3.2
 * @author Raul Popa & Stefan Endres
 * @copyright TypingDNA Inc. https://www.typingdna.com
 * @license http://www.apache.org/licenses/LICENSE-2.0
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Typical usage:
 * var tdna = new TypingDNA(); // creates a new TypingDNA object and starts recording
 * var typingPattern = tdna.getTypingPattern({type:1, text:"Hello5g21?*"});
 * returns a type 1 typing pattern (and continues recording afterwards)
 *
 * Optional:
 * tdna.stop(); // ends recording and clears history stack (returns recording flag: false)
 * tdna.start(); // restarts the recording after a stop (returns recording flag: true)
 * tdna.reset(); // restarts the recording anytime, clears history stack and starts from scratch (returns nothing)
 * var typingPatternQuality = TypingDNA.getQuality(typingPattern); //returns the quality/strength of any typing pattern
 * (there is no need to initialize the class to do pattern quality checking)
 */function TypingDNA(){if(TypingDNA.initialized!==!0){TypingDNA.prototype.start=function(){return TypingDNA.start.apply(this,arguments)},TypingDNA.prototype.stop=function(){return TypingDNA.stop.apply(this,arguments)},TypingDNA.prototype.reset=function(){return TypingDNA.reset.apply(this,arguments)},TypingDNA.prototype.removeEventListeners=function(){return TypingDNA.removeEventListeners.apply(this,arguments)},TypingDNA.prototype.addTarget=function(){return TypingDNA.addTarget.apply(this,arguments)},TypingDNA.prototype.removeTarget=function(){return TypingDNA.removeTarget.apply(this,arguments)},TypingDNA.prototype.getTypingPattern=function(){return TypingDNA.getTypingPattern.apply(this,arguments)},TypingDNA.prototype.getMouseDiagram=function(){return TypingDNA.getMouseDiagram.apply(this,arguments)},TypingDNA.prototype.startMouse=function(){return TypingDNA.startMouse.apply(this,arguments)},TypingDNA.prototype.stopMouse=function(){return TypingDNA.stopMouse.apply(this,arguments)},TypingDNA.prototype.getQuality=function(){return TypingDNA.getQuality.apply(this,arguments)},TypingDNA.prototype.getLength=function(){return TypingDNA.getLength.apply(this,arguments)},TypingDNA.prototype.isMobile=function(){return TypingDNA.isMobile.apply(this,arguments)},TypingDNA.prototype.getTextId=function(){return TypingDNA.getTextId.apply(this,arguments)},TypingDNA.prototype.checkEnvironment=function(){return TypingDNA.checkEnvironment.apply(this,arguments)},TypingDNA.prototype.get=function(){return TypingDNA.get.apply(this,arguments)},TypingDNA.prototype.startDiagram=function(){},TypingDNA.prototype.stopDiagram=function(){},TypingDNA.prototype.getDiagram=function(){return TypingDNA.getDiagram.apply(this,arguments)},TypingDNA.prototype.getExtendedDiagram=function(){return TypingDNA.getExtendedDiagram.apply(this,arguments)},TypingDNA.initialized=!0,TypingDNA.prototype.maxHistoryLength=TypingDNA.maxHistoryLength,TypingDNA.prototype.defaultHistoryLength=TypingDNA.defaultHistoryLength,TypingDNA.prototype.maxSeekTime=TypingDNA.maxSeekTime,TypingDNA.prototype.maxPressTime=TypingDNA.maxPressTime,TypingDNA.version=3.2,TypingDNA.cookieId=0,TypingDNA.flags=0,TypingDNA.instance=this,TypingDNA.document=document,TypingDNA.ua=window.navigator.userAgent,TypingDNA.platform=window.navigator.platform,TypingDNA.maxHistoryLength=2e3,TypingDNA.maxSeekTime=1500,TypingDNA.maxPressTime=300,TypingDNA.defaultHistoryLength=160,TypingDNA.spKeyCodes=[8,13,32],TypingDNA.spKeyCodesObj={8:1,13:1,32:1},TypingDNA.keyCodes=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,32,222,188,190,186,187,189,191,48,49,50,51,52,53,54,55,56,57],TypingDNA.keyCodesObj={};for(var t=TypingDNA.keyCodes.length,e=0;e<t;e++)TypingDNA.keyCodesObj[TypingDNA.keyCodes[e]]=1;TypingDNA.pt1=TypingDNA.ut1=new Date().getTime(),TypingDNA.wfk=[],TypingDNA.sti=[],TypingDNA.skt=[],TypingDNA.recording=!0,TypingDNA.mouseRecording=!0,TypingDNA.mouseMoveRecording=!1,TypingDNA.spKeyRecording=!0,TypingDNA.diagramRecording=!0,TypingDNA.motionFixedData=!0,TypingDNA.motionArrayData=!0,TypingDNA.dwfk=[],TypingDNA.dsti=[],TypingDNA.dskt=[],TypingDNA.drkc=[],TypingDNA.dlastDownKey,TypingDNA.prevKeyCode=0,TypingDNA.maxMoveDeltaTime=600,TypingDNA.maxScrollDeltaTime=800,TypingDNA.maxStopTime=1500,TypingDNA.maxClickTime=600,TypingDNA.maxMouseHistoryLength=500,TypingDNA.lastMouseMoveTime=TypingDNA.lastMouseDownTime=new Date().getTime(),TypingDNA.stopTimes=[],TypingDNA.clickTimes=[],TypingDNA.lastMouseStop=!1,TypingDNA.zl=1e-7,TypingDNA.ACInputLengths={inputs:[],lastLength:[]},TypingDNA.targetIds=[],TypingDNA.lastTarget="",TypingDNA.lastTargetFound=!1,TypingDNA.replaceMissingKeys=!0,TypingDNA.replaceMissingKeysPerc=7,TypingDNA.pressCalculated=!1,TypingDNA.pressRecorded=!1,TypingDNA.checkEnvironment=function(){var n={browserType:"",isMobile:this.isMobile()===1,hasMotionSensors:!1,needsPermissionForMotionSensors:!1};return(window.chrome&&(window.chrome.webstore||window.chrome.runtime||window.chrome.loadTimes)||window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0)&&window.CSS?n.browserType="blink":window.opr&&window.opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?n.browserType="opera":typeof InstallTrigger<"u"?n.browserType="firefox":document.documentMode?n.browserType="internet explorer":!document.documentMode&&window.StyleMedia?n.browserType="edge":window.chrome&&(window.chrome.webstore||window.chrome.runtime||window.chrome.loadTimes)&&navigator.userAgent.indexOf("Edg")!=-1?n.browserType="edge chromium":window.chrome&&(window.chrome.webstore||window.chrome.runtime||window.chrome.loadTimes)?n.browserType="chrome":(/constructor/i.test(window.HTMLElement)||function(s){return s.toString()==="[object SafariRemoteNotification]"}(!window.safari||typeof safari<"u"&&safari.pushNotification)||navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1)&&(n.browserType="safari"),n.isMobile&&(n.hasMotionSensors=window.DeviceMotionEvent!==void 0,n.needsPermissionForMotionSensors=window.DeviceMotionEvent!==void 0&&typeof window.DeviceMotionEvent.requestPermission=="function"),n},TypingDNA.keyDown=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)&&TypingDNA.isTarget(n.target.id)){var s=n.keyCode;TypingDNA.wfk[s]===1||TypingDNA.dwfk[s];var i=TypingDNA.pt1;TypingDNA.pt1=new Date().getTime();var a=TypingDNA.pt1-i,o=TypingDNA.pt1;(TypingDNA.recording===!0||TypingDNA.spKeyCodesObj[s]&&TypingDNA.spKeyRecording===!0)&&(n.shiftKey||(TypingDNA.wfk[s]=1,TypingDNA.skt[s]=a,TypingDNA.sti[s]=o)),TypingDNA.diagramRecording===!0&&(TypingDNA.dwfk[s]=1,TypingDNA.dskt[s]=a,TypingDNA.dsti[s]=o,TypingDNA.dlastDownKey=s)}},TypingDNA.keyPress=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)&&TypingDNA.isTarget(n.target.id)&&TypingDNA.diagramRecording===!0){var s=TypingDNA.dlastDownKey;TypingDNA.drkc[s]=n.charCode}},TypingDNA.keyUp=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)&&TypingDNA.isTarget(n.target.id)){var s=new Date().getTime(),i=n.keyCode,a=0,o=0;if(TypingDNA.recording===!0||TypingDNA.spKeyCodesObj[i]&&TypingDNA.spKeyRecording===!0){if(!n.shiftKey&&TypingDNA.wfk[i]===1){a=s-TypingDNA.sti[i],o=TypingDNA.skt[i];var l=[i,o,a,TypingDNA.prevKeyCode,s,n.target.id];TypingDNA.history.add(l),TypingDNA.prevKeyCode=i}TypingDNA.wfk[i]=0}if(TypingDNA.diagramRecording===!0){if(TypingDNA.drkc[i]!==void 0&&TypingDNA.drkc[i]!==0&&TypingDNA.dwfk[i]===1){a=s-TypingDNA.dsti[i],o=TypingDNA.dskt[i];var u=TypingDNA.drkc[i],c=[i,o,a,u,s,n.target.id];TypingDNA.history.addDiagram(c)}TypingDNA.dwfk[i]=0}}},TypingDNA.MobileKeyDown=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)&&TypingDNA.isTarget(n.target.id)){var s=n.keyCode;TypingDNA.wfk[s]===1||TypingDNA.dwfk[s],TypingDNA.lastPressTime=new Date().getTime(),(TypingDNA.recording===!0||TypingDNA.spKeyCodesObj[s]&&TypingDNA.spKeyRecording===!0)&&(TypingDNA.wfk[s]=1),TypingDNA.diagramRecording===!0&&(TypingDNA.dwfk[s]=1,TypingDNA.dlastDownKey=s)}},TypingDNA.MobileKeyPress=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)&&TypingDNA.isTarget(n.target.id)&&TypingDNA.diagramRecording===!0){var s=TypingDNA.dlastDownKey;TypingDNA.drkc[s]=n.charCode}},TypingDNA.MobileKeyUp=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)&&TypingDNA.isTarget(n.target.id)){var s=TypingDNA.ut1;TypingDNA.ut1=new Date().getTime();var i=TypingDNA.ut1-s,a=TypingDNA.kpGetAll(),o=a[0]!==0?Math.round(TypingDNA.ut1-a[0]):0;isNaN(o)&&(o=0);var l=n.keyCode;if(TypingDNA.recording===!0||TypingDNA.spKeyCodesObj[l]&&TypingDNA.spKeyRecording===!0){if(TypingDNA.wfk[l]===1){var u=[l,i,o,TypingDNA.prevKeyCode,TypingDNA.ut1,n.target.id];TypingDNA.history.add(u),TypingDNA.prevKeyCode=l}TypingDNA.wfk[l]=0}if(TypingDNA.diagramRecording===!0){if(TypingDNA.drkc[l]!==void 0&&TypingDNA.drkc[l]!==0&&TypingDNA.dwfk[l]===1){var c=TypingDNA.drkc[l],d=[l,i,o,c,TypingDNA.ut1,n.target.id,a[1].join(","),a[2].join(","),a[3].join(","),a[4].join(",")];TypingDNA.history.addDiagram(d)}TypingDNA.dwfk[l]=0}}},TypingDNA.AndroidKeyDown=function(n){!TypingDNA.recording&&!TypingDNA.diagramRecording||TypingDNA.isTarget(n.target.id)&&(TypingDNA.lastPressTime=new Date().getTime(),TypingDNA.ACInputLengths.inputs.indexOf(n.target)===-1&&(TypingDNA.ACInputLengths.inputs.push(n.target),TypingDNA.ACInputLengths.lastLength.push(0)))},TypingDNA.AndroidKeyUp=function(n){if(!(!TypingDNA.recording&&!TypingDNA.diagramRecording)){var s=TypingDNA.ut1;if(TypingDNA.ut1=new Date().getTime(),!!TypingDNA.isTarget(n.target.id)){var i=TypingDNA.ut1-s,a=TypingDNA.kpGetAll(),o=a[0]!==0?Math.round(TypingDNA.ut1-a[0]):0;isNaN(o)&&(o=0);var l=n.keyCode,u=TypingDNA.ACInputLengths.inputs.indexOf(n.target);u===-1&&(TypingDNA.ACInputLengths.inputs.push(n.target),TypingDNA.ACInputLengths.lastLength.push(0),u=TypingDNA.ACInputLengths.inputs.indexOf(n.target));var c=0;if(n.target.value.length>=TypingDNA.ACInputLengths.lastLength[u]){var d=n.target.value.substr(n.target.selectionStart-1||0,1);l=d.toUpperCase().charCodeAt(0),c=d.charCodeAt(0)}TypingDNA.ACInputLengths.lastLength[u]=n.target.value.length;var p=[l,i,o,TypingDNA.prevKeyCode,TypingDNA.ut1,n.target.id];if(TypingDNA.history.add(p),TypingDNA.prevKeyCode=l,TypingDNA.diagramRecording===!0){var m=[l,i,o,c,TypingDNA.ut1,n.target.id,a[1].join(","),a[2].join(","),a[3].join(","),a[4].join(",")];TypingDNA.history.addDiagram(m)}}}},TypingDNA.mouseScroll=function(n){if(TypingDNA.mouseRecording===!0&&TypingDNA.mouseMoveRecording===!0)if(TypingDNA.mouse.scrollStarted===!0){var s=new Date().getTime();TypingDNA.mouse.scrollTimes.push(s),TypingDNA.mouse.scrollTopArr.push(TypingDNA.document.body.scrollTop),clearInterval(TypingDNA.scrollInterval),TypingDNA.scrollInterval=setInterval(TypingDNA.mouse.checkScroll,TypingDNA.maxScrollDeltaTime)}else TypingDNA.mouse.scrollStarted=!0},TypingDNA.mouseMove=function(n){if(TypingDNA.mouseRecording===!0){var s=new Date().getTime();TypingDNA.mouseMoveRecording===!0&&(TypingDNA.mouse.started===!0?(TypingDNA.mouse.times.push(s),TypingDNA.mouse.xPositions.push(n.screenX),TypingDNA.mouse.yPositions.push(n.screenY),clearInterval(TypingDNA.moveInterval),TypingDNA.moveInterval=setInterval(TypingDNA.mouse.checkMove,TypingDNA.maxMoveDeltaTime)):TypingDNA.mouse.started=!0),TypingDNA.lastMouseMoveTime=s}},TypingDNA.mouseDown=function(n){if(TypingDNA.mouseRecording===!0&&(TypingDNA.mouse.checkMove(),TypingDNA.mouse.checkScroll(),n.which===1)){TypingDNA.lastMouseDownTime=new Date().getTime();var s=TypingDNA.lastMouseDownTime-TypingDNA.lastMouseMoveTime;if(s<TypingDNA.maxStopTime&&TypingDNA.lastMouseStop===!1&&(TypingDNA.stopTimes.push(s),TypingDNA.mouseMoveRecording===!0)){var i=3,a=[i,s];TypingDNA.mouse.history.add(a),TypingDNA.lastMouseStop=!0}}},TypingDNA.mouseUp=function(n){if(TypingDNA.mouseRecording===!0&&n.which===1){var s=new Date().getTime()-TypingDNA.lastMouseDownTime;if(s<TypingDNA.maxClickTime&&TypingDNA.clickTimes.push(s),TypingDNA.mouseMoveRecording===!0)if(TypingDNA.mouse.started===!0)TypingDNA.mouse.checkMove(!0);else{var i=4,a=[i,s];TypingDNA.mouse.history.add(a)}}},TypingDNA.isMobile=function(){if(TypingDNA.mobile!==void 0)return TypingDNA.mobile;var n=0;return function(s){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(s.substr(0,4)))&&(n=1)}(navigator.userAgent||navigator.vendor||window.opera),TypingDNA.mobile=n,n},TypingDNA.isAndroid=function(){return/Android/i.test(navigator.userAgent)},TypingDNA.isFirefox=function(){return/Firefox/i.test(navigator.userAgent)},TypingDNA.isTarget=function(n){if(TypingDNA.lastTarget===n&&TypingDNA.lastTargetFound)return!0;var s=TypingDNA.targetIds.length,i=!1;if(s>0){for(var a=0;a<s;a++)if(TypingDNA.targetIds[a]===n){i=!0;break}return TypingDNA.lastTarget=n,TypingDNA.lastTargetFound=i,i}else return TypingDNA.lastTarget=n,TypingDNA.lastTargetFound=!0,!0},TypingDNA.kpAccZ=[],TypingDNA.kpX=[],TypingDNA.kpY=[],TypingDNA.kpTimes=[],TypingDNA.kpLastZ=0,TypingDNA.kpLastAccX=0,TypingDNA.kpLastAccY=0,TypingDNA.kpLastPitch=0,TypingDNA.kpLastRoll=0,TypingDNA.lastPressTime=0,TypingDNA.hasDeviceMotion=!1,TypingDNA.hasDeviceOrientation=!1,TypingDNA.deviceMotionHandler=function(n){TypingDNA.kpTimes.push(new Date().getTime());var s=Math.round(100*n.accelerationIncludingGravity.x),i=Math.round(100*n.accelerationIncludingGravity.y),a=Math.round(100*n.accelerationIncludingGravity.z);if(n.rotationRate)var o=Math.round(10*n.rotationRate.alpha),l=Math.round(10*n.rotationRate.beta),u=Math.round(10*n.rotationRate.gamma);TypingDNA.kpLastAccX=s,TypingDNA.kpLastAccY=i,TypingDNA.kpAccZ.push(a),TypingDNA.kpX.push(o),TypingDNA.kpY.push(l),TypingDNA.kpLastZ=u,TypingDNA.kpLastPitch=Math.floor(Math.atan2(-i,Math.sqrt(Math.pow(s,2)+Math.pow(a,2)))*180/Math.PI*10),TypingDNA.kpLastRoll=Math.floor(Math.atan2(-s,Math.sqrt(Math.pow(i,2)+Math.pow(a,2)))*180/Math.PI*10),TypingDNA.kpX.length>21&&(TypingDNA.kpTimes.shift(),TypingDNA.kpAccZ.shift(),TypingDNA.kpX.shift(),TypingDNA.kpY.shift()),TypingDNA.hasDeviceMotion||(TypingDNA.hasDeviceMotion=!0,TypingDNA.hasDeviceOrientation=!0)},TypingDNA.isMobile()===1?(TypingDNA.isAndroid()?TypingDNA.isFirefox()?(TypingDNA.document.addEventListener("input",TypingDNA.AndroidKeyUp),TypingDNA.document.addEventListener("keydown",TypingDNA.AndroidKeyDown)):(TypingDNA.document.addEventListener("keyup",TypingDNA.AndroidKeyUp),TypingDNA.document.addEventListener("keydown",TypingDNA.AndroidKeyDown)):(TypingDNA.document.addEventListener("keyup",TypingDNA.MobileKeyUp),TypingDNA.document.addEventListener("keydown",TypingDNA.MobileKeyDown),TypingDNA.document.addEventListener("keypress",TypingDNA.MobileKeyPress)),window.DeviceMotionEvent!==void 0&&window.addEventListener("devicemotion",TypingDNA.deviceMotionHandler)):TypingDNA.document.addEventListener?(TypingDNA.document.addEventListener("keyup",TypingDNA.keyUp),TypingDNA.document.addEventListener("keydown",TypingDNA.keyDown),TypingDNA.document.addEventListener("keypress",TypingDNA.keyPress),TypingDNA.document.addEventListener("mousemove",TypingDNA.mouseMove),TypingDNA.document.addEventListener("mousedown",TypingDNA.mouseDown),TypingDNA.document.addEventListener("mouseup",TypingDNA.mouseUp),TypingDNA.document.addEventListener("scroll",TypingDNA.mouseScroll)):TypingDNA.document.attachEvent?(TypingDNA.document.attachEvent("onkeyup",TypingDNA.keyUp),TypingDNA.document.attachEvent("onkeydown",TypingDNA.keyDown),TypingDNA.document.attachEvent("onkeypress",TypingDNA.keyPress),TypingDNA.document.attachEvent("onmousemove",TypingDNA.mouseMove),TypingDNA.document.attachEvent("onmousedown",TypingDNA.mouseDown),TypingDNA.document.attachEvent("onmouseup",TypingDNA.mouseUp),TypingDNA.document.attachEvent("onscroll",TypingDNA.mouseScroll)):console.log("browser not supported"),TypingDNA.kpADifArr=function(n){var s=n.length-1,i=[0];if(s<2)return[[0],[0]];for(var a=[],o=[],l=0;l<s;l++)i.push(n[l+1]-n[l]);for(l=0;l<s;l++){var u=i[l+1]-i[l];a.push(u),o.push(Math.abs(u))}return[a,o]},TypingDNA.kpRDifArr=function(n){var s=n.length-2,i=[];if(s<0)return[[0],[0]];var a=0,o=0,l=0,u=0,c=0;if(s>0)for(e=0;e<s;e++)c=n[e+1]-n[e],i.push(c),c>=a?(a=c,l=e):c<=o&&(o=c,u=e);else c=n[1]-n[0],i.push(c);var d=[l-1,l,l+1,l+2,l+3,u-1,u,u+1,u+2,u+3];return[i,d]},TypingDNA.kpGetAll=function(){var n=0,s=[];if(TypingDNA.kpAccZ.length<2)return n=TypingDNA.hasDeviceMotion&&TypingDNA.hasDeviceOrientation?0:TypingDNA.lastPressTime,s=[0,0,0,0,0,0,TypingDNA.kpLastPitch,TypingDNA.kpLastRoll],[n,s,[0],[0],[0]];var[i,a]=TypingDNA.kpADifArr(TypingDNA.kpAccZ),[o,l]=TypingDNA.kpRDifArr(TypingDNA.kpX),[u,c]=TypingDNA.kpRDifArr(TypingDNA.kpY);TypingDNA.kpX.shift(),TypingDNA.kpY.shift(),TypingDNA.kpAccZ.shift(),TypingDNA.kpTimes.shift();var d=l.concat(c);d=d.sort();var p=[];for(e=1;e<d.length;e++)d[e]!==d[e-1]&&p.push(d[e]);var m=0,g=TypingDNA.kpTimes[TypingDNA.kpTimes.length-1];for(e=0;e<p.length;e++){var E=p[e],x=a.length>8?2:a.length>4?1:0;E>x&&a[E]!==void 0&&a[E]>m&&(m=a[E],g=TypingDNA.kpTimes[E])}return n=g,s=[TypingDNA.kpLastAccX,TypingDNA.kpLastAccY,TypingDNA.kpAccZ.pop(),TypingDNA.kpX.pop(),TypingDNA.kpY.pop(),TypingDNA.kpLastZ,TypingDNA.kpLastPitch,TypingDNA.kpLastRoll],TypingDNA.kpX=[],TypingDNA.kpY=[],TypingDNA.kpAccZ=[],TypingDNA.kpTimes=[],TypingDNA.pressCalculated||(TypingDNA.pressCalculated=!0),[n,s,i,o,u]},TypingDNA.mouse={},TypingDNA.mouse.times=[],TypingDNA.mouse.xPositions=[],TypingDNA.mouse.yPositions=[],TypingDNA.mouse.scrollTimes=[],TypingDNA.mouse.scrollTopArr=[],TypingDNA.mouse.history={},TypingDNA.mouse.history.stack=[],TypingDNA.mouse.getDistance=function(n,s){return Math.sqrt(n*n+s*s)},TypingDNA.mouse.getTotalDistance=function(n,s){var i=0,a=n.length;for(e=1;e<a-1;e++){var o=n[e]-n[e-1],l=s[e]-s[e-1];i+=TypingDNA.mouse.getDistance(o,l)}return i},TypingDNA.mouse.getAngle=function(n,s){var i=0,a=n>=0,o=s<0;return a?o?i=180+Math.round(Math.atan(Math.abs(n)/(Math.abs(s)+1e-7))/.01745329251):i=270+(90-Math.round(Math.atan(Math.abs(n)/(Math.abs(s)+1e-7))/.01745329251)):o?i=90+(90-Math.round(Math.atan(Math.abs(n)/(Math.abs(s)+1e-7))/.01745329251)):i=Math.round(Math.atan(Math.abs(n)/(Math.abs(s)+1e-7))/.01745329251),i},TypingDNA.mouse.recordMoveAction=function(n){var s=TypingDNA.mouse.times.length;if(!(s<3)){for(var i=TypingDNA.mouse.times[s-1]-TypingDNA.mouse.times[0],a=TypingDNA.mouse.xPositions[s-1]-TypingDNA.mouse.xPositions[0],o=TypingDNA.mouse.yPositions[s-1]-TypingDNA.mouse.yPositions[0],l=Math.round(TypingDNA.mouse.getDistance(a,o)),u=Math.round(TypingDNA.mouse.getTotalDistance(TypingDNA.mouse.xPositions,TypingDNA.mouse.yPositions)),c=Math.round(u*100/l),d=Math.round(l*100/i),p=TypingDNA.mouse.getAngle(a,o),m=n===!0?5:1,g=[m,i,l,d,p,c],E=g.length,x=0;x<E;x++)if(isNaN(g[x]))return;TypingDNA.mouse.history.add(g),TypingDNA.lastMouseStop=!1}},TypingDNA.mouse.recordScrollAction=function(){var n=TypingDNA.mouse.scrollTimes.length;if(!(n<2)){for(var s=TypingDNA.mouse.scrollTimes[n-1]-TypingDNA.mouse.scrollTimes[0],i=TypingDNA.mouse.scrollTopArr[n-1]-TypingDNA.mouse.scrollTopArr[0],a=Math.round(i*100/s),o=2,l=[o,s,i,a],u=l.length,c=0;c<u;c++)if(isNaN(l[c])&&!isFinite(l[c]))return;TypingDNA.mouse.history.add(l)}},TypingDNA.mouse.history.add=function(n){this.stack.push(n),this.stack.length>TypingDNA.maxMouseHistoryLength&&this.stack.shift()},TypingDNA.mouse.history.getDiagram=function(){var n=this.stack.join("|"),s=9;return[String(TypingDNA.isMobile())+","+String(TypingDNA.version)+","+TypingDNA.flags+","+s+",0,0,"+TypingDNA.getSpecialKeys()+","+TypingDNA.getDeviceSignature(),n].join("|")},TypingDNA.mouse.clearLastMove=function(){TypingDNA.mouse.times=[],TypingDNA.mouse.xPositions=[],TypingDNA.mouse.yPositions=[]},TypingDNA.mouse.checkMove=function(n){clearInterval(TypingDNA.moveInterval),TypingDNA.mouse.started===!0&&(TypingDNA.mouse.started=!1,TypingDNA.mouse.recordMoveAction(n),TypingDNA.mouse.clearLastMove())},TypingDNA.mouse.clearLastScroll=function(){TypingDNA.mouse.scrollTimes=[],TypingDNA.mouse.scrollTopArr=[]},TypingDNA.mouse.checkScroll=function(){clearInterval(TypingDNA.scrollInterval),TypingDNA.mouse.scrollStarted===!0&&(TypingDNA.mouse.scrollStarted=!1,TypingDNA.mouse.recordScrollAction(),TypingDNA.mouse.clearLastScroll())},TypingDNA.addTarget=function(n){var s=TypingDNA.targetIds.length,i=!1;if(s>0){for(var a=0;a<s;a++)if(TypingDNA.targetIds[a]===n){i=!0;break}i||TypingDNA.targetIds.push(n)}else TypingDNA.targetIds.push(n)},TypingDNA.removeTarget=function(n){var s=TypingDNA.targetIds.length;if(s>0){for(var i=0;i<s;i++)if(TypingDNA.targetIds[i]===n){TypingDNA.targetIds.splice(i,1);break}}},TypingDNA.reset=function(n){TypingDNA.history.stack=[],TypingDNA.history.stackDiagram=[],TypingDNA.clickTimes=[],TypingDNA.stopTimes=[],TypingDNA.ACInputLengths={inputs:[],lastLength:[]},n===!0&&(TypingDNA.mouse.history.stack=[])},TypingDNA.removeEventListeners=function(){TypingDNA.isMobile()===1?(TypingDNA.isAndroid()?TypingDNA.isFirefox()?(TypingDNA.document.removeEventListener("input",TypingDNA.AndroidKeyUp),TypingDNA.document.removeEventListener("keydown",TypingDNA.AndroidKeyDown)):(TypingDNA.document.removeEventListener("keyup",TypingDNA.AndroidKeyUp),TypingDNA.document.removeEventListener("keydown",TypingDNA.AndroidKeyDown)):(TypingDNA.document.removeEventListener("keyup",TypingDNA.MobileKeyUp),TypingDNA.document.removeEventListener("keydown",TypingDNA.MobileKeyDown),TypingDNA.document.removeEventListener("keypress",TypingDNA.MobileKeyPress)),window.DeviceMotionEvent!==void 0&&window.removeEventListener("devicemotion",TypingDNA.deviceMotionHandler)):TypingDNA.document.removeEventListener?(TypingDNA.document.removeEventListener("keyup",TypingDNA.keyUp),TypingDNA.document.removeEventListener("keydown",TypingDNA.keyDown),TypingDNA.document.removeEventListener("keypress",TypingDNA.keyPress),TypingDNA.document.removeEventListener("mousemove",TypingDNA.mouseMove),TypingDNA.document.removeEventListener("mousedown",TypingDNA.mouseDown),TypingDNA.document.removeEventListener("mouseup",TypingDNA.mouseUp),TypingDNA.document.removeEventListener("scroll",TypingDNA.mouseScroll)):TypingDNA.document.detachEvent?(TypingDNA.document.detachEvent("onkeyup",TypingDNA.keyUp),TypingDNA.document.detachEvent("onkeydown",TypingDNA.keyDown),TypingDNA.document.detachEvent("onkeypress",TypingDNA.keyPress),TypingDNA.document.detachEvent("onmousemove",TypingDNA.mouseMove),TypingDNA.document.detachEvent("onmousedown",TypingDNA.mouseDown),TypingDNA.document.detachEvent("onmouseup",TypingDNA.mouseUp),TypingDNA.document.detachEvent("onscroll",TypingDNA.mouseScroll)):console.log("browser not supported")},TypingDNA.start=function(){return TypingDNA.diagramRecording=!0,TypingDNA.recording=!0},TypingDNA.stop=function(){return TypingDNA.diagramRecording=!1,TypingDNA.recording=!1},TypingDNA.startMouse=function(){return TypingDNA.mouseRecording=TypingDNA.mouseMoveRecording=!0},TypingDNA.stopMouse=function(){return TypingDNA.mouseRecording=TypingDNA.mouseMoveRecording=!1},TypingDNA.resetMouse=function(n){n===!0&&(TypingDNA.clickTimes=[],TypingDNA.stopTimes=[]),TypingDNA.mouse.history.stack=[]},TypingDNA.getTypingPattern=function(n){var s="";if(typeof n=="object")switch(n.type){case 0:return TypingDNA.get(n.length,n.targetId);case 1:return s=n.text!==void 0?n.text:n.length,TypingDNA.history.getDiagram(n.extended,s,n.textId,n.targetId,n.caseSensitive);case 2:return s=n.text!==void 0?n.text:n.length,TypingDNA.history.getDiagram(!0,s,n.textId,n.targetId,n.caseSensitive);default:return TypingDNA.get(n.length)}else return TypingDNA.get()},TypingDNA.getDiagram=function(n,s){return TypingDNA.history.getDiagram(!1,n,s,void 0,!1)},TypingDNA.getExtendedDiagram=function(n,s){return TypingDNA.history.getDiagram(!0,n,s,void 0,!1)},TypingDNA.getMouseDiagram=function(){return TypingDNA.mouse.history.getDiagram()},TypingDNA.getSpecialKeys=function(){return TypingDNA.history.getSpecialKeys()},TypingDNA.get=function(n,s){var i=TypingDNA.history.stack.length;(n===void 0||n===0)&&(n=TypingDNA.defaultHistoryLength),n>i&&(n=i);var a={},o=TypingDNA.history.get(n,"",s);a.arr=o[0];var l=o[1];s!==void 0&&s!==""&&(n=l);var u=TypingDNA.zl,c=n,d=TypingDNA.math.fo(TypingDNA.history.get(n,"seek",s)),p=TypingDNA.math.fo(TypingDNA.history.get(n,"press",s)),m=Math.round(TypingDNA.math.avg(p)),g=Math.round(TypingDNA.math.avg(d)),E=Math.round(TypingDNA.math.sd(p)),x=Math.round(TypingDNA.math.sd(d)),b=g+m,S=TypingDNA.math.rd((m+u)/(b+u),4),C=TypingDNA.math.rd((1-S)/S,4),T=TypingDNA.math.rd((E+u)/(m+u),4),I=TypingDNA.math.rd((x+u)/(m+u),4),D=Math.round(6e4/(b+u));c===0&&(D=0);var P=[];for(var O in a.arr){var B=a.arr[O][1].length,F=0,H=0,Q=0,Z=0,ne=0,re=0;switch(a.arr[O][0].length){case 0:break;case 1:F=TypingDNA.math.rd((a.arr[O][0][0]+u)/(g+u),4);break;default:P=TypingDNA.math.fo(a.arr[O][0]),F=TypingDNA.math.rd((TypingDNA.math.avg(P)+u)/(g+u),4),Z=TypingDNA.math.rd((TypingDNA.math.sd(P)+u)/(x+u),4)}switch(a.arr[O][1].length){case 0:break;case 1:H=TypingDNA.math.rd((a.arr[O][1][0]+u)/(m+u),4);break;default:P=TypingDNA.math.fo(a.arr[O][1]),H=TypingDNA.math.rd((TypingDNA.math.avg(P)+u)/(m+u),4),ne=TypingDNA.math.rd((TypingDNA.math.sd(P)+u)/(E+u),4)}switch(a.arr[O][2].length){case 0:break;case 1:Q=TypingDNA.math.rd((a.arr[O][2][0]+u)/(g+u),4);break;default:P=TypingDNA.math.fo(a.arr[O][2]),Q=TypingDNA.math.rd((TypingDNA.math.avg(P)+u)/(g+u),4),re=TypingDNA.math.rd((TypingDNA.math.sd(P)+u)/(x+u),4)}delete a.arr[O][2],delete a.arr[O][1],delete a.arr[O][0],a.arr[O][0]=B,a.arr[O][1]=F,a.arr[O][2]=H,a.arr[O][3]=Q,a.arr[O][4]=Z,a.arr[O][5]=ne,a.arr[O][6]=re}P=[],TypingDNA.apu(P,c),TypingDNA.apu(P,D),TypingDNA.apu(P,b),TypingDNA.apu(P,S),TypingDNA.apu(P,C),TypingDNA.apu(P,T),TypingDNA.apu(P,I),TypingDNA.apu(P,m),TypingDNA.apu(P,g),TypingDNA.apu(P,E),TypingDNA.apu(P,x);for(var se=0;se<=6;se++)for(O=0;O<44;O++){var G=TypingDNA.keyCodes[O],K=a.arr[G][se];K===0&&se>0&&(K=1),TypingDNA.apu(P,K)}return TypingDNA.apu(P,TypingDNA.isMobile()),TypingDNA.apu(P,TypingDNA.version),TypingDNA.apu(P,TypingDNA.flags),TypingDNA.apu(P,-1),TypingDNA.apu(P,c),TypingDNA.apu(P,0),P.push(TypingDNA.getSpecialKeys()),P.push(TypingDNA.getDeviceSignature()),P.join(",")},TypingDNA.apu=function(n,s){String(s)==="NaN"&&(s=0),n.push(s)},TypingDNA.math={},TypingDNA.math.rd=function(n,s){return Number(n.toFixed(s))},TypingDNA.math.avg=function(n){var s=n.length;if(s>0){for(var i=0,a=0;a<s;a++)i+=n[a];return this.rd(i/s,4)}else return 0},TypingDNA.math.sd=function(n){var s=n.length;if(s<2)return 0;for(var i=0,a=this.avg(n),o=0;o<s;o++)i+=(n[o]-a)*(n[o]-a);var l=Math.sqrt(i/s);return l},TypingDNA.math.fo=function(n){if(n.length>1){var s=n.concat(),i=n.length;s.sort(function(g,E){return g-E});var a=this.sd(s),o=s[Math.ceil(n.length/2)],l=2,u=o+l*a,c=o-l*a;i<20&&(c=0);for(var d=[],p=0;p<i;p++){var m=s[p];m<u&&m>c&&d.push(m)}return d}else return n},TypingDNA.math.fnv1aHash=function(n){if(n===void 0||typeof n!="string")return 0;n=n.toLowerCase();var s,i,a=1914395348;for(s=0,i=n.length;s<i;s++)a^=n.charCodeAt(s),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return a>>>0},TypingDNA.history={},TypingDNA.history.stack=[],TypingDNA.history.stackDiagram=[],TypingDNA.history.add=function(n){this.stack.push(n),this.stack.length>TypingDNA.maxHistoryLength&&this.stack.shift()},TypingDNA.history.addDiagram=function(n){this.stackDiagram.push(n)},TypingDNA.history.getDiagram=function(n,s,i,a,o){o=o!==void 0?o:s===void 0||s==="";var l=[],u=[],c=[],d=[],p=[],m=!!TypingDNA.isMobile(),g=n===!0?1:0,E=this.stackDiagram,x={};if(a!==void 0&&a!==""&&E.length>0)E=TypingDNA.sliceStackByTargetId(E,a),(s===void 0||s==="")&&(x=TypingDNA.document.getElementById(a),x!=null&&(s=x.value));else{var b=TypingDNA.targetIds.length;if(s===void 0||s==="")if(b>0){s="";for(var S=0;S<b;S++)x=TypingDNA.document.getElementById(TypingDNA.targetIds[S]),x!=null&&(s+=x.value)}else n||console.log("Please provide a fixed string param OR use the addTarget method.")}var C=0,T=E.length,I=T;typeof s=="string"?I=s.length:typeof s=="number"&&s<T&&(I=s);var D=0;i!==void 0?isNaN(parseInt(i))?D=TypingDNA.math.fnv1aHash(i):D=parseInt(i):typeof s=="string"&&(D=TypingDNA.math.fnv1aHash(s)),l.push([TypingDNA.isMobile(),TypingDNA.version,TypingDNA.flags,g,I,D,TypingDNA.getSpecialKeys(),TypingDNA.getDeviceSignature()]);var P=[],O=0,B=0,F=0,H=0;if(s!==void 0&&s.length>0&&typeof s=="string"){var Q=s.toLowerCase(),Z=s.toUpperCase(),ne=[],re=0,se,G;for(S=0;S<s.length;S++){var K=s.charCodeAt(S);o||(se=Z.charCodeAt(S),G=se!==K?se:Q.charCodeAt(S));for(var M=re,W=T,ee=!1;ee===!1;){for(var z=M;z<W;z++)if(P=E[z],B=P[3],B===K||!o&&B===G){if(ee=!0,z===re)re++,ne=[];else{ne.push(z);var ae=ne.length;ae>1&&ne[ae-1]===ne[ae-2]+1&&(re=z+1,ne=[])}O=P[0],F=P[1],H=P[2],n?l.push([B,F,H,O]):l.push([F,H]),m===!0&&P[6]!==void 0&&P[6].length>0&&TypingDNA.hasDeviceMotion&&TypingDNA.hasDeviceOrientation&&(TypingDNA.motionFixedData===!0&&u.push(P[6]),TypingDNA.motionArrayData===!0&&(c.push(P[7]),d.push(P[8]),p.push(P[9])));break}if(ee===!1){if(M!==0)M=0,W=re;else if(ee=!0,TypingDNA.replaceMissingKeys){if(C++,typeof TypingDNA.savedMissingAvgValues!="object"||TypingDNA.savedMissingAvgValues.historyLength!==T){var ce=TypingDNA.math.fo(TypingDNA.history.get(0,"seek")),he=TypingDNA.math.fo(TypingDNA.history.get(0,"press"));F=Math.round(TypingDNA.math.avg(ce)),H=Math.round(TypingDNA.math.avg(he)),TypingDNA.savedMissingAvgValues={seekTime:F,pressTime:H,historyLength:T}}else F=TypingDNA.savedMissingAvgValues.seekTime,H=TypingDNA.savedMissingAvgValues.pressTime;var fe=1;n?l.push([K,F,H,K,fe]):l.push([F,H,fe]),m===!0&&(TypingDNA.motionFixedData===!0&&u.push(""),TypingDNA.motionArrayData===!0&&(c.push(""),d.push(""),p.push("")));break}}}if(TypingDNA.replaceMissingKeysPerc<C*100/I)return null}}else{var Ce=0;for(typeof s=="number"&&(Ce=T-s),Ce<0&&(Ce=0),S=Ce;S<T;S++)P=E[S],O=P[0],F=P[1],H=P[2],n?(B=P[3],l.push([B,F,H,O])):l.push([F,H]),m===!0&&P[6]!==void 0&&P[6].length>0&&(TypingDNA.motionFixedData===!0&&u.push(P[6]),TypingDNA.motionArrayData===!0&&(c.push(P[7]),d.push(P[8]),p.push(P[9])))}var Me=l.join("|");return m===!0&&(TypingDNA.motionFixedData===!0&&(Me+="#"+u.join("|")),TypingDNA.motionArrayData===!0&&(Me+="#"+c.join("|"),Me+="/"+d.join("|"),Me+="/"+p.join("|"))),Me},TypingDNA.sliceStackByTargetId=function(n,s){var i=n.length,a=[];for(e=0;e<i;e++){var o=n[e];o[5]===s&&a.push(o)}return a},TypingDNA.history.get=function(n,s,i){var a=this.stack;i!==void 0&&i!==""&&a.length>0&&(a=TypingDNA.sliceStackByTargetId(a,i));var o=a.length;(n===0||n===void 0)&&(n=TypingDNA.defaultHistoryLength),n>o&&(n=o);var l=0,u=0;switch(s){case"seek":for(var c=[],d=1;d<=n;d++)l=a[o-d][1],l<=TypingDNA.maxSeekTime&&c.push(l);return c;case"press":var p=[];for(d=1;d<=n;d++)u=a[o-d][2],u<=TypingDNA.maxPressTime&&p.push(u);return p;default:var m={};for(d=0;d<t;d++)m[TypingDNA.keyCodes[d]]=[[],[],[]];for(d=1;d<=n;d++){var g=a[o-d],E=g[0];l=g[1],u=g[2];var x=g[3];TypingDNA.keyCodesObj[E]&&(l<=TypingDNA.maxSeekTime&&(m[E][0].push(l),x!==0&&TypingDNA.keyCodesObj[x]&&m[x][2].push(l)),u<=TypingDNA.maxPressTime&&m[E][1].push(u))}return[m,n]}},TypingDNA.history.getSpecialKeys=function(){for(var n=[],s=this.stack.length,i={},a=TypingDNA.spKeyCodes.length,o={},l=0;l<a;l++)i[TypingDNA.spKeyCodes[l]]=[[]];for(l=1;l<=s;l++)if(o=this.stack[s-l],TypingDNA.spKeyCodesObj[o[0]]){var u=o[0],c=o[2];c<=TypingDNA.maxPressTime&&i[u][0].push(c)}for(l=0;l<a;l++){o=TypingDNA.math.fo(i[TypingDNA.spKeyCodes[l]][0]);var d=o.length;n.push(d),d>1?(n.push(Math.round(TypingDNA.math.avg(o))),n.push(Math.round(TypingDNA.math.sd(o)))):d===1?n.push([o[0],-1]):n.push([-1,-1])}var p=TypingDNA.clickTimes.length;n.push(p),p>1?(n.push(Math.round(TypingDNA.math.avg(TypingDNA.clickTimes))),n.push(Math.round(TypingDNA.math.sd(TypingDNA.clickTimes)))):p===1?n.push(TypingDNA.clickTimes[0],-1):n.push([-1,-1]);var m=TypingDNA.stopTimes.length;return n.push(m),m>1?(n.push(Math.round(TypingDNA.math.avg(TypingDNA.stopTimes))),n.push(Math.round(TypingDNA.math.sd(TypingDNA.stopTimes)))):m===1?n.push(TypingDNA.stopTimes[0],-1):n.push([-1,-1]),n},TypingDNA.getOSBrowserMobile=function(){var n=TypingDNA.ua,s=TypingDNA.platform,i=screen.height>=screen.width,a=0,o=0,l=0,u=0,c=1;/MSIE/.test(n)?(l=4,/IEMobile/.test(n)&&(c=2),/MSIE \d+[.]\d+/.test(n)&&(u=/MSIE \d+[.]\d+/.exec(n)[0].split(" ")[1].split(".")[0])):/Edge/.test(n)?(l=6,/Edge\/[\d\.]+/.test(n)&&(u=/Edge\/[\d\.]+/.exec(n)[0].split("/")[1].split(".")[0])):/Chrome/.test(n)?(/CrOS/.test(n)&&(s="CrOS"),l=1,/Chrome\/[\d\.]+/.test(n)&&(u=/Chrome\/[\d\.]+/.exec(n)[0].split("/")[1].split(".")[0])):/Opera/.test(n)?(l=3,(/mini/.test(n)||/Mobile/.test(n))&&(c=2)):/Android/.test(n)?(l=7,c=2,a=6):/Firefox/.test(n)?(l=2,/Fennec/.test(n)&&(c=2),/Firefox\/[\.\d]+/.test(n)&&(u=/Firefox\/[\.\d]+/.exec(n)[0].split("/")[1].split(".")[0])):/Safari/.test(n)&&(l=5,(/iPhone/.test(n)||/iPad/.test(n)||/iPod/.test(n))&&(a=5,/iPad/.test(n)?c=3:c=2)),u||(/Version\/[\.\d]+/.test(n)&&(u=/Version\/[\.\d]+/.exec(n)),u?u=u[0].split("/")[1].split(".")[0]:/Opera\/[\.\d]+/.test(n)&&(u=/Opera\/[\.\d]+/.exec(n)[0].split("/")[1].split(".")[0])),s==="MacIntel"||s==="MacPPC"?(a=2,/10[\.\_\d]+/.test(n)&&(o=/10[\.\_\d]+/.exec(n)[0].split(".",2).join("")),/[\_]/.test(o)&&(o=o.split("_").slice(0,2).join(""))):s==="CrOS"?a=4:s==="Win32"||s==="Win64"?a=1:!a&&/Android/.test(n)?a=6:!a&&/Linux/.test(s)?a=3:!a&&/Windows/.test(n)&&(a=1),(c!==3||c===2)&&TypingDNA.isMobile()===1&&(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/i.test(n)||(a===6||a===0)&&(i&&screen.height>767&&screen.width>480||!i&&screen.width>767&&screen.height>480)?c=3:a===1?window.navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0&&(c=3):c=2);var d=+(typeof window.orientation<"u"||n.indexOf("IEMobile")!==-1)+1,p=Number("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch||!1)+1;return[Number(a),Number(o),Number(l),Number(u),Number(c),d,Number(i),p]},TypingDNA.getDeviceSignature=function(){var n=TypingDNA.getOSBrowserMobile(),s=n[4],i=0,a=0,o=n[5],l=n[0],u=1,c=TypingDNA.math.fnv1aHash(navigator.language),d=n[7],p=TypingDNA.getPressType(),m=0,g=0,E=0,x=n[2],b=screen.width||0,S=screen.height||0,C=n[6]?1:2,T=n[1],I=n[3],D=TypingDNA.cookieId,P=TypingDNA.math.fnv1aHash([s,i,a,o,l,u,c,d,p,m,g,E,x,b,S,C,T,I,D].join("-"));return[s,i,a,o,l,u,c,d,p,m,g,E,x,b,S,C,T,I,D,P]},TypingDNA.getPressType=function(){return TypingDNA.isMobile()===0?(TypingDNA.pressRecorded,1):TypingDNA.pressCalculated===!0?TypingDNA.pressRecorded===!0?3:2:TypingDNA.pressRecorded===!0?1:0},TypingDNA.getQuality=function(n){for(var s=n.split(","),i=0;i<s.length;i++)s[i]=Number(s[i]);var a=0,o=0,l=0,u=s.slice(11,55),c=TypingDNA.math.avg(u),d=u.length;for(i=0;i<d;i++)o+=+(u[i]>0),a+=+(u[i]>4),l+=+(u[i]>c);var p=Math.sqrt(o*a*l)/75;return p>1?1:p},TypingDNA.checkMobileValidity=function(n){var s=n.split(","),i=s[0];if(i===0)return 0;for(var a=0,o=s.slice(11,55),l=o.length,u=0;u<l;u++)a+=Number(o[u]);return a/i},TypingDNA.getLength=function(n){if(n&&typeof n=="string"){var s=n.indexOf("|");return s>0?Number(n.substring(0,s).split(",")[4])||0:Number(n.split(",")[0])||0}return 0},TypingDNA.getTextId=function(n){return TypingDNA.math.fnv1aHash(n)}}else return TypingDNA.instance}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var hookCallback;function hooks$1(){return hookCallback.apply(null,arguments)}function setHookCallback(t){hookCallback=t}function isArray(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function isObject$2(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function hasOwnProp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function isObjectEmpty(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(hasOwnProp(t,e))return!1;return!0}function isUndefined(t){return t===void 0}function isNumber(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function isDate(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function map(t,e){var n=[],s,i=t.length;for(s=0;s<i;++s)n.push(e(t[s],s));return n}function extend(t,e){for(var n in e)hasOwnProp(e,n)&&(t[n]=e[n]);return hasOwnProp(e,"toString")&&(t.toString=e.toString),hasOwnProp(e,"valueOf")&&(t.valueOf=e.valueOf),t}function createUTC(t,e,n,s){return createLocalOrUTC(t,e,n,s,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(t){return t._pf==null&&(t._pf=defaultParsingFlags()),t._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(t){var e=Object(this),n=e.length>>>0,s;for(s=0;s<n;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function isValid(t){var e=null,n=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=getParsingFlags(t),n=some.call(e.parsedDateParts,function(i){return i!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function createInvalid(t){var e=createUTC(NaN);return t!=null?extend(getParsingFlags(e),t):getParsingFlags(e).userInvalidated=!0,e}var momentProperties=hooks$1.momentProperties=[],updateInProgress=!1;function copyConfig(t,e){var n,s,i,a=momentProperties.length;if(isUndefined(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),isUndefined(e._i)||(t._i=e._i),isUndefined(e._f)||(t._f=e._f),isUndefined(e._l)||(t._l=e._l),isUndefined(e._strict)||(t._strict=e._strict),isUndefined(e._tzm)||(t._tzm=e._tzm),isUndefined(e._isUTC)||(t._isUTC=e._isUTC),isUndefined(e._offset)||(t._offset=e._offset),isUndefined(e._pf)||(t._pf=getParsingFlags(e)),isUndefined(e._locale)||(t._locale=e._locale),a>0)for(n=0;n<a;n++)s=momentProperties[n],i=e[s],isUndefined(i)||(t[s]=i);return t}function Moment(t){copyConfig(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks$1.updateOffset(this),updateInProgress=!1)}function isMoment(t){return t instanceof Moment||t!=null&&t._isAMomentObject!=null}function warn(t){hooks$1.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function deprecate$1(t,e){var n=!0;return extend(function(){if(hooks$1.deprecationHandler!=null&&hooks$1.deprecationHandler(null,t),n){var s=[],i,a,o,l=arguments.length;for(a=0;a<l;a++){if(i="",typeof arguments[a]=="object"){i+=`
[`+a+"] ";for(o in arguments[0])hasOwnProp(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[a];s.push(i)}warn(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var deprecations={};function deprecateSimple(t,e){hooks$1.deprecationHandler!=null&&hooks$1.deprecationHandler(t,e),deprecations[t]||(warn(e),deprecations[t]=!0)}hooks$1.suppressDeprecationWarnings=!1;hooks$1.deprecationHandler=null;function isFunction$1(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function set$1(t){var e,n;for(n in t)hasOwnProp(t,n)&&(e=t[n],isFunction$1(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(t,e){var n=extend({},t),s;for(s in e)hasOwnProp(e,s)&&(isObject$2(t[s])&&isObject$2(e[s])?(n[s]={},extend(n[s],t[s]),extend(n[s],e[s])):e[s]!=null?n[s]=e[s]:delete n[s]);for(s in t)hasOwnProp(t,s)&&!hasOwnProp(e,s)&&isObject$2(t[s])&&(n[s]=extend({},n[s]));return n}function Locale(t){t!=null&&this.set(t)}var keys$1;Object.keys?keys$1=Object.keys:keys$1=function(t){var e,n=[];for(e in t)hasOwnProp(t,e)&&n.push(e);return n};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(t,e,n){var s=this._calendar[t]||this._calendar.sameElse;return isFunction$1(s)?s.call(e,n):s}function zeroFill(t,e,n){var s=""+Math.abs(t),i=e-s.length,a=t>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(t,e,n,s){var i=s;typeof s=="string"&&(i=function(){return this[s]()}),t&&(formatTokenFunctions[t]=i),e&&(formatTokenFunctions[e[0]]=function(){return zeroFill(i.apply(this,arguments),e[1],e[2])}),n&&(formatTokenFunctions[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function removeFormattingTokens(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function makeFormatFunction(t){var e=t.match(formattingTokens),n,s;for(n=0,s=e.length;n<s;n++)formatTokenFunctions[e[n]]?e[n]=formatTokenFunctions[e[n]]:e[n]=removeFormattingTokens(e[n]);return function(i){var a="",o;for(o=0;o<s;o++)a+=isFunction$1(e[o])?e[o].call(i,t):e[o];return a}}function formatMoment(t,e){return t.isValid()?(e=expandFormat(e,t.localeData()),formatFunctions[e]=formatFunctions[e]||makeFormatFunction(e),formatFunctions[e](t)):t.localeData().invalidDate()}function expandFormat(t,e){var n=5;function s(i){return e.longDateFormat(i)||i}for(localFormattingTokens.lastIndex=0;n>=0&&localFormattingTokens.test(t);)t=t.replace(localFormattingTokens,s),localFormattingTokens.lastIndex=0,n-=1;return t}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(formattingTokens).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(t){return this._ordinal.replace("%d",t)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(t,e,n,s){var i=this._relativeTime[n];return isFunction$1(i)?i(t,e,n,s):i.replace(/%d/i,t)}function pastFuture(t,e){var n=this._relativeTime[t>0?"future":"past"];return isFunction$1(n)?n(e):n.replace(/%s/i,e)}var aliases={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function normalizeUnits(t){return typeof t=="string"?aliases[t]||aliases[t.toLowerCase()]:void 0}function normalizeObjectUnits(t){var e={},n,s;for(s in t)hasOwnProp(t,s)&&(n=normalizeUnits(s),n&&(e[n]=t[s]));return e}var priorities={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function getPrioritizedUnits(t){var e=[],n;for(n in t)hasOwnProp(t,n)&&e.push({unit:n,priority:priorities[n]});return e.sort(function(s,i){return s.priority-i.priority}),e}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,match1to2NoLeadingZero=/^[1-9]\d?/,match1to2HasZero=/^([1-9]\d|\d)/,regexes;regexes={};function addRegexToken(t,e,n){regexes[t]=isFunction$1(e)?e:function(s,i){return s&&n?n:e}}function getParseRegexForToken(t,e){return hasOwnProp(regexes,t)?regexes[t](e._strict,e._locale):new RegExp(unescapeFormat(t))}function unescapeFormat(t){return regexEscape(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,s,i,a){return n||s||i||a}))}function regexEscape(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function absFloor(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function toInt(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=absFloor(e)),n}var tokens={};function addParseToken(t,e){var n,s=e,i;for(typeof t=="string"&&(t=[t]),isNumber(e)&&(s=function(a,o){o[e]=toInt(a)}),i=t.length,n=0;n<i;n++)tokens[t[n]]=s}function addWeekParseToken(t,e){addParseToken(t,function(n,s,i,a){i._w=i._w||{},e(n,i._w,i,a)})}function addTimeToArrayFromToken(t,e,n){e!=null&&hasOwnProp(tokens,t)&&tokens[t](e,n._a,n,t)}function isLeapYear(t){return t%4===0&&t%100!==0||t%400===0}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;addFormatToken("Y",0,0,function(){var t=this.year();return t<=9999?zeroFill(t,4):"+"+t});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,!0],0,"year");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(t,e){e[YEAR]=t.length===2?hooks$1.parseTwoDigitYear(t):toInt(t)});addParseToken("YY",function(t,e){e[YEAR]=hooks$1.parseTwoDigitYear(t)});addParseToken("Y",function(t,e){e[YEAR]=parseInt(t,10)});function daysInYear(t){return isLeapYear(t)?366:365}hooks$1.parseTwoDigitYear=function(t){return toInt(t)+(toInt(t)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(t,e){return function(n){return n!=null?(set$1$1(this,t,n),hooks$1.updateOffset(this,e),this):get$1(this,t)}}function get$1(t,e){if(!t.isValid())return NaN;var n=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function set$1$1(t,e,n){var s,i,a,o,l;if(!(!t.isValid()||isNaN(n))){switch(s=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(i?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(i?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(i?s.setUTCHours(n):s.setHours(n));case"Date":return void(i?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}a=n,o=t.month(),l=t.date(),l=l===29&&o===1&&!isLeapYear(a)?28:l,i?s.setUTCFullYear(a,o,l):s.setFullYear(a,o,l)}}function stringGet(t){return t=normalizeUnits(t),isFunction$1(this[t])?this[t]():this}function stringSet(t,e){if(typeof t=="object"){t=normalizeObjectUnits(t);var n=getPrioritizedUnits(t),s,i=n.length;for(s=0;s<i;s++)this[n[s].unit](t[n[s].unit])}else if(t=normalizeUnits(t),isFunction$1(this[t]))return this[t](e);return this}function mod(t,e){return(t%e+e)%e}var indexOf;Array.prototype.indexOf?indexOf=Array.prototype.indexOf:indexOf=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function daysInMonth(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=mod(e,12);return t+=(e-n)/12,n===1?isLeapYear(t)?29:28:31-n%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});addFormatToken("MMMM",0,0,function(t){return this.localeData().months(this,t)});addRegexToken("M",match1to2,match1to2NoLeadingZero);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(t,e){return e.monthsShortRegex(t)});addRegexToken("MMMM",function(t,e){return e.monthsRegex(t)});addParseToken(["M","MM"],function(t,e){e[MONTH]=toInt(t)-1});addParseToken(["MMM","MMMM"],function(t,e,n,s){var i=n._locale.monthsParse(t,s,n._strict);i!=null?e[MONTH]=i:getParsingFlags(n).invalidMonth=t});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(t,e){return t?isArray(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(e)?"format":"standalone"][t.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(t,e){return t?isArray(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(e)?"format":"standalone"][t.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(t,e,n){var s,i,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)a=createUTC([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(a,"").toLocaleLowerCase();return n?e==="MMM"?(i=indexOf.call(this._shortMonthsParse,o),i!==-1?i:null):(i=indexOf.call(this._longMonthsParse,o),i!==-1?i:null):e==="MMM"?(i=indexOf.call(this._shortMonthsParse,o),i!==-1?i:(i=indexOf.call(this._longMonthsParse,o),i!==-1?i:null)):(i=indexOf.call(this._longMonthsParse,o),i!==-1?i:(i=indexOf.call(this._shortMonthsParse,o),i!==-1?i:null))}function localeMonthsParse(t,e,n){var s,i,a;if(this._monthsParseExact)return handleStrictParse.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=createUTC([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[s]&&(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(a.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(n&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!n&&this._monthsParse[s].test(t))return s}}function setMonth(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=toInt(e);else if(e=t.localeData().monthsParse(e),!isNumber(e))return t}var n=e,s=t.date();return s=s<29?s:Math.min(s,daysInMonth(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,s):t._d.setMonth(n,s),t}function getSetMonth(t){return t!=null?(setMonth(this,t),hooks$1.updateOffset(this,!0),this):get$1(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(t){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(t){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),t?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function t(u,c){return c.length-u.length}var e=[],n=[],s=[],i,a,o,l;for(i=0;i<12;i++)a=createUTC([2e3,i]),o=regexEscape(this.monthsShort(a,"")),l=regexEscape(this.months(a,"")),e.push(o),n.push(l),s.push(l),s.push(o);e.sort(t),n.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function createDate(t,e,n,s,i,a,o){var l;return t<100&&t>=0?(l=new Date(t+400,e,n,s,i,a,o),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,n,s,i,a,o),l}function createUTCDate(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function firstWeekOffset(t,e,n){var s=7+e-n,i=(7+createUTCDate(t,0,s).getUTCDay()-e)%7;return-i+s-1}function dayOfYearFromWeeks(t,e,n,s,i){var a=(7+n-s)%7,o=firstWeekOffset(t,s,i),l=1+7*(e-1)+a+o,u,c;return l<=0?(u=t-1,c=daysInYear(u)+l):l>daysInYear(t)?(u=t+1,c=l-daysInYear(t)):(u=t,c=l),{year:u,dayOfYear:c}}function weekOfYear(t,e,n){var s=firstWeekOffset(t.year(),e,n),i=Math.floor((t.dayOfYear()-s-1)/7)+1,a,o;return i<1?(o=t.year()-1,a=i+weeksInYear(o,e,n)):i>weeksInYear(t.year(),e,n)?(a=i-weeksInYear(t.year(),e,n),o=t.year()+1):(o=t.year(),a=i),{week:a,year:o}}function weeksInYear(t,e,n){var s=firstWeekOffset(t,e,n),i=firstWeekOffset(t+1,e,n);return(daysInYear(t)-s+i)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addRegexToken("w",match1to2,match1to2NoLeadingZero);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2,match1to2NoLeadingZero);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(t,e,n,s){e[s.substr(0,1)]=toInt(t)});function localeWeek(t){return weekOfYear(t,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function getSetISOWeek(t){var e=weekOfYear(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});addFormatToken("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});addFormatToken("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(t,e){return e.weekdaysMinRegex(t)});addRegexToken("ddd",function(t,e){return e.weekdaysShortRegex(t)});addRegexToken("dddd",function(t,e){return e.weekdaysRegex(t)});addWeekParseToken(["dd","ddd","dddd"],function(t,e,n,s){var i=n._locale.weekdaysParse(t,s,n._strict);i!=null?e.d=i:getParsingFlags(n).invalidWeekday=t});addWeekParseToken(["d","e","E"],function(t,e,n,s){e[s]=toInt(t)});function parseWeekday(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function parseIsoWeekday(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function shiftWeekdays(t,e){return t.slice(e,7).concat(t.slice(0,e))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(t,e){var n=isArray(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?shiftWeekdays(n,this._week.dow):t?n[t.day()]:n}function localeWeekdaysShort(t){return t===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function localeWeekdaysMin(t){return t===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function handleStrictParse$1(t,e,n){var s,i,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)a=createUTC([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(a,"").toLocaleLowerCase();return n?e==="dddd"?(i=indexOf.call(this._weekdaysParse,o),i!==-1?i:null):e==="ddd"?(i=indexOf.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=indexOf.call(this._minWeekdaysParse,o),i!==-1?i:null):e==="dddd"?(i=indexOf.call(this._weekdaysParse,o),i!==-1||(i=indexOf.call(this._shortWeekdaysParse,o),i!==-1)?i:(i=indexOf.call(this._minWeekdaysParse,o),i!==-1?i:null)):e==="ddd"?(i=indexOf.call(this._shortWeekdaysParse,o),i!==-1||(i=indexOf.call(this._weekdaysParse,o),i!==-1)?i:(i=indexOf.call(this._minWeekdaysParse,o),i!==-1?i:null)):(i=indexOf.call(this._minWeekdaysParse,o),i!==-1||(i=indexOf.call(this._weekdaysParse,o),i!==-1)?i:(i=indexOf.call(this._shortWeekdaysParse,o),i!==-1?i:null))}function localeWeekdaysParse(t,e,n){var s,i,a;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=createUTC([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(a.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(n&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(n&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!n&&this._weekdaysParse[s].test(t))return s}}function getSetDayOfWeek(t){if(!this.isValid())return t!=null?this:NaN;var e=get$1(this,"Day");return t!=null?(t=parseWeekday(t,this.localeData()),this.add(t-e,"d")):e}function getSetLocaleDayOfWeek(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function getSetISODayOfWeek(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=parseIsoWeekday(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function weekdaysRegex(t){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(t){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(t){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function t(d,p){return p.length-d.length}var e=[],n=[],s=[],i=[],a,o,l,u,c;for(a=0;a<7;a++)o=createUTC([2e3,1]).day(a),l=regexEscape(this.weekdaysMin(o,"")),u=regexEscape(this.weekdaysShort(o,"")),c=regexEscape(this.weekdays(o,"")),e.push(l),n.push(u),s.push(c),i.push(l),i.push(u),i.push(c);e.sort(t),n.sort(t),s.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(t,e){addFormatToken(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}meridiem("a",!0);meridiem("A",!1);function matchMeridiem(t,e){return e._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2,match1to2HasZero);addRegexToken("h",match1to2,match1to2NoLeadingZero);addRegexToken("k",match1to2,match1to2NoLeadingZero);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(t,e,n){var s=toInt(t);e[HOUR]=s===24?0:s});addParseToken(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});addParseToken(["h","hh"],function(t,e,n){e[HOUR]=toInt(t),getParsingFlags(n).bigHour=!0});addParseToken("hmm",function(t,e,n){var s=t.length-2;e[HOUR]=toInt(t.substr(0,s)),e[MINUTE]=toInt(t.substr(s)),getParsingFlags(n).bigHour=!0});addParseToken("hmmss",function(t,e,n){var s=t.length-4,i=t.length-2;e[HOUR]=toInt(t.substr(0,s)),e[MINUTE]=toInt(t.substr(s,2)),e[SECOND]=toInt(t.substr(i)),getParsingFlags(n).bigHour=!0});addParseToken("Hmm",function(t,e,n){var s=t.length-2;e[HOUR]=toInt(t.substr(0,s)),e[MINUTE]=toInt(t.substr(s))});addParseToken("Hmmss",function(t,e,n){var s=t.length-4,i=t.length-2;e[HOUR]=toInt(t.substr(0,s)),e[MINUTE]=toInt(t.substr(s,2)),e[SECOND]=toInt(t.substr(i))});function localeIsPM(t){return(t+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(t,e){var n,s=Math.min(t.length,e.length);for(n=0;n<s;n+=1)if(t[n]!==e[n])return n;return s}function normalizeLocale(t){return t&&t.toLowerCase().replace("_","-")}function chooseLocale(t){for(var e=0,n,s,i,a;e<t.length;){for(a=normalizeLocale(t[e]).split("-"),n=a.length,s=normalizeLocale(t[e+1]),s=s?s.split("-"):null;n>0;){if(i=loadLocale(a.slice(0,n).join("-")),i)return i;if(s&&s.length>=n&&commonPrefix(a,s)>=n-1)break;n--}e++}return globalLocale}function isLocaleNameSane(t){return!!(t&&t.match("^[^/\\\\]*$"))}function loadLocale(t){var e=null,n;if(locales[t]===void 0&&typeof module<"u"&&module&&module.exports&&isLocaleNameSane(t))try{e=globalLocale._abbr,n=require,n("./locale/"+t),getSetGlobalLocale(e)}catch{locales[t]=null}return locales[t]}function getSetGlobalLocale(t,e){var n;return t&&(isUndefined(e)?n=getLocale(t):n=defineLocale(t,e),n?globalLocale=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(t,e){if(e!==null){var n,s=baseConfig;if(e.abbr=t,locales[t]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=locales[t]._config;else if(e.parentLocale!=null)if(locales[e.parentLocale]!=null)s=locales[e.parentLocale]._config;else if(n=loadLocale(e.parentLocale),n!=null)s=n._config;else return localeFamilies[e.parentLocale]||(localeFamilies[e.parentLocale]=[]),localeFamilies[e.parentLocale].push({name:t,config:e}),null;return locales[t]=new Locale(mergeConfigs(s,e)),localeFamilies[t]&&localeFamilies[t].forEach(function(i){defineLocale(i.name,i.config)}),getSetGlobalLocale(t),locales[t]}else return delete locales[t],null}function updateLocale(t,e){if(e!=null){var n,s,i=baseConfig;locales[t]!=null&&locales[t].parentLocale!=null?locales[t].set(mergeConfigs(locales[t]._config,e)):(s=loadLocale(t),s!=null&&(i=s._config),e=mergeConfigs(i,e),s==null&&(e.abbr=t),n=new Locale(e),n.parentLocale=locales[t],locales[t]=n),getSetGlobalLocale(t)}else locales[t]!=null&&(locales[t].parentLocale!=null?(locales[t]=locales[t].parentLocale,t===getSetGlobalLocale()&&getSetGlobalLocale(t)):locales[t]!=null&&delete locales[t]);return locales[t]}function getLocale(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return globalLocale;if(!isArray(t)){if(e=loadLocale(t),e)return e;t=[t]}return chooseLocale(t)}function listLocales(){return keys$1(locales)}function checkOverflow(t){var e,n=t._a;return n&&getParsingFlags(t).overflow===-2&&(e=n[MONTH]<0||n[MONTH]>11?MONTH:n[DATE]<1||n[DATE]>daysInMonth(n[YEAR],n[MONTH])?DATE:n[HOUR]<0||n[HOUR]>24||n[HOUR]===24&&(n[MINUTE]!==0||n[SECOND]!==0||n[MILLISECOND]!==0)?HOUR:n[MINUTE]<0||n[MINUTE]>59?MINUTE:n[SECOND]<0||n[SECOND]>59?SECOND:n[MILLISECOND]<0||n[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(t)._overflowDayOfYear&&(e<YEAR||e>DATE)&&(e=DATE),getParsingFlags(t)._overflowWeeks&&e===-1&&(e=WEEK),getParsingFlags(t)._overflowWeekday&&e===-1&&(e=WEEKDAY),getParsingFlags(t).overflow=e),t}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(t){var e,n,s=t._i,i=extendedIsoRegex.exec(s)||basicIsoRegex.exec(s),a,o,l,u,c=isoDates.length,d=isoTimes.length;if(i){for(getParsingFlags(t).iso=!0,e=0,n=c;e<n;e++)if(isoDates[e][1].exec(i[1])){o=isoDates[e][0],a=isoDates[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(i[3]){for(e=0,n=d;e<n;e++)if(isoTimes[e][1].exec(i[3])){l=(i[2]||" ")+isoTimes[e][0];break}if(l==null){t._isValid=!1;return}}if(!a&&l!=null){t._isValid=!1;return}if(i[4])if(tzRegex.exec(i[4]))u="Z";else{t._isValid=!1;return}t._f=o+(l||"")+(u||""),configFromStringAndFormat(t)}else t._isValid=!1}function extractFromRFC2822Strings(t,e,n,s,i,a){var o=[untruncateYear(t),defaultLocaleMonthsShort.indexOf(e),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}function untruncateYear(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function preprocessRFC2822(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(t,e,n){if(t){var s=defaultLocaleWeekdaysShort.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(s!==i)return getParsingFlags(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function calculateOffset(t,e,n){if(t)return obsOffsets[t];if(e)return 0;var s=parseInt(n,10),i=s%100,a=(s-i)/100;return a*60+i}function configFromRFC2822(t){var e=rfc2822.exec(preprocessRFC2822(t._i)),n;if(e){if(n=extractFromRFC2822Strings(e[4],e[3],e[2],e[5],e[6],e[7]),!checkWeekday(e[1],n,t))return;t._a=n,t._tzm=calculateOffset(e[8],e[9],e[10]),t._d=createUTCDate.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),getParsingFlags(t).rfc2822=!0}else t._isValid=!1}function configFromString(t){var e=aspNetJsonRegex.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(configFromISO(t),t._isValid===!1)delete t._isValid;else return;if(configFromRFC2822(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:hooks$1.createFromInputFallback(t)}hooks$1.createFromInputFallback=deprecate$1("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function defaults$2(t,e,n){return t??e??n}function currentDateArray(t){var e=new Date(hooks$1.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function configFromArray(t){var e,n,s=[],i,a,o;if(!t._d){for(i=currentDateArray(t),t._w&&t._a[DATE]==null&&t._a[MONTH]==null&&dayOfYearFromWeekInfo(t),t._dayOfYear!=null&&(o=defaults$2(t._a[YEAR],i[YEAR]),(t._dayOfYear>daysInYear(o)||t._dayOfYear===0)&&(getParsingFlags(t)._overflowDayOfYear=!0),n=createUTCDate(o,0,t._dayOfYear),t._a[MONTH]=n.getUTCMonth(),t._a[DATE]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[HOUR]===24&&t._a[MINUTE]===0&&t._a[SECOND]===0&&t._a[MILLISECOND]===0&&(t._nextDay=!0,t._a[HOUR]=0),t._d=(t._useUTC?createUTCDate:createDate).apply(null,s),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[HOUR]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==a&&(getParsingFlags(t).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(t){var e,n,s,i,a,o,l,u,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(a=1,o=4,n=defaults$2(e.GG,t._a[YEAR],weekOfYear(createLocal(),1,4).year),s=defaults$2(e.W,1),i=defaults$2(e.E,1),(i<1||i>7)&&(u=!0)):(a=t._locale._week.dow,o=t._locale._week.doy,c=weekOfYear(createLocal(),a,o),n=defaults$2(e.gg,t._a[YEAR],c.year),s=defaults$2(e.w,c.week),e.d!=null?(i=e.d,(i<0||i>6)&&(u=!0)):e.e!=null?(i=e.e+a,(e.e<0||e.e>6)&&(u=!0)):i=a),s<1||s>weeksInYear(n,a,o)?getParsingFlags(t)._overflowWeeks=!0:u!=null?getParsingFlags(t)._overflowWeekday=!0:(l=dayOfYearFromWeeks(n,s,i,a,o),t._a[YEAR]=l.year,t._dayOfYear=l.dayOfYear)}hooks$1.ISO_8601=function(){};hooks$1.RFC_2822=function(){};function configFromStringAndFormat(t){if(t._f===hooks$1.ISO_8601){configFromISO(t);return}if(t._f===hooks$1.RFC_2822){configFromRFC2822(t);return}t._a=[],getParsingFlags(t).empty=!0;var e=""+t._i,n,s,i,a,o,l=e.length,u=0,c,d;for(i=expandFormat(t._f,t._locale).match(formattingTokens)||[],d=i.length,n=0;n<d;n++)a=i[n],s=(e.match(getParseRegexForToken(a,t))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&getParsingFlags(t).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),u+=s.length),formatTokenFunctions[a]?(s?getParsingFlags(t).empty=!1:getParsingFlags(t).unusedTokens.push(a),addTimeToArrayFromToken(a,s,t)):t._strict&&!s&&getParsingFlags(t).unusedTokens.push(a);getParsingFlags(t).charsLeftOver=l-u,e.length>0&&getParsingFlags(t).unusedInput.push(e),t._a[HOUR]<=12&&getParsingFlags(t).bigHour===!0&&t._a[HOUR]>0&&(getParsingFlags(t).bigHour=void 0),getParsingFlags(t).parsedDateParts=t._a.slice(0),getParsingFlags(t).meridiem=t._meridiem,t._a[HOUR]=meridiemFixWrap(t._locale,t._a[HOUR],t._meridiem),c=getParsingFlags(t).era,c!==null&&(t._a[YEAR]=t._locale.erasConvertYear(c,t._a[YEAR])),configFromArray(t),checkOverflow(t)}function meridiemFixWrap(t,e,n){var s;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(s=t.isPM(n),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function configFromStringAndArray(t){var e,n,s,i,a,o,l=!1,u=t._f.length;if(u===0){getParsingFlags(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<u;i++)a=0,o=!1,e=copyConfig({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],configFromStringAndFormat(e),isValid(e)&&(o=!0),a+=getParsingFlags(e).charsLeftOver,a+=getParsingFlags(e).unusedTokens.length*10,getParsingFlags(e).score=a,l?a<s&&(s=a,n=e):(s==null||a<s||o)&&(s=a,n=e,o&&(l=!0));extend(t,n||e)}function configFromObject(t){if(!t._d){var e=normalizeObjectUnits(t._i),n=e.day===void 0?e.date:e.day;t._a=map([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),configFromArray(t)}}function createFromConfig(t){var e=new Moment(checkOverflow(prepareConfig(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function prepareConfig(t){var e=t._i,n=t._f;return t._locale=t._locale||getLocale(t._l),e===null||n===void 0&&e===""?createInvalid({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),isMoment(e)?new Moment(checkOverflow(e)):(isDate(e)?t._d=e:isArray(n)?configFromStringAndArray(t):n?configFromStringAndFormat(t):configFromInput(t),isValid(t)||(t._d=null),t))}function configFromInput(t){var e=t._i;isUndefined(e)?t._d=new Date(hooks$1.now()):isDate(e)?t._d=new Date(e.valueOf()):typeof e=="string"?configFromString(t):isArray(e)?(t._a=map(e.slice(0),function(n){return parseInt(n,10)}),configFromArray(t)):isObject$2(e)?configFromObject(t):isNumber(e)?t._d=new Date(e):hooks$1.createFromInputFallback(t)}function createLocalOrUTC(t,e,n,s,i){var a={};return(e===!0||e===!1)&&(s=e,e=void 0),(n===!0||n===!1)&&(s=n,n=void 0),(isObject$2(t)&&isObjectEmpty(t)||isArray(t)&&t.length===0)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=t,a._f=e,a._strict=s,createFromConfig(a)}function createLocal(t,e,n,s){return createLocalOrUTC(t,e,n,s,!1)}var prototypeMin=deprecate$1("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=createLocal.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:createInvalid()}),prototypeMax=deprecate$1("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=createLocal.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:createInvalid()});function pickBy(t,e){var n,s;if(e.length===1&&isArray(e[0])&&(e=e[0]),!e.length)return createLocal();for(n=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](n))&&(n=e[s]);return n}function min$1(){var t=[].slice.call(arguments,0);return pickBy("isBefore",t)}function max$1(){var t=[].slice.call(arguments,0);return pickBy("isAfter",t)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(t){var e,n=!1,s,i=ordering.length;for(e in t)if(hasOwnProp(t,e)&&!(indexOf.call(ordering,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<i;++s)if(t[ordering[s]]){if(n)return!1;parseFloat(t[ordering[s]])!==toInt(t[ordering[s]])&&(n=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(t){var e=normalizeObjectUnits(t),n=e.year||0,s=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,u=e.minute||0,c=e.second||0,d=e.millisecond||0;this._isValid=isDurationValid(e),this._milliseconds=+d+c*1e3+u*6e4+l*1e3*60*60,this._days=+o+a*7,this._months=+i+s*3+n*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(t){return t instanceof Duration}function absRound(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function compareArrays(t,e,n){var s=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),a=0,o;for(o=0;o<s;o++)toInt(t[o])!==toInt(e[o])&&a++;return a+i}function offset$3(t,e){addFormatToken(t,0,0,function(){var n=this.utcOffset(),s="+";return n<0&&(n=-n,s="-"),s+zeroFill(~~(n/60),2)+e+zeroFill(~~n%60,2)})}offset$3("Z",":");offset$3("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=offsetFromString(matchShortOffset,t)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(t,e){var n=(e||"").match(t),s,i,a;return n===null?null:(s=n[n.length-1]||[],i=(s+"").match(chunkOffset)||["-",0,0],a=+(i[1]*60)+toInt(i[2]),a===0?0:i[0]==="+"?a:-a)}function cloneWithOffset(t,e){var n,s;return e._isUTC?(n=e.clone(),s=(isMoment(t)||isDate(t)?t.valueOf():createLocal(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),hooks$1.updateOffset(n,!1),n):createLocal(t).local()}function getDateOffset(t){return-Math.round(t._d.getTimezoneOffset())}hooks$1.updateOffset=function(){};function getSetOffset(t,e,n){var s=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=offsetFromString(matchShortOffset,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=getDateOffset(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),s!==t&&(!e||this._changeInProgress?addSubtract(this,createDuration(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks$1.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:getDateOffset(this)}function getSetZone(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function setOffsetToUTC(t){return this.utcOffset(0,t)}function setOffsetToLocal(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=offsetFromString(matchOffset,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(t){return this.isValid()?(t=t?createLocal(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var t={},e;return copyConfig(t,this),t=prepareConfig(t),t._a?(e=t._isUTC?createUTC(t._a):createLocal(t._a),this._isDSTShifted=this.isValid()&&compareArrays(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(t,e){var n=t,s=null,i,a,o;return isDuration(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:isNumber(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(s=aspNetRegex.exec(t))?(i=s[1]==="-"?-1:1,n={y:0,d:toInt(s[DATE])*i,h:toInt(s[HOUR])*i,m:toInt(s[MINUTE])*i,s:toInt(s[SECOND])*i,ms:toInt(absRound(s[MILLISECOND]*1e3))*i}):(s=isoRegex.exec(t))?(i=s[1]==="-"?-1:1,n={y:parseIso(s[2],i),M:parseIso(s[3],i),w:parseIso(s[4],i),d:parseIso(s[5],i),h:parseIso(s[6],i),m:parseIso(s[7],i),s:parseIso(s[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=momentsDifference(createLocal(n.from),createLocal(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),a=new Duration(n),isDuration(t)&&hasOwnProp(t,"_locale")&&(a._locale=t._locale),isDuration(t)&&hasOwnProp(t,"_isValid")&&(a._isValid=t._isValid),a}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function positiveMomentsDifference(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function momentsDifference(t,e){var n;return t.isValid()&&e.isValid()?(e=cloneWithOffset(e,t),t.isBefore(e)?n=positiveMomentsDifference(t,e):(n=positiveMomentsDifference(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function createAdder(t,e){return function(n,s){var i,a;return s!==null&&!isNaN(+s)&&(deprecateSimple(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=s,s=a),i=createDuration(n,s),addSubtract(this,i,t),this}}function addSubtract(t,e,n,s){var i=e._milliseconds,a=absRound(e._days),o=absRound(e._months);t.isValid()&&(s=s??!0,o&&setMonth(t,get$1(t,"Month")+o*n),a&&set$1$1(t,"Date",get$1(t,"Date")+a*n),i&&t._d.setTime(t._d.valueOf()+i*n),s&&hooks$1.updateOffset(t,a||o))}var add$1=createAdder(1,"add"),subtract$1=createAdder(-1,"subtract");function isString(t){return typeof t=="string"||t instanceof String}function isMomentInput(t){return isMoment(t)||isDate(t)||isString(t)||isNumber(t)||isNumberOrStringArray(t)||isMomentInputObject(t)||t===null||t===void 0}function isMomentInputObject(t){var e=isObject$2(t)&&!isObjectEmpty(t),n=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,a,o=s.length;for(i=0;i<o;i+=1)a=s[i],n=n||hasOwnProp(t,a);return e&&n}function isNumberOrStringArray(t){var e=isArray(t),n=!1;return e&&(n=t.filter(function(s){return!isNumber(s)&&isString(t)}).length===0),e&&n}function isCalendarSpec(t){var e=isObject$2(t)&&!isObjectEmpty(t),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,a;for(i=0;i<s.length;i+=1)a=s[i],n=n||hasOwnProp(t,a);return e&&n}function getCalendarFormat(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function calendar$1(t,e){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(t=arguments[0],e=void 0):isCalendarSpec(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||createLocal(),s=cloneWithOffset(n,this).startOf("day"),i=hooks$1.calendarFormat(this,s)||"sameElse",a=e&&(isFunction$1(e[i])?e[i].call(this,n):e[i]);return this.format(a||this.localeData().calendar(i,this,createLocal(n)))}function clone(){return new Moment(this)}function isAfter$1(t,e){var n=isMoment(t)?t:createLocal(t);return this.isValid()&&n.isValid()?(e=normalizeUnits(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function isBefore(t,e){var n=isMoment(t)?t:createLocal(t);return this.isValid()&&n.isValid()?(e=normalizeUnits(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function isBetween(t,e,n,s){var i=isMoment(t)?t:createLocal(t),a=isMoment(e)?e:createLocal(e);return this.isValid()&&i.isValid()&&a.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(s[1]===")"?this.isBefore(a,n):!this.isAfter(a,n))):!1}function isSame(t,e){var n=isMoment(t)?t:createLocal(t),s;return this.isValid()&&n.isValid()?(e=normalizeUnits(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function isSameOrAfter(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function isSameOrBefore(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function diff(t,e,n){var s,i,a;if(!this.isValid())return NaN;if(s=cloneWithOffset(t,this),!s.isValid())return NaN;switch(i=(s.utcOffset()-this.utcOffset())*6e4,e=normalizeUnits(e),e){case"year":a=monthDiff(this,s)/12;break;case"month":a=monthDiff(this,s);break;case"quarter":a=monthDiff(this,s)/3;break;case"second":a=(this-s)/1e3;break;case"minute":a=(this-s)/6e4;break;case"hour":a=(this-s)/36e5;break;case"day":a=(this-s-i)/864e5;break;case"week":a=(this-s-i)/6048e5;break;default:a=this-s}return n?a:absFloor(a)}function monthDiff(t,e){if(t.date()<e.date())return-monthDiff(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(n,"months"),i,a;return e-s<0?(i=t.clone().add(n-1,"months"),a=(e-s)/(s-i)):(i=t.clone().add(n+1,"months"),a=(e-s)/(i-s)),-(n+a)||0}hooks$1.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks$1.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString$1(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?formatMoment(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction$1(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(n,"Z")):formatMoment(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,s,i,a;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",a=e+'[")]',this.format(n+s+i+a)}function format(t){t||(t=this.isUtc()?hooks$1.defaultFormatUtc:hooks$1.defaultFormat);var e=formatMoment(this,t);return this.localeData().postformat(e)}function from$1(t,e){return this.isValid()&&(isMoment(t)&&t.isValid()||createLocal(t).isValid())?createDuration({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fromNow(t){return this.from(createLocal(),t)}function to(t,e){return this.isValid()&&(isMoment(t)&&t.isValid()||createLocal(t).isValid())?createDuration({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function toNow(t){return this.to(createLocal(),t)}function locale(t){var e;return t===void 0?this._locale._abbr:(e=getLocale(t),e!=null&&(this._locale=e),this)}var lang=deprecate$1("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(t,e){return(t%e+e)%e}function localStartOfDate(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-MS_PER_400_YEARS:new Date(t,e,n).valueOf()}function utcStartOfDate(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-MS_PER_400_YEARS:Date.UTC(t,e,n)}function startOf(t){var e,n;if(t=normalizeUnits(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?utcStartOfDate:localStartOfDate,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=mod$1(e+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":e=this._d.valueOf(),e-=mod$1(e,MS_PER_MINUTE);break;case"second":e=this._d.valueOf(),e-=mod$1(e,MS_PER_SECOND);break}return this._d.setTime(e),hooks$1.updateOffset(this,!0),this}function endOf(t){var e,n;if(t=normalizeUnits(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?utcStartOfDate:localStartOfDate,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=MS_PER_HOUR-mod$1(e+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":e=this._d.valueOf(),e+=MS_PER_MINUTE-mod$1(e,MS_PER_MINUTE)-1;break;case"second":e=this._d.valueOf(),e+=MS_PER_SECOND-mod$1(e,MS_PER_SECOND)-1;break}return this._d.setTime(e),hooks$1.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function toObject(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,s){var i=n._locale.erasParse(t,s,n._strict);i?getParsingFlags(n).era=i:getParsingFlags(n).invalidEra=t});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(t,e,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[YEAR]=n._locale.eraYearOrdinalParse(t,i):e[YEAR]=parseInt(t,10)});function localeEras(t,e){var n,s,i,a=this._eras||getLocale("en")._eras;for(n=0,s=a.length;n<s;++n){switch(typeof a[n].since){case"string":i=hooks$1(a[n].since).startOf("day"),a[n].since=i.valueOf();break}switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":i=hooks$1(a[n].until).startOf("day").valueOf(),a[n].until=i.valueOf();break}}return a}function localeErasParse(t,e,n){var s,i,a=this.eras(),o,l,u;for(t=t.toUpperCase(),s=0,i=a.length;s<i;++s)if(o=a[s].name.toUpperCase(),l=a[s].abbr.toUpperCase(),u=a[s].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(l===t)return a[s];break;case"NNNN":if(o===t)return a[s];break;case"NNNNN":if(u===t)return a[s];break}else if([o,l,u].indexOf(t)>=0)return a[s]}function localeErasConvertYear(t,e){var n=t.since<=t.until?1:-1;return e===void 0?hooks$1(t.since).year():hooks$1(t.since).year()+(e-t.offset)*n}function getEraName(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].name;return""}function getEraNarrow(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].narrow;return""}function getEraAbbr(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].abbr;return""}function getEraYear(){var t,e,n,s,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,s=this.clone().startOf("day").valueOf(),i[t].since<=s&&s<=i[t].until||i[t].until<=s&&s<=i[t].since)return(this.year()-hooks$1(i[t].since).year())*n+i[t].offset;return this.year()}function erasNameRegex(t){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),t?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(t){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),t?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(t){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),t?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(t,e){return e.erasAbbrRegex(t)}function matchEraName(t,e){return e.erasNameRegex(t)}function matchEraNarrow(t,e){return e.erasNarrowRegex(t)}function matchEraYearOrdinal(t,e){return e._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var t=[],e=[],n=[],s=[],i,a,o,l,u,c=this.eras();for(i=0,a=c.length;i<a;++i)o=regexEscape(c[i].name),l=regexEscape(c[i].abbr),u=regexEscape(c[i].narrow),e.push(o),t.push(l),n.push(u),s.push(o),s.push(l),s.push(u);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(t,e){addFormatToken(0,[t,t.length],0,e)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,s){e[s.substr(0,2)]=toInt(t)});addWeekParseToken(["gg","GG"],function(t,e,n,s){e[s]=hooks$1.parseTwoDigitYear(t)});function getSetWeekYear(t){return getSetWeekYearHelper.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(t){return getSetWeekYearHelper.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var t=this.localeData()._week;return weeksInYear(this.year(),t.dow,t.doy)}function getWeeksInWeekYear(){var t=this.localeData()._week;return weeksInYear(this.weekYear(),t.dow,t.doy)}function getSetWeekYearHelper(t,e,n,s,i){var a;return t==null?weekOfYear(this,s,i).year:(a=weeksInYear(t,s,i),e>a&&(e=a),setWeekAll.call(this,t,e,n,s,i))}function setWeekAll(t,e,n,s,i){var a=dayOfYearFromWeeks(t,e,n,s,i),o=createUTCDate(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter");addRegexToken("Q",match1);addParseToken("Q",function(t,e){e[MONTH]=(toInt(t)-1)*3});function getSetQuarter(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addRegexToken("D",match1to2,match1to2NoLeadingZero);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(t,e){e[DATE]=toInt(t.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(t,e,n){n._dayOfYear=toInt(t)});function getSetDayOfYear(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}addFormatToken("m",["mm",2],0,"minute");addRegexToken("m",match1to2,match1to2HasZero);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second");addRegexToken("s",match1to2,match1to2HasZero);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(t,e){e[MILLISECOND]=toInt(("0."+t)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add$1;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from$1;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter$1;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract$1;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;typeof Symbol<"u"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});proto.toJSON=toJSON;proto.toString=toString$1;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate$1("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate$1("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate$1("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate$1("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate$1("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(t){return createLocal(t*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(t){return t}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set$1;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1$1(t,e,n,s){var i=getLocale(),a=createUTC().set(s,e);return i[n](a,t)}function listMonthsImpl(t,e,n){if(isNumber(t)&&(e=t,t=void 0),t=t||"",e!=null)return get$1$1(t,e,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=get$1$1(t,s,n,"month");return i}function listWeekdaysImpl(t,e,n,s){typeof t=="boolean"?(isNumber(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,isNumber(e)&&(n=e,e=void 0),e=e||"");var i=getLocale(),a=t?i._week.dow:0,o,l=[];if(n!=null)return get$1$1(e,(n+a)%7,s,"day");for(o=0;o<7;o++)l[o]=get$1$1(e,(o+a)%7,s,"day");return l}function listMonths(t,e){return listMonthsImpl(t,e,"months")}function listMonthsShort(t,e){return listMonthsImpl(t,e,"monthsShort")}function listWeekdays(t,e,n){return listWeekdaysImpl(t,e,n,"weekdays")}function listWeekdaysShort(t,e,n){return listWeekdaysImpl(t,e,n,"weekdaysShort")}function listWeekdaysMin(t,e,n){return listWeekdaysImpl(t,e,n,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=toInt(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});hooks$1.lang=deprecate$1("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks$1.langData=deprecate$1("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var t=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),t.milliseconds=mathAbs(t.milliseconds),t.seconds=mathAbs(t.seconds),t.minutes=mathAbs(t.minutes),t.hours=mathAbs(t.hours),t.months=mathAbs(t.months),t.years=mathAbs(t.years),this}function addSubtract$1(t,e,n,s){var i=createDuration(e,n);return t._milliseconds+=s*i._milliseconds,t._days+=s*i._days,t._months+=s*i._months,t._bubble()}function add$1$1(t,e){return addSubtract$1(this,t,e,1)}function subtract$1$1(t,e){return addSubtract$1(this,t,e,-1)}function absCeil(t){return t<0?Math.floor(t):Math.ceil(t)}function bubble(){var t=this._milliseconds,e=this._days,n=this._months,s=this._data,i,a,o,l,u;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=absCeil(monthsToDays(n)+e)*864e5,e=0,n=0),s.milliseconds=t%1e3,i=absFloor(t/1e3),s.seconds=i%60,a=absFloor(i/60),s.minutes=a%60,o=absFloor(a/60),s.hours=o%24,e+=absFloor(o/24),u=absFloor(daysToMonths(e)),n+=u,e-=absCeil(monthsToDays(u)),l=absFloor(n/12),n%=12,s.days=e,s.months=n,s.years=l,this}function daysToMonths(t){return t*4800/146097}function monthsToDays(t){return t*146097/4800}function as(t){if(!this.isValid())return NaN;var e,n,s=this._milliseconds;if(t=normalizeUnits(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,n=this._months+daysToMonths(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(monthsToDays(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function makeAs(t){return function(){return this.as(t)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y"),valueOf$1=asMilliseconds;function clone$1(){return createDuration(this)}function get$2(t){return t=normalizeUnits(t),this.isValid()?this[t+"s"]():NaN}function makeGetter(t){return function(){return this.isValid()?this._data[t]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round$1=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(t,e,n,s,i){return i.relativeTime(e||1,!!n,t,s)}function relativeTime$1(t,e,n,s){var i=createDuration(t).abs(),a=round$1(i.as("s")),o=round$1(i.as("m")),l=round$1(i.as("h")),u=round$1(i.as("d")),c=round$1(i.as("M")),d=round$1(i.as("w")),p=round$1(i.as("y")),m=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||l<=1&&["h"]||l<n.h&&["hh",l]||u<=1&&["d"]||u<n.d&&["dd",u];return n.w!=null&&(m=m||d<=1&&["w"]||d<n.w&&["ww",d]),m=m||c<=1&&["M"]||c<n.M&&["MM",c]||p<=1&&["y"]||["yy",p],m[2]=e,m[3]=+t>0,m[4]=s,substituteTimeAgo.apply(null,m)}function getSetRelativeTimeRounding(t){return t===void 0?round$1:typeof t=="function"?(round$1=t,!0):!1}function getSetRelativeTimeThreshold(t,e){return thresholds[t]===void 0?!1:e===void 0?thresholds[t]:(thresholds[t]=e,t==="s"&&(thresholds.ss=e-1),!0)}function humanize(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=thresholds,i,a;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(s=Object.assign({},thresholds,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),i=this.localeData(),a=relativeTime$1(this,!n,s,i),n&&(a=i.pastFuture(+this,a)),i.postformat(a)}var abs$1=Math.abs;function sign(t){return(t>0)-(t<0)||+t}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var t=abs$1(this._milliseconds)/1e3,e=abs$1(this._days),n=abs$1(this._months),s,i,a,o,l=this.asSeconds(),u,c,d,p;return l?(s=absFloor(t/60),i=absFloor(s/60),t%=60,s%=60,a=absFloor(n/12),n%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",u=l<0?"-":"",c=sign(this._months)!==sign(l)?"-":"",d=sign(this._days)!==sign(l)?"-":"",p=sign(this._milliseconds)!==sign(l)?"-":"",u+"P"+(a?c+a+"Y":"")+(n?c+n+"M":"")+(e?d+e+"D":"")+(i||s||t?"T":"")+(i?p+i+"H":"")+(s?p+s+"M":"")+(t?p+o+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1$1;proto$2.subtract=subtract$1$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate$1("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});addParseToken("x",function(t,e,n){n._d=new Date(toInt(t))});//! moment.js
hooks$1.version="2.30.1";setHookCallback(createLocal);hooks$1.fn=proto;hooks$1.min=min$1;hooks$1.max=max$1;hooks$1.now=now;hooks$1.utc=createUTC;hooks$1.unix=createUnix;hooks$1.months=listMonths;hooks$1.isDate=isDate;hooks$1.locale=getSetGlobalLocale;hooks$1.invalid=createInvalid;hooks$1.duration=createDuration;hooks$1.isMoment=isMoment;hooks$1.weekdays=listWeekdays;hooks$1.parseZone=createInZone;hooks$1.localeData=getLocale;hooks$1.isDuration=isDuration;hooks$1.monthsShort=listMonthsShort;hooks$1.weekdaysMin=listWeekdaysMin;hooks$1.defineLocale=defineLocale;hooks$1.updateLocale=updateLocale;hooks$1.locales=listLocales;hooks$1.weekdaysShort=listWeekdaysShort;hooks$1.normalizeUnits=normalizeUnits;hooks$1.relativeTimeRounding=getSetRelativeTimeRounding;hooks$1.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks$1.calendarFormat=getCalendarFormat;hooks$1.prototype=proto;hooks$1.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const timeAgoFormatter=t=>{const e=hooks$1(),n=hooks$1(t),s=hooks$1.duration(e.diff(n)),i=s.asHours();return i<1?`${Math.floor(s.asMinutes())}m ago`:i>=1&&i<24?`${Math.floor(i)}h ago`:n.format("MMM DD, YYYY")},strToMDYYYY=t=>hooks$1.utc(t).format("M/D/YYYY"),strToLL=t=>hooks$1.utc(t).format("LL"),secondsToMinutesColonSeconds=t=>{const e=Math.floor(t/60),n=t-e*60;return`${e>10?e:`0${e}`}:${n>=10?n:`0${n}`}`},getFilteredMarkup=(t,e="")=>{if(!t)return"";const n=t.replace("<body>","").replace("</body>","").replace(/\[name]/g,e).replaceAll(/[\r\n]^(\s)*/gim,""),i=new DOMParser().parseFromString(n,"text/html");let a="";return get$5(i,"body.childNodes",[]).length&&i.body.childNodes.forEach(o=>{o.tagName==="P"&&o.innerHTML.trim()===""||(o.childNodes.forEach(c=>{c.tagName==="KEY-TERM"&&c.classList.add("keyterm")}),a+=o.outerHTML??o.textContent)}),a},secondsToHHMMSS=t=>{const e=parseInt(t,10);let n=Math.floor(e/3600),s=Math.floor((e-n*3600)/60),i=e-n*3600-s*60,a="";return n<10&&(n=`0${n}`),s<10&&(s=`0${s}`),i<10&&(i=`0${i}`),n!=="00"&&(a=`${a+n}:`),`${a+s}:${i}`},formatTime$1=t=>{const e=new Date(t);let n=e.getHours();const s=e.getMinutes(),i=n>=12?"pm":"am";n%=12,n=n||12;const a=s<10?`0${s}`:s;return`${n}:${a}${i}`},formatDateForScheduleItems=t=>{const e=new Date(t),n=e.toLocaleDateString("en-US",{weekday:"long"}),s=e.toLocaleDateString("en-US",{month:"numeric"}),i=e.toLocaleDateString("en-US",{day:"numeric"});return`${n} ${s}/${i}`},DialogScreenVerifyBiometric=({body:t,errorMessage:e,isCurrent:n,isVerified:s,title:i,onSubmit:a,isLoading:o,hasTimer:l,timeRemaining:u})=>{const c=reactExports.useRef(new TypingDNA),d=reactExports.useRef(c.current.isMobile()),[p,m]=reactExports.useState(""),[g,E]=reactExports.useState(""),[x,b]=reactExports.useState(!1);let S=0;reactExports.useEffect(()=>{c.current.start()},[]);const C=()=>!1,T=O=>{O.target.value=O.target.value.slice(0,t.length),m(O.target.value),x||b(!0),g&&E("")},I=()=>{const O=t.split("").reduce((B,F,H)=>B+(F!==p[H]?1:0),0);return!s&&(p.length!==t.length||O>2||!x)||o},D=(O,B)=>(O&&O!==B&&(S+=1),O&&S<=2?"correctAnswer":""),P=O=>{if(O.preventDefault(),O.stopPropagation(),I())return!1;const B=c.current.getTextId(t),F=c.current.getTypingPattern({type:2,text:t,textId:B});return b(!1),F?(a&&a(JSON.stringify({typingPattern:F,phrase:p,isMobile:d.current})),c.current.stop(),m("")):(m(""),E("We need to collect more info, please retype the phrase one more time.")),!1};return jsxRuntimeExports.jsxs("form",{onSubmit:P,className:classNames("gritDialogScreen","gritDialogScreen__verifyBiometric",{"gritDialogScreen--current":n}),autoComplete:"off",children:[(g||e)&&!s?jsxRuntimeExports.jsxs("div",{className:"gritDialogScreen__errorMessage",children:[jsxRuntimeExports.jsx("span",{className:"icon",style:{...getIconStyle("error","small")}}),jsxRuntimeExports.jsx("p",{className:"gritDialogScreen__errorText paragraph__condensed",children:g||e})]}):null,jsxRuntimeExports.jsx("h1",{"data-test":"header",className:"gritDialogScreen__heading headings__h1",children:i}),l?jsxRuntimeExports.jsxs("p",{"data-test":"timer",className:"gritDialogScreen__timeRemaining gritMetaData",children:[jsxRuntimeExports.jsx("span",{children:"Time Remaining:"}),jsxRuntimeExports.jsx("span",{children:secondsToMinutesColonSeconds(u)})]}):null,jsxRuntimeExports.jsxs("div",{"data-test":"verificationCard",className:"gritDialogScreen__verificationCard",children:[jsxRuntimeExports.jsx("p",{"data-test":"explanationPhrase",className:"gritDialogScreen__preText paragraph__regular",children:"Enter the phrase below."}),jsxRuntimeExports.jsx("div",{className:"gritDialogScreen__hintText",children:t.split("").map((O,B)=>jsxRuntimeExports.jsx("span",{"data-test":"verificationTextByLetter",className:D(p[B],O),children:O},`bio-char-${B}`))}),jsxRuntimeExports.jsx("div",{className:"gritDialogScreen__textInput",children:jsxRuntimeExports.jsx(Input,{name:"biometricPhrase",autocomplete:"off","data-test":"phraseInput",id:"biometricPhraseEntryInput",label:"Enter phrase here",onChange:T,placeholder:"Retype phrase",value:p,maxLength:t.length,onDrop:C,onPaste:C})})]}),jsxRuntimeExports.jsx(Button$2,{"data-test":"enterPhraseButton",id:"submitCodeButton",onClick:P,disabled:I(),children:"Verify"})]})},initialProps={isCurrent:!1,title:"",buttonList:[]},DialogScreenVerifyBiometricInfo=({isCurrent:t,title:e,buttonList:n}=initialProps)=>jsxRuntimeExports.jsxs("div",{className:classNames("grit screen verify-info-dialog",{current:t}),children:[jsxRuntimeExports.jsx("h1",{"data-test":"biomInfoTitle",className:"heading gritHeading-1",children:e}),jsxRuntimeExports.jsxs("p",{"data-test":"biomInfoDescrp",className:"body-text paragraph__regular subtle",children:[jsxRuntimeExports.jsxs("p",{children:["Follow the tips below to avoid an identity verification failure."," ",jsxRuntimeExports.jsx("b",{children:"If you fail multiple times, you will have to restart the course per state requirements."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"note",children:[jsxRuntimeExports.jsx("b",{children:"Use the device you used during enrollment"})," and ",jsxRuntimeExports.jsx("b",{children:"type the same way"})," each time."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("b",{children:"If you used a phone or tablet when you enrolled:"})}),jsxRuntimeExports.jsxs("ul",{className:"list",children:[jsxRuntimeExports.jsx("li",{children:"Hold the device the same way (portrait or landscape)."}),jsxRuntimeExports.jsx("li",{children:"Don't use predictive text, swipe typing or auto complete. Type each character directly."}),jsxRuntimeExports.jsx("li",{children:"Type with the same number of hands."}),jsxRuntimeExports.jsx("li",{children:"NOTE: We don't recommend using Android devices due to google settings."})]}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("b",{children:"If you used a desktop or laptop when you enrolled:"})}),jsxRuntimeExports.jsxs("ul",{className:"list",children:[jsxRuntimeExports.jsx("li",{children:"Use the same keyboard."}),jsxRuntimeExports.jsx("li",{children:"Type with the same number of hands."})]})]}),n.length?jsxRuntimeExports.jsx("ul",{className:"button-list",children:n.map((s,i)=>jsxRuntimeExports.jsx("li",{className:"button-list-item",children:s},`modal-button-${i}`))}):null]}),DialogScreenVerifySMS=({body:t,isCurrent:e,isVerified:n,title:s,errorMessage:i,timeRemaining:a,onSubmit:o})=>{const[l,u]=reactExports.useState(""),[c,d]=reactExports.useState(!1),p=g=>{d(!0),u(g)},m=g=>{g.preventDefault(),g.stopPropagation(),d(!1),o&&o(l)};return jsxRuntimeExports.jsxs("div",{className:classNames("gritDialogScreen","gritDialogScreen--verifySms gritDialogScreen__verifySms",{"gritDialogScreen--current":e}),children:[i&&!n?jsxRuntimeExports.jsx(Alert,{title:i,variant:"error",extraClassName:"gritDialogScreen__errorText"}):null,jsxRuntimeExports.jsx("h1",{className:"gritDialogScreen__heading headings__h1",children:s}),jsxRuntimeExports.jsx("p",{className:"gritDialogScreen__bodyText paragraph__regular",children:t}),jsxRuntimeExports.jsxs("p",{className:"gritDialogScreen__timeRemaining gritMetaData",children:["Time Remaining: ",jsxRuntimeExports.jsx("span",{children:secondsToMinutesColonSeconds(a)})]}),jsxRuntimeExports.jsxs("form",{className:"gritDialogScreen__form",onSubmit:g=>{m(g)},children:[jsxRuntimeExports.jsx("div",{className:"gritDialogScreen__textInput",children:jsxRuntimeExports.jsx(Input,{placeholder:"4-digit code",id:"smsCodeEntryInput",onChange:g=>{p(g.target.value)},mask:[/\d/,/\d/,/\d/,/\d/],name:"",value:l})}),jsxRuntimeExports.jsx(AnimatedButton,{"data-test":"submitCodeButton",affirmed:n,affirmativeLabel:"Verified",stretch:!0,disabled:(l.replace("_","").length!==4||!c)&&!n,isSubmit:!0,ariaLabel:"Submit SMS Code",children:"Submit Code"})]})]})},AnswerButton=({"data-test":t,gradedState:e,onClick:n,selected:s,text:i,disabled:a=!1})=>{const o=s??(e&&e!=="missed"&&e!=="incorrect"),l=e==="incorrect"?"gritIcon--x-inverted":"gritIcon--checkmark-inverted",u={...o&&!e&&{"data-test":"checkIcon"}};return jsxRuntimeExports.jsxs("button",{"data-test":t,className:`grit answerButton fields__answer ${s?"selected":""} ${e??""}`,disabled:a,onClick:n,"aria-label":`Answer Button for ${i}`,children:[jsxRuntimeExports.jsx("span",{children:i}),o?jsxRuntimeExports.jsx("span",{...u,className:`gritIcon ${l}`}):null]})},DialogueScreenVerifyMultichoice=({answerList:t,errorMessage:e,hasTimer:n,isCurrent:s,onClick:i,questionId:a,timeRemaining:o,title:l,warning:u})=>jsxRuntimeExports.jsxs("div",{"data-test":"questionModal",className:classNames("gritDialogScreen","gritDialogScreen--verifyMultichoice",{"gritDialogScreen--current":s}),children:[e?jsxRuntimeExports.jsx("div",{className:"gritDialogScreen__errorMessage",children:jsxRuntimeExports.jsx(Alert,{icon:"alert",variant:"error",title:e})}):null,u?jsxRuntimeExports.jsx("div",{id:"dialogScreenWarning",className:"gritDialogScreen__bodyText",children:jsxRuntimeExports.jsx(Alert,{icon:"alert",variant:"warning",title:u})}):null,jsxRuntimeExports.jsx("h1",{"data-test":"header",className:"gritDialogScreen__heading headings__h1",children:l}),n?jsxRuntimeExports.jsxs("p",{"data-test":"timer",className:"gritDialogScreen__timeRemaining gritMetaData",children:[jsxRuntimeExports.jsx("span",{children:"Time Remaining:"}),jsxRuntimeExports.jsx("span",{children:secondsToMinutesColonSeconds(o)})]}):null,t.length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[t.map(c=>jsxRuntimeExports.jsx(AnswerButton,{"data-test":"popupAnswer",text:c.text,onClick:()=>{i(c._id,a)}},c._id)),jsxRuntimeExports.jsx("br",{})]}):null]}),getStatusDialogScreen=(t,e,n)=>{let s="Verification Failed",i="Verification Failed";const{penaltySummary:a}=t,{upProgress:o,modeType:l,questionType:u,pageId:c}=t,d=t.isCorrect&&t.isVerified,p=a.message;if(d&&(i="Awesome!"),d||store.dispatch(genericAnalyticsAndIterableEvent("Id Verification Failed",{mode_type:l,question_type:u,page_id:c})),a)i=a?.title||i,s=p,a?.isPenalized&&a?.isLogout&&(s="Your account was not successfully verified. You have been logged out and must log back in to proceed.");else if(t.isVerified&&t.question)s="That response was incorrect. You have another opportunity to verify yourself.",i="Incorrect, try again";else if(o?.isLocked&&t.question){const g=window.aceRootScope?.waitTime(o);s=`Since you were unable to verify your account, state law requires us to lock your account. ${g?`You will be automatically unlocked in ${g}.`:"Please contact customer service for more info."}`}else o?.currentChapter===0&&o?.currentPage===0?s="Since you were unable to verify your account, state law requires us to reset your progress to the beginning of the level.":t.isCorrect&&t.isVerified?(i="Incorrect",s="We were not able to verify you, but you may proceed."):d&&(i="Awesome!",s="You are now verified and may continue.");const m=()=>{d&&l==="WEBINAR"&&n&&window.open(n,"_blank"),e({type:"EXIT"})};return jsxRuntimeExports.jsx(DialogScreen,{title:i,body:s,isCurrent:!0,buttonList:[jsxRuntimeExports.jsx(Button$2,{"data-test":"continueButton",stretch:!0,onClick:m,children:"Continue"},"dialogueScreenButton1")]})},getScreensByMachinestate=(t,e,n,s,i,{isAffirmed:a,setAffirmativeTimer:o,webinarUrl:l})=>{const u=[],c=get$5(t,"context.verification",{}),d=c?.timeoutSeconds,p=t?.context?.elapsedSeconds;return t.matches(machineStatesEnum.MULTICHOICE)||t.matches(machineStatesEnum.GRADING_ANSWER)&&getVerificationType(c.verifyType,c.questionType)==="isProfile"?u.push(jsxRuntimeExports.jsx(DialogueScreenVerifyMultichoice,{title:c?.question?.text,warning:c?.modeType==="SIGNIN"&&c?.questionType==="MULTICHOICE"?"Not completing both verification steps will be considered a verification failure.":void 0,answerList:c?.question?.answerList,questionId:c?.question?._id,timeRemaining:d-p,hasTimer:!!c?.timeoutSeconds,errorMessage:c?.penaltySummary?.message,onClick:(m,g)=>e({type:"GRADE_ANSWER",payload:{answerId:m,questionId:g}})},"multichoiceScreen")):t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS}`)||t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS_SUCCESS}`)||t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS_FAILURE}`)||t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.ENTER_SMS_CODE}`)||t.matches(machineStatesEnum.GRADING_ANSWER)&&getVerificationType(c.verifyType,c.questionType)==="isSms"?u.push(jsxRuntimeExports.jsx(DialogScreen,{title:"Verification Required to Continue",body:c?.question?.text,isCurrent:t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS}`)||t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS_SUCCESS}`)||t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS_FAILURE}`),buttonList:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>e(machineEvents.CONFIRM_RECEIVED_CODE()),children:"I received my code"},"screen1button1"),jsxRuntimeExports.jsx(AnimatedButton,{affirmativeLabel:"Code Sent",type:"text",onClick:()=>{o(),e(machineEvents.RETRY_SEND_SMS())},affirmed:a,children:"I didnt get my code. Resend code"},"screen1button2")]},"screen1"),jsxRuntimeExports.jsx(DialogScreenVerifySMS,{title:"Enter Verification Code",body:"Enter the 4-digit verification code sent via text message to your phone.",isCurrent:t.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.ENTER_SMS_CODE}`)||t.matches(machineStatesEnum.GRADING_ANSWER),timeRemaining:d-p,errorMessage:c?.penaltySummary?.message,isVerified:c?.isVerified,onSubmit:g=>e(machineEvents.GRADE_ANSWER(g))},"screen2")):t.matches(machineStatesEnum.BIOMETRICS)||t.matches(machineStatesEnum.GRADING_ANSWER)&&getVerificationType(c.verifyType,c.questionType)==="isBiom"?u.push(jsxRuntimeExports.jsx(DialogScreenVerifyBiometricInfo,{title:"Identity Verification Information",isCurrent:t.matches(`${machineStatesEnum.BIOMETRICS}.${machineStatesEnum.INFO_BIOMETRICS}`),buttonList:[jsxRuntimeExports.jsx(Button$2,{"data-test":"biomContinueButton",onClick:()=>e(machineEvents.CONTINUE_BIOMETRICS()),stretch:!0,children:"Continue"},"screen1button1")]},"biometricScreen1"),jsxRuntimeExports.jsx(DialogScreenVerifyBiometric,{title:"Verification required to continue",body:c?.question?.text,isCurrent:t.matches(`${machineStatesEnum.BIOMETRICS}.${machineStatesEnum.TYPING_VERIFICATION}`),errorMessage:c?.penaltySummary?.message,isVerified:c?.isVerified,onSubmit:m=>e(machineEvents.GRADE_ANSWER(m)),isLoading:i,timeRemaining:d-p,hasTimer:!!c?.timeoutSeconds},"biometricScreen2")):t.matches(machineStatesEnum.BIOSIG)?u.push(jsxRuntimeExports.jsx(DialogScreenBioSig,{iframeUrlSrc:c.verificationUrl,onClick:()=>e({type:"GRADE_ANSWER",payload:{answerId:"",questionId:c?.question?._id}})})):t.matches(machineStatesEnum.SHOW_RESULTS)&&u.push(getStatusDialogScreen(c,e,l||"")),u},VerificationManager=()=>{const t=useSelector(selectUIBrandState),{theme:e}=useTheme(),n=useSelector(selectprogressId),s=useSelector(selectNeedCheckVerification),i=useSelector(selectVerificationModeType),a=useSelector(selectVerificationPseudoId),o=useSelector(selectVerificationQuestionId),l=useSelector(selectVerificationWebinarUrl),u=useSelector(selectUiIsLoading),c=useDispatch(),[d,p,m]=useDelayedUnmounting(),[g,E]=useMachine(verificationMachine),[x,b]=reactExports.useState(!1),[S,C]=reactExports.useState(null),[T,I]=reactExports.useState(0),D=useLocation(),P=()=>{b(!0),setTimeout(()=>{b(!1)},1e3)},O=reactExports.useMemo(()=>getScreensByMachinestate(g,E,t,e,u,{isAffirmed:x,setAffirmativeTimer:P,webinarUrl:l??""}),[g,E,t,e,u,x,l]);return reactExports.useEffect(()=>{if(C(g.context.verification),(g.matches(machineStatesEnum.MULTICHOICE)||g.matches(machineStatesEnum.SMS)||g.matches(machineStatesEnum.BIOMETRICS)||g.matches(machineStatesEnum.BIOSIG))&&(c(setAudioPaused()),p()),g.matches(machineStatesEnum.EXIT)){const B=get$5(g,"context.error.message","");B.includes("BIOSIG")&&c({type:SHOW_MODAL,payload:{modal:{message:"There's a problem with this course.  We had to log you out.  Please reach out to us if the problem persists.",title:B,buttonText:"I understand",hideCloseIcon:!0,confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}]}}}),c({type:SET_DOES_NOT_NEED_VERIFICATION}),c(setAudioPlaying()),m()}g.matches(machineStatesEnum.MULTICHOICE)&&I(0),(g.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS}`)||g.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS_SUCCESS}`)||g.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.SEND_SMS_FAILURE}`))&&I(0),g.matches(`${machineStatesEnum.SMS}.${machineStatesEnum.ENTER_SMS_CODE}`)&&I(1),(g.matches(`${machineStatesEnum.BIOMETRICS}.${machineStatesEnum.INFO_BIOMETRICS}`)||g.matches(`${machineStatesEnum.BIOSIG}.${machineStatesEnum.BIOSIG_VERIFICATION}`))&&I(0),g.matches(`${machineStatesEnum.BIOMETRICS}.${machineStatesEnum.TYPING_VERIFICATION}`)&&I(1),g.matches(machineStatesEnum.SHOW_RESULTS)&&I(0)},[g]),reactExports.useEffect(()=>{s&&D.pathname!=="/user/signin"&&D.pathname!=="/courseswitch/view"&&E(machineEvents.LOAD(n,i??"",a,o??""))},[s,D.pathname,E,n,i,a,o]),jsxRuntimeExports.jsx("div",{className:"gritVerificationManager",children:jsxRuntimeExports.jsx(FullScreenDialog,{currentIndex:T,mountState:d,screenList:O,underModal:S?.questionType==="MULTICHOICE"})})},Enroll=()=>{const t=useNavigate(),e=useDispatch(),n=()=>{if(!!ModelAbstract.getCurrent("user")?._id){e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),t("/dash/index");return}e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"user.signin"}}),t("/user/signin")};return jsxRuntimeExports.jsx("div",{className:"grit screen enroll",children:jsxRuntimeExports.jsxs("article",{className:"content",children:[jsxRuntimeExports.jsx("h1",{children:"Please Refresh"}),jsxRuntimeExports.jsx("p",{children:'Please click the "Go Home" button below to refresh the page and continue with your course.'}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>{n()},children:"Go Home"})]})})},Select=({"data-test":t,defaultOption:e="Select your option...",defaultOptionDisabled:n=!0,disabled:s=!1,error:i=!1,helperText:a,id:o,label:l,link:u,name:c,onChange:d,optional:p=!1,options:m,groupedOptions:g,required:E=!1,value:x="",className:b=""})=>jsxRuntimeExports.jsxs("div",{className:`grit input ${i?"error":""} ${s?"disabled":""} ${b||""}`,children:[l?jsxRuntimeExports.jsx("label",{className:"fields__label",htmlFor:o,children:`${l} ${p?"(optional)":""}`}):null,jsxRuntimeExports.jsxs("div",{className:"inputElementWrapper",children:[jsxRuntimeExports.jsxs("select",{"data-test":t,disabled:s,id:o,name:c,onChange:d,required:E,value:x,children:[jsxRuntimeExports.jsx("option",{disabled:n,value:"",children:e}),m?.map((S,C)=>jsxRuntimeExports.jsx("option",{value:S.value,children:S.key},C)),g?.map(S=>jsxRuntimeExports.jsx("optgroup",{label:S.key,children:S.value.map(C=>jsxRuntimeExports.jsx("option",{value:C.value,children:C.key},C.value))},S.key))]}),jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${s?"lock-solid":"carat-down"}`})]}),jsxRuntimeExports.jsxs("div",{className:"inputFooter",children:[jsxRuntimeExports.jsx("div",{children:a?jsxRuntimeExports.jsx("div",{"data-test":`helper-text__${i?"error":"hint"}`,className:`fields__helper-text ${i?"error":""}`,children:a}):null}),jsxRuntimeExports.jsx("div",{children:u?jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("a",{"data-test":"whatsThis",className:"fields__field-link",onClick:u.callback,children:u.text})}):null})]})]}),BrandSwitcher=()=>{const t=useNavigate(),e="xgrit_brand",[n,s]=reactExports.useState(api.get(e)??"ace"),i=[{key:"ace",value:"ace"},{key:"dec",value:"dec"},{key:"flvs",value:"flvs"},{key:"ids",value:"ids"},{key:"aarp",value:"aarp"}],a=()=>{n&&(window.aceRootScope.domain.includes("localhost")?api.set(e,n,{sameSite:"Lax"}):api.set(e,n,{sameSite:"strict",secure:!0}),location.reload())},o=l=>{if(l.preventDefault(),!!ModelAbstract.getCurrent("user")?._id){t("/dash/index");return}t("/user/signin")};return jsxRuntimeExports.jsx("div",{className:"grit screen brand-switcher",children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Brand: Switcher"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("h2",{className:"headings__h2",children:["Brand: ",n.toUpperCase()]}),jsxRuntimeExports.jsx("p",{children:'"You must do what you feel is right, of course." --Obi-Wan Kenobi'})]})}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsxs("form",{children:[jsxRuntimeExports.jsx(Select,{"data-test":"selectServer",id:"brandSwitcher",name:"brandSwitcher",onChange:l=>{s(l.target.value||"ace")},options:i,value:n}),jsxRuntimeExports.jsxs("div",{className:"button-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>{a()},disabled:!n,stretch:!0,iconLeft:"repeat",children:"Change Brand"}),jsxRuntimeExports.jsx(Button$2,{onClick:l=>{o(l)},disabled:n!==api.get(e),stretch:!0,iconLeft:"home",children:"Go Home"})]})]})})]})})},Hijack=()=>{const t=useNavigate(),e=useDispatch(),{aceRootScope:n}=window,[s,i]=reactExports.useState([{_id:"",title:"Choose API Server..."}]),[a,o]=reactExports.useState(""),[l,u]=reactExports.useState(""),c=utilities.getQueryParams(),{serverkey:d}=c,p=s.map(g=>({key:g.title,value:g._id}));reactExports.useEffect(()=>{(async()=>{try{u("");const E=await ApiEndpoint.getServerList(window.aceConstants.ACEAPICONF),x=d?E.find(b=>b.serverKey===d)?._id:ApiEndpoint.getCurrentApi(window.aceConstants.ACEAPICONF.env,s)?._id;o(x),i(E)}catch(E){u(E?.message?E.message:E)}})()},[]);const m=g=>{g.preventDefault();const E=s.find(S=>S._id===a);if(set$2("api","hijack",E),n.serverTitle=get$4("api","hijack").title,hijack({baseUrl:E?.serverUrl}),!!ModelAbstract.getCurrent("user")?._id){e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),t("/dash/index");return}e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"user.signin"}}),t("/user/signin")};return jsxRuntimeExports.jsx("div",{className:"grit screen hijack",children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Hijack"}),jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:["So you think you got what it takes to QA with the best of them? Well then, get lucky.",l&&jsxRuntimeExports.jsx("p",{role:"alert",className:"alert",children:l})]})]})}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("form",{autoComplete:"off",name:"form",onSubmit:m,noValidate:!0,children:[jsxRuntimeExports.jsx(Select,{label:"API Server Selection","data-test":"selectServer",id:"apiSelection",name:"apiSelection",onChange:g=>{o(g.target.value)},options:p,value:a}),jsxRuntimeExports.jsx(Button$2,{type:"submit","data-test":"changeServerButton",disabled:!a,children:"Change Server"})]})})})]})})},ThemeSwitcher=()=>{const{theme:t,setTheme:e}=useTheme(),[n,s]=reactExports.useState(t??"light");return jsxRuntimeExports.jsx("div",{className:"grit screen theme-switcher",children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Theme Switcher"})})}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsxs("form",{children:[jsxRuntimeExports.jsx(Select,{id:"themeSwitcher",name:"themeSwitcher",onChange:i=>{s(i.target?.value)},options:[{key:"system",value:"system"},{key:"light",value:"light"},{key:"dark",value:"dark"},{key:"high-contrast",value:"high-contrast"}],value:n}),jsxRuntimeExports.jsx(Button$2,{type:"button",onClick:()=>{e(n)},children:"Set Theme"})]})})]})})},IS_TEST_ENV=typeof window<"u"&&(window.navigator?.webdriver||!1),useComponentLog=t=>{IS_TEST_ENV&&reactExports.useEffect(()=>(console.log(`[COMPONENT] ${t} mounted`),()=>{console.log(`[COMPONENT] ${t} unmounted`)}),[t])},formatDate=t=>t?hooks$1(t).format("MMM D, YYYY"):"",ActivityProgress=()=>{useComponentLog("ActivityProgress");const{dashboard:t}=store.getState(),e=t.levelDataOdyssey?.map(s=>s.data),{domainConf:n}=window.aceRootScope;return jsxRuntimeExports.jsx("div",{className:"grit screen activity-progress",children:jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Progress Log"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"See when you started and finished each chapter and how many points you have."})]}),jsxRuntimeExports.jsx("section",{className:"content",children:e.map((s,i)=>jsxRuntimeExports.jsxs("article",{className:s.isLocked?"locked-article":"",children:[jsxRuntimeExports.jsxs("header",{className:"level",children:[jsxRuntimeExports.jsxs("div",{className:"paragraph__bold",children:[jsxRuntimeExports.jsxs("span",{children:["L",i+1,": "]}),s.title||"Chapter Title"]}),jsxRuntimeExports.jsx("div",{className:"paragraph__bold",children:"Start"}),jsxRuntimeExports.jsx("div",{className:"paragraph__bold",children:"Finish"}),n.IsPoints?jsxRuntimeExports.jsxs("div",{className:"paragraph__bold",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-trophy"})," ",s.pointCount??0]}):null]}),s.chapterList.map((a,o)=>jsxRuntimeExports.jsxs("section",{className:"chapter",children:[jsxRuntimeExports.jsxs("div",{className:"paragraph__regular",children:[jsxRuntimeExports.jsxs("strong",{children:["C",o+1,": "]})," ",a.title||`Chapter Title ${a.key}`]}),jsxRuntimeExports.jsxs("div",{className:"paragraph__regular",children:[jsxRuntimeExports.jsx("span",{id:`startDate_${i+1}_${o+1}`,className:"paragraph__regular",children:formatDate(a.startDate)}),jsxRuntimeExports.jsx("span",{className:"paragraph__regular",children:formatDate(a.endDate)})]}),jsxRuntimeExports.jsxs("div",{className:"paragraph__regular",children:[jsxRuntimeExports.jsx("span",{id:`endDate_${i+1}}_${o+1}}`,className:"paragraph__regular",children:formatDate(a.endDate)}),jsxRuntimeExports.jsx("span",{className:"paragraph__regular",children:formatDate(a.endDate)})]}),n.IsPoints?jsxRuntimeExports.jsxs("div",{className:"paragraph__regular",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-trophy"})," ",a.pointCount||0]}):null]},o))]},i))})]})})};var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=t,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var t=requireReactPropTypesSecret();function e(){}function n(){}return n.resetWarningCache=e,factoryWithThrowingShims=function(){function s(o,l,u,c,d,p){if(p!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}s.isRequired=s;function i(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function _objectSpread2$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(s){_defineProperty$1(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function _typeof(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_unsupportedIterableToArray$1(t,e)||_nonIterableRest$1()}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}function _iterableToArrayLimit$1(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var s=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(s.push(o.value),!(e&&s.length===e));i=!0);}catch(u){a=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function _unsupportedIterableToArray$1(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(t,e)}}function _arrayLikeToArray$1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var useAttachEvent=function(e,n,s){var i=!!s,a=React$1.useRef(s);React$1.useEffect(function(){a.current=s},[s]),React$1.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},usePrevious$1=function(e){var n=React$1.useRef(e);return React$1.useEffect(function(){n.current=e},[e]),n.current},isUnknownObject=function(e){return e!==null&&_typeof(e)==="object"},isPromise$1=function(e){return isUnknownObject(e)&&typeof e.then=="function"},isStripe=function(e){return isUnknownObject(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},PLAIN_OBJECT_STR="[object Object]",isEqual=function t(e,n){if(!isUnknownObject(e)||!isUnknownObject(n))return e===n;var s=Array.isArray(e),i=Array.isArray(n);if(s!==i)return!1;var a=Object.prototype.toString.call(e)===PLAIN_OBJECT_STR,o=Object.prototype.toString.call(n)===PLAIN_OBJECT_STR;if(a!==o)return!1;if(!a&&!s)return e===n;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var c={},d=0;d<l.length;d+=1)c[l[d]]=!0;for(var p=0;p<u.length;p+=1)c[u[p]]=!0;var m=Object.keys(c);if(m.length!==l.length)return!1;var g=e,E=n,x=function(S){return t(g[S],E[S])};return m.every(x)},extractAllowedOptionsUpdates=function(e,n,s){return isUnknownObject(e)?Object.keys(e).reduce(function(i,a){var o=!isUnknownObject(n)||!isEqual(e[a],n[a]);return s.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?_objectSpread2$1(_objectSpread2$1({},i||{}),{},_defineProperty$1({},a,e[a])):i},null):null},INVALID_STRIPE_ERROR$2="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",validateStripe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:INVALID_STRIPE_ERROR$2;if(e===null||isStripe(e))return e;throw new Error(n)},parseStripeProp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:INVALID_STRIPE_ERROR$2;if(isPromise$1(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return validateStripe(i,n)})};var s=validateStripe(e,n);return s===null?{tag:"empty"}:{tag:"sync",stripe:s}},registerWithStripeJs=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},ElementsContext=React$1.createContext(null);ElementsContext.displayName="ElementsContext";var parseElementsContext=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},Elements=function(e){var n=e.stripe,s=e.options,i=e.children,a=React$1.useMemo(function(){return parseStripeProp(n)},[n]),o=React$1.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(s):null}}),l=_slicedToArray$1(o,2),u=l[0],c=l[1];React$1.useEffect(function(){var m=!0,g=function(x){c(function(b){return b.stripe?b:{stripe:x,elements:x.elements(s)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(E){E&&m&&g(E)}):a.tag==="sync"&&!u.stripe&&g(a.stripe),function(){m=!1}},[a,u,s]);var d=usePrevious$1(n);React$1.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var p=usePrevious$1(s);return React$1.useEffect(function(){if(u.elements){var m=extractAllowedOptionsUpdates(s,p,["clientSecret","fonts"]);m&&u.elements.update(m)}},[s,p,u.elements]),React$1.useEffect(function(){registerWithStripeJs(u.stripe)},[u.stripe]),React$1.createElement(ElementsContext.Provider,{value:u},i)};Elements.propTypes={stripe:PropTypes.any,options:PropTypes.object};var useElementsContextWithUseCase=function(e){var n=React$1.useContext(ElementsContext);return parseElementsContext(n,e)},useElements=function(){var e=useElementsContextWithUseCase("calls useElements()"),n=e.elements;return n};PropTypes.func.isRequired;var CustomCheckoutSdkContext=React$1.createContext(null);CustomCheckoutSdkContext.displayName="CustomCheckoutSdkContext";var parseCustomCheckoutSdkContext=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},CustomCheckoutContext=React$1.createContext(null);CustomCheckoutContext.displayName="CustomCheckoutContext";PropTypes.any,PropTypes.shape({clientSecret:PropTypes.string.isRequired,elementsOptions:PropTypes.object}).isRequired;var useElementsOrCustomCheckoutSdkContextWithUseCase=function(e){var n=React$1.useContext(CustomCheckoutSdkContext),s=React$1.useContext(ElementsContext);if(n&&s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?parseCustomCheckoutSdkContext(n,e):parseElementsContext(s,e)},capitalized=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},createElementComponent=function(e,n){var s="".concat(capitalized(e),"Element"),i=function(u){var c=u.id,d=u.className,p=u.options,m=p===void 0?{}:p,g=u.onBlur,E=u.onFocus,x=u.onReady,b=u.onChange,S=u.onEscape,C=u.onClick,T=u.onLoadError,I=u.onLoaderStart,D=u.onNetworksChange,P=u.onConfirm,O=u.onCancel,B=u.onShippingAddressChange,F=u.onShippingRateChange,H=useElementsOrCustomCheckoutSdkContextWithUseCase("mounts <".concat(s,">")),Q="elements"in H?H.elements:null,Z="customCheckoutSdk"in H?H.customCheckoutSdk:null,ne=React$1.useState(null),re=_slicedToArray$1(ne,2),se=re[0],G=re[1],K=React$1.useRef(null),M=React$1.useRef(null);useAttachEvent(se,"blur",g),useAttachEvent(se,"focus",E),useAttachEvent(se,"escape",S),useAttachEvent(se,"click",C),useAttachEvent(se,"loaderror",T),useAttachEvent(se,"loaderstart",I),useAttachEvent(se,"networkschange",D),useAttachEvent(se,"confirm",P),useAttachEvent(se,"cancel",O),useAttachEvent(se,"shippingaddresschange",B),useAttachEvent(se,"shippingratechange",F),useAttachEvent(se,"change",b);var W;x&&(e==="expressCheckout"?W=x:W=function(){x(se)}),useAttachEvent(se,"ready",W),React$1.useLayoutEffect(function(){if(K.current===null&&M.current!==null&&(Q||Z)){var z=null;Z?z=Z.createElement(e,m):Q&&(z=Q.create(e,m)),K.current=z,G(z),z&&z.mount(M.current)}},[Q,Z,m]);var ee=usePrevious$1(m);return React$1.useEffect(function(){if(K.current){var z=extractAllowedOptionsUpdates(m,ee,["paymentRequest"]);z&&"update"in K.current&&K.current.update(z)}},[m,ee]),React$1.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),React$1.createElement("div",{id:c,className:d,ref:M})},a=function(u){useElementsOrCustomCheckoutSdkContextWithUseCase("mounts <".concat(s,">"));var c=u.id,d=u.className;return React$1.createElement("div",{id:c,className:d})},o=n?a:i;return o.propTypes={id:PropTypes.string,className:PropTypes.string,onChange:PropTypes.func,onBlur:PropTypes.func,onFocus:PropTypes.func,onReady:PropTypes.func,onEscape:PropTypes.func,onClick:PropTypes.func,onLoadError:PropTypes.func,onLoaderStart:PropTypes.func,onNetworksChange:PropTypes.func,onConfirm:PropTypes.func,onCancel:PropTypes.func,onShippingAddressChange:PropTypes.func,onShippingRateChange:PropTypes.func,options:PropTypes.object},o.displayName=s,o.__elementType=e,o},isServer=typeof window>"u",EmbeddedCheckoutContext=React$1.createContext(null);EmbeddedCheckoutContext.displayName="EmbeddedCheckoutProviderContext";var useStripe=function(){var e=useElementsOrCustomCheckoutSdkContextWithUseCase("calls useStripe()"),n=e.stripe;return n};createElementComponent("auBankAccount",isServer);var CardElement=createElementComponent("card",isServer);createElementComponent("cardNumber",isServer);createElementComponent("cardExpiry",isServer);createElementComponent("cardCvc",isServer);createElementComponent("fpxBank",isServer);createElementComponent("iban",isServer);createElementComponent("idealBank",isServer);createElementComponent("p24Bank",isServer);createElementComponent("epsBank",isServer);var PaymentElement=createElementComponent("payment",isServer);createElementComponent("expressCheckout",isServer);createElementComponent("currencySelector",isServer);createElementComponent("paymentRequestButton",isServer);createElementComponent("linkAuthentication",isServer);createElementComponent("address",isServer);createElementComponent("shippingAddress",isServer);createElementComponent("paymentMethodMessaging",isServer);createElementComponent("affirmMessage",isServer);createElementComponent("afterpayClearpayMessage",isServer);var V3_URL="https://js.stripe.com/v3",V3_URL_REGEX=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,EXISTING_SCRIPT_MESSAGE="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",findScript=function(){for(var e=document.querySelectorAll('script[src^="'.concat(V3_URL,'"]')),n=0;n<e.length;n++){var s=e[n];if(V3_URL_REGEX.test(s.src))return s}return null},injectScript=function(e){var n="",s=document.createElement("script");s.src="".concat(V3_URL).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(s),s},registerWrapper=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"4.6.0",startTime:n})},stripePromise=null,onErrorListener=null,onLoadListener=null,onError$1=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},onLoad=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},loadScript=function(e){return stripePromise!==null?stripePromise:(stripePromise=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var i=findScript();if(!(i&&e)){if(!i)i=injectScript(e);else if(i&&onLoadListener!==null&&onErrorListener!==null){var a;i.removeEventListener("load",onLoadListener),i.removeEventListener("error",onErrorListener),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=injectScript(e)}}onLoadListener=onLoad(n,s),onErrorListener=onError$1(s),i.addEventListener("load",onLoadListener),i.addEventListener("error",onErrorListener)}catch(o){s(o);return}}),stripePromise.catch(function(n){return stripePromise=null,Promise.reject(n)}))},initStripe=function(e,n,s){if(e===null)return null;var i=e.apply(void 0,n);return registerWrapper(i,s),i},stripePromise$1,loadCalled=!1,getStripePromise=function(){return stripePromise$1||(stripePromise$1=loadScript(null).catch(function(e){return stripePromise$1=null,Promise.reject(e)}),stripePromise$1)};Promise.resolve().then(function(){return getStripePromise()}).catch(function(t){loadCalled||console.warn(t)});var loadStripe=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];loadCalled=!0;var i=Date.now();return getStripePromise().then(function(a){return initStripe(a,n,i)})};const useIdleLogoutTimer=()=>{const t=useNavigate(),e=useSelector(i=>i.course.idleLogoutSeconds)??0,n=reactExports.useRef(null),s=reactExports.useCallback(()=>{e!==0&&(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{t("/user/signout")},e*1e3))},[e,t]);return reactExports.useEffect(()=>{const i=["mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","scroll"];return i.forEach(a=>{document.addEventListener(a,s)}),s(),()=>{i.forEach(a=>{document.removeEventListener(a,s)}),n.current&&clearTimeout(n.current)}},[s]),null},CheckoutForm=({product:t})=>{const e=useStripe(),n=useElements(),s=useDispatch(),{user:i,course:a}=store.getState(),[o,l]=reactExports.useState(""),[u,c]=reactExports.useState(!1),[d,p]=reactExports.useState(!1),[m,g]=reactExports.useState(!1),[E,x]=reactExports.useState(t[0].pricing.current),[b,S]=reactExports.useState(!1),{aceRootScope:C}=window,{studentCurrent:T,courseCurrent:I,domainConf:D}=C,P=I??a,O=re=>{s({type:SET_IS_NOT_LOADING}),g(!1),l(re.message??"An unknown error occurred"),setTimeout(()=>{l("")},3e3)},B=(re,se={offPercent:0})=>re*(1-se.offPercent),F=(re,se,G="Continue")=>{s({type:SHOW_MODAL,payload:{modal:{message:se,title:re,buttonText:G}}})},H=re=>{const se={40201:"Your credit card was declined. Please try another card or contact your bank.",40203:"Your CVC security code does not match your card. Please try another CVC or another card.",40204:"Your card is expired. Please try another card or contact your bank."};if(se[re.code]){F("Oops!",se[re.code]);return}F("Oops!","We are unable to process your card. Please try another card.")},Q=re=>{C.progressCurrent={...C.progressCurrent,isPurchased:!0},C.progressCurrent.purchaseDate={...C.progressCurrent,purchaseDate:re.createdAt},s(updateProgress(C.progressCurrent)),s({type:SHOW_MODAL,payload:{modal:{message:`Your purchase was successful. We have emailed a receipt to ${C.userCurrent.username?`${C.userCurrent.username}.`:"the email address associated with this account."}`,title:"Course purchased successfully",buttonText:"Continue",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}})};reactExports.useEffect(()=>{t&&x(B(t[0].pricing.current))},[t]);const Z=async()=>{if(s({type:SET_IS_LOADING}),!e||!n)return;g(!0);const{error:re}=await n.submit();if(re){O(re);return}const{error:se,paymentMethod:G}=await e.createPaymentMethod({elements:n});if(se){O(se);return}const K=P.isRequireTermsAndConditions&&!u,M=P.key==="TX.ADE"&&!d;K&&F("Oops!","Please agree to the Terms and Conditions."),M&&F("Oops!","Please confirm you are old enough to take this.");const W=B(t[0].pricing.current),ee=`${D.Links.BaseOfAce||document.location.origin}/activity/upgrade`,z=`${D.Links.BaseOfAce||document.location.origin}/dash/index`,ae={email:i.username,productIdList:t.map(ce=>ce._id),couponIdList:[],chargeAmount:W,token:G.id,accountType:i.accountType,url:ee,returnUrl:z,...i.accountType==="parent"&&T&&{firstName:T.firstName,lastName:T.lastName,userEmail:T.username,teacherEmail:i.username,teacherFirstName:i.firstName,teacherLastName:i.lastName},...i.accountType==="student"&&{firstName:i.firstName,lastName:i.lastName,userEmail:"",teacherEmail:"",teacherFirstName:"",teacherLastName:""}};try{const ce=await purchaseReceiptAnonymous(ae);s({type:SET_IS_NOT_LOADING}),ce.vendorStatus==="succeeded"&&ce&&Q(ce)}catch(ce){H(ce),s({type:SET_IS_NOT_LOADING})}},ne=re=>{re.preventDefault(),Z().catch(se=>{console.error(se)})};return jsxRuntimeExports.jsxs("form",{onSubmit:ne,children:[o&&jsxRuntimeExports.jsx(Alert,{variant:"error",title:"Oops!",description:o}),jsxRuntimeExports.jsx(PaymentElement,{onChange:re=>{S(re.complete)}}),jsxRuntimeExports.jsxs("div",{className:"terms-conditions-check flex my-4 gap-1 items-center",children:[jsxRuntimeExports.jsx(Checkbox,{onChange:()=>{c(re=>!re)},variant:"md",id:"tandc",checked:u,required:!0,label:"I agree to the"}),jsxRuntimeExports.jsx("a",{href:P.termsUrl,target:"_blank",rel:"noreferrer",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("span",{className:"-ml-1",children:"."})]}),P.key==="TX.ADE"?jsxRuntimeExports.jsx("div",{className:"over-age-check",children:jsxRuntimeExports.jsx(Checkbox,{onChange:()=>{p(re=>!re)},id:"overAge",checked:d,label:"I am eighteen years old or older.",required:!0})}):null,jsxRuntimeExports.jsxs(Button$2,{type:"submit","data-test":"purchaseButton",disabled:!e||m||!b||P.key==="TX.ADE"&&!d||!u,children:["Purchase for $",E.toFixed(2)]})]})},Upgrade=()=>{useComponentLog("UpgradeScreen");const t=window.aceConstants.TOKENS.stripe,[e,n]=reactExports.useState(),[s,i]=reactExports.useState(),[a,o]=reactExports.useState(),{aceRootScope:l}=window,{progress:u}=store.getState();useIdleLogoutTimer();const{theme:c}=useTheme();reactExports.useEffect(()=>{if(!e){const{Stripe:p}=window;p&&n(p(t))}},[]),reactExports.useEffect(()=>{(async()=>{try{const m=await progressGetProductList(u._id,["COURSE"]);if(m){const g=m.filter(x=>x.courseId===l.courseCurrent._id),E=Math.round(g[0].pricing.current*100);i(g),o({mode:"payment",amount:E,currency:"usd",loader:"auto",paymentMethodCreation:"manual",paymentMethodTypes:["card","link"],appearance:{theme:c==="ace-dark"?"night":"stripe"}})}}catch(m){console.error(m)}})()},[u]);const d=loadStripe(t);return jsxRuntimeExports.jsx("div",{className:"grit screen upgrade",children:e&&a?jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",id:"credit-card-title",children:"Unlock The Full Course"}),jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:["You're one step away from unlocking the full ",l.courseCurrent.title," course. Once purchased, you can view all pages, take every quiz, and get"," ",l.courseCurrent.type!=="GEN"?"your State Approved certificate":"the knowledge you need to ace the State permit test","!"]}),jsxRuntimeExports.jsx(Elements,{stripe:d,options:a,children:jsxRuntimeExports.jsx(CheckoutForm,{product:s})})]}):null})},ActivityRoutes=[{path:"activity",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"upgrade",element:jsxRuntimeExports.jsx(Upgrade,{})},{path:"enroll",element:jsxRuntimeExports.jsx(Enroll,{})},{path:"progress",element:jsxRuntimeExports.jsx(ActivityProgress,{})},{path:"hijack",element:jsxRuntimeExports.jsx(Hijack,{})},{path:"brand",element:jsxRuntimeExports.jsx(BrandSwitcher,{})},{path:"theme",element:jsxRuntimeExports.jsx(ThemeSwitcher,{})}]}],AddonCard=({buttonLabel:t,description:e,disclaimer:n,onClickPurchase:s,onClickLearnMore:i,onProductMount:a,productIndex:o,headline:l,isUnavailable:u=!1,price:c,title:d,id:p,isUpsellPurchased:m=!1,maxPrice:g})=>{const[E,x]=reactExports.useState(!1),[b,S]=reactExports.useState(!1);reactExports.useEffect(()=>{S(m)},[m]),reactExports.useEffect(()=>{a&&o!==void 0&&Number.isInteger(o)&&a(o)},[]);const C=I=>{I.preventDefault(),x(!E),i&&i(!E)},T=I=>{I.preventDefault(),s&&s(!b),S(!b)};return jsxRuntimeExports.jsxs("div",{id:p,"data-test":"productCard",className:`grit add-on-card ${b||u?"resting-shadow":""}`,children:[jsxRuntimeExports.jsxs("header",{children:[u?jsxRuntimeExports.jsx("span",{className:"metadata__regular",children:"Add-on currently unavailable"}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{"data-test":"productTitle",className:"headings__h2",children:l}),!!g&&g>c&&jsxRuntimeExports.jsx("div",{className:"price-wrapper",children:jsxRuntimeExports.jsxs("h2",{className:"headings__h2 price",children:[jsxRuntimeExports.jsx("span",{children:`$${c.toFixed(2)} `}),jsxRuntimeExports.jsx("span",{className:"strikethrough-price",children:`$${g.toFixed(2)}`})]})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"metadata__regular",children:d}),(!g||g<c)&&jsxRuntimeExports.jsx("h2",{className:"headings__h2 price",children:`$${c.toFixed(2)}`}),!!g&&g>c&&jsxRuntimeExports.jsx("div",{className:"percent-off",children:jsxRuntimeExports.jsxs("span",{className:"paragraph__condensed-bold",children:[((g-c)/g*100).toFixed(0),"% Off"]})})]})]}),jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx(AnimatedButton,{disabled:u,"data-test":"buyButton",affirmed:b,onClick:b?void 0:T,ariaLabel:"Buy Addon Button",children:t}),!!e&&jsxRuntimeExports.jsx(Button$2,{"data-test":"learnMoreToggle",onClick:C,variant:"text",color:"secondary",children:"Learn More"})]}),E&&e?jsxRuntimeExports.jsxs("footer",{children:[jsxRuntimeExports.jsx("div",{className:"paragraph__regular description","data-test":"learnMoreInfo",dangerouslySetInnerHTML:{__html:e}}),n?jsxRuntimeExports.jsx("p",{className:"paragraph__condensed disclaimer",children:n}):null]}):null]})},PersistentUpsells=()=>{useComponentLog("PersistentUpsells");const{aceRootScope:t}=window,e=useSelector(selectPurchaseAvailablePersistentUpsellList,shallowEqual$1),n=useSelector(selectPurchaseUnavailablePersistentUpsellList,shallowEqual$1),s=useSelector(selectPurchasePersistentUpsell),i=useDispatch(),a=c=>{const d=s[c];d&&!d.is.purchased&&i(onShowUpsell(null,d,"PERSISTENT"))},o=c=>{if(!c.is.purchased){const d=get$5(t,"progressCurrent.currentLevel");i(genericAnalyticsAndIterableEvent("Upsell Clicked",{to:"BUY",from:"PERSISTENT",price:c.price,product_id:c._id,level_idx:d,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${d}._id`)})),i(clickBuyUpsell(c.key,"purchase.payment",{flow:"persistent",productType:""},"PERSISTENT"))}},l=(c,d,p)=>{if(c){const m=get$5(t,"progressCurrent.currentLevel");i(genericAnalyticsAndIterableEvent("Upsell Clicked",{to:"LEARN_MORE",from:p,price:d.price,product_id:d._id,level_idx:m,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${m}._id`)}))}},u=(c,d,p)=>c.length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:`headings__h3 ${p}`,children:d}),c.map((m,g)=>jsxRuntimeExports.jsx(AddonCard,{buttonLabel:m.is.purchased?m.ctaPurchased:m.ctaUnpurchased,description:m.learnMore,headline:m.headline,price:m.price,title:m.title,id:`persistent-upsell-container-${m._id}`,isUpsellPurchased:m.is.purchased,onClickPurchase:()=>{o(m)},productIndex:g,onClickLearnMore:E=>{l(E,m,"PERSISTENT")},onProductMount:E=>{a(E)},isUnavailable:m.is.upsellEventExpired},m._id))]}):null;return reactExports.useEffect(()=>{const c=get$5(t,"progressCurrent._id","");c&&checkPurchaseAvailable(c,"PERSISTENT").then(p=>{const m=get$5(p,"milestoneData.productList",[]);i(setPersistentUpsells(m))}).catch(p=>{console.error(p)});const d=`hasVisitedAddonsPage-${t.userCurrent?._id}-${t.courseCurrent?._id}`;i({type:CLEAR_ITEMS_FROM_ORDER}),i(screenView("Persistent Upsell")),t.hasVisitedAddonsPage=!0,localStorage.setItem(d,"1")},[]),jsxRuntimeExports.jsxs("div",{className:"grit screen addons",children:[u(e,"Currently available","available")??jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"There are currently no available upgrades or addons."}),u(n,"No longer available","unavailable")]})},AddonRoutes=[{path:"addons",element:jsxRuntimeExports.jsx(PersistentUpsells,{})}],getListItemIcon=t=>{switch(t){case"AFFIDAVIT":return"affidavit";case"CALENDAR":return"calendar";case"FINGERPRINT":return"thumbprint";case"LOCKED":return"locked";case"MAINTENANCE":return"maintenance";case"PRICE":return"coin";case"TIME":return"wait";case"COMPLETE":return"complete";case"CHECKMARK":return"checkmark-line"}},FloatingProgressBar=({percentage:t,size:e="",isAnimated:n=!1,previousPercentage:s})=>{const i=Math.min(100,Math.max(0,t)),[a,o]=reactExports.useState(()=>getPercentage(s,i));return reactExports.useEffect(()=>{const l=setTimeout(()=>{o(i)},500);return()=>{clearTimeout(l)}},[t]),jsxRuntimeExports.jsx("div",{className:`grit floating-progress-bar ${e}`,"data-test":"courseProgress",children:n?jsxRuntimeExports.jsx(motion.div,{initial:{width:`${a}%`},animate:{width:`${a}%`},transition:{duration:1},"data-test":"courseProgressFiller",className:`inner ${e} ${Number(i)===100?"complete":""}`}):jsxRuntimeExports.jsx("div",{"data-test":"courseProgressFiller",className:`inner ${e} ${Number(t)===100?"complete":""}`,style:{width:`${i}%`}})})},getPercentage=(t,e)=>t===void 0||t===100||t>e?e:t,PreferencePanel=({id:t,windowWidth:e,selected:n,className:s,children:i})=>{const a=useOutOfBounds(`#grit-dropdown-menu-${t}`,e,n);return jsxRuntimeExports.jsx("ul",{className:classNames("grit preference-panel floating",s,{"dropdown-menu--outOfBounds":a}),id:`grit-dropdown-menu-${t}`,role:"menu","aria-hidden":!n,"data-test":"PreferencePanel",...n?{}:{inert:""},children:i})},usePersistedState=(t,e)=>{const[n,s]=reactExports.useState(()=>{try{const a=window.localStorage.getItem(t);return a?JSON.parse(a):e}catch(a){return console.error(a),e}});return[n,a=>{try{const o=a instanceof Function?a(n):a;s(o),window.localStorage.setItem(t,JSON.stringify(o))}catch(o){console.error(o)}}]};function composeEventHandlers$1(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function setRef(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function composeRefs(...t){return e=>{let n=!1;const s=t.map(i=>{const a=setRef(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():setRef(t[i],null)}}}}function useComposedRefs(...t){return reactExports.useCallback(composeRefs(...t),t)}function createContextScope(t,e=[]){let n=[];function s(a,o){const l=reactExports.createContext(o),u=n.length;n=[...n,o];const c=p=>{const{scope:m,children:g,...E}=p,x=m?.[t]?.[u]||l,b=reactExports.useMemo(()=>E,Object.values(E));return jsxRuntimeExports.jsx(x.Provider,{value:b,children:g})};c.displayName=a+"Provider";function d(p,m){const g=m?.[t]?.[u]||l,E=reactExports.useContext(g);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[c,d]}const i=()=>{const a=n.map(o=>reactExports.createContext(o));return function(l){const u=l?.[t]||a;return reactExports.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return i.scopeName=t,[s,composeContextScopes(i,...e)]}function composeContextScopes(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:u,scopeName:c})=>{const p=u(a)[`__scope${c}`];return{...l,...p}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function createSlot(t){const e=createSlotClone(t),n=reactExports.forwardRef((s,i)=>{const{children:a,...o}=s,l=reactExports.Children.toArray(a),u=l.find(isSlottable);if(u){const c=u.props.children,d=l.map(p=>p===u?reactExports.Children.count(c)>1?reactExports.Children.only(null):reactExports.isValidElement(c)?c.props.children:null:p);return jsxRuntimeExports.jsx(e,{...o,ref:i,children:reactExports.isValidElement(c)?reactExports.cloneElement(c,void 0,d):null})}return jsxRuntimeExports.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function createSlotClone(t){const e=reactExports.forwardRef((n,s)=>{const{children:i,...a}=n;if(reactExports.isValidElement(i)){const o=getElementRef$2(i),l=mergeProps(a,i.props);return i.type!==reactExports.Fragment&&(l.ref=s?composeRefs(s,o):o),reactExports.cloneElement(i,l)}return reactExports.Children.count(i)>1?reactExports.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(t){const e=({children:n})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=SLOTTABLE_IDENTIFIER,e}function isSlottable(t){return reactExports.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(t,e){const n={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function getElementRef$2(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((t,e)=>{const n=createSlot(`Primitive.${e}`),s=reactExports.forwardRef((i,a)=>{const{asChild:o,...l}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(u,{...l,ref:a})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function dispatchDiscreteCustomEvent(t,e){t&&reactDomExports.flushSync(()=>t.dispatchEvent(e))}function useCallbackRef$1(t){const e=reactExports.useRef(t);return reactExports.useEffect(()=>{e.current=t}),reactExports.useMemo(()=>(...n)=>e.current?.(...n),[])}function useEscapeKeydown(t,e=globalThis?.document){const n=useCallbackRef$1(t);reactExports.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var DISMISSABLE_LAYER_NAME$1="DismissableLayer",CONTEXT_UPDATE$1="dismissableLayer.update",POINTER_DOWN_OUTSIDE$1="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE$1="dismissableLayer.focusOutside",originalBodyPointerEvents$1,DismissableLayerContext$1=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer$1=reactExports.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=t,c=reactExports.useContext(DismissableLayerContext$1),[d,p]=reactExports.useState(null),m=d?.ownerDocument??globalThis?.document,[,g]=reactExports.useState({}),E=useComposedRefs(e,O=>p(O)),x=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=x.indexOf(b),C=d?x.indexOf(d):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,I=C>=S,D=usePointerDownOutside$1(O=>{const B=O.target,F=[...c.branches].some(H=>H.contains(B));!I||F||(i?.(O),o?.(O),O.defaultPrevented||l?.())},m),P=useFocusOutside$1(O=>{const B=O.target;[...c.branches].some(H=>H.contains(B))||(a?.(O),o?.(O),O.defaultPrevented||l?.())},m);return useEscapeKeydown(O=>{C===c.layers.size-1&&(s?.(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},m),reactExports.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents$1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),dispatchUpdate$1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=originalBodyPointerEvents$1)}},[d,m,n,c]),reactExports.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),dispatchUpdate$1())},[d,c]),reactExports.useEffect(()=>{const O=()=>g({});return document.addEventListener(CONTEXT_UPDATE$1,O),()=>document.removeEventListener(CONTEXT_UPDATE$1,O)},[]),jsxRuntimeExports.jsx(Primitive.div,{...u,ref:E,style:{pointerEvents:T?I?"auto":"none":void 0,...t.style},onFocusCapture:composeEventHandlers$1(t.onFocusCapture,P.onFocusCapture),onBlurCapture:composeEventHandlers$1(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:composeEventHandlers$1(t.onPointerDownCapture,D.onPointerDownCapture)})});DismissableLayer$1.displayName=DISMISSABLE_LAYER_NAME$1;var BRANCH_NAME$1="DismissableLayerBranch",DismissableLayerBranch$1=reactExports.forwardRef((t,e)=>{const n=reactExports.useContext(DismissableLayerContext$1),s=reactExports.useRef(null),i=useComposedRefs(e,s);return reactExports.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),jsxRuntimeExports.jsx(Primitive.div,{...t,ref:i})});DismissableLayerBranch$1.displayName=BRANCH_NAME$1;function usePointerDownOutside$1(t,e=globalThis?.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1),i=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let u=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE$1,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function useFocusOutside$1(t,e=globalThis?.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1);return reactExports.useEffect(()=>{const i=a=>{a.target&&!s.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE$1,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function dispatchUpdate$1(){const t=new CustomEvent(CONTEXT_UPDATE$1);document.dispatchEvent(t)}function handleAndDispatchCustomEvent$1(t,e,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),s?dispatchDiscreteCustomEvent(i,a):i.dispatchEvent(a)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",t[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count$1--}},[])}function createFocusGuard(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,u]=reactExports.useState(null),c=useCallbackRef$1(i),d=useCallbackRef$1(a),p=reactExports.useRef(null),m=useComposedRefs(e,x=>u(x)),g=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(s){let x=function(T){if(g.paused||!l)return;const I=T.target;l.contains(I)?p.current=I:focus(p.current,{select:!0})},b=function(T){if(g.paused||!l)return;const I=T.relatedTarget;I!==null&&(l.contains(I)||focus(p.current,{select:!0}))},S=function(T){if(document.activeElement===document.body)for(const D of T)D.removedNodes.length>0&&focus(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const C=new MutationObserver(S);return l&&C.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),C.disconnect()}}},[s,l,g.paused]),reactExports.useEffect(()=>{if(l){focusScopesStack.add(g);const x=document.activeElement;if(!l.contains(x)){const S=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);l.addEventListener(AUTOFOCUS_ON_MOUNT,c),l.dispatchEvent(S),S.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(l)),{select:!0}),document.activeElement===x&&focus(l))}return()=>{l.removeEventListener(AUTOFOCUS_ON_MOUNT,c),setTimeout(()=>{const S=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);l.addEventListener(AUTOFOCUS_ON_UNMOUNT,d),l.dispatchEvent(S),S.defaultPrevented||focus(x??document.body,{select:!0}),l.removeEventListener(AUTOFOCUS_ON_UNMOUNT,d),focusScopesStack.remove(g)},0)}}},[l,c,d,g]);const E=reactExports.useCallback(x=>{if(!n&&!s||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,S=document.activeElement;if(b&&S){const C=x.currentTarget,[T,I]=getTabbableEdges(C);T&&I?!x.shiftKey&&S===I?(x.preventDefault(),n&&focus(T,{select:!0})):x.shiftKey&&S===T&&(x.preventDefault(),n&&focus(I,{select:!0})):S===C&&x.preventDefault()}},[n,s,g.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...o,ref:m,onKeyDown:E})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(focus(s,{select:e}),document.activeElement!==n)return}function getTabbableEdges(t){const e=getTabbableCandidates(t),n=findVisible(e,t),s=findVisible(e.reverse(),t);return[n,s]}function getTabbableCandidates(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function findVisible(t,e){for(const n of t)if(!isHidden(n,{upTo:e}))return n}function isHidden(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function isSelectableInput(t){return t instanceof HTMLInputElement&&"select"in t}function focus(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&isSelectableInput(t)&&e&&t.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=arrayRemove(t,e),t.unshift(e)},remove(e){t=arrayRemove(t,e),t[0]?.resume()}}}function arrayRemove(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function removeLinks(t){return t.filter(e=>e.tagName!=="A")}var useLayoutEffect2=globalThis?.document?reactExports.useLayoutEffect:()=>{},useReactId=React$2[" useId ".trim().toString()]||(()=>{}),count=0;function useId(t){const[e,n]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{n(s=>s??String(count++))},[t]),t||(e?`radix-${e}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=t=>({x:t,y:t}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(t,e,n){return max(t,min(e,n))}function evaluate(t,e){return typeof t=="function"?t(e):t}function getSide(t){return t.split("-")[0]}function getAlignment(t){return t.split("-")[1]}function getOppositeAxis(t){return t==="x"?"y":"x"}function getAxisLength(t){return t==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(t){return yAxisSides.has(getSide(t))?"y":"x"}function getAlignmentAxis(t){return getOppositeAxis(getSideAxis(t))}function getAlignmentSides(t,e,n){n===void 0&&(n=!1);const s=getAlignment(t),i=getAlignmentAxis(t),a=getAxisLength(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=getOppositePlacement(o)),[o,getOppositePlacement(o)]}function getExpandedPlacements(t){const e=getOppositePlacement(t);return[getOppositeAlignmentPlacement(t),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(t){return t.replace(/start|end/g,e=>oppositeAlignmentMap[e])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(t,e,n){switch(t){case"top":case"bottom":return n?e?rlPlacement:lrPlacement:e?lrPlacement:rlPlacement;case"left":case"right":return e?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(t,e,n,s){const i=getAlignment(t);let a=getSideList(getSide(t),n==="start",s);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(getOppositeAlignmentPlacement)))),a}function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(t){return{top:0,right:0,bottom:0,left:0,...t}}function getPaddingObject(t){return typeof t!="number"?expandPaddingObject(t):{top:t,right:t,bottom:t,left:t}}function rectToClientRect(t){const{x:e,y:n,width:s,height:i}=t;return{width:s,height:i,top:n,left:e,right:e+s,bottom:n+i,x:e,y:n}}function computeCoordsFromPlacement(t,e,n){let{reference:s,floating:i}=t;const a=getSideAxis(e),o=getAlignmentAxis(e),l=getAxisLength(o),u=getSide(e),c=a==="y",d=s.x+s.width/2-i.width/2,p=s.y+s.height/2-i.height/2,m=s[l]/2-i[l]/2;let g;switch(u){case"top":g={x:d,y:s.y-i.height};break;case"bottom":g={x:d,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:p};break;case"left":g={x:s.x-i.width,y:p};break;default:g={x:s.x,y:s.y}}switch(getAlignment(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const computePosition$1=async(t,e,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:p}=computeCoordsFromPlacement(c,s,u),m=s,g={},E=0;for(let x=0;x<l.length;x++){const{name:b,fn:S}=l[x],{x:C,y:T,data:I,reset:D}=await S({x:d,y:p,initialPlacement:s,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=C??d,p=T??p,g={...g,[b]:{...g[b],...I}},D&&E<=50&&(E++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:d,y:p}=computeCoordsFromPlacement(c,m,u)),x=-1)}return{x:d,y:p,placement:m,strategy:i,middlewareData:g}};async function detectOverflow(t,e){var n;e===void 0&&(e={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:u}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=evaluate(e,t),E=getPaddingObject(g),b=l[m?p==="floating"?"reference":"floating":p],S=rectToClientRect(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:u})),C=p==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},D=rectToClientRect(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:T,strategy:u}):C);return{top:(S.top-D.top+E.top)/I.y,bottom:(D.bottom-S.bottom+E.bottom)/I.y,left:(S.left-D.left+E.left)/I.x,right:(D.right-S.right+E.right)/I.x}}const arrow$3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:u}=e,{element:c,padding:d=0}=evaluate(t,e)||{};if(c==null)return{};const p=getPaddingObject(d),m={x:n,y:s},g=getAlignmentAxis(i),E=getAxisLength(g),x=await o.getDimensions(c),b=g==="y",S=b?"top":"left",C=b?"bottom":"right",T=b?"clientHeight":"clientWidth",I=a.reference[E]+a.reference[g]-m[g]-a.floating[E],D=m[g]-a.reference[g],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let O=P?P[T]:0;(!O||!await(o.isElement==null?void 0:o.isElement(P)))&&(O=l.floating[T]||a.floating[E]);const B=I/2-D/2,F=O/2-x[E]/2-1,H=min(p[S],F),Q=min(p[C],F),Z=H,ne=O-x[E]-Q,re=O/2-x[E]/2+B,se=clamp$1(Z,re,ne),G=!u.arrow&&getAlignment(i)!=null&&re!==se&&a.reference[E]/2-(re<Z?H:Q)-x[E]/2<0,K=G?re<Z?re-Z:re-ne:0;return{[g]:m[g]+K,data:{[g]:se,centerOffset:re-se-K,...G&&{alignmentOffset:K}},reset:G}}}),flip$2=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:c}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:x=!0,...b}=evaluate(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const S=getSide(i),C=getSideAxis(l),T=getSide(l)===l,I=await(u.isRTL==null?void 0:u.isRTL(c.floating)),D=m||(T||!x?[getOppositePlacement(l)]:getExpandedPlacements(l)),P=E!=="none";!m&&P&&D.push(...getOppositeAxisPlacements(l,x,E,I));const O=[l,...D],B=await detectOverflow(e,b),F=[];let H=((s=a.flip)==null?void 0:s.overflows)||[];if(d&&F.push(B[S]),p){const re=getAlignmentSides(i,o,I);F.push(B[re[0]],B[re[1]])}if(H=[...H,{placement:i,overflows:F}],!F.every(re=>re<=0)){var Q,Z;const re=(((Q=a.flip)==null?void 0:Q.index)||0)+1,se=O[re];if(se&&(!(p==="alignment"?C!==getSideAxis(se):!1)||H.every(M=>M.overflows[0]>0&&getSideAxis(M.placement)===C)))return{data:{index:re,overflows:H},reset:{placement:se}};let G=(Z=H.filter(K=>K.overflows[0]<=0).sort((K,M)=>K.overflows[1]-M.overflows[1])[0])==null?void 0:Z.placement;if(!G)switch(g){case"bestFit":{var ne;const K=(ne=H.filter(M=>{if(P){const W=getSideAxis(M.placement);return W===C||W==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(W=>W>0).reduce((W,ee)=>W+ee,0)]).sort((M,W)=>M[1]-W[1])[0])==null?void 0:ne[0];K&&(G=K);break}case"initialPlacement":G=l;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function getSideOffsets(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function isAnySideFullyClipped(t){return sides.some(e=>t[e]>=0)}const hide$2=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...i}=evaluate(t,e);switch(s){case"referenceHidden":{const a=await detectOverflow(e,{...i,elementContext:"reference"}),o=getSideOffsets(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:isAnySideFullyClipped(o)}}}case"escaped":{const a=await detectOverflow(e,{...i,altBoundary:!0}),o=getSideOffsets(a,n.floating);return{data:{escapedOffsets:o,escaped:isAnySideFullyClipped(o)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(t,e){const{placement:n,platform:s,elements:i}=t,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=getSide(n),l=getAlignment(n),u=getSideAxis(n)==="y",c=originSides.has(o)?-1:1,d=a&&u?-1:1,p=evaluate(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof E=="number"&&(g=l==="end"?E*-1:E),u?{x:g*d,y:m*c}:{x:m*c,y:g*d}}const offset$2=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:i,y:a,placement:o,middlewareData:l}=e,u=await convertValueToCoords(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:o}}}}},shift$2=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:S,y:C}=b;return{x:S,y:C}}},...u}=evaluate(t,e),c={x:n,y:s},d=await detectOverflow(e,u),p=getSideAxis(getSide(i)),m=getOppositeAxis(p);let g=c[m],E=c[p];if(a){const b=m==="y"?"top":"left",S=m==="y"?"bottom":"right",C=g+d[b],T=g-d[S];g=clamp$1(C,g,T)}if(o){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",C=E+d[b],T=E-d[S];E=clamp$1(C,E,T)}const x=l.fn({...e,[m]:g,[p]:E});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[m]:a,[p]:o}}}}}},limitShift$2=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:u=!0,crossAxis:c=!0}=evaluate(t,e),d={x:n,y:s},p=getSideAxis(i),m=getOppositeAxis(p);let g=d[m],E=d[p];const x=evaluate(l,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const T=m==="y"?"height":"width",I=a.reference[m]-a.floating[T]+b.mainAxis,D=a.reference[m]+a.reference[T]-b.mainAxis;g<I?g=I:g>D&&(g=D)}if(c){var S,C;const T=m==="y"?"width":"height",I=originSides.has(getSide(i)),D=a.reference[p]-a.floating[T]+(I&&((S=o.offset)==null?void 0:S[p])||0)+(I?0:b.crossAxis),P=a.reference[p]+a.reference[T]+(I?0:((C=o.offset)==null?void 0:C[p])||0)-(I?b.crossAxis:0);E<D?E=D:E>P&&(E=P)}return{[m]:g,[p]:E}}}},size$2=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:u=()=>{},...c}=evaluate(t,e),d=await detectOverflow(e,c),p=getSide(i),m=getAlignment(i),g=getSideAxis(i)==="y",{width:E,height:x}=a.floating;let b,S;p==="top"||p==="bottom"?(b=p,S=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(S=p,b=m==="end"?"top":"bottom");const C=x-d.top-d.bottom,T=E-d.left-d.right,I=min(x-d[b],C),D=min(E-d[S],T),P=!e.middlewareData.shift;let O=I,B=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(B=T),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(O=C),P&&!m){const H=max(d.left,0),Q=max(d.right,0),Z=max(d.top,0),ne=max(d.bottom,0);g?B=E-2*(H!==0||Q!==0?H+Q:max(d.left,d.right)):O=x-2*(Z!==0||ne!==0?Z+ne:max(d.top,d.bottom))}await u({...e,availableWidth:B,availableHeight:O});const F=await o.getDimensions(l.floating);return E!==F.width||x!==F.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(t){return isNode$1(t)?(t.nodeName||"").toLowerCase():"#document"}function getWindow$1(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(t){var e;return(e=(isNode$1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function isNode$1(t){return hasWindow()?t instanceof Node||t instanceof getWindow$1(t).Node:!1}function isElement(t){return hasWindow()?t instanceof Element||t instanceof getWindow$1(t).Element:!1}function isHTMLElement$1(t){return hasWindow()?t instanceof HTMLElement||t instanceof getWindow$1(t).HTMLElement:!1}function isShadowRoot(t){return!hasWindow()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof getWindow$1(t).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(t){const{overflow:e,overflowX:n,overflowY:s,display:i}=getComputedStyle$1(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!invalidOverflowDisplayValues.has(i)}const tableElements=new Set(["table","td","th"]);function isTableElement(t){return tableElements.has(getNodeName(t))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(t){return topLayerSelectors.some(e=>{try{return t.matches(e)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(t){const e=isWebKit(),n=isElement(t)?getComputedStyle$1(t):t;return transformProperties.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||willChangeValues.some(s=>(n.willChange||"").includes(s))||containValues.some(s=>(n.contain||"").includes(s))}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement$1(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(t){return lastTraversableNodeNames.has(getNodeName(t))}function getComputedStyle$1(t){return getWindow$1(t).getComputedStyle(t)}function getNodeScroll(t){return isElement(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function getParentNode(t){if(getNodeName(t)==="html")return t;const e=t.assignedSlot||t.parentNode||isShadowRoot(t)&&t.host||getDocumentElement(t);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?t.ownerDocument?t.ownerDocument.body:t.body:isHTMLElement$1(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=getNearestOverflowAncestor(t),a=i===((s=t.ownerDocument)==null?void 0:s.body),o=getWindow$1(i);if(a){const l=getFrameElement(o);return e.concat(o,o.visualViewport||[],isOverflowElement(i)?i:[],l&&n?getOverflowAncestors(l):[])}return e.concat(i,getOverflowAncestors(i,[],n))}function getFrameElement(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function getCssDimensions(t){const e=getComputedStyle$1(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=isHTMLElement$1(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:s,l=round(n)!==a||round(s)!==o;return l&&(n=a,s=o),{width:n,height:s,$:l}}function unwrapElement(t){return isElement(t)?t:t.contextElement}function getScale(t){const e=unwrapElement(t);if(!isHTMLElement$1(e))return createCoords(1);const n=e.getBoundingClientRect(),{width:s,height:i,$:a}=getCssDimensions(e);let o=(a?round(n.width):n.width)/s,l=(a?round(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const noOffsets=createCoords(0);function getVisualOffsets(t){const e=getWindow$1(t);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==getWindow$1(t)?!1:e}function getBoundingClientRect$1(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=unwrapElement(t);let o=createCoords(1);e&&(s?isElement(s)&&(o=getScale(s)):o=getScale(t));const l=shouldAddVisualOffsets(a,n,s)?getVisualOffsets(a):createCoords(0);let u=(i.left+l.x)/o.x,c=(i.top+l.y)/o.y,d=i.width/o.x,p=i.height/o.y;if(a){const m=getWindow$1(a),g=s&&isElement(s)?getWindow$1(s):s;let E=m,x=getFrameElement(E);for(;x&&s&&g!==E;){const b=getScale(x),S=x.getBoundingClientRect(),C=getComputedStyle$1(x),T=S.left+(x.clientLeft+parseFloat(C.paddingLeft))*b.x,I=S.top+(x.clientTop+parseFloat(C.paddingTop))*b.y;u*=b.x,c*=b.y,d*=b.x,p*=b.y,u+=T,c+=I,E=getWindow$1(x),x=getFrameElement(E)}}return rectToClientRect({width:d,height:p,x:u,y:c})}function getWindowScrollBarX(t,e){const n=getNodeScroll(t).scrollLeft;return e?e.left+n:getBoundingClientRect$1(getDocumentElement(t)).left+n}function getHTMLOffset(t,e,n){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=s.left+e.scrollLeft-(n?0:getWindowScrollBarX(t,s)),a=s.top+e.scrollTop;return{x:i,y:a}}function convertOffsetParentRelativeRectToViewportRelativeRect(t){let{elements:e,rect:n,offsetParent:s,strategy:i}=t;const a=i==="fixed",o=getDocumentElement(s),l=e?isTopLayer(e.floating):!1;if(s===o||l&&a)return n;let u={scrollLeft:0,scrollTop:0},c=createCoords(1);const d=createCoords(0),p=isHTMLElement$1(s);if((p||!p&&!a)&&((getNodeName(s)!=="body"||isOverflowElement(o))&&(u=getNodeScroll(s)),isHTMLElement$1(s))){const g=getBoundingClientRect$1(s);c=getScale(s),d.x=g.x+s.clientLeft,d.y=g.y+s.clientTop}const m=o&&!p&&!a?getHTMLOffset(o,u,!0):createCoords(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+d.x+m.x,y:n.y*c.y-u.scrollTop*c.y+d.y+m.y}}function getClientRects(t){return Array.from(t.getClientRects())}function getDocumentRect(t){const e=getDocumentElement(t),n=getNodeScroll(t),s=t.ownerDocument.body,i=max(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=max(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+getWindowScrollBarX(t);const l=-n.scrollTop;return getComputedStyle$1(s).direction==="rtl"&&(o+=max(e.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function getViewportRect(t,e){const n=getWindow$1(t),s=getDocumentElement(t),i=n.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,u=0;if(i){a=i.width,o=i.height;const c=isWebKit();(!c||c&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:l,y:u}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(t,e){const n=getBoundingClientRect$1(t,!0,e==="fixed"),s=n.top+t.clientTop,i=n.left+t.clientLeft,a=isHTMLElement$1(t)?getScale(t):createCoords(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,u=i*a.x,c=s*a.y;return{width:o,height:l,x:u,y:c}}function getClientRectFromClippingAncestor(t,e,n){let s;if(e==="viewport")s=getViewportRect(t,n);else if(e==="document")s=getDocumentRect(getDocumentElement(t));else if(isElement(e))s=getInnerBoundingClientRect(e,n);else{const i=getVisualOffsets(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rectToClientRect(s)}function hasFixedPositionAncestor(t,e){const n=getParentNode(t);return n===e||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$1(n).position==="fixed"||hasFixedPositionAncestor(n,e)}function getClippingElementAncestors(t,e){const n=e.get(t);if(n)return n;let s=getOverflowAncestors(t,[],!1).filter(l=>isElement(l)&&getNodeName(l)!=="body"),i=null;const a=getComputedStyle$1(t).position==="fixed";let o=a?getParentNode(t):t;for(;isElement(o)&&!isLastTraversableNode(o);){const l=getComputedStyle$1(o),u=isContainingBlock(o);!u&&l.position==="fixed"&&(i=null),(a?!u&&!i:!u&&l.position==="static"&&!!i&&absoluteOrFixed.has(i.position)||isOverflowElement(o)&&!u&&hasFixedPositionAncestor(t,o))?s=s.filter(d=>d!==o):i=l,o=getParentNode(o)}return e.set(t,s),s}function getClippingRect(t){let{element:e,boundary:n,rootBoundary:s,strategy:i}=t;const o=[...n==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(n),s],l=o[0],u=o.reduce((c,d)=>{const p=getClientRectFromClippingAncestor(e,d,i);return c.top=max(p.top,c.top),c.right=min(p.right,c.right),c.bottom=min(p.bottom,c.bottom),c.left=max(p.left,c.left),c},getClientRectFromClippingAncestor(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function getDimensions(t){const{width:e,height:n}=getCssDimensions(t);return{width:e,height:n}}function getRectRelativeToOffsetParent(t,e,n){const s=isHTMLElement$1(e),i=getDocumentElement(e),a=n==="fixed",o=getBoundingClientRect$1(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const u=createCoords(0);function c(){u.x=getWindowScrollBarX(i)}if(s||!s&&!a)if((getNodeName(e)!=="body"||isOverflowElement(i))&&(l=getNodeScroll(e)),s){const g=getBoundingClientRect$1(e,!0,a,e);u.x=g.x+e.clientLeft,u.y=g.y+e.clientTop}else i&&c();a&&!s&&i&&c();const d=i&&!s&&!a?getHTMLOffset(i,l):createCoords(0),p=o.left+l.scrollLeft-u.x-d.x,m=o.top+l.scrollTop-u.y-d.y;return{x:p,y:m,width:o.width,height:o.height}}function isStaticPositioned(t){return getComputedStyle$1(t).position==="static"}function getTrueOffsetParent(t,e){if(!isHTMLElement$1(t)||getComputedStyle$1(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return getDocumentElement(t)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(t,e){const n=getWindow$1(t);if(isTopLayer(t))return n;if(!isHTMLElement$1(t)){let i=getParentNode(t);for(;i&&!isLastTraversableNode(i);){if(isElement(i)&&!isStaticPositioned(i))return i;i=getParentNode(i)}return n}let s=getTrueOffsetParent(t,e);for(;s&&isTableElement(s)&&isStaticPositioned(s);)s=getTrueOffsetParent(s,e);return s&&isLastTraversableNode(s)&&isStaticPositioned(s)&&!isContainingBlock(s)?n:s||getContainingBlock(t)||n}const getElementRects=async function(t){const e=this.getOffsetParent||getOffsetParent,n=this.getDimensions,s=await n(t.floating);return{reference:getRectRelativeToOffsetParent(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function isRTL(t){return getComputedStyle$1(t).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function observeMove(t,e){let n=null,s;const i=getDocumentElement(t);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const c=t.getBoundingClientRect(),{left:d,top:p,width:m,height:g}=c;if(l||e(),!m||!g)return;const E=floor(p),x=floor(i.clientWidth-(d+m)),b=floor(i.clientHeight-(p+g)),S=floor(d),T={rootMargin:-E+"px "+-x+"px "+-b+"px "+-S+"px",threshold:max(0,min(1,u))||1};let I=!0;function D(P){const O=P[0].intersectionRatio;if(O!==u){if(!I)return o();O?o(!1,O):s=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!rectsAreEqual(c,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(D,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,T)}n.observe(t)}return o(!0),a}function autoUpdate(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,c=unwrapElement(t),d=i||a?[...c?getOverflowAncestors(c):[],...getOverflowAncestors(e)]:[];d.forEach(S=>{i&&S.addEventListener("scroll",n,{passive:!0}),a&&S.addEventListener("resize",n)});const p=c&&l?observeMove(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(S=>{let[C]=S;C&&C.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=g)==null||T.observe(e)})),n()}),c&&!u&&g.observe(c),g.observe(e));let E,x=u?getBoundingClientRect$1(t):null;u&&b();function b(){const S=getBoundingClientRect$1(t);x&&!rectsAreEqual(x,S)&&n(),x=S,E=requestAnimationFrame(b)}return n(),()=>{var S;d.forEach(C=>{i&&C.removeEventListener("scroll",n),a&&C.removeEventListener("resize",n)}),p?.(),(S=g)==null||S.disconnect(),g=null,u&&cancelAnimationFrame(E)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(t,e,n)=>{const s=new Map,i={platform,...n},a={...i.platform,_c:s};return computePosition$1(t,e,{...i,platform:a})};var isClient=typeof document<"u",noop$2=function(){},index=isClient?reactExports.useLayoutEffect:noop$2;function deepEqual(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!deepEqual(t[s],e[s]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&t.$$typeof)&&!deepEqual(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function getDPR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(t,e){const n=getDPR(t);return Math.round(e*n)/n}function useLatestRef(t){const e=reactExports.useRef(t);return index(()=>{e.current=t}),e}function useFloating(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:u,open:c}=t,[d,p]=reactExports.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=reactExports.useState(s);deepEqual(m,s)||g(s);const[E,x]=reactExports.useState(null),[b,S]=reactExports.useState(null),C=reactExports.useCallback(M=>{M!==P.current&&(P.current=M,x(M))},[]),T=reactExports.useCallback(M=>{M!==O.current&&(O.current=M,S(M))},[]),I=a||E,D=o||b,P=reactExports.useRef(null),O=reactExports.useRef(null),B=reactExports.useRef(d),F=u!=null,H=useLatestRef(u),Q=useLatestRef(i),Z=useLatestRef(c),ne=reactExports.useCallback(()=>{if(!P.current||!O.current)return;const M={placement:e,strategy:n,middleware:m};Q.current&&(M.platform=Q.current),computePosition(P.current,O.current,M).then(W=>{const ee={...W,isPositioned:Z.current!==!1};re.current&&!deepEqual(B.current,ee)&&(B.current=ee,reactDomExports.flushSync(()=>{p(ee)}))})},[m,e,n,Q,Z]);index(()=>{c===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,p(M=>({...M,isPositioned:!1})))},[c]);const re=reactExports.useRef(!1);index(()=>(re.current=!0,()=>{re.current=!1}),[]),index(()=>{if(I&&(P.current=I),D&&(O.current=D),I&&D){if(H.current)return H.current(I,D,ne);ne()}},[I,D,ne,H,F]);const se=reactExports.useMemo(()=>({reference:P,floating:O,setReference:C,setFloating:T}),[C,T]),G=reactExports.useMemo(()=>({reference:I,floating:D}),[I,D]),K=reactExports.useMemo(()=>{const M={position:n,left:0,top:0};if(!G.floating)return M;const W=roundByDPR(G.floating,d.x),ee=roundByDPR(G.floating,d.y);return l?{...M,transform:"translate("+W+"px, "+ee+"px)",...getDPR(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:ee}},[n,l,G.floating,d.x,d.y]);return reactExports.useMemo(()=>({...d,update:ne,refs:se,elements:G,floatingStyles:K}),[d,ne,se,G,K])}const arrow$1=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:i}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?arrow$2({element:s.current,padding:i}).fn(n):{}:s?arrow$2({element:s,padding:i}).fn(n):{}}}},offset=(t,e)=>({...offset$1(t),options:[t,e]}),shift=(t,e)=>({...shift$1(t),options:[t,e]}),limitShift=(t,e)=>({...limitShift$1(t),options:[t,e]}),flip=(t,e)=>({...flip$1(t),options:[t,e]}),size=(t,e)=>({...size$1(t),options:[t,e]}),hide=(t,e)=>({...hide$1(t),options:[t,e]}),arrow=(t,e)=>({...arrow$1(t),options:[t,e]});var NAME$1="Arrow",Arrow$2=reactExports.forwardRef((t,e)=>{const{children:n,width:s=10,height:i=5,...a}=t;return jsxRuntimeExports.jsx(Primitive.svg,{...a,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$2.displayName=NAME$1;var Root$1=Arrow$2;function useSize(t){const[e,n]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const u=a.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,l=c.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var POPPER_NAME$1="Popper",[createPopperContext$1,createPopperScope$1]=createContextScope(POPPER_NAME$1),[PopperProvider$1,usePopperContext$1]=createPopperContext$1(POPPER_NAME$1),Popper$1=t=>{const{__scopePopper:e,children:n}=t,[s,i]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider$1,{scope:e,anchor:s,onAnchorChange:i,children:n})};Popper$1.displayName=POPPER_NAME$1;var ANCHOR_NAME$2="PopperAnchor",PopperAnchor$1=reactExports.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...i}=t,a=usePopperContext$1(ANCHOR_NAME$2,n),o=reactExports.useRef(null),l=useComposedRefs(e,o);return reactExports.useEffect(()=>{a.onAnchorChange(s?.current||o.current)}),s?null:jsxRuntimeExports.jsx(Primitive.div,{...i,ref:l})});PopperAnchor$1.displayName=ANCHOR_NAME$2;var CONTENT_NAME$3="PopperContent",[PopperContentProvider$1,useContentContext$1]=createPopperContext$1(CONTENT_NAME$3),PopperContent$1=reactExports.forwardRef((t,e)=>{const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:E,...x}=t,b=usePopperContext$1(CONTENT_NAME$3,n),[S,C]=reactExports.useState(null),T=useComposedRefs(e,Me=>C(Me)),[I,D]=reactExports.useState(null),P=useSize(I),O=P?.width??0,B=P?.height??0,F=s+(a!=="center"?"-"+a:""),H=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Q=Array.isArray(c)?c:[c],Z=Q.length>0,ne={padding:H,boundary:Q.filter(isNotNull$1),altBoundary:Z},{refs:re,floatingStyles:se,placement:G,isPositioned:K,middlewareData:M}=useFloating({strategy:"fixed",placement:F,whileElementsMounted:(...Me)=>autoUpdate(...Me,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[offset({mainAxis:i+B,alignmentAxis:o}),u&&shift({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?limitShift():void 0,...ne}),u&&flip({...ne}),size({...ne,apply:({elements:Me,rects:Ye,availableWidth:We,availableHeight:Be})=>{const{width:rt,height:tt}=Ye.reference,Ue=Me.floating.style;Ue.setProperty("--radix-popper-available-width",`${We}px`),Ue.setProperty("--radix-popper-available-height",`${Be}px`),Ue.setProperty("--radix-popper-anchor-width",`${rt}px`),Ue.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),I&&arrow({element:I,padding:l}),transformOrigin$1({arrowWidth:O,arrowHeight:B}),m&&hide({strategy:"referenceHidden",...ne})]}),[W,ee]=getSideAndAlignFromPlacement$1(G),z=useCallbackRef$1(E);useLayoutEffect2(()=>{K&&z?.()},[K,z]);const ae=M.arrow?.x,ce=M.arrow?.y,he=M.arrow?.centerOffset!==0,[fe,Ce]=reactExports.useState();return useLayoutEffect2(()=>{S&&Ce(window.getComputedStyle(S).zIndex)},[S]),jsxRuntimeExports.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:K?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:jsxRuntimeExports.jsx(PopperContentProvider$1,{scope:n,placedSide:W,onArrowChange:D,arrowX:ae,arrowY:ce,shouldHideArrow:he,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":W,"data-align":ee,...x,ref:T,style:{...x.style,animation:K?void 0:"none"}})})})});PopperContent$1.displayName=CONTENT_NAME$3;var ARROW_NAME$3="PopperArrow",OPPOSITE_SIDE$1={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow$1=reactExports.forwardRef(function(e,n){const{__scopePopper:s,...i}=e,a=useContentContext$1(ARROW_NAME$3,s),o=OPPOSITE_SIDE$1[a.placedSide];return jsxRuntimeExports.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$1,{...i,ref:n,style:{...i.style,display:"block"}})})});PopperArrow$1.displayName=ARROW_NAME$3;function isNotNull$1(t){return t!==null}var transformOrigin$1=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:s,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[c,d]=getSideAndAlignFromPlacement$1(n),p={start:"0%",center:"50%",end:"100%"}[d],m=(i.arrow?.x??0)+l/2,g=(i.arrow?.y??0)+u/2;let E="",x="";return c==="bottom"?(E=o?p:`${m}px`,x=`${-u}px`):c==="top"?(E=o?p:`${m}px`,x=`${s.floating.height+u}px`):c==="right"?(E=`${-u}px`,x=o?p:`${g}px`):c==="left"&&(E=`${s.floating.width+u}px`,x=o?p:`${g}px`),{data:{x:E,y:x}}}});function getSideAndAlignFromPlacement$1(t){const[e,n="center"]=t.split("-");return[e,n]}var Root2$2=Popper$1,Anchor$1=PopperAnchor$1,Content$1=PopperContent$1,Arrow$1=PopperArrow$1,PORTAL_NAME$2="Portal",Portal$2=reactExports.forwardRef((t,e)=>{const{container:n,...s}=t,[i,a]=reactExports.useState(!1);useLayoutEffect2(()=>a(!0),[]);const o=n||i&&globalThis?.document?.body;return o?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...s,ref:e}),o):null});Portal$2.displayName=PORTAL_NAME$2;function useStateMachine$1(t,e){return reactExports.useReducer((n,s)=>e[n][s]??n,t)}var Presence$1=t=>{const{present:e,children:n}=t,s=usePresence$1(e),i=typeof n=="function"?n({present:s.isPresent}):reactExports.Children.only(n),a=useComposedRefs(s.ref,getElementRef$1(i));return typeof n=="function"||s.isPresent?reactExports.cloneElement(i,{ref:a}):null};Presence$1.displayName="Presence";function usePresence$1(t){const[e,n]=reactExports.useState(),s=reactExports.useRef(null),i=reactExports.useRef(t),a=reactExports.useRef("none"),o=t?"mounted":"unmounted",[l,u]=useStateMachine$1(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const c=getAnimationName$1(s.current);a.current=l==="mounted"?c:"none"},[l]),useLayoutEffect2(()=>{const c=s.current,d=i.current;if(d!==t){const m=a.current,g=getAnimationName$1(c);t?u("MOUNT"):g==="none"||c?.display==="none"?u("UNMOUNT"):u(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),useLayoutEffect2(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,p=g=>{const x=getAnimationName$1(s.current).includes(g.animationName);if(g.target===e&&x&&(u("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(a.current=getAnimationName$1(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:reactExports.useCallback(c=>{s.current=c?getComputedStyle(c):null,n(c)},[])}}function getAnimationName$1(t){return t?.animationName||"none"}function getElementRef$1(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var useInsertionEffect=React$2[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[i,a,o]=useUncontrolledState({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:i;{const d=reactExports.useRef(t!==void 0);reactExports.useEffect(()=>{const p=d.current;p!==l&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const c=reactExports.useCallback(d=>{if(l){const p=isFunction(d)?d(t):d;p!==t&&o.current?.(p)}else a(d)},[l,t,a,o]);return[u,c]}function useUncontrolledState({defaultProp:t,onChange:e}){const[n,s]=reactExports.useState(t),i=reactExports.useRef(n),a=reactExports.useRef(e);return useInsertionEffect(()=>{a.current=e},[e]),reactExports.useEffect(()=>{i.current!==n&&(a.current?.(n),i.current=n)},[n,i]),[n,s,a]}function isFunction(t){return typeof t=="function"}var getDefaultParent=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(t){return t&&(t.host||unwrapHost(t.parentNode))},correctTargets=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=unwrapHost(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},applyAttributeToOthers=function(t,e,n,s){var i=correctTargets(e,Array.isArray(t)?t:[t]);markerMap[n]||(markerMap[n]=new WeakMap);var a=markerMap[n],o=[],l=new Set,u=new Set(i),c=function(p){!p||l.has(p)||(l.add(p),c(p.parentNode))};i.forEach(c);var d=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(s),E=g!==null&&g!=="false",x=(counterMap.get(m)||0)+1,b=(a.get(m)||0)+1;counterMap.set(m,x),a.set(m,b),o.push(m),x===1&&E&&uncontrolledNodes.set(m,!0),b===1&&m.setAttribute(n,"true"),E||m.setAttribute(s,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return d(e),l.clear(),lockCount++,function(){o.forEach(function(p){var m=counterMap.get(p)-1,g=a.get(p)-1;counterMap.set(p,m),a.set(p,g),m||(uncontrolledNodes.has(p)||p.removeAttribute(s),uncontrolledNodes.delete(p)),g||p.removeAttribute(n)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),i=getDefaultParent(t);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(s,i,n,"aria-hidden")):function(){return null}},zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function useCallbackRef(t,e){var n=reactExports.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=e,n.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(t,e){var n=useCallbackRef(null,function(s){return t.forEach(function(i){return assignRef(i,s)})});return useIsomorphicLayoutEffect$1(function(){var s=currentValues.get(n);if(s){var i=new Set(s),a=new Set(t),o=n.current;i.forEach(function(l){a.has(l)||assignRef(l,null)}),a.forEach(function(l){i.has(l)||assignRef(l,o)})}currentValues.set(n,t)},[t]),n}function ItoI(t){return t}function innerCreateMedium(t,e){e===void 0&&(e=ItoI);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var u=function(){var d=o;o=[],d.forEach(a)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function createSidecarMedium(t){t===void 0&&(t={});var e=innerCreateMedium(null);return e.options=__assign$5({async:!0,ssr:!1},t),e}var SideCar$1=function(t){var e=t.sideCar,n=__rest$2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return reactExports.createElement(s,__assign$5({},n))};SideCar$1.isSideCarExport=!0;function exportSidecar(t,e){return t.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(t,e){var n=reactExports.useRef(null),s=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),i=s[0],a=s[1],o=t.forwardProps,l=t.children,u=t.className,c=t.removeScrollBar,d=t.enabled,p=t.shards,m=t.sideCar,g=t.noRelative,E=t.noIsolation,x=t.inert,b=t.allowPinchZoom,S=t.as,C=S===void 0?"div":S,T=t.gapMode,I=__rest$2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=m,P=useMergeRefs([n,e]),O=__assign$5(__assign$5({},I),i);return reactExports.createElement(reactExports.Fragment,null,d&&reactExports.createElement(D,{sideCar:effectCar,removeScrollBar:c,shards:p,noRelative:g,noIsolation:E,inert:x,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:T}),o?reactExports.cloneElement(reactExports.Children.only(l),__assign$5(__assign$5({},O),{ref:P})):reactExports.createElement(C,__assign$5({},O,{className:u,ref:P}),l))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=getNonce();return e&&t.setAttribute("nonce",e),t}function injectStyles(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function insertStyleTag(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var stylesheetSingleton=function(){var t=0,e=null;return{add:function(n){t==0&&(e=makeStyleTag())&&(injectStyles(e,n),insertStyleTag(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var t=stylesheetSingleton();return function(e,n){reactExports.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},styleSingleton=function(){var t=styleHookSingleton(),e=function(n){var s=n.styles,i=n.dynamic;return t(s,i),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(t){return parseInt(t||"",10)||0},getOffset=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[parse$1(n),parse$1(s),parse$1(i)]},getGapWidth=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zeroGap;var e=getOffset(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(t,e,n,s){var i=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(l,`px;
  }
`)},getCurrentUseCounter=function(){var t=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(t)?t:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var t=getCurrentUseCounter()-1;t<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,t.toString())}},[])},RemoveScrollBar=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,i=s===void 0?"margin":s;useLockAttribute();var a=reactExports.useMemo(function(){return getGapWidth(i)},[i]);return reactExports.createElement(Style,{styles:getStyles(a,!e,i,n?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(t){return t.tagName==="TEXTAREA"},elementCanBeScrolled=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!alwaysContainsScroll(t)&&n[e]==="visible")},elementCouldBeVScrolled=function(t){return elementCanBeScrolled(t,"overflowY")},elementCouldBeHScrolled=function(t){return elementCanBeScrolled(t,"overflowX")},locationCouldBeScrolled=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=elementCouldBeScrolled(t,s);if(i){var a=getScrollVariables(t,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},getVScrollVariables=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},getHScrollVariables=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},elementCouldBeScrolled=function(t,e){return t==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(t,e){return t==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(t,e){return t==="h"&&e==="rtl"?-1:1},handleScroll=function(t,e,n,s,i){var a=getDirectionFactor(t,window.getComputedStyle(e).direction),o=a*s,l=n.target,u=e.contains(l),c=!1,d=o>0,p=0,m=0;do{if(!l)break;var g=getScrollVariables(t,l),E=g[0],x=g[1],b=g[2],S=x-b-a*E;(E||S)&&elementCouldBeScrolled(t,l)&&(p+=S,m+=E);var C=l.parentNode;l=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(d&&Math.abs(p)<1||!d&&Math.abs(m)<1)&&(c=!0),c},getTouchXY=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(t){return[t.deltaX,t.deltaY]},extractRef=function(t){return t&&"current"in t?t.current:t},deltaCompare=function(t,e){return t[0]===e[0]&&t[1]===e[1]},generateStyle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(t){var e=reactExports.useRef([]),n=reactExports.useRef([0,0]),s=reactExports.useRef(),i=reactExports.useState(idCounter++)[0],a=reactExports.useState(styleSingleton)[0],o=reactExports.useRef(t);reactExports.useEffect(function(){o.current=t},[t]),reactExports.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=__spreadArray$3([t.lockRef.current],(t.shards||[]).map(extractRef),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=reactExports.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var S=getTouchXY(x),C=n.current,T="deltaX"in x?x.deltaX:C[0]-S[0],I="deltaY"in x?x.deltaY:C[1]-S[1],D,P=x.target,O=Math.abs(T)>Math.abs(I)?"h":"v";if("touches"in x&&O==="h"&&P.type==="range")return!1;var B=locationCouldBeScrolled(O,P);if(!B)return!0;if(B?D=O:(D=O==="v"?"h":"v",B=locationCouldBeScrolled(O,P)),!B)return!1;if(!s.current&&"changedTouches"in x&&(T||I)&&(s.current=D),!D)return!0;var F=s.current||D;return handleScroll(F,b,x,F==="h"?T:I)},[]),u=reactExports.useCallback(function(x){var b=x;if(!(!lockStack.length||lockStack[lockStack.length-1]!==a)){var S="deltaY"in b?getDeltaXY(b):getTouchXY(b),C=e.current.filter(function(D){return D.name===b.type&&(D.target===b.target||b.target===D.shadowParent)&&deltaCompare(D.delta,S)})[0];if(C&&C.should){b.cancelable&&b.preventDefault();return}if(!C){var T=(o.current.shards||[]).map(extractRef).filter(Boolean).filter(function(D){return D.contains(b.target)}),I=T.length>0?l(b,T[0]):!o.current.noIsolation;I&&b.cancelable&&b.preventDefault()}}},[]),c=reactExports.useCallback(function(x,b,S,C){var T={name:x,delta:b,target:S,should:C,shadowParent:getOutermostShadowParent(S)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(I){return I!==T})},1)},[]),d=reactExports.useCallback(function(x){n.current=getTouchXY(x),s.current=void 0},[]),p=reactExports.useCallback(function(x){c(x.type,getDeltaXY(x),x.target,l(x,t.lockRef.current))},[]),m=reactExports.useCallback(function(x){c(x.type,getTouchXY(x),x.target,l(x,t.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",u,nonPassive),document.addEventListener("touchmove",u,nonPassive),document.addEventListener("touchstart",d,nonPassive),function(){lockStack=lockStack.filter(function(x){return x!==a}),document.removeEventListener("wheel",u,nonPassive),document.removeEventListener("touchmove",u,nonPassive),document.removeEventListener("touchstart",d,nonPassive)}},[]);var g=t.removeScrollBar,E=t.inert;return reactExports.createElement(reactExports.Fragment,null,E?reactExports.createElement(a,{styles:generateStyle(i)}):null,g?reactExports.createElement(RemoveScrollBar,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function getOutermostShadowParent(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(t,e){return reactExports.createElement(RemoveScroll,__assign$5({},t,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var POPOVER_NAME="Popover",[createPopoverContext,createPopoverScope]=createContextScope(POPOVER_NAME,[createPopperScope$1]),usePopperScope$1=createPopperScope$1(),[PopoverProvider,usePopoverContext]=createPopoverContext(POPOVER_NAME),Popover=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,l=usePopperScope$1(e),u=reactExports.useRef(null),[c,d]=reactExports.useState(!1),[p,m]=useControllableState({prop:s,defaultProp:i??!1,onChange:a,caller:POPOVER_NAME});return jsxRuntimeExports.jsx(Root2$2,{...l,children:jsxRuntimeExports.jsx(PopoverProvider,{scope:e,contentId:useId(),triggerRef:u,open:p,onOpenChange:m,onOpenToggle:reactExports.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:reactExports.useCallback(()=>d(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>d(!1),[]),modal:o,children:n})})};Popover.displayName=POPOVER_NAME;var ANCHOR_NAME$1="PopoverAnchor",PopoverAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopoverContext(ANCHOR_NAME$1,n),a=usePopperScope$1(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return reactExports.useEffect(()=>(o(),()=>l()),[o,l]),jsxRuntimeExports.jsx(Anchor$1,{...a,...s,ref:e})});PopoverAnchor.displayName=ANCHOR_NAME$1;var TRIGGER_NAME$1="PopoverTrigger",PopoverTrigger=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopoverContext(TRIGGER_NAME$1,n),a=usePopperScope$1(n),o=useComposedRefs(e,i.triggerRef),l=jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":getState(i.open),...s,ref:o,onClick:composeEventHandlers$1(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:jsxRuntimeExports.jsx(Anchor$1,{asChild:!0,...a,children:l})});PopoverTrigger.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="PopoverPortal",[PortalProvider$1,usePortalContext$1]=createPopoverContext(PORTAL_NAME$1,{forceMount:void 0}),PopoverPortal=t=>{const{__scopePopover:e,forceMount:n,children:s,container:i}=t,a=usePopoverContext(PORTAL_NAME$1,e);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:e,forceMount:n,children:jsxRuntimeExports.jsx(Presence$1,{present:n||a.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:i,children:s})})})};PopoverPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$2="PopoverContent",PopoverContent=reactExports.forwardRef((t,e)=>{const n=usePortalContext$1(CONTENT_NAME$2,t.__scopePopover),{forceMount:s=n.forceMount,...i}=t,a=usePopoverContext(CONTENT_NAME$2,t.__scopePopover);return jsxRuntimeExports.jsx(Presence$1,{present:s||a.open,children:a.modal?jsxRuntimeExports.jsx(PopoverContentModal,{...i,ref:e}):jsxRuntimeExports.jsx(PopoverContentNonModal,{...i,ref:e})})});PopoverContent.displayName=CONTENT_NAME$2;var Slot=createSlot("PopoverContent.RemoveScroll"),PopoverContentModal=reactExports.forwardRef((t,e)=>{const n=usePopoverContext(CONTENT_NAME$2,t.__scopePopover),s=reactExports.useRef(null),i=useComposedRefs(e,s),a=reactExports.useRef(!1);return reactExports.useEffect(()=>{const o=s.current;if(o)return hideOthers(o)},[]),jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(PopoverContentImpl,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers$1(t.onCloseAutoFocus,o=>{o.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers$1(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;a.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers$1(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=reactExports.forwardRef((t,e)=>{const n=usePopoverContext(CONTENT_NAME$2,t.__scopePopover),s=reactExports.useRef(!1),i=reactExports.useRef(!1);return jsxRuntimeExports.jsx(PopoverContentImpl,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||n.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),PopoverContentImpl=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:d,...p}=t,m=usePopoverContext(CONTENT_NAME$2,n),g=usePopperScope$1(n);return useFocusGuards(),jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:jsxRuntimeExports.jsx(DismissableLayer$1,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:jsxRuntimeExports.jsx(Content$1,{"data-state":getState(m.open),role:"dialog",id:m.contentId,...g,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CLOSE_NAME="PopoverClose",PopoverClose=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopoverContext(CLOSE_NAME,n);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...s,ref:e,onClick:composeEventHandlers$1(t.onClick,()=>i.onOpenChange(!1))})});PopoverClose.displayName=CLOSE_NAME;var ARROW_NAME$2="PopoverArrow",PopoverArrow=reactExports.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=usePopperScope$1(n);return jsxRuntimeExports.jsx(Arrow$1,{...i,...s,ref:e})});PopoverArrow.displayName=ARROW_NAME$2;function getState(t){return t?"open":"closed"}var Root2$1=Popover,Trigger$1=PopoverTrigger,Portal$1=PopoverPortal,Content2$1=PopoverContent,Arrow2$1=PopoverArrow;const AcePopover=Root2$1,AcePopoverTrigger=Trigger$1,AcePopoverArrow=Arrow2$1,AcePopoverContent=reactExports.forwardRef(({align:t="center",sideOffset:e=4,...n},s)=>jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsx(Content2$1,{ref:s,align:t,sideOffset:e,"data-test":"tooltip",className:"grit ace-popover",...n})}));AcePopoverContent.displayName=Content2$1.displayName;const BookmarkToggle=()=>{const t=useDispatch(),e=useSelector(selectCourseflowState),n=useSelector(selectprogressId),s=useSelector(selectUrlParamsNodeId),i=useSelector(E=>selectCourseflowByNodeId(E,s)),{isBookmarked:a}=i,{chapterCacheKey:o}=e,[l,u]=usePersistedState("BOOKMARK_TOOLTIP","false"),[c,d]=reactExports.useState({title:"You added a bookmark!",description:"All of your bookmarks can be accessed in Resources.",isBookmarkMax:!1}),[p,m]=reactExports.useState(!1),g=async(E,x)=>{x.preventDefault();let b=!1,S=0;try{const C=await postBookmark({progressId:n,chapterCacheKey:o,currentNodeId:s,isActive:!E});b=C?.bookmarkCount>=C?.bookmarkLimit&&!("bookmark"in C),S=C?.bookmarkLimit??300}catch(C){console.error("Error in postBookmark:",C)}if(t(genericAnalyticsAndIterableEvent("Bookmark Clicked",{action_type:"node",is_bookmark_max:b})),!E&&b){d({title:"You maxed out your bookmarks!",description:`The number of bookmarks is limited to (${S.toString()}). You can remove unused bookmarks to free up space.`,isBookmarkMax:b}),m(!0);return}!E&&l==="false"&&(m(!0),u("true")),t({type:UPDATE_BOOKMARK_NODE,payload:{nodeId:s,isBookmarked:!E}})};return jsxRuntimeExports.jsxs(AcePopover,{open:p,children:[jsxRuntimeExports.jsx(AcePopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(ToggleButton,{"data-test":"bookmark",active:a,onClick:E=>void g(a,E),variant:"bookmark"})}),jsxRuntimeExports.jsxs(AcePopoverContent,{side:"bottom",sideOffset:8,onPointerDownOutside:()=>{m(!1)},onEscapeKeyDown:()=>{m(!1)},children:[jsxRuntimeExports.jsxs("div",{className:"bookmark-content",children:[jsxRuntimeExports.jsx("h5",{className:"headings__h5",children:c.title}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:c.description})]}),jsxRuntimeExports.jsx(AcePopoverArrow,{className:"ace-popover-arrow"})]})]})},CourseHeader=({isScrolling:t,backButton:e,bookmarksEnabled:n=!1,currentCount:s,totalCount:i,isTest:a,isChapterComplete:o=!1,handleClickVoiceover:l,hideBackButton:u=!1,timer:c,voiceoverEnabled:d=!1,preferencesEnabled:p=!1,voiceoverActive:m=!1,isAudioDisabled:g=!1,showTimeInRed:E=!1,chapterTimeLeft:x,previousCompletePercent:b=0,chapterCompletePercent:S=0})=>{const{user:C,course:T,progress:I}=store.getState(),{theme:D,setTheme:P}=useTheme(),[O,B]=reactExports.useState([]),[F,H]=reactExports.useState(!1),[Q]=useWindowSize(),[Z,ne]=reactExports.useState(localStorage.getItem("playbackRate")??"Normal"),re=reactExports.useRef(null),se=b*100,G=S*100,K=I?.course?.isHideProgress??T.isHideProgress??!0;function M(){F&&H(!1)}useOnClickOutside(re,M),reactExports.useEffect(()=>{d&&instance.togglePlaybackSpeed(Z)},[]);const W={system:"System",light:"Light",dark:"Dark","high-contrast":"Contrast"};reactExports.useEffect(()=>{const z=[{text:"Audio Read-Along",type:"toggle",state:m,handleItemClick:()=>l?.(),disabled:!g,show:d},{text:"Read-Along Speed",type:"selection",activeId:Z==="Normal"?0:1,options:["Normal","Fast"],handleItemClick:ae=>{ae&&(localStorage.setItem("playbackRate",ae),ne(ae),instance.togglePlaybackSpeed(ae))},disabled:!m||!g,show:d},...C?.isDebug?[{text:"Theme",type:"selection",options:Object.values(W),activeId:Object.keys(W).findIndex(ae=>ae===D),handleItemClick:ae=>{const ce=Object.keys(W).find(he=>W[he]===ae)??"system";z[2].activeId=Object.keys(W).findIndex(he=>he===ae),B(z),P(ce)},show:!0}]:[{text:"Higher Contrast",type:"toggle",state:D==="high-contrast",handleItemClick:()=>{P(D==="high-contrast"?"light":"high-contrast")},disabled:!D,show:!0}]];B(z)},[D,m,Z,C]);const ee=()=>e?.hideIcon?null:{iconLeft:"exit-xs"};return jsxRuntimeExports.jsx("header",{className:`grit course-header ${t?"shadow":""} `,children:jsxRuntimeExports.jsxs("div",{className:"header-container",children:[jsxRuntimeExports.jsx("div",{className:"header-contents",children:e&&!u?jsxRuntimeExports.jsx(Button$2,{id:"page-exit-text-btn",...ee(),variant:"text",onClick:e.callback,"data-test":e["data-test"],children:e.text}):null}),!a&&!K&&jsxRuntimeExports.jsx("div",{className:"progress-meta-container",children:o?jsxRuntimeExports.jsx(FloatingProgressBar,{percentage:100}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FloatingProgressBar,{isAnimated:!0,previousPercentage:se,percentage:G}),x&&(s??0)-1!==i&&jsxRuntimeExports.jsx("span",{"data-test":"chapterRemainingTime",className:"metadata__regular",children:x})]})}),jsxRuntimeExports.jsxs("div",{className:"controls-container",children:[a&&jsxRuntimeExports.jsxs("div",{className:"test-info-container",children:[c?jsxRuntimeExports.jsx("span",{className:classNames("metadata__regular",{"color-regular":!E,"color-negative":E}),"data-test":"assessmentTimerBar",children:c}):null,s&&i?jsxRuntimeExports.jsxs("span",{"data-test":"coursePageCount",className:"metadata__regular",children:[jsxRuntimeExports.jsx("span",{children:s}),"of",jsxRuntimeExports.jsx("span",{children:i})]}):null]}),n?jsxRuntimeExports.jsx(BookmarkToggle,{}):null,p?jsxRuntimeExports.jsxs("div",{ref:re,className:"settings-wrapper",children:[jsxRuntimeExports.jsx(ToggleButton,{"data-test":"preferencePanelButton",active:F,onClick:()=>{H(!F)},variant:"settings"}),jsxRuntimeExports.jsx(PreferencePanel,{className:`dropdown-menu ${F?"active":""}`,windowWidth:Q,id:"preference-panel",selected:F,children:O.map((z,ae)=>z.show&&jsxRuntimeExports.jsx(PreferencePanelItem,{text:z.text,type:z.type,state:z.state,activeId:z.activeId,options:z.options,handleItemClick:z.handleItemClick,disabled:z.disabled},ae))})]}):null]})]})})},SimpleListItem=({iconColor:t="default",description:e,iconName:n="dot-4",iconSize:s="xx-small",title:i,hasBorder:a=!1})=>{const o={...getIconStyle(n,s)},l=i?"lists-menus__list-description":"lists-menus__list-paragraph",d={...!i&&s==="medium"&&{paddingTop:6},...!i&&s==="large"&&{paddingTop:12}};return jsxRuntimeExports.jsxs("li",{className:`grit simple-list-item ${a?"border":""}`,children:[jsxRuntimeExports.jsx("div",{className:`icon-wrapper ${s} pad-top--${i?"small":"medium"}`,children:jsxRuntimeExports.jsx("span",{"data-test":"gritIconComplete",style:o,className:`icon ${t}`})}),jsxRuntimeExports.jsxs("div",{className:`content pad-top--${s}`,children:[jsxRuntimeExports.jsx("span",{className:"title lists-menus__list-title",children:i}),e&&jsxRuntimeExports.jsx("span",{style:d,className:`description ${l}`,children:e})]})]})},Affiliates=({id:t})=>{useComponentLog("Affiliates");const e=useSelector(selectAffiliateState),[n,s]=useExperiment("ltv-new-intermediary-page-show"),i=useDispatch(),a=e.buttonsList,{requestSource:o}=e,l=a.find(m=>m.key===`${t}.view`),{data:u}=l??{},{pageData:c}=u??{},d={DASH:{link:"/dash/index",state:"dash.index"},COURSE_LIST:{link:"/courseswitch/view",state:"courseswitch.view"}},p=m=>{i({type:OPEN_LINK,payload:{linkObj:{...m,isShowModal:!0}}}),i({type:BUTTON_PRESSED,payload:{to:m.key,from:l?.link}})};return reactExports.useEffect(()=>{i(genericAnalyticsAndIterableEvent("Component Shown",{to:l?.link??`${t}.view`})),a||i({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})},[]),s?jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}):jsxRuntimeExports.jsxs("div",{className:"grit screen affiliates",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Back",callback:()=>{i({type:NAVIGATE_STATE_CHANGE,payload:{currentState:d[o].state}}),navigate(d[o].link)},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsxs("div",{className:`container-${n?"new":"old"}`,children:[!n&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h1",{className:"title headings__h1",children:c?.title}),jsxRuntimeExports.jsx("p",{className:"description paragraph__condensed",children:c?.description})]}),c?.cardList.map(m=>jsxRuntimeExports.jsx("section",{className:"card",children:n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{className:"headerImage",src:m.headerImageUrl,alt:`${m.title} logo`}),jsxRuntimeExports.jsxs("div",{className:"card-content",children:[m.logoUrl&&jsxRuntimeExports.jsx("img",{className:"logo",src:m.logoUrl,alt:`${m.title} logo`}),jsxRuntimeExports.jsx("h1",{className:"title headings__h1",children:m.title}),jsxRuntimeExports.jsx("p",{className:"description paragraph__question","data-test":"description",children:m.description}),jsxRuntimeExports.jsx("div",{className:"listItemContainer",children:m.benefitList.map((g,E)=>jsxRuntimeExports.jsx(SimpleListItem,{iconSize:"small",iconName:getListItemIcon("CHECKMARK"),title:g.title,iconColor:"brand-secondary",hasBorder:!0},`benefitList-${E}`))}),jsxRuntimeExports.jsx("div",{className:"btn-wrapper",children:c.cardList[0].linkList.map(g=>jsxRuntimeExports.jsx(Button$2,{stretch:!0,variant:g.emotion==="secondary"?"ghost":"solid",onClick:()=>{p(g)},className:"btn","data-test":"affiliate-cta",children:g.title},g.key))})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"cardLeft",children:[jsxRuntimeExports.jsx("img",{className:"logo",src:m.headerImageUrl,alt:`${m.title} logo`}),jsxRuntimeExports.jsx("div",{className:"listItemContainer",children:m.benefitList.map((g,E)=>jsxRuntimeExports.jsx(SimpleListItem,{iconSize:"small",iconName:getListItemIcon("CHECKMARK"),title:g.title,description:g.description,iconColor:"brand-secondary"},`benefitList-${E}`))})]}),jsxRuntimeExports.jsxs("div",{className:"cardRight",children:[m.logoUrl&&jsxRuntimeExports.jsx("img",{className:"logo",src:m.logoUrl,alt:`${m.title} logo`}),jsxRuntimeExports.jsx("h2",{className:"benefitsTitle headings__h2",children:m.benefitProp}),jsxRuntimeExports.jsx("div",{className:"listItemContainer",children:m.benefitList.map((g,E)=>jsxRuntimeExports.jsx(SimpleListItem,{iconSize:"small",iconName:getListItemIcon("CHECKMARK"),title:g.title,description:g.description,iconColor:"brand-secondary"},`benefitList-${E}`))}),jsxRuntimeExports.jsx("div",{className:"btn-wrapper",children:c.cardList[0].linkList.map(g=>jsxRuntimeExports.jsx(Button$2,{stretch:!0,variant:g.emotion==="secondary"?"text":"solid",onClick:()=>{p(g)},className:"btn",children:g.title},g.key))})]})]})},m.title))]})]})},AffiliatesRoutes=[{path:"affiliates",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"btw",element:jsxRuntimeExports.jsx(Affiliates,{id:"btw"})},{path:"otozen",element:jsxRuntimeExports.jsx(Affiliates,{id:"otozen"})},{path:"zebra",element:jsxRuntimeExports.jsx(Affiliates,{id:"zebra"})},{path:"testprep",element:jsxRuntimeExports.jsx(Affiliates,{id:"testprep"})}]}],SubBookmarkCard=({subBookmark:t,chapterCacheKey:e,onBookmarkRemove:n})=>{const s=useSelector(selectprogressId),[i,a]=reactExports.useState(!1),o=useDispatch(),l=reactExports.useRef(null);useOnClickOutside(l,()=>{a(!1)});const c=p=>{p.stopPropagation(),p.preventDefault(),a(m=>!m)},d=p=>{p.preventDefault(),p.stopPropagation(),e&&bookmarkReview({progressId:s,chapterCacheKey:e,nodeId:t.nodeId}).then(m=>{o({type:SET_IS_REDIRECTED_FROM_BOOKMARKS,payload:{redirectedFromBookmarks:!0}}),o({type:REVIEW_SUCCESS,payload:{result:m}})}).catch(()=>{console.error("unable to review bookmark")})};return jsxRuntimeExports.jsxs("button",{onClick:d,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&d(p)},"aria-label":`Go to bookmark content: ${t.nodeTitle}`,className:"grit sub-bookmark-card","data-test":"bookmarkCard",tabIndex:0,children:[jsxRuntimeExports.jsxs("div",{className:"text-wrapper",children:[jsxRuntimeExports.jsx("span",{className:"lists-menus__chapter-item",children:t.nodeTitle}),t.nodeType==="PAGE"&&jsxRuntimeExports.jsxs("span",{className:"lists-menus__list-description subtle",children:["Page ",t.nodeIdx+1]})]}),jsxRuntimeExports.jsxs("div",{ref:l,className:"action-menu","data-test":"bookmarkIconEllipsis",children:[jsxRuntimeExports.jsx("button",{onClick:p=>{c(p)},onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&c(p)},className:`icon gritIcon--${i?"close":"ellipsis-v"}`,"aria-label":`Review Bookmark ${i?"Close":"Open"} Menu Button`,"aria-expanded":i}),jsxRuntimeExports.jsxs("ul",{className:`submenu ${i?"show":"hide"}`,"data-test":"subMenu",role:"menu",children:[jsxRuntimeExports.jsx(MenuItem$1,{"data-test":"goToPage",onClick:p=>{d(p)},tabIndex:i?0:-1,children:"Go to page"}),jsxRuntimeExports.jsx(MenuItem$1,{"data-test":"removeBookmark",onClick:p=>{n(p,e,t.nodeId,t._id)},tabIndex:i?0:-1,children:"Remove Bookmark"})]})]})]})},Bookmarks=()=>{useComponentLog("Bookmarks");const t=useSelector(selectprogressId),[e,n]=reactExports.useState(!0),[s,i]=reactExports.useState(!1),[a,o]=reactExports.useState({levelList:[],bookmark:null,bookmarkCount:0,bookmarkLimit:300,redirectedFromBookmarks:!1}),l=async(u,c,d,p)=>{u.stopPropagation();try{if(await postBookmark({progressId:t,chapterCacheKey:c,currentNodeId:d,isActive:!1})){const g=a.levelList.map(E=>{const x=E.chapterList.map(b=>{const S=b.subBookmarkList.filter(C=>C._id!==p);return{...b,subBookmarkList:S}});return{...E,chapterList:x}});o({...a,levelList:g})}}catch(m){console.error("error",m)}};return reactExports.useEffect(()=>{let u=!1;return t&&getBookmark(t).then(c=>{u||o(c)}).catch(()=>{u||i(!0)}).finally(()=>{u||n(!1)}),()=>{u=!0}},[t]),e?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsx("div",{className:"grit screen bookmarks",children:jsxRuntimeExports.jsx("main",{"data-test":"bookmarksMain",children:a.levelList.length>0&&!s?a.levelList.map(u=>jsxRuntimeExports.jsxs("div",{className:"level-wrapper",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1 title","data-test":"bookmarksLevelTitle",children:u.title}),u.chapterList.map(c=>jsxRuntimeExports.jsxs("div",{className:"chapter-bookmark-wrapper",children:[jsxRuntimeExports.jsx("h3",{className:"headings__h3 chapter-title","data-test":"bookmarksChapterTitle",children:c.title}),jsxRuntimeExports.jsx("ul",{children:c.subBookmarkList.map(d=>jsxRuntimeExports.jsx(SubBookmarkCard,{chapterCacheKey:c.chapterCacheKey,subBookmark:d,onBookmarkRemove:l},d._id))})]},c.chapterCacheKey))]},u.title)):jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Pages that you bookmark in your course will show up here."})})})},BookmarkRoutes=[{path:"bookmarks",element:jsxRuntimeExports.jsx(Bookmarks,{})}],CasestudyObj={...ModelAbstract,name:"progress-casestudy",async load(t,e){return call(`${this.name}/load`,"GET",{progressId:t,casestudyId:e}).then(n=>this.setCurrent(n))},async save(t,e,n){return call(`${this.name}/`,"POST",{progressId:t,casestudyId:e,answer:n}).then(s=>{const i=this.getCurrent();return i.progressCasestudy=s,this.setCurrent(i)})}},buttonVariants=cva("flex justify-center gap-2 items-center h-10.5 rounded-md cursor-pointer disabled:pointer-events-none disabled:[&>span]:bg-controls-disabled-foreground text-center! text-[13px] font-[900] leading-[13px]",{variants:{variant:{filled:"bg-controls-primary text-content-reverse-dark hover:bg-controls-primary-hover active:bg-controls-primary-active focus-visible:shadow-button disabled:bg-controls-disabled-background disabled:text-controls-disabled-foreground py-0 px-6",outline:"text-controls-primary border-2 border-solid border-controls-primary hover:border-controls-primary-hover active:border-controls-primary-active focus-visible:shadow-button hover:text-controls-primary-hover active:text-controls-primary-active py-0 px-6","text-primary":"p-0 text-controls-primary hover:text-controls-primary-hover active:text-controls-primary-active focus-visible:border-2 focus-visible:border-controls-primary disabled:text-controls-disabled-foreground","text-secondary":"p-0 text-controls-secondary hover:text-controls-secondary-hover active:text-controls-secondary-active focus-visible:border-2 focus-visible:border-controls-primary disabled:text-controls-disabled-foreground","text-reverse":"p-0 text-controls-reverse hover:text-controls-reverse-hover active:text-controls-reverse-active focus-visible:border-2 focus-visible:border-controls-primary disabled:text-controls-disabled-foreground-reverse"}},defaultVariants:{variant:"filled"}}),Button$1=React$1.forwardRef(({className:t,variant:e,...n},s)=>jsxRuntimeExports.jsx("button",{...n,ref:s,className:cn(buttonVariants({variant:e}),t)}));Button$1.displayName="Button";const CourseNavigation=({centerLabel:t,currentCount:e,totalCount:n,controls:s,finishReview:i,backButton:a,isTimer:o=!1,forwardButton:l,time:u})=>{const c=useDispatch(),[d,p]=reactExports.useState(0),[m,g]=reactExports.useState(0);function E(S){s?.state==="PLAYING"&&c(setAudioPaused()),instance.setCurrentTime(S),p(parseFloat(S))}function x(){const S=d+15;S<m&&instance.setCurrentTime(S)}function b(){const S=d-15;S<m&&instance.setCurrentTime(S)}return reactExports.useEffect(()=>{const S=setInterval(()=>{!Number.isNaN(instance.getTotalTime())&&s?.state==="PLAYING"&&g(instance.getTotalTime());const C=instance.getCurrentTime();p(C)},10);return()=>{clearInterval(S)}},[s?.state]),jsxRuntimeExports.jsxs("nav",{className:"grit courseNavigation",children:[s&&s.audioSrc!==""?jsxRuntimeExports.jsxs("div",{className:"progress-bar",children:[jsxRuntimeExports.jsx("input",{"data-test":"barProgress",className:"slider",type:"range",min:"0",max:m,step:"0.01",value:d,onChange:S=>{E(S.target.value)}}),jsxRuntimeExports.jsx("span",{className:"progress",style:{width:`${d/m*100}%`}})]}):null,jsxRuntimeExports.jsxs("div",{className:`navigation ${s?"":"top--border"}`,children:[jsxRuntimeExports.jsx("div",{className:"left-nav",children:a?jsxRuntimeExports.jsx(Button$2,{"aria-label":"Previous Page",disabled:a.disabled,variant:"text",iconButton:!0,iconLeft:"arrow-left",onClick:a.callback,stretch:!0,"data-test":"courseflow-back",id:a.id??"arrow-prev",children:a.text}):null}),i?.show?null:jsxRuntimeExports.jsxs("div",{"data-test":"voiceOverControls",className:`mid-item ${s?"controls":""}`,children:[s&&s.audioSrc!==""&&jsxRuntimeExports.jsxs("div",{className:"controls-btn-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{"data-test":"skipBack",iconButton:!0,iconLeft:"skip-back",variant:"text",onClick:()=>{b()},disabled:s.audioSrc==="","aria-label":"Rewind 15 seconds"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"playPause",iconButton:!0,iconLeft:`ctrl-${s.state==="PLAYING"?"pause":"play"}`,onClick:s.callback,variant:"text",disabled:s.audioSrc==="","aria-label":`${s.state==="PLAYING"?"pause":"play"} audio`}),jsxRuntimeExports.jsx(Button$2,{"data-test":"skipForward",iconButton:!0,iconLeft:"skip-forward",onClick:()=>{x()},variant:"text",disabled:s.audioSrc===""||d+15>m,"aria-label":"Forward 15 seconds"})]}),e&&n&&jsxRuntimeExports.jsxs("span",{"data-test":"coursePageCount",className:"metadata__regular",children:["pg",e,"/",n]}),!i?.show&&t&&jsxRuntimeExports.jsx("span",{className:"metadata__x-small",children:t})]}),!s&&i?.show?jsxRuntimeExports.jsx("div",{className:i?"finishReview":"",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"closeReviewTest",onClick:i.callback,children:"Finish Review"})}):null,jsxRuntimeExports.jsx("div",{className:`right-nav ${o?"isTimer":""}`,children:l&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:!lodashExports.isNil(u)&&o?jsxRuntimeExports.jsxs("div",{className:"flex flex-grow h-11 mx-1 tablet:mx-8 px-4 mobile:px-10 tablet:px-0 justify-end gap-6 items-center",children:[jsxRuntimeExports.jsxs(AcePopover,{children:[jsxRuntimeExports.jsx(AcePopoverTrigger,{"data-test":"courseTimerButton",children:jsxRuntimeExports.jsx("div",{className:"text-controls-primary text-[13px] font-[900] leading-[13px] underline hover:cursor-pointer hover:text-controls-primary-hover active:text-controls-primary-active decoration-dotted decoration-[12%] underline-offset-auto","data-test":"courseTimer",children:typeof u=="number"&&u>0?secondsToHHMMSS(Math.floor(u)):secondsToHHMMSS(0)})}),jsxRuntimeExports.jsxs(AcePopoverContent,{side:"top",children:[jsxRuntimeExports.jsx("div",{className:"voiceover-content max-w-3xs",children:jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"This time requirement is set by the state to ensure proper learning. You can move forward once the timer ends."})}),jsxRuntimeExports.jsx(AcePopoverArrow,{className:"ace-popover-arrow"})]})]}),jsxRuntimeExports.jsx(Button$1,{"aria-label":"Next Page",disabled:l.disabled,onClick:l.callback,variant:"text-primary",className:"rounded-md hover:bg-controls-menu-active","data-test":l["data-test"]??"courseflow-forward",id:l.id??"arrow-next",children:jsxRuntimeExports.jsx("span",{className:" p-3 inline-block mask-cover w-5 h-5 bg-controls-primary mask-[url(https://d1u7daj727sadp.cloudfront.net/webassets/grit-icons/small/arrow-right.svg)]"})})]}):jsxRuntimeExports.jsx(Button$2,{"aria-label":"Next Page",disabled:l.disabled,iconButton:!0,iconRight:"arrow-right",onClick:l.callback,variant:"text",stretch:!0,"data-test":l["data-test"]??"courseflow-forward",id:l.id??"arrow-next",children:l.text})})})]})]})},CaseStudy=()=>{const t=useNavigate(),e=useDispatch(),{ui:n,courseflow:s,course:i,dashboard:a,virtualInstructor:o}=store.getState(),{virtualInstructorStatus:l}=o||{},{isInstructorGlobalEnabled:u}=l,{urlParams:c}=n||{},{casestudyId:d,nodeId:p}=c||{},g=getNodeById(s,p),{courseCurrent:E,progressCurrent:x}=window.aceRootScope,b=E??i,{isShowCourseInfo:S,schoolInformation:C}=b,[T,I]=reactExports.useState(""),[D,P]=reactExports.useState();useIdleLogoutTimer();function O(Z,ne){const re={casestudy:Z.casestudy,fileUrl:lodashExports.get(Z,"casestudy.asset.docUrl","#"),image:lodashExports.get(Z,"casestudy.asset.imageUrl","#"),peerList:Z.peerList,progressCasestudy:Z.progressCasestudy,templateType:lodashExports.get(Z,"casestudy.templateType","CASE").toUpperCase(),isAnswered:!!Z.progressCasestudy?.answer,questionHtml:Z.casestudy.questionHtml,progress:ne};P(re)}reactExports.useEffect(()=>{(async()=>{try{const ne=await CasestudyObj.load(x._id,d);O(ne,x),e({type:SET_CURRENT_NODE,payload:{nodeId:p}})}catch(ne){console.error("error",ne)}})()},[]);const B=()=>{D?.isAnswered&&e({type:ADVANCE})},F=()=>{e({type:BACKTRACK})},H=Z=>{I(Z.target.value)},Q=()=>{CasestudyObj.save(x._id,d,T).then(Z=>{I(""),O(Z)},Z=>{e({type:SHOW_MODAL,payload:{title:"Uh oh",message:`Server says: ${Z.message}`}})})};return jsxRuntimeExports.jsxs("div",{className:"grit screen case-study",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,isChapterComplete:getChapterIsComplete(a,s.chapterId),currentCount:g&&g.index+1,totalCount:s.totalNodeCount,backButton:{text:"Exit Chapter",callback:()=>{e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),t("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},chapterCompletePercent:s?.chapterCompletePercent,previousCompletePercent:s?.prevChapterCompletePercent,chapterTimeLeft:s?.chapterTimeLeft}),jsxRuntimeExports.jsx("article",{children:jsxRuntimeExports.jsxs("div",{id:"course","data-template-name":D?.templateType,children:[D?.templateType==="CONTRACT"?jsxRuntimeExports.jsxs("div",{children:[D.image?jsxRuntimeExports.jsx("figure",{className:"col-xs-12 flex mb4 md-mb0",children:jsxRuntimeExports.jsx("div",{className:"template__figure content-center",children:jsxRuntimeExports.jsx("a",{className:"cursor-pointer ie-w100",href:D.fileUrl,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx("img",{alt:"",className:"grow--hover shadow--hover",src:D.image,"aria-label":"Image of the case study"})})})}):null,D.questionHtml&&jsxRuntimeExports.jsx("header",{className:"header",children:jsxRuntimeExports.jsx("p",{className:"paragraph__question",dangerouslySetInnerHTML:{__html:D.questionHtml}})}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:"case-study__answer",children:[D.isAnswered?null:jsxRuntimeExports.jsxs("section",{className:"answer",children:[jsxRuntimeExports.jsx("div",{className:"case-study__input",children:jsxRuntimeExports.jsx(Input,{id:"case-study__input",name:"case-study__input",textarea:!0,value:T,onChange:H,rows:5,"data-test":"textContainer"})}),jsxRuntimeExports.jsx(Button$2,{onClick:Q,"data-test":"submitButton",disabled:T.length<1,children:"Submit Answer"})]}),D.isAnswered?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("header",{className:"header",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Your answer"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:jsxRuntimeExports.jsx("span",{"data-test":"answerText",children:D.progressCasestudy.answer??""})})]}),D.casestudy.explanation&&jsxRuntimeExports.jsxs("section",{className:"lx-answer",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Example of a strong answer"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:jsxRuntimeExports.jsx("span",{"data-test":"answerText",children:D.casestudy.explanation})})]})]}):null]})})]}):null,D?.templateType.includes("CASE")?jsxRuntimeExports.jsx("div",{children:D.questionHtml?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("header",{className:"header",children:jsxRuntimeExports.jsx("p",{className:"paragraph__question",dangerouslySetInnerHTML:{__html:D.questionHtml}})}),D.isAnswered?null:jsxRuntimeExports.jsxs("section",{className:"answer",children:[jsxRuntimeExports.jsx("div",{className:"case-study__input",children:jsxRuntimeExports.jsx(Input,{id:"case-study__input",name:"case-study__input",textarea:!0,value:T,onChange:H,rows:5,"data-test":"textContainer"})}),jsxRuntimeExports.jsx(Button$2,{onClick:Q,"data-test":"submitButton",disabled:T.length<1,children:"Submit Answer"})]}),D.isAnswered?jsxRuntimeExports.jsxs("section",{className:"case-study__answer",children:[jsxRuntimeExports.jsxs("header",{className:"header",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Your answer"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:jsxRuntimeExports.jsx("span",{"data-test":"answerText",children:D.progressCasestudy.answer??""})})]}),D.progressCasestudy.aiFeedback&&u?jsxRuntimeExports.jsxs("section",{"data-test":"responses",className:"case-study__responses",children:[jsxRuntimeExports.jsx(Root$2,{variant:["correct","incorrect","strong","weak","average"].includes(D.progressCasestudy.strength?.toLowerCase()??"")?D.progressCasestudy.strength?.toLowerCase():"weak",isInstructorEnabled:u,children:jsxRuntimeExports.jsxs(Content$2,{children:[jsxRuntimeExports.jsx(BetaTag,{}),jsxRuntimeExports.jsx(StrengthMeter,{variant:D.progressCasestudy.strength??"WEAK"}),jsxRuntimeExports.jsx(Description,{children:D.progressCasestudy.aiFeedback}),D.progressCasestudy.strength!=="STRONG"&&jsxRuntimeExports.jsx(LxExample,{children:D.casestudy.explanation})]})}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(InstructorAvatar,{})})]}):jsxRuntimeExports.jsxs("section",{className:"lx-answer",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Example of a strong answer"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:jsxRuntimeExports.jsx("span",{"data-test":"answerText",children:D.casestudy.explanation})})]})]}):null]}):null}):null]})}),jsxRuntimeExports.jsx(CourseNavigation,{currentCount:g&&g.index+1,totalCount:s.totalNodeCount,centerLabel:S&&C,backButton:{text:"",callback:()=>{F()},disabled:!1},forwardButton:{text:"",callback:()=>{B()},disabled:!D?.isAnswered}})]})},CaseStudyRoutes=[{path:"casestudy",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"load/:casestudyId/:pageId/:idxPointer/:nodeId",element:jsxRuntimeExports.jsx(CaseStudy,{})}]}],backgroundPrimary$2="#141f26",backgroundSecondary$2="#1E2E39",backgroundTertiary$2="#1F303C",backgroundQuaternary$2="#224862",backgroundReverse$2="#21333f",backgroundDivider$2="rgba(255, 255, 255, 0.2)",backgroundDividerReverse$2="rgba(255, 255, 255, 0.4)",backgroundOverlay$2="rgba(0, 0, 0, 0.7)",backgroundError$2="#543b48",backgroundInfo$2="rgba(18, 189, 205, 0.2)",backgroundWarning$2="rgba(252, 177, 26, 0.2)",backgroundSuccess$2="#245f5a",backgroundGradientsBrand$2="linear-gradient(135deg, #12bdcd 0%, #12cdae 100%)",backgroundGradientsPositive$2="#2ce1ab",backgroundGradientsNegative$2="#ec5164",buttonPrimaryText$2="#1A2932",contentReverse$2="#FFFFFF",contentRegular$2="#ffffff",contentSubtle$2="#AEC1C5",contentSubdued$2="#6f8d95",contentBrand1$2="#12bdcd",contentBrand2$2="#ff3072",contentPositive$2="#2ce1ab",contentNegative$2="#ec5164",contentWarning$2="#fcb11a",controlsDisabledBg$2="#213743",controlsDisabledFg$2="#43646f",controlsPrimaryDefault$2="#479BD2",controlsPrimaryHover$2="#5CA6D7",controlsPrimaryActive$2="#C4EEF2",controlsSecondaryDefault$2="#aec1c5",controlsSecondaryHover$2="#6f8d95",controlsSecondaryActive$2="#43646f",controlsSecondarySelected$2="#12bdcd",controlsReverseDefault$2="#ffffff",controlsReverseHover$2="#6f8d95",controlsReverseActive$2="#43646f",controlsReverseDarkDefault$2="#1A2932",controlsMenuDefault$2="rgba(33, 51, 63, 0.02)",controlsMenuHover$2="#213743",controlsMenuActive$2="#233b47",controlsMenuFocus$2="rgba(33, 51, 63, 0.02)",controlsFloatingMenuDefault$2="#213743",controlsFloatingMenuHover$2="#233b47",controlsFloatingMenuActive$2="#294652",controlsPositiveDefault$2="#2ce1ab",controlsPositiveHover$2="#29b590",controlsPositiveActive$2="#268a75",controlsNegativeDefault$2="#ec5164",controlsNegativeHover$2="#b9495b",controlsNegativeActive$2="#864251",fieldsBgDefault$2="#1a2932",fieldsBgHover$2="#21333f",fieldsBgActive$2="#213743",fieldsBgNegative$2="#543b48",fieldsBgPositive$2="#245f5a",fieldsBorderDefault$2="#6f8d95",fieldsBorderSelected$2="#12bdcd",fieldsBorderPositive$2="#2ce1ab",fieldsBorderNegative$2="#ec5164",fieldsBgDefaultOverlay$2="rgba(255, 255, 255, 0.2)",fieldsBgHoverOverlay$2="rgba(255, 255, 255, 0.4)",fieldsBgActiveOverlay$2="rgba(255, 255, 255, 0.6)",fieldsBgNegativeOverlay$2="rgba(236, 81, 100, 0.3)",fieldsBgPositiveOverlay$2="rgba(44, 225, 171, 0.3)",fieldsBorderDefault__overlay$2="rgba(33, 51, 63, 0.25)",fieldsBorderDefaultOverlay$2="rgba(33, 51, 63, 0.25)",shadowsFloating$2="0px 6px 10px 0px rgba(0, 0, 0, 0.15)",shadowsHovering$2="0px 1px 3px 0px rgba(0, 0, 0, 0.15)",shadowsResting$2="0px 0px 1px 0px rgba(0, 0, 0, 0.4)",shadowsFocus$2="0px 0px 0px 4px #1d5562",shadowsFocusError$2="0px 0px 0px 4px #543b48",shadowsFocusValidated$2="0px 0px 0px 4px #245f5a",shadowsImageMap$2="0px 0px 0px 1px rgba(0, 0, 0, 0.5)",uiProgressFg$2="#12bdcd",uiProgressBg$2="rgba(255, 255, 255, 0.05)",outlineFocus$2="#1d5562",outlineFocusError$2="#543b48",outlineFocusValidated$2="#245f5a",colors_module$2={backgroundPrimary:backgroundPrimary$2,backgroundSecondary:backgroundSecondary$2,backgroundTertiary:backgroundTertiary$2,backgroundQuaternary:backgroundQuaternary$2,backgroundReverse:backgroundReverse$2,backgroundDivider:backgroundDivider$2,backgroundDividerReverse:backgroundDividerReverse$2,backgroundOverlay:backgroundOverlay$2,backgroundError:backgroundError$2,backgroundInfo:backgroundInfo$2,backgroundWarning:backgroundWarning$2,backgroundSuccess:backgroundSuccess$2,backgroundGradientsBrand:backgroundGradientsBrand$2,backgroundGradientsPositive:backgroundGradientsPositive$2,backgroundGradientsNegative:backgroundGradientsNegative$2,buttonPrimaryText:buttonPrimaryText$2,contentReverse:contentReverse$2,contentRegular:contentRegular$2,contentSubtle:contentSubtle$2,contentSubdued:contentSubdued$2,contentBrand1:contentBrand1$2,contentBrand2:contentBrand2$2,contentPositive:contentPositive$2,contentNegative:contentNegative$2,contentWarning:contentWarning$2,controlsDisabledBg:controlsDisabledBg$2,controlsDisabledFg:controlsDisabledFg$2,controlsPrimaryDefault:controlsPrimaryDefault$2,controlsPrimaryHover:controlsPrimaryHover$2,controlsPrimaryActive:controlsPrimaryActive$2,controlsSecondaryDefault:controlsSecondaryDefault$2,controlsSecondaryHover:controlsSecondaryHover$2,controlsSecondaryActive:controlsSecondaryActive$2,controlsSecondarySelected:controlsSecondarySelected$2,controlsReverseDefault:controlsReverseDefault$2,controlsReverseHover:controlsReverseHover$2,controlsReverseActive:controlsReverseActive$2,controlsReverseDarkDefault:controlsReverseDarkDefault$2,controlsMenuDefault:controlsMenuDefault$2,controlsMenuHover:controlsMenuHover$2,controlsMenuActive:controlsMenuActive$2,controlsMenuFocus:controlsMenuFocus$2,controlsFloatingMenuDefault:controlsFloatingMenuDefault$2,controlsFloatingMenuHover:controlsFloatingMenuHover$2,controlsFloatingMenuActive:controlsFloatingMenuActive$2,controlsPositiveDefault:controlsPositiveDefault$2,controlsPositiveHover:controlsPositiveHover$2,controlsPositiveActive:controlsPositiveActive$2,controlsNegativeDefault:controlsNegativeDefault$2,controlsNegativeHover:controlsNegativeHover$2,controlsNegativeActive:controlsNegativeActive$2,fieldsBgDefault:fieldsBgDefault$2,fieldsBgHover:fieldsBgHover$2,fieldsBgActive:fieldsBgActive$2,fieldsBgNegative:fieldsBgNegative$2,fieldsBgPositive:fieldsBgPositive$2,fieldsBorderDefault:fieldsBorderDefault$2,fieldsBorderSelected:fieldsBorderSelected$2,fieldsBorderPositive:fieldsBorderPositive$2,fieldsBorderNegative:fieldsBorderNegative$2,fieldsBgDefaultOverlay:fieldsBgDefaultOverlay$2,fieldsBgHoverOverlay:fieldsBgHoverOverlay$2,fieldsBgActiveOverlay:fieldsBgActiveOverlay$2,fieldsBgNegativeOverlay:fieldsBgNegativeOverlay$2,fieldsBgPositiveOverlay:fieldsBgPositiveOverlay$2,fieldsBorderDefault__overlay:fieldsBorderDefault__overlay$2,fieldsBorderDefaultOverlay:fieldsBorderDefaultOverlay$2,shadowsFloating:shadowsFloating$2,shadowsHovering:shadowsHovering$2,shadowsResting:shadowsResting$2,shadowsFocus:shadowsFocus$2,shadowsFocusError:shadowsFocusError$2,shadowsFocusValidated:shadowsFocusValidated$2,shadowsImageMap:shadowsImageMap$2,uiProgressFg:uiProgressFg$2,uiProgressBg:uiProgressBg$2,outlineFocus:outlineFocus$2,outlineFocusError:outlineFocusError$2,outlineFocusValidated:outlineFocusValidated$2},dark=Object.freeze(Object.defineProperty({__proto__:null,backgroundDivider:backgroundDivider$2,backgroundDividerReverse:backgroundDividerReverse$2,backgroundError:backgroundError$2,backgroundGradientsBrand:backgroundGradientsBrand$2,backgroundGradientsNegative:backgroundGradientsNegative$2,backgroundGradientsPositive:backgroundGradientsPositive$2,backgroundInfo:backgroundInfo$2,backgroundOverlay:backgroundOverlay$2,backgroundPrimary:backgroundPrimary$2,backgroundQuaternary:backgroundQuaternary$2,backgroundReverse:backgroundReverse$2,backgroundSecondary:backgroundSecondary$2,backgroundSuccess:backgroundSuccess$2,backgroundTertiary:backgroundTertiary$2,backgroundWarning:backgroundWarning$2,buttonPrimaryText:buttonPrimaryText$2,contentBrand1:contentBrand1$2,contentBrand2:contentBrand2$2,contentNegative:contentNegative$2,contentPositive:contentPositive$2,contentRegular:contentRegular$2,contentReverse:contentReverse$2,contentSubdued:contentSubdued$2,contentSubtle:contentSubtle$2,contentWarning:contentWarning$2,controlsDisabledBg:controlsDisabledBg$2,controlsDisabledFg:controlsDisabledFg$2,controlsFloatingMenuActive:controlsFloatingMenuActive$2,controlsFloatingMenuDefault:controlsFloatingMenuDefault$2,controlsFloatingMenuHover:controlsFloatingMenuHover$2,controlsMenuActive:controlsMenuActive$2,controlsMenuDefault:controlsMenuDefault$2,controlsMenuFocus:controlsMenuFocus$2,controlsMenuHover:controlsMenuHover$2,controlsNegativeActive:controlsNegativeActive$2,controlsNegativeDefault:controlsNegativeDefault$2,controlsNegativeHover:controlsNegativeHover$2,controlsPositiveActive:controlsPositiveActive$2,controlsPositiveDefault:controlsPositiveDefault$2,controlsPositiveHover:controlsPositiveHover$2,controlsPrimaryActive:controlsPrimaryActive$2,controlsPrimaryDefault:controlsPrimaryDefault$2,controlsPrimaryHover:controlsPrimaryHover$2,controlsReverseActive:controlsReverseActive$2,controlsReverseDarkDefault:controlsReverseDarkDefault$2,controlsReverseDefault:controlsReverseDefault$2,controlsReverseHover:controlsReverseHover$2,controlsSecondaryActive:controlsSecondaryActive$2,controlsSecondaryDefault:controlsSecondaryDefault$2,controlsSecondaryHover:controlsSecondaryHover$2,controlsSecondarySelected:controlsSecondarySelected$2,default:colors_module$2,fieldsBgActive:fieldsBgActive$2,fieldsBgActiveOverlay:fieldsBgActiveOverlay$2,fieldsBgDefault:fieldsBgDefault$2,fieldsBgDefaultOverlay:fieldsBgDefaultOverlay$2,fieldsBgHover:fieldsBgHover$2,fieldsBgHoverOverlay:fieldsBgHoverOverlay$2,fieldsBgNegative:fieldsBgNegative$2,fieldsBgNegativeOverlay:fieldsBgNegativeOverlay$2,fieldsBgPositive:fieldsBgPositive$2,fieldsBgPositiveOverlay:fieldsBgPositiveOverlay$2,fieldsBorderDefault:fieldsBorderDefault$2,fieldsBorderDefaultOverlay:fieldsBorderDefaultOverlay$2,fieldsBorderDefault__overlay:fieldsBorderDefault__overlay$2,fieldsBorderNegative:fieldsBorderNegative$2,fieldsBorderPositive:fieldsBorderPositive$2,fieldsBorderSelected:fieldsBorderSelected$2,outlineFocus:outlineFocus$2,outlineFocusError:outlineFocusError$2,outlineFocusValidated:outlineFocusValidated$2,shadowsFloating:shadowsFloating$2,shadowsFocus:shadowsFocus$2,shadowsFocusError:shadowsFocusError$2,shadowsFocusValidated:shadowsFocusValidated$2,shadowsHovering:shadowsHovering$2,shadowsImageMap:shadowsImageMap$2,shadowsResting:shadowsResting$2,uiProgressBg:uiProgressBg$2,uiProgressFg:uiProgressFg$2},Symbol.toStringTag,{value:"Module"})),backgroundPrimary$1="#ffffff",backgroundSecondary$1="#fbfcfc",backgroundTertiary$1="#F2F5F5",backgroundQuaternary$1="#e9f3fA",backgroundReverse$1="#21333f",backgroundDivider$1="rgba(33, 51, 63, 0.1)",backgroundDividerReverse$1="rgba(255, 255, 255, 0.4)",backgroundOverlay$1="rgba(33, 51, 63, 0.5)",backgroundError$1="#FEFAFA",backgroundInfo$1="rgba(18, 189, 205, 0.1)",backgroundWarning$1="rgba(252, 177, 26, 0.1)",backgroundSuccess$1="#F9FEFC",backgroundGradientsBrand$1="linear-gradient(135deg, #12bdcd 0%, #12cdae 100%)",backgroundGradientsPositive$1="#245f5a",backgroundGradientsNegative$1="#b9495b",buttonPrimaryText$1="#ffffff",contentReverse$1="#ffffff",contentRegular$1="#21333f",contentSubtle$1="#294652",contentSubdued$1="#294652",contentBrand1$1="#095e66",contentBrand2$1="#903258",contentPositive$1="#245f5a",contentNegative$1="#b9495b",contentWarning$1="#8e722c",controlsDisabledBg$1="#f2f5f5",controlsDisabledFg$1="#aec1c5",controlsPrimaryDefault$1="#2573a7",controlsPrimaryHover$1="#235e84",controlsPrimaryActive$1="#224862",controlsSecondaryDefault$1="#21333f",controlsSecondaryHover$1="#294652",controlsSecondaryActive$1="#43646f",controlsSecondarySelected$1="#12bdcd",controlsReverseDefault$1="#ffffff",controlsReverseHover$1="#e9eef0",controlsReverseActive$1="#d4dfe1",controlsReverseDarkDefault$1="#1A2932",controlsMenuDefault$1="rgba(255, 255, 255, 0.02)",controlsMenuHover$1="#f2f5f5",controlsMenuActive$1="#e9eef0",controlsMenuFocus$1="rgba(255, 255, 255, 0.02)",controlsFloatingMenuDefault$1="#FFFFFF",controlsFloatingMenuHover$1="#F8FDFD",controlsFloatingMenuActive$1="#f3fcfd",controlsPositiveDefault$1="#268a75",controlsPositiveHover$1="#22444a",controlsPositiveActive$1="#223c44",controlsNegativeDefault$1="#b9495b",controlsNegativeHover$1="#864251",controlsNegativeActive$1="#543b48",fieldsBgDefault$1="#ffffff",fieldsBgHover$1="#f3fcfd",fieldsBgActive$1="#e7f8fa",fieldsBgNegative$1="#FEFAFA",fieldsBgPositive$1="#F9FEFC",fieldsBorderDefault$1="#294652",fieldsBorderSelected$1="#197886",fieldsBorderPositive$1="#268a75",fieldsBorderNegative$1="#864251",fieldsBgDefaultOverlay$1="rgba(255, 255, 255, 0.2)",fieldsBgHoverOverlay$1="rgba(255, 255, 255, 0.4)",fieldsBgActiveOverlay$1="rgba(255, 255, 255, 0.6)",fieldsBgNegativeOverlay$1="rgba(236, 81, 100, 0.3)",fieldsBgPositiveOverlay$1="rgba(44, 225, 171, 0.3)",fieldsBorderDefault__overlay$1="#21333f",fieldsBorderDefaultOverlay$1="#21333f",shadowsFloating$1="0px 6px 10px 0px rgba(33, 51, 63, 0.15)",shadowsHovering$1="0px 1px 3px 0px rgba(33, 51, 63, 0.15)",shadowsResting$1="0px 0px 1px 0px rgba(33, 51, 63, 0.4)",shadowsFocus$1="0px 0px 0px 4px #197886",shadowsFocusError$1="0px 0px 0px 4px #864251",shadowsFocusValidated$1="0px 0px 0px 4px #245f5a",shadowsImageMap$1="0px 0px 0px 1px #ffffff",uiProgressFg$1="#197886",uiProgressBg$1="rgba(33, 51, 63, 0.05)",outlineFocus$1="#197886",outlineFocusError$1="#864251",outlineFocusValidated$1="#245f5a",colors_module$1={backgroundPrimary:backgroundPrimary$1,backgroundSecondary:backgroundSecondary$1,backgroundTertiary:backgroundTertiary$1,backgroundQuaternary:backgroundQuaternary$1,backgroundReverse:backgroundReverse$1,backgroundDivider:backgroundDivider$1,backgroundDividerReverse:backgroundDividerReverse$1,backgroundOverlay:backgroundOverlay$1,backgroundError:backgroundError$1,backgroundInfo:backgroundInfo$1,backgroundWarning:backgroundWarning$1,backgroundSuccess:backgroundSuccess$1,backgroundGradientsBrand:backgroundGradientsBrand$1,backgroundGradientsPositive:backgroundGradientsPositive$1,backgroundGradientsNegative:backgroundGradientsNegative$1,buttonPrimaryText:buttonPrimaryText$1,contentReverse:contentReverse$1,contentRegular:contentRegular$1,contentSubtle:contentSubtle$1,contentSubdued:contentSubdued$1,contentBrand1:contentBrand1$1,contentBrand2:contentBrand2$1,contentPositive:contentPositive$1,contentNegative:contentNegative$1,contentWarning:contentWarning$1,controlsDisabledBg:controlsDisabledBg$1,controlsDisabledFg:controlsDisabledFg$1,controlsPrimaryDefault:controlsPrimaryDefault$1,controlsPrimaryHover:controlsPrimaryHover$1,controlsPrimaryActive:controlsPrimaryActive$1,controlsSecondaryDefault:controlsSecondaryDefault$1,controlsSecondaryHover:controlsSecondaryHover$1,controlsSecondaryActive:controlsSecondaryActive$1,controlsSecondarySelected:controlsSecondarySelected$1,controlsReverseDefault:controlsReverseDefault$1,controlsReverseHover:controlsReverseHover$1,controlsReverseActive:controlsReverseActive$1,controlsReverseDarkDefault:controlsReverseDarkDefault$1,controlsMenuDefault:controlsMenuDefault$1,controlsMenuHover:controlsMenuHover$1,controlsMenuActive:controlsMenuActive$1,controlsMenuFocus:controlsMenuFocus$1,controlsFloatingMenuDefault:controlsFloatingMenuDefault$1,controlsFloatingMenuHover:controlsFloatingMenuHover$1,controlsFloatingMenuActive:controlsFloatingMenuActive$1,controlsPositiveDefault:controlsPositiveDefault$1,controlsPositiveHover:controlsPositiveHover$1,controlsPositiveActive:controlsPositiveActive$1,controlsNegativeDefault:controlsNegativeDefault$1,controlsNegativeHover:controlsNegativeHover$1,controlsNegativeActive:controlsNegativeActive$1,fieldsBgDefault:fieldsBgDefault$1,fieldsBgHover:fieldsBgHover$1,fieldsBgActive:fieldsBgActive$1,fieldsBgNegative:fieldsBgNegative$1,fieldsBgPositive:fieldsBgPositive$1,fieldsBorderDefault:fieldsBorderDefault$1,fieldsBorderSelected:fieldsBorderSelected$1,fieldsBorderPositive:fieldsBorderPositive$1,fieldsBorderNegative:fieldsBorderNegative$1,fieldsBgDefaultOverlay:fieldsBgDefaultOverlay$1,fieldsBgHoverOverlay:fieldsBgHoverOverlay$1,fieldsBgActiveOverlay:fieldsBgActiveOverlay$1,fieldsBgNegativeOverlay:fieldsBgNegativeOverlay$1,fieldsBgPositiveOverlay:fieldsBgPositiveOverlay$1,fieldsBorderDefault__overlay:fieldsBorderDefault__overlay$1,fieldsBorderDefaultOverlay:fieldsBorderDefaultOverlay$1,shadowsFloating:shadowsFloating$1,shadowsHovering:shadowsHovering$1,shadowsResting:shadowsResting$1,shadowsFocus:shadowsFocus$1,shadowsFocusError:shadowsFocusError$1,shadowsFocusValidated:shadowsFocusValidated$1,shadowsImageMap:shadowsImageMap$1,uiProgressFg:uiProgressFg$1,uiProgressBg:uiProgressBg$1,outlineFocus:outlineFocus$1,outlineFocusError:outlineFocusError$1,outlineFocusValidated:outlineFocusValidated$1},hc=Object.freeze(Object.defineProperty({__proto__:null,backgroundDivider:backgroundDivider$1,backgroundDividerReverse:backgroundDividerReverse$1,backgroundError:backgroundError$1,backgroundGradientsBrand:backgroundGradientsBrand$1,backgroundGradientsNegative:backgroundGradientsNegative$1,backgroundGradientsPositive:backgroundGradientsPositive$1,backgroundInfo:backgroundInfo$1,backgroundOverlay:backgroundOverlay$1,backgroundPrimary:backgroundPrimary$1,backgroundQuaternary:backgroundQuaternary$1,backgroundReverse:backgroundReverse$1,backgroundSecondary:backgroundSecondary$1,backgroundSuccess:backgroundSuccess$1,backgroundTertiary:backgroundTertiary$1,backgroundWarning:backgroundWarning$1,buttonPrimaryText:buttonPrimaryText$1,contentBrand1:contentBrand1$1,contentBrand2:contentBrand2$1,contentNegative:contentNegative$1,contentPositive:contentPositive$1,contentRegular:contentRegular$1,contentReverse:contentReverse$1,contentSubdued:contentSubdued$1,contentSubtle:contentSubtle$1,contentWarning:contentWarning$1,controlsDisabledBg:controlsDisabledBg$1,controlsDisabledFg:controlsDisabledFg$1,controlsFloatingMenuActive:controlsFloatingMenuActive$1,controlsFloatingMenuDefault:controlsFloatingMenuDefault$1,controlsFloatingMenuHover:controlsFloatingMenuHover$1,controlsMenuActive:controlsMenuActive$1,controlsMenuDefault:controlsMenuDefault$1,controlsMenuFocus:controlsMenuFocus$1,controlsMenuHover:controlsMenuHover$1,controlsNegativeActive:controlsNegativeActive$1,controlsNegativeDefault:controlsNegativeDefault$1,controlsNegativeHover:controlsNegativeHover$1,controlsPositiveActive:controlsPositiveActive$1,controlsPositiveDefault:controlsPositiveDefault$1,controlsPositiveHover:controlsPositiveHover$1,controlsPrimaryActive:controlsPrimaryActive$1,controlsPrimaryDefault:controlsPrimaryDefault$1,controlsPrimaryHover:controlsPrimaryHover$1,controlsReverseActive:controlsReverseActive$1,controlsReverseDarkDefault:controlsReverseDarkDefault$1,controlsReverseDefault:controlsReverseDefault$1,controlsReverseHover:controlsReverseHover$1,controlsSecondaryActive:controlsSecondaryActive$1,controlsSecondaryDefault:controlsSecondaryDefault$1,controlsSecondaryHover:controlsSecondaryHover$1,controlsSecondarySelected:controlsSecondarySelected$1,default:colors_module$1,fieldsBgActive:fieldsBgActive$1,fieldsBgActiveOverlay:fieldsBgActiveOverlay$1,fieldsBgDefault:fieldsBgDefault$1,fieldsBgDefaultOverlay:fieldsBgDefaultOverlay$1,fieldsBgHover:fieldsBgHover$1,fieldsBgHoverOverlay:fieldsBgHoverOverlay$1,fieldsBgNegative:fieldsBgNegative$1,fieldsBgNegativeOverlay:fieldsBgNegativeOverlay$1,fieldsBgPositive:fieldsBgPositive$1,fieldsBgPositiveOverlay:fieldsBgPositiveOverlay$1,fieldsBorderDefault:fieldsBorderDefault$1,fieldsBorderDefaultOverlay:fieldsBorderDefaultOverlay$1,fieldsBorderDefault__overlay:fieldsBorderDefault__overlay$1,fieldsBorderNegative:fieldsBorderNegative$1,fieldsBorderPositive:fieldsBorderPositive$1,fieldsBorderSelected:fieldsBorderSelected$1,outlineFocus:outlineFocus$1,outlineFocusError:outlineFocusError$1,outlineFocusValidated:outlineFocusValidated$1,shadowsFloating:shadowsFloating$1,shadowsFocus:shadowsFocus$1,shadowsFocusError:shadowsFocusError$1,shadowsFocusValidated:shadowsFocusValidated$1,shadowsHovering:shadowsHovering$1,shadowsImageMap:shadowsImageMap$1,shadowsResting:shadowsResting$1,uiProgressBg:uiProgressBg$1,uiProgressFg:uiProgressFg$1},Symbol.toStringTag,{value:"Module"})),backgroundPrimary="#ffffff",backgroundSecondary="#fbfcfc",backgroundTertiary="#f1f5f5",backgroundQuaternary="#e9f3fa",backgroundReverse="#21333f",backgroundDivider="rgba(33, 51, 63, 0.1)",backgroundDividerReverse="rgba(255, 255, 255, 0.4)",backgroundOverlay="rgba(33, 51, 63, 0.5)",backgroundError="#fdeef0",backgroundInfo="rgba(18, 189, 205, 0.1)",backgroundWarning="rgba(252, 177, 26, 0.1)",backgroundSuccess="#eafcf7",backgroundGradientsBrand="linear-gradient(135deg, #12bdcd 0%, #12cdae 100%)",backgroundGradientsPositive="#2ce1ab",backgroundGradientsNegative="#ec5164",contentReverse="#ffffff",contentRegular="#21333f",contentSubtle="#43646F",contentSubdued="#aec1c5",contentBrand1="#12BDCD",contentBrand2="#ff3072",contentPositive="#2ce1ab",contentNegative="#ec5164",contentWarning="#db9e20",contentMuted="#6f8d95",controlsDisabledBg="#f2f5f5",controlsDisabledFg="#aec1c5",controlsPrimaryDefault="#257CB5",controlsPrimaryHover="#2573A7",controlsPrimaryActive="#235E84",controlsSecondaryDefault="#43646f",controlsSecondaryHover="#6f8d95",controlsSecondaryActive="#aec1c5",controlsSecondarySelected="#12bdcd",controlsReverseDefault="#ffffff",controlsReverseHover="#6f8d95",controlsReverseActive="#43646f",controlsReverseDarkDefault="#1A2932",buttonPrimaryText="#ffffff",controlsMenuDefault="rgba(255, 255, 255, 0.02)",controlsMenuHover="#F2F5F5",controlsMenuActive="#E9EEF0",controlsMenuFocus="rgba(255, 255, 255, 0.02)",controlsFloatingMenuDefault="#FBFCFC",controlsFloatingMenuHover="#F8FDFD",controlsFloatingMenuActive="#F3FCFD",controlsPositiveDefault="#2BD0A0",controlsPositiveHover="#2CE1AB",controlsPositiveActive="#61E8C0",controlsNegativeDefault="#ec5164",controlsNegativeHover="#f17c8b",controlsNegativeActive="#f5a8b1",controlsRedDefault="#e9306D",controlsRedHover="#ff3072",controlsRedActive="#ff6496",controlsPrimaryCardDefault="#ffffff",controlsPrimaryCardHover="#fbfcfc",controlsPrimaryCardActive="#f2f5f5",controlsPrimaryCardFocus="#ffffff",controlsSecondaryCardDefault="#f6f8f9",controlsSecondaryCardHover="#f2f5f5",controlsSecondaryCardActive="#e9eef0",controlsSecondaryCardFocus="#f6f8f9",blockquoteBg="#e9f0f5",fieldsBgDefault="#ffffff",fieldsBgHover="#f3fcfd",fieldsBgActive="#e7f8fa",fieldsBgNegative="#fdeef0",fieldsBgPositive="#eafcf7",fieldsBorderDefault="#aec1c5",fieldsBorderSelected="#12bdcd",fieldsBorderPositive="#2ce1ab",fieldsBorderNegative="#ec5164",fieldsBgDefaultOverlay="rgba(255, 255, 255, 0.2)",fieldsBgHoverOverlay="rgba(255, 255, 255, 0.4)",fieldsBgActiveOverlay="rgba(255, 255, 255, 0.6)",fieldsBgNegativeOverlay="rgba(236, 81, 100, 0.3)",fieldsBgPositiveOverlay="rgba(44, 225, 171, 0.3)",fieldsBorderDefault__overlay="rgba(33, 51, 63, 0.25)",fieldsBorderDefaultOverlay="rgba(33, 51, 63, 0.25)",shadowsFloating="0px 6px 10px 0px rgba(33, 51, 63, 0.15)",shadowsHovering="0px 1px 3px 0px rgba(33, 51, 63, 0.15)",shadowsResting="0px 0px 1px 0px rgba(33, 51, 63, 0.4)",shadowsFocus="0px 0px 0px 4px #c4eef2",shadowsFocusError="0px 0px 0px 4px #fad3d8",shadowsFocusValidated="0px 0px 0px 4px #caf7ea",shadowsImageMap="0px 0px 0px 1px #ffffff",uiProgressFg="#12bdcd",uiProgressBg="rgba(33, 51, 63, 0.05)",outlineFocus="#c4eef2",outlineFocusError="#fad3d8",outlineFocusValidated="#caf7ea",colors_module={backgroundPrimary,backgroundSecondary,backgroundTertiary,backgroundQuaternary,backgroundReverse,backgroundDivider,backgroundDividerReverse,backgroundOverlay,backgroundError,backgroundInfo,backgroundWarning,backgroundSuccess,backgroundGradientsBrand,backgroundGradientsPositive,backgroundGradientsNegative,contentReverse,contentRegular,contentSubtle,contentSubdued,contentBrand1,contentBrand2,contentPositive,contentNegative,contentWarning,contentMuted,controlsDisabledBg,controlsDisabledFg,controlsPrimaryDefault,controlsPrimaryHover,controlsPrimaryActive,controlsSecondaryDefault,controlsSecondaryHover,controlsSecondaryActive,controlsSecondarySelected,controlsReverseDefault,controlsReverseHover,controlsReverseActive,controlsReverseDarkDefault,buttonPrimaryText,controlsMenuDefault,controlsMenuHover,controlsMenuActive,controlsMenuFocus,controlsFloatingMenuDefault,controlsFloatingMenuHover,controlsFloatingMenuActive,controlsPositiveDefault,controlsPositiveHover,controlsPositiveActive,controlsNegativeDefault,controlsNegativeHover,controlsNegativeActive,controlsRedDefault,controlsRedHover,controlsRedActive,controlsPrimaryCardDefault,controlsPrimaryCardHover,controlsPrimaryCardActive,controlsPrimaryCardFocus,controlsSecondaryCardDefault,controlsSecondaryCardHover,controlsSecondaryCardActive,controlsSecondaryCardFocus,blockquoteBg,fieldsBgDefault,fieldsBgHover,fieldsBgActive,fieldsBgNegative,fieldsBgPositive,fieldsBorderDefault,fieldsBorderSelected,fieldsBorderPositive,fieldsBorderNegative,fieldsBgDefaultOverlay,fieldsBgHoverOverlay,fieldsBgActiveOverlay,fieldsBgNegativeOverlay,fieldsBgPositiveOverlay,fieldsBorderDefault__overlay,fieldsBorderDefaultOverlay,shadowsFloating,shadowsHovering,shadowsResting,shadowsFocus,shadowsFocusError,shadowsFocusValidated,shadowsImageMap,uiProgressFg,uiProgressBg,outlineFocus,outlineFocusError,outlineFocusValidated},light=Object.freeze(Object.defineProperty({__proto__:null,backgroundDivider,backgroundDividerReverse,backgroundError,backgroundGradientsBrand,backgroundGradientsNegative,backgroundGradientsPositive,backgroundInfo,backgroundOverlay,backgroundPrimary,backgroundQuaternary,backgroundReverse,backgroundSecondary,backgroundSuccess,backgroundTertiary,backgroundWarning,blockquoteBg,buttonPrimaryText,contentBrand1,contentBrand2,contentMuted,contentNegative,contentPositive,contentRegular,contentReverse,contentSubdued,contentSubtle,contentWarning,controlsDisabledBg,controlsDisabledFg,controlsFloatingMenuActive,controlsFloatingMenuDefault,controlsFloatingMenuHover,controlsMenuActive,controlsMenuDefault,controlsMenuFocus,controlsMenuHover,controlsNegativeActive,controlsNegativeDefault,controlsNegativeHover,controlsPositiveActive,controlsPositiveDefault,controlsPositiveHover,controlsPrimaryActive,controlsPrimaryCardActive,controlsPrimaryCardDefault,controlsPrimaryCardFocus,controlsPrimaryCardHover,controlsPrimaryDefault,controlsPrimaryHover,controlsRedActive,controlsRedDefault,controlsRedHover,controlsReverseActive,controlsReverseDarkDefault,controlsReverseDefault,controlsReverseHover,controlsSecondaryActive,controlsSecondaryCardActive,controlsSecondaryCardDefault,controlsSecondaryCardFocus,controlsSecondaryCardHover,controlsSecondaryDefault,controlsSecondaryHover,controlsSecondarySelected,default:colors_module,fieldsBgActive,fieldsBgActiveOverlay,fieldsBgDefault,fieldsBgDefaultOverlay,fieldsBgHover,fieldsBgHoverOverlay,fieldsBgNegative,fieldsBgNegativeOverlay,fieldsBgPositive,fieldsBgPositiveOverlay,fieldsBorderDefault,fieldsBorderDefaultOverlay,fieldsBorderDefault__overlay,fieldsBorderNegative,fieldsBorderPositive,fieldsBorderSelected,outlineFocus,outlineFocusError,outlineFocusValidated,shadowsFloating,shadowsFocus,shadowsFocusError,shadowsFocusValidated,shadowsHovering,shadowsImageMap,shadowsResting,uiProgressBg,uiProgressFg},Symbol.toStringTag,{value:"Module"})),FillBlankInput=({text:t,isCorrect:e,onTyping:n,isComplete:s})=>{const i="",[a,o]=reactExports.useState(!1),[l,u]=reactExports.useState(i),[c,d]=reactExports.useState(!0),p=reactExports.useRef(null);reactExports.useEffect(()=>{t&&u(t),e==="correct"&&d(!1)},[]);function m(S){return S.stopPropagation(),S.key==="Tab"&&S.target.textContent===i&&(S.target.textContent=""),!1}const g=S=>{S.preventDefault(),S.target.textContent===i&&(S.target.textContent="",o(!1))},E=S=>{S.preventDefault(),g(S),e==="incorrect"&&d(!0),p.current&&p.current.focus()},x=S=>{S.preventDefault();const C=S.clipboardData.getData("text/plain");u(C)},b=S=>{S.preventDefault(),S.stopPropagation(),o(!0);const C=fromEvent(S.target,"keyup"),T=fromEvent(S.target,"paste");merge$3(C,T).pipe(map$1(P=>P.target.textContent),debounceTime(200)).subscribe(P=>{n(P)})};return jsxRuntimeExports.jsxs("span",{className:"fill-blank-wrapper",children:[jsxRuntimeExports.jsx("span",{"data-test":"fillBlank",className:`grit fill-blank ${a?"":"empty"} ${e==="correct"?"correct":""} ${s?"complete":"animate-padding"} ${e==="incorrect"&&!a?"incorrect":""}`,onClick:S=>{E(S)},onPaste:S=>{x(S)},onInput:S=>{b(S)},onBlur:S=>{g(S)},onKeyDown:S=>m(S),onKeyUp:S=>m(S),ref:p,role:"textbox",tabIndex:0,contentEditable:c,suppressContentEditableWarning:!0,children:l}),e==="correct"&&jsxRuntimeExports.jsx("span",{className:`icon fill-blank correct-icon ${s?"complete":"animate-show"}`,style:{...getIconStyle("checkmark-inverted","x-small")}}),e==="incorrect"&&!a&&jsxRuntimeExports.jsx("span",{className:`icon fill-blank incorrect-icon ${s?"complete":"animate-show"}`,style:{...getIconStyle("x-inverted","x-small")}})]})},fillBlanksStyles=t=>`
  <style type="text/css">
    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }
    @keyframes increasePaddingRight {
      0% {
        padding-right: 6px;
      }
      100% {
        padding-right: 24px;
      }
    }
    .fill-blank-wrapper {
      position: relative;
    }
    .grit.fill-blank {
      display: inline-block;
      color: ${t.contentBrand1};
      min-width:0;
      margin: 0 0.25rem;
      font-style: normal;
      padding: 0px 6px;
      outline: 0;
      border-radius: 6px;
      background-color: ${t.fieldsBgDefault};
      border: 1px solid ${t.fieldsBorderDefault};
      transition: all .2s;
    }
    .grit.fill-blank.empty {
      min-width: 3rem;
    }
    .grit.fill-blank.correct,
    .grit.fill-blank.incorrect {
      display: inline-flex;
      align-items: center;
      color: ${t.contentRegular};
      min-width:0; 
    }

    .grit.fill-blank.correct.complete,
    .grit.fill-blank.incorrect.complete {
      padding-right: 24px;
    }
    
    .grit.fill-blank.correct.animate-padding,
    .grit.fill-blank.incorrect.animate-padding {
      animation: increasePaddingRight 0.2s forwards;
    }
    .grit.fill-blank.incorrect, .grit.fill-blank.incorrect:active, .grit.fill-blank.incorrect:hover, .grit.fill-blank.incorrect:focus {
      background-color: ${t.fieldsBgNegative};
      border: 2px solid ${t.fieldsBorderNegative};
      box-shadow: none;
      -webkit-box-shadow: none;
    }
    .fill-blank.correct-icon.animate-show,
    .fill-blank.incorrect-icon.animate-show {
      animation: fadeIn 0.5s forwards;
    }
    .fill-blank.correct-icon,
    .fill-blank.incorrect-icon {
      position: absolute;
      top: 50%;
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
      right: 10px;
      top: 50%; 
    }
    .fill-blank.correct-icon {
      display: inline-block;
      background-color: ${t.contentPositive};
      
    }
    .fill-blank.incorrect-icon {
      display: inline-block;
      background-color: ${t.contentNegative};
    }
    .grit.fill-blank.correct, .grit.fill-blank.correct:active, .grit.fill-blank.correct:hover{
      border: 2px solid ${t.fieldsBorderPositive};
      background-color: ${t.fieldsBgPositive};
    }

    .grit.fill-blank:focus {
        box-shadow: ${t.shadowsFocus};
        -webkit-box-shadow: ${t.shadowsFocus};
      }
    }
  </style>
`;class FillBlank extends HTMLElement{shadowRootInstance;constructor(){super(),this.id=this.getAttribute("id")??"",this.shadowRootInstance=this.attachShadow({mode:"open"}),this.render()}get answer(){return this.getAttribute("answer")}set answer(e){e&&this.setAttribute("answer",e)}get isCorrect(){return this.getAttribute("iscorrect")}set isCorrect(e){e&&this.setAttribute("iscorrect",e)}get isComplete(){return this.getAttribute("iscomplete")}set isComplete(e){e&&this.setAttribute("iscomplete",e)}handleTyping(e){this.dispatchEvent(new CustomEvent("typing",{detail:{text:e}}))}static get observedAttributes(){return["answer","iscorrect"]}attributeChangedCallback(e,n,s){s!==n&&(e==="answer"&&(this.answer=s),this.render(),this.renderReactComponent())}renderReactComponent(){const e=this.shadowRootInstance.getElementById("mountPoint");e&&clientExports.createRoot(e).render(jsxRuntimeExports.jsx(FillBlankInput,{text:this.answer??"",onTyping:n=>{this.handleTyping(n)},isCorrect:this.isCorrect,isComplete:this.isComplete==="true"}))}connectedCallback(){this.renderReactComponent()}getTemplate(){const e=api.get("theme")??"light",s={dark,"high-contrast":hc,light}[e]||light;return`
    ${fillBlanksStyles(s)}
    <span id="mountPoint"></span>`}render(){this.shadowRootInstance.innerHTML=this.getTemplate()}}const CheckmarkInverted=({size:t,className:e,...n})=>{const s=`https://d1u7daj727sadp.cloudfront.net/webassets/grit-icons/${t}/checkmark-inverted.svg`;return jsxRuntimeExports.jsx("span",{...n,role:"img","data-size":t,className:cn("inline-flex bg-subtle","data-[size=xx-small]:w-2 data-[size=xx-small]:h-2","data-[size=x-small]:w-4 data-[size=x-small]:h-4","data-[size=small]:w-6 data-[size=small]:h-6","data-[size=medium]:w-8 data-[size=medium]:h-8","data-[size=large]:w-11 data-[size=large]:h-11",e),style:{maskImage:`url("${s}")`,WebkitMaskImage:`url("${s}")`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center"}})},initialState$1={answers:{},fieldCount:0,attemptCount:0,usedCheat:!1,isDirty:!1},getGradedAnswers=(t,e,n=!1)=>(Object.keys(e).forEach(s=>{if(e[s].isCorrect)return;const i=t.find(a=>a._id===s);i?.answerTextVariantList?.map(a=>a.toLowerCase()).includes(e[s].text.toLowerCase())||i?.answerText.toLowerCase()===e[s].text.toLowerCase()?(e[s].text=i.answerText,e[s].isCorrect=!0,e[s].attemptCount=e[s].attemptCount?e[s].attemptCount+1:1,e[s].usedCheat=!1):n?(e[s].isCorrect=!0,e[s].attemptCount=e[s].attemptCount?e[s].attemptCount+1:1,e[s].usedCheat=!0,e[s].incorrectAnswerTextList?e[s].incorrectAnswerTextList.concat([e[s].text]):e[s].incorrectAnswerTextList=[e[s].text],i?.answerText&&(e[s].text=i.answerText)):(e[s].isCorrect=!1,e[s].attemptCount=e[s].attemptCount?e[s].attemptCount+1:1,e[s].usedCheat=!1,e[s].incorrectAnswerTextList?e[s].incorrectAnswerTextList.concat([e[s].text]):e[s].incorrectAnswerTextList=[e[s].text])}),e),reducer$1=(t,e)=>{switch(e.type){case"GRADE_ANSWERS":return{...t,answers:getGradedAnswers(e?.payload?.answerKey,{...t.answers}),attemptCount:t.attemptCount+1,isDirty:!1};case"SET_ANSWER":return{...t,isDirty:!0,answers:{...t.answers,[e?.payload?.id]:{...t.answers[e.payload.id],text:e?.payload?.value}}};case"USE_CHEAT":return{...t,isDirty:!1,answers:getGradedAnswers(e?.payload?.answerKey,{...t.answers},!0),usedCheat:!0,attemptCount:t.attemptCount+1};default:return t}},Blankitivity=reactExports.forwardRef(({node:t},e)=>{const[n,s]=reactExports.useReducer(reducer$1,initialState$1),i="ace-blank",[a,o]=reactExports.useState(0),l=t.data?.answerList,u=t.analyticList?.[0]?.props,c=t.data?.answerList?.length>1,d=c?"Some answers are incorrect. Try again":"Answer is incorrect",p=`Fix the incorrect answer${c?"s":""}, and try again.`,m=useDispatch();reactExports.useEffect(()=>{t.data.is.complete&&l.forEach(b=>{const S=document.getElementById(b._id);S?.setAttribute("answer",b.answerText),S?.setAttribute("iscomplete","true"),S?.setAttribute("iscorrect","correct")}),window.customElements.get(i)||window.customElements.define(i,FillBlank)},[]),reactExports.useEffect(()=>{isEmpty(n.answers)||Object.keys(n.answers).forEach(b=>{const S=document.getElementById(b);S?.setAttribute("answer",n.answers[b].text),S?.setAttribute("iscorrect",n.answers[b].isCorrect?"correct":"incorrect")})},[n.attemptCount]),reactExports.useLayoutEffect(()=>{const b=document.getElementsByTagName(i);o(b.length);for(const S of Array.from(b))S.addEventListener("typing",C=>{const T=C,I=T.target,{detail:D}=T;s({type:"SET_ANSWER",payload:{id:I.id,value:D.text}})})},[]);const g=()=>{if(!n.attemptCount)return!1;let b=!0;return Object.keys(n.answers).every(S=>n.answers[S].isCorrect?!0:(b=!1,!1)),b};reactExports.useEffect(()=>{if(n.isDirty&&Object.keys(n.answers).length===a){const b=`Check answer${a>1?"s":""}`;m({type:SET_NAVIGATION,payload:{forwardDisabled:!1,forwardLabel:b}})}g()&&m({type:SET_NAVIGATION,payload:{forwardDisabled:!1,forwardLabel:""}})},[n]);const E=async()=>{if(g()){const S=[];if(Object.keys(n.answers).forEach(T=>{S.push({_id:T,attemptCount:n.answers[T].attemptCount,incorrectAnswerTextList:n.answers[T].incorrectAnswerTextList,acceptedAnswerText:n.answers[T].text})}),(await postBlankitivity(t?.data?.progressBlankitivityId,S)).isSuccess){const T={question_id:t?.data?._id,attempts_count:n.attemptCount,chapter_id:u?.chapterId,chapter_idx:u?.chapterIdx,internal_title:t?.data?.title,is_give_up:n.attemptCount>=t?.data?.minimumAttemptCount&&!g(),level_id:u?.levelId,level_idx:u?.levelIdx};m(genericAnalyticsAndIterableEvent("Fill-in-the-blank Submitted",T))}}else s({type:"GRADE_ANSWERS",payload:{answerKey:l}})};reactExports.useImperativeHandle(e,()=>({handleChildButtonClick(){E()},allCorrect:g(),fieldCount:a}));const x=b=>{b.preventDefault(),m({type:SET_NAVIGATION,payload:{forwardDisabled:!1,forwardLabel:""}}),s({type:"USE_CHEAT",payload:{answerKey:l}})};return jsxRuntimeExports.jsxs("section",{className:"gritCourseflowNode gritCourseflowNode--blankitivity",children:[jsxRuntimeExports.jsx("div",{className:"ace-content",children:jsxRuntimeExports.jsx("div",{className:"ace-content--mark-up",children:jsxRuntimeExports.jsx("div",{className:"gritCourseflowNode__markupContainer content__markup-new",dangerouslySetInnerHTML:{__html:getFilteredMarkup(t?.data?.questionHtml)}})})}),n.attemptCount||t.data.is.complete?jsxRuntimeExports.jsxs(Root$2,{variant:g()||t.data.is.complete?"correct":"incorrect",children:[g()||t.data.is.complete?jsxRuntimeExports.jsx(CheckmarkInverted,{"aria-label":"Correct Answer",size:"small",className:"w-8! h-8!"}):jsxRuntimeExports.jsx(XInverted,{size:"small",className:"w-8! h-8!"}),jsxRuntimeExports.jsxs(Content$2,{children:[jsxRuntimeExports.jsx(Title,{"data-test":"popupResultHeader",children:g()||t.data.is.complete?"":p}),jsxRuntimeExports.jsx(Description,{"data-test":"popupAnswerExplanation",children:g()||t.data.is.complete?"":d})]})]}):null,t?.isLeadingNode&&n.attemptCount>=t?.data?.minimumAttemptCount&&!g()&&jsxRuntimeExports.jsxs(Button$2,{variant:"text",onClick:b=>{x(b)},children:["Show the answer",c?"s":""]})]})});Blankitivity.displayName="Blankitivity";const playerStatesEnum$1={PLAYING:"playing",PAUSED:"paused",ENDED:"ended",SEEKING:"seeking",SEEKED:"seeked",NONE:"none"},AudioPlayer=t=>{const{currentTime:e,duration:n,isAutoplay:s,isLeadingNode:i,nodeId:a,onVideoEnded:o,progressId:l,track:u}=t,[c,d]=reactExports.useState(s??!1),p=`audioNodeProgress-${a??""}`,[m,g]=reactExports.useState((Number(sessionStorage.getItem(p))||e)??0),[E,x]=reactExports.useState((Number(sessionStorage.getItem(p))||e)??0),[b,S]=reactExports.useState(playerStatesEnum$1.NONE),[C,T]=reactExports.useState(null),[I,D]=reactExports.useState(!0),[P,O]=reactExports.useState(!0),[B,F]=reactExports.useState([]),[H,Q]=reactExports.useState(!0),Z=reactExports.useRef(null),ne=useDispatch(),[re,se]=reactExports.useState(Z.current?.duration??n),G=ce=>{ce.current?.addEventListener("loadedmetadata",()=>{ce.current&&se(ce.current.duration)}),ce.current?.addEventListener("playing",()=>{S(playerStatesEnum$1.PLAYING)}),ce.current?.addEventListener("timeupdate",()=>{g(ce.current?.currentTime??0)}),ce.current?.addEventListener("ended",()=>{S(playerStatesEnum$1.ENDED),o(),d(!1),sessionStorage.removeItem(p)}),ce.current?.addEventListener("pause",()=>{S(playerStatesEnum$1.PAUSED)}),ce.current?.addEventListener("seeking",()=>{S(playerStatesEnum$1.SEEKING)}),ce.current?.addEventListener("seeked",()=>{S(playerStatesEnum$1.SEEKED)})},K=()=>{d(ce=>!ce)},M=(ce,he,fe,Ce=60)=>{!ce||!fe||(he-E>Ce?(O(!1),x(he)):he%60<1&&he>=60&&he>E&&(P||courseflowVideoPause(ce,he,fe).catch(Me=>(console.error(Me),Me))))},W=ce=>{typeof ce=="number"&&(ce<=E||!i?Z.current&&(Z.current.currentTime=ce,g(Z.current.currentTime)):Z.current&&(Z.current.currentTime=E,g(Z.current.currentTime)))},ee=()=>{if(Z.current){const ce=Z.current.currentTime-15,he=Z.current.currentTime<15?0:ce;W(he)}},z=()=>{if(Z.current){const ce=Z.current.currentTime+15,he=Z.current.currentTime>re-15?re:ce;W(he)}};reactExports.useEffect(()=>{c?Z.current?.play().catch(ce=>{console.error("Error playing audio:",ce)}):Z.current?.pause()},[c]),reactExports.useEffect(()=>{i&&D(m>=E),M(l??"",m,a??"",1)},[m]),reactExports.useEffect(()=>{a&&b!==playerStatesEnum$1.ENDED&&sessionStorage.setItem(p,String(E))},[E]),reactExports.useEffect(()=>{C||(G(Z),D(i??!1),T(!0),ne({type:SET_IS_LOADING})),E&&Z.current&&(Z.current.currentTime=E,g(Z.current.currentTime))},[Z]),reactExports.useEffect(()=>{u&&F([{src:`${u}index.m3u8`,type:"application/x-mpegURL"},{src:`${u}mpegdash.mpd`,type:"application/dash+xml"},{src:`${u}index.mp4`,type:"video/mp4"},{src:`${u}index.webm`,type:"video/webm"}])},[u]),reactExports.useEffect(()=>{const ce=he=>{if(he.key==="ArrowLeft"){const fe=Math.max(0,m-1);W(fe)}else if(he.key==="ArrowRight"){const fe=Math.min(re,m+1);W(fe)}};return window.addEventListener("keydown",ce),()=>{window.removeEventListener("keydown",ce)}},[m,re]);const ae=ce=>{const he=Math.floor(ce/60),fe=Math.floor(ce%60);return`${he.toString()}:${fe<10?"0":""}${fe.toString()}`};return jsxRuntimeExports.jsxs("div",{className:"grit audio-player",children:[jsxRuntimeExports.jsxs("video",{ref:Z,preload:"auto",style:{display:"none"},onLoadedData:()=>{Q(!1),ne({type:SET_IS_NOT_LOADING})},children:[B.length!==0&&B.map(ce=>jsxRuntimeExports.jsx("source",{src:ce.src,type:ce.type},ce.src)),jsxRuntimeExports.jsx("track",{kind:"captions"})]}),jsxRuntimeExports.jsxs("div",{className:"grit range-slider",children:[jsxRuntimeExports.jsx("input",{"data-test":"barProgress",className:"slider",type:"range",value:parseFloat(m.toString())/re>=.989?re*.989:m,min:0,max:re,step:"0.01",onChange:ce=>{const he=Number(ce.target.value);W(he)},"aria-label":"Audio Player Progress Bar"}),jsxRuntimeExports.jsx("span",{className:"progress",style:{width:`${(m/re*100).toString()}%`}}),jsxRuntimeExports.jsxs("div",{className:"time-info",children:[jsxRuntimeExports.jsx("span",{className:"current-time",children:ae(m)}),jsxRuntimeExports.jsx("span",{className:"total-duration",children:ae(re)})]})]}),jsxRuntimeExports.jsxs("div",{id:"audioPlayerNavControls",className:"controls-btn-wrapper",children:[jsxRuntimeExports.jsx(IconButton,{"data-test":"skipBack",onClick:()=>{ee()},iconName:"skip-back",iconSize:"medium","aria-label":"Rewind 15 seconds"}),jsxRuntimeExports.jsx(IconButton,{"data-test":"playPause",iconName:b===playerStatesEnum$1.PLAYING?"pause":"play",onClick:K,disabled:H,iconSize:"medium","aria-label":`${b===playerStatesEnum$1.PLAYING?"pause":"play"} audio`}),jsxRuntimeExports.jsx(IconButton,{"data-test":"skipForward",onClick:()=>{z()},iconName:"skip-forward",iconSize:"medium",disabled:I,"aria-label":"Forward 15 seconds"})]})]})};var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(t,e){module.exports=e()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var n,s=t.length,i;for(n=0;n<s;n+=1){i=t[n].prototype;for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e.prototype[a]=i[a])}}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(n){this.audios.push(n)},pause:function(){var n,s=this.audios.length;for(n=0;n<s;n+=1)this.audios[n].pause()},resume:function(){var n,s=this.audios.length;for(n=0;n<s;n+=1)this.audios[n].resume()},setRate:function(n){var s,i=this.audios.length;for(s=0;s<i;s+=1)this.audios[s].setRate(n)},createAudio:function(n){return this.audioFactory?this.audioFactory(n):window.Howl?new window.Howl({src:[n]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(n){this.audioFactory=n},setVolume:function(n){this._volume=n,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var n,s=this.audios.length;for(n=0;n<s;n+=1)this.audios[n].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(n,s){var i=0,a=[],o;switch(n){case"int16":case"uint8c":o=1;break;default:o=1.1;break}for(i=0;i<s;i+=1)a.push(o);return a}function e(n,s){return n==="float32"?new Float32Array(s):n==="int16"?new Int16Array(s):n==="uint8c"?new Uint8ClampedArray(s):t(n,s)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]})(),BMMath.random=Math.random,BMMath.abs=function(t){var e=_typeof$6(t);if(e==="object"&&t.length){var n=createSizedArray(t.length),s,i=t.length;for(s=0;s<i;s+=1)n[s]=Math.abs(t[s]);return n}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,n,s){this.type=t,this.currentTime=e,this.totalTime=n,this.direction=s<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,n,s){this.type=t,this.currentLoop=n,this.totalLoops=e,this.direction=s<0?-1:1}function BMSegmentStartEvent(t,e,n){this.type=t,this.firstFrame=e,this.totalFrames=n}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}var createElementID=function(){var t=0;return function(){return t+=1,idPrefix$1+"__lottie_element_"+t}}();function HSVtoRGB(t,e,n){var s,i,a,o,l,u,c,d;switch(o=Math.floor(t*6),l=t*6-o,u=n*(1-e),c=n*(1-l*e),d=n*(1-(1-l)*e),o%6){case 0:s=n,i=d,a=u;break;case 1:s=c,i=n,a=u;break;case 2:s=u,i=n,a=d;break;case 3:s=u,i=c,a=n;break;case 4:s=d,i=u,a=n;break;case 5:s=n,i=u,a=c;break}return[s,i,a]}function RGBtoHSV(t,e,n){var s=Math.max(t,e,n),i=Math.min(t,e,n),a=s-i,o,l=s===0?0:a/s,u=s/255;switch(s){case i:o=0;break;case t:o=e-n+a*(e<n?6:0),o/=6*a;break;case e:o=n-t+a*2,o/=6*a;break;case n:o=t-e+a*4,o/=6*a;break}return[o,l,u]}function addSaturationToRGB(t,e){var n=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return n[1]+=e,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(t,e){var n=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return n[2]+=e,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(t,e){var n=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return n[0]+=e/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var t=[],e,n;for(e=0;e<256;e+=1)n=e.toString(16),t[e]=n.length===1?"0"+n:n;return function(s,i,a){return s<0&&(s=0),i<0&&(i=0),a<0&&(a=0),"#"+t[s]+t[i]+t[a]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}var dataManager=function(){var t=1,e=[],n,s,i={onmessage:function(){},postMessage:function(g){n({data:g})}},a={postMessage:function(g){i.onmessage({data:g})}};function o(m){if(window.Worker&&window.Blob&&getWebWorker()){var g=new Blob(["var _workerSelf = self; self.onmessage = ",m.toString()],{type:"text/javascript"}),E=URL.createObjectURL(g);return new Worker(E)}return n=m,i}function l(){s||(s=o(function(g){function E(){function b(se,G){var K,M,W=se.length,ee,z,ae,ce;for(M=0;M<W;M+=1)if(K=se[M],"ks"in K&&!K.completed){if(K.completed=!0,K.hasMask){var he=K.masksProperties;for(z=he.length,ee=0;ee<z;ee+=1)if(he[ee].pt.k.i)D(he[ee].pt.k);else for(ce=he[ee].pt.k.length,ae=0;ae<ce;ae+=1)he[ee].pt.k[ae].s&&D(he[ee].pt.k[ae].s[0]),he[ee].pt.k[ae].e&&D(he[ee].pt.k[ae].e[0])}K.ty===0?(K.layers=T(K.refId,G),b(K.layers,G)):K.ty===4?I(K.shapes):K.ty===5&&ne(K)}}function S(se,G){if(se){var K=0,M=se.length;for(K=0;K<M;K+=1)se[K].t===1&&(se[K].data.layers=T(se[K].data.refId,G),b(se[K].data.layers,G))}}function C(se,G){for(var K=0,M=G.length;K<M;){if(G[K].id===se)return G[K];K+=1}return null}function T(se,G){var K=C(se,G);return K?K.layers.__used?JSON.parse(JSON.stringify(K.layers)):(K.layers.__used=!0,K.layers):null}function I(se){var G,K=se.length,M,W;for(G=K-1;G>=0;G-=1)if(se[G].ty==="sh")if(se[G].ks.k.i)D(se[G].ks.k);else for(W=se[G].ks.k.length,M=0;M<W;M+=1)se[G].ks.k[M].s&&D(se[G].ks.k[M].s[0]),se[G].ks.k[M].e&&D(se[G].ks.k[M].e[0]);else se[G].ty==="gr"&&I(se[G].it)}function D(se){var G,K=se.i.length;for(G=0;G<K;G+=1)se.i[G][0]+=se.v[G][0],se.i[G][1]+=se.v[G][1],se.o[G][0]+=se.v[G][0],se.o[G][1]+=se.v[G][1]}function P(se,G){var K=G?G.split("."):[100,100,100];return se[0]>K[0]?!0:K[0]>se[0]?!1:se[1]>K[1]?!0:K[1]>se[1]?!1:se[2]>K[2]?!0:K[2]>se[2]?!1:null}var O=function(){var se=[4,4,14];function G(M){var W=M.t.d;M.t.d={k:[{s:W,t:0}]}}function K(M){var W,ee=M.length;for(W=0;W<ee;W+=1)M[W].ty===5&&G(M[W])}return function(M){if(P(se,M.v)&&(K(M.layers),M.assets)){var W,ee=M.assets.length;for(W=0;W<ee;W+=1)M.assets[W].layers&&K(M.assets[W].layers)}}}(),B=function(){var se=[4,7,99];return function(G){if(G.chars&&!P(se,G.v)){var K,M=G.chars.length;for(K=0;K<M;K+=1){var W=G.chars[K];W.data&&W.data.shapes&&(I(W.data.shapes),W.data.ip=0,W.data.op=99999,W.data.st=0,W.data.sr=1,W.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},G.chars[K].t||(W.data.shapes.push({ty:"no"}),W.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),F=function(){var se=[5,7,15];function G(M){var W=M.t.p;typeof W.a=="number"&&(W.a={a:0,k:W.a}),typeof W.p=="number"&&(W.p={a:0,k:W.p}),typeof W.r=="number"&&(W.r={a:0,k:W.r})}function K(M){var W,ee=M.length;for(W=0;W<ee;W+=1)M[W].ty===5&&G(M[W])}return function(M){if(P(se,M.v)&&(K(M.layers),M.assets)){var W,ee=M.assets.length;for(W=0;W<ee;W+=1)M.assets[W].layers&&K(M.assets[W].layers)}}}(),H=function(){var se=[4,1,9];function G(M){var W,ee=M.length,z,ae;for(W=0;W<ee;W+=1)if(M[W].ty==="gr")G(M[W].it);else if(M[W].ty==="fl"||M[W].ty==="st")if(M[W].c.k&&M[W].c.k[0].i)for(ae=M[W].c.k.length,z=0;z<ae;z+=1)M[W].c.k[z].s&&(M[W].c.k[z].s[0]/=255,M[W].c.k[z].s[1]/=255,M[W].c.k[z].s[2]/=255,M[W].c.k[z].s[3]/=255),M[W].c.k[z].e&&(M[W].c.k[z].e[0]/=255,M[W].c.k[z].e[1]/=255,M[W].c.k[z].e[2]/=255,M[W].c.k[z].e[3]/=255);else M[W].c.k[0]/=255,M[W].c.k[1]/=255,M[W].c.k[2]/=255,M[W].c.k[3]/=255}function K(M){var W,ee=M.length;for(W=0;W<ee;W+=1)M[W].ty===4&&G(M[W].shapes)}return function(M){if(P(se,M.v)&&(K(M.layers),M.assets)){var W,ee=M.assets.length;for(W=0;W<ee;W+=1)M.assets[W].layers&&K(M.assets[W].layers)}}}(),Q=function(){var se=[4,4,18];function G(M){var W,ee=M.length,z,ae;for(W=ee-1;W>=0;W-=1)if(M[W].ty==="sh")if(M[W].ks.k.i)M[W].ks.k.c=M[W].closed;else for(ae=M[W].ks.k.length,z=0;z<ae;z+=1)M[W].ks.k[z].s&&(M[W].ks.k[z].s[0].c=M[W].closed),M[W].ks.k[z].e&&(M[W].ks.k[z].e[0].c=M[W].closed);else M[W].ty==="gr"&&G(M[W].it)}function K(M){var W,ee,z=M.length,ae,ce,he,fe;for(ee=0;ee<z;ee+=1){if(W=M[ee],W.hasMask){var Ce=W.masksProperties;for(ce=Ce.length,ae=0;ae<ce;ae+=1)if(Ce[ae].pt.k.i)Ce[ae].pt.k.c=Ce[ae].cl;else for(fe=Ce[ae].pt.k.length,he=0;he<fe;he+=1)Ce[ae].pt.k[he].s&&(Ce[ae].pt.k[he].s[0].c=Ce[ae].cl),Ce[ae].pt.k[he].e&&(Ce[ae].pt.k[he].e[0].c=Ce[ae].cl)}W.ty===4&&G(W.shapes)}}return function(M){if(P(se,M.v)&&(K(M.layers),M.assets)){var W,ee=M.assets.length;for(W=0;W<ee;W+=1)M.assets[W].layers&&K(M.assets[W].layers)}}}();function Z(se){se.__complete||(H(se),O(se),B(se),F(se),Q(se),b(se.layers,se.assets),S(se.chars,se.assets),se.__complete=!0)}function ne(se){se.t.a.length===0&&"m"in se.t.p}var re={};return re.completeData=Z,re.checkColors=H,re.checkChars=B,re.checkPathProperties=F,re.checkShapes=Q,re.completeLayers=b,re}if(a.dataManager||(a.dataManager=E()),a.assetLoader||(a.assetLoader=function(){function b(C){var T=C.getResponseHeader("content-type");return T&&C.responseType==="json"&&T.indexOf("json")!==-1||C.response&&_typeof$5(C.response)==="object"?C.response:C.response&&typeof C.response=="string"?JSON.parse(C.response):C.responseText?JSON.parse(C.responseText):null}function S(C,T,I,D){var P,O=new XMLHttpRequest;try{O.responseType="json"}catch{}O.onreadystatechange=function(){if(O.readyState===4)if(O.status===200)P=b(O),I(P);else try{P=b(O),I(P)}catch(B){D&&D(B)}};try{O.open(["G","E","T"].join(""),C,!0)}catch{O.open(["G","E","T"].join(""),T+"/"+C,!0)}O.send()}return{load:S}}()),g.data.type==="loadAnimation")a.assetLoader.load(g.data.path,g.data.fullPath,function(b){a.dataManager.completeData(b),a.postMessage({id:g.data.id,payload:b,status:"success"})},function(){a.postMessage({id:g.data.id,status:"error"})});else if(g.data.type==="complete"){var x=g.data.animation;a.dataManager.completeData(x),a.postMessage({id:g.data.id,payload:x,status:"success"})}else g.data.type==="loadData"&&a.assetLoader.load(g.data.path,g.data.fullPath,function(b){a.postMessage({id:g.data.id,payload:b,status:"success"})},function(){a.postMessage({id:g.data.id,status:"error"})})}),s.onmessage=function(m){var g=m.data,E=g.id,x=e[E];e[E]=null,g.status==="success"?x.onComplete(g.payload):x.onError&&x.onError()})}function u(m,g){t+=1;var E="processId_"+t;return e[E]={onComplete:m,onError:g},E}function c(m,g,E){l();var x=u(g,E);s.postMessage({type:"loadAnimation",path:m,fullPath:window.location.origin+window.location.pathname,id:x})}function d(m,g,E){l();var x=u(g,E);s.postMessage({type:"loadData",path:m,fullPath:window.location.origin+window.location.pathname,id:x})}function p(m,g,E){l();var x=u(g,E);s.postMessage({type:"complete",animation:m,id:x})}return{loadAnimation:c,loadData:d,completeAnimation:p}}(),ImagePreloader=function(){var t=function(){var S=createTag("canvas");S.width=1,S.height=1;var C=S.getContext("2d");return C.fillStyle="rgba(0,0,0,0)",C.fillRect(0,0,1,1),S}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(S,C,T){var I="";if(S.e)I=S.p;else if(C){var D=S.p;D.indexOf("images/")!==-1&&(D=D.split("/")[1]),I=C+D}else I=T,I+=S.u?S.u:"",I+=S.p;return I}function i(S){var C=0,T=setInterval(function(){var I=S.getBBox();(I.width||C>500)&&(this._imageLoaded(),clearInterval(T)),C+=1}.bind(this),50)}function a(S){var C=s(S,this.assetsPath,this.path),T=createNS("image");isSafari?this.testImageLoaded(T):T.addEventListener("load",this._imageLoaded,!1),T.addEventListener("error",function(){I.img=t,this._imageLoaded()}.bind(this),!1),T.setAttributeNS("http://www.w3.org/1999/xlink","href",C),this._elementHelper.append?this._elementHelper.append(T):this._elementHelper.appendChild(T);var I={img:T,assetData:S};return I}function o(S){var C=s(S,this.assetsPath,this.path),T=createTag("img");T.crossOrigin="anonymous",T.addEventListener("load",this._imageLoaded,!1),T.addEventListener("error",function(){I.img=t,this._imageLoaded()}.bind(this),!1),T.src=C;var I={img:T,assetData:S};return I}function l(S){var C={assetData:S},T=s(S,this.assetsPath,this.path);return dataManager.loadData(T,function(I){C.img=I,this._footageLoaded()}.bind(this),function(){C.img={},this._footageLoaded()}.bind(this)),C}function u(S,C){this.imagesLoadedCb=C;var T,I=S.length;for(T=0;T<I;T+=1)S[T].layers||(!S[T].t||S[T].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(S[T]))):S[T].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(S[T]))))}function c(S){this.path=S||""}function d(S){this.assetsPath=S||""}function p(S){for(var C=0,T=this.images.length;C<T;){if(this.images[C].assetData===S)return this.images[C].img;C+=1}return null}function m(){this.imagesLoadedCb=null,this.images.length=0}function g(){return this.totalImages===this.loadedAssets}function E(){return this.totalFootages===this.loadedFootagesCount}function x(S,C){S==="svg"?(this._elementHelper=C,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function b(){this._imageLoaded=e.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=i.bind(this),this.createFootageData=l.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return b.prototype={loadAssets:u,setAssetsPath:d,setPath:c,loadedImages:g,loadedFootages:E,destroy:m,getAsset:p,createImgData:o,createImageData:a,imageLoaded:e,footageLoaded:n,setCacheType:x},b}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,n){if(this._cbs[e])for(var s=this._cbs[e],i=0;i<s.length;i+=1)s[i](n)},addEventListener:function(e,n){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(n),function(){this.removeEventListener(e,n)}.bind(this)},removeEventListener:function(e,n){if(!n)this._cbs[e]=null;else if(this._cbs[e]){for(var s=0,i=this._cbs[e].length;s<i;)this._cbs[e][s]===n&&(this._cbs[e].splice(s,1),s-=1,i-=1),s+=1;this._cbs[e].length||(this._cbs[e]=null)}}};var markerParser=function(){function t(e){for(var n=e.split(`\r
`),s={},i,a=0,o=0;o<n.length;o+=1)i=n[o].split(":"),i.length===2&&(s[i[0]]=i[1].trim(),a+=1);if(a===0)throw new Error;return s}return function(e){for(var n=[],s=0;s<e.length;s+=1){var i=e[s],a={time:i.tm,duration:i.dr};try{a.payload=JSON.parse(e[s].cm)}catch{try{a.payload=t(e[s].cm)}catch{a.payload={name:e[s].cm}}}n.push(a)}return n}}(),ProjectInterface=function(){function t(e){this.compositions.push(e)}return function(){function e(n){for(var s=0,i=this.compositions.length;s<i;){if(this.compositions[s].data&&this.compositions[s].data.nm===n)return this.compositions[s].prepareFrame&&this.compositions[s].data.xt&&this.compositions[s].prepareFrame(this.currentFrame),this.compositions[s].compInterface;s+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(e,n){renderers[e]=n};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var n=getRenderer(e);this.renderer=new n(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,t.loop===""||t.loop===null||t.loop===void 0||t.loop===!0?this.loop=!0:t.loop===!1?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay="autoplay"in t?t.autoplay:!0,this.name=t.name?t.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(t,"autoloadSegments")?t.autoloadSegments:!0,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(t.path.lastIndexOf("\\")!==-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var n={wrapper:t,animationData:e},s=t.attributes;n.path=s.getNamedItem("data-animation-path")?s.getNamedItem("data-animation-path").value:s.getNamedItem("data-bm-path")?s.getNamedItem("data-bm-path").value:s.getNamedItem("bm-path")?s.getNamedItem("bm-path").value:"",n.animType=s.getNamedItem("data-anim-type")?s.getNamedItem("data-anim-type").value:s.getNamedItem("data-bm-type")?s.getNamedItem("data-bm-type").value:s.getNamedItem("bm-type")?s.getNamedItem("bm-type").value:s.getNamedItem("data-bm-renderer")?s.getNamedItem("data-bm-renderer").value:s.getNamedItem("bm-renderer")?s.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var i=s.getNamedItem("data-anim-loop")?s.getNamedItem("data-anim-loop").value:s.getNamedItem("data-bm-loop")?s.getNamedItem("data-bm-loop").value:s.getNamedItem("bm-loop")?s.getNamedItem("bm-loop").value:"";i==="false"?n.loop=!1:i==="true"?n.loop=!0:i!==""&&(n.loop=parseInt(i,10));var a=s.getNamedItem("data-anim-autoplay")?s.getNamedItem("data-anim-autoplay").value:s.getNamedItem("data-bm-autoplay")?s.getNamedItem("data-bm-autoplay").value:s.getNamedItem("bm-autoplay")?s.getNamedItem("bm-autoplay").value:!0;n.autoplay=a!=="false",n.name=s.getNamedItem("data-name")?s.getNamedItem("data-name").value:s.getNamedItem("data-bm-name")?s.getNamedItem("data-bm-name").value:s.getNamedItem("bm-name")?s.getNamedItem("bm-name").value:"";var o=s.getNamedItem("data-anim-prerender")?s.getNamedItem("data-anim-prerender").value:s.getNamedItem("data-bm-prerender")?s.getNamedItem("data-bm-prerender").value:s.getNamedItem("bm-prerender")?s.getNamedItem("bm-prerender").value:"";o==="false"&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,n,s=e.length,i=t.layers,a,o=i.length;for(a=0;a<o;a+=1)for(n=0;n<s;){if(e[n].id===i[a].id){e[n]=i[a];break}n+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(s=t.assets.length,n=0;n<s;n+=1)this.animationData.assets.push(t.assets[n]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||t.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var n=typeof t=="number"?t:void 0,s=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(n,s)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,n=0;n<this.markers.length;n+=1)if(e=this.markers[n],e.payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,n){if(!(n&&this.name!==n)){var s=Number(t);if(isNaN(s)){var i=this.getMarkerData(t);i&&this.goToAndStop(i.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,n){if(!(n&&this.name!==n)){var s=Number(t);if(isNaN(s)){var i=this.getMarkerData(t);i&&(i.duration?this.playSegments([i.time,i.time+i.duration],!0):this.goToAndStop(i.time,!0))}else this.goToAndStop(s,e,n);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+t*this.frameModifier,n=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(n=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(n=!0,e=0)):this.setCurrentRawFrameValue(e),n&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?n=t:this.currentRawFrame+this.firstFrame>e&&(n=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,n!==-1&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),_typeof$4(t[0])==="object"){var n,s=t.length;for(n=0;n<s;n+=1)this.segments.push(t[n])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return this.segments.length?(this.adjustSegment(this.segments.shift(),t),!0):!1},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var n=t.p;n.indexOf("images/")!==-1&&(n=n.split("/")[1]),e=this.assetsPath+n}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,n=this.assets.length;e<n;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,n){try{var s=this.renderer.getElementByPath(t);s.updateDocumentData(e,n)}catch{}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],n=0,s=0,i=0,a=!0,o=!1;function l(G){for(var K=0,M=G.target;K<s;)e[K].animation===M&&(e.splice(K,1),K-=1,s-=1,M.isPaused||p()),K+=1}function u(G,K){if(!G)return null;for(var M=0;M<s;){if(e[M].elem===G&&e[M].elem!==null)return e[M].animation;M+=1}var W=new AnimationItem;return m(W,G),W.setData(G,K),W}function c(){var G,K=e.length,M=[];for(G=0;G<K;G+=1)M.push(e[G].animation);return M}function d(){i+=1,H()}function p(){i-=1}function m(G,K){G.addEventListener("destroy",l),G.addEventListener("_active",d),G.addEventListener("_idle",p),e.push({elem:K,animation:G}),s+=1}function g(G){var K=new AnimationItem;return m(K,null),K.setParams(G),K}function E(G,K){var M;for(M=0;M<s;M+=1)e[M].animation.setSpeed(G,K)}function x(G,K){var M;for(M=0;M<s;M+=1)e[M].animation.setDirection(G,K)}function b(G){var K;for(K=0;K<s;K+=1)e[K].animation.play(G)}function S(G){var K=G-n,M;for(M=0;M<s;M+=1)e[M].animation.advanceTime(K);n=G,i&&!o?window.requestAnimationFrame(S):a=!0}function C(G){n=G,window.requestAnimationFrame(S)}function T(G){var K;for(K=0;K<s;K+=1)e[K].animation.pause(G)}function I(G,K,M){var W;for(W=0;W<s;W+=1)e[W].animation.goToAndStop(G,K,M)}function D(G){var K;for(K=0;K<s;K+=1)e[K].animation.stop(G)}function P(G){var K;for(K=0;K<s;K+=1)e[K].animation.togglePause(G)}function O(G){var K;for(K=s-1;K>=0;K-=1)e[K].animation.destroy(G)}function B(G,K,M){var W=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),ee,z=W.length;for(ee=0;ee<z;ee+=1)M&&W[ee].setAttribute("data-bm-type",M),u(W[ee],G);if(K&&z===0){M||(M="svg");var ae=document.getElementsByTagName("body")[0];ae.innerText="";var ce=createTag("div");ce.style.width="100%",ce.style.height="100%",ce.setAttribute("data-bm-type",M),ae.appendChild(ce),u(ce,G)}}function F(){var G;for(G=0;G<s;G+=1)e[G].animation.resize()}function H(){!o&&i&&a&&(window.requestAnimationFrame(C),a=!1)}function Q(){o=!0}function Z(){o=!1,H()}function ne(G,K){var M;for(M=0;M<s;M+=1)e[M].animation.setVolume(G,K)}function re(G){var K;for(K=0;K<s;K+=1)e[K].animation.mute(G)}function se(G){var K;for(K=0;K<s;K+=1)e[K].animation.unmute(G)}return t.registerAnimation=u,t.loadAnimation=g,t.setSpeed=E,t.setDirection=x,t.play=b,t.pause=T,t.stop=D,t.togglePause=P,t.searchAnimations=B,t.resize=F,t.goToAndStop=I,t.destroy=O,t.freeze=Q,t.unfreeze=Z,t.setVolume=ne,t.mute=re,t.unmute=se,t.getRegisteredAnimations=c,t}(),BezierFactory=function(){var t={};t.getBezierEasing=n;var e={};function n(C,T,I,D,P){var O=P||("bez_"+C+"_"+T+"_"+I+"_"+D).replace(/\./g,"p");if(e[O])return e[O];var B=new S([C,T,I,D]);return e[O]=B,B}var s=4,i=.001,a=1e-7,o=10,l=11,u=1/(l-1),c=typeof Float32Array=="function";function d(C,T){return 1-3*T+3*C}function p(C,T){return 3*T-6*C}function m(C){return 3*C}function g(C,T,I){return((d(T,I)*C+p(T,I))*C+m(T))*C}function E(C,T,I){return 3*d(T,I)*C*C+2*p(T,I)*C+m(T)}function x(C,T,I,D,P){var O,B,F=0;do B=T+(I-T)/2,O=g(B,D,P)-C,O>0?I=B:T=B;while(Math.abs(O)>a&&++F<o);return B}function b(C,T,I,D){for(var P=0;P<s;++P){var O=E(T,I,D);if(O===0)return T;var B=g(T,I,D)-C;T-=B/O}return T}function S(C){this._p=C,this._mSampleValues=c?new Float32Array(l):new Array(l),this._precomputed=!1,this.get=this.get.bind(this)}return S.prototype={get:function(T){var I=this._p[0],D=this._p[1],P=this._p[2],O=this._p[3];return this._precomputed||this._precompute(),I===D&&P===O?T:T===0?0:T===1?1:g(this._getTForX(T),D,O)},_precompute:function(){var T=this._p[0],I=this._p[1],D=this._p[2],P=this._p[3];this._precomputed=!0,(T!==I||D!==P)&&this._calcSampleValues()},_calcSampleValues:function(){for(var T=this._p[0],I=this._p[2],D=0;D<l;++D)this._mSampleValues[D]=g(D*u,T,I)},_getTForX:function(T){for(var I=this._p[0],D=this._p[2],P=this._mSampleValues,O=0,B=1,F=l-1;B!==F&&P[B]<=T;++B)O+=u;--B;var H=(T-P[B])/(P[B+1]-P[B]),Q=O+H*u,Z=E(Q,I,D);return Z>=i?b(T,Q,I,D):Z===0?Q:x(T,O,O+u,I,D)}},t}(),pooling=function(){function t(e){return e.concat(createSizedArray(e.length))}return{double:t}}(),poolFactory=function(){return function(t,e,n){var s=0,i=t,a=createSizedArray(i),o={newElement:l,release:u};function l(){var c;return s?(s-=1,c=a[s]):c=e(),c}function u(c){s===i&&(a=pooling.double(a),i*=2),n&&n(c),a[s]=c,s+=1}return o}}(),bezierLengthPool=function(){function t(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,t)}(),segmentsLengthPool=function(){function t(){return{lengths:[],totalLength:0}}function e(n){var s,i=n.lengths.length;for(s=0;s<i;s+=1)bezierLengthPool.release(n.lengths[s]);n.lengths.length=0}return poolFactory(8,t,e)}();function bezFunction(){var t=Math;function e(m,g,E,x,b,S){var C=m*x+g*b+E*S-b*x-S*m-E*g;return C>-.001&&C<.001}function n(m,g,E,x,b,S,C,T,I){if(E===0&&S===0&&I===0)return e(m,g,x,b,C,T);var D=t.sqrt(t.pow(x-m,2)+t.pow(b-g,2)+t.pow(S-E,2)),P=t.sqrt(t.pow(C-m,2)+t.pow(T-g,2)+t.pow(I-E,2)),O=t.sqrt(t.pow(C-x,2)+t.pow(T-b,2)+t.pow(I-S,2)),B;return D>P?D>O?B=D-P-O:B=O-P-D:O>P?B=O-P-D:B=P-D-O,B>-1e-4&&B<1e-4}var s=function(){return function(m,g,E,x){var b=getDefaultCurveSegments(),S,C,T,I,D,P=0,O,B=[],F=[],H=bezierLengthPool.newElement();for(T=E.length,S=0;S<b;S+=1){for(D=S/(b-1),O=0,C=0;C<T;C+=1)I=bmPow(1-D,3)*m[C]+3*bmPow(1-D,2)*D*E[C]+3*(1-D)*bmPow(D,2)*x[C]+bmPow(D,3)*g[C],B[C]=I,F[C]!==null&&(O+=bmPow(B[C]-F[C],2)),F[C]=B[C];O&&(O=bmSqrt(O),P+=O),H.percents[S]=D,H.lengths[S]=P}return H.addedLength=P,H}}();function i(m){var g=segmentsLengthPool.newElement(),E=m.c,x=m.v,b=m.o,S=m.i,C,T=m._length,I=g.lengths,D=0;for(C=0;C<T-1;C+=1)I[C]=s(x[C],x[C+1],b[C],S[C+1]),D+=I[C].addedLength;return E&&T&&(I[C]=s(x[C],x[0],b[C],S[0]),D+=I[C].addedLength),g.totalLength=D,g}function a(m){this.segmentLength=0,this.points=new Array(m)}function o(m,g){this.partialLength=m,this.point=g}var l=function(){var m={};return function(g,E,x,b){var S=(g[0]+"_"+g[1]+"_"+E[0]+"_"+E[1]+"_"+x[0]+"_"+x[1]+"_"+b[0]+"_"+b[1]).replace(/\./g,"p");if(!m[S]){var C=getDefaultCurveSegments(),T,I,D,P,O,B=0,F,H,Q=null;g.length===2&&(g[0]!==E[0]||g[1]!==E[1])&&e(g[0],g[1],E[0],E[1],g[0]+x[0],g[1]+x[1])&&e(g[0],g[1],E[0],E[1],E[0]+b[0],E[1]+b[1])&&(C=2);var Z=new a(C);for(D=x.length,T=0;T<C;T+=1){for(H=createSizedArray(D),O=T/(C-1),F=0,I=0;I<D;I+=1)P=bmPow(1-O,3)*g[I]+3*bmPow(1-O,2)*O*(g[I]+x[I])+3*(1-O)*bmPow(O,2)*(E[I]+b[I])+bmPow(O,3)*E[I],H[I]=P,Q!==null&&(F+=bmPow(H[I]-Q[I],2));F=bmSqrt(F),B+=F,Z.points[T]=new o(F,H),Q=H}Z.segmentLength=B,m[S]=Z}return m[S]}}();function u(m,g){var E=g.percents,x=g.lengths,b=E.length,S=bmFloor((b-1)*m),C=m*g.addedLength,T=0;if(S===b-1||S===0||C===x[S])return E[S];for(var I=x[S]>C?-1:1,D=!0;D;)if(x[S]<=C&&x[S+1]>C?(T=(C-x[S])/(x[S+1]-x[S]),D=!1):S+=I,S<0||S>=b-1){if(S===b-1)return E[S];D=!1}return E[S]+(E[S+1]-E[S])*T}function c(m,g,E,x,b,S){var C=u(b,S),T=1-C,I=t.round((T*T*T*m[0]+(C*T*T+T*C*T+T*T*C)*E[0]+(C*C*T+T*C*C+C*T*C)*x[0]+C*C*C*g[0])*1e3)/1e3,D=t.round((T*T*T*m[1]+(C*T*T+T*C*T+T*T*C)*E[1]+(C*C*T+T*C*C+C*T*C)*x[1]+C*C*C*g[1])*1e3)/1e3;return[I,D]}var d=createTypedArray("float32",8);function p(m,g,E,x,b,S,C){b<0?b=0:b>1&&(b=1);var T=u(b,C);S=S>1?1:S;var I=u(S,C),D,P=m.length,O=1-T,B=1-I,F=O*O*O,H=T*O*O*3,Q=T*T*O*3,Z=T*T*T,ne=O*O*B,re=T*O*B+O*T*B+O*O*I,se=T*T*B+O*T*I+T*O*I,G=T*T*I,K=O*B*B,M=T*B*B+O*I*B+O*B*I,W=T*I*B+O*I*I+T*B*I,ee=T*I*I,z=B*B*B,ae=I*B*B+B*I*B+B*B*I,ce=I*I*B+B*I*I+I*B*I,he=I*I*I;for(D=0;D<P;D+=1)d[D*4]=t.round((F*m[D]+H*E[D]+Q*x[D]+Z*g[D])*1e3)/1e3,d[D*4+1]=t.round((ne*m[D]+re*E[D]+se*x[D]+G*g[D])*1e3)/1e3,d[D*4+2]=t.round((K*m[D]+M*E[D]+W*x[D]+ee*g[D])*1e3)/1e3,d[D*4+3]=t.round((z*m[D]+ae*E[D]+ce*x[D]+he*g[D])*1e3)/1e3;return d}return{getSegmentsLength:i,getNewSegment:p,getPointInSegment:c,buildBezierData:l,pointOnLine2D:e,pointOnLine3D:n}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var n=this.offsetTime,s;this.propType==="multidimensional"&&(s=createTypedArray("float32",this.pv.length));for(var i=e.lastIndex,a=i,o=this.keyframes.length-1,l=!0,u,c,d;l;){if(u=this.keyframes[a],c=this.keyframes[a+1],a===o-1&&t>=c.t-n){u.h&&(u=c),i=0;break}if(c.t-n>t){i=a;break}a<o-1?a+=1:(i=0,l=!1)}d=this.keyframesMetadata[a]||{};var p,m,g,E,x,b,S=c.t-n,C=u.t-n,T;if(u.to){d.bezierData||(d.bezierData=bez.buildBezierData(u.s,c.s||u.e,u.to,u.ti));var I=d.bezierData;if(t>=S||t<C){var D=t>=S?I.points.length-1:0;for(m=I.points[D].point.length,p=0;p<m;p+=1)s[p]=I.points[D].point[p]}else{d.__fnct?b=d.__fnct:(b=BezierFactory.getBezierEasing(u.o.x,u.o.y,u.i.x,u.i.y,u.n).get,d.__fnct=b),g=b((t-C)/(S-C));var P=I.segmentLength*g,O,B=e.lastFrame<t&&e._lastKeyframeIndex===a?e._lastAddedLength:0;for(x=e.lastFrame<t&&e._lastKeyframeIndex===a?e._lastPoint:0,l=!0,E=I.points.length;l;){if(B+=I.points[x].partialLength,P===0||g===0||x===I.points.length-1){for(m=I.points[x].point.length,p=0;p<m;p+=1)s[p]=I.points[x].point[p];break}else if(P>=B&&P<B+I.points[x+1].partialLength){for(O=(P-B)/I.points[x+1].partialLength,m=I.points[x].point.length,p=0;p<m;p+=1)s[p]=I.points[x].point[p]+(I.points[x+1].point[p]-I.points[x].point[p])*O;break}x<E-1?x+=1:l=!1}e._lastPoint=x,e._lastAddedLength=B-I.points[x].partialLength,e._lastKeyframeIndex=a}}else{var F,H,Q,Z,ne;if(o=u.s.length,T=c.s||u.e,this.sh&&u.h!==1)if(t>=S)s[0]=T[0],s[1]=T[1],s[2]=T[2];else if(t<=C)s[0]=u.s[0],s[1]=u.s[1],s[2]=u.s[2];else{var re=createQuaternion(u.s),se=createQuaternion(T),G=(t-C)/(S-C);quaternionToEuler(s,slerp(re,se,G))}else for(a=0;a<o;a+=1)u.h!==1&&(t>=S?g=1:t<C?g=0:(u.o.x.constructor===Array?(d.__fnct||(d.__fnct=[]),d.__fnct[a]?b=d.__fnct[a]:(F=u.o.x[a]===void 0?u.o.x[0]:u.o.x[a],H=u.o.y[a]===void 0?u.o.y[0]:u.o.y[a],Q=u.i.x[a]===void 0?u.i.x[0]:u.i.x[a],Z=u.i.y[a]===void 0?u.i.y[0]:u.i.y[a],b=BezierFactory.getBezierEasing(F,H,Q,Z).get,d.__fnct[a]=b)):d.__fnct?b=d.__fnct:(F=u.o.x,H=u.o.y,Q=u.i.x,Z=u.i.y,b=BezierFactory.getBezierEasing(F,H,Q,Z).get,u.keyframeMetadata=b),g=b((t-C)/(S-C)))),T=c.s||u.e,ne=u.h===1?u.s[a]:u.s[a]+(T[a]-u.s[a])*g,this.propType==="multidimensional"?s[a]=ne:s=ne}return e.lastIndex=i,s}function slerp(t,e,n){var s=[],i=t[0],a=t[1],o=t[2],l=t[3],u=e[0],c=e[1],d=e[2],p=e[3],m,g,E,x,b;return g=i*u+a*c+o*d+l*p,g<0&&(g=-g,u=-u,c=-c,d=-d,p=-p),1-g>1e-6?(m=Math.acos(g),E=Math.sin(m),x=Math.sin((1-n)*m)/E,b=Math.sin(n*m)/E):(x=1-n,b=n),s[0]=x*i+b*u,s[1]=x*a+b*c,s[2]=x*o+b*d,s[3]=x*l+b*p,s}function quaternionToEuler(t,e){var n=e[0],s=e[1],i=e[2],a=e[3],o=Math.atan2(2*s*a-2*n*i,1-2*s*s-2*i*i),l=Math.asin(2*n*s+2*i*a),u=Math.atan2(2*n*a-2*s*i,1-2*n*n-2*i*i);t[0]=o/degToRads,t[1]=l/degToRads,t[2]=u/degToRads}function createQuaternion(t){var e=t[0]*degToRads,n=t[1]*degToRads,s=t[2]*degToRads,i=Math.cos(e/2),a=Math.cos(n/2),o=Math.cos(s/2),l=Math.sin(e/2),u=Math.sin(n/2),c=Math.sin(s/2),d=i*a*o-l*u*c,p=l*u*o+i*a*c,m=l*a*o+i*u*c,g=i*u*o-l*a*c;return[p,m,g,d]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&t>=n||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var s=this.interpolateValue(t,this._caching);this.pv=s}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if(this.propType==="unidimensional")e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var n=0,s=this.v.length;n<s;)e=t[n]*this.mult,mathAbs(this.v[n]-e)>1e-5&&(this.v[n]=e,this._mdf=!0),n+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)n=this.effectsSequence[t](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,n,s){this.propType="unidimensional",this.mult=n||1,this.data=e,this.v=n?e.k*n:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,n,s){this.propType="multidimensional",this.mult=n||1,this.data=e,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,a=e.k.length;for(this.v=createTypedArray("float32",a),this.pv=createTypedArray("float32",a),this.vel=createTypedArray("float32",a),i=0;i<a;i+=1)this.v[i]=e.k[i]*this.mult,this.pv[i]=e.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,n,s){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=n||1,this.elem=t,this.container=s,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,n,s){this.propType="multidimensional";var i,a=e.k.length,o,l,u,c;for(i=0;i<a-1;i+=1)e.k[i].to&&e.k[i].s&&e.k[i+1]&&e.k[i+1].s&&(o=e.k[i].s,l=e.k[i+1].s,u=e.k[i].to,c=e.k[i].ti,(o.length===2&&!(o[0]===l[0]&&o[1]===l[1])&&bez.pointOnLine2D(o[0],o[1],l[0],l[1],o[0]+u[0],o[1]+u[1])&&bez.pointOnLine2D(o[0],o[1],l[0],l[1],l[0]+c[0],l[1]+c[1])||o.length===3&&!(o[0]===l[0]&&o[1]===l[1]&&o[2]===l[2])&&bez.pointOnLine3D(o[0],o[1],o[2],l[0],l[1],l[2],o[0]+u[0],o[1]+u[1],o[2]+u[2])&&bez.pointOnLine3D(o[0],o[1],o[2],l[0],l[1],l[2],l[0]+c[0],l[1]+c[1],l[2]+c[2]))&&(e.k[i].to=null,e.k[i].ti=null),o[0]===l[0]&&o[1]===l[1]&&u[0]===0&&u[1]===0&&c[0]===0&&c[1]===0&&(o.length===2||o[2]===l[2]&&u[2]===0&&c[2]===0)&&(e.k[i].to=null,e.k[i].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=t,this.container=s,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var d=e.k[0].s.length;for(this.v=createTypedArray("float32",d),this.pv=createTypedArray("float32",d),i=0;i<d;i+=1)this.v[i]=initFrame,this.pv[i]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",d)},this.addEffect=addEffect}var PropertyFactory=function(){function t(n,s,i,a,o){s.sid&&(s=n.globalData.slotManager.getProp(s));var l;if(!s.k.length)l=new ValueProperty(n,s,a,o);else if(typeof s.k[0]=="number")l=new MultiDimensionalProperty(n,s,a,o);else switch(i){case 0:l=new KeyframedValueProperty(n,s,a,o);break;case 1:l=new KeyframedMultidimensionalProperty(n,s,a,o);break}return l.effectsSequence.length&&o.addDynamicProperty(l),l}var e={getProp:t};return e}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,n=this.dynamicProperties.length;for(e=0;e<n;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function t(){return createTypedArray("float32",2)}return poolFactory(8,t)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var n=0;n<e;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,n,s,i){var a;switch(this._length=Math.max(this._length,s+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[];break}(!a[s]||a[s]&&!i)&&(a[s]=pointPool.newElement()),a[s][0]=t,a[s][1]=e},ShapePath.prototype.setTripleAt=function(t,e,n,s,i,a,o,l){this.setXYAt(t,e,"v",o,l),this.setXYAt(n,s,"o",o,l),this.setXYAt(i,a,"i",o,l)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,n=this.o,s=this.i,i=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],s[0][0],s[0][1],n[0][0],n[0][1],0,!1),i=1);var a=this._length-1,o=this._length,l;for(l=i;l<o;l+=1)t.setTripleAt(e[a][0],e[a][1],s[a][0],s[a][1],n[a][0],n[a][1],l,!1),a-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function t(){return new ShapePath}function e(i){var a=i._length,o;for(o=0;o<a;o+=1)pointPool.release(i.v[o]),pointPool.release(i.i[o]),pointPool.release(i.o[o]),i.v[o]=null,i.i[o]=null,i.o[o]=null;i._length=0,i.c=!1}function n(i){var a=s.newElement(),o,l=i._length===void 0?i.v.length:i._length;for(a.setLength(l),a.c=i.c,o=0;o<l;o+=1)a.setTripleAt(i.v[o][0],i.v[o][1],i.o[o][0],i.o[o][1],i.i[o][0],i.i[o][1],o);return a}var s=poolFactory(4,t,e);return s.clone=n,s}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=function(){var t={newShapeCollection:i,release:a},e=0,n=4,s=createSizedArray(n);function i(){var o;return e?(e-=1,o=s[e]):o=new ShapeCollection,o}function a(o){var l,u=o._length;for(l=0;l<u;l+=1)shapePool.release(o.shapes[l]);o._length=0,e===n&&(s=pooling.double(s),n*=2),s[e]=o,e+=1}return t}(),ShapePropertyFactory=function(){var t=-999999;function e(S,C,T){var I=T.lastIndex,D,P,O,B,F,H,Q,Z,ne,re=this.keyframes;if(S<re[0].t-this.offsetTime)D=re[0].s[0],O=!0,I=0;else if(S>=re[re.length-1].t-this.offsetTime)D=re[re.length-1].s?re[re.length-1].s[0]:re[re.length-2].e[0],O=!0;else{for(var se=I,G=re.length-1,K=!0,M,W,ee;K&&(M=re[se],W=re[se+1],!(W.t-this.offsetTime>S));)se<G-1?se+=1:K=!1;if(ee=this.keyframesMetadata[se]||{},O=M.h===1,I=se,!O){if(S>=W.t-this.offsetTime)Z=1;else if(S<M.t-this.offsetTime)Z=0;else{var z;ee.__fnct?z=ee.__fnct:(z=BezierFactory.getBezierEasing(M.o.x,M.o.y,M.i.x,M.i.y).get,ee.__fnct=z),Z=z((S-(M.t-this.offsetTime))/(W.t-this.offsetTime-(M.t-this.offsetTime)))}P=W.s?W.s[0]:M.e[0]}D=M.s[0]}for(H=C._length,Q=D.i[0].length,T.lastIndex=I,B=0;B<H;B+=1)for(F=0;F<Q;F+=1)ne=O?D.i[B][F]:D.i[B][F]+(P.i[B][F]-D.i[B][F])*Z,C.i[B][F]=ne,ne=O?D.o[B][F]:D.o[B][F]+(P.o[B][F]-D.o[B][F])*Z,C.o[B][F]=ne,ne=O?D.v[B][F]:D.v[B][F]+(P.v[B][F]-D.v[B][F])*Z,C.v[B][F]=ne}function n(){var S=this.comp.renderedFrame-this.offsetTime,C=this.keyframes[0].t-this.offsetTime,T=this.keyframes[this.keyframes.length-1].t-this.offsetTime,I=this._caching.lastFrame;return I!==t&&(I<C&&S<C||I>T&&S>T)||(this._caching.lastIndex=I<S?this._caching.lastIndex:0,this.interpolateShape(S,this.pv,this._caching)),this._caching.lastFrame=S,this.pv}function s(){this.paths=this.localShapeCollection}function i(S,C){if(S._length!==C._length||S.c!==C.c)return!1;var T,I=S._length;for(T=0;T<I;T+=1)if(S.v[T][0]!==C.v[T][0]||S.v[T][1]!==C.v[T][1]||S.o[T][0]!==C.o[T][0]||S.o[T][1]!==C.o[T][1]||S.i[T][0]!==C.i[T][0]||S.i[T][1]!==C.i[T][1])return!1;return!0}function a(S){i(this.v,S)||(this.v=shapePool.clone(S),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var S;this.kf?S=this.pv:this.data.ks?S=this.data.ks.k:S=this.data.pt.k;var C,T=this.effectsSequence.length;for(C=0;C<T;C+=1)S=this.effectsSequence[C](S);this.setVValue(S),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function l(S,C,T){this.propType="shape",this.comp=S.comp,this.container=S,this.elem=S,this.data=C,this.k=!1,this.kf=!1,this._mdf=!1;var I=T===3?C.pt.k:C.ks.k;this.v=shapePool.clone(I),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=s,this.effectsSequence=[]}function u(S){this.effectsSequence.push(S),this.container.addDynamicProperty(this)}l.prototype.interpolateShape=e,l.prototype.getValue=o,l.prototype.setVValue=a,l.prototype.addEffect=u;function c(S,C,T){this.propType="shape",this.comp=S.comp,this.elem=S,this.container=S,this.offsetTime=S.data.st,this.keyframes=T===3?C.pt.k:C.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var I=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,I),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=s,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[n.bind(this)]}c.prototype.getValue=o,c.prototype.interpolateShape=e,c.prototype.setVValue=a,c.prototype.addEffect=u;var d=function(){var S=roundCorner;function C(T,I){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=I.d,this.elem=T,this.comp=T.comp,this.frameId=-1,this.initDynamicPropertyContainer(T),this.p=PropertyFactory.getProp(T,I.p,1,0,this),this.s=PropertyFactory.getProp(T,I.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return C.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var I=this.p.v[0],D=this.p.v[1],P=this.s.v[0]/2,O=this.s.v[1]/2,B=this.d!==3,F=this.v;F.v[0][0]=I,F.v[0][1]=D-O,F.v[1][0]=B?I+P:I-P,F.v[1][1]=D,F.v[2][0]=I,F.v[2][1]=D+O,F.v[3][0]=B?I-P:I+P,F.v[3][1]=D,F.i[0][0]=B?I-P*S:I+P*S,F.i[0][1]=D-O,F.i[1][0]=B?I+P:I-P,F.i[1][1]=D-O*S,F.i[2][0]=B?I+P*S:I-P*S,F.i[2][1]=D+O,F.i[3][0]=B?I-P:I+P,F.i[3][1]=D+O*S,F.o[0][0]=B?I+P*S:I-P*S,F.o[0][1]=D-O,F.o[1][0]=B?I+P:I-P,F.o[1][1]=D+O*S,F.o[2][0]=B?I-P*S:I+P*S,F.o[2][1]=D+O,F.o[3][0]=B?I-P:I+P,F.o[3][1]=D-O*S}},extendPrototype([DynamicPropertyContainer],C),C}(),p=function(){function S(C,T){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=C,this.comp=C.comp,this.data=T,this.frameId=-1,this.d=T.d,this.initDynamicPropertyContainer(C),T.sy===1?(this.ir=PropertyFactory.getProp(C,T.ir,0,0,this),this.is=PropertyFactory.getProp(C,T.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(C,T.pt,0,0,this),this.p=PropertyFactory.getProp(C,T.p,1,0,this),this.r=PropertyFactory.getProp(C,T.r,0,degToRads,this),this.or=PropertyFactory.getProp(C,T.or,0,0,this),this.os=PropertyFactory.getProp(C,T.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return S.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var T=Math.floor(this.pt.v)*2,I=Math.PI*2/T,D=!0,P=this.or.v,O=this.ir.v,B=this.os.v,F=this.is.v,H=2*Math.PI*P/(T*2),Q=2*Math.PI*O/(T*2),Z,ne,re,se,G=-Math.PI/2;G+=this.r.v;var K=this.data.d===3?-1:1;for(this.v._length=0,Z=0;Z<T;Z+=1){ne=D?P:O,re=D?B:F,se=D?H:Q;var M=ne*Math.cos(G),W=ne*Math.sin(G),ee=M===0&&W===0?0:W/Math.sqrt(M*M+W*W),z=M===0&&W===0?0:-M/Math.sqrt(M*M+W*W);M+=+this.p.v[0],W+=+this.p.v[1],this.v.setTripleAt(M,W,M-ee*se*re*K,W-z*se*re*K,M+ee*se*re*K,W+z*se*re*K,Z,!0),D=!D,G+=I*K}},convertPolygonToPath:function(){var T=Math.floor(this.pt.v),I=Math.PI*2/T,D=this.or.v,P=this.os.v,O=2*Math.PI*D/(T*4),B,F=-Math.PI*.5,H=this.data.d===3?-1:1;for(F+=this.r.v,this.v._length=0,B=0;B<T;B+=1){var Q=D*Math.cos(F),Z=D*Math.sin(F),ne=Q===0&&Z===0?0:Z/Math.sqrt(Q*Q+Z*Z),re=Q===0&&Z===0?0:-Q/Math.sqrt(Q*Q+Z*Z);Q+=+this.p.v[0],Z+=+this.p.v[1],this.v.setTripleAt(Q,Z,Q-ne*O*P*H,Z-re*O*P*H,Q+ne*O*P*H,Z+re*O*P*H,B,!0),F+=I*H}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],S),S}(),m=function(){function S(C,T){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=C,this.comp=C.comp,this.frameId=-1,this.d=T.d,this.initDynamicPropertyContainer(C),this.p=PropertyFactory.getProp(C,T.p,1,0,this),this.s=PropertyFactory.getProp(C,T.s,1,0,this),this.r=PropertyFactory.getProp(C,T.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return S.prototype={convertRectToPath:function(){var T=this.p.v[0],I=this.p.v[1],D=this.s.v[0]/2,P=this.s.v[1]/2,O=bmMin(D,P,this.r.v),B=O*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(T+D,I-P+O,T+D,I-P+O,T+D,I-P+B,0,!0),this.v.setTripleAt(T+D,I+P-O,T+D,I+P-B,T+D,I+P-O,1,!0),O!==0?(this.v.setTripleAt(T+D-O,I+P,T+D-O,I+P,T+D-B,I+P,2,!0),this.v.setTripleAt(T-D+O,I+P,T-D+B,I+P,T-D+O,I+P,3,!0),this.v.setTripleAt(T-D,I+P-O,T-D,I+P-O,T-D,I+P-B,4,!0),this.v.setTripleAt(T-D,I-P+O,T-D,I-P+B,T-D,I-P+O,5,!0),this.v.setTripleAt(T-D+O,I-P,T-D+O,I-P,T-D+B,I-P,6,!0),this.v.setTripleAt(T+D-O,I-P,T+D-B,I-P,T+D-O,I-P,7,!0)):(this.v.setTripleAt(T-D,I+P,T-D+B,I+P,T-D,I+P,2),this.v.setTripleAt(T-D,I-P,T-D,I-P+B,T-D,I-P,3))):(this.v.setTripleAt(T+D,I-P+O,T+D,I-P+B,T+D,I-P+O,0,!0),O!==0?(this.v.setTripleAt(T+D-O,I-P,T+D-O,I-P,T+D-B,I-P,1,!0),this.v.setTripleAt(T-D+O,I-P,T-D+B,I-P,T-D+O,I-P,2,!0),this.v.setTripleAt(T-D,I-P+O,T-D,I-P+O,T-D,I-P+B,3,!0),this.v.setTripleAt(T-D,I+P-O,T-D,I+P-B,T-D,I+P-O,4,!0),this.v.setTripleAt(T-D+O,I+P,T-D+O,I+P,T-D+B,I+P,5,!0),this.v.setTripleAt(T+D-O,I+P,T+D-B,I+P,T+D-O,I+P,6,!0),this.v.setTripleAt(T+D,I+P-O,T+D,I+P-O,T+D,I+P-B,7,!0)):(this.v.setTripleAt(T-D,I-P,T-D+B,I-P,T-D,I-P,1,!0),this.v.setTripleAt(T-D,I+P,T-D,I+P-B,T-D,I+P,2,!0),this.v.setTripleAt(T+D,I+P,T+D-B,I+P,T+D,I+P,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:s},extendPrototype([DynamicPropertyContainer],S),S}();function g(S,C,T){var I;if(T===3||T===4){var D=T===3?C.pt:C.ks,P=D.k;P.length?I=new c(S,C,T):I=new l(S,C,T)}else T===5?I=new m(S,C):T===6?I=new d(S,C):T===7&&(I=new p(S,C));return I.k&&S.addDynamicProperty(I),I}function E(){return l}function x(){return c}var b={};return b.getShapeProp=g,b.getConstructorFunction=E,b.getKeyframedConstructorFunction=x,b}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var t=Math.cos,e=Math.sin,n=Math.tan,s=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function a(M){if(M===0)return this;var W=t(M),ee=e(M);return this._t(W,-ee,0,0,ee,W,0,0,0,0,1,0,0,0,0,1)}function o(M){if(M===0)return this;var W=t(M),ee=e(M);return this._t(1,0,0,0,0,W,-ee,0,0,ee,W,0,0,0,0,1)}function l(M){if(M===0)return this;var W=t(M),ee=e(M);return this._t(W,0,ee,0,0,1,0,0,-ee,0,W,0,0,0,0,1)}function u(M){if(M===0)return this;var W=t(M),ee=e(M);return this._t(W,-ee,0,0,ee,W,0,0,0,0,1,0,0,0,0,1)}function c(M,W){return this._t(1,W,M,1,0,0)}function d(M,W){return this.shear(n(M),n(W))}function p(M,W){var ee=t(W),z=e(W);return this._t(ee,z,0,0,-z,ee,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(M),1,0,0,0,0,1,0,0,0,0,1)._t(ee,-z,0,0,z,ee,0,0,0,0,1,0,0,0,0,1)}function m(M,W,ee){return!ee&&ee!==0&&(ee=1),M===1&&W===1&&ee===1?this:this._t(M,0,0,0,0,W,0,0,0,0,ee,0,0,0,0,1)}function g(M,W,ee,z,ae,ce,he,fe,Ce,Me,Ye,We,Be,rt,tt,Ue){return this.props[0]=M,this.props[1]=W,this.props[2]=ee,this.props[3]=z,this.props[4]=ae,this.props[5]=ce,this.props[6]=he,this.props[7]=fe,this.props[8]=Ce,this.props[9]=Me,this.props[10]=Ye,this.props[11]=We,this.props[12]=Be,this.props[13]=rt,this.props[14]=tt,this.props[15]=Ue,this}function E(M,W,ee){return ee=ee||0,M!==0||W!==0||ee!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,M,W,ee,1):this}function x(M,W,ee,z,ae,ce,he,fe,Ce,Me,Ye,We,Be,rt,tt,Ue){var Pe=this.props;if(M===1&&W===0&&ee===0&&z===0&&ae===0&&ce===1&&he===0&&fe===0&&Ce===0&&Me===0&&Ye===1&&We===0)return Pe[12]=Pe[12]*M+Pe[15]*Be,Pe[13]=Pe[13]*ce+Pe[15]*rt,Pe[14]=Pe[14]*Ye+Pe[15]*tt,Pe[15]*=Ue,this._identityCalculated=!1,this;var Qe=Pe[0],Je=Pe[1],nt=Pe[2],ft=Pe[3],At=Pe[4],ot=Pe[5],qe=Pe[6],mt=Pe[7],st=Pe[8],St=Pe[9],bt=Pe[10],Mt=Pe[11],pt=Pe[12],rr=Pe[13],Ft=Pe[14],Qt=Pe[15];return Pe[0]=Qe*M+Je*ae+nt*Ce+ft*Be,Pe[1]=Qe*W+Je*ce+nt*Me+ft*rt,Pe[2]=Qe*ee+Je*he+nt*Ye+ft*tt,Pe[3]=Qe*z+Je*fe+nt*We+ft*Ue,Pe[4]=At*M+ot*ae+qe*Ce+mt*Be,Pe[5]=At*W+ot*ce+qe*Me+mt*rt,Pe[6]=At*ee+ot*he+qe*Ye+mt*tt,Pe[7]=At*z+ot*fe+qe*We+mt*Ue,Pe[8]=st*M+St*ae+bt*Ce+Mt*Be,Pe[9]=st*W+St*ce+bt*Me+Mt*rt,Pe[10]=st*ee+St*he+bt*Ye+Mt*tt,Pe[11]=st*z+St*fe+bt*We+Mt*Ue,Pe[12]=pt*M+rr*ae+Ft*Ce+Qt*Be,Pe[13]=pt*W+rr*ce+Ft*Me+Qt*rt,Pe[14]=pt*ee+rr*he+Ft*Ye+Qt*tt,Pe[15]=pt*z+rr*fe+Ft*We+Qt*Ue,this._identityCalculated=!1,this}function b(M){var W=M.props;return this.transform(W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15])}function S(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function C(M){for(var W=0;W<16;){if(M.props[W]!==this.props[W])return!1;W+=1}return!0}function T(M){var W;for(W=0;W<16;W+=1)M.props[W]=this.props[W];return M}function I(M){var W;for(W=0;W<16;W+=1)this.props[W]=M[W]}function D(M,W,ee){return{x:M*this.props[0]+W*this.props[4]+ee*this.props[8]+this.props[12],y:M*this.props[1]+W*this.props[5]+ee*this.props[9]+this.props[13],z:M*this.props[2]+W*this.props[6]+ee*this.props[10]+this.props[14]}}function P(M,W,ee){return M*this.props[0]+W*this.props[4]+ee*this.props[8]+this.props[12]}function O(M,W,ee){return M*this.props[1]+W*this.props[5]+ee*this.props[9]+this.props[13]}function B(M,W,ee){return M*this.props[2]+W*this.props[6]+ee*this.props[10]+this.props[14]}function F(){var M=this.props[0]*this.props[5]-this.props[1]*this.props[4],W=this.props[5]/M,ee=-this.props[1]/M,z=-this.props[4]/M,ae=this.props[0]/M,ce=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/M,he=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/M,fe=new Matrix;return fe.props[0]=W,fe.props[1]=ee,fe.props[4]=z,fe.props[5]=ae,fe.props[12]=ce,fe.props[13]=he,fe}function H(M){var W=this.getInverseMatrix();return W.applyToPointArray(M[0],M[1],M[2]||0)}function Q(M){var W,ee=M.length,z=[];for(W=0;W<ee;W+=1)z[W]=H(M[W]);return z}function Z(M,W,ee){var z=createTypedArray("float32",6);if(this.isIdentity())z[0]=M[0],z[1]=M[1],z[2]=W[0],z[3]=W[1],z[4]=ee[0],z[5]=ee[1];else{var ae=this.props[0],ce=this.props[1],he=this.props[4],fe=this.props[5],Ce=this.props[12],Me=this.props[13];z[0]=M[0]*ae+M[1]*he+Ce,z[1]=M[0]*ce+M[1]*fe+Me,z[2]=W[0]*ae+W[1]*he+Ce,z[3]=W[0]*ce+W[1]*fe+Me,z[4]=ee[0]*ae+ee[1]*he+Ce,z[5]=ee[0]*ce+ee[1]*fe+Me}return z}function ne(M,W,ee){var z;return this.isIdentity()?z=[M,W,ee]:z=[M*this.props[0]+W*this.props[4]+ee*this.props[8]+this.props[12],M*this.props[1]+W*this.props[5]+ee*this.props[9]+this.props[13],M*this.props[2]+W*this.props[6]+ee*this.props[10]+this.props[14]],z}function re(M,W){if(this.isIdentity())return M+","+W;var ee=this.props;return Math.round((M*ee[0]+W*ee[4]+ee[12])*100)/100+","+Math.round((M*ee[1]+W*ee[5]+ee[13])*100)/100}function se(){for(var M=0,W=this.props,ee="matrix3d(",z=1e4;M<16;)ee+=s(W[M]*z)/z,ee+=M===15?")":",",M+=1;return ee}function G(M){var W=1e4;return M<1e-6&&M>0||M>-1e-6&&M<0?s(M*W)/W:M}function K(){var M=this.props,W=G(M[0]),ee=G(M[1]),z=G(M[4]),ae=G(M[5]),ce=G(M[12]),he=G(M[13]);return"matrix("+W+","+ee+","+z+","+ae+","+ce+","+he+")"}return function(){this.reset=i,this.rotate=a,this.rotateX=o,this.rotateY=l,this.rotateZ=u,this.skew=d,this.skewFromAxis=p,this.shear=c,this.scale=m,this.setTransform=g,this.translate=E,this.transform=x,this.multiply=b,this.applyToPoint=D,this.applyToX=P,this.applyToY=O,this.applyToZ=B,this.applyToPointArray=ne,this.applyToTriplePoints=Z,this.applyToPointStringified=re,this.toCSS=se,this.to2dCSS=K,this.clone=T,this.cloneFromProps=I,this.equals=C,this.inversePoints=Q,this.inversePoint=H,this.getInverseMatrix=F,this._t=this.transform,this.isIdentity=S,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}var lottie={};function setLocation(t){setLocationHref(t)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return animationManager.loadAnimation(t)}function setQuality(t){if(typeof t=="string")switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t)}function inBrowser(){return typeof navigator<"u"}function installPlugin(t,e){t==="expressions"&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),n=0;n<e.length;n+=1){var s=e[n].split("=");if(decodeURIComponent(s[0])==t)return decodeURIComponent(s[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(t){}var ShapeModifiers=function(){var t={},e={};t.registerModifier=n,t.getModifier=s;function n(i,a){e[i]||(e[i]=a)}function s(i,a,o){return new e[i](a,o)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,n,s,i){var a=[];e<=1?a.push({s:t,e}):t>=1?a.push({s:t-1,e:e-1}):(a.push({s:t,e:1}),a.push({s:0,e:e-1}));var o=[],l,u=a.length,c;for(l=0;l<u;l+=1)if(c=a[l],!(c.e*i<s||c.s*i>s+n)){var d,p;c.s*i<=s?d=0:d=(c.s*i-s)/n,c.e*i>=s+n?p=1:p=(c.e*i-s)/n,o.push([d,p])}return o.length||o.push([0,0]),o},TrimModifier.prototype.releasePathsData=function(t){var e,n=t.length;for(e=0;e<n;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,n;if(this._mdf||t){var s=this.o.v%360/360;if(s<0&&(s+=1),this.s.v>1?e=1+s:this.s.v<0?e=0+s:e=this.s.v+s,this.e.v>1?n=1+s:this.e.v<0?n=0+s:n=this.e.v+s,e>n){var i=e;e=n,n=i}e=Math.round(e*1e4)*1e-4,n=Math.round(n*1e4)*1e-4,this.sValue=e,this.eValue=n}else e=this.sValue,n=this.eValue;var a,o,l=this.shapes.length,u,c,d,p,m,g=0;if(n===e)for(o=0;o<l;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(n===1&&e===0||n===0&&e===1){if(this._mdf)for(o=0;o<l;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var E=[],x,b;for(o=0;o<l;o+=1)if(x=this.shapes[o],!x.shape._mdf&&!this._mdf&&!t&&this.m!==2)x.shape.paths=x.localShapeCollection;else{if(a=x.shape.paths,c=a._length,m=0,!x.shape._mdf&&x.pathsData.length)m=x.totalShapeLength;else{for(d=this.releasePathsData(x.pathsData),u=0;u<c;u+=1)p=bez.getSegmentsLength(a.shapes[u]),d.push(p),m+=p.totalLength;x.totalShapeLength=m,x.pathsData=d}g+=m,x.shape._mdf=!0}var S=e,C=n,T=0,I;for(o=l-1;o>=0;o-=1)if(x=this.shapes[o],x.shape._mdf){for(b=x.localShapeCollection,b.releaseShapes(),this.m===2&&l>1?(I=this.calculateShapeEdges(e,n,x.totalShapeLength,T,g),T+=x.totalShapeLength):I=[[S,C]],c=I.length,u=0;u<c;u+=1){S=I[u][0],C=I[u][1],E.length=0,C<=1?E.push({s:x.totalShapeLength*S,e:x.totalShapeLength*C}):S>=1?E.push({s:x.totalShapeLength*(S-1),e:x.totalShapeLength*(C-1)}):(E.push({s:x.totalShapeLength*S,e:x.totalShapeLength}),E.push({s:0,e:x.totalShapeLength*(C-1)}));var D=this.addShapes(x,E[0]);if(E[0].s!==E[0].e){if(E.length>1){var P=x.shape.paths.shapes[x.shape.paths._length-1];if(P.c){var O=D.pop();this.addPaths(D,b),D=this.addShapes(x,E[1],O)}else this.addPaths(D,b),D=this.addShapes(x,E[1])}this.addPaths(D,b)}}x.shape.paths=b}}},TrimModifier.prototype.addPaths=function(t,e){var n,s=t.length;for(n=0;n<s;n+=1)e.addShape(t[n])},TrimModifier.prototype.addSegment=function(t,e,n,s,i,a,o){i.setXYAt(e[0],e[1],"o",a),i.setXYAt(n[0],n[1],"i",a+1),o&&i.setXYAt(t[0],t[1],"v",a),i.setXYAt(s[0],s[1],"v",a+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,n,s){e.setXYAt(t[1],t[5],"o",n),e.setXYAt(t[2],t[6],"i",n+1),s&&e.setXYAt(t[0],t[4],"v",n),e.setXYAt(t[3],t[7],"v",n+1)},TrimModifier.prototype.addShapes=function(t,e,n){var s=t.pathsData,i=t.shape.paths.shapes,a,o=t.shape.paths._length,l,u,c=0,d,p,m,g,E=[],x,b=!0;for(n?(p=n._length,x=n._length):(n=shapePool.newElement(),p=0,x=0),E.push(n),a=0;a<o;a+=1){for(m=s[a].lengths,n.c=i[a].c,u=i[a].c?m.length:m.length+1,l=1;l<u;l+=1)if(d=m[l-1],c+d.addedLength<e.s)c+=d.addedLength,n.c=!1;else if(c>e.e){n.c=!1;break}else e.s<=c&&e.e>=c+d.addedLength?(this.addSegment(i[a].v[l-1],i[a].o[l-1],i[a].i[l],i[a].v[l],n,p,b),b=!1):(g=bez.getNewSegment(i[a].v[l-1],i[a].v[l],i[a].o[l-1],i[a].i[l],(e.s-c)/d.addedLength,(e.e-c)/d.addedLength,m[l-1]),this.addSegmentFromArray(g,n,p,b),b=!1,n.c=!1),c+=d.addedLength,p+=1;if(i[a].c&&m.length){if(d=m[l-1],c<=e.e){var S=m[l-1].addedLength;e.s<=c&&e.e>=c+S?(this.addSegment(i[a].v[l-1],i[a].o[l-1],i[a].i[0],i[a].v[0],n,p,b),b=!1):(g=bez.getNewSegment(i[a].v[l-1],i[a].v[0],i[a].o[l-1],i[a].i[0],(e.s-c)/S,(e.e-c)/S,m[l-1]),this.addSegmentFromArray(g,n,p,b),b=!1,n.c=!1)}else n.c=!1;c+=d.addedLength,p+=1}if(n._length&&(n.setXYAt(n.v[x][0],n.v[x][1],"i",x),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),c>e.e)break;a<o-1&&(n=shapePool.newElement(),b=!0,E.push(n),p=0)}return E};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var n=e/100,s=[0,0],i=t._length,a=0;for(a=0;a<i;a+=1)s[0]+=t.v[a][0],s[1]+=t.v[a][1];s[0]/=i,s[1]/=i;var o=shapePool.newElement();o.c=t.c;var l,u,c,d,p,m;for(a=0;a<i;a+=1)l=t.v[a][0]+(s[0]-t.v[a][0])*n,u=t.v[a][1]+(s[1]-t.v[a][1])*n,c=t.o[a][0]+(s[0]-t.o[a][0])*-n,d=t.o[a][1]+(s[1]-t.o[a][1])*-n,p=t.i[a][0]+(s[0]-t.i[a][0])*-n,m=t.i[a][1]+(s[1]-t.i[a][1])*-n,o.setTripleAt(l,u,c,d,p,m,a);return o},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,n,s=this.shapes.length,i,a,o=this.amount.v;if(o!==0){var l,u;for(n=0;n<s;n+=1){if(l=this.shapes[n],u=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!t))for(u.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,a=l.shape.paths._length,i=0;i<a;i+=1)u.addShape(this.processPath(e[i],o));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(u){var c=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||c,this.a&&u.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&u.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&u.skewFromAxis(-this.sk.v,this.sa.v),this.r?u.rotate(-this.r.v):u.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?u.translate(this.px.v,this.py.v,-this.pz.v):u.translate(this.px.v,this.py.v,0):u.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function n(u){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||u){var c;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var d,p;if(c=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(d=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/c,0),p=this.p.getValueAtTime(this.p.keyframes[0].t/c,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(d=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/c,0),p=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/c,0)):(d=this.p.pv,p=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/c,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){d=[],p=[];var m=this.px,g=this.py;m._caching.lastFrame+m.offsetTime<=m.keyframes[0].t?(d[0]=m.getValueAtTime((m.keyframes[0].t+.01)/c,0),d[1]=g.getValueAtTime((g.keyframes[0].t+.01)/c,0),p[0]=m.getValueAtTime(m.keyframes[0].t/c,0),p[1]=g.getValueAtTime(g.keyframes[0].t/c,0)):m._caching.lastFrame+m.offsetTime>=m.keyframes[m.keyframes.length-1].t?(d[0]=m.getValueAtTime(m.keyframes[m.keyframes.length-1].t/c,0),d[1]=g.getValueAtTime(g.keyframes[g.keyframes.length-1].t/c,0),p[0]=m.getValueAtTime((m.keyframes[m.keyframes.length-1].t-.01)/c,0),p[1]=g.getValueAtTime((g.keyframes[g.keyframes.length-1].t-.01)/c,0)):(d=[m.pv,g.pv],p[0]=m.getValueAtTime((m._caching.lastFrame+m.offsetTime-.01)/c,m.offsetTime),p[1]=g.getValueAtTime((g._caching.lastFrame+g.offsetTime-.01)/c,g.offsetTime))}else p=t,d=p;this.v.rotate(-Math.atan2(d[1]-p[1],d[0]-p[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function s(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function i(){}function a(u){this._addDynamicProperty(u),this.elem.addDynamicProperty(u),this._isDirty=!0}function o(u,c,d){if(this.elem=u,this.frameId=-1,this.propType="transform",this.data=c,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(d||u),c.p&&c.p.s?(this.px=PropertyFactory.getProp(u,c.p.x,0,0,this),this.py=PropertyFactory.getProp(u,c.p.y,0,0,this),c.p.z&&(this.pz=PropertyFactory.getProp(u,c.p.z,0,0,this))):this.p=PropertyFactory.getProp(u,c.p||{k:[0,0,0]},1,0,this),c.rx){if(this.rx=PropertyFactory.getProp(u,c.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(u,c.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(u,c.rz,0,degToRads,this),c.or.k[0].ti){var p,m=c.or.k.length;for(p=0;p<m;p+=1)c.or.k[p].to=null,c.or.k[p].ti=null}this.or=PropertyFactory.getProp(u,c.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(u,c.r||{k:0},0,degToRads,this);c.sk&&(this.sk=PropertyFactory.getProp(u,c.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(u,c.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(u,c.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(u,c.s||{k:[100,100,100]},1,.01,this),c.o?this.o=PropertyFactory.getProp(u,c.o,0,.01,u):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}o.prototype={applyToMatrix:e,getValue:n,precalculateMatrix:s,autoOrient:i},extendPrototype([DynamicPropertyContainer],o),o.prototype.addDynamicProperty=a,o.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function l(u,c,d){return new o(u,c,d)}return{getTransformProperty:l}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,n,s,i,a){var o=a?-1:1,l=s.s.v[0]+(1-s.s.v[0])*(1-i),u=s.s.v[1]+(1-s.s.v[1])*(1-i);t.translate(s.p.v[0]*o*i,s.p.v[1]*o*i,s.p.v[2]),e.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),e.rotate(-s.r.v*o*i),e.translate(s.a.v[0],s.a.v[1],s.a.v[2]),n.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),n.scale(a?1/l:l,a?1/u:u),n.translate(s.a.v[0],s.a.v[1],s.a.v[2])},RepeaterModifier.prototype.init=function(t,e,n,s){for(this.elem=t,this.arr=e,this.pos=n,this.elemsData=s,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[n]);n>0;)n-=1,this._elements.unshift(e[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e]._processed=!1,t[e].ty==="gr"&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var n,s=t.length;for(n=0;n<s;n+=1)t[n]._render=e,t[n].ty==="gr"&&this.changeGroupRender(t[n].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,n,s,i,a,o=!1;if(this._mdf||t){var l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}a=0;var c;for(s=0;s<=this._groups.length-1;s+=1){if(c=a<l,this._groups[s]._render=c,this.changeGroupRender(this._groups[s].it,c),!c){var d=this.elemsData[s].it,p=d[d.length-1];p.transform.op.v!==0?(p.transform.op._mdf=!0,p.transform.op.v=0):p.transform.op._mdf=!1}a+=1}this._currentCopies=l;var m=this.o.v,g=m%1,E=m>0?Math.floor(m):Math.ceil(m),x=this.pMatrix.props,b=this.rMatrix.props,S=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var C=0;if(m>0){for(;C<E;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),C+=1;g&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,g,!1),C+=g)}else if(m<0){for(;C>E;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),C-=1;g&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-g,!0),C-=g)}s=this.data.m===1?0:this._currentCopies-1,i=this.data.m===1?1:-1,a=this._currentCopies;for(var T,I;a;){if(e=this.elemsData[s].it,n=e[e.length-1].transform.mProps.v.props,I=n.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(s/(this._currentCopies-1)),C!==0){for((s!==0&&i===1||s!==this._currentCopies-1&&i===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),this.matrix.transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15]),this.matrix.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),T=0;T<I;T+=1)n[T]=this.matrix.props[T];this.matrix.reset()}else for(this.matrix.reset(),T=0;T<I;T+=1)n[T]=this.matrix.props[T];C+=1,a-=1,s+=i}}else for(a=this._currentCopies,s=0,i=1;a;)e=this.elemsData[s].it,n=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,a-=1,s+=i;return o},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var n=shapePool.newElement();n.c=t.c;var s,i=t._length,a,o,l,u,c,d,p=0,m,g,E,x,b,S;for(s=0;s<i;s+=1)a=t.v[s],l=t.o[s],o=t.i[s],a[0]===l[0]&&a[1]===l[1]&&a[0]===o[0]&&a[1]===o[1]?(s===0||s===i-1)&&!t.c?(n.setTripleAt(a[0],a[1],l[0],l[1],o[0],o[1],p),p+=1):(s===0?u=t.v[i-1]:u=t.v[s-1],c=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)),d=c?Math.min(c/2,e)/c:0,b=a[0]+(u[0]-a[0])*d,m=b,S=a[1]-(a[1]-u[1])*d,g=S,E=m-(m-a[0])*roundCorner,x=g-(g-a[1])*roundCorner,n.setTripleAt(m,g,E,x,b,S,p),p+=1,s===i-1?u=t.v[0]:u=t.v[s+1],c=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)),d=c?Math.min(c/2,e)/c:0,E=a[0]+(u[0]-a[0])*d,m=E,x=a[1]+(u[1]-a[1])*d,g=x,b=m-(m-a[0])*roundCorner,S=g-(g-a[1])*roundCorner,n.setTripleAt(m,g,E,x,b,S,p),p+=1):(n.setTripleAt(t.v[s][0],t.v[s][1],t.o[s][0],t.o[s][1],t.i[s][0],t.i[s][1],p),p+=1);return n},RoundCornersModifier.prototype.processShapes=function(t){var e,n,s=this.shapes.length,i,a,o=this.rd.v;if(o!==0){var l,u;for(n=0;n<s;n+=1){if(l=this.shapes[n],u=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!t))for(u.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,a=l.shape.paths._length,i=0;i<a;i+=1)u.addShape(this.processPath(e[i],o));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(t,e){return Math.abs(t-e)*1e5<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,n){return t*(1-n)+e*n}function lerpPoint(t,e,n){return[lerp(t[0],e[0],n),lerp(t[1],e[1],n)]}function quadRoots(t,e,n){if(t===0)return[];var s=e*e-4*t*n;if(s<0)return[];var i=-e/(2*t);if(s===0)return[i];var a=Math.sqrt(s)/(2*t);return[i-a,i+a]}function polynomialCoefficients(t,e,n,s){return[-t+3*e-3*n+s,3*t-6*e+3*n,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,n,s,i){i&&pointEqual(t,e)&&(e=lerpPoint(t,s,1/3)),i&&pointEqual(n,s)&&(n=lerpPoint(t,s,2/3));var a=polynomialCoefficients(t[0],e[0],n[0],s[0]),o=polynomialCoefficients(t[1],e[1],n[1],s[1]);this.a=[a[0],o[0]],this.b=[a[1],o[1]],this.c=[a[2],o[2]],this.d=[a[3],o[3]],this.points=[t,e,n,s]}PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,n=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(n<0)return[];var s=Math.sqrt(n);return floatZero(s)?s>0&&s<1?[e]:[]:[e-s,e+s].filter(function(i){return i>0&&i<1})},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),n=lerpPoint(this.points[1],this.points[2],t),s=lerpPoint(this.points[2],this.points[3],t),i=lerpPoint(e,n,t),a=lerpPoint(n,s,t),o=lerpPoint(i,a,t);return[new PolynomialBezier(this.points[0],e,i,o,!0),new PolynomialBezier(o,a,s,this.points[3],!0)]};function extrema(t,e){var n=t.points[0][e],s=t.points[t.points.length-1][e];if(n>s){var i=s;s=n,n=i}for(var a=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),o=0;o<a.length;o+=1)if(a[o]>0&&a[o]<1){var l=t.point(a[o])[e];l<n?n=l:l>s&&(s=l)}return{min:n,max:s}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}};function intersectData(t,e,n){var s=t.boundingBox();return{cx:s.cx,cy:s.cy,width:s.width,height:s.height,bez:t,t:(e+n)/2,t1:e,t2:n}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return Math.abs(t.cx-e.cx)*2<t.width+e.width&&Math.abs(t.cy-e.cy)*2<t.height+e.height}function intersectsImpl(t,e,n,s,i,a){if(boxIntersect(t,e)){if(n>=a||t.width<=s&&t.height<=s&&e.width<=s&&e.height<=s){i.push([t.t,e.t]);return}var o=splitData(t),l=splitData(e);intersectsImpl(o[0],l[0],n+1,s,i,a),intersectsImpl(o[0],l[1],n+1,s,i,a),intersectsImpl(o[1],l[0],n+1,s,i,a),intersectsImpl(o[1],l[1],n+1,s,i,a)}}PolynomialBezier.prototype.intersections=function(t,e,n){e===void 0&&(e=2),n===void 0&&(n=7);var s=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,s,n),s},PolynomialBezier.shapeSegment=function(t,e){var n=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[n],t.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var n=(e+1)%t.length();return new PolynomialBezier(t.v[n],t.i[n],t.o[e],t.v[e],!0)};function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,n,s){var i=[t[0],t[1],1],a=[e[0],e[1],1],o=[n[0],n[1],1],l=[s[0],s[1],1],u=crossProduct(crossProduct(i,a),crossProduct(o,l));return floatZero(u[2])?null:[u[0]/u[2],u[1]/u[2]]}function polarOffset(t,e,n){return[t[0]+Math.cos(e)*n,t[1]-Math.sin(e)*n]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(t,e,n,s,i,a,o){var l=n-Math.PI/2,u=n+Math.PI/2,c=e[0]+Math.cos(n)*s*i,d=e[1]-Math.sin(n)*s*i;t.setTripleAt(c,d,c+Math.cos(l)*a,d-Math.sin(l)*a,c+Math.cos(u)*o,d-Math.sin(u)*o,t.length())}function getPerpendicularVector(t,e){var n=[e[0]-t[0],e[1]-t[1]],s=-Math.PI*.5,i=[Math.cos(s)*n[0]-Math.sin(s)*n[1],Math.sin(s)*n[0]+Math.cos(s)*n[1]];return i}function getProjectingAngle(t,e){var n=e===0?t.length()-1:e-1,s=(e+1)%t.length(),i=t.v[n],a=t.v[s],o=getPerpendicularVector(i,a);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(t,e,n,s,i,a,o){var l=getProjectingAngle(e,n),u=e.v[n%e._length],c=e.v[n===0?e._length-1:n-1],d=e.v[(n+1)%e._length],p=a===2?Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)):0,m=a===2?Math.sqrt(Math.pow(u[0]-d[0],2)+Math.pow(u[1]-d[1],2)):0;setPoint(t,e.v[n%e._length],l,o,s,m/((i+1)*2),p/((i+1)*2))}function zigZagSegment(t,e,n,s,i,a){for(var o=0;o<s;o+=1){var l=(o+1)/(s+1),u=i===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,c=e.normalAngle(l),d=e.point(l);setPoint(t,d,c,a,n,u/((s+1)*2),u/((s+1)*2)),a=-a}return a}ZigZagModifier.prototype.processPath=function(t,e,n,s){var i=t._length,a=shapePool.newElement();if(a.c=t.c,t.c||(i-=1),i===0)return a;var o=-1,l=PolynomialBezier.shapeSegment(t,0);zigZagCorner(a,t,0,e,n,s,o);for(var u=0;u<i;u+=1)o=zigZagSegment(a,l,e,n,s,-o),u===i-1&&!t.c?l=null:l=PolynomialBezier.shapeSegment(t,(u+1)%i),zigZagCorner(a,t,u+1,e,n,s,o);return a},ZigZagModifier.prototype.processShapes=function(t){var e,n,s=this.shapes.length,i,a,o=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),u=this.pointsType.v;if(o!==0){var c,d;for(n=0;n<s;n+=1){if(c=this.shapes[n],d=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!t))for(d.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,a=c.shape.paths._length,i=0;i<a;i+=1)d.addShape(this.processPath(e[i],o,l,u));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(t,e,n){var s=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,s,n),polarOffset(e,s,n)]}function offsetSegment(t,e){var n,s,i,a,o,l,u;u=linearOffset(t.points[0],t.points[1],e),n=u[0],s=u[1],u=linearOffset(t.points[1],t.points[2],e),i=u[0],a=u[1],u=linearOffset(t.points[2],t.points[3],e),o=u[0],l=u[1];var c=lineIntersection(n,s,i,a);c===null&&(c=s);var d=lineIntersection(o,l,i,a);return d===null&&(d=o),new PolynomialBezier(n,c,d,l)}function joinLines(t,e,n,s,i){var a=e.points[3],o=n.points[0];if(s===3||pointEqual(a,o))return a;if(s===2){var l=-e.tangentAngle(1),u=-n.tangentAngle(0)+Math.PI,c=lineIntersection(a,polarOffset(a,l+Math.PI/2,100),o,polarOffset(o,l+Math.PI/2,100)),d=c?pointDistance(c,a):pointDistance(a,o)/2,p=polarOffset(a,l,2*d*roundCorner);return t.setXYAt(p[0],p[1],"o",t.length()-1),p=polarOffset(o,u,2*d*roundCorner),t.setTripleAt(o[0],o[1],o[0],o[1],p[0],p[1],t.length()),o}var m=pointEqual(a,e.points[2])?e.points[0]:e.points[2],g=pointEqual(o,n.points[1])?n.points[3]:n.points[1],E=lineIntersection(m,a,o,g);return E&&pointDistance(E,a)<i?(t.setTripleAt(E[0],E[1],E[0],E[1],E[0],E[1],t.length()),E):a}function getIntersection(t,e){var n=t.intersections(e);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(t,e){var n=t.slice(),s=e.slice(),i=getIntersection(t[t.length-1],e[0]);return i&&(n[t.length-1]=t[t.length-1].split(i[0])[0],s[0]=e[0].split(i[1])[1]),t.length>1&&e.length>1&&(i=getIntersection(t[0],e[e.length-1]),i)?[[t[0].split(i[0])[0]],[e[e.length-1].split(i[1])[1]]]:[n,s]}function pruneIntersections(t){for(var e,n=1;n<t.length;n+=1)e=pruneSegmentIntersection(t[n-1],t[n]),t[n-1]=e[0],t[n]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var n=t.inflectionPoints(),s,i,a,o;if(n.length===0)return[offsetSegment(t,e)];if(n.length===1||floatEqual(n[1],1))return a=t.split(n[0]),s=a[0],i=a[1],[offsetSegment(s,e),offsetSegment(i,e)];a=t.split(n[0]),s=a[0];var l=(n[1]-n[0])/(1-n[0]);return a=a[1].split(l),o=a[0],i=a[1],[offsetSegment(s,e),offsetSegment(o,e),offsetSegment(i,e)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(t,e,n,s){var i=shapePool.newElement();i.c=t.c;var a=t.length();t.c||(a-=1);var o,l,u,c=[];for(o=0;o<a;o+=1)u=PolynomialBezier.shapeSegment(t,o),c.push(offsetSegmentSplit(u,e));if(!t.c)for(o=a-1;o>=0;o-=1)u=PolynomialBezier.shapeSegmentInverted(t,o),c.push(offsetSegmentSplit(u,e));c=pruneIntersections(c);var d=null,p=null;for(o=0;o<c.length;o+=1){var m=c[o];for(p&&(d=joinLines(i,p,m[0],n,s)),p=m[m.length-1],l=0;l<m.length;l+=1)u=m[l],d&&pointEqual(u.points[0],d)?i.setXYAt(u.points[1][0],u.points[1][1],"o",i.length()-1):i.setTripleAt(u.points[0][0],u.points[0][1],u.points[1][0],u.points[1][1],u.points[0][0],u.points[0][1],i.length()),i.setTripleAt(u.points[3][0],u.points[3][1],u.points[3][0],u.points[3][1],u.points[2][0],u.points[2][1],i.length()),d=u.points[3]}return c.length&&joinLines(i,p,c[0][0],n,s),i},OffsetPathModifier.prototype.processShapes=function(t){var e,n,s=this.shapes.length,i,a,o=this.amount.v,l=this.miterLimit.v,u=this.lineJoin;if(o!==0){var c,d;for(n=0;n<s;n+=1){if(c=this.shapes[n],d=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!t))for(d.releaseShapes(),c.shape._mdf=!0,e=c.shape.paths.shapes,a=c.shape.paths._length,i=0;i<a;i+=1)d.addShape(this.processPath(e[i],o,u,l));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],n="normal",s="normal",i=e.length,a,o=0;o<i;o+=1)switch(a=e[o].toLowerCase(),a){case"italic":s="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200";break}return{style:s,weight:t.fWeight||n}}var FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[],data:{shapes:[]}},n=[];n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var s=127988,i=917631,a=917601,o=917626,l=65039,u=8205,c=127462,d=127487,p=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function m(G){var K=G.split(","),M,W=K.length,ee=[];for(M=0;M<W;M+=1)K[M]!=="sans-serif"&&K[M]!=="monospace"&&ee.push(K[M]);return ee.join(",")}function g(G,K){var M=createTag("span");M.setAttribute("aria-hidden",!0),M.style.fontFamily=K;var W=createTag("span");W.innerText="giItT1WQy@!-/#",M.style.position="absolute",M.style.left="-10000px",M.style.top="-10000px",M.style.fontSize="300px",M.style.fontVariant="normal",M.style.fontStyle="normal",M.style.fontWeight="normal",M.style.letterSpacing="0",M.appendChild(W),document.body.appendChild(M);var ee=W.offsetWidth;return W.style.fontFamily=m(G)+", "+K,{node:W,w:ee,parent:M}}function E(){var G,K=this.fonts.length,M,W,ee=K;for(G=0;G<K;G+=1)this.fonts[G].loaded?ee-=1:this.fonts[G].fOrigin==="n"||this.fonts[G].origin===0?this.fonts[G].loaded=!0:(M=this.fonts[G].monoCase.node,W=this.fonts[G].monoCase.w,M.offsetWidth!==W?(ee-=1,this.fonts[G].loaded=!0):(M=this.fonts[G].sansCase.node,W=this.fonts[G].sansCase.w,M.offsetWidth!==W&&(ee-=1,this.fonts[G].loaded=!0)),this.fonts[G].loaded&&(this.fonts[G].sansCase.parent.parentNode.removeChild(this.fonts[G].sansCase.parent),this.fonts[G].monoCase.parent.parentNode.removeChild(this.fonts[G].monoCase.parent)));ee!==0&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function x(G,K){var M=document.body&&K?"svg":"canvas",W,ee=getFontProperties(G);if(M==="svg"){var z=createNS("text");z.style.fontSize="100px",z.setAttribute("font-family",G.fFamily),z.setAttribute("font-style",ee.style),z.setAttribute("font-weight",ee.weight),z.textContent="1",G.fClass?(z.style.fontFamily="inherit",z.setAttribute("class",G.fClass)):z.style.fontFamily=G.fFamily,K.appendChild(z),W=z}else{var ae=new OffscreenCanvas(500,500).getContext("2d");ae.font=ee.style+" "+ee.weight+" 100px "+G.fFamily,W=ae}function ce(he){return M==="svg"?(W.textContent=he,W.getComputedTextLength()):W.measureText(he).width}return{measureText:ce}}function b(G,K){if(!G){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=G.list;return}if(!document.body){this.isLoaded=!0,G.list.forEach(function(Ye){Ye.helper=x(Ye),Ye.cache={}}),this.fonts=G.list;return}var M=G.list,W,ee=M.length,z=ee;for(W=0;W<ee;W+=1){var ae=!0,ce,he;if(M[W].loaded=!1,M[W].monoCase=g(M[W].fFamily,"monospace"),M[W].sansCase=g(M[W].fFamily,"sans-serif"),!M[W].fPath)M[W].loaded=!0,z-=1;else if(M[W].fOrigin==="p"||M[W].origin===3){if(ce=document.querySelectorAll('style[f-forigin="p"][f-family="'+M[W].fFamily+'"], style[f-origin="3"][f-family="'+M[W].fFamily+'"]'),ce.length>0&&(ae=!1),ae){var fe=createTag("style");fe.setAttribute("f-forigin",M[W].fOrigin),fe.setAttribute("f-origin",M[W].origin),fe.setAttribute("f-family",M[W].fFamily),fe.type="text/css",fe.innerText="@font-face {font-family: "+M[W].fFamily+"; font-style: normal; src: url('"+M[W].fPath+"');}",K.appendChild(fe)}}else if(M[W].fOrigin==="g"||M[W].origin===1){for(ce=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),he=0;he<ce.length;he+=1)ce[he].href.indexOf(M[W].fPath)!==-1&&(ae=!1);if(ae){var Ce=createTag("link");Ce.setAttribute("f-forigin",M[W].fOrigin),Ce.setAttribute("f-origin",M[W].origin),Ce.type="text/css",Ce.rel="stylesheet",Ce.href=M[W].fPath,document.body.appendChild(Ce)}}else if(M[W].fOrigin==="t"||M[W].origin===2){for(ce=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),he=0;he<ce.length;he+=1)M[W].fPath===ce[he].src&&(ae=!1);if(ae){var Me=createTag("link");Me.setAttribute("f-forigin",M[W].fOrigin),Me.setAttribute("f-origin",M[W].origin),Me.setAttribute("rel","stylesheet"),Me.setAttribute("href",M[W].fPath),K.appendChild(Me)}}M[W].helper=x(M[W],K),M[W].cache={},this.fonts.push(M[W])}z===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function S(G){if(G){this.chars||(this.chars=[]);var K,M=G.length,W,ee=this.chars.length,z;for(K=0;K<M;K+=1){for(W=0,z=!1;W<ee;)this.chars[W].style===G[K].style&&this.chars[W].fFamily===G[K].fFamily&&this.chars[W].ch===G[K].ch&&(z=!0),W+=1;z||(this.chars.push(G[K]),ee+=1)}}}function C(G,K,M){for(var W=0,ee=this.chars.length;W<ee;){if(this.chars[W].ch===G&&this.chars[W].style===K&&this.chars[W].fFamily===M)return this.chars[W];W+=1}return(typeof G=="string"&&G.charCodeAt(0)!==13||!G)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",G,K,M)),e}function T(G,K,M){var W=this.getFontByName(K),ee=G;if(!W.cache[ee]){var z=W.helper;if(G===" "){var ae=z.measureText("|"+G+"|"),ce=z.measureText("||");W.cache[ee]=(ae-ce)/100}else W.cache[ee]=z.measureText(G)/100}return W.cache[ee]*M}function I(G){for(var K=0,M=this.fonts.length;K<M;){if(this.fonts[K].fName===G)return this.fonts[K];K+=1}return this.fonts[0]}function D(G){var K=0,M=G.charCodeAt(0);if(M>=55296&&M<=56319){var W=G.charCodeAt(1);W>=56320&&W<=57343&&(K=(M-55296)*1024+W-56320+65536)}return K}function P(G,K){var M=G.toString(16)+K.toString(16);return p.indexOf(M)!==-1}function O(G){return G===u}function B(G){return G===l}function F(G){var K=D(G);return K>=c&&K<=d}function H(G){return F(G.substr(0,2))&&F(G.substr(2,2))}function Q(G){return n.indexOf(G)!==-1}function Z(G,K){var M=D(G.substr(K,2));if(M!==s)return!1;var W=0;for(K+=2;W<5;){if(M=D(G.substr(K,2)),M<a||M>o)return!1;W+=1,K+=2}return D(G.substr(K,2))===i}function ne(){this.isLoaded=!0}var re=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};re.isModifier=P,re.isZeroWidthJoiner=O,re.isFlagEmoji=H,re.isRegionalCode=F,re.isCombinedCharacter=Q,re.isRegionalFlag=Z,re.isVariationSelector=B,re.BLACK_FLAG_CODE_POINT=s;var se={addChars:S,addFonts:b,getCharData:C,getFontByName:I,measureText:T,checkLoadedFonts:E,setIsLoaded:ne};return re.prototype=se,re}();function SlotManager(t){this.animationData=t}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t};function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){this.renderableComponents.indexOf(e)===-1&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){this.renderableComponents.indexOf(e)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,n=this.renderableComponents.length;for(e=0;e<n;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}();function SliderEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function AngleEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function ColorEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function PointEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function LayerIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function MaskIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function CheckboxEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var n=t.ef||[];this.effectElements=[];var s,i=n.length,a;for(s=0;s<i;s+=1)a=new GroupEffect(n[s],e),this.effectElements.push(a)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var n,s=this.data.ef.length,i,a=this.data.ef;for(n=0;n<s;n+=1){switch(i=null,a[n].ty){case 0:i=new SliderEffect(a[n],e,this);break;case 1:i=new AngleEffect(a[n],e,this);break;case 2:i=new ColorEffect(a[n],e,this);break;case 3:i=new PointEffect(a[n],e,this);break;case 4:case 7:i=new CheckboxEffect(a[n],e,this);break;case 10:i=new LayerIndexEffect(a[n],e,this);break;case 11:i=new MaskIndexEffect(a[n],e,this);break;case 5:i=new EffectsManager(a[n],e);break;default:i=new NoValueEffect(a[n]);break}i&&this.effectElements.push(i)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,n=this.data.masksProperties.length;e<n;){if(this.data.masksProperties[e].mode!=="n"&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var n=e("layer"),s=e("effects"),i=e("shape"),a=e("text"),o=e("comp");this.layerInterface=n(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var l=s.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(l),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm),n=this.baseElement||this.layerElement;n.style["mix-blend-mode"]=e},initBaseData:function(e,n,s){this.globalData=n,this.comp=s,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,n){var s,i=this.dynamicProperties.length;for(s=0;s<i;s+=1)(n||this._isParent&&this.dynamicProperties[s].propType==="transform")&&(this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){this.dynamicProperties.indexOf(e)===-1&&this.dynamicProperties.push(e)}};function FootageElement(t,e,n){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,n)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(t,e,n){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,n),this._isPlaying=!1,this._canPlay=!1;var s=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(s),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,n=this.layers.length,s;for(this.completeLayers=!0,e=n-1;e>=0;e-=1)this.elements[e]||(s=this.layers[e],s.ip-s.st<=t-this.layers[e].st&&s.op-s.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,n=t.length,s,i=this.layers.length;for(e=0;e<n;e+=1)for(s=0;s<i;){if(this.layers[s].id===t[e].id){this.layers[s]=t[e];break}s+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,n){for(var s=this.elements,i=this.layers,a=0,o=i.length;a<o;)i[a].ind==e&&(!s[a]||s[a]===!0?(this.buildItem(a),this.addPendingElement(t)):(n.push(s[a]),s[a].setAsParent(),i[a].parent!==void 0?this.buildElementParenting(t,i[a].parent,n):t.setHierarchy(n))),a+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,n=t.length;for(e=0;e<n;e+=1)if(t[e].xt){var s=this.createComp(t[e]);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}},BaseRenderer.prototype.getElementById=function(t){var e,n=this.elements.length;for(e=0;e<n;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e=t.shift(),n;if(typeof e=="number")n=this.elements[e];else{var s,i=this.elements.length;for(s=0;s<i;s+=1)if(this.elements[s].data.nm===e){n=this.elements[s];break}}return t.length===0?n:n.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,n=this.finalTransform.mat,s=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;s<i;){if(this.hierarchy[s].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}s+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,n.cloneFromProps(e),s=0;s<i;s+=1)n.multiply(this.hierarchy[s].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,n=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<n;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var s=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(s),e=1;e<n;e+=1){var i=this.localTransforms[e].matrix;s.multiply(i)}s.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(e=0;e<n;e+=1)a*=this.localTransforms[e].opacity*.01;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var n=0,s=e.length;for(n=0;n<s;n+=1)this.localTransforms.push(e[n])}}},globalToLocal:function(e){var n=[];n.push(this.finalTransform);for(var s=!0,i=this.comp;s;)i.finalTransform?(i.data.hasMask&&n.splice(0,0,i.finalTransform),i=i.comp):s=!1;var a,o=n.length,l;for(a=0;a<o;a+=1)l=n[a].mat.applyToPointArray(0,0,0),e=[e[0]-l[0],e[1]-l[1],0];return e},mHelper:new Matrix};function MaskElement(t,e,n){this.data=t,this.element=e,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var s=this.globalData.defs,i,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";var o,l=this.masksProperties,u=0,c=[],d,p,m=createElementID(),g,E,x,b,S="clipPath",C="clip-path";for(i=0;i<a;i+=1)if((l[i].mode!=="a"&&l[i].mode!=="n"||l[i].inv||l[i].o.k!==100||l[i].o.x)&&(S="mask",C="mask"),(l[i].mode==="s"||l[i].mode==="i")&&u===0?(g=createNS("rect"),g.setAttribute("fill","#ffffff"),g.setAttribute("width",this.element.comp.data.w||0),g.setAttribute("height",this.element.comp.data.h||0),c.push(g)):g=null,o=createNS("path"),l[i].mode==="n")this.viewData[i]={op:PropertyFactory.getProp(this.element,l[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[i],3),elem:o,lastPath:""},s.appendChild(o);else{u+=1,o.setAttribute("fill",l[i].mode==="s"?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero");var T;if(l[i].x.k!==0?(S="mask",C="mask",b=PropertyFactory.getProp(this.element,l[i].x,0,null,this.element),T=createElementID(),E=createNS("filter"),E.setAttribute("id",T),x=createNS("feMorphology"),x.setAttribute("operator","erode"),x.setAttribute("in","SourceGraphic"),x.setAttribute("radius","0"),E.appendChild(x),s.appendChild(E),o.setAttribute("stroke",l[i].mode==="s"?"#000000":"#ffffff")):(x=null,b=null),this.storedData[i]={elem:o,x:b,expan:x,lastPath:"",lastOperator:"",filterId:T,lastRadius:0},l[i].mode==="i"){p=c.length;var I=createNS("g");for(d=0;d<p;d+=1)I.appendChild(c[d]);var D=createNS("mask");D.setAttribute("mask-type","alpha"),D.setAttribute("id",m+"_"+u),D.appendChild(o),s.appendChild(D),I.setAttribute("mask","url("+getLocationHref()+"#"+m+"_"+u+")"),c.length=0,c.push(I)}else c.push(o);l[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,l[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[i],3),invRect:g},this.viewData[i].prop.k||this.drawPath(l[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(S),a=c.length,i=0;i<a;i+=1)this.maskElement.appendChild(c[i]);u>0&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(C,"url("+getLocationHref()+"#"+m+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,n,s=this.masksProperties.length;for(n=0;n<s;n+=1)if((this.viewData[n].prop._mdf||t)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||t)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),this.masksProperties[n].mode!=="n"&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[n].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||t))){var i=this.storedData[n].expan;this.storedData[n].x.v<0?(this.storedData[n].lastOperator!=="erode"&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[n].filterId+")")),i.setAttribute("radius",-this.storedData[n].x.v)):(this.storedData[n].lastOperator!=="dilate"&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",this.storedData[n].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" ",t},MaskElement.prototype.drawPath=function(t,e,n){var s=" M"+e.v[0][0]+","+e.v[0][1],i,a;for(a=e._length,i=1;i<a;i+=1)s+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[i][0]+","+e.i[i][1]+" "+e.v[i][0]+","+e.v[i][1];if(e.c&&a>1&&(s+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),n.lastPath!==s){var o="";n.elem&&(e.c&&(o=t.inv?this.solidPath+s:s),n.elem.setAttribute("d",o)),n.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={};t.createFilter=e,t.createAlphaToLuminanceFilter=n;function e(s,i){var a=createNS("filter");return a.setAttribute("id",s),i!==!0&&(a.setAttribute("filterUnits","objectBoundingBox"),a.setAttribute("x","0%"),a.setAttribute("y","0%"),a.setAttribute("width","100%"),a.setAttribute("height","100%")),a}function n(){var s=createNS("feColorMatrix");return s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),s}return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,n="SourceGraphic",s=t.data.ef?t.data.ef.length:0,i=createElementID(),a=filtersFactory.createFilter(i,!0),o=0;this.filters=[];var l;for(e=0;e<s;e+=1){l=null;var u=t.data.ef[e].ty;if(registeredEffects$1[u]){var c=registeredEffects$1[u].effect;l=new c(a,t.effectsManager.effectElements[e],t,idPrefix+o,n),n=idPrefix+o,registeredEffects$1[u].countsAsEffect&&(o+=1)}l&&this.filters.push(l)}o&&(t.globalData.defs.appendChild(a),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+i+")")),this.filters.length&&t.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(t){var e,n=this.filters.length;for(e=0;e<n;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,n=this.filters.length,s=[];for(e=0;e<n;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s};function registerEffect$1(t,e,n){registeredEffects$1[t]={effect:e,countsAsEffect:n}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var n=createNS("g");n.setAttribute("id",this.layerId),n.appendChild(this.layerElement),e=n,this.globalData.defs.appendChild(n)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var s=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(s.setAttribute("id",a),s.appendChild(i),this.globalData.defs.appendChild(s),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),o.appendChild(this.layerElement),this.transformedElement=o,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var n=this.layerId+"_"+e,s,i,a,o;if(e===1||e===3){var l=createNS("mask");l.setAttribute("id",n),l.setAttribute("mask-type",e===3?"luminance":"alpha"),a=createNS("use"),a.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(a),this.globalData.defs.appendChild(l),!featureSupport.maskType&&e===1&&(l.setAttribute("mask-type","luminance"),s=createElementID(),i=filtersFactory.createFilter(s),this.globalData.defs.appendChild(i),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),o.appendChild(a),l.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+s+")"))}else if(e===2){var u=createNS("mask");u.setAttribute("id",n),u.setAttribute("mask-type","alpha");var c=createNS("g");u.appendChild(c),s=createElementID(),i=filtersFactory.createFilter(s);var d=createNS("feComponentTransfer");d.setAttribute("in","SourceGraphic"),i.appendChild(d);var p=createNS("feFuncA");p.setAttribute("type","table"),p.setAttribute("tableValues","1.0 0.0"),d.appendChild(p),this.globalData.defs.appendChild(i);var m=createNS("rect");m.setAttribute("width",this.comp.data.w),m.setAttribute("height",this.comp.data.h),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("fill","#ffffff"),m.setAttribute("opacity","0"),c.setAttribute("filter","url("+getLocationHref()+"#"+s+")"),c.appendChild(m),a=createNS("use"),a.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(a),featureSupport.maskType||(u.setAttribute("mask-type","luminance"),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),c.appendChild(m),o.appendChild(this.layerElement),c.appendChild(o)),this.globalData.defs.appendChild(u)}this.matteMasks[e]=n}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var t={initElement:function(n,s,i){this.initFrame(),this.initBaseData(n,s,i),this.initTransform(n,s,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var n=this.baseElement||this.layerElement;n.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var n=this.baseElement||this.layerElement;n.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(t)],RenderableDOMElement)})();function IImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(e){var n,s=this.shapeModifiers.length;for(n=0;n<s;n+=1)this.shapeModifiers[n].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var n=0,s=this.shapeModifiers.length;n<s;)if(this.shapeModifiers[n].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,n=this.shapes.length;for(e=0;e<n;e+=1)this.shapes[e].sh.reset();n=this.shapeModifiers.length;var s;for(e=n-1;e>=0&&(s=this.shapeModifiers[e].processShapes(this._isFirstFrame),!s);e-=1);}},searchProcessedElement:function(e){for(var n=this.processedElements,s=0,i=n.length;s<i;){if(n[s].elem===e)return n[s].pos;s+=1}return 0},addProcessedElement:function(e,n){for(var s=this.processedElements,i=s.length;i;)if(i-=1,s[i].elem===e){s[i].pos=n;return}s.push(new ProcessedElement(e,n))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,n){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=n,this.lvl=e,this._isAnimated=!!n.k;for(var s=0,i=t.length;s<i;){if(t[s].mProps.dynamicProperties.length){this._isAnimated=!0;break}s+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=t.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(t,e,n,s){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(s);var i,a=e.length||0,o;for(i=0;i<a;i+=1)o=PropertyFactory.getProp(t,e[i].v,0,0,this),this.k=o.k||this.k,this.dataProps[i]={n:e[i].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(t){if(!(this.elem.globalData.frameId===this.frameId&&!t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,n=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<n;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=n}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(t,e,n){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var s=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",s),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=s,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(t,e){for(var n=0,s=this.o.length/2,i;n<s;){if(i=Math.abs(t[n*4]-t[e*4+n*2]),i>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,n=this.data.p*4,s,i;for(e=0;e<n;e+=1)s=e%4===0?100:255,i=Math.round(this.prop.v[e]*s),this.c[e]!==i&&(this.c[e]=i,this._cmdf=!t);if(this.o.length)for(n=this.prop.v.length,e=this.data.p*4;e<n;e+=1)s=e%2===0?100:1,i=e%2===0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==i&&(this.o[e-this.data.p*4]=i,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,n)}SVGGradientFillStyleData.prototype.initGradientData=function(t,e,n){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,e),this.setGradientOpacity(e,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var n=createElementID(),s=createNS(e.t===1?"linearGradient":"radialGradient");s.setAttribute("id",n),s.setAttribute("spreadMethod","pad"),s.setAttribute("gradientUnits","userSpaceOnUse");var i=[],a,o,l;for(l=e.g.p*4,o=0;o<l;o+=4)a=createNS("stop"),s.appendChild(a),i.push(a);t.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=s,this.cst=i},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var n,s,i,a=createNS("mask"),o=createNS("path");a.appendChild(o);var l=createElementID(),u=createElementID();a.setAttribute("id",u);var c=createNS(t.t===1?"linearGradient":"radialGradient");c.setAttribute("id",l),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),i=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var d=this.stops;for(s=t.g.p*4;s<i;s+=2)n=createNS("stop"),n.setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),d.push(n);o.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+l+")"),t.ty==="gs"&&(o.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),t.lj===1&&o.setAttribute("stroke-miterlimit",t.ml)),this.of=c,this.ms=a,this.ost=d,this.maskId=u,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,n),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,n){this.transform={mProps:t,op:e,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(e,n,s,i){if(n===0)return"";var a=e.o,o=e.i,l=e.v,u,c=" M"+i.applyToPointStringified(l[0][0],l[0][1]);for(u=1;u<n;u+=1)c+=" C"+i.applyToPointStringified(a[u-1][0],a[u-1][1])+" "+i.applyToPointStringified(o[u][0],o[u][1])+" "+i.applyToPointStringified(l[u][0],l[u][1]);return s&&n&&(c+=" C"+i.applyToPointStringified(a[u-1][0],a[u-1][1])+" "+i.applyToPointStringified(o[0][0],o[0][1])+" "+i.applyToPointStringified(l[0][0],l[0][1]),c+="z"),c},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix,n={createRenderFunction:s};function s(p){switch(p.ty){case"fl":return l;case"gf":return c;case"gs":return u;case"st":return d;case"sh":case"el":case"rc":case"sr":return o;case"tr":return i;case"no":return a;default:return null}}function i(p,m,g){(g||m.transform.op._mdf)&&m.transform.container.setAttribute("opacity",m.transform.op.v),(g||m.transform.mProps._mdf)&&m.transform.container.setAttribute("transform",m.transform.mProps.v.to2dCSS())}function a(){}function o(p,m,g){var E,x,b,S,C,T,I=m.styles.length,D=m.lvl,P,O,B,F;for(T=0;T<I;T+=1){if(S=m.sh._mdf||g,m.styles[T].lvl<D){for(O=e.reset(),B=D-m.styles[T].lvl,F=m.transformers.length-1;!S&&B>0;)S=m.transformers[F].mProps._mdf||S,B-=1,F-=1;if(S)for(B=D-m.styles[T].lvl,F=m.transformers.length-1;B>0;)O.multiply(m.transformers[F].mProps.v),B-=1,F-=1}else O=t;if(P=m.sh.paths,x=P._length,S){for(b="",E=0;E<x;E+=1)C=P.shapes[E],C&&C._length&&(b+=buildShapeString(C,C._length,C.c,O));m.caches[T]=b}else b=m.caches[T];m.styles[T].d+=p.hd===!0?"":b,m.styles[T]._mdf=S||m.styles[T]._mdf}}function l(p,m,g){var E=m.style;(m.c._mdf||g)&&E.pElem.setAttribute("fill","rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||g)&&E.pElem.setAttribute("fill-opacity",m.o.v)}function u(p,m,g){c(p,m,g),d(p,m,g)}function c(p,m,g){var E=m.gf,x=m.g._hasOpacity,b=m.s.v,S=m.e.v;if(m.o._mdf||g){var C=p.ty==="gf"?"fill-opacity":"stroke-opacity";m.style.pElem.setAttribute(C,m.o.v)}if(m.s._mdf||g){var T=p.t===1?"x1":"cx",I=T==="x1"?"y1":"cy";E.setAttribute(T,b[0]),E.setAttribute(I,b[1]),x&&!m.g._collapsable&&(m.of.setAttribute(T,b[0]),m.of.setAttribute(I,b[1]))}var D,P,O,B;if(m.g._cmdf||g){D=m.cst;var F=m.g.c;for(O=D.length,P=0;P<O;P+=1)B=D[P],B.setAttribute("offset",F[P*4]+"%"),B.setAttribute("stop-color","rgb("+F[P*4+1]+","+F[P*4+2]+","+F[P*4+3]+")")}if(x&&(m.g._omdf||g)){var H=m.g.o;for(m.g._collapsable?D=m.cst:D=m.ost,O=D.length,P=0;P<O;P+=1)B=D[P],m.g._collapsable||B.setAttribute("offset",H[P*2]+"%"),B.setAttribute("stop-opacity",H[P*2+1])}if(p.t===1)(m.e._mdf||g)&&(E.setAttribute("x2",S[0]),E.setAttribute("y2",S[1]),x&&!m.g._collapsable&&(m.of.setAttribute("x2",S[0]),m.of.setAttribute("y2",S[1])));else{var Q;if((m.s._mdf||m.e._mdf||g)&&(Q=Math.sqrt(Math.pow(b[0]-S[0],2)+Math.pow(b[1]-S[1],2)),E.setAttribute("r",Q),x&&!m.g._collapsable&&m.of.setAttribute("r",Q)),m.s._mdf||m.e._mdf||m.h._mdf||m.a._mdf||g){Q||(Q=Math.sqrt(Math.pow(b[0]-S[0],2)+Math.pow(b[1]-S[1],2)));var Z=Math.atan2(S[1]-b[1],S[0]-b[0]),ne=m.h.v;ne>=1?ne=.99:ne<=-1&&(ne=-.99);var re=Q*ne,se=Math.cos(Z+m.a.v)*re+b[0],G=Math.sin(Z+m.a.v)*re+b[1];E.setAttribute("fx",se),E.setAttribute("fy",G),x&&!m.g._collapsable&&(m.of.setAttribute("fx",se),m.of.setAttribute("fy",G))}}}function d(p,m,g){var E=m.style,x=m.d;x&&(x._mdf||g)&&x.dashStr&&(E.pElem.setAttribute("stroke-dasharray",x.dashStr),E.pElem.setAttribute("stroke-dashoffset",x.dashoffset[0])),m.c&&(m.c._mdf||g)&&E.pElem.setAttribute("stroke","rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||g)&&E.pElem.setAttribute("stroke-opacity",m.o.v),(m.w._mdf||g)&&(E.pElem.setAttribute("stroke-width",m.w.v),E.msElem&&E.msElem.setAttribute("stroke-width",m.w.v))}return n}();function SVGShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,n),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,n,s,i=this.stylesList.length,a,o=[],l=!1;for(s=0;s<i;s+=1){for(a=this.stylesList[s],l=!1,o.length=0,t=0;t<e;t+=1)n=this.shapes[t],n.styles.indexOf(a)!==-1&&(o.push(n),l=n._isAnimated||l);o.length>1&&l&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var n,s=new SVGStyleData(t,e),i=s.pElem;if(t.ty==="st")n=new SVGStrokeStyleData(this,t,s);else if(t.ty==="fl")n=new SVGFillStyleData(this,t,s);else if(t.ty==="gf"||t.ty==="gs"){var a=t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;n=new a(this,t,s),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))}else t.ty==="no"&&(n=new SVGNoStyleData(this,t,s));return(t.ty==="st"||t.ty==="gs")&&(i.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),i.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),i.setAttribute("fill-opacity","0"),t.lj===1&&i.setAttribute("stroke-miterlimit",t.ml)),t.r===2&&i.setAttribute("fill-rule","evenodd"),t.ln&&i.setAttribute("id",t.ln),t.cl&&i.setAttribute("class",t.cl),t.bm&&(i.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(s),this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var n=TransformPropertyFactory.getTransformProperty(this,t,this),s=new SVGTransformData(n,n.o,e);return this.addToAnimatedContents(t,s),s},SVGShapeElement.prototype.createShapeElement=function(t,e,n){var s=4;t.ty==="rc"?s=5:t.ty==="el"?s=6:t.ty==="sr"&&(s=7);var i=ShapePropertyFactory.getShapeProp(this,t,s,this),a=new SVGShapeData(e,n,i);return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(t,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var n=0,s=this.animatedContents.length;n<s;){if(this.animatedContents[n].element===e)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e=t.styles,n,s=this.stylesList.length;for(n=0;n<s;n+=1)e.indexOf(this.stylesList[n])===-1&&!this.stylesList[n].closed&&e.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,n,s,i,a,o){var l=[].concat(a),u,c=t.length-1,d,p,m=[],g=[],E,x,b;for(u=c;u>=0;u-=1){if(b=this.searchProcessedElement(t[u]),b?e[u]=n[b-1]:t[u]._render=o,t[u].ty==="fl"||t[u].ty==="st"||t[u].ty==="gf"||t[u].ty==="gs"||t[u].ty==="no")b?e[u].style.closed=t[u].hd:e[u]=this.createStyleElement(t[u],i),t[u]._render&&e[u].style.pElem.parentNode!==s&&s.appendChild(e[u].style.pElem),m.push(e[u].style);else if(t[u].ty==="gr"){if(!b)e[u]=this.createGroupElement(t[u]);else for(p=e[u].it.length,d=0;d<p;d+=1)e[u].prevViewData[d]=e[u].it[d];this.searchShapes(t[u].it,e[u].it,e[u].prevViewData,e[u].gr,i+1,l,o),t[u]._render&&e[u].gr.parentNode!==s&&s.appendChild(e[u].gr)}else t[u].ty==="tr"?(b||(e[u]=this.createTransformElement(t[u],s)),E=e[u].transform,l.push(E)):t[u].ty==="sh"||t[u].ty==="rc"||t[u].ty==="el"||t[u].ty==="sr"?(b||(e[u]=this.createShapeElement(t[u],l,i)),this.setElementStyles(e[u])):t[u].ty==="tm"||t[u].ty==="rd"||t[u].ty==="ms"||t[u].ty==="pb"||t[u].ty==="zz"||t[u].ty==="op"?(b?(x=e[u],x.closed=!1):(x=ShapeModifiers.getModifier(t[u].ty),x.init(this,t[u]),e[u]=x,this.shapeModifiers.push(x)),g.push(x)):t[u].ty==="rp"&&(b?(x=e[u],x.closed=!0):(x=ShapeModifiers.getModifier(t[u].ty),e[u]=x,x.init(this,t,u,e),this.shapeModifiers.push(x),o=!1),g.push(x));this.addProcessedElement(t[u],u+1)}for(c=m.length,u=0;u<c;u+=1)m[u].closed=!0;for(c=g.length,u=0;u<c;u+=1)g[u].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e=this.animatedContents.length,n;for(t=0;t<e;t+=1)n=this.animatedContents[t],(this._isFirstFrame||n.element._isAnimated)&&n.data!==!0&&n.fn(n.data,n.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(t,e,n,s,i,a){this.o=t,this.sw=e,this.sc=n,this.fc=s,this.m=i,this.p=a,this._mdf={o:!0,sw:!!e,sc:!!n,fc:!!s,m:!0,p:!0}}LetterProps.prototype.update=function(t,e,n,s,i,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,o=!0),this.fc!==s&&(this.fc=s,this._mdf.fc=!0,o=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,o=!0),a.length&&(this.p[0]!==a[0]||this.p[1]!==a[1]||this.p[4]!==a[4]||this.p[5]!==a[5]||this.p[12]!==a[12]||this.p[13]!==a[13])&&(this.p=a,this._mdf.p=!0,o=!0),o};function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,n=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var s,i=this.effectsSequence.length,a=t||this.data.d.k[this.keysIndex].s;for(s=0;s<i;s+=1)n!==this.keysIndex?a=this.effectsSequence[s](a,a.t):a=this.effectsSequence[s](this.currentData,a.t);e!==a&&this.setCurrentData(a),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,n=0,s=t.length;n<=s-1&&!(n===s-1||t[n+1].t>e);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=[],n=0,s=t.length,i,a,o=!1,l=!1,u="";n<s;)o=l,l=!1,i=t.charCodeAt(n),u=t.charAt(n),FontManager.isCombinedCharacter(i)?o=!0:i>=55296&&i<=56319?FontManager.isRegionalFlag(t,n)?u=t.substr(n,14):(a=t.charCodeAt(n+1),a>=56320&&a<=57343&&(FontManager.isModifier(i,a)?(u=t.substr(n,2),o=!0):FontManager.isFlagEmoji(t.substr(n,4))?u=t.substr(n,4):u=t.substr(n,2))):i>56319?(a=t.charCodeAt(n+1),FontManager.isVariationSelector(i)&&(o=!0)):FontManager.isZeroWidthJoiner(i)&&(o=!0,l=!0),o?(e[e.length-1]+=u,o=!1):e.push(u),n+=u.length;return e},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,n=this.data,s=[],i,a,o,l=0,u,c=n.m.g,d=0,p=0,m=0,g=[],E=0,x=0,b,S,C=e.getFontByName(t.f),T,I=0,D=getFontProperties(C);t.fWeight=D.weight,t.fStyle=D.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),a=t.finalText.length,t.finalLineHeight=t.lh;var P=t.tr/1e3*t.finalSize,O;if(t.sz)for(var B=!0,F=t.sz[0],H=t.sz[1],Q,Z;B;){Z=this.buildFinalText(t.t),Q=0,E=0,a=Z.length,P=t.tr/1e3*t.finalSize;var ne=-1;for(i=0;i<a;i+=1)O=Z[i].charCodeAt(0),o=!1,Z[i]===" "?ne=i:(O===13||O===3)&&(E=0,o=!0,Q+=t.finalLineHeight||t.finalSize*1.2),e.chars?(T=e.getCharData(Z[i],C.fStyle,C.fFamily),I=o?0:T.w*t.finalSize/100):I=e.measureText(Z[i],t.f,t.finalSize),E+I>F&&Z[i]!==" "?(ne===-1?a+=1:i=ne,Q+=t.finalLineHeight||t.finalSize*1.2,Z.splice(i,ne===i?1:0,"\r"),ne=-1,E=0):(E+=I,E+=P);Q+=C.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&H<Q?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=Z,a=t.finalText.length,B=!1)}E=-P,I=0;var re=0,se;for(i=0;i<a;i+=1)if(o=!1,se=t.finalText[i],O=se.charCodeAt(0),O===13||O===3?(re=0,g.push(E),x=E>x?E:x,E=-2*P,u="",o=!0,m+=1):u=se,e.chars?(T=e.getCharData(se,C.fStyle,e.getFontByName(t.f).fFamily),I=o?0:T.w*t.finalSize/100):I=e.measureText(u,t.f,t.finalSize),se===" "?re+=I+P:(E+=I+P+re,re=0),s.push({l:I,an:I,add:d,n:o,anIndexes:[],val:u,line:m,animatorJustifyOffset:0}),c==2){if(d+=I,u===""||u===" "||i===a-1){for((u===""||u===" ")&&(d-=I);p<=i;)s[p].an=d,s[p].ind=l,s[p].extra=I,p+=1;l+=1,d=0}}else if(c==3){if(d+=I,u===""||i===a-1){for(u===""&&(d-=I);p<=i;)s[p].an=d,s[p].ind=l,s[p].extra=I,p+=1;d=0,l+=1}}else s[l].ind=l,s[l].extra=0,l+=1;if(t.l=s,x=E>x?E:x,g.push(E),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=x,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var G=n.a,K,M;S=G.length;var W,ee,z=[];for(b=0;b<S;b+=1){for(K=G[b],K.a.sc&&(t.strokeColorAnim=!0),K.a.sw&&(t.strokeWidthAnim=!0),(K.a.fc||K.a.fh||K.a.fs||K.a.fb)&&(t.fillColorAnim=!0),ee=0,W=K.s.b,i=0;i<a;i+=1)M=s[i],M.anIndexes[b]=ee,(W==1&&M.val!==""||W==2&&M.val!==""&&M.val!==" "||W==3&&(M.n||M.val==" "||i==a-1)||W==4&&(M.n||i==a-1))&&(K.s.rn===1&&z.push(ee),ee+=1);n.a[b].s.totalChars=ee;var ae=-1,ce;if(K.s.rn===1)for(i=0;i<a;i+=1)M=s[i],ae!=M.anIndexes[b]&&(ae=M.anIndexes[b],ce=z.splice(Math.floor(Math.random()*z.length),1)[0]),M.anIndexes[b]=ce}t.yOffset=t.finalLineHeight||t.finalSize*1.2,t.ls=t.ls||0,t.ascent=C.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=e===void 0?this.keysIndex:e;var n=this.copyData({},this.data.d.k[e].s);n=this.copyData(n,t),this.data.d.k[e].s=n,this.recalculate(e),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,n=Math.floor;function s(a,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=a,this.comp=a.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(a),this.s=PropertyFactory.getProp(a,o.s||{k:0},0,0,this),"e"in o?this.e=PropertyFactory.getProp(a,o.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(a,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(a,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(a,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(a,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(a,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}s.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var l=0,u=0,c=1,d=1;this.ne.v>0?l=this.ne.v/100:u=-this.ne.v/100,this.xe.v>0?c=1-this.xe.v/100:d=1+this.xe.v/100;var p=BezierFactory.getBezierEasing(l,u,c,d).get,m=0,g=this.finalS,E=this.finalE,x=this.data.sh;if(x===2)E===g?m=o>=E?1:0:m=t(0,e(.5/(E-g)+(o-g)/(E-g),1)),m=p(m);else if(x===3)E===g?m=o>=E?0:1:m=1-t(0,e(.5/(E-g)+(o-g)/(E-g),1)),m=p(m);else if(x===4)E===g?m=0:(m=t(0,e(.5/(E-g)+(o-g)/(E-g),1)),m<.5?m*=2:m=1-2*(m-.5)),m=p(m);else if(x===5){if(E===g)m=0;else{var b=E-g;o=e(t(0,o+.5-g),E-g);var S=-b/2+o,C=b/2;m=Math.sqrt(1-S*S/(C*C))}m=p(m)}else x===6?(E===g?m=0:(o=e(t(0,o+.5-g),E-g),m=(1+Math.cos(Math.PI+Math.PI*2*o/(E-g)))/2),m=p(m)):(o>=n(g)&&(o-g<0?m=t(0,e(e(E,1)-(g-o),1)):m=t(0,e(E-o,1))),m=p(m));if(this.sm.v!==100){var T=this.sm.v*.01;T===0&&(T=1e-8);var I=.5-T*.5;m<I?m=0:(m=(m-I)/T,m>1&&(m=1))}return m*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var l=this.data.r===2?1:100/this.data.totalChars,u=this.o.v/l,c=this.s.v/l+u,d=this.e.v/l+u;if(c>d){var p=c;c=d,d=p}this.finalS=c,this.finalE=d}},extendPrototype([DynamicPropertyContainer],s);function i(a,o,l){return new s(a,o)}return{getTextSelectorProp:i}}();function TextAnimatorDataProperty(t,e,n){var s={propType:!1},i=PropertyFactory.getProp,a=e.a;this.a={r:a.r?i(t,a.r,0,degToRads,n):s,rx:a.rx?i(t,a.rx,0,degToRads,n):s,ry:a.ry?i(t,a.ry,0,degToRads,n):s,sk:a.sk?i(t,a.sk,0,degToRads,n):s,sa:a.sa?i(t,a.sa,0,degToRads,n):s,s:a.s?i(t,a.s,1,.01,n):s,a:a.a?i(t,a.a,1,0,n):s,o:a.o?i(t,a.o,0,.01,n):s,p:a.p?i(t,a.p,1,0,n):s,sw:a.sw?i(t,a.sw,0,0,n):s,sc:a.sc?i(t,a.sc,1,0,n):s,fc:a.fc?i(t,a.fc,1,0,n):s,fh:a.fh?i(t,a.fh,0,0,n):s,fs:a.fs?i(t,a.fs,0,.01,n):s,fb:a.fb?i(t,a.fb,0,.01,n):s,t:a.t?i(t,a.t,0,0,n):s},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,n),this.s.t=e.s.t}function TextAnimatorProperty(t,e,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,n,s=PropertyFactory.getProp;for(t=0;t<e;t+=1)n=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,n,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:s(this._elem,this._textData.p.a,0,0,this),f:s(this._elem,this._textData.p.f,0,0,this),l:s(this._elem,this._textData.p.l,0,0,this),r:s(this._elem,this._textData.p.r,0,0,this),p:s(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=s(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var n=this._moreOptions.alignment.v,s=this._animatorsData,i=this._textData,a=this.mHelper,o=this._renderType,l=this.renderedLetters.length,u,c,d,p,m=t.l,g,E,x,b,S,C,T,I,D,P,O,B,F,H,Q;if(this._hasMaskedPath){if(Q=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Z=Q.v;this._pathData.r.v&&(Z=Z.reverse()),g={tLength:0,segments:[]},p=Z._length-1;var ne;for(B=0,d=0;d<p;d+=1)ne=bez.buildBezierData(Z.v[d],Z.v[d+1],[Z.o[d][0]-Z.v[d][0],Z.o[d][1]-Z.v[d][1]],[Z.i[d+1][0]-Z.v[d+1][0],Z.i[d+1][1]-Z.v[d+1][1]]),g.tLength+=ne.segmentLength,g.segments.push(ne),B+=ne.segmentLength;d=p,Q.v.c&&(ne=bez.buildBezierData(Z.v[d],Z.v[0],[Z.o[d][0]-Z.v[d][0],Z.o[d][1]-Z.v[d][1]],[Z.i[0][0]-Z.v[0][0],Z.i[0][1]-Z.v[0][1]]),g.tLength+=ne.segmentLength,g.segments.push(ne),B+=ne.segmentLength),this._pathData.pi=g}if(g=this._pathData.pi,E=this._pathData.f.v,T=0,C=1,b=0,S=!0,P=g.segments,E<0&&Q.v.c)for(g.tLength<Math.abs(E)&&(E=-Math.abs(E)%g.tLength),T=P.length-1,D=P[T].points,C=D.length-1;E<0;)E+=D[C].partialLength,C-=1,C<0&&(T-=1,D=P[T].points,C=D.length-1);D=P[T].points,I=D[C-1],x=D[C],O=x.partialLength}p=m.length,u=0,c=0;var re=t.finalSize*1.2*.714,se=!0,G,K,M,W,ee;W=s.length;var z,ae=-1,ce,he,fe,Ce=E,Me=T,Ye=C,We=-1,Be,rt,tt,Ue,Pe,Qe,Je,nt,ft="",At=this.defaultPropsArray,ot;if(t.j===2||t.j===1){var qe=0,mt=0,st=t.j===2?-.5:-1,St=0,bt=!0;for(d=0;d<p;d+=1)if(m[d].n){for(qe&&(qe+=mt);St<d;)m[St].animatorJustifyOffset=qe,St+=1;qe=0,bt=!0}else{for(M=0;M<W;M+=1)G=s[M].a,G.t.propType&&(bt&&t.j===2&&(mt+=G.t.v*st),K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),z.length?qe+=G.t.v*z[0]*st:qe+=G.t.v*z*st);bt=!1}for(qe&&(qe+=mt);St<d;)m[St].animatorJustifyOffset=qe,St+=1}for(d=0;d<p;d+=1){if(a.reset(),Be=1,m[d].n)u=0,c+=t.yOffset,c+=se?1:0,E=Ce,se=!1,this._hasMaskedPath&&(T=Me,C=Ye,D=P[T].points,I=D[C-1],x=D[C],O=x.partialLength,b=0),ft="",nt="",Qe="",ot="",At=this.defaultPropsArray;else{if(this._hasMaskedPath){if(We!==m[d].line){switch(t.j){case 1:E+=B-t.lineWidths[m[d].line];break;case 2:E+=(B-t.lineWidths[m[d].line])/2;break}We=m[d].line}ae!==m[d].ind&&(m[ae]&&(E+=m[ae].extra),E+=m[d].an/2,ae=m[d].ind),E+=n[0]*m[d].an*.005;var Mt=0;for(M=0;M<W;M+=1)G=s[M].a,G.p.propType&&(K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),z.length?Mt+=G.p.v[0]*z[0]:Mt+=G.p.v[0]*z),G.a.propType&&(K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),z.length?Mt+=G.a.v[0]*z[0]:Mt+=G.a.v[0]*z);for(S=!0,this._pathData.a.v&&(E=m[0].an*.5+(B-this._pathData.f.v-m[0].an*.5-m[m.length-1].an*.5)*ae/(p-1),E+=this._pathData.f.v);S;)b+O>=E+Mt||!D?(F=(E+Mt-b)/x.partialLength,he=I.point[0]+(x.point[0]-I.point[0])*F,fe=I.point[1]+(x.point[1]-I.point[1])*F,a.translate(-n[0]*m[d].an*.005,-(n[1]*re)*.01),S=!1):D&&(b+=x.partialLength,C+=1,C>=D.length&&(C=0,T+=1,P[T]?D=P[T].points:Q.v.c?(C=0,T=0,D=P[T].points):(b-=x.partialLength,D=null)),D&&(I=x,x=D[C],O=x.partialLength));ce=m[d].an/2-m[d].add,a.translate(-ce,0,0)}else ce=m[d].an/2-m[d].add,a.translate(-ce,0,0),a.translate(-n[0]*m[d].an*.005,-n[1]*re*.01,0);for(M=0;M<W;M+=1)G=s[M].a,G.t.propType&&(K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),(u!==0||t.j!==0)&&(this._hasMaskedPath?z.length?E+=G.t.v*z[0]:E+=G.t.v*z:z.length?u+=G.t.v*z[0]:u+=G.t.v*z));for(t.strokeWidthAnim&&(tt=t.sw||0),t.strokeColorAnim&&(t.sc?rt=[t.sc[0],t.sc[1],t.sc[2]]:rt=[0,0,0]),t.fillColorAnim&&t.fc&&(Ue=[t.fc[0],t.fc[1],t.fc[2]]),M=0;M<W;M+=1)G=s[M].a,G.a.propType&&(K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),z.length?a.translate(-G.a.v[0]*z[0],-G.a.v[1]*z[1],G.a.v[2]*z[2]):a.translate(-G.a.v[0]*z,-G.a.v[1]*z,G.a.v[2]*z));for(M=0;M<W;M+=1)G=s[M].a,G.s.propType&&(K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),z.length?a.scale(1+(G.s.v[0]-1)*z[0],1+(G.s.v[1]-1)*z[1],1):a.scale(1+(G.s.v[0]-1)*z,1+(G.s.v[1]-1)*z,1));for(M=0;M<W;M+=1){if(G=s[M].a,K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),G.sk.propType&&(z.length?a.skewFromAxis(-G.sk.v*z[0],G.sa.v*z[1]):a.skewFromAxis(-G.sk.v*z,G.sa.v*z)),G.r.propType&&(z.length?a.rotateZ(-G.r.v*z[2]):a.rotateZ(-G.r.v*z)),G.ry.propType&&(z.length?a.rotateY(G.ry.v*z[1]):a.rotateY(G.ry.v*z)),G.rx.propType&&(z.length?a.rotateX(G.rx.v*z[0]):a.rotateX(G.rx.v*z)),G.o.propType&&(z.length?Be+=(G.o.v*z[0]-Be)*z[0]:Be+=(G.o.v*z-Be)*z),t.strokeWidthAnim&&G.sw.propType&&(z.length?tt+=G.sw.v*z[0]:tt+=G.sw.v*z),t.strokeColorAnim&&G.sc.propType)for(Pe=0;Pe<3;Pe+=1)z.length?rt[Pe]+=(G.sc.v[Pe]-rt[Pe])*z[0]:rt[Pe]+=(G.sc.v[Pe]-rt[Pe])*z;if(t.fillColorAnim&&t.fc){if(G.fc.propType)for(Pe=0;Pe<3;Pe+=1)z.length?Ue[Pe]+=(G.fc.v[Pe]-Ue[Pe])*z[0]:Ue[Pe]+=(G.fc.v[Pe]-Ue[Pe])*z;G.fh.propType&&(z.length?Ue=addHueToRGB(Ue,G.fh.v*z[0]):Ue=addHueToRGB(Ue,G.fh.v*z)),G.fs.propType&&(z.length?Ue=addSaturationToRGB(Ue,G.fs.v*z[0]):Ue=addSaturationToRGB(Ue,G.fs.v*z)),G.fb.propType&&(z.length?Ue=addBrightnessToRGB(Ue,G.fb.v*z[0]):Ue=addBrightnessToRGB(Ue,G.fb.v*z))}}for(M=0;M<W;M+=1)G=s[M].a,G.p.propType&&(K=s[M].s,z=K.getMult(m[d].anIndexes[M],i.a[M].s.totalChars),this._hasMaskedPath?z.length?a.translate(0,G.p.v[1]*z[0],-G.p.v[2]*z[1]):a.translate(0,G.p.v[1]*z,-G.p.v[2]*z):z.length?a.translate(G.p.v[0]*z[0],G.p.v[1]*z[1],-G.p.v[2]*z[2]):a.translate(G.p.v[0]*z,G.p.v[1]*z,-G.p.v[2]*z));if(t.strokeWidthAnim&&(Qe=tt<0?0:tt),t.strokeColorAnim&&(Je="rgb("+Math.round(rt[0]*255)+","+Math.round(rt[1]*255)+","+Math.round(rt[2]*255)+")"),t.fillColorAnim&&t.fc&&(nt="rgb("+Math.round(Ue[0]*255)+","+Math.round(Ue[1]*255)+","+Math.round(Ue[2]*255)+")"),this._hasMaskedPath){if(a.translate(0,-t.ls),a.translate(0,n[1]*re*.01+c,0),this._pathData.p.v){H=(x.point[1]-I.point[1])/(x.point[0]-I.point[0]);var pt=Math.atan(H)*180/Math.PI;x.point[0]<I.point[0]&&(pt+=180),a.rotate(-pt*Math.PI/180)}a.translate(he,fe,0),E-=n[0]*m[d].an*.005,m[d+1]&&ae!==m[d+1].ind&&(E+=m[d].an/2,E+=t.tr*.001*t.finalSize)}else{switch(a.translate(u,c,0),t.ps&&a.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:a.translate(m[d].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[m[d].line]),0,0);break;case 2:a.translate(m[d].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[m[d].line])/2,0,0);break}a.translate(0,-t.ls),a.translate(ce,0,0),a.translate(n[0]*m[d].an*.005,n[1]*re*.01,0),u+=m[d].l+t.tr*.001*t.finalSize}o==="html"?ft=a.toCSS():o==="svg"?ft=a.to2dCSS():At=[a.props[0],a.props[1],a.props[2],a.props[3],a.props[4],a.props[5],a.props[6],a.props[7],a.props[8],a.props[9],a.props[10],a.props[11],a.props[12],a.props[13],a.props[14],a.props[15]],ot=Be}l<=d?(ee=new LetterProps(ot,Qe,Je,nt,ft,At),this.renderedLetters.push(ee),l+=1,this.lettersChangedFlag=!0):(ee=this.renderedLetters[d],this.lettersChangedFlag=ee.update(ot,Qe,Je,nt,ft,At)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(t,e,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,n),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var n,s=e.length,i,a="";for(n=0;n<s;n+=1)e[n].ty==="sh"&&(i=e[n].ks.k,a+=buildShapeString(i,i.i.length,!0,t));return a},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,n,s,i){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n])/2,0,0);break}e.translate(s,i,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(t[0]*255)+","+Math.round(t[1]*255)+","+Math.round(t[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,n){this.textSpans=[],this.renderType="svg",this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,n=t.length,s=[],i="";e<n;)t[e]==="\r"||t[e]===""?(s.push(i),i=""):i+=t[e],e+=1;return s.push(i),s},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var n=t.shapes[0];if(n.it){var s=n.it[n.it.length-1];s.s&&(s.s.k[0]=e,s.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var t,e,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var s=this.globalData.fontManager.getFontByName(n.f);if(s.fClass)this.layerElement.setAttribute("class",s.fClass);else{this.layerElement.setAttribute("font-family",s.fFamily);var i=n.fWeight,a=n.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",n.t);var o=n.l||[],l=!!this.globalData.fontManager.chars;e=o.length;var u,c=this.mHelper,d="",p=this.data.singleShape,m=0,g=0,E=!0,x=n.tr*.001*n.finalSize;if(p&&!l&&!n.sz){var b=this.textContainer,S="start";switch(n.j){case 1:S="end";break;case 2:S="middle";break;default:S="start";break}b.setAttribute("text-anchor",S),b.setAttribute("letter-spacing",x);var C=this.buildTextContents(n.finalText);for(e=C.length,g=n.ps?n.ps[1]+n.ascent:0,t=0;t<e;t+=1)u=this.textSpans[t].span||createNS("tspan"),u.textContent=C[t],u.setAttribute("x",0),u.setAttribute("y",g),u.style.display="inherit",b.appendChild(u),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=u,g+=n.finalLineHeight;this.layerElement.appendChild(b)}else{var T=this.textSpans.length,I;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!l||!p||t===0){if(u=T>t?this.textSpans[t].span:createNS(l?"g":"text"),T<=t){if(u.setAttribute("stroke-linecap","butt"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=u,l){var D=createNS("g");u.appendChild(D),this.textSpans[t].childSpan=D}this.textSpans[t].span=u,this.layerElement.appendChild(u)}u.style.display="inherit"}if(c.reset(),p&&(o[t].n&&(m=-x,g+=n.yOffset,g+=E?1:0,E=!1),this.applyTextPropertiesToMatrix(n,c,o[t].line,m,g),m+=o[t].l||0,m+=x),l){I=this.globalData.fontManager.getCharData(n.finalText[t],s.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily);var P;if(I.t===1)P=new SVGCompElement(I.data,this.globalData,this);else{var O=emptyShapeData;I.data&&I.data.shapes&&(O=this.buildShapeData(I.data,n.finalSize)),P=new SVGShapeElement(O,this.globalData,this)}if(this.textSpans[t].glyph){var B=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(B.layerElement),B.destroy()}this.textSpans[t].glyph=P,P._debug=!0,P.prepareFrame(0),P.renderFrame(),this.textSpans[t].childSpan.appendChild(P.layerElement),I.t===1&&this.textSpans[t].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else p&&u.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),u.textContent=o[t].val,u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}p&&u&&u.setAttribute("d",d)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e=this.textSpans.length,n;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<e;t+=1)n=this.textSpans[t].glyph,n&&(n.prepareFrame(this.comp.renderedFrame-this.data.st),n._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,n=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;e=s.length;var i,a,o;for(t=0;t<e;t+=1)s[t].n||(i=n[t],a=this.textSpans[t].span,o=this.textSpans[t].glyph,o&&o.renderFrame(),i._mdf.m&&a.setAttribute("transform",i.m),i._mdf.o&&a.setAttribute("opacity",i.o),i._mdf.sw&&a.setAttribute("stroke-width",i.sw),i._mdf.sc&&a.setAttribute("stroke",i.sc),i._mdf.fc&&a.setAttribute("fill",i.fc))}};function ISolidElement(t,e,n){this.initElement(t,e,n)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)};function NullElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initFrame(),this.initTransform(t,e,n),this.initHierarchy()}NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var n=createNS("clipPath"),s=createNS("rect");s.setAttribute("width",t.w),s.setAttribute("height",t.h),s.setAttribute("x",0),s.setAttribute("y",0);var i=createElementID();n.setAttribute("id",i),n.appendChild(s),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+i+")"),e.appendChild(n),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,n=this.layers.length;for(e=0;e<n;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){e[t]=!0;var n=this.createItem(this.layers[t]);if(e[t]=n,getExpressionsPlugin()&&(this.layers[t].ty===0&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,t),this.layers[t].tt){var s="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(s===-1)return;if(!this.elements[s]||this.elements[s]===!0)this.buildItem(s),this.addPendingElement(n);else{var i=e[s],a=i.getMatte(this.layers[t].tt);n.setMatte(a)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,n=this.elements.length;e<n;){if(this.elements[e]===t){var s="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,i=this.elements[s],a=i.getMatte(this.layers[e].tt);t.setMatte(a);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(!(this.renderedFrame===t||this.destroyed)){t===null?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){for(var s=0,i;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement()&&(i=this.elements[s].getBaseElement()),s+=1;i?this.layerElement.insertBefore(n,i):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var n,s=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=s-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(t,e,n){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(e&&e.title){var s=createNS("title"),i=createElementID();s.setAttribute("id",i),s.textContent=e.title,this.svgElement.appendChild(s),n+=i}if(e&&e.description){var a=createNS("desc"),o=createElementID();a.setAttribute("id",o),a.textContent=e.description,this.svgElement.appendChild(a),n+=" "+o}n&&this.svgElement.setAttribute("aria-labelledby",n);var l=createNS("defs");this.svgElement.appendChild(l);var u=createNS("g");this.svgElement.appendChild(u),this.layerElement=u,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:l,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(e){var n,s=e.length,i="_";for(n=0;n<s;n+=1)i+=e[n].transform.key+"_";var a=this.sequences[i];return a||(a={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=a,this.sequenceList.push(a)),a},processSequence:function(e,n){for(var s=0,i=e.transforms.length,a=n;s<i&&!n;){if(e.transforms[s].transform.mProps._mdf){a=!0;break}s+=1}if(a)for(e.finalTransform.reset(),s=i-1;s>=0;s-=1)e.finalTransform.multiply(e.transforms[s].transform.mProps.v);e._mdf=a},processSequences:function(e){var n,s=this.sequenceList.length;for(n=0;n<s;n+=1)this.processSequence(this.sequenceList[n],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",n=null,s=null,i=null;function a(){var u=createNS("svg"),c=createNS("filter"),d=createNS("feColorMatrix");return c.setAttribute("id",e),d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),c.appendChild(d),u.appendChild(c),u.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(u.style.display="none"),u}function o(){n||(i=a(),document.body.appendChild(i),n=createTag("canvas"),s=n.getContext("2d"),s.filter="url(#"+e+")",s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1))}function l(u){return n||o(),n.width=u.width,n.height=u.height,s.filter="url(#"+e+")",n}return{load:o,get:l}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var n=createTag("canvas");return n.width=t,n.height=e,n}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(t){var e,n=t.data.ef?t.data.ef.length:0;this.filters=[];var s;for(e=0;e<n;e+=1){s=null;var i=t.data.ef[e].ty;if(registeredEffects[i]){var a=registeredEffects[i].effect;s=new a(t.effectsManager.effectElements[e],t)}s&&this.filters.push(s)}this.filters.length&&t.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(t){var e,n=this.filters.length;for(e=0;e<n;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,n=this.filters.length,s=[];for(e=0;e<n;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s};function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,s=this.masksProperties.length,i=!1;for(n=0;n<s;n+=1)this.masksProperties[n].mode!=="n"&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t=this.element.finalTransform.mat,e=this.element.canvasContext,n,s=this.masksProperties.length,i,a,o;for(e.beginPath(),n=0;n<s;n+=1)if(this.masksProperties[n].mode!=="n"){this.masksProperties[n].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),o=this.viewData[n].v,i=t.applyToPointArray(o.v[0][0],o.v[0][1],0),e.moveTo(i[0],i[1]);var l,u=o._length;for(l=1;l<u;l+=1)a=t.applyToTriplePoints(o.o[l-1],o.i[l],o.v[l]),e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);a=t.applyToTriplePoints(o.o[l-1],o.i[0],o.v[0]),e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,n=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(n);var s=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(s),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var n=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=n}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0],n=e.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],n=e.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var s=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(s.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var i=assetLoader.getLumaCanvas(this.canvasContext.canvas),a=i.getContext("2d");a.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(i,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var n=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(n),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(n),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(t,e,n,s){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;e.ty==="rc"?i=5:e.ty==="el"?i=6:e.ty==="sr"&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,i,t);var a,o=n.length,l;for(a=0;a<o;a+=1)n[a].closed||(l={transforms:s.addTransformSequence(n[a].transforms),trNodes:[]},this.styledShapes.push(l),n[a].elements.push(l))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var n={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:t.hd===!0},s={};if(t.ty==="fl"||t.ty==="st"?(s.c=PropertyFactory.getProp(this,t.c,1,255,this),s.c.k||(n.co="rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")")):(t.ty==="gf"||t.ty==="gs")&&(s.s=PropertyFactory.getProp(this,t.s,1,null,this),s.e=PropertyFactory.getProp(this,t.e,1,null,this),s.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),s.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),s.g=new GradientProperty(this,t.g,this)),s.o=PropertyFactory.getProp(this,t.o,0,.01,this),t.ty==="st"||t.ty==="gs"){if(n.lc=lineCapEnum[t.lc||2],n.lj=lineJoinEnum[t.lj||2],t.lj==1&&(n.ml=t.ml),s.w=PropertyFactory.getProp(this,t.w,0,null,this),s.w.k||(n.wi=s.w.v),t.d){var i=new DashProperty(this,t.d,"canvas",this);s.d=i,s.d.k||(n.da=s.d.dashArray,n.do=s.d.dashoffset[0])}}else n.r=t.r===2?"evenodd":"nonzero";return this.stylesList.push(n),s.style=n,s},CVShapeElement.prototype.createGroupElement=function(){var t={it:[],prevViewData:[]};return t},CVShapeElement.prototype.createTransformElement=function(t){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}};return e},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,n=this.stylesList.length;for(e=0;e<n;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,n,s,i){var a,o=t.length-1,l,u,c=[],d=[],p,m,g,E=[].concat(i);for(a=o;a>=0;a-=1){if(p=this.searchProcessedElement(t[a]),p?e[a]=n[p-1]:t[a]._shouldRender=s,t[a].ty==="fl"||t[a].ty==="st"||t[a].ty==="gf"||t[a].ty==="gs")p?e[a].style.closed=!1:e[a]=this.createStyleElement(t[a],E),c.push(e[a].style);else if(t[a].ty==="gr"){if(!p)e[a]=this.createGroupElement(t[a]);else for(u=e[a].it.length,l=0;l<u;l+=1)e[a].prevViewData[l]=e[a].it[l];this.searchShapes(t[a].it,e[a].it,e[a].prevViewData,s,E)}else t[a].ty==="tr"?(p||(g=this.createTransformElement(t[a]),e[a]=g),E.push(e[a]),this.addTransformToStyleList(e[a])):t[a].ty==="sh"||t[a].ty==="rc"||t[a].ty==="el"||t[a].ty==="sr"?p||(e[a]=this.createShapeElement(t[a])):t[a].ty==="tm"||t[a].ty==="rd"||t[a].ty==="pb"||t[a].ty==="zz"||t[a].ty==="op"?(p?(m=e[a],m.closed=!1):(m=ShapeModifiers.getModifier(t[a].ty),m.init(this,t[a]),e[a]=m,this.shapeModifiers.push(m)),d.push(m)):t[a].ty==="rp"&&(p?(m=e[a],m.closed=!0):(m=ShapeModifiers.getModifier(t[a].ty),e[a]=m,m.init(this,t,a,e),this.shapeModifiers.push(m),s=!1),d.push(m));this.addProcessedElement(t[a],a+1)}for(this.removeTransformFromStyleList(),this.closeStyles(c),o=d.length,a=0;a<o;a+=1)d[a].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e=this.stylesList.length,n,s,i,a,o,l,u=this.globalData.renderer,c=this.globalData.canvasContext,d,p;for(t=0;t<e;t+=1)if(p=this.stylesList[t],d=p.type,!((d==="st"||d==="gs")&&p.wi===0||!p.data._shouldRender||p.coOp===0||this.globalData.currentGlobalAlpha===0)){for(u.save(),o=p.elements,d==="st"||d==="gs"?(u.ctxStrokeStyle(d==="st"?p.co:p.grd),u.ctxLineWidth(p.wi),u.ctxLineCap(p.lc),u.ctxLineJoin(p.lj),u.ctxMiterLimit(p.ml||0)):u.ctxFillStyle(d==="fl"?p.co:p.grd),u.ctxOpacity(p.coOp),d!=="st"&&d!=="gs"&&c.beginPath(),u.ctxTransform(p.preTransforms.finalTransform.props),s=o.length,n=0;n<s;n+=1){for((d==="st"||d==="gs")&&(c.beginPath(),p.da&&(c.setLineDash(p.da),c.lineDashOffset=p.do)),l=o[n].trNodes,a=l.length,i=0;i<a;i+=1)l[i].t==="m"?c.moveTo(l[i].p[0],l[i].p[1]):l[i].t==="c"?c.bezierCurveTo(l[i].pts[0],l[i].pts[1],l[i].pts[2],l[i].pts[3],l[i].pts[4],l[i].pts[5]):c.closePath();(d==="st"||d==="gs")&&(u.ctxStroke(),p.da&&c.setLineDash(this.dashResetter))}d!=="st"&&d!=="gs"&&this.globalData.renderer.ctxFill(p.r),u.restore()}},CVShapeElement.prototype.renderShape=function(t,e,n,s){var i,a=e.length-1,o;for(o=t,i=a;i>=0;i-=1)e[i].ty==="tr"?(o=n[i].transform,this.renderShapeTransform(t,o)):e[i].ty==="sh"||e[i].ty==="el"||e[i].ty==="rc"||e[i].ty==="sr"?this.renderPath(e[i],n[i]):e[i].ty==="fl"?this.renderFill(e[i],n[i],o):e[i].ty==="st"?this.renderStroke(e[i],n[i],o):e[i].ty==="gf"||e[i].ty==="gs"?this.renderGradientFill(e[i],n[i],o):e[i].ty==="gr"?this.renderShape(o,e[i].it,n[i].it):e[i].ty;s&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var n=t.trNodes,s=e.paths,i,a,o,l=s._length;n.length=0;var u=t.transforms.finalTransform;for(o=0;o<l;o+=1){var c=s.shapes[o];if(c&&c.v){for(a=c._length,i=1;i<a;i+=1)i===1&&n.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),n.push({t:"c",pts:u.applyToTriplePoints(c.o[i-1],c.i[i],c.v[i])});a===1&&n.push({t:"m",p:u.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&a&&(n.push({t:"c",pts:u.applyToTriplePoints(c.o[i-1],c.i[0],c.v[0])}),n.push({t:"z"}))}}t.trNodes=n}},CVShapeElement.prototype.renderPath=function(t,e){if(t.hd!==!0&&t._shouldRender){var n,s=e.styledShapes.length;for(n=0;n<s;n+=1)this.renderStyledShape(e.styledShapes[n],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,n){var s=e.style;(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,n){var s=e.style,i;if(!s.grd||e.g._mdf||e.s._mdf||e.e._mdf||t.t!==1&&(e.h._mdf||e.a._mdf)){var a=this.globalData.canvasContext,o=e.s.v,l=e.e.v;if(t.t===1)i=a.createLinearGradient(o[0],o[1],l[0],l[1]);else{var u=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),c=Math.atan2(l[1]-o[1],l[0]-o[0]),d=e.h.v;d>=1?d=.99:d<=-1&&(d=-.99);var p=u*d,m=Math.cos(c+e.a.v)*p+o[0],g=Math.sin(c+e.a.v)*p+o[1];i=a.createRadialGradient(m,g,0,o[0],o[1],u)}var E,x=t.g.p,b=e.g.c,S=1;for(E=0;E<x;E+=1)e.g._hasOpacity&&e.g._collapsable&&(S=e.g.o[E*2+1]),i.addColorStop(b[E*4]/100,"rgba("+b[E*4+1]+","+b[E*4+2]+","+b[E*4+3]+","+S+")");s.grd=i}s.coOp=e.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(t,e,n){var s=e.style,i=e.d;i&&(i._mdf||this._isFirstFrame)&&(s.da=i.dashArray,s.do=i.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*n.opacity),(e.w._mdf||this._isFirstFrame)&&(s.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(t,e,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var n=!1;t.sc&&(n=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var s=this.globalData.fontManager.getFontByName(t.f),i,a,o=t.l,l=this.mHelper;this.stroke=n,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,a=t.finalText.length;var u,c,d,p,m,g,E,x,b,S,C=this.data.singleShape,T=t.tr*.001*t.finalSize,I=0,D=0,P=!0,O=0;for(i=0;i<a;i+=1){u=this.globalData.fontManager.getCharData(t.finalText[i],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),c=u&&u.data||{},l.reset(),C&&o[i].n&&(I=-T,D+=t.yOffset,D+=P?1:0,P=!1),m=c.shapes?c.shapes[0].it:[],E=m.length,l.scale(t.finalSize/100,t.finalSize/100),C&&this.applyTextPropertiesToMatrix(t,l,o[i].line,I,D),b=createSizedArray(E-1);var B=0;for(g=0;g<E;g+=1)if(m[g].ty==="sh"){for(p=m[g].ks.k.i.length,x=m[g].ks.k,S=[],d=1;d<p;d+=1)d===1&&S.push(l.applyToX(x.v[0][0],x.v[0][1],0),l.applyToY(x.v[0][0],x.v[0][1],0)),S.push(l.applyToX(x.o[d-1][0],x.o[d-1][1],0),l.applyToY(x.o[d-1][0],x.o[d-1][1],0),l.applyToX(x.i[d][0],x.i[d][1],0),l.applyToY(x.i[d][0],x.i[d][1],0),l.applyToX(x.v[d][0],x.v[d][1],0),l.applyToY(x.v[d][0],x.v[d][1],0));S.push(l.applyToX(x.o[d-1][0],x.o[d-1][1],0),l.applyToY(x.o[d-1][0],x.o[d-1][1],0),l.applyToX(x.i[0][0],x.i[0][1],0),l.applyToY(x.i[0][0],x.i[0][1],0),l.applyToX(x.v[0][0],x.v[0][1],0),l.applyToY(x.v[0][0],x.v[0][1],0)),b[B]=S,B+=1}C&&(I+=o[i].l,I+=T),this.textSpans[O]?this.textSpans[O].elem=b:this.textSpans[O]={elem:b},O+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var t=this.canvasContext;t.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,n,s,i,a,o,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;n=u.length;var c,d=null,p=null,m=null,g,E,x=this.globalData.renderer;for(e=0;e<n;e+=1)if(!u[e].n){if(c=l[e],c&&(x.save(),x.ctxTransform(c.p),x.ctxOpacity(c.o)),this.fill){for(c&&c.fc?d!==c.fc&&(x.ctxFillStyle(c.fc),d=c.fc):d!==this.values.fill&&(d=this.values.fill,x.ctxFillStyle(this.values.fill)),g=this.textSpans[e].elem,i=g.length,this.globalData.canvasContext.beginPath(),s=0;s<i;s+=1)for(E=g[s],o=E.length,this.globalData.canvasContext.moveTo(E[0],E[1]),a=2;a<o;a+=6)this.globalData.canvasContext.bezierCurveTo(E[a],E[a+1],E[a+2],E[a+3],E[a+4],E[a+5]);this.globalData.canvasContext.closePath(),x.ctxFill()}if(this.stroke){for(c&&c.sw?m!==c.sw&&(m=c.sw,x.ctxLineWidth(c.sw)):m!==this.values.sWidth&&(m=this.values.sWidth,x.ctxLineWidth(this.values.sWidth)),c&&c.sc?p!==c.sc&&(p=c.sc,x.ctxStrokeStyle(c.sc)):p!==this.values.stroke&&(p=this.values.stroke,x.ctxStrokeStyle(this.values.stroke)),g=this.textSpans[e].elem,i=g.length,this.globalData.canvasContext.beginPath(),s=0;s<i;s+=1)for(E=g[s],o=E.length,this.globalData.canvasContext.moveTo(E[0],E[1]),a=2;a<o;a+=6)this.globalData.canvasContext.bezierCurveTo(E[a],E[a+1],E[a+2],E[a+3],E[a+4],E[a+5]);this.globalData.canvasContext.closePath(),x.ctxStroke()}c&&this.globalData.renderer.restore()}};function CVImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e=t.getContext("2d"),n=this.img.width,s=this.img.height,i=n/s,a=this.assetData.w/this.assetData.h,o,l,u=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;i>a&&u==="xMidYMid slice"||i<a&&u!=="xMidYMid slice"?(l=s,o=l*a):(o=n,l=o/a),e.drawImage(this.img,(n-o)/2,(s-l)/2,o,l,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(t,e,n){this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){t[0]===1&&t[1]===0&&t[4]===0&&t[5]===1&&t[12]===0&&t[13]===0||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,n,s){this.canvasContext.fillRect(t,e,n,s)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var n="0px 0px 0px";e.transformOrigin=n,e.mozTransformOrigin=n,e.webkitTransformOrigin=n,e["-webkit-transform"]=n,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){this.reset();var n,s;t?(n=t,s=e,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=s):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,s=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=s*this.renderConfig.dpr);var i,a;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var o=this.renderConfig.preserveAspectRatio.split(" "),l=o[1]||"meet",u=o[0]||"xMidYMid",c=u.substr(0,4),d=u.substr(4);i=n/s,a=this.transformCanvas.w/this.transformCanvas.h,a>i&&l==="meet"||a<i&&l==="slice"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr)),c==="xMid"&&(a<i&&l==="meet"||a>i&&l==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(s/this.transformCanvas.h))/2*this.renderConfig.dpr:c==="xMax"&&(a<i&&l==="meet"||a>i&&l==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(s/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,d==="YMid"&&(a>i&&l==="meet"||a<i&&l==="slice")?this.transformCanvas.ty=(s-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:d==="YMax"&&(a>i&&l==="meet"||a<i&&l==="slice")?this.transformCanvas.ty=(s-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if(!(this.renderedFrame===t&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||t===-1)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var n,s=this.layers.length;for(this.completeLayers||this.checkLayers(t),n=s-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(t-this.layers[n].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=s-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty===99)){var n=this.createItem(this.layers[t],this,this.globalData);e[t]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var t,e=15;for(t=0;t<e;t+=1){var n=new CanvasContext;this.stack[t]=n}this._length=e,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var t=this._length*2,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e=this.stack[this.cArrPos],n=e.transform,s,i=this.cTr.props;for(s=0;s<16;s+=1)i[s]=n[s];if(t){this.nativeContext.restore();var a=this.stack[this.cArrPos+1];this.appliedFillStyle=a.fillStyle,this.appliedStrokeStyle=a.strokeStyle,this.appliedLineWidth=a.lineWidth,this.appliedLineCap=a.lineCap,this.appliedLineJoin=a.lineJoin,this.appliedMiterLimit=a.miterLimit}this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),(t||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n=this.stack[this.cArrPos],s;for(s=0;s<16;s+=1)n.transform[s]=e[s];this.cArrPos+=1;var i=this.stack[this.cArrPos];i.opacity=n.opacity,i.fillStyle=n.fillStyle,i.strokeStyle=n.strokeStyle,i.lineWidth=n.lineWidth,i.lineCap=n.lineCap,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var n=e.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,n,s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,n,s)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(t,e,n){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();var e,n=this.layers.length;for(e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var n=this.finalTransform.mat.toCSS();e.transform=n,e.webkitTransform=n}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(t,e,n){this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?(t=createNS("rect"),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(t=createTag("div"),t.style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)};function HShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var n,s=t.length;for(n=0;n<s;n+=1)e=t[n].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var n=t.sh.v,s=t.transformers,i,a=n._length,o,l,u,c;if(!(a<=1)){for(i=0;i<a-1;i+=1)o=this.getTransformedPoint(s,n.v[i]),l=this.getTransformedPoint(s,n.o[i]),u=this.getTransformedPoint(s,n.i[i+1]),c=this.getTransformedPoint(s,n.v[i+1]),this.checkBounds(o,l,u,c,e);n.c&&(o=this.getTransformedPoint(s,n.v[i]),l=this.getTransformedPoint(s,n.o[i]),u=this.getTransformedPoint(s,n.i[0]),c=this.getTransformedPoint(s,n.v[0]),this.checkBounds(o,l,u,c,e))}},HShapeElement.prototype.checkBounds=function(t,e,n,s,i){this.getBoundsOfCurve(t,e,n,s);var a=this.shapeBoundingBox;i.x=bmMin(a.left,i.x),i.xMax=bmMax(a.right,i.xMax),i.y=bmMin(a.top,i.y),i.yMax=bmMax(a.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,n,s){for(var i=[[t[0],s[0]],[t[1],s[1]]],a,o,l,u,c,d,p,m=0;m<2;++m)o=6*t[m]-12*e[m]+6*n[m],a=-3*t[m]+9*e[m]-9*n[m]+3*s[m],l=3*e[m]-3*t[m],o|=0,a|=0,l|=0,a===0&&o===0||(a===0?(u=-l/o,u>0&&u<1&&i[m].push(this.calculateF(u,t,e,n,s,m))):(c=o*o-4*l*a,c>=0&&(d=(-o+bmSqrt(c))/(2*a),d>0&&d<1&&i[m].push(this.calculateF(d,t,e,n,s,m)),p=(-o-bmSqrt(c))/(2*a),p>0&&p<1&&i[m].push(this.calculateF(p,t,e,n,s,m)))));this.shapeBoundingBox.left=bmMin.apply(null,i[0]),this.shapeBoundingBox.top=bmMin.apply(null,i[1]),this.shapeBoundingBox.right=bmMax.apply(null,i[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,i[1])},HShapeElement.prototype.calculateF=function(t,e,n,s,i,a){return bmPow(1-t,3)*e[a]+3*bmPow(1-t,2)*t*n[a]+3*(1-t)*bmPow(t,2)*s[a]+bmPow(t,3)*i[a]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var n,s=t.length;for(n=0;n<s;n+=1)t[n]&&t[n].sh?this.calculateShapeBoundingBox(t[n],e):t[n]&&t[n].it?this.calculateBoundingBox(t[n].it,e):t[n]&&t[n].style&&t[n].w&&this.expandStrokeBoundingBox(t[n].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var n=0;if(t.keyframes){for(var s=0;s<t.keyframes.length;s+=1){var i=t.keyframes[s].s;i>n&&(n=i)}n*=t.mult}else n=t.v*t.mult;e.x-=n,e.xMax+=n,e.y-=n,e.yMax+=n},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var n=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),n=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),n=!0),n||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var s=this.shapeCont.style,i="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=i,s.webkitTransform=i}}};function HTextElement(t,e,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,n=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=n,e.color=n,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var s=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{e.fontFamily=s.fFamily;var i=t.fWeight,a=t.fStyle;e.fontStyle=a,e.fontWeight=i}var o,l,u=t.l;l=u.length;var c,d,p,m=this.mHelper,g,E="",x=0;for(o=0;o<l;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[x]?c=this.textPaths[x]:(c=createNS("path"),c.setAttribute("stroke-linecap",lineCapEnum[1]),c.setAttribute("stroke-linejoin",lineJoinEnum[2]),c.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[x]?(d=this.textSpans[x],p=d.children[0]):(d=createTag("div"),d.style.lineHeight=0,p=createNS("svg"),p.appendChild(c),styleDiv(d)))):this.isMasked?c=this.textPaths[x]?this.textPaths[x]:createNS("text"):this.textSpans[x]?(d=this.textSpans[x],c=this.textPaths[x]):(d=createTag("span"),styleDiv(d),c=createTag("span"),styleDiv(c),d.appendChild(c)),this.globalData.fontManager.chars){var b=this.globalData.fontManager.getCharData(t.finalText[o],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),S;if(b?S=b.data:S=null,m.reset(),S&&S.shapes&&S.shapes.length&&(g=S.shapes[0].it,m.scale(t.finalSize/100,t.finalSize/100),E=this.createPathShape(m,g),c.setAttribute("d",E)),this.isMasked)this.innerElem.appendChild(c);else{if(this.innerElem.appendChild(d),S&&S.shapes){document.body.appendChild(p);var C=p.getBBox();p.setAttribute("width",C.width+2),p.setAttribute("height",C.height+2),p.setAttribute("viewBox",C.x-1+" "+(C.y-1)+" "+(C.width+2)+" "+(C.height+2));var T=p.style,I="translate("+(C.x-1)+"px,"+(C.y-1)+"px)";T.transform=I,T.webkitTransform=I,u[o].yOffset=C.y-1}else p.setAttribute("width",1),p.setAttribute("height",1);d.appendChild(p)}}else if(c.textContent=u[o].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(c);else{this.innerElem.appendChild(d);var D=c.style,P="translate3d(0,"+-t.finalSize/1.2+"px,0)";D.transform=P,D.webkitTransform=P}this.isMasked?this.textSpans[x]=c:this.textSpans[x]=d,this.textSpans[x].style.display="block",this.textPaths[x]=c,x+=1}for(;x<this.textSpans.length;)this.textSpans[x].style.display="none",x+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var n,s,i=0,a=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;s=o.length;var l,u,c;for(n=0;n<s;n+=1)o[n].n?i+=1:(u=this.textSpans[n],c=this.textPaths[n],l=a[i],i+=1,l._mdf.m&&(this.isMasked?u.setAttribute("transform",l.m):(u.style.webkitTransform=l.m,u.style.transform=l.m)),u.style.opacity=l.o,l.sw&&l._mdf.sw&&c.setAttribute("stroke-width",l.sw),l.sc&&l._mdf.sc&&c.setAttribute("stroke",l.sc),l.fc&&l._mdf.fc&&(c.setAttribute("fill",l.fc),c.style.color=l.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var d=this.innerElem.getBBox();this.currentBBox.w!==d.width&&(this.currentBBox.w=d.width,this.svgElement.setAttribute("width",d.width)),this.currentBBox.h!==d.height&&(this.currentBBox.h=d.height,this.svgElement.setAttribute("height",d.height));var p=1;if(this.currentBBox.w!==d.width+p*2||this.currentBBox.h!==d.height+p*2||this.currentBBox.x!==d.x-p||this.currentBBox.y!==d.y-p){this.currentBBox.w=d.width+p*2,this.currentBBox.h=d.height+p*2,this.currentBBox.x=d.x-p,this.currentBBox.y=d.y-p,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var m="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=m,t.webkitTransform=m}}}};function HCameraElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initHierarchy();var s=PropertyFactory.getProp;if(this.pe=s(this,t.pe,0,0,this),t.ks.p.s?(this.px=s(this,t.ks.p.x,1,0,this),this.py=s(this,t.ks.p.y,1,0,this),this.pz=s(this,t.ks.p.z,1,0,this)):this.p=s(this,t.ks.p,1,0,this),t.ks.a&&(this.a=s(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var i,a=t.ks.or.k.length;for(i=0;i<a;i+=1)t.ks.or.k[i].to=null,t.ks.or.k[i].ti=null}this.or=s(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=s(this,t.ks.rx,0,degToRads,this),this.ry=s(this,t.ks.ry,0,degToRads,this),this.rz=s(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,n,s,i;for(t=0;t<e;t+=1)if(n=this.comp.threeDElements[t],n.type==="3d"){s=n.perspectiveElem.style,i=n.container.style;var a=this.pe.v+"px",o="0px 0px 0px",l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.perspective=a,s.webkitPerspective=a,i.transformOrigin=o,i.mozTransformOrigin=o,i.webkitTransformOrigin=o,s.transform=l,s.webkitTransform=l}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t=this._isFirstFrame,e,n;if(this.hierarchy)for(n=this.hierarchy.length,e=0;e<n;e+=1)t=this.hierarchy[e].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(n=this.hierarchy.length-1,e=n;e>=0;e-=1){var s=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-s.p.v[0],-s.p.v[1],s.p.v[2]),this.mat.rotateX(-s.or.v[0]).rotateY(-s.or.v[1]).rotateZ(s.or.v[2]),this.mat.rotateX(-s.rx.v).rotateY(-s.ry.v).rotateZ(s.rz.v),this.mat.scale(1/s.s.v[0],1/s.s.v[1],1/s.s.v[2]),this.mat.translate(s.a.v[0],s.a.v[1],s.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;this.p?i=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:i=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var a=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),o=[i[0]/a,i[1]/a,i[2]/a],l=Math.sqrt(o[2]*o[2]+o[0]*o[0]),u=Math.atan2(o[1],l),c=Math.atan2(o[0],-o[2]);this.mat.rotateY(c).rotateX(-u)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var d=!this._prevMat.equals(this.mat);if((d||this.pe._mdf)&&this.comp.threeDElements){n=this.comp.threeDElements.length;var p,m,g;for(e=0;e<n;e+=1)if(p=this.comp.threeDElements[e],p.type==="3d"){if(d){var E=this.mat.toCSS();g=p.container.style,g.transform=E,g.webkitTransform=E}this.pe._mdf&&(m=p.perspectiveElem.style,m.perspective=this.pe.v+"px",m.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){var s=this.layers[e];if(!s.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(n,e);else{for(var i=0,a,o,l;i<e;)this.elements[i]&&this.elements[i]!==!0&&this.elements[i].getBaseElement&&(o=this.elements[i],l=this.layers[i].ddd?this.getThreeDContainerByPos(i):o.getBaseElement(),a=l||a),i+=1;a?(!s.ddd||!this.supports3d)&&this.layerElement.insertBefore(n,a):(!s.ddd||!this.supports3d)&&this.layerElement.appendChild(n)}else this.addTo3dContainer(n,e)}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,n=this.threeDElements.length;e<n;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var n=createTag("div"),s,i;styleDiv(n);var a=createTag("div");if(styleDiv(a),e==="3d"){s=n.style,s.width=this.globalData.compSize.w+"px",s.height=this.globalData.compSize.h+"px";var o="50% 50%";s.webkitTransformOrigin=o,s.mozTransformOrigin=o,s.transformOrigin=o,i=a.style;var l="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.transform=l,i.webkitTransform=l}n.appendChild(a);var u={container:a,perspectiveElem:n,startPos:t,endPos:t,type:e};return this.threeDElements.push(u),u},HybridRendererBase.prototype.build3dContainers=function(){var t,e=this.layers.length,n,s="";for(t=0;t<e;t+=1)this.layers[t].ddd&&this.layers[t].ty!==3?(s!=="3d"&&(s="3d",n=this.createThreeDContainer(t,"3d")),n.endPos=Math.max(n.endPos,t)):(s!=="2d"&&(s="2d",n=this.createThreeDContainer(t,"2d")),n.endPos=Math.max(n.endPos,t));for(e=this.threeDElements.length,t=e-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var n=0,s=this.threeDElements.length;n<s;){if(e<=this.threeDElements[n].endPos){for(var i=this.threeDElements[n].startPos,a;i<e;)this.elements[i]&&this.elements[i].getBaseElement&&(a=this.elements[i].getBaseElement()),i+=1;a?this.threeDElements[n].container.insertBefore(t,a):this.threeDElements[n].container.appendChild(t);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),n=this.animationItem.wrapper,s=e.style;s.width=t.w+"px",s.height=t.h+"px",this.resizerElem=e,styleDiv(e),s.transformStyle="flat",s.mozTransformStyle="flat",s.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),n.appendChild(e),s.overflow="hidden";var i=createNS("svg");i.setAttribute("width","1"),i.setAttribute("height","1"),styleDiv(i),this.resizerElem.appendChild(i);var a=createNS("defs");i.appendChild(a),this.data=t,this.setupGlobalData(t,i),this.globalData.defs=a,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,n=t/e,s=this.globalData.compSize.w/this.globalData.compSize.h,i,a,o,l;s>n?(i=t/this.globalData.compSize.w,a=t/this.globalData.compSize.w,o=0,l=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2):(i=e/this.globalData.compSize.h,a=e/this.globalData.compSize.h,o=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,l=0);var u=this.resizerElem.style;u.webkitTransform="matrix3d("+i+",0,0,0,0,"+a+",0,0,0,0,1,0,"+o+","+l+",0,1)",u.transform=u.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t=this.globalData.compSize.w,e=this.globalData.compSize.h,n,s=this.threeDElements.length;for(n=0;n<s;n+=1){var i=this.threeDElements[n].perspectiveElem.style;i.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",i.perspective=i.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,n=t.length,s=createTag("div");for(e=0;e<n;e+=1)if(t[e].xt){var i=this.createComp(t[e],s,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}};function HCompElement(t,e,n){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var n=0,s;n<e;)this.elements[n]&&this.elements[n].getBaseElement&&(s=this.elements[n].getBaseElement()),n+=1;s?this.layerElement.insertBefore(t,s):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(){return function(t){function e(n){for(var s=0,i=t.layers.length;s<i;){if(t.layers[s].nm===n||t.layers[s].ind===n)return t.elements[s].layerInterface;s+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e}}();function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function seedRandom(t,e){var n=this,s=256,i=6,a=52,o="random",l=e.pow(s,i),u=e.pow(2,a),c=u*2,d=s-1,p;function m(T,I,D){var P=[];I=I===!0?{entropy:!0}:I||{};var O=b(x(I.entropy?[T,C(t)]:T===null?S():T,3),P),B=new g(P),F=function(){for(var Q=B.g(i),Z=l,ne=0;Q<u;)Q=(Q+ne)*s,Z*=s,ne=B.g(1);for(;Q>=c;)Q/=2,Z/=2,ne>>>=1;return(Q+ne)/Z};return F.int32=function(){return B.g(4)|0},F.quick=function(){return B.g(4)/4294967296},F.double=F,b(C(B.S),t),(I.pass||D||function(H,Q,Z,ne){return ne&&(ne.S&&E(ne,B),H.state=function(){return E(B,{})}),Z?(e[o]=H,Q):H})(F,O,"global"in I?I.global:this==e,I.state)}e["seed"+o]=m;function g(T){var I,D=T.length,P=this,O=0,B=P.i=P.j=0,F=P.S=[];for(D||(T=[D++]);O<s;)F[O]=O++;for(O=0;O<s;O++)F[O]=F[B=d&B+T[O%D]+(I=F[O])],F[B]=I;P.g=function(H){for(var Q,Z=0,ne=P.i,re=P.j,se=P.S;H--;)Q=se[ne=d&ne+1],Z=Z*s+se[d&(se[ne]=se[re=d&re+Q])+(se[re]=Q)];return P.i=ne,P.j=re,Z}}function E(T,I){return I.i=T.i,I.j=T.j,I.S=T.S.slice(),I}function x(T,I){var D=[],P=_typeof$2(T),O;if(I&&P=="object")for(O in T)try{D.push(x(T[O],I-1))}catch{}return D.length?D:P=="string"?T:T+"\0"}function b(T,I){for(var D=T+"",P,O=0;O<D.length;)I[d&O]=d&(P^=I[d&O]*19)+D.charCodeAt(O++);return C(I)}function S(){try{var T=new Uint8Array(s);return(n.crypto||n.msCrypto).getRandomValues(T),C(T)}catch{var I=n.navigator,D=I&&I.plugins;return[+new Date,n,D,n.screen,C(t)]}}function C(T){return String.fromCharCode.apply(0,T)}b(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return t==="number"||e instanceof Number||t==="boolean"||t==="string"}function $bm_neg(t){var e=_typeof$1(t);if(e==="number"||t instanceof Number||e==="boolean")return-t;if($bm_isInstanceOfArray(t)){var n,s=t.length,i=[];for(n=0;n<s;n+=1)i[n]=-t[n];return i}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var n=_typeof$1(t),s=_typeof$1(e);if(isNumerable(n,t)&&isNumerable(s,e)||n==="string"||s==="string")return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return t=t.slice(0),t[0]+=e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,a=t.length,o=e.length,l=[];i<a||i<o;)(typeof t[i]=="number"||t[i]instanceof Number)&&(typeof e[i]=="number"||e[i]instanceof Number)?l[i]=t[i]+e[i]:l[i]=e[i]===void 0?t[i]:t[i]||e[i],i+=1;return l}return 0}var add=sum;function sub(t,e){var n=_typeof$1(t),s=_typeof$1(e);if(isNumerable(n,t)&&isNumerable(s,e))return n==="string"&&(t=parseInt(t,10)),s==="string"&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return t=t.slice(0),t[0]-=e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,a=t.length,o=e.length,l=[];i<a||i<o;)(typeof t[i]=="number"||t[i]instanceof Number)&&(typeof e[i]=="number"||e[i]instanceof Number)?l[i]=t[i]-e[i]:l[i]=e[i]===void 0?t[i]:t[i]||e[i],i+=1;return l}return 0}function mul(t,e){var n=_typeof$1(t),s=_typeof$1(e),i;if(isNumerable(n,t)&&isNumerable(s,e))return t*e;var a,o;if($bm_isInstanceOfArray(t)&&isNumerable(s,e)){for(o=t.length,i=createTypedArray("float32",o),a=0;a<o;a+=1)i[a]=t[a]*e;return i}if(isNumerable(n,t)&&$bm_isInstanceOfArray(e)){for(o=e.length,i=createTypedArray("float32",o),a=0;a<o;a+=1)i[a]=t*e[a];return i}return 0}function div(t,e){var n=_typeof$1(t),s=_typeof$1(e),i;if(isNumerable(n,t)&&isNumerable(s,e))return t/e;var a,o;if($bm_isInstanceOfArray(t)&&isNumerable(s,e)){for(o=t.length,i=createTypedArray("float32",o),a=0;a<o;a+=1)i[a]=t[a]/e;return i}if(isNumerable(n,t)&&$bm_isInstanceOfArray(e)){for(o=e.length,i=createTypedArray("float32",o),a=0;a<o;a+=1)i[a]=t/e[a];return i}return 0}function mod(t,e){return typeof t=="string"&&(t=parseInt(t,10)),typeof e=="string"&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,n){if(e>n){var s=n;n=e,e=s}return Math.min(Math.max(t,e),n)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if(typeof t=="number"||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var n,s=Math.min(t.length,e.length),i=0;for(n=0;n<s;n+=1)i+=Math.pow(e[n]-t[n],2);return Math.sqrt(i)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],n=t[1],s=t[2],i=Math.max(e,n,s),a=Math.min(e,n,s),o,l,u=(i+a)/2;if(i===a)o=0,l=0;else{var c=i-a;switch(l=u>.5?c/(2-i-a):c/(i+a),i){case e:o=(n-s)/c+(n<s?6:0);break;case n:o=(s-e)/c+2;break;case s:o=(e-n)/c+4;break}o/=6}return[o,l,u,t[3]]}function hue2rgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslToRgb(t){var e=t[0],n=t[1],s=t[2],i,a,o;if(n===0)i=s,o=s,a=s;else{var l=s<.5?s*(1+n):s+n-s*n,u=2*s-l;i=hue2rgb(u,l,e+1/3),a=hue2rgb(u,l,e),o=hue2rgb(u,l,e-1/3)}return[i,a,o,t[3]]}function linear(t,e,n,s,i){if((s===void 0||i===void 0)&&(s=e,i=n,e=0,n=1),n<e){var a=n;n=e,e=a}if(t<=e)return s;if(t>=n)return i;var o=n===e?0:(t-e)/(n-e);if(!s.length)return s+(i-s)*o;var l,u=s.length,c=createTypedArray("float32",u);for(l=0;l<u;l+=1)c[l]=s[l]+(i[l]-s[l])*o;return c}function random(t,e){if(e===void 0&&(t===void 0?(t=0,e=1):(e=t,t=void 0)),e.length){var n,s=e.length;t||(t=createTypedArray("float32",s));var i=createTypedArray("float32",s),a=BMMath.random();for(n=0;n<s;n+=1)i[n]=t[n]+a*(e[n]-t[n]);return i}t===void 0&&(t=0);var o=BMMath.random();return t+o*(e-t)}function createPath(t,e,n,s){var i,a=t.length,o=shapePool.newElement();o.setPathData(!!s,a);var l=[0,0],u,c;for(i=0;i<a;i+=1)u=e&&e[i]?e[i]:l,c=n&&n[i]?n[i]:l,o.setTripleAt(t[i][0],t[i][1],c[0]+t[i][0],c[1]+t[i][1],u[0]+t[i][0],u[1]+t[i][1],i,!0);return o}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function t(e,n){var s,i,a=this.pv.length?this.pv.length:1,o=createTypedArray("float32",a);e=5;var l=Math.floor(time*e);for(s=0,i=0;s<l;){for(i=0;i<a;i+=1)o[i]+=-n+n*2*BMMath.random();s+=1}var u=time*e,c=u-Math.floor(u),d=createTypedArray("float32",a);if(a>1){for(i=0;i<a;i+=1)d[i]=this.pv[i]+o[i]+(-n+n*2*BMMath.random())*c;return d}return this.pv+o[0]+(-n+n*2*BMMath.random())*c}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var n=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads,i=-Math.atan2(n[1],n[2])/degToRads;return[i,s,0]}function easeOut(t,e,n,s,i){return applyEase(easeOutBez,t,e,n,s,i)}function easeIn(t,e,n,s,i){return applyEase(easeInBez,t,e,n,s,i)}function ease(t,e,n,s,i){return applyEase(easeInOutBez,t,e,n,s,i)}function applyEase(t,e,n,s,i,a){i===void 0?(i=n,a=s):e=(e-n)/(s-n),e>1?e=1:e<0&&(e=0);var o=t(e);if($bm_isInstanceOfArray(i)){var l,u=i.length,c=createTypedArray("float32",u);for(l=0;l<u;l+=1)c[l]=(a[l]-i[l])*o+i[l];return c}return(a-i)*o+i}function nearestKey(t){var e,n=data.k.length,s,i;if(!data.k.length||typeof data.k[0]=="number")s=0,i=0;else if(s=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)s=1,i=data.k[0].t;else{for(e=0;e<n-1;e+=1)if(t===data.k[e].t){s=e+1,i=data.k[e].t;break}else if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(s=e+2,i=data.k[e+1].t):(s=e+1,i=data.k[e].t);break}s===-1&&(s=e+1,i=data.k[e].t)}var a={};return a.index=s,a.time=i/elem.comp.globalData.frameRate,a}function key(t){var e,n,s;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var i=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(s=i.length,n=0;n<s;n+=1)e[n]=i[n],e.value[n]=i[n];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return!t&&t!==0&&(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return typeof value=="string"?e===void 0?value.substring(t):value.substring(t,e):""}function substr(t,e){return typeof value=="string"?e===void 0?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=t===0?0:Math.floor(time*t)/t,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={};t.initExpressions=e,t.resetFrame=ExpressionManager.resetFrame;function e(n){var s=0,i=[];function a(){s+=1}function o(){s-=1,s===0&&u()}function l(c){i.indexOf(c)===-1&&i.push(c)}function u(){var c,d=i.length;for(c=0;c<d;c+=1)i[c].release();i.length=0}n.renderer.compInterface=CompExpressionInterface(n.renderer),n.renderer.globalData.projectInterface.registerComposition(n.renderer),n.renderer.globalData.pushExpression=a,n.renderer.globalData.popExpression=o,n.renderer.globalData.registerExpressionProperty=l}return t}(),MaskManagerInterface=function(){function t(n,s){this._mask=n,this._data=s}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(s){var i=createSizedArray(s.viewData.length),a,o=s.viewData.length;for(a=0;a<o;a+=1)i[a]=new t(s.viewData[a],s.masksProperties[a]);var l=function(c){for(a=0;a<o;){if(s.masksProperties[a].nm===c)return i[a];a+=1}return null};return l};return e}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function n(o,l,u){Object.defineProperty(o,"velocity",{get:function(){return l.getVelocityAtTime(l.comp.currentFrame)}}),o.numKeys=l.keyframes?l.keyframes.length:0,o.key=function(c){if(!o.numKeys)return 0;var d="";"s"in l.keyframes[c-1]?d=l.keyframes[c-1].s:"e"in l.keyframes[c-2]?d=l.keyframes[c-2].e:d=l.keyframes[c-2].s;var p=u==="unidimensional"?new Number(d):Object.assign({},d);return p.time=l.keyframes[c-1].t/l.elem.comp.globalData.frameRate,p.value=u==="unidimensional"?d[0]:d,p},o.valueAtTime=l.getValueAtTime,o.speedAtTime=l.getSpeedAtTime,o.velocityAtTime=l.getVelocityAtTime,o.propertyGroup=l.propertyGroup}function s(o){(!o||!("pv"in o))&&(o=t);var l=1/o.mult,u=o.pv*l,c=new Number(u);return c.value=u,n(c,o,"unidimensional"),function(){return o.k&&o.getValue(),u=o.v*l,c.value!==u&&(c=new Number(u),c.value=u,c[0]=u,n(c,o,"unidimensional")),c}}function i(o){(!o||!("pv"in o))&&(o=e);var l=1/o.mult,u=o.data&&o.data.l||o.pv.length,c=createTypedArray("float32",u),d=createTypedArray("float32",u);return c.value=d,n(c,o,"multidimensional"),function(){o.k&&o.getValue();for(var p=0;p<u;p+=1)d[p]=o.v[p]*l,c[p]=d[p];return c}}function a(){return t}return function(o){return o?o.propType==="unidimensional"?s(o):i(o):a}}(),TransformExpressionInterface=function(){return function(t){function e(o){switch(o){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)});var n,s,i,a;return t.p?a=ExpressionPropertyInterface(t.p):(n=ExpressionPropertyInterface(t.px),s=ExpressionPropertyInterface(t.py),t.pz&&(i=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?a():[n(),s(),i?i():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e}}(),LayerExpressionInterface=function(){function t(c){var d=new Matrix;if(c!==void 0){var p=this._elem.finalTransform.mProp.getValueAtTime(c);p.clone(d)}else{var m=this._elem.finalTransform.mProp;m.applyToMatrix(d)}return d}function e(c,d){var p=this.getMatrix(d);return p.props[12]=0,p.props[13]=0,p.props[14]=0,this.applyPoint(p,c)}function n(c,d){var p=this.getMatrix(d);return this.applyPoint(p,c)}function s(c,d){var p=this.getMatrix(d);return p.props[12]=0,p.props[13]=0,p.props[14]=0,this.invertPoint(p,c)}function i(c,d){var p=this.getMatrix(d);return this.invertPoint(p,c)}function a(c,d){if(this._elem.hierarchy&&this._elem.hierarchy.length){var p,m=this._elem.hierarchy.length;for(p=0;p<m;p+=1)this._elem.hierarchy[p].finalTransform.mProp.applyToMatrix(c)}return c.applyToPointArray(d[0],d[1],d[2]||0)}function o(c,d){if(this._elem.hierarchy&&this._elem.hierarchy.length){var p,m=this._elem.hierarchy.length;for(p=0;p<m;p+=1)this._elem.hierarchy[p].finalTransform.mProp.applyToMatrix(c)}return c.inversePoint(d)}function l(c){var d=new Matrix;if(d.reset(),this._elem.finalTransform.mProp.applyToMatrix(d),this._elem.hierarchy&&this._elem.hierarchy.length){var p,m=this._elem.hierarchy.length;for(p=0;p<m;p+=1)this._elem.hierarchy[p].finalTransform.mProp.applyToMatrix(d);return d.inversePoint(c)}return d.inversePoint(c)}function u(){return[1,1,1,1]}return function(c){var d;function p(x){g.mask=new MaskManagerInterface(x,c)}function m(x){g.effect=x}function g(x){switch(x){case"ADBE Root Vectors Group":case"Contents":case 2:return g.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return d;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return g.effect;case"ADBE Text Properties":return g.textInterface;default:return null}}g.getMatrix=t,g.invertPoint=o,g.applyPoint=a,g.toWorld=n,g.toWorldVec=e,g.fromWorld=i,g.fromWorldVec=s,g.toComp=n,g.fromComp=l,g.sampleImage=u,g.sourceRectAtTime=c.sourceRectAtTime.bind(c),g._elem=c,d=TransformExpressionInterface(c.finalTransform.mProp);var E=getDescriptor(d,"anchorPoint");return Object.defineProperties(g,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(d,"rotation"),scale:getDescriptor(d,"scale"),position:getDescriptor(d,"position"),opacity:getDescriptor(d,"opacity"),anchorPoint:E,anchor_point:E,transform:{get:function(){return d}},active:{get:function(){return c.isInRange}}}),g.startTime=c.data.st,g.index=c.data.ind,g.source=c.data.refId,g.height=c.data.ty===0?c.data.h:100,g.width=c.data.ty===0?c.data.w:100,g.inPoint=c.data.ip/c.comp.globalData.frameRate,g.outPoint=c.data.op/c.comp.globalData.frameRate,g._name=c.data.nm,g.registerMaskInterface=p,g.registerEffectsInterface=m,g}}(),propertyGroupFactory=function(){return function(t,e){return function(n){return n=n===void 0?1:n,n<=0?t:e(n-1)}}}(),PropertyInterface=function(){return function(t,e){var n={_name:t};function s(i){return i=i===void 0?1:i,i<=0?n:e(i-1)}return s}}(),EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(i,a){if(i.effectsManager){var o=[],l=i.data.ef,u,c=i.effectsManager.effectElements.length;for(u=0;u<c;u+=1)o.push(n(l[u],i.effectsManager.effectElements[u],a,i));var d=i.data.ef||[],p=function(g){for(u=0,c=d.length;u<c;){if(g===d[u].nm||g===d[u].mn||g===d[u].ix)return o[u];u+=1}return null};return Object.defineProperty(p,"numProperties",{get:function(){return d.length}}),p}return null}function n(i,a,o,l){function u(g){for(var E=i.ef,x=0,b=E.length;x<b;){if(g===E[x].nm||g===E[x].mn||g===E[x].ix)return E[x].ty===5?d[x]:d[x]();x+=1}throw new Error}var c=propertyGroupFactory(u,o),d=[],p,m=i.ef.length;for(p=0;p<m;p+=1)i.ef[p].ty===5?d.push(n(i.ef[p],a.effectElements[p],a.effectElements[p].propertyGroup,l)):d.push(s(a.effectElements[p],i.ef[p].ty,l,c));return i.mn==="ADBE Color Control"&&Object.defineProperty(u,"color",{get:function(){return d[0]()}}),Object.defineProperties(u,{numProperties:{get:function(){return i.np}},_name:{value:i.nm},propertyGroup:{value:c}}),u.enabled=i.en!==0,u.active=u.enabled,u}function s(i,a,o,l){var u=ExpressionPropertyInterface(i.p);function c(){return a===10?o.comp.compInterface(i.p.v):u()}return i.p.setGroupProperty&&i.p.setGroupProperty(PropertyInterface("",l)),c}return t}(),ShapePathInterface=function(){return function(e,n,s){var i=n.sh;function a(l){return l==="Shape"||l==="shape"||l==="Path"||l==="path"||l==="ADBE Vector Shape"||l===2?a.path:null}var o=propertyGroupFactory(a,s);return i.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(a,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:s}}),a}}(),ShapeExpressionInterface=function(){function t(E,x,b){var S=[],C,T=E?E.length:0;for(C=0;C<T;C+=1)E[C].ty==="gr"?S.push(n(E[C],x[C],b)):E[C].ty==="fl"?S.push(s(E[C],x[C],b)):E[C].ty==="st"?S.push(o(E[C],x[C],b)):E[C].ty==="tm"?S.push(l(E[C],x[C],b)):E[C].ty==="tr"||(E[C].ty==="el"?S.push(c(E[C],x[C],b)):E[C].ty==="sr"?S.push(d(E[C],x[C],b)):E[C].ty==="sh"?S.push(ShapePathInterface(E[C],x[C],b)):E[C].ty==="rc"?S.push(p(E[C],x[C],b)):E[C].ty==="rd"?S.push(m(E[C],x[C],b)):E[C].ty==="rp"?S.push(g(E[C],x[C],b)):E[C].ty==="gf"?S.push(i(E[C],x[C],b)):S.push(a(E[C],x[C])));return S}function e(E,x,b){var S,C=function(D){for(var P=0,O=S.length;P<O;){if(S[P]._name===D||S[P].mn===D||S[P].propertyIndex===D||S[P].ix===D||S[P].ind===D)return S[P];P+=1}return typeof D=="number"?S[D-1]:null};C.propertyGroup=propertyGroupFactory(C,b),S=t(E.it,x.it,C.propertyGroup),C.numProperties=S.length;var T=u(E.it[E.it.length-1],x.it[x.it.length-1],C.propertyGroup);return C.transform=T,C.propertyIndex=E.cix,C._name=E.nm,C}function n(E,x,b){var S=function(D){switch(D){case"ADBE Vectors Group":case"Contents":case 2:return S.content;default:return S.transform}};S.propertyGroup=propertyGroupFactory(S,b);var C=e(E,x,S.propertyGroup),T=u(E.it[E.it.length-1],x.it[x.it.length-1],S.propertyGroup);return S.content=C,S.transform=T,Object.defineProperty(S,"_name",{get:function(){return E.nm}}),S.numProperties=E.np,S.propertyIndex=E.ix,S.nm=E.nm,S.mn=E.mn,S}function s(E,x,b){function S(C){return C==="Color"||C==="color"?S.color:C==="Opacity"||C==="opacity"?S.opacity:null}return Object.defineProperties(S,{color:{get:ExpressionPropertyInterface(x.c)},opacity:{get:ExpressionPropertyInterface(x.o)},_name:{value:E.nm},mn:{value:E.mn}}),x.c.setGroupProperty(PropertyInterface("Color",b)),x.o.setGroupProperty(PropertyInterface("Opacity",b)),S}function i(E,x,b){function S(C){return C==="Start Point"||C==="start point"?S.startPoint:C==="End Point"||C==="end point"?S.endPoint:C==="Opacity"||C==="opacity"?S.opacity:null}return Object.defineProperties(S,{startPoint:{get:ExpressionPropertyInterface(x.s)},endPoint:{get:ExpressionPropertyInterface(x.e)},opacity:{get:ExpressionPropertyInterface(x.o)},type:{get:function(){return"a"}},_name:{value:E.nm},mn:{value:E.mn}}),x.s.setGroupProperty(PropertyInterface("Start Point",b)),x.e.setGroupProperty(PropertyInterface("End Point",b)),x.o.setGroupProperty(PropertyInterface("Opacity",b)),S}function a(){function E(){return null}return E}function o(E,x,b){var S=propertyGroupFactory(O,b),C=propertyGroupFactory(P,S);function T(B){Object.defineProperty(P,E.d[B].nm,{get:ExpressionPropertyInterface(x.d.dataProps[B].p)})}var I,D=E.d?E.d.length:0,P={};for(I=0;I<D;I+=1)T(I),x.d.dataProps[I].p.setGroupProperty(C);function O(B){return B==="Color"||B==="color"?O.color:B==="Opacity"||B==="opacity"?O.opacity:B==="Stroke Width"||B==="stroke width"?O.strokeWidth:null}return Object.defineProperties(O,{color:{get:ExpressionPropertyInterface(x.c)},opacity:{get:ExpressionPropertyInterface(x.o)},strokeWidth:{get:ExpressionPropertyInterface(x.w)},dash:{get:function(){return P}},_name:{value:E.nm},mn:{value:E.mn}}),x.c.setGroupProperty(PropertyInterface("Color",S)),x.o.setGroupProperty(PropertyInterface("Opacity",S)),x.w.setGroupProperty(PropertyInterface("Stroke Width",S)),O}function l(E,x,b){function S(T){return T===E.e.ix||T==="End"||T==="end"?S.end:T===E.s.ix?S.start:T===E.o.ix?S.offset:null}var C=propertyGroupFactory(S,b);return S.propertyIndex=E.ix,x.s.setGroupProperty(PropertyInterface("Start",C)),x.e.setGroupProperty(PropertyInterface("End",C)),x.o.setGroupProperty(PropertyInterface("Offset",C)),S.propertyIndex=E.ix,S.propertyGroup=b,Object.defineProperties(S,{start:{get:ExpressionPropertyInterface(x.s)},end:{get:ExpressionPropertyInterface(x.e)},offset:{get:ExpressionPropertyInterface(x.o)},_name:{value:E.nm}}),S.mn=E.mn,S}function u(E,x,b){function S(T){return E.a.ix===T||T==="Anchor Point"?S.anchorPoint:E.o.ix===T||T==="Opacity"?S.opacity:E.p.ix===T||T==="Position"?S.position:E.r.ix===T||T==="Rotation"||T==="ADBE Vector Rotation"?S.rotation:E.s.ix===T||T==="Scale"?S.scale:E.sk&&E.sk.ix===T||T==="Skew"?S.skew:E.sa&&E.sa.ix===T||T==="Skew Axis"?S.skewAxis:null}var C=propertyGroupFactory(S,b);return x.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",C)),x.transform.mProps.p.setGroupProperty(PropertyInterface("Position",C)),x.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",C)),x.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",C)),x.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",C)),x.transform.mProps.sk&&(x.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",C)),x.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",C))),x.transform.op.setGroupProperty(PropertyInterface("Opacity",C)),Object.defineProperties(S,{opacity:{get:ExpressionPropertyInterface(x.transform.mProps.o)},position:{get:ExpressionPropertyInterface(x.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(x.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(x.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(x.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(x.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(x.transform.mProps.sa)},_name:{value:E.nm}}),S.ty="tr",S.mn=E.mn,S.propertyGroup=b,S}function c(E,x,b){function S(I){return E.p.ix===I?S.position:E.s.ix===I?S.size:null}var C=propertyGroupFactory(S,b);S.propertyIndex=E.ix;var T=x.sh.ty==="tm"?x.sh.prop:x.sh;return T.s.setGroupProperty(PropertyInterface("Size",C)),T.p.setGroupProperty(PropertyInterface("Position",C)),Object.defineProperties(S,{size:{get:ExpressionPropertyInterface(T.s)},position:{get:ExpressionPropertyInterface(T.p)},_name:{value:E.nm}}),S.mn=E.mn,S}function d(E,x,b){function S(I){return E.p.ix===I?S.position:E.r.ix===I?S.rotation:E.pt.ix===I?S.points:E.or.ix===I||I==="ADBE Vector Star Outer Radius"?S.outerRadius:E.os.ix===I?S.outerRoundness:E.ir&&(E.ir.ix===I||I==="ADBE Vector Star Inner Radius")?S.innerRadius:E.is&&E.is.ix===I?S.innerRoundness:null}var C=propertyGroupFactory(S,b),T=x.sh.ty==="tm"?x.sh.prop:x.sh;return S.propertyIndex=E.ix,T.or.setGroupProperty(PropertyInterface("Outer Radius",C)),T.os.setGroupProperty(PropertyInterface("Outer Roundness",C)),T.pt.setGroupProperty(PropertyInterface("Points",C)),T.p.setGroupProperty(PropertyInterface("Position",C)),T.r.setGroupProperty(PropertyInterface("Rotation",C)),E.ir&&(T.ir.setGroupProperty(PropertyInterface("Inner Radius",C)),T.is.setGroupProperty(PropertyInterface("Inner Roundness",C))),Object.defineProperties(S,{position:{get:ExpressionPropertyInterface(T.p)},rotation:{get:ExpressionPropertyInterface(T.r)},points:{get:ExpressionPropertyInterface(T.pt)},outerRadius:{get:ExpressionPropertyInterface(T.or)},outerRoundness:{get:ExpressionPropertyInterface(T.os)},innerRadius:{get:ExpressionPropertyInterface(T.ir)},innerRoundness:{get:ExpressionPropertyInterface(T.is)},_name:{value:E.nm}}),S.mn=E.mn,S}function p(E,x,b){function S(I){return E.p.ix===I?S.position:E.r.ix===I?S.roundness:E.s.ix===I||I==="Size"||I==="ADBE Vector Rect Size"?S.size:null}var C=propertyGroupFactory(S,b),T=x.sh.ty==="tm"?x.sh.prop:x.sh;return S.propertyIndex=E.ix,T.p.setGroupProperty(PropertyInterface("Position",C)),T.s.setGroupProperty(PropertyInterface("Size",C)),T.r.setGroupProperty(PropertyInterface("Rotation",C)),Object.defineProperties(S,{position:{get:ExpressionPropertyInterface(T.p)},roundness:{get:ExpressionPropertyInterface(T.r)},size:{get:ExpressionPropertyInterface(T.s)},_name:{value:E.nm}}),S.mn=E.mn,S}function m(E,x,b){function S(I){return E.r.ix===I||I==="Round Corners 1"?S.radius:null}var C=propertyGroupFactory(S,b),T=x;return S.propertyIndex=E.ix,T.rd.setGroupProperty(PropertyInterface("Radius",C)),Object.defineProperties(S,{radius:{get:ExpressionPropertyInterface(T.rd)},_name:{value:E.nm}}),S.mn=E.mn,S}function g(E,x,b){function S(I){return E.c.ix===I||I==="Copies"?S.copies:E.o.ix===I||I==="Offset"?S.offset:null}var C=propertyGroupFactory(S,b),T=x;return S.propertyIndex=E.ix,T.c.setGroupProperty(PropertyInterface("Copies",C)),T.o.setGroupProperty(PropertyInterface("Offset",C)),Object.defineProperties(S,{copies:{get:ExpressionPropertyInterface(T.c)},offset:{get:ExpressionPropertyInterface(T.o)},_name:{value:E.nm}}),S.mn=E.mn,S}return function(E,x,b){var S;function C(I){if(typeof I=="number")return I=I===void 0?1:I,I===0?b:S[I-1];for(var D=0,P=S.length;D<P;){if(S[D]._name===I)return S[D];D+=1}return null}function T(){return b}return C.propertyGroup=propertyGroupFactory(C,T),S=t(E,x,C.propertyGroup),C.numProperties=S.length,C._name="Contents",C}}(),TextExpressionInterface=function(){return function(t){var e;function n(s){switch(s){case"ADBE Text Document":return n.sourceText;default:return null}}return Object.defineProperty(n,"sourceText",{get:function(){t.textProperty.getValue();var i=t.textProperty.currentData.t;return(!e||i!==e.value)&&(e=new String(i),e.value=i||new String(i),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),n}}();function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var FootageInterface=function(){var t=function(s){var i="",a=s.getFootageData();function o(){return i="",a=s.getFootageData(),l}function l(u){if(a[u])return i=u,a=a[u],_typeof(a)==="object"?l:a;var c=u.indexOf(i);if(c!==-1){var d=parseInt(u.substr(c+i.length),10);return a=a[d],_typeof(a)==="object"?l:a}return""}return o},e=function(s){function i(a){return a==="Outline"?i.outlineInterface():null}return i._name="Outline",i.outlineInterface=t(s),i};return function(n){function s(i){return i==="Data"?s.dataInterface:null}return s._name="Data",s.dataInterface=e(n),s}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers=function(){function t(o,l,u){l.x&&(u.k=!0,u.x=!0,u.initiateExpression=ExpressionManager.initiateExpression,u.effectsSequence.push(u.initiateExpression(o,l,u).bind(u)))}function e(o){return o*=this.elem.globalData.frameRate,o-=this.offsetTime,o!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value}function n(o){var l=-.01,u=this.getValueAtTime(o),c=this.getValueAtTime(o+l),d=0;if(u.length){var p;for(p=0;p<u.length;p+=1)d+=Math.pow(c[p]-u[p],2);d=Math.sqrt(d)*100}else d=0;return d}function s(o){if(this.vel!==void 0)return this.vel;var l=-.001,u=this.getValueAtTime(o),c=this.getValueAtTime(o+l),d;if(u.length){d=createTypedArray("float32",u.length);var p;for(p=0;p<u.length;p+=1)d[p]=(c[p]-u[p])/l}else d=(c-u)/l;return d}function i(){return this.pv}function a(o){this.propertyGroup=o}return{searchExpressions:t,getSpeedAtTime:n,getVelocityAtTime:s,getValueAtTime:e,getStaticValueAtTime:i,setGroupProperty:a}}();function addPropertyDecorator(){function t(m,g,E){if(!this.k||!this.keyframes)return this.pv;m=m?m.toLowerCase():"";var x=this.comp.renderedFrame,b=this.keyframes,S=b[b.length-1].t;if(x<=S)return this.pv;var C,T;E?(g?C=Math.abs(S-this.elem.comp.globalData.frameRate*g):C=Math.max(0,S-this.elem.data.ip),T=S-C):((!g||g>b.length-1)&&(g=b.length-1),T=b[b.length-1-g].t,C=S-T);var I,D,P;if(m==="pingpong"){var O=Math.floor((x-T)/C);if(O%2!==0)return this.getValueAtTime((C-(x-T)%C+T)/this.comp.globalData.frameRate,0)}else if(m==="offset"){var B=this.getValueAtTime(T/this.comp.globalData.frameRate,0),F=this.getValueAtTime(S/this.comp.globalData.frameRate,0),H=this.getValueAtTime(((x-T)%C+T)/this.comp.globalData.frameRate,0),Q=Math.floor((x-T)/C);if(this.pv.length){for(P=new Array(B.length),D=P.length,I=0;I<D;I+=1)P[I]=(F[I]-B[I])*Q+H[I];return P}return(F-B)*Q+H}else if(m==="continue"){var Z=this.getValueAtTime(S/this.comp.globalData.frameRate,0),ne=this.getValueAtTime((S-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(P=new Array(Z.length),D=P.length,I=0;I<D;I+=1)P[I]=Z[I]+(Z[I]-ne[I])*((x-S)/this.comp.globalData.frameRate)/5e-4;return P}return Z+(Z-ne)*((x-S)/.001)}return this.getValueAtTime(((x-T)%C+T)/this.comp.globalData.frameRate,0)}function e(m,g,E){if(!this.k)return this.pv;m=m?m.toLowerCase():"";var x=this.comp.renderedFrame,b=this.keyframes,S=b[0].t;if(x>=S)return this.pv;var C,T;E?(g?C=Math.abs(this.elem.comp.globalData.frameRate*g):C=Math.max(0,this.elem.data.op-S),T=S+C):((!g||g>b.length-1)&&(g=b.length-1),T=b[g].t,C=T-S);var I,D,P;if(m==="pingpong"){var O=Math.floor((S-x)/C);if(O%2===0)return this.getValueAtTime(((S-x)%C+S)/this.comp.globalData.frameRate,0)}else if(m==="offset"){var B=this.getValueAtTime(S/this.comp.globalData.frameRate,0),F=this.getValueAtTime(T/this.comp.globalData.frameRate,0),H=this.getValueAtTime((C-(S-x)%C+S)/this.comp.globalData.frameRate,0),Q=Math.floor((S-x)/C)+1;if(this.pv.length){for(P=new Array(B.length),D=P.length,I=0;I<D;I+=1)P[I]=H[I]-(F[I]-B[I])*Q;return P}return H-(F-B)*Q}else if(m==="continue"){var Z=this.getValueAtTime(S/this.comp.globalData.frameRate,0),ne=this.getValueAtTime((S+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(P=new Array(Z.length),D=P.length,I=0;I<D;I+=1)P[I]=Z[I]+(Z[I]-ne[I])*(S-x)/.001;return P}return Z+(Z-ne)*(S-x)/.001}return this.getValueAtTime((C-((S-x)%C+S))/this.comp.globalData.frameRate,0)}function n(m,g){if(!this.k)return this.pv;if(m=(m||.4)*.5,g=Math.floor(g||5),g<=1)return this.pv;var E=this.comp.renderedFrame/this.comp.globalData.frameRate,x=E-m,b=E+m,S=g>1?(b-x)/(g-1):1,C=0,T=0,I;this.pv.length?I=createTypedArray("float32",this.pv.length):I=0;for(var D;C<g;){if(D=this.getValueAtTime(x+C*S),this.pv.length)for(T=0;T<this.pv.length;T+=1)I[T]+=D[T];else I+=D;C+=1}if(this.pv.length)for(T=0;T<this.pv.length;T+=1)I[T]/=g;else I/=g;return I}function s(m){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var g=this._transformCachingAtTime.v;if(g.cloneFromProps(this.pre.props),this.appliedTransformations<1){var E=this.a.getValueAtTime(m);g.translate(-E[0]*this.a.mult,-E[1]*this.a.mult,E[2]*this.a.mult)}if(this.appliedTransformations<2){var x=this.s.getValueAtTime(m);g.scale(x[0]*this.s.mult,x[1]*this.s.mult,x[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var b=this.sk.getValueAtTime(m),S=this.sa.getValueAtTime(m);g.skewFromAxis(-b*this.sk.mult,S*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var C=this.r.getValueAtTime(m);g.rotate(-C*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var T=this.rz.getValueAtTime(m),I=this.ry.getValueAtTime(m),D=this.rx.getValueAtTime(m),P=this.or.getValueAtTime(m);g.rotateZ(-T*this.rz.mult).rotateY(I*this.ry.mult).rotateX(D*this.rx.mult).rotateZ(-P[2]*this.or.mult).rotateY(P[1]*this.or.mult).rotateX(P[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var O=this.px.getValueAtTime(m),B=this.py.getValueAtTime(m);if(this.data.p.z){var F=this.pz.getValueAtTime(m);g.translate(O*this.px.mult,B*this.py.mult,-F*this.pz.mult)}else g.translate(O*this.px.mult,B*this.py.mult,0)}else{var H=this.p.getValueAtTime(m);g.translate(H[0]*this.p.mult,H[1]*this.p.mult,-H[2]*this.p.mult)}return g}function i(){return this.v.clone(new Matrix)}var a=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(m,g,E){var x=a(m,g,E);return x.dynamicProperties.length?x.getValueAtTime=s.bind(x):x.getValueAtTime=i.bind(x),x.setGroupProperty=expressionHelpers.setGroupProperty,x};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(m,g,E,x,b){var S=o(m,g,E,x,b);S.kf?S.getValueAtTime=expressionHelpers.getValueAtTime.bind(S):S.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(S),S.setGroupProperty=expressionHelpers.setGroupProperty,S.loopOut=t,S.loopIn=e,S.smooth=n,S.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(S),S.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(S),S.numKeys=g.a===1?g.k.length:0,S.propertyIndex=g.ix;var C=0;return E!==0&&(C=createTypedArray("float32",g.a===1?g.k[0].s.length:g.k.length)),S._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:C},expressionHelpers.searchExpressions(m,g,S),S.k&&b.addDynamicProperty(S),S};function l(m){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),m*=this.elem.globalData.frameRate,m-=this.offsetTime,m!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<m?this._caching.lastIndex:0,this._cachingAtTime.lastTime=m,this.interpolateShape(m,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var u=ShapePropertyFactory.getConstructorFunction(),c=ShapePropertyFactory.getKeyframedConstructorFunction();function d(){}d.prototype={vertices:function(g,E){this.k&&this.getValue();var x=this.v;E!==void 0&&(x=this.getValueAtTime(E,0));var b,S=x._length,C=x[g],T=x.v,I=createSizedArray(S);for(b=0;b<S;b+=1)g==="i"||g==="o"?I[b]=[C[b][0]-T[b][0],C[b][1]-T[b][1]]:I[b]=[C[b][0],C[b][1]];return I},points:function(g){return this.vertices("v",g)},inTangents:function(g){return this.vertices("i",g)},outTangents:function(g){return this.vertices("o",g)},isClosed:function(){return this.v.c},pointOnPath:function(g,E){var x=this.v;E!==void 0&&(x=this.getValueAtTime(E,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(x));for(var b=this._segmentsLength,S=b.lengths,C=b.totalLength*g,T=0,I=S.length,D=0,P;T<I;){if(D+S[T].addedLength>C){var O=T,B=x.c&&T===I-1?0:T+1,F=(C-D)/S[T].addedLength;P=bez.getPointInSegment(x.v[O],x.v[B],x.o[O],x.i[B],F,S[T]);break}else D+=S[T].addedLength;T+=1}return P||(P=x.c?[x.v[0][0],x.v[0][1]]:[x.v[x._length-1][0],x.v[x._length-1][1]]),P},vectorOnPath:function(g,E,x){g==1?g=this.v.c:g==0&&(g=.999);var b=this.pointOnPath(g,E),S=this.pointOnPath(g+.001,E),C=S[0]-b[0],T=S[1]-b[1],I=Math.sqrt(Math.pow(C,2)+Math.pow(T,2));if(I===0)return[0,0];var D=x==="tangent"?[C/I,T/I]:[-T/I,C/I];return D},tangentOnPath:function(g,E){return this.vectorOnPath(g,E,"tangent")},normalOnPath:function(g,E){return this.vectorOnPath(g,E,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([d],u),extendPrototype([d],c),c.prototype.getValueAtTime=l,c.prototype.initiateExpression=ExpressionManager.initiateExpression;var p=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(m,g,E,x,b){var S=p(m,g,E,x,b);return S.propertyIndex=g.ix,S.lock=!1,E===3?expressionHelpers.searchExpressions(m,g.pt,S):E===4&&expressionHelpers.searchExpressions(m,g.ks,S),S.k&&m.addDynamicProperty(S),S}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function t(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,n){var s=this.calculateExpression(n);if(e.t!==s){var i={};return this.copyData(i,e),i.t=s.toString(),i.__complete=!1,i}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),n=this.searchExpressions();return this.kf=e||n,this.kf},TextProperty.prototype.searchExpressions=t}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function t(e,n){var s=createNS("feMerge");s.setAttribute("result",e);var i,a;for(a=0;a<n.length;a+=1)i=createNS("feMergeNode"),i.setAttribute("in",n[a]),s.appendChild(i),s.appendChild(i);return s}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,n,s,i){this.filterManager=e;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=a,a.setAttribute("result",s+"_tint_1"),t.appendChild(a),a=createNS("feColorMatrix"),a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",s+"_tint_2"),t.appendChild(a),this.matrixFilter=a;var o=this.createMergeNode(s,[i,s+"_tint_1",s+"_tint_2"]);t.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+s+" 0"),this.matrixFilter.setAttribute("values",n[0]-e[0]+" 0 0 0 "+e[0]+" "+(n[1]-e[1])+" 0 0 0 "+e[1]+" "+(n[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}};function SVGFillFilter(t,e,n,s){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result",s),t.appendChild(i),this.matrixFilter=i}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}};function SVGStrokeEffect(t,e,n){this.initialized=!1,this.filterManager=e,this.elem=n,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,n,s,i;for(this.filterManager.effectElements[1].p.v===1?(i=this.elem.maskManager.masksProperties.length,s=0):(s=this.filterManager.effectElements[0].p.v-1,i=s+1),n=createNS("g"),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-dashoffset",1),s;s<i;s+=1)e=createNS("path"),n.appendChild(e),this.paths.push({p:e,m:s});if(this.filterManager.effectElements[10].p.v===3){var a=createNS("mask"),o=createElementID();a.setAttribute("id",o),a.setAttribute("mask-type","alpha"),a.appendChild(n),this.elem.globalData.defs.appendChild(a);var l=createNS("g");for(l.setAttribute("mask","url("+getLocationHref()+"#"+o+")");t[0];)l.appendChild(t[0]);this.elem.layerElement.appendChild(l),this.masker=a,n.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(t=this.elem.layerElement.children||this.elem.layerElement.childNodes;t.length;)this.elem.layerElement.removeChild(t[0]);this.elem.layerElement.appendChild(n),this.elem.layerElement.removeAttribute("mask"),n.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=n},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,n=this.paths.length,s,i;for(e=0;e<n;e+=1)if(this.paths[e].m!==-1&&(s=this.elem.maskManager.viewData[this.paths[e].m],i=this.paths[e].p,(t||this.filterManager._mdf||s.prop._mdf)&&i.setAttribute("d",s.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||s.prop._mdf)){var a;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,l=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,u=i.getTotalLength();a="0 0 0 "+u*o+" ";var c=u*(l-o),d=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,p=Math.floor(c/d),m;for(m=0;m<p;m+=1)a+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";a+="0 "+u*10+" 0 0"}else a="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;i.setAttribute("stroke-dasharray",a)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(t||this.filterManager.effectElements[3].p._mdf)){var g=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(g[0]*255)+","+bmFloor(g[1]*255)+","+bmFloor(g[2]*255)+")")}};function SVGTritoneFilter(t,e,n,s){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(i);var a=createNS("feComponentTransfer");a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",s),this.matrixFilter=a;var o=createNS("feFuncR");o.setAttribute("type","table"),a.appendChild(o),this.feFuncR=o;var l=createNS("feFuncG");l.setAttribute("type","table"),a.appendChild(l),this.feFuncG=l;var u=createNS("feFuncB");u.setAttribute("type","table"),a.appendChild(u),this.feFuncB=u,t.appendChild(a)}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v,i=s[0]+" "+n[0]+" "+e[0],a=s[1]+" "+n[1]+" "+e[1],o=s[2]+" "+n[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",a),this.feFuncB.setAttribute("tableValues",o)}};function SVGProLevelsFilter(t,e,n,s){this.filterManager=e;var i=this.filterManager.effectElements,a=createNS("feComponentTransfer");(i[10].p.k||i[10].p.v!==0||i[11].p.k||i[11].p.v!==1||i[12].p.k||i[12].p.v!==1||i[13].p.k||i[13].p.v!==0||i[14].p.k||i[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",a)),(i[17].p.k||i[17].p.v!==0||i[18].p.k||i[18].p.v!==1||i[19].p.k||i[19].p.v!==1||i[20].p.k||i[20].p.v!==0||i[21].p.k||i[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",a)),(i[24].p.k||i[24].p.v!==0||i[25].p.k||i[25].p.v!==1||i[26].p.k||i[26].p.v!==1||i[27].p.k||i[27].p.v!==0||i[28].p.k||i[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",a)),(i[31].p.k||i[31].p.v!==0||i[32].p.k||i[32].p.v!==1||i[33].p.k||i[33].p.v!==1||i[34].p.k||i[34].p.v!==0||i[35].p.k||i[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",a)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(a.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(a)),(i[3].p.k||i[3].p.v!==0||i[4].p.k||i[4].p.v!==1||i[5].p.k||i[5].p.v!==1||i[6].p.k||i[6].p.v!==0||i[7].p.k||i[7].p.v!==1)&&(a=createNS("feComponentTransfer"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("result",s),t.appendChild(a),this.feFuncRComposed=this.createFeFunc("feFuncR",a),this.feFuncGComposed=this.createFeFunc("feFuncG",a),this.feFuncBComposed=this.createFeFunc("feFuncB",a))}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var n=createNS(t);return n.setAttribute("type","table"),e.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(t,e,n,s,i){for(var a=0,o=256,l,u=Math.min(t,e),c=Math.max(t,e),d=Array.call(null,{length:o}),p,m=0,g=i-s,E=e-t;a<=256;)l=a/256,l<=u?p=E<0?i:s:l>=c?p=E<0?s:i:p=s+g*Math.pow((l-t)/E,1/n),d[m]=p,m+=1,a+=256/(o-1);return d.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,n=this.filterManager.effectElements;this.feFuncRComposed&&(t||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(e=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(e=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(e=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(e=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(e=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(t,e,n,s,i){var a=e.container.globalData.renderConfig.filterSize,o=e.data.fs||a;t.setAttribute("x",o.x||a.x),t.setAttribute("y",o.y||a.y),t.setAttribute("width",o.width||a.width),t.setAttribute("height",o.height||a.height),this.filterManager=e;var l=createNS("feGaussianBlur");l.setAttribute("in","SourceAlpha"),l.setAttribute("result",s+"_drop_shadow_1"),l.setAttribute("stdDeviation","0"),this.feGaussianBlur=l,t.appendChild(l);var u=createNS("feOffset");u.setAttribute("dx","25"),u.setAttribute("dy","0"),u.setAttribute("in",s+"_drop_shadow_1"),u.setAttribute("result",s+"_drop_shadow_2"),this.feOffset=u,t.appendChild(u);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",s+"_drop_shadow_3"),this.feFlood=c,t.appendChild(c);var d=createNS("feComposite");d.setAttribute("in",s+"_drop_shadow_3"),d.setAttribute("in2",s+"_drop_shadow_2"),d.setAttribute("operator","in"),d.setAttribute("result",s+"_drop_shadow_4"),t.appendChild(d);var p=this.createMergeNode(s,[s+"_drop_shadow_4",i]);t.appendChild(p)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,s=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(s),a=n*Math.sin(s);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",a)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,n){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,n=_svgMatteSymbols.length;e<n;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var n=t.layerElement.parentNode;if(n){for(var s=n.children,i=0,a=s.length;i<a&&s[i]!==t.layerElement;)i+=1;var o;i<=a-2&&(o=s[i+1]);var l=createNS("use");l.setAttribute("href","#"+e),o?n.insertBefore(l,o):n.appendChild(l)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var n=createElementID(),s=createNS("mask");s.setAttribute("id",e.layerId),s.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var i=t.globalData.defs;i.appendChild(s);var a=createNS("symbol");a.setAttribute("id",n),this.replaceInParent(e,n),a.appendChild(e.layerElement),i.appendChild(a);var o=createNS("use");o.setAttribute("href","#"+n),s.appendChild(o),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,n=0,s=e.length;n<s;)e[n]&&e[n].data.ind===t&&this.setElementAsMask(this.elem,e[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(t,e,n,s){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var i=createNS("feGaussianBlur");i.setAttribute("result",s),t.appendChild(i),this.feGaussianBlur=i}SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3,n=this.filterManager.effectElements[0].p.v*e,s=this.filterManager.effectElements[1].p.v,i=s==3?0:n,a=s==2?0:n;this.feGaussianBlur.setAttribute("stdDeviation",i+" "+a);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}};function TransformEffect(){}TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,n=e[0].p.v,s=e[1].p.v,i=e[2].p.v===1,a=e[3].p.v,o=i?a:e[4].p.v,l=e[5].p.v,u=e[6].p.v,c=e[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(o*.01,a*.01,1),this.matrix.rotate(-c*degToRads),this.matrix.skewFromAxis(-l*degToRads,(u+90)*degToRads),this.matrix.translate(s[0],s[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(t,e){this.init(e)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(t){this.init(t)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,i,a,o,l=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(s=a.call(n)).done)&&(l.push(s.value),l.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(s){_defineProperty(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function _defineProperty(t,e,n){return e=_toPropertyKey(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _objectWithoutProperties(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(t,e)}}function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:String(e)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie$1=function t(e,n){var s=e.animationData,i=e.loop,a=e.autoplay,o=e.initialSegment,l=e.onComplete,u=e.onLoopComplete,c=e.onEnterFrame,d=e.onSegmentStart,p=e.onConfigReady,m=e.onDataReady,g=e.onDataFailed,E=e.onLoadedImages,x=e.onDOMLoaded,b=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var S=_objectWithoutProperties(e,_excluded$1),C=reactExports.useState(!1),T=_slicedToArray(C,2),I=T[0],D=T[1],P=reactExports.useRef(),O=reactExports.useRef(null),B=function(){var ae;(ae=P.current)===null||ae===void 0||ae.play()},F=function(){var ae;(ae=P.current)===null||ae===void 0||ae.stop()},H=function(){var ae;(ae=P.current)===null||ae===void 0||ae.pause()},Q=function(ae){var ce;(ce=P.current)===null||ce===void 0||ce.setSpeed(ae)},Z=function(ae,ce){var he;(he=P.current)===null||he===void 0||he.goToAndPlay(ae,ce)},ne=function(ae,ce){var he;(he=P.current)===null||he===void 0||he.goToAndStop(ae,ce)},re=function(ae){var ce;(ce=P.current)===null||ce===void 0||ce.setDirection(ae)},se=function(ae,ce){var he;(he=P.current)===null||he===void 0||he.playSegments(ae,ce)},G=function(ae){var ce;(ce=P.current)===null||ce===void 0||ce.setSubframe(ae)},K=function(ae){var ce;return(ce=P.current)===null||ce===void 0?void 0:ce.getDuration(ae)},M=function(){var ae;(ae=P.current)===null||ae===void 0||ae.destroy(),P.current=void 0},W=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce;if(O.current){(ce=P.current)===null||ce===void 0||ce.destroy();var he=_objectSpread2(_objectSpread2(_objectSpread2({},e),ae),{},{container:O.current});return P.current=lottie.loadAnimation(he),D(!!P.current),function(){var fe;(fe=P.current)===null||fe===void 0||fe.destroy(),P.current=void 0}}};reactExports.useEffect(function(){var z=W();return function(){return z?.()}},[s,i]),reactExports.useEffect(function(){P.current&&(P.current.autoplay=!!a)},[a]),reactExports.useEffect(function(){if(P.current){if(!o){P.current.resetSegments(!0);return}!Array.isArray(o)||!o.length||((P.current.currentRawFrame<o[0]||P.current.currentRawFrame>o[1])&&(P.current.currentRawFrame=o[0]),P.current.setSegment(o[0],o[1]))}},[o]),reactExports.useEffect(function(){var z=[{name:"complete",handler:l},{name:"loopComplete",handler:u},{name:"enterFrame",handler:c},{name:"segmentStart",handler:d},{name:"config_ready",handler:p},{name:"data_ready",handler:m},{name:"data_failed",handler:g},{name:"loaded_images",handler:E},{name:"DOMLoaded",handler:x},{name:"destroy",handler:b}],ae=z.filter(function(he){return he.handler!=null});if(ae.length){var ce=ae.map(function(he){var fe;return(fe=P.current)===null||fe===void 0||fe.addEventListener(he.name,he.handler),function(){var Ce;(Ce=P.current)===null||Ce===void 0||Ce.removeEventListener(he.name,he.handler)}});return function(){ce.forEach(function(he){return he()})}}},[l,u,c,d,p,m,g,E,x,b]);var ee=React$1.createElement("div",_objectSpread2({style:n,ref:O},S));return{View:ee,play:B,stop:F,pause:H,setSpeed:Q,goToAndStop:ne,goToAndPlay:Z,setDirection:re,playSegments:se,setSubframe:G,getDuration:K,destroy:M,animationContainerRef:O,animationLoaded:I,animationItem:P.current}};function getContainerVisibility(t){var e=t.getBoundingClientRect(),n=e.top,s=e.height,i=window.innerHeight-n,a=window.innerHeight+s;return i/a}function getContainerCursorPosition(t,e,n){var s=t.getBoundingClientRect(),i=s.top,a=s.left,o=s.width,l=s.height,u=(e-a)/o,c=(n-i)/l;return{x:u,y:c}}var useInitInteractivity=function t(e){var n=e.wrapperRef,s=e.animationItem,i=e.mode,a=e.actions;reactExports.useEffect(function(){var o=n.current;if(!(!o||!s||!a.length)){s.stop();var l=function(){var d=null,p=function(){var g=getContainerVisibility(o),E=a.find(function(b){var S=b.visibility;return S&&g>=S[0]&&g<=S[1]});if(E){if(E.type==="seek"&&E.visibility&&E.frames.length===2){var x=E.frames[0]+Math.ceil((g-E.visibility[0])/(E.visibility[1]-E.visibility[0])*E.frames[1]);//! goToAndStop must be relative to the start of the current segment
s.goToAndStop(x-s.firstFrame-1,!0)}E.type==="loop"&&(d===null||d!==E.frames||s.isPaused)&&(s.playSegments(E.frames,!0),d=E.frames),E.type==="play"&&s.isPaused&&(s.resetSegments(!0),s.play()),E.type==="stop"&&s.goToAndStop(E.frames[0]-s.firstFrame-1,!0)}};return document.addEventListener("scroll",p),function(){document.removeEventListener("scroll",p)}},u=function(){var d=function(E,x){var b=E,S=x;if(b!==-1&&S!==-1){var C=getContainerCursorPosition(o,b,S);b=C.x,S=C.y}var T=a.find(function(P){var O=P.position;return O&&Array.isArray(O.x)&&Array.isArray(O.y)?b>=O.x[0]&&b<=O.x[1]&&S>=O.y[0]&&S<=O.y[1]:O&&!Number.isNaN(O.x)&&!Number.isNaN(O.y)?b===O.x&&S===O.y:!1});if(T){if(T.type==="seek"&&T.position&&Array.isArray(T.position.x)&&Array.isArray(T.position.y)&&T.frames.length===2){var I=(b-T.position.x[0])/(T.position.x[1]-T.position.x[0]),D=(S-T.position.y[0])/(T.position.y[1]-T.position.y[0]);s.playSegments(T.frames,!0),s.goToAndStop(Math.ceil((I+D)/2*(T.frames[1]-T.frames[0])),!0)}T.type==="loop"&&s.playSegments(T.frames,!0),T.type==="play"&&(s.isPaused&&s.resetSegments(!1),s.playSegments(T.frames)),T.type==="stop"&&s.goToAndStop(T.frames[0],!0)}},p=function(E){d(E.clientX,E.clientY)},m=function(){d(-1,-1)};return o.addEventListener("mousemove",p),o.addEventListener("mouseout",m),function(){o.removeEventListener("mousemove",p),o.removeEventListener("mouseout",m)}};switch(i){case"scroll":return l();case"cursor":return u()}}},[i,s])},useLottieInteractivity=function t(e){var n=e.actions,s=e.mode,i=e.lottieObj,a=i.animationItem,o=i.View,l=i.animationContainerRef;return useInitInteractivity({actions:n,animationItem:a,mode:s,wrapperRef:l}),o},_excluded=["style","interactivity"],Lottie=function t(e){var n,s,i,a=e.style,o=e.interactivity,l=_objectWithoutProperties(e,_excluded),u=useLottie$1(l,a),c=u.View,d=u.play,p=u.stop,m=u.pause,g=u.setSpeed,E=u.goToAndStop,x=u.goToAndPlay,b=u.setDirection,S=u.playSegments,C=u.setSubframe,T=u.getDuration,I=u.destroy,D=u.animationContainerRef,P=u.animationLoaded,O=u.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:d,stop:p,pause:m,setSpeed:g,goToAndPlay:x,goToAndStop:E,setDirection:b,playSegments:S,setSubframe:C,getDuration:T,destroy:I,animationContainerRef:D,animationLoaded:P,animationItem:O})},[(n=e.lottieRef)===null||n===void 0?void 0:n.current]),useLottieInteractivity({lottieObj:{View:c,play:d,stop:p,pause:m,setSpeed:g,goToAndStop:E,goToAndPlay:x,setDirection:b,playSegments:S,setSubframe:C,getDuration:T,destroy:I,animationContainerRef:D,animationLoaded:P,animationItem:O},actions:(s=o?.actions)!==null&&s!==void 0?s:[],mode:(i=o?.mode)!==null&&i!==void 0?i:"scroll"})},window_1,hasRequiredWindow;function requireWindow(){if(hasRequiredWindow)return window_1;hasRequiredWindow=1;var t;return typeof window<"u"?t=window:typeof commonjsGlobal<"u"?t=commonjsGlobal:typeof self<"u"?t=self:t={},window_1=t,window_1}var windowExports=requireWindow();const window$1=getDefaultExportFromCjs(windowExports);var document_1,hasRequiredDocument;function requireDocument(){if(hasRequiredDocument)return document_1;hasRequiredDocument=1;var t=typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:{},e=require$$0,n;return typeof document<"u"?n=document:(n=t["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=t["__GLOBAL_DOCUMENT_CACHE@4"]=e)),document_1=n,document_1}var documentExports=requireDocument();const document$1=getDefaultExportFromCjs(documentExports);var lib$1={exports:{}},_extends$1={exports:{}},hasRequired_extends;function require_extends(){return hasRequired_extends||(hasRequired_extends=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)({}).hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(_extends$1)),_extends$1.exports}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1,isFunction_1=e;var t=Object.prototype.toString;function e(n){if(!n)return!1;var s=t.call(n);return s==="[object Function]"||typeof n=="function"&&s!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}return isFunction_1}var interceptors,hasRequiredInterceptors;function requireInterceptors(){if(hasRequiredInterceptors)return interceptors;hasRequiredInterceptors=1;function t(i,a){var o=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(o)return(o=o.call(i)).next.bind(o);if(Array.isArray(i)||(o=e(i))||a){o&&(i=o);var l=0;return function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(i,a){if(i){if(typeof i=="string")return n(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(i,a)}}function n(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,l=new Array(a);o<a;o++)l[o]=i[o];return l}var s=function(){function i(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var a=i.prototype;return a.getIsEnabled=function(){return this.enabled_},a.enable=function(){this.enabled_=!0},a.disable=function(){this.enabled_=!1},a.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},a.addInterceptor=function(l,u){this.typeToInterceptorsMap_.has(l)||this.typeToInterceptorsMap_.set(l,new Set);var c=this.typeToInterceptorsMap_.get(l);return c.has(u)?!1:(c.add(u),!0)},a.removeInterceptor=function(l,u){var c=this.typeToInterceptorsMap_.get(l);return c&&c.has(u)?(c.delete(u),!0):!1},a.clearInterceptorsByType=function(l){var u=this.typeToInterceptorsMap_.get(l);return u?(this.typeToInterceptorsMap_.delete(l),this.typeToInterceptorsMap_.set(l,new Set),!0):!1},a.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},a.getForType=function(l){return this.typeToInterceptorsMap_.get(l)||new Set},a.execute=function(l,u){for(var c=this.getForType(l),d=t(c),p;!(p=d()).done;){var m=p.value;try{u=m(u)}catch{}}return u},i}();return interceptors=s,interceptors}var retry,hasRequiredRetry;function requireRetry(){if(hasRequiredRetry)return retry;hasRequiredRetry=1;var t=function(){function n(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var s=n.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},s.getMaxAttempts=function(){return this.maxAttempts_},s.setMaxAttempts=function(a){this.maxAttempts_=a},s.getDelayFactor=function(){return this.delayFactor_},s.setDelayFactor=function(a){this.delayFactor_=a},s.getFuzzFactor=function(){return this.fuzzFactor_},s.setFuzzFactor=function(a){this.fuzzFactor_=a},s.getInitialDelay=function(){return this.initialDelay_},s.setInitialDelay=function(a){this.initialDelay_=a},s.createRetry=function(a){var o=a===void 0?{}:a,l=o.maxAttempts,u=o.delayFactor,c=o.fuzzFactor,d=o.initialDelay;return new e({maxAttempts:l||this.maxAttempts_,delayFactor:u||this.delayFactor_,fuzzFactor:c||this.fuzzFactor_,initialDelay:d||this.initialDelay_})},n}(),e=function(){function n(i){this.maxAttempts_=i.maxAttempts,this.delayFactor_=i.delayFactor,this.fuzzFactor_=i.fuzzFactor,this.currentDelay_=i.initialDelay,this.currentAttempt_=1}var s=n.prototype;return s.moveToNextAttempt=function(){this.currentAttempt_++;var a=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+a},s.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},s.getCurrentDelay=function(){return this.currentDelay_},s.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},s.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},s.getCurrentFuzzedDelay=function(){var a=this.getCurrentMinPossibleDelay(),o=this.getCurrentMaxPossibleDelay();return a+Math.random()*(o-a)},n}();return retry=t,retry}var httpHandler,hasRequiredHttpHandler;function requireHttpHandler(){if(hasRequiredHttpHandler)return httpHandler;hasRequiredHttpHandler=1;var t=requireWindow(),e=function(i,a){return a===void 0&&(a=!1),function(o,l,u){if(o){i(o);return}if(l.statusCode>=400&&l.statusCode<=599){var c=u;if(a)if(t.TextDecoder){var d=n(l.headers&&l.headers["content-type"]);try{c=new TextDecoder(d).decode(u)}catch{}}else c=String.fromCharCode.apply(null,new Uint8Array(u));i({cause:c});return}i(null,u)}};function n(s){return s===void 0&&(s=""),s.toLowerCase().split(";").reduce(function(i,a){var o=a.split("="),l=o[0],u=o[1];return l.trim()==="charset"?u.trim():i},"utf-8")}return httpHandler=e,httpHandler}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1.exports;hasRequiredLib$1=1;var t=requireWindow(),e=require_extends(),n=requireIsFunction(),s=requireInterceptors(),i=requireRetry();c.httpHandler=requireHttpHandler(),c.requestInterceptorsStorage=new s,c.responseInterceptorsStorage=new s,c.retryManager=new i;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var a=function(E){var x={};return E&&E.trim().split(`
`).forEach(function(b){var S=b.indexOf(":"),C=b.slice(0,S).trim().toLowerCase(),T=b.slice(S+1).trim();typeof x[C]>"u"?x[C]=T:Array.isArray(x[C])?x[C].push(T):x[C]=[x[C],T]}),x};lib$1.exports=c,lib$1.exports.default=c,c.XMLHttpRequest=t.XMLHttpRequest||m,c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:t.XDomainRequest,o(["get","put","post","patch","head","delete"],function(g){c[g==="delete"?"del":g]=function(E,x,b){return x=u(E,x,b),x.method=g.toUpperCase(),d(x)}});function o(g,E){for(var x=0;x<g.length;x++)E(g[x])}function l(g){for(var E in g)if(g.hasOwnProperty(E))return!1;return!0}function u(g,E,x){var b=g;return n(E)?(x=E,typeof g=="string"&&(b={uri:g})):b=e({},E,{uri:g}),b.callback=x,b}function c(g,E,x){return E=u(g,E,x),d(E)}function d(g){if(typeof g.callback>"u")throw new Error("callback argument missing");if(g.requestType&&c.requestInterceptorsStorage.getIsEnabled()){var E={uri:g.uri||g.url,headers:g.headers||{},body:g.body,metadata:g.metadata||{},retry:g.retry,timeout:g.timeout},x=c.requestInterceptorsStorage.execute(g.requestType,E);g.uri=x.uri,g.headers=x.headers,g.body=x.body,g.metadata=x.metadata,g.retry=x.retry,g.timeout=x.timeout}var b=!1,S=function(M,W,ee){b||(b=!0,g.callback(M,W,ee))};function C(){P.readyState===4&&!c.responseInterceptorsStorage.getIsEnabled()&&setTimeout(D,0)}function T(){var K=void 0;if(P.response?K=P.response:K=P.responseText||p(P),re)try{K=JSON.parse(K)}catch{}return K}function I(K){if(clearTimeout(se),clearTimeout(g.retryTimeout),K instanceof Error||(K=new Error(""+(K||"Unknown XMLHttpRequest Error"))),K.statusCode=0,!B&&c.retryManager.getIsEnabled()&&g.retry&&g.retry.shouldRetry()){g.retryTimeout=setTimeout(function(){g.retry.moveToNextAttempt(),g.xhr=P,d(g)},g.retry.getCurrentFuzzedDelay());return}if(g.requestType&&c.responseInterceptorsStorage.getIsEnabled()){var M={headers:G.headers||{},body:G.body,responseUrl:P.responseURL,responseType:P.responseType},W=c.responseInterceptorsStorage.execute(g.requestType,M);G.body=W.body,G.headers=W.headers}return S(K,G)}function D(){if(!B){var K;clearTimeout(se),clearTimeout(g.retryTimeout),g.useXDR&&P.status===void 0?K=200:K=P.status===1223?204:P.status;var M=G,W=null;if(K!==0?(M={body:T(),statusCode:K,method:H,headers:{},url:F,rawRequest:P},P.getAllResponseHeaders&&(M.headers=a(P.getAllResponseHeaders()))):W=new Error("Internal XMLHttpRequest Error"),g.requestType&&c.responseInterceptorsStorage.getIsEnabled()){var ee={headers:M.headers||{},body:M.body,responseUrl:P.responseURL,responseType:P.responseType},z=c.responseInterceptorsStorage.execute(g.requestType,ee);M.body=z.body,M.headers=z.headers}return S(W,M,M.body)}}var P=g.xhr||null;P||(g.cors||g.useXDR?P=new c.XDomainRequest:P=new c.XMLHttpRequest);var O,B,F=P.url=g.uri||g.url,H=P.method=g.method||"GET",Q=g.body||g.data,Z=P.headers=g.headers||{},ne=!!g.sync,re=!1,se,G={body:void 0,headers:{},statusCode:0,method:H,url:F,rawRequest:P};if("json"in g&&g.json!==!1&&(re=!0,Z.accept||Z.Accept||(Z.Accept="application/json"),H!=="GET"&&H!=="HEAD"&&(Z["content-type"]||Z["Content-Type"]||(Z["Content-Type"]="application/json"),Q=JSON.stringify(g.json===!0?Q:g.json))),P.onreadystatechange=C,P.onload=D,P.onerror=I,P.onprogress=function(){},P.onabort=function(){B=!0,clearTimeout(g.retryTimeout)},P.ontimeout=I,P.open(H,F,!ne,g.username,g.password),ne||(P.withCredentials=!!g.withCredentials),!ne&&g.timeout>0&&(se=setTimeout(function(){if(!B){B=!0,P.abort("timeout");var K=new Error("XMLHttpRequest timeout");K.code="ETIMEDOUT",I(K)}},g.timeout)),P.setRequestHeader)for(O in Z)Z.hasOwnProperty(O)&&P.setRequestHeader(O,Z[O]);else if(g.headers&&!l(g.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in g&&(P.responseType=g.responseType),"beforeSend"in g&&typeof g.beforeSend=="function"&&g.beforeSend(P),P.send(Q||null),P}function p(g){try{if(g.responseType==="document")return g.responseXML;var E=g.responseXML&&g.responseXML.documentElement.nodeName==="parsererror";if(g.responseType===""&&!E)return g.responseXML}catch{}return null}function m(){}return lib$1.exports}var libExports$1=requireLib$1();const XHR=getDefaultExportFromCjs(libExports$1);var browserIndex={exports:{}},vtt$1,hasRequiredVtt;function requireVtt(){if(hasRequiredVtt)return vtt$1;hasRequiredVtt=1;var t=requireDocument(),e=Object.create||function(){function F(){}return function(H){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return F.prototype=H,new F}}();function n(F,H){this.name="ParsingError",this.code=F.code,this.message=H||F.message}n.prototype=e(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function s(F){function H(Z,ne,re,se){return(Z|0)*3600+(ne|0)*60+(re|0)+(se|0)/1e3}var Q=F.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Q?Q[3]?H(Q[1],Q[2],Q[3].replace(":",""),Q[4]):Q[1]>59?H(Q[1],Q[2],0,Q[4]):H(0,Q[1],Q[2],Q[4]):null}function i(){this.values=e(null)}i.prototype={set:function(F,H){!this.get(F)&&H!==""&&(this.values[F]=H)},get:function(F,H,Q){return Q?this.has(F)?this.values[F]:H[Q]:this.has(F)?this.values[F]:H},has:function(F){return F in this.values},alt:function(F,H,Q){for(var Z=0;Z<Q.length;++Z)if(H===Q[Z]){this.set(F,H);break}},integer:function(F,H){/^-?\d+$/.test(H)&&this.set(F,parseInt(H,10))},percent:function(F,H){return H.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(H=parseFloat(H),H>=0&&H<=100)?(this.set(F,H),!0):!1}};function a(F,H,Q,Z){var ne=Z?F.split(Z):[F];for(var re in ne)if(typeof ne[re]=="string"){var se=ne[re].split(Q);if(se.length===2){var G=se[0].trim(),K=se[1].trim();H(G,K)}}}function o(F,H,Q){var Z=F;function ne(){var G=s(F);if(G===null)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+Z);return F=F.replace(/^[^\sa-zA-Z-]+/,""),G}function re(G,K){var M=new i;a(G,function(W,ee){switch(W){case"region":for(var z=Q.length-1;z>=0;z--)if(Q[z].id===ee){M.set(W,Q[z].region);break}break;case"vertical":M.alt(W,ee,["rl","lr"]);break;case"line":var ae=ee.split(","),ce=ae[0];M.integer(W,ce),M.percent(W,ce)&&M.set("snapToLines",!1),M.alt(W,ce,["auto"]),ae.length===2&&M.alt("lineAlign",ae[1],["start","center","end"]);break;case"position":ae=ee.split(","),M.percent(W,ae[0]),ae.length===2&&M.alt("positionAlign",ae[1],["start","center","end"]);break;case"size":M.percent(W,ee);break;case"align":M.alt(W,ee,["start","center","end","left","right"]);break}},/:/,/\s/),K.region=M.get("region",null),K.vertical=M.get("vertical","");try{K.line=M.get("line","auto")}catch{}K.lineAlign=M.get("lineAlign","start"),K.snapToLines=M.get("snapToLines",!0),K.size=M.get("size",100);try{K.align=M.get("align","center")}catch{K.align=M.get("align","middle")}try{K.position=M.get("position","auto")}catch{K.position=M.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},K.align)}K.positionAlign=M.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},K.align)}function se(){F=F.replace(/^\s+/,"")}if(se(),H.startTime=ne(),se(),F.substr(0,3)!=="-->")throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+Z);F=F.substr(3),se(),H.endTime=ne(),se(),re(F,H)}var l=t.createElement&&t.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},c={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},d={v:"title",lang:"lang"},p={rt:"ruby"};function m(F,H){function Q(){if(!H)return null;function ce(fe){return H=H.substr(fe.length),fe}var he=H.match(/^([^<]*)(<[^>]*>?)?/);return ce(he[1]?he[1]:he[2])}function Z(ce){return l.innerHTML=ce,ce=l.textContent,l.textContent="",ce}function ne(ce,he){return!p[he.localName]||p[he.localName]===ce.localName}function re(ce,he){var fe=u[ce];if(!fe)return null;var Ce=F.document.createElement(fe),Me=d[ce];return Me&&he&&(Ce[Me]=he.trim()),Ce}for(var se=F.document.createElement("div"),G=se,K,M=[];(K=Q())!==null;){if(K[0]==="<"){if(K[1]==="/"){M.length&&M[M.length-1]===K.substr(2).replace(">","")&&(M.pop(),G=G.parentNode);continue}var W=s(K.substr(1,K.length-2)),ee;if(W){ee=F.document.createProcessingInstruction("timestamp",W),G.appendChild(ee);continue}var z=K.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!z||(ee=re(z[1],z[3]),!ee)||!ne(G,ee))continue;if(z[2]){var ae=z[2].split(".");ae.forEach(function(ce){var he=/^bg_/.test(ce),fe=he?ce.slice(3):ce;if(c.hasOwnProperty(fe)){var Ce=he?"background-color":"color",Me=c[fe];ee.style[Ce]=Me}}),ee.className=ae.join(" ")}M.push(z[1]),G.appendChild(ee),G=ee;continue}G.appendChild(F.document.createTextNode(Z(K)))}return se}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function E(F){for(var H=0;H<g.length;H++){var Q=g[H];if(F>=Q[0]&&F<=Q[1])return!0}return!1}function x(F){var H=[],Q="",Z;if(!F||!F.childNodes)return"ltr";function ne(G,K){for(var M=K.childNodes.length-1;M>=0;M--)G.push(K.childNodes[M])}function re(G){if(!G||!G.length)return null;var K=G.pop(),M=K.textContent||K.innerText;if(M){var W=M.match(/^.*(\n|\r)/);return W?(G.length=0,W[0]):M}if(K.tagName==="ruby")return re(G);if(K.childNodes)return ne(G,K),re(G)}for(ne(H,F);Q=re(H);)for(var se=0;se<Q.length;se++)if(Z=Q.charCodeAt(se),E(Z))return"rtl";return"ltr"}function b(F){if(typeof F.line=="number"&&(F.snapToLines||F.line>=0&&F.line<=100))return F.line;if(!F.track||!F.track.textTrackList||!F.track.textTrackList.mediaElement)return-1;for(var H=F.track,Q=H.textTrackList,Z=0,ne=0;ne<Q.length&&Q[ne]!==H;ne++)Q[ne].mode==="showing"&&Z++;return++Z*-1}function S(){}S.prototype.applyStyles=function(F,H){H=H||this.div;for(var Q in F)F.hasOwnProperty(Q)&&(H.style[Q]=F[Q])},S.prototype.formatStyle=function(F,H){return F===0?0:F+H};function C(F,H,Q){S.call(this),this.cue=H,this.cueDiv=m(F,H.text);var Z={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:H.vertical===""?"horizontal-tb":H.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Z,this.cueDiv),this.div=F.document.createElement("div"),Z={direction:x(this.cueDiv),writingMode:H.vertical===""?"horizontal-tb":H.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:H.align==="middle"?"center":H.align,font:Q.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Z),this.div.appendChild(this.cueDiv);var ne=0;switch(H.positionAlign){case"start":case"line-left":ne=H.position;break;case"center":ne=H.position-H.size/2;break;case"end":case"line-right":ne=H.position-H.size;break}H.vertical===""?this.applyStyles({left:this.formatStyle(ne,"%"),width:this.formatStyle(H.size,"%")}):this.applyStyles({top:this.formatStyle(ne,"%"),height:this.formatStyle(H.size,"%")}),this.move=function(re){this.applyStyles({top:this.formatStyle(re.top,"px"),bottom:this.formatStyle(re.bottom,"px"),left:this.formatStyle(re.left,"px"),right:this.formatStyle(re.right,"px"),height:this.formatStyle(re.height,"px"),width:this.formatStyle(re.width,"px")})}}C.prototype=e(S.prototype),C.prototype.constructor=C;function T(F){var H,Q,Z,ne;if(F.div){Q=F.div.offsetHeight,Z=F.div.offsetWidth,ne=F.div.offsetTop;var re=(re=F.div.childNodes)&&(re=re[0])&&re.getClientRects&&re.getClientRects();F=F.div.getBoundingClientRect(),H=re?Math.max(re[0]&&re[0].height||0,F.height/re.length):0}this.left=F.left,this.right=F.right,this.top=F.top||ne,this.height=F.height||Q,this.bottom=F.bottom||ne+(F.height||Q),this.width=F.width||Z,this.lineHeight=H!==void 0?H:F.lineHeight}T.prototype.move=function(F,H){switch(H=H!==void 0?H:this.lineHeight,F){case"+x":this.left+=H,this.right+=H;break;case"-x":this.left-=H,this.right-=H;break;case"+y":this.top+=H,this.bottom+=H;break;case"-y":this.top-=H,this.bottom-=H;break}},T.prototype.overlaps=function(F){return this.left<F.right&&this.right>F.left&&this.top<F.bottom&&this.bottom>F.top},T.prototype.overlapsAny=function(F){for(var H=0;H<F.length;H++)if(this.overlaps(F[H]))return!0;return!1},T.prototype.within=function(F){return this.top>=F.top&&this.bottom<=F.bottom&&this.left>=F.left&&this.right<=F.right},T.prototype.overlapsOppositeAxis=function(F,H){switch(H){case"+x":return this.left<F.left;case"-x":return this.right>F.right;case"+y":return this.top<F.top;case"-y":return this.bottom>F.bottom}},T.prototype.intersectPercentage=function(F){var H=Math.max(0,Math.min(this.right,F.right)-Math.max(this.left,F.left)),Q=Math.max(0,Math.min(this.bottom,F.bottom)-Math.max(this.top,F.top)),Z=H*Q;return Z/(this.height*this.width)},T.prototype.toCSSCompatValues=function(F){return{top:this.top-F.top,bottom:F.bottom-this.bottom,left:this.left-F.left,right:F.right-this.right,height:this.height,width:this.width}},T.getSimpleBoxPosition=function(F){var H=F.div?F.div.offsetHeight:F.tagName?F.offsetHeight:0,Q=F.div?F.div.offsetWidth:F.tagName?F.offsetWidth:0,Z=F.div?F.div.offsetTop:F.tagName?F.offsetTop:0;F=F.div?F.div.getBoundingClientRect():F.tagName?F.getBoundingClientRect():F;var ne={left:F.left,right:F.right,top:F.top||Z,height:F.height||H,bottom:F.bottom||Z+(F.height||H),width:F.width||Q};return ne};function I(F,H,Q,Z){function ne(fe,Ce){for(var Me,Ye=new T(fe),We=1,Be=0;Be<Ce.length;Be++){for(;fe.overlapsOppositeAxis(Q,Ce[Be])||fe.within(Q)&&fe.overlapsAny(Z);)fe.move(Ce[Be]);if(fe.within(Q))return fe;var rt=fe.intersectPercentage(Q);We>rt&&(Me=new T(fe),We=rt),fe=new T(Ye)}return Me||Ye}var re=new T(H),se=H.cue,G=b(se),K=[];if(se.snapToLines){var M;switch(se.vertical){case"":K=["+y","-y"],M="height";break;case"rl":K=["+x","-x"],M="width";break;case"lr":K=["-x","+x"],M="width";break}var W=re.lineHeight,ee=W*Math.round(G),z=Q[M]+W,ae=K[0];Math.abs(ee)>z&&(ee=ee<0?-1:1,ee*=Math.ceil(z/W)*W),G<0&&(ee+=se.vertical===""?Q.height:Q.width,K=K.reverse()),re.move(ae,ee)}else{var ce=re.lineHeight/Q.height*100;switch(se.lineAlign){case"center":G-=ce/2;break;case"end":G-=ce;break}switch(se.vertical){case"":H.applyStyles({top:H.formatStyle(G,"%")});break;case"rl":H.applyStyles({left:H.formatStyle(G,"%")});break;case"lr":H.applyStyles({right:H.formatStyle(G,"%")});break}K=["+y","-x","+x","-y"],re=new T(H)}var he=ne(re,K);H.move(he.toCSSCompatValues(Q))}function D(){}D.StringDecoder=function(){return{decode:function(F){if(!F)return"";if(typeof F!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(F))}}},D.convertCueToDOMTree=function(F,H){return!F||!H?null:m(F,H)};var P=.05,O="sans-serif",B="1.5%";return D.processCues=function(F,H,Q){if(!F||!H||!Q)return null;for(;Q.firstChild;)Q.removeChild(Q.firstChild);var Z=F.document.createElement("div");Z.style.position="absolute",Z.style.left="0",Z.style.right="0",Z.style.top="0",Z.style.bottom="0",Z.style.margin=B,Q.appendChild(Z);function ne(W){for(var ee=0;ee<W.length;ee++)if(W[ee].hasBeenReset||!W[ee].displayState)return!0;return!1}if(!ne(H)){for(var re=0;re<H.length;re++)Z.appendChild(H[re].displayState);return}var se=[],G=T.getSimpleBoxPosition(Z),K=Math.round(G.height*P*100)/100,M={font:K+"px "+O};(function(){for(var W,ee,z=0;z<H.length;z++)ee=H[z],W=new C(F,ee,M),Z.appendChild(W.div),I(F,W,G,se),ee.displayState=W.div,se.push(T.getSimpleBoxPosition(W))})()},D.Parser=function(F,H,Q){Q||(Q=H,H={}),H||(H={}),this.window=F,this.vttjs=H,this.state="INITIAL",this.buffer="",this.decoder=Q||new TextDecoder("utf8"),this.regionList=[]},D.Parser.prototype={reportOrThrowError:function(F){if(F instanceof n)this.onparsingerror&&this.onparsingerror(F);else throw F},parse:function(F){var H=this;F&&(H.buffer+=H.decoder.decode(F,{stream:!0}));function Q(){for(var W=H.buffer,ee=0;ee<W.length&&W[ee]!=="\r"&&W[ee]!==`
`;)++ee;var z=W.substr(0,ee);return W[ee]==="\r"&&++ee,W[ee]===`
`&&++ee,H.buffer=W.substr(ee),z}function Z(W){var ee=new i;if(a(W,function(ae,ce){switch(ae){case"id":ee.set(ae,ce);break;case"width":ee.percent(ae,ce);break;case"lines":ee.integer(ae,ce);break;case"regionanchor":case"viewportanchor":var he=ce.split(",");if(he.length!==2)break;var fe=new i;if(fe.percent("x",he[0]),fe.percent("y",he[1]),!fe.has("x")||!fe.has("y"))break;ee.set(ae+"X",fe.get("x")),ee.set(ae+"Y",fe.get("y"));break;case"scroll":ee.alt(ae,ce,["up"]);break}},/=/,/\s/),ee.has("id")){var z=new(H.vttjs.VTTRegion||H.window.VTTRegion);z.width=ee.get("width",100),z.lines=ee.get("lines",3),z.regionAnchorX=ee.get("regionanchorX",0),z.regionAnchorY=ee.get("regionanchorY",100),z.viewportAnchorX=ee.get("viewportanchorX",0),z.viewportAnchorY=ee.get("viewportanchorY",100),z.scroll=ee.get("scroll",""),H.onregion&&H.onregion(z),H.regionList.push({id:ee.get("id"),region:z})}}function ne(W){var ee=new i;a(W,function(z,ae){switch(z){case"MPEGT":ee.integer(z+"S",ae);break;case"LOCA":ee.set(z+"L",s(ae));break}},/[^\d]:/,/,/),H.ontimestampmap&&H.ontimestampmap({MPEGTS:ee.get("MPEGTS"),LOCAL:ee.get("LOCAL")})}function re(W){W.match(/X-TIMESTAMP-MAP/)?a(W,function(ee,z){switch(ee){case"X-TIMESTAMP-MAP":ne(z);break}},/=/):a(W,function(ee,z){switch(ee){case"Region":Z(z);break}},/:/)}try{var se;if(H.state==="INITIAL"){if(!/\r\n|\n/.test(H.buffer))return this;se=Q();var G=se.match(/^WEBVTT([ \t].*)?$/);if(!G||!G[0])throw new n(n.Errors.BadSignature);H.state="HEADER"}for(var K=!1;H.buffer;){if(!/\r\n|\n/.test(H.buffer))return this;switch(K?K=!1:se=Q(),H.state){case"HEADER":/:/.test(se)?re(se):se||(H.state="ID");continue;case"NOTE":se||(H.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(se)){H.state="NOTE";break}if(!se)continue;H.cue=new(H.vttjs.VTTCue||H.window.VTTCue)(0,0,"");try{H.cue.align="center"}catch{H.cue.align="middle"}if(H.state="CUE",se.indexOf("-->")===-1){H.cue.id=se;continue}case"CUE":try{o(se,H.cue,H.regionList)}catch(W){H.reportOrThrowError(W),H.cue=null,H.state="BADCUE";continue}H.state="CUETEXT";continue;case"CUETEXT":var M=se.indexOf("-->")!==-1;if(!se||M&&(K=!0)){H.oncue&&H.oncue(H.cue),H.cue=null,H.state="ID";continue}H.cue.text&&(H.cue.text+=`
`),H.cue.text+=se.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":se||(H.state="ID");continue}}}catch(W){H.reportOrThrowError(W),H.state==="CUETEXT"&&H.cue&&H.oncue&&H.oncue(H.cue),H.cue=null,H.state=H.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var F=this;try{if(F.buffer+=F.decoder.decode(),(F.cue||F.state==="HEADER")&&(F.buffer+=`

`,F.parse()),F.state==="INITIAL")throw new n(n.Errors.BadSignature)}catch(H){F.reportOrThrowError(H)}return F.onflush&&F.onflush(),this}},vtt$1=D,vtt$1}var vttcue,hasRequiredVttcue;function requireVttcue(){if(hasRequiredVttcue)return vttcue;hasRequiredVttcue=1;var t="auto",e={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function s(o){if(typeof o!="string")return!1;var l=e[o.toLowerCase()];return l?o.toLowerCase():!1}function i(o){if(typeof o!="string")return!1;var l=n[o.toLowerCase()];return l?o.toLowerCase():!1}function a(o,l,u){this.hasBeenReset=!1;var c="",d=!1,p=o,m=l,g=u,E=null,x="",b=!0,S="auto",C="start",T="auto",I="auto",D=100,P="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return c},set:function(O){c=""+O}},pauseOnExit:{enumerable:!0,get:function(){return d},set:function(O){d=!!O}},startTime:{enumerable:!0,get:function(){return p},set:function(O){if(typeof O!="number")throw new TypeError("Start time must be set to a number.");p=O,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return m},set:function(O){if(typeof O!="number")throw new TypeError("End time must be set to a number.");m=O,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return g},set:function(O){g=""+O,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return E},set:function(O){E=O,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return x},set:function(O){var B=s(O);if(B===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");x=B,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return b},set:function(O){b=!!O,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return S},set:function(O){if(typeof O!="number"&&O!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");S=O,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return C},set:function(O){var B=i(O);B?(C=B,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return T},set:function(O){if(O<0||O>100)throw new Error("Position must be between 0 and 100.");T=O,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return I},set:function(O){var B=i(O);B?(I=B,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return D},set:function(O){if(O<0||O>100)throw new Error("Size must be between 0 and 100.");D=O,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return P},set:function(O){var B=i(O);if(!B)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");P=B,this.hasBeenReset=!0}}}),this.displayState=void 0}return a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},vttcue=a,vttcue}var vttregion,hasRequiredVttregion;function requireVttregion(){if(hasRequiredVttregion)return vttregion;hasRequiredVttregion=1;var t={"":!0,up:!0};function e(i){if(typeof i!="string")return!1;var a=t[i.toLowerCase()];return a?i.toLowerCase():!1}function n(i){return typeof i=="number"&&i>=0&&i<=100}function s(){var i=100,a=3,o=0,l=100,u=0,c=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(p){if(!n(p))throw new Error("Width must be between 0 and 100.");i=p}},lines:{enumerable:!0,get:function(){return a},set:function(p){if(typeof p!="number")throw new TypeError("Lines must be set to a number.");a=p}},regionAnchorY:{enumerable:!0,get:function(){return l},set:function(p){if(!n(p))throw new Error("RegionAnchorX must be between 0 and 100.");l=p}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(p){if(!n(p))throw new Error("RegionAnchorY must be between 0 and 100.");o=p}},viewportAnchorY:{enumerable:!0,get:function(){return c},set:function(p){if(!n(p))throw new Error("ViewportAnchorY must be between 0 and 100.");c=p}},viewportAnchorX:{enumerable:!0,get:function(){return u},set:function(p){if(!n(p))throw new Error("ViewportAnchorX must be between 0 and 100.");u=p}},scroll:{enumerable:!0,get:function(){return d},set:function(p){var m=e(p);m===!1?console.warn("Scroll: an invalid or illegal string was specified."):d=m}}})}return vttregion=s,vttregion}var hasRequiredBrowserIndex;function requireBrowserIndex(){if(hasRequiredBrowserIndex)return browserIndex.exports;hasRequiredBrowserIndex=1;var t=requireWindow(),e=browserIndex.exports={WebVTT:requireVtt(),VTTCue:requireVttcue(),VTTRegion:requireVttregion()};t.vttjs=e,t.WebVTT=e.WebVTT;var n=e.VTTCue,s=e.VTTRegion,i=t.VTTCue,a=t.VTTRegion;return e.shim=function(){t.VTTCue=n,t.VTTRegion=s},e.restore=function(){t.VTTCue=i,t.VTTRegion=a},t.VTTCue||e.shim(),browserIndex.exports}var browserIndexExports=requireBrowserIndex();const vtt=getDefaultExportFromCjs(browserIndexExports);function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_extends.apply(null,arguments)}var DEFAULT_LOCATION="https://example.com",resolveUrl$1=function t(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=window$1.location&&window$1.location.href||"");var s=/^\/\//.test(e),i=!window$1.location&&!/\/\//i.test(e);e=new window$1.URL(e,window$1.location||DEFAULT_LOCATION);var a=new URL(n,e);return i?a.href.slice(DEFAULT_LOCATION.length):s?a.href.slice(a.protocol.length):a.href},Stream=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(s,i){this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(i)},e.off=function(s,i){if(!this.listeners[s])return!1;var a=this.listeners[s].indexOf(i);return this.listeners[s]=this.listeners[s].slice(0),this.listeners[s].splice(a,1),a>-1},e.trigger=function(s){var i=this.listeners[s];if(i)if(arguments.length===2)for(var a=i.length,o=0;o<a;++o)i[o].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),u=i.length,c=0;c<u;++c)i[c].apply(this,l)},e.dispose=function(){this.listeners={}},e.pipe=function(s){this.on("data",function(i){s.push(i)})},t}(),atob$1=function t(e){return window$1.atob?window$1.atob(e):Buffer.from(e,"base64").toString("binary")};function decodeB64ToUint8Array(t){for(var e=atob$1(t),n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class LineStream extends Stream{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const TAB="	",parseByterange=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},attributeSeparator=function(){const n="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+n+")")},parseAttributes$1=function(t){const e={};if(!t)return e;const n=t.split(attributeSeparator());let s=n.length,i;for(;s--;)n[s]!==""&&(i=/([^=]*)=(.*)/.exec(n[s]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e},parseResolution=t=>{const e=t.split("x"),n={};return e[0]&&(n.width=parseInt(e[0],10)),e[1]&&(n.height=parseInt(e[1],10)),n};class ParseStream extends Stream{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,s;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((a,o)=>{const l=o(e);return l===e?a:a.concat([l])},[e]).forEach(a=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,a))return;if(a.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:a.slice(1)});return}if(a=a.replace("\r",""),n=/^#EXTM3U/.exec(a),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(a),n){s={type:"tag",tagType:"inf"},n[1]&&(s.duration=parseFloat(n[1])),n[2]&&(s.title=n[2]),this.trigger("data",s);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"targetduration"},n[1]&&(s.duration=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"version"},n[1]&&(s.version=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"media-sequence"},n[1]&&(s.number=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(a),n){s={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(s.number=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(a),n){s={type:"tag",tagType:"playlist-type"},n[1]&&(s.playlistType=n[1]),this.trigger("data",s);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(a),n){s=_extends(parseByterange(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",s);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(a),n){s={type:"tag",tagType:"allow-cache"},n[1]&&(s.allowed=!/NO/.test(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(a),n){if(s={type:"tag",tagType:"map"},n[1]){const o=parseAttributes$1(n[1]);o.URI&&(s.uri=o.URI),o.BYTERANGE&&(s.byterange=parseByterange(o.BYTERANGE))}this.trigger("data",s);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(a),n){s={type:"tag",tagType:"stream-inf"},n[1]&&(s.attributes=parseAttributes$1(n[1]),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=parseResolution(s.attributes.RESOLUTION)),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))),this.trigger("data",s);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(a),n){s={type:"tag",tagType:"media"},n[1]&&(s.attributes=parseAttributes$1(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-ENDLIST/.exec(a),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(a),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(a),n){s={type:"tag",tagType:"program-date-time"},n[1]&&(s.dateTimeString=n[1],s.dateTimeObject=new Date(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(a),n){s={type:"tag",tagType:"key"},n[1]&&(s.attributes=parseAttributes$1(n[1]),s.attributes.IV&&(s.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),this.trigger("data",s);return}if(n=/^#EXT-X-START:(.*)$/.exec(a),n){s={type:"tag",tagType:"start"},n[1]&&(s.attributes=parseAttributes$1(n[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),this.trigger("data",s);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(a),n){s={type:"tag",tagType:"cue-out-cont"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(a),n){s={type:"tag",tagType:"cue-out"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a),n){s={type:"tag",tagType:"cue-in"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"skip"},s.attributes=parseAttributes$1(n[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB)),this.trigger("data",s);return}if(n=/^#EXT-X-PART:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"part"},s.attributes=parseAttributes$1(n[1]),["DURATION"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=/YES/.test(s.attributes[o]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=parseByterange(s.attributes.BYTERANGE)),this.trigger("data",s);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"server-control"},s.attributes=parseAttributes$1(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=/YES/.test(s.attributes[o]))}),this.trigger("data",s);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"part-inf"},s.attributes=parseAttributes$1(n[1]),["PART-TARGET"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseFloat(s.attributes[o]))}),this.trigger("data",s);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"preload-hint"},s.attributes=parseAttributes$1(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(s.attributes.hasOwnProperty(o)){s.attributes[o]=parseInt(s.attributes[o],10);const l=o==="BYTERANGE-LENGTH"?"length":"offset";s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[l]=s.attributes[o],delete s.attributes[o]}}),this.trigger("data",s);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"rendition-report"},s.attributes=parseAttributes$1(n[1]),["LAST-MSN","LAST-PART"].forEach(function(o){s.attributes.hasOwnProperty(o)&&(s.attributes[o]=parseInt(s.attributes[o],10))}),this.trigger("data",s);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(a),n&&n[1]){s={type:"tag",tagType:"daterange"},s.attributes=parseAttributes$1(n[1]),["ID","CLASS"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=String(s.attributes[l]))}),["START-DATE","END-DATE"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=new Date(s.attributes[l]))}),["DURATION","PLANNED-DURATION"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseFloat(s.attributes[l]))}),["END-ON-NEXT"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=/YES/i.test(s.attributes[l]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=s.attributes[l].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const l in s.attributes){if(!o.test(l))continue;const u=/[0-9A-Fa-f]{6}/g.test(s.attributes[l]),c=/^\d+(\.\d+)?$/.test(s.attributes[l]);s.attributes[l]=u?s.attributes[l].toString(16):c?parseFloat(s.attributes[l]):String(s.attributes[l])}this.trigger("data",s);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(a),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(a),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(a),n){s={type:"tag",tagType:"content-steering"},s.attributes=parseAttributes$1(n[1]),this.trigger("data",s);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(a),n){s={type:"tag",tagType:"i-frame-playlist"},s.attributes=parseAttributes$1(n[1]),s.attributes.URI&&(s.uri=s.attributes.URI),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=parseResolution(s.attributes.RESOLUTION)),s.attributes["AVERAGE-BANDWIDTH"]&&(s.attributes["AVERAGE-BANDWIDTH"]=parseInt(s.attributes["AVERAGE-BANDWIDTH"],10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),this.trigger("data",s);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(a),n){s={type:"tag",tagType:"define"},s.attributes=parseAttributes$1(n[1]),this.trigger("data",s);return}this.trigger("data",{type:"tag",data:a.slice(4)})})}addParser({expression:e,customType:n,dataParser:s,segment:i}){typeof s!="function"&&(s=a=>a),this.customParsers.push(a=>{if(e.exec(a))return this.trigger("data",{type:"custom",data:s(a),customType:n,segment:i}),!0})}addTagMapper({expression:e,map:n}){const s=i=>e.test(i)?n(i):i;this.tagMappers.push(s)}}const camelCase=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),camelCaseKeys=function(t){const e={};return Object.keys(t).forEach(function(n){e[camelCase(n)]=t[n]}),e},setHoldBack=function(t){const{serverControl:e,targetDuration:n,partTargetDuration:s}=t;if(!e)return;const i="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=n&&n*3,u=s&&s*2;n&&!e.hasOwnProperty(a)&&(e[a]=l,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${l}).`})),l&&e[a]<l&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[a]}) to targetDuration * 3 (${l})`}),e[a]=l),s&&!e.hasOwnProperty(o)&&(e[o]=s*3,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),s&&e[o]<u&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${u}).`}),e[o]=u)};class Parser extends Stream{constructor(e={}){super(),this.lineStream=new LineStream,this.parseStream=new ParseStream,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,s=[];let i={},a,o,l=!1;const u=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let p=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let m=0,g=0;const E={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&a&&(i.map=a),!i.key&&o&&(i.key=o),!i.timeline&&typeof p=="number"&&(i.timeline=p),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(x){let b,S;if(n.manifest.definitions){for(const C in n.manifest.definitions)if(x.uri&&(x.uri=x.uri.replace(`{$${C}}`,n.manifest.definitions[C])),x.attributes)for(const T in x.attributes)typeof x.attributes[T]=="string"&&(x.attributes[T]=x.attributes[T].replace(`{$${C}}`,n.manifest.definitions[C]))}({tag(){({version(){x.version&&(this.manifest.version=x.version)},"allow-cache"(){this.manifest.allowCache=x.allowed,"allowed"in x||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const C={};"length"in x&&(i.byterange=C,C.length=x.length,"offset"in x||(x.offset=m)),"offset"in x&&(i.byterange=C,C.offset=x.offset),m=C.offset+C.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),x.title&&(i.title=x.title),x.duration>0&&(i.duration=x.duration),x.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(!x.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(x.attributes.METHOD==="NONE"){o=null;return}if(!x.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(x.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:x.attributes};return}if(x.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:x.attributes.URI};return}if(x.attributes.KEYFORMAT===d){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(x.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(x.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),x.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(x.attributes.KEYID&&x.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:x.attributes.KEYFORMAT,keyId:x.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(x.attributes.URI.split(",")[1])};return}x.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:x.attributes.METHOD||"AES-128",uri:x.attributes.URI},typeof x.attributes.IV<"u"&&(o.iv=x.attributes.IV)},"media-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+x.number});return}this.manifest.mediaSequence=x.number},"discontinuity-sequence"(){if(!isFinite(x.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+x.number});return}this.manifest.discontinuitySequence=x.number,p=x.number},"playlist-type"(){if(!/VOD|EVENT/.test(x.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+x.playlist});return}this.manifest.playlistType=x.playlistType},map(){a={},x.uri&&(a.uri=x.uri),x.byterange&&(a.byterange=x.byterange),o&&(a.key=o)},"stream-inf"(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||c,!x.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),_extends(i.attributes,x.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,!(x.attributes&&x.attributes.TYPE&&x.attributes["GROUP-ID"]&&x.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const C=this.manifest.mediaGroups[x.attributes.TYPE];C[x.attributes["GROUP-ID"]]=C[x.attributes["GROUP-ID"]]||{},b=C[x.attributes["GROUP-ID"]],S={default:/yes/i.test(x.attributes.DEFAULT)},S.default?S.autoselect=!0:S.autoselect=/yes/i.test(x.attributes.AUTOSELECT),x.attributes.LANGUAGE&&(S.language=x.attributes.LANGUAGE),x.attributes.URI&&(S.uri=x.attributes.URI),x.attributes["INSTREAM-ID"]&&(S.instreamId=x.attributes["INSTREAM-ID"]),x.attributes.CHARACTERISTICS&&(S.characteristics=x.attributes.CHARACTERISTICS),x.attributes.FORCED&&(S.forced=/yes/i.test(x.attributes.FORCED)),b[x.attributes.NAME]=S},discontinuity(){p+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=x.dateTimeString,this.manifest.dateTimeObject=x.dateTimeObject),i.dateTimeString=x.dateTimeString,i.dateTimeObject=x.dateTimeObject;const{lastProgramDateTime:C}=this;this.lastProgramDateTime=new Date(x.dateTimeString).getTime(),C===null&&this.manifest.segments.reduceRight((T,I)=>(I.programDateTime=T-I.duration*1e3,I.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(x.duration)||x.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+x.duration});return}this.manifest.targetDuration=x.duration,setHoldBack.call(this,this.manifest)},start(){if(!x.attributes||isNaN(x.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:x.attributes["TIME-OFFSET"],precise:x.attributes.PRECISE}},"cue-out"(){i.cueOut=x.data},"cue-out-cont"(){i.cueOutCont=x.data},"cue-in"(){i.cueIn=x.data},skip(){this.manifest.skip=camelCaseKeys(x.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",x.attributes,["SKIPPED-SEGMENTS"])},part(){l=!0;const C=this.manifest.segments.length,T=camelCaseKeys(x.attributes);i.parts=i.parts||[],i.parts.push(T),T.byterange&&(T.byterange.hasOwnProperty("offset")||(T.byterange.offset=g),g=T.byterange.offset+T.byterange.length);const I=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${I} for segment #${C}`,x.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((D,P)=>{D.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${P} lacks required attribute(s): LAST-PART`})})},"server-control"(){const C=this.manifest.serverControl=camelCaseKeys(x.attributes);C.hasOwnProperty("canBlockReload")||(C.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),setHoldBack.call(this,this.manifest),C.canSkipDateranges&&!C.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const C=this.manifest.segments.length,T=camelCaseKeys(x.attributes),I=T.type&&T.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(T),T.byterange&&(T.byterange.hasOwnProperty("offset")||(T.byterange.offset=I?g:0,I&&(g=T.byterange.offset+T.byterange.length)));const D=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${D} for segment #${C}`,x.attributes,["TYPE","URI"]),!!T.type)for(let P=0;P<i.preloadHints.length-1;P++){const O=i.preloadHints[P];O.type&&O.type===T.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${D} for segment #${C} has the same TYPE ${T.type} as preload hint #${P}`})}},"rendition-report"(){const C=camelCaseKeys(x.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(C);const T=this.manifest.renditionReports.length-1,I=["LAST-MSN","URI"];l&&I.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${T}`,x.attributes,I)},"part-inf"(){this.manifest.partInf=camelCaseKeys(x.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",x.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),setHoldBack.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(camelCaseKeys(x.attributes));const C=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${C}`,x.attributes,["ID","START-DATE"]);const T=this.manifest.dateRanges[C];T.endDate&&T.startDate&&new Date(T.endDate)<new Date(T.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),T.duration&&T.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),T.plannedDuration&&T.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const I=!!T.endOnNext;if(I&&!T.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),I&&(T.duration||T.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),T.duration&&T.endDate){const P=T.startDate.getTime()+T.duration*1e3;this.manifest.dateRanges[C].endDate=new Date(P)}if(!E[T.id])E[T.id]=T;else{for(const P in E[T.id])if(T[P]&&JSON.stringify(E[T.id][P])!==JSON.stringify(T[P])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const D=this.manifest.dateRanges.findIndex(P=>P.id===T.id);this.manifest.dateRanges[D]=_extends(this.manifest.dateRanges[D],T),E[T.id]=_extends(E[T.id],T),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=camelCaseKeys(x.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",x.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const C=(T,I)=>{if(T in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${T}`});return}this.manifest.definitions[T]=I};if("QUERYPARAM"in x.attributes){if("NAME"in x.attributes||"IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const T=this.params.get(x.attributes.QUERYPARAM);if(!T){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${x.attributes.QUERYPARAM}`});return}C(x.attributes.QUERYPARAM,decodeURIComponent(T));return}if("NAME"in x.attributes){if("IMPORT"in x.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in x.attributes)||typeof x.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${x.attributes.NAME}`});return}C(x.attributes.NAME,x.attributes.VALUE);return}if("IMPORT"in x.attributes){if(!this.mainDefinitions[x.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${x.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}C(x.attributes.IMPORT,this.mainDefinitions[x.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:x.attributes,uri:x.uri,timeline:p}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",x.attributes,["BANDWIDTH","URI"])}}[x.tagType]||u).call(n)},uri(){i.uri=x.uri,s.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),o&&(i.key=o),i.timeline=p,a&&(i.map=a),g=0,this.lastProgramDateTime!==null&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=i.duration*1e3),i={}},comment(){},custom(){x.segment?(i.custom=i.custom||{},i.custom[x.customType]=x.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[x.customType]=x.data)}})[x.type].call(n)})}requiredCompatibilityversion(e,n){(e<n||!e)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(e,n,s){const i=[];s.forEach(function(a){n.hasOwnProperty(a)||i.push(a)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},mediaTypes=["video","audio","text"],upperMediaTypes=["Video","Audio","Text"],translateLegacyCodec=function t(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,s,i){var a=("00"+Number(s).toString(16)).slice(-2),o=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+o})},parseCodecs=function t(e){e===void 0&&(e="");var n=e.split(","),s=[];return n.forEach(function(i){i=i.trim();var a;mediaTypes.forEach(function(o){var l=regexs[o].exec(i.toLowerCase());if(!(!l||l.length<=1)){a=o;var u=i.substring(0,l[1].length),c=i.replace(u,"");s.push({type:u,details:c,mediaType:o})}}),a||s.push({type:i,details:"",mediaType:"unknown"})}),s},codecsFromDefault=function t(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var s=e.mediaGroups.AUDIO[n];if(!s)return null;for(var i in s){var a=s[i];if(a.default&&a.playlists)return parseCodecs(a.playlists[0].attributes.CODECS)}return null},isAudioCodec=function t(e){return e===void 0&&(e=""),regexs.audio.test(e.trim().toLowerCase())},isTextCodec=function t(e){return e===void 0&&(e=""),regexs.text.test(e.trim().toLowerCase())},getMimeForCodec=function t(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(a){return translateLegacyCodec(a.trim())}),s="video";n.length===1&&isAudioCodec(n[0])?s="audio":n.length===1&&isTextCodec(n[0])&&(s="application");var i="mp4";return n.every(function(a){return regexs.mp4.test(a)})?i="mp4":n.every(function(a){return regexs.webm.test(a)})?i="webm":n.every(function(a){return regexs.ogg.test(a)})&&(i="ogg"),s+"/"+i+';codecs="'+e+'"'}},browserSupportsCodec=function t(e,n){return e===void 0&&(e=""),n===void 0&&(n=!1),window$1.MediaSource&&window$1.MediaSource.isTypeSupported&&window$1.MediaSource.isTypeSupported(getMimeForCodec(e))||n&&window$1.ManagedMediaSource&&window$1.ManagedMediaSource.isTypeSupported&&window$1.ManagedMediaSource.isTypeSupported(getMimeForCodec(e))||!1},muxerSupportsCodec=function t(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var s=0;s<upperMediaTypes.length;s++){var i=upperMediaTypes[s];if(regexs["muxer"+i].test(n))return!0}return!1})},DEFAULT_AUDIO_CODEC="mp4a.40.2",DEFAULT_VIDEO_CODEC="avc1.4d400d",MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,DASH_REGEX=/^application\/dash\+xml/i,simpleTypeFromSourceType=function t(e){return MPEGURL_REGEX.test(e)?"hls":DASH_REGEX.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},countBits=function t(e){return e.toString(2).length},countBytes=function t(e){return Math.ceil(countBits(e)/8)},isArrayBufferView=function t(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},isTypedArray=function t(e){return isArrayBufferView(e)},toUint8=function t(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!isTypedArray(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},BigInt$1=window$1.BigInt||Number,BYTE_TABLE=[BigInt$1("0x1"),BigInt$1("0x100"),BigInt$1("0x10000"),BigInt$1("0x1000000"),BigInt$1("0x100000000"),BigInt$1("0x10000000000"),BigInt$1("0x1000000000000"),BigInt$1("0x100000000000000"),BigInt$1("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var bytesToNumber=function t(e,n){var s=n===void 0?{}:n,i=s.signed,a=i===void 0?!1:i,o=s.le,l=o===void 0?!1:o;e=toUint8(e);var u=l?"reduce":"reduceRight",c=e[u]?e[u]:Array.prototype[u],d=c.call(e,function(m,g,E){var x=l?E:Math.abs(E+1-e.length);return m+BigInt$1(g)*BYTE_TABLE[x]},BigInt$1(0));if(a){var p=BYTE_TABLE[e.length]/BigInt$1(2)-BigInt$1(1);d=BigInt$1(d),d>p&&(d-=p,d-=p,d-=BigInt$1(2))}return Number(d)},numberToBytes=function t(e,n){var s={},i=s.le,a=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=BigInt$1(e);for(var o=countBytes(e),l=new Uint8Array(new ArrayBuffer(o)),u=0;u<o;u++){var c=a?u:Math.abs(u+1-l.length);l[c]=Number(e/BYTE_TABLE[u]&BigInt$1(255)),e<0&&(l[c]=Math.abs(~l[c]),l[c]-=u===0?1:2)}return l},stringToBytes=function t(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var s=new Uint8Array(e.length),i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return s},concatTypedArrays=function t(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if(n=n.filter(function(l){return l&&(l.byteLength||l.length)&&typeof l!="string"}),n.length<=1)return toUint8(n[0]);var i=n.reduce(function(l,u,c){return l+(u.byteLength||u.length)},0),a=new Uint8Array(i),o=0;return n.forEach(function(l){l=toUint8(l),a.set(l,o),o+=l.byteLength}),a},bytesMatch=function t(e,n,s){var i=s===void 0?{}:s,a=i.offset,o=a===void 0?0:a,l=i.mask,u=l===void 0?[]:l;e=toUint8(e),n=toUint8(n);var c=n.every?n.every:Array.prototype.every;return n.length&&e.length-o>=n.length&&c.call(n,function(d,p){var m=u[p]?u[p]&e[o+p]:e[o+p];return d===m})},forEachMediaGroup$1=function t(e,n,s){n.forEach(function(i){for(var a in e.mediaGroups[i])for(var o in e.mediaGroups[i][a]){var l=e.mediaGroups[i][a][o];s(l,i,a,o)}})},lib={},dom={},conventions={},hasRequiredConventions;function requireConventions(){if(hasRequiredConventions)return conventions;hasRequiredConventions=1;function t(a,o,l){if(l===void 0&&(l=Array.prototype),a&&typeof l.find=="function")return l.find.call(a,o);for(var u=0;u<a.length;u++)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];if(o.call(void 0,c,u,a))return c}}function e(a,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(a):a}function n(a,o){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l]);return a}var s=e({HTML:"text/html",isHTML:function(a){return a===s.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return conventions.assign=n,conventions.find=t,conventions.freeze=e,conventions.MIME_TYPE=s,conventions.NAMESPACE=i,conventions}var hasRequiredDom;function requireDom(){if(hasRequiredDom)return dom;hasRequiredDom=1;var t=requireConventions(),e=t.find,n=t.NAMESPACE;function s(ie){return ie!==""}function i(ie){return ie?ie.split(/[\t\n\f\r ]+/).filter(s):[]}function a(ie,ue){return ie.hasOwnProperty(ue)||(ie[ue]=!0),ie}function o(ie){if(!ie)return[];var ue=i(ie);return Object.keys(ue.reduce(a,{}))}function l(ie){return function(ue){return ie&&ie.indexOf(ue)!==-1}}function u(ie,ue){for(var ve in ie)Object.prototype.hasOwnProperty.call(ie,ve)&&(ue[ve]=ie[ve])}function c(ie,ue){var ve=ie.prototype;if(!(ve instanceof ue)){let Ie=function(){};Ie.prototype=ue.prototype,Ie=new Ie,u(ve,Ie),ie.prototype=ve=Ie}ve.constructor!=ie&&(typeof ie!="function"&&console.error("unknown Class:"+ie),ve.constructor=ie)}var d={},p=d.ELEMENT_NODE=1,m=d.ATTRIBUTE_NODE=2,g=d.TEXT_NODE=3,E=d.CDATA_SECTION_NODE=4,x=d.ENTITY_REFERENCE_NODE=5,b=d.ENTITY_NODE=6,S=d.PROCESSING_INSTRUCTION_NODE=7,C=d.COMMENT_NODE=8,T=d.DOCUMENT_NODE=9,I=d.DOCUMENT_TYPE_NODE=10,D=d.DOCUMENT_FRAGMENT_NODE=11,P=d.NOTATION_NODE=12,O={},B={};O.INDEX_SIZE_ERR=(B[1]="Index size error",1),O.DOMSTRING_SIZE_ERR=(B[2]="DOMString size error",2);var F=O.HIERARCHY_REQUEST_ERR=(B[3]="Hierarchy request error",3);O.WRONG_DOCUMENT_ERR=(B[4]="Wrong document",4),O.INVALID_CHARACTER_ERR=(B[5]="Invalid character",5),O.NO_DATA_ALLOWED_ERR=(B[6]="No data allowed",6),O.NO_MODIFICATION_ALLOWED_ERR=(B[7]="No modification allowed",7);var H=O.NOT_FOUND_ERR=(B[8]="Not found",8);O.NOT_SUPPORTED_ERR=(B[9]="Not supported",9);var Q=O.INUSE_ATTRIBUTE_ERR=(B[10]="Attribute in use",10);O.INVALID_STATE_ERR=(B[11]="Invalid state",11),O.SYNTAX_ERR=(B[12]="Syntax error",12),O.INVALID_MODIFICATION_ERR=(B[13]="Invalid modification",13),O.NAMESPACE_ERR=(B[14]="Invalid namespace",14),O.INVALID_ACCESS_ERR=(B[15]="Invalid access",15);function Z(ie,ue){if(ue instanceof Error)var ve=ue;else ve=this,Error.call(this,B[ie]),this.message=B[ie],Error.captureStackTrace&&Error.captureStackTrace(this,Z);return ve.code=ie,ue&&(this.message=this.message+": "+ue),ve}Z.prototype=Error.prototype,u(O,Z);function ne(){}ne.prototype={length:0,item:function(ie){return ie>=0&&ie<this.length?this[ie]:null},toString:function(ie,ue){for(var ve=[],Ie=0;Ie<this.length;Ie++)Oe(this[Ie],ve,ie,ue);return ve.join("")},filter:function(ie){return Array.prototype.filter.call(this,ie)},indexOf:function(ie){return Array.prototype.indexOf.call(this,ie)}};function re(ie,ue){this._node=ie,this._refresh=ue,se(this)}function se(ie){var ue=ie._node._inc||ie._node.ownerDocument._inc;if(ie._inc!==ue){var ve=ie._refresh(ie._node);if(ir(ie,"length",ve.length),!ie.$$length||ve.length<ie.$$length)for(var Ie=ve.length;Ie in ie;Ie++)Object.prototype.hasOwnProperty.call(ie,Ie)&&delete ie[Ie];u(ve,ie),ie._inc=ue}}re.prototype.item=function(ie){return se(this),this[ie]||null},c(re,ne);function G(){}function K(ie,ue){for(var ve=ie.length;ve--;)if(ie[ve]===ue)return ve}function M(ie,ue,ve,Ie){if(Ie?ue[K(ue,Ie)]=ve:ue[ue.length++]=ve,ie){ve.ownerElement=ie;var Ze=ie.ownerDocument;Ze&&(Ie&&Ce(Ze,ie,Ie),fe(Ze,ie,ve))}}function W(ie,ue,ve){var Ie=K(ue,ve);if(Ie>=0){for(var Ze=ue.length-1;Ie<Ze;)ue[Ie]=ue[++Ie];if(ue.length=Ze,ie){var wt=ie.ownerDocument;wt&&(Ce(wt,ie,ve),ve.ownerElement=null)}}else throw new Z(H,new Error(ie.tagName+"@"+ve))}G.prototype={length:0,item:ne.prototype.item,getNamedItem:function(ie){for(var ue=this.length;ue--;){var ve=this[ue];if(ve.nodeName==ie)return ve}},setNamedItem:function(ie){var ue=ie.ownerElement;if(ue&&ue!=this._ownerElement)throw new Z(Q);var ve=this.getNamedItem(ie.nodeName);return M(this._ownerElement,this,ie,ve),ve},setNamedItemNS:function(ie){var ue=ie.ownerElement,ve;if(ue&&ue!=this._ownerElement)throw new Z(Q);return ve=this.getNamedItemNS(ie.namespaceURI,ie.localName),M(this._ownerElement,this,ie,ve),ve},removeNamedItem:function(ie){var ue=this.getNamedItem(ie);return W(this._ownerElement,this,ue),ue},removeNamedItemNS:function(ie,ue){var ve=this.getNamedItemNS(ie,ue);return W(this._ownerElement,this,ve),ve},getNamedItemNS:function(ie,ue){for(var ve=this.length;ve--;){var Ie=this[ve];if(Ie.localName==ue&&Ie.namespaceURI==ie)return Ie}return null}};function ee(){}ee.prototype={hasFeature:function(ie,ue){return!0},createDocument:function(ie,ue,ve){var Ie=new he;if(Ie.implementation=this,Ie.childNodes=new ne,Ie.doctype=ve||null,ve&&Ie.appendChild(ve),ue){var Ze=Ie.createElementNS(ie,ue);Ie.appendChild(Ze)}return Ie},createDocumentType:function(ie,ue,ve){var Ie=new pt;return Ie.name=ie,Ie.nodeName=ie,Ie.publicId=ue||"",Ie.systemId=ve||"",Ie}};function z(){}z.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(ie,ue){return At(this,ie,ue)},replaceChild:function(ie,ue){At(this,ie,ue,ft),ue&&this.removeChild(ue)},removeChild:function(ie){return Ye(this,ie)},appendChild:function(ie){return this.insertBefore(ie,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(ie){return Xt(this.ownerDocument||this,this,ie)},normalize:function(){for(var ie=this.firstChild;ie;){var ue=ie.nextSibling;ue&&ue.nodeType==g&&ie.nodeType==g?(this.removeChild(ue),ie.appendData(ue.data)):(ie.normalize(),ie=ue)}},isSupported:function(ie,ue){return this.ownerDocument.implementation.hasFeature(ie,ue)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(ie){for(var ue=this;ue;){var ve=ue._nsMap;if(ve){for(var Ie in ve)if(Object.prototype.hasOwnProperty.call(ve,Ie)&&ve[Ie]===ie)return Ie}ue=ue.nodeType==m?ue.ownerDocument:ue.parentNode}return null},lookupNamespaceURI:function(ie){for(var ue=this;ue;){var ve=ue._nsMap;if(ve&&Object.prototype.hasOwnProperty.call(ve,ie))return ve[ie];ue=ue.nodeType==m?ue.ownerDocument:ue.parentNode}return null},isDefaultNamespace:function(ie){var ue=this.lookupPrefix(ie);return ue==null}};function ae(ie){return ie=="<"&&"&lt;"||ie==">"&&"&gt;"||ie=="&"&&"&amp;"||ie=='"'&&"&quot;"||"&#"+ie.charCodeAt()+";"}u(d,z),u(d,z.prototype);function ce(ie,ue){if(ue(ie))return!0;if(ie=ie.firstChild)do if(ce(ie,ue))return!0;while(ie=ie.nextSibling)}function he(){this.ownerDocument=this}function fe(ie,ue,ve){ie&&ie._inc++;var Ie=ve.namespaceURI;Ie===n.XMLNS&&(ue._nsMap[ve.prefix?ve.localName:""]=ve.value)}function Ce(ie,ue,ve,Ie){ie&&ie._inc++;var Ze=ve.namespaceURI;Ze===n.XMLNS&&delete ue._nsMap[ve.prefix?ve.localName:""]}function Me(ie,ue,ve){if(ie&&ie._inc){ie._inc++;var Ie=ue.childNodes;if(ve)Ie[Ie.length++]=ve;else{for(var Ze=ue.firstChild,wt=0;Ze;)Ie[wt++]=Ze,Ze=Ze.nextSibling;Ie.length=wt,delete Ie[Ie.length]}}}function Ye(ie,ue){var ve=ue.previousSibling,Ie=ue.nextSibling;return ve?ve.nextSibling=Ie:ie.firstChild=Ie,Ie?Ie.previousSibling=ve:ie.lastChild=ve,ue.parentNode=null,ue.previousSibling=null,ue.nextSibling=null,Me(ie.ownerDocument,ie),ue}function We(ie){return ie&&(ie.nodeType===z.DOCUMENT_NODE||ie.nodeType===z.DOCUMENT_FRAGMENT_NODE||ie.nodeType===z.ELEMENT_NODE)}function Be(ie){return ie&&(tt(ie)||Ue(ie)||rt(ie)||ie.nodeType===z.DOCUMENT_FRAGMENT_NODE||ie.nodeType===z.COMMENT_NODE||ie.nodeType===z.PROCESSING_INSTRUCTION_NODE)}function rt(ie){return ie&&ie.nodeType===z.DOCUMENT_TYPE_NODE}function tt(ie){return ie&&ie.nodeType===z.ELEMENT_NODE}function Ue(ie){return ie&&ie.nodeType===z.TEXT_NODE}function Pe(ie,ue){var ve=ie.childNodes||[];if(e(ve,tt)||rt(ue))return!1;var Ie=e(ve,rt);return!(ue&&Ie&&ve.indexOf(Ie)>ve.indexOf(ue))}function Qe(ie,ue){var ve=ie.childNodes||[];function Ie(wt){return tt(wt)&&wt!==ue}if(e(ve,Ie))return!1;var Ze=e(ve,rt);return!(ue&&Ze&&ve.indexOf(Ze)>ve.indexOf(ue))}function Je(ie,ue,ve){if(!We(ie))throw new Z(F,"Unexpected parent node type "+ie.nodeType);if(ve&&ve.parentNode!==ie)throw new Z(H,"child not in parent");if(!Be(ue)||rt(ue)&&ie.nodeType!==z.DOCUMENT_NODE)throw new Z(F,"Unexpected node type "+ue.nodeType+" for parent node type "+ie.nodeType)}function nt(ie,ue,ve){var Ie=ie.childNodes||[],Ze=ue.childNodes||[];if(ue.nodeType===z.DOCUMENT_FRAGMENT_NODE){var wt=Ze.filter(tt);if(wt.length>1||e(Ze,Ue))throw new Z(F,"More than one element or text in fragment");if(wt.length===1&&!Pe(ie,ve))throw new Z(F,"Element in fragment can not be inserted before doctype")}if(tt(ue)&&!Pe(ie,ve))throw new Z(F,"Only one element can be added and only after doctype");if(rt(ue)){if(e(Ie,rt))throw new Z(F,"Only one doctype is allowed");var Gt=e(Ie,tt);if(ve&&Ie.indexOf(Gt)<Ie.indexOf(ve))throw new Z(F,"Doctype can only be inserted before an element");if(!ve&&Gt)throw new Z(F,"Doctype can not be appended since element is present")}}function ft(ie,ue,ve){var Ie=ie.childNodes||[],Ze=ue.childNodes||[];if(ue.nodeType===z.DOCUMENT_FRAGMENT_NODE){var wt=Ze.filter(tt);if(wt.length>1||e(Ze,Ue))throw new Z(F,"More than one element or text in fragment");if(wt.length===1&&!Qe(ie,ve))throw new Z(F,"Element in fragment can not be inserted before doctype")}if(tt(ue)&&!Qe(ie,ve))throw new Z(F,"Only one element can be added and only after doctype");if(rt(ue)){if(e(Ie,function(Ee){return rt(Ee)&&Ee!==ve}))throw new Z(F,"Only one doctype is allowed");var Gt=e(Ie,tt);if(ve&&Ie.indexOf(Gt)<Ie.indexOf(ve))throw new Z(F,"Doctype can only be inserted before an element")}}function At(ie,ue,ve,Ie){Je(ie,ue,ve),ie.nodeType===z.DOCUMENT_NODE&&(Ie||nt)(ie,ue,ve);var Ze=ue.parentNode;if(Ze&&Ze.removeChild(ue),ue.nodeType===D){var wt=ue.firstChild;if(wt==null)return ue;var Gt=ue.lastChild}else wt=Gt=ue;var sr=ve?ve.previousSibling:ie.lastChild;wt.previousSibling=sr,Gt.nextSibling=ve,sr?sr.nextSibling=wt:ie.firstChild=wt,ve==null?ie.lastChild=Gt:ve.previousSibling=Gt;do wt.parentNode=ie;while(wt!==Gt&&(wt=wt.nextSibling));return Me(ie.ownerDocument||ie,ie),ue.nodeType==D&&(ue.firstChild=ue.lastChild=null),ue}function ot(ie,ue){return ue.parentNode&&ue.parentNode.removeChild(ue),ue.parentNode=ie,ue.previousSibling=ie.lastChild,ue.nextSibling=null,ue.previousSibling?ue.previousSibling.nextSibling=ue:ie.firstChild=ue,ie.lastChild=ue,Me(ie.ownerDocument,ie,ue),ue}he.prototype={nodeName:"#document",nodeType:T,doctype:null,documentElement:null,_inc:1,insertBefore:function(ie,ue){if(ie.nodeType==D){for(var ve=ie.firstChild;ve;){var Ie=ve.nextSibling;this.insertBefore(ve,ue),ve=Ie}return ie}return At(this,ie,ue),ie.ownerDocument=this,this.documentElement===null&&ie.nodeType===p&&(this.documentElement=ie),ie},removeChild:function(ie){return this.documentElement==ie&&(this.documentElement=null),Ye(this,ie)},replaceChild:function(ie,ue){At(this,ie,ue,ft),ie.ownerDocument=this,ue&&this.removeChild(ue),tt(ie)&&(this.documentElement=ie)},importNode:function(ie,ue){return Yt(this,ie,ue)},getElementById:function(ie){var ue=null;return ce(this.documentElement,function(ve){if(ve.nodeType==p&&ve.getAttribute("id")==ie)return ue=ve,!0}),ue},getElementsByClassName:function(ie){var ue=o(ie);return new re(this,function(ve){var Ie=[];return ue.length>0&&ce(ve.documentElement,function(Ze){if(Ze!==ve&&Ze.nodeType===p){var wt=Ze.getAttribute("class");if(wt){var Gt=ie===wt;if(!Gt){var sr=o(wt);Gt=ue.every(l(sr))}Gt&&Ie.push(Ze)}}}),Ie})},createElement:function(ie){var ue=new qe;ue.ownerDocument=this,ue.nodeName=ie,ue.tagName=ie,ue.localName=ie,ue.childNodes=new ne;var ve=ue.attributes=new G;return ve._ownerElement=ue,ue},createDocumentFragment:function(){var ie=new nr;return ie.ownerDocument=this,ie.childNodes=new ne,ie},createTextNode:function(ie){var ue=new St;return ue.ownerDocument=this,ue.appendData(ie),ue},createComment:function(ie){var ue=new bt;return ue.ownerDocument=this,ue.appendData(ie),ue},createCDATASection:function(ie){var ue=new Mt;return ue.ownerDocument=this,ue.appendData(ie),ue},createProcessingInstruction:function(ie,ue){var ve=new Ht;return ve.ownerDocument=this,ve.tagName=ve.nodeName=ve.target=ie,ve.nodeValue=ve.data=ue,ve},createAttribute:function(ie){var ue=new mt;return ue.ownerDocument=this,ue.name=ie,ue.nodeName=ie,ue.localName=ie,ue.specified=!0,ue},createEntityReference:function(ie){var ue=new Qt;return ue.ownerDocument=this,ue.nodeName=ie,ue},createElementNS:function(ie,ue){var ve=new qe,Ie=ue.split(":"),Ze=ve.attributes=new G;return ve.childNodes=new ne,ve.ownerDocument=this,ve.nodeName=ue,ve.tagName=ue,ve.namespaceURI=ie,Ie.length==2?(ve.prefix=Ie[0],ve.localName=Ie[1]):ve.localName=ue,Ze._ownerElement=ve,ve},createAttributeNS:function(ie,ue){var ve=new mt,Ie=ue.split(":");return ve.ownerDocument=this,ve.nodeName=ue,ve.name=ue,ve.namespaceURI=ie,ve.specified=!0,Ie.length==2?(ve.prefix=Ie[0],ve.localName=Ie[1]):ve.localName=ue,ve}},c(he,z);function qe(){this._nsMap={}}qe.prototype={nodeType:p,hasAttribute:function(ie){return this.getAttributeNode(ie)!=null},getAttribute:function(ie){var ue=this.getAttributeNode(ie);return ue&&ue.value||""},getAttributeNode:function(ie){return this.attributes.getNamedItem(ie)},setAttribute:function(ie,ue){var ve=this.ownerDocument.createAttribute(ie);ve.value=ve.nodeValue=""+ue,this.setAttributeNode(ve)},removeAttribute:function(ie){var ue=this.getAttributeNode(ie);ue&&this.removeAttributeNode(ue)},appendChild:function(ie){return ie.nodeType===D?this.insertBefore(ie,null):ot(this,ie)},setAttributeNode:function(ie){return this.attributes.setNamedItem(ie)},setAttributeNodeNS:function(ie){return this.attributes.setNamedItemNS(ie)},removeAttributeNode:function(ie){return this.attributes.removeNamedItem(ie.nodeName)},removeAttributeNS:function(ie,ue){var ve=this.getAttributeNodeNS(ie,ue);ve&&this.removeAttributeNode(ve)},hasAttributeNS:function(ie,ue){return this.getAttributeNodeNS(ie,ue)!=null},getAttributeNS:function(ie,ue){var ve=this.getAttributeNodeNS(ie,ue);return ve&&ve.value||""},setAttributeNS:function(ie,ue,ve){var Ie=this.ownerDocument.createAttributeNS(ie,ue);Ie.value=Ie.nodeValue=""+ve,this.setAttributeNode(Ie)},getAttributeNodeNS:function(ie,ue){return this.attributes.getNamedItemNS(ie,ue)},getElementsByTagName:function(ie){return new re(this,function(ue){var ve=[];return ce(ue,function(Ie){Ie!==ue&&Ie.nodeType==p&&(ie==="*"||Ie.tagName==ie)&&ve.push(Ie)}),ve})},getElementsByTagNameNS:function(ie,ue){return new re(this,function(ve){var Ie=[];return ce(ve,function(Ze){Ze!==ve&&Ze.nodeType===p&&(ie==="*"||Ze.namespaceURI===ie)&&(ue==="*"||Ze.localName==ue)&&Ie.push(Ze)}),Ie})}},he.prototype.getElementsByTagName=qe.prototype.getElementsByTagName,he.prototype.getElementsByTagNameNS=qe.prototype.getElementsByTagNameNS,c(qe,z);function mt(){}mt.prototype.nodeType=m,c(mt,z);function st(){}st.prototype={data:"",substringData:function(ie,ue){return this.data.substring(ie,ie+ue)},appendData:function(ie){ie=this.data+ie,this.nodeValue=this.data=ie,this.length=ie.length},insertData:function(ie,ue){this.replaceData(ie,0,ue)},appendChild:function(ie){throw new Error(B[F])},deleteData:function(ie,ue){this.replaceData(ie,ue,"")},replaceData:function(ie,ue,ve){var Ie=this.data.substring(0,ie),Ze=this.data.substring(ie+ue);ve=Ie+ve+Ze,this.nodeValue=this.data=ve,this.length=ve.length}},c(st,z);function St(){}St.prototype={nodeName:"#text",nodeType:g,splitText:function(ie){var ue=this.data,ve=ue.substring(ie);ue=ue.substring(0,ie),this.data=this.nodeValue=ue,this.length=ue.length;var Ie=this.ownerDocument.createTextNode(ve);return this.parentNode&&this.parentNode.insertBefore(Ie,this.nextSibling),Ie}},c(St,st);function bt(){}bt.prototype={nodeName:"#comment",nodeType:C},c(bt,st);function Mt(){}Mt.prototype={nodeName:"#cdata-section",nodeType:E},c(Mt,st);function pt(){}pt.prototype.nodeType=I,c(pt,z);function rr(){}rr.prototype.nodeType=P,c(rr,z);function Ft(){}Ft.prototype.nodeType=b,c(Ft,z);function Qt(){}Qt.prototype.nodeType=x,c(Qt,z);function nr(){}nr.prototype.nodeName="#document-fragment",nr.prototype.nodeType=D,c(nr,z);function Ht(){}Ht.prototype.nodeType=S,c(Ht,z);function Ar(){}Ar.prototype.serializeToString=function(ie,ue,ve){return Ir.call(ie,ue,ve)},z.prototype.toString=Ir;function Ir(ie,ue){var ve=[],Ie=this.nodeType==9&&this.documentElement||this,Ze=Ie.prefix,wt=Ie.namespaceURI;if(wt&&Ze==null){var Ze=Ie.lookupPrefix(wt);if(Ze==null)var Gt=[{namespace:wt,prefix:null}]}return Oe(this,ve,ie,ue,Gt),ve.join("")}function Qr(ie,ue,ve){var Ie=ie.prefix||"",Ze=ie.namespaceURI;if(!Ze||Ie==="xml"&&Ze===n.XML||Ze===n.XMLNS)return!1;for(var wt=ve.length;wt--;){var Gt=ve[wt];if(Gt.prefix===Ie)return Gt.namespace!==Ze}return!0}function ke(ie,ue,ve){ie.push(" ",ue,'="',ve.replace(/[<>&"\t\n\r]/g,ae),'"')}function Oe(ie,ue,ve,Ie,Ze){if(Ze||(Ze=[]),Ie)if(ie=Ie(ie),ie){if(typeof ie=="string"){ue.push(ie);return}}else return;switch(ie.nodeType){case p:var wt=ie.attributes,Gt=wt.length,Tt=ie.firstChild,sr=ie.tagName;ve=n.isHTML(ie.namespaceURI)||ve;var Ee=sr;if(!ve&&!ie.prefix&&ie.namespaceURI){for(var we,Ne=0;Ne<wt.length;Ne++)if(wt.item(Ne).name==="xmlns"){we=wt.item(Ne).value;break}if(!we)for(var ze=Ze.length-1;ze>=0;ze--){var it=Ze[ze];if(it.prefix===""&&it.namespace===ie.namespaceURI){we=it.namespace;break}}if(we!==ie.namespaceURI)for(var ze=Ze.length-1;ze>=0;ze--){var it=Ze[ze];if(it.namespace===ie.namespaceURI){it.prefix&&(Ee=it.prefix+":"+sr);break}}}ue.push("<",Ee);for(var xt=0;xt<Gt;xt++){var lt=wt.item(xt);lt.prefix=="xmlns"?Ze.push({prefix:lt.localName,namespace:lt.value}):lt.nodeName=="xmlns"&&Ze.push({prefix:"",namespace:lt.value})}for(var xt=0;xt<Gt;xt++){var lt=wt.item(xt);if(Qr(lt,ve,Ze)){var Et=lt.prefix||"",It=lt.namespaceURI;ke(ue,Et?"xmlns:"+Et:"xmlns",It),Ze.push({prefix:Et,namespace:It})}Oe(lt,ue,ve,Ie,Ze)}if(sr===Ee&&Qr(ie,ve,Ze)){var Et=ie.prefix||"",It=ie.namespaceURI;ke(ue,Et?"xmlns:"+Et:"xmlns",It),Ze.push({prefix:Et,namespace:It})}if(Tt||ve&&!/^(?:meta|link|img|br|hr|input)$/i.test(sr)){if(ue.push(">"),ve&&/^script$/i.test(sr))for(;Tt;)Tt.data?ue.push(Tt.data):Oe(Tt,ue,ve,Ie,Ze.slice()),Tt=Tt.nextSibling;else for(;Tt;)Oe(Tt,ue,ve,Ie,Ze.slice()),Tt=Tt.nextSibling;ue.push("</",Ee,">")}else ue.push("/>");return;case T:case D:for(var Tt=ie.firstChild;Tt;)Oe(Tt,ue,ve,Ie,Ze.slice()),Tt=Tt.nextSibling;return;case m:return ke(ue,ie.name,ie.value);case g:return ue.push(ie.data.replace(/[<&>]/g,ae));case E:return ue.push("<![CDATA[",ie.data,"]]>");case C:return ue.push("<!--",ie.data,"-->");case I:var Rt=ie.publicId,Dt=ie.systemId;if(ue.push("<!DOCTYPE ",ie.name),Rt)ue.push(" PUBLIC ",Rt),Dt&&Dt!="."&&ue.push(" ",Dt),ue.push(">");else if(Dt&&Dt!=".")ue.push(" SYSTEM ",Dt,">");else{var Ct=ie.internalSubset;Ct&&ue.push(" [",Ct,"]"),ue.push(">")}return;case S:return ue.push("<?",ie.target," ",ie.data,"?>");case x:return ue.push("&",ie.nodeName,";");default:ue.push("??",ie.nodeName)}}function Yt(ie,ue,ve){var Ie;switch(ue.nodeType){case p:Ie=ue.cloneNode(!1),Ie.ownerDocument=ie;case D:break;case m:ve=!0;break}if(Ie||(Ie=ue.cloneNode(!1)),Ie.ownerDocument=ie,Ie.parentNode=null,ve)for(var Ze=ue.firstChild;Ze;)Ie.appendChild(Yt(ie,Ze,ve)),Ze=Ze.nextSibling;return Ie}function Xt(ie,ue,ve){var Ie=new ue.constructor;for(var Ze in ue)if(Object.prototype.hasOwnProperty.call(ue,Ze)){var wt=ue[Ze];typeof wt!="object"&&wt!=Ie[Ze]&&(Ie[Ze]=wt)}switch(ue.childNodes&&(Ie.childNodes=new ne),Ie.ownerDocument=ie,Ie.nodeType){case p:var Gt=ue.attributes,sr=Ie.attributes=new G,Ee=Gt.length;sr._ownerElement=Ie;for(var we=0;we<Ee;we++)Ie.setAttributeNode(Xt(ie,Gt.item(we),!0));break;case m:ve=!0}if(ve)for(var Ne=ue.firstChild;Ne;)Ie.appendChild(Xt(ie,Ne,ve)),Ne=Ne.nextSibling;return Ie}function ir(ie,ue,ve){ie[ue]=ve}try{if(Object.defineProperty){let ie=function(ue){switch(ue.nodeType){case p:case D:var ve=[];for(ue=ue.firstChild;ue;)ue.nodeType!==7&&ue.nodeType!==8&&ve.push(ie(ue)),ue=ue.nextSibling;return ve.join("");default:return ue.nodeValue}};Object.defineProperty(re.prototype,"length",{get:function(){return se(this),this.$$length}}),Object.defineProperty(z.prototype,"textContent",{get:function(){return ie(this)},set:function(ue){switch(this.nodeType){case p:case D:for(;this.firstChild;)this.removeChild(this.firstChild);(ue||String(ue))&&this.appendChild(this.ownerDocument.createTextNode(ue));break;default:this.data=ue,this.value=ue,this.nodeValue=ue}}}),ir=function(ue,ve,Ie){ue["$$"+ve]=Ie}}}catch{}return dom.DocumentType=pt,dom.DOMException=Z,dom.DOMImplementation=ee,dom.Element=qe,dom.Node=z,dom.NodeList=ne,dom.XMLSerializer=Ar,dom}var domParser={},entities={},hasRequiredEntities;function requireEntities(){return hasRequiredEntities||(hasRequiredEntities=1,function(t){var e=requireConventions().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES}(entities)),entities}var sax={},hasRequiredSax;function requireSax(){if(hasRequiredSax)return sax;hasRequiredSax=1;var t=requireConventions().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+e.source+n.source+"*(?::"+e.source+n.source+"*)?$"),i=0,a=1,o=2,l=3,u=4,c=5,d=6,p=7;function m(F,H){this.message=F,this.locator=H,Error.captureStackTrace&&Error.captureStackTrace(this,m)}m.prototype=new Error,m.prototype.name=m.name;function g(){}g.prototype={parse:function(F,H,Q){var Z=this.domBuilder;Z.startDocument(),I(H,H={}),E(F,H,Q,Z,this.errorHandler),Z.endDocument()}};function E(F,H,Q,Z,ne){function re(qe){if(qe>65535){qe-=65536;var mt=55296+(qe>>10),st=56320+(qe&1023);return String.fromCharCode(mt,st)}else return String.fromCharCode(qe)}function se(qe){var mt=qe.slice(1,-1);return Object.hasOwnProperty.call(Q,mt)?Q[mt]:mt.charAt(0)==="#"?re(parseInt(mt.substr(1).replace("x","0x"))):(ne.error("entity not found:"+qe),qe)}function G(qe){if(qe>he){var mt=F.substring(he,qe).replace(/&#?\w+;/g,se);z&&K(he),Z.characters(mt,0,qe-he),he=qe}}function K(qe,mt){for(;qe>=W&&(mt=ee.exec(F));)M=mt.index,W=M+mt[0].length,z.lineNumber++;z.columnNumber=qe-M+1}for(var M=0,W=0,ee=/.*(?:\r\n?|\n)|.*$/g,z=Z.locator,ae=[{currentNSMap:H}],ce={},he=0;;){try{var fe=F.indexOf("<",he);if(fe<0){if(!F.substr(he).match(/^\s*$/)){var Ce=Z.doc,Me=Ce.createTextNode(F.substr(he));Ce.appendChild(Me),Z.currentElement=Me}return}switch(fe>he&&G(fe),F.charAt(fe+1)){case"/":var Je=F.indexOf(">",fe+3),Ye=F.substring(fe+2,Je).replace(/[ \t\n\r]+$/g,""),We=ae.pop();Je<0?(Ye=F.substring(fe+2).replace(/[\s<].*/,""),ne.error("end tag name: "+Ye+" is not complete:"+We.tagName),Je=fe+1+Ye.length):Ye.match(/\s</)&&(Ye=Ye.replace(/[\s<].*/,""),ne.error("end tag name: "+Ye+" maybe not complete"),Je=fe+1+Ye.length);var Be=We.localNSMap,rt=We.tagName==Ye,tt=rt||We.tagName&&We.tagName.toLowerCase()==Ye.toLowerCase();if(tt){if(Z.endElement(We.uri,We.localName,Ye),Be)for(var Ue in Be)Object.prototype.hasOwnProperty.call(Be,Ue)&&Z.endPrefixMapping(Ue);rt||ne.fatalError("end tag name: "+Ye+" is not match the current start tagName:"+We.tagName)}else ae.push(We);Je++;break;case"?":z&&K(fe),Je=P(F,fe,Z);break;case"!":z&&K(fe),Je=D(F,fe,Z,ne);break;default:z&&K(fe);var Pe=new O,Qe=ae[ae.length-1].currentNSMap,Je=b(F,fe,Pe,Qe,se,ne),nt=Pe.length;if(!Pe.closed&&T(F,Je,Pe.tagName,ce)&&(Pe.closed=!0,Q.nbsp||ne.warning("unclosed xml attribute")),z&&nt){for(var ft=x(z,{}),At=0;At<nt;At++){var ot=Pe[At];K(ot.offset),ot.locator=x(z,{})}Z.locator=ft,S(Pe,Z,Qe)&&ae.push(Pe),Z.locator=z}else S(Pe,Z,Qe)&&ae.push(Pe);t.isHTML(Pe.uri)&&!Pe.closed?Je=C(F,Je,Pe.tagName,se,Z):Je++}}catch(qe){if(qe instanceof m)throw qe;ne.error("element parse error: "+qe),Je=-1}Je>he?he=Je:G(Math.max(fe,he)+1)}}function x(F,H){return H.lineNumber=F.lineNumber,H.columnNumber=F.columnNumber,H}function b(F,H,Q,Z,ne,re){function se(z,ae,ce){Q.attributeNames.hasOwnProperty(z)&&re.fatalError("Attribute "+z+" redefined"),Q.addValue(z,ae.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ne),ce)}for(var G,K,M=++H,W=i;;){var ee=F.charAt(M);switch(ee){case"=":if(W===a)G=F.slice(H,M),W=l;else if(W===o)W=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(W===l||W===a)if(W===a&&(re.warning('attribute value must after "="'),G=F.slice(H,M)),H=M+1,M=F.indexOf(ee,H),M>0)K=F.slice(H,M),se(G,K,H-1),W=c;else throw new Error("attribute value no end '"+ee+"' match");else if(W==u)K=F.slice(H,M),se(G,K,H),re.warning('attribute "'+G+'" missed start quot('+ee+")!!"),H=M+1,W=c;else throw new Error('attribute value must after "="');break;case"/":switch(W){case i:Q.setTagName(F.slice(H,M));case c:case d:case p:W=p,Q.closed=!0;case u:case a:break;case o:Q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return re.error("unexpected end of input"),W==i&&Q.setTagName(F.slice(H,M)),M;case">":switch(W){case i:Q.setTagName(F.slice(H,M));case c:case d:case p:break;case u:case a:K=F.slice(H,M),K.slice(-1)==="/"&&(Q.closed=!0,K=K.slice(0,-1));case o:W===o&&(K=G),W==u?(re.warning('attribute "'+K+'" missed quot(")!'),se(G,K,H)):((!t.isHTML(Z[""])||!K.match(/^(?:disabled|checked|selected)$/i))&&re.warning('attribute "'+K+'" missed value!! "'+K+'" instead!!'),se(K,K,H));break;case l:throw new Error("attribute value missed!!")}return M;case"":ee=" ";default:if(ee<=" ")switch(W){case i:Q.setTagName(F.slice(H,M)),W=d;break;case a:G=F.slice(H,M),W=o;break;case u:var K=F.slice(H,M);re.warning('attribute "'+K+'" missed quot(")!!'),se(G,K,H);case c:W=d;break}else switch(W){case o:Q.tagName,(!t.isHTML(Z[""])||!G.match(/^(?:disabled|checked|selected)$/i))&&re.warning('attribute "'+G+'" missed value!! "'+G+'" instead2!!'),se(G,G,H),H=M,W=a;break;case c:re.warning('attribute space is required"'+G+'"!!');case d:W=a,H=M;break;case l:W=u,H=M;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}M++}}function S(F,H,Q){for(var Z=F.tagName,ne=null,ee=F.length;ee--;){var re=F[ee],se=re.qName,G=re.value,z=se.indexOf(":");if(z>0)var K=re.prefix=se.slice(0,z),M=se.slice(z+1),W=K==="xmlns"&&M;else M=se,K=null,W=se==="xmlns"&&"";re.localName=M,W!==!1&&(ne==null&&(ne={},I(Q,Q={})),Q[W]=ne[W]=G,re.uri=t.XMLNS,H.startPrefixMapping(W,G))}for(var ee=F.length;ee--;){re=F[ee];var K=re.prefix;K&&(K==="xml"&&(re.uri=t.XML),K!=="xmlns"&&(re.uri=Q[K||""]))}var z=Z.indexOf(":");z>0?(K=F.prefix=Z.slice(0,z),M=F.localName=Z.slice(z+1)):(K=null,M=F.localName=Z);var ae=F.uri=Q[K||""];if(H.startElement(ae,M,Z,F),F.closed){if(H.endElement(ae,M,Z),ne)for(K in ne)Object.prototype.hasOwnProperty.call(ne,K)&&H.endPrefixMapping(K)}else return F.currentNSMap=Q,F.localNSMap=ne,!0}function C(F,H,Q,Z,ne){if(/^(?:script|textarea)$/i.test(Q)){var re=F.indexOf("</"+Q+">",H),se=F.substring(H+1,re);if(/[&<]/.test(se))return/^script$/i.test(Q)?(ne.characters(se,0,se.length),re):(se=se.replace(/&#?\w+;/g,Z),ne.characters(se,0,se.length),re)}return H+1}function T(F,H,Q,Z){var ne=Z[Q];return ne==null&&(ne=F.lastIndexOf("</"+Q+">"),ne<H&&(ne=F.lastIndexOf("</"+Q)),Z[Q]=ne),ne<H}function I(F,H){for(var Q in F)Object.prototype.hasOwnProperty.call(F,Q)&&(H[Q]=F[Q])}function D(F,H,Q,Z){var ne=F.charAt(H+2);switch(ne){case"-":if(F.charAt(H+3)==="-"){var re=F.indexOf("-->",H+4);return re>H?(Q.comment(F,H+4,re-H-4),re+3):(Z.error("Unclosed comment"),-1)}else return-1;default:if(F.substr(H+3,6)=="CDATA["){var re=F.indexOf("]]>",H+9);return Q.startCDATA(),Q.characters(F,H+9,re-H-9),Q.endCDATA(),re+3}var se=B(F,H),G=se.length;if(G>1&&/!doctype/i.test(se[0][0])){var K=se[1][0],M=!1,W=!1;G>3&&(/^public$/i.test(se[2][0])?(M=se[3][0],W=G>4&&se[4][0]):/^system$/i.test(se[2][0])&&(W=se[3][0]));var ee=se[G-1];return Q.startDTD(K,M,W),Q.endDTD(),ee.index+ee[0].length}}return-1}function P(F,H,Q){var Z=F.indexOf("?>",H);if(Z){var ne=F.substring(H,Z).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ne?(ne[0].length,Q.processingInstruction(ne[1],ne[2]),Z+2):-1}return-1}function O(){this.attributeNames={}}O.prototype={setTagName:function(F){if(!s.test(F))throw new Error("invalid tagName:"+F);this.tagName=F},addValue:function(F,H,Q){if(!s.test(F))throw new Error("invalid attribute:"+F);this.attributeNames[F]=this.length,this[this.length++]={qName:F,value:H,offset:Q}},length:0,getLocalName:function(F){return this[F].localName},getLocator:function(F){return this[F].locator},getQName:function(F){return this[F].qName},getURI:function(F){return this[F].uri},getValue:function(F){return this[F].value}};function B(F,H){var Q,Z=[],ne=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ne.lastIndex=H,ne.exec(F);Q=ne.exec(F);)if(Z.push(Q),Q[1])return Z}return sax.XMLReader=g,sax.ParseError=m,sax}var hasRequiredDomParser;function requireDomParser(){if(hasRequiredDomParser)return domParser;hasRequiredDomParser=1;var t=requireConventions(),e=requireDom(),n=requireEntities(),s=requireSax(),i=e.DOMImplementation,a=t.NAMESPACE,o=s.ParseError,l=s.XMLReader;function u(b){return b.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function c(b){this.options=b||{locator:{}}}c.prototype.parseFromString=function(b,S){var C=this.options,T=new l,I=C.domBuilder||new p,D=C.errorHandler,P=C.locator,O=C.xmlns||{},B=/\/x?html?$/.test(S),F=B?n.HTML_ENTITIES:n.XML_ENTITIES;P&&I.setDocumentLocator(P),T.errorHandler=d(D,I,P),T.domBuilder=C.domBuilder||I,B&&(O[""]=a.HTML),O.xml=O.xml||a.XML;var H=C.normalizeLineEndings||u;return b&&typeof b=="string"?T.parse(H(b),O,F):T.errorHandler.error("invalid doc source"),I.doc};function d(b,S,C){if(!b){if(S instanceof p)return S;b=S}var T={},I=b instanceof Function;C=C||{};function D(P){var O=b[P];!O&&I&&(O=b.length==2?function(B){b(P,B)}:b),T[P]=O&&function(B){O("[xmldom "+P+"]	"+B+g(C))}||function(){}}return D("warning"),D("error"),D("fatalError"),T}function p(){this.cdata=!1}function m(b,S){S.lineNumber=b.lineNumber,S.columnNumber=b.columnNumber}p.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(b,S,C,T){var I=this.doc,D=I.createElementNS(b,C||S),P=T.length;x(this,D),this.currentElement=D,this.locator&&m(this.locator,D);for(var O=0;O<P;O++){var b=T.getURI(O),B=T.getValue(O),C=T.getQName(O),F=I.createAttributeNS(b,C);this.locator&&m(T.getLocator(O),F),F.value=F.nodeValue=B,D.setAttributeNode(F)}},endElement:function(b,S,C){var T=this.currentElement;T.tagName,this.currentElement=T.parentNode},startPrefixMapping:function(b,S){},endPrefixMapping:function(b){},processingInstruction:function(b,S){var C=this.doc.createProcessingInstruction(b,S);this.locator&&m(this.locator,C),x(this,C)},ignorableWhitespace:function(b,S,C){},characters:function(b,S,C){if(b=E.apply(this,arguments),b){if(this.cdata)var T=this.doc.createCDATASection(b);else var T=this.doc.createTextNode(b);this.currentElement?this.currentElement.appendChild(T):/^\s*$/.test(b)&&this.doc.appendChild(T),this.locator&&m(this.locator,T)}},skippedEntity:function(b){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(b){(this.locator=b)&&(b.lineNumber=0)},comment:function(b,S,C){b=E.apply(this,arguments);var T=this.doc.createComment(b);this.locator&&m(this.locator,T),x(this,T)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(b,S,C){var T=this.doc.implementation;if(T&&T.createDocumentType){var I=T.createDocumentType(b,S,C);this.locator&&m(this.locator,I),x(this,I),this.doc.doctype=I}},warning:function(b){console.warn("[xmldom warning]	"+b,g(this.locator))},error:function(b){console.error("[xmldom error]	"+b,g(this.locator))},fatalError:function(b){throw new o(b,this.locator)}};function g(b){if(b)return`
@`+(b.systemId||"")+"#[line:"+b.lineNumber+",col:"+b.columnNumber+"]"}function E(b,S,C){return typeof b=="string"?b.substr(S,C):b.length>=S+C||S?new java.lang.String(b,S,C)+"":b}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(b){p.prototype[b]=function(){return null}});function x(b,S){b.currentElement?b.currentElement.appendChild(S):b.doc.appendChild(S)}return domParser.__DOMHandler=p,domParser.normalizeLineEndings=u,domParser.DOMParser=c,domParser}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var t=requireDom();return lib.DOMImplementation=t.DOMImplementation,lib.XMLSerializer=t.XMLSerializer,lib.DOMParser=requireDomParser().DOMParser,lib}var libExports=requireLib();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const isObject$1=t=>!!t&&typeof t=="object",merge$2=(...t)=>t.reduce((e,n)=>(typeof n!="object"||Object.keys(n).forEach(s=>{Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=e[s].concat(n[s]):isObject$1(e[s])&&isObject$1(n[s])?e[s]=merge$2(e[s],n[s]):e[s]=n[s]}),e),{}),values$1=t=>Object.keys(t).map(e=>t[e]),range=(t,e)=>{const n=[];for(let s=t;s<e;s++)n.push(s);return n},flatten=t=>t.reduce((e,n)=>e.concat(n),[]),from=t=>{if(!t.length)return[];const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e},findIndexes=(t,e)=>t.reduce((n,s,i)=>(s[e]&&n.push(i),n),[]),union=(t,e)=>values$1(t.reduce((n,s)=>(s.forEach(i=>{n[e(i)]=i}),n),{}));var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const urlTypeToSegment=({baseUrl:t="",source:e="",range:n="",indexRange:s=""})=>{const i={uri:e,resolvedUri:resolveUrl$1(t||"",e)};if(n||s){const o=(n||s).split("-");let l=window$1.BigInt?window$1.BigInt(o[0]):parseInt(o[0],10),u=window$1.BigInt?window$1.BigInt(o[1]):parseInt(o[1],10);l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l)),u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u));let c;typeof u=="bigint"||typeof l=="bigint"?c=window$1.BigInt(u)-window$1.BigInt(l)+window$1.BigInt(1):c=u-l+1,typeof c=="bigint"&&c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),i.byterange={length:c,offset:l}}return i},byteRangeToString=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=window$1.BigInt(t.offset)+window$1.BigInt(t.length)-window$1.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},parseEndNumber=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),segmentRange={static(t){const{duration:e,timescale:n=1,sourceDuration:s,periodDuration:i}=t,a=parseEndNumber(t.endNumber),o=e/n;return typeof a=="number"?{start:0,end:a}:typeof i=="number"?{start:0,end:i/o}:{start:0,end:s/o}},dynamic(t){const{NOW:e,clientOffset:n,availabilityStartTime:s,timescale:i=1,duration:a,periodStart:o=0,minimumUpdatePeriod:l=0,timeShiftBufferDepth:u=1/0}=t,c=parseEndNumber(t.endNumber),d=(e+n)/1e3,p=s+o,g=d+l-p,E=Math.ceil(g*i/a),x=Math.floor((d-p-u)*i/a),b=Math.floor((d-p)*i/a);return{start:Math.max(0,x),end:typeof c=="number"?c:Math.min(E,b)}}},toSegments=t=>e=>{const{duration:n,timescale:s=1,periodStart:i,startNumber:a=1}=t;return{number:a+e,duration:n/s,timeline:i,time:e*n}},parseByDuration=t=>{const{type:e,duration:n,timescale:s=1,periodDuration:i,sourceDuration:a}=t,{start:o,end:l}=segmentRange[e](t),u=range(o,l).map(toSegments(t));if(e==="static"){const c=u.length-1,d=typeof i=="number"?i:a;u[c].duration=d-n/s*c}return u},segmentsFromBase=t=>{const{baseUrl:e,initialization:n={},sourceDuration:s,indexRange:i="",periodStart:a,presentationTime:o,number:l=0,duration:u}=t;if(!e)throw new Error(errors.NO_BASE_URL);const c=urlTypeToSegment({baseUrl:e,source:n.sourceURL,range:n.range}),d=urlTypeToSegment({baseUrl:e,source:e,indexRange:i});if(d.map=c,u){const p=parseByDuration(t);p.length&&(d.duration=p[0].duration,d.timeline=p[0].timeline)}else s&&(d.duration=s,d.timeline=a);return d.presentationTime=o||a,d.number=l,[d]},addSidxSegmentsToPlaylist$1=(t,e,n)=>{const s=t.sidx.map?t.sidx.map:null,i=t.sidx.duration,a=t.timeline||0,o=t.sidx.byterange,l=o.offset+o.length,u=e.timescale,c=e.references.filter(b=>b.referenceType!==1),d=[],p=t.endList?"static":"dynamic",m=t.sidx.timeline;let g=m,E=t.mediaSequence||0,x;typeof e.firstOffset=="bigint"?x=window$1.BigInt(l)+e.firstOffset:x=l+e.firstOffset;for(let b=0;b<c.length;b++){const S=e.references[b],C=S.referencedSize,T=S.subsegmentDuration;let I;typeof x=="bigint"?I=x+window$1.BigInt(C)-window$1.BigInt(1):I=x+C-1;const D=`${x}-${I}`,O=segmentsFromBase({baseUrl:n,timescale:u,timeline:a,periodStart:m,presentationTime:g,number:E,duration:T,sourceDuration:i,indexRange:D,type:p})[0];s&&(O.map=s),d.push(O),typeof x=="bigint"?x+=window$1.BigInt(C):x+=C,g+=T/u,E++}return t.segments=d,t},SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"],TIME_FUDGE=1/60,getUniqueTimelineStarts=t=>union(t,({timeline:e})=>e).sort((e,n)=>e.timeline>n.timeline?1:-1),findPlaylistWithName=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null},getMediaGroupPlaylists=t=>{let e=[];return forEachMediaGroup$1(t,SUPPORTED_MEDIA_TYPES,(n,s,i,a)=>{e=e.concat(n.playlists||[])}),e},updateMediaSequenceForPlaylist=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((n,s)=>{n.number=t.mediaSequence+s})},updateSequenceNumbers=({oldPlaylists:t,newPlaylists:e,timelineStarts:n})=>{e.forEach(s=>{s.discontinuitySequence=n.findIndex(function({timeline:u}){return u===s.timeline});const i=findPlaylistWithName(t,s.attributes.NAME);if(!i||s.sidx)return;const a=s.segments[0],o=i.segments.findIndex(function(u){return Math.abs(u.presentationTime-a.presentationTime)<TIME_FUDGE});if(o===-1){updateMediaSequenceForPlaylist({playlist:s,mediaSequence:i.mediaSequence+i.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!i.segments.length&&s.timeline>i.timeline||i.segments.length&&s.timeline>i.segments[i.segments.length-1].timeline)&&s.discontinuitySequence--;return}i.segments[o].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),updateMediaSequenceForPlaylist({playlist:s,mediaSequence:i.segments[o].number})})},positionManifestOnTimeline=({oldManifest:t,newManifest:e})=>{const n=t.playlists.concat(getMediaGroupPlaylists(t)),s=e.playlists.concat(getMediaGroupPlaylists(e));return e.timelineStarts=getUniqueTimelineStarts([t.timelineStarts,e.timelineStarts]),updateSequenceNumbers({oldPlaylists:n,newPlaylists:s,timelineStarts:e.timelineStarts}),e},generateSidxKey=t=>t&&t.uri+"-"+byteRangeToString(t.byterange),mergeDiscontiguousPlaylists=t=>{const e=t.reduce(function(s,i){return s[i.attributes.baseUrl]||(s[i.attributes.baseUrl]=[]),s[i.attributes.baseUrl].push(i),s},{});let n=[];return Object.values(e).forEach(s=>{const i=values$1(s.reduce((a,o)=>{const l=o.attributes.id+(o.attributes.lang||"");return a[l]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),a[l].segments.push(...o.segments)),o.attributes.contentProtection&&(a[l].attributes.contentProtection=o.attributes.contentProtection)):(a[l]=o,a[l].attributes.timelineStarts=[]),a[l].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),a},{}));n=n.concat(i)}),n.map(s=>(s.discontinuityStarts=findIndexes(s.segments||[],"discontinuity"),s))},addSidxSegmentsToPlaylist=(t,e)=>{const n=generateSidxKey(t.sidx),s=n&&e[n]&&e[n].sidx;return s&&addSidxSegmentsToPlaylist$1(t,s,t.sidx.resolvedUri),t},addSidxSegmentsToPlaylists=(t,e={})=>{if(!Object.keys(e).length)return t;for(const n in t)t[n]=addSidxSegmentsToPlaylist(t[n],e);return t},formatAudioPlaylist=({attributes:t,segments:e,sidx:n,mediaSequence:s,discontinuitySequence:i,discontinuityStarts:a},o)=>{const l={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:i,discontinuityStarts:a,timelineStarts:t.timelineStarts,mediaSequence:s,segments:e};return t.contentProtection&&(l.contentProtection=t.contentProtection),t.serviceLocation&&(l.attributes.serviceLocation=t.serviceLocation),n&&(l.sidx=n),o&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l},formatVttPlaylist=({attributes:t,segments:e,mediaSequence:n,discontinuityStarts:s,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const a={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(a.CODECS=t.codecs);const o={attributes:a,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:s,discontinuitySequence:i,mediaSequence:n,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o},organizeAudioPlaylists=(t,e={},n=!1)=>{let s;const i=t.reduce((a,o)=>{const l=o.attributes.role&&o.attributes.role.value||"",u=o.attributes.lang||"";let c=o.attributes.label||"main";if(u&&!o.attributes.label){const p=l?` (${l})`:"";c=`${o.attributes.lang}${p}`}a[c]||(a[c]={language:u,autoselect:!0,default:l==="main",playlists:[],uri:""});const d=addSidxSegmentsToPlaylist(formatAudioPlaylist(o,n),e);return a[c].playlists.push(d),typeof s>"u"&&l==="main"&&(s=o,s.default=!0),a},{});if(!s){const a=Object.keys(i)[0];i[a].default=!0}return i},organizeVttPlaylists=(t,e={})=>t.reduce((n,s)=>{const i=s.attributes.label||s.attributes.lang||"text",a=s.attributes.lang||"und";return n[i]||(n[i]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),n[i].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(s),e)),n},{}),organizeCaptionServices=t=>t.reduce((e,n)=>(n&&n.forEach(s=>{const{channel:i,language:a}=s;e[a]={autoselect:!1,default:!1,instreamId:i,language:a},s.hasOwnProperty("aspectRatio")&&(e[a].aspectRatio=s.aspectRatio),s.hasOwnProperty("easyReader")&&(e[a].easyReader=s.easyReader),s.hasOwnProperty("3D")&&(e[a]["3D"]=s["3D"])}),e),{}),formatVideoPlaylist=({attributes:t,segments:e,sidx:n,discontinuityStarts:s})=>{const i={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:s,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(i.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(i.contentProtection=t.contentProtection),t.serviceLocation&&(i.attributes.serviceLocation=t.serviceLocation),n&&(i.sidx=n),i},videoOnly=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",audioOnly=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",vttOnly=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",addMediaSequenceValues=(t,e)=>{t.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:s}){return s===n.timeline}),n.segments&&n.segments.forEach((s,i)=>{s.number=i})})},flattenMediaGroupPlaylists=t=>t?Object.keys(t).reduce((e,n)=>{const s=t[n];return e.concat(s.playlists)},[]):[],toM3u8=({dashPlaylists:t,locations:e,contentSteering:n,sidxMapping:s={},previousManifest:i,eventStream:a})=>{if(!t.length)return{};const{sourceDuration:o,type:l,suggestedPresentationDelay:u,minimumUpdatePeriod:c}=t[0].attributes,d=mergeDiscontiguousPlaylists(t.filter(videoOnly)).map(formatVideoPlaylist),p=mergeDiscontiguousPlaylists(t.filter(audioOnly)),m=mergeDiscontiguousPlaylists(t.filter(vttOnly)),g=t.map(I=>I.attributes.captionServices).filter(Boolean),E={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:addSidxSegmentsToPlaylists(d,s)};c>=0&&(E.minimumUpdatePeriod=c*1e3),e&&(E.locations=e),n&&(E.contentSteering=n),l==="dynamic"&&(E.suggestedPresentationDelay=u),a&&a.length>0&&(E.eventStream=a);const x=E.playlists.length===0,b=p.length?organizeAudioPlaylists(p,s,x):null,S=m.length?organizeVttPlaylists(m,s):null,C=d.concat(flattenMediaGroupPlaylists(b),flattenMediaGroupPlaylists(S)),T=C.map(({timelineStarts:I})=>I);return E.timelineStarts=getUniqueTimelineStarts(T),addMediaSequenceValues(C,E.timelineStarts),b&&(E.mediaGroups.AUDIO.audio=b),S&&(E.mediaGroups.SUBTITLES.subs=S),g.length&&(E.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(g)),i?positionManifestOnTimeline({oldManifest:i,newManifest:E}):E},getLiveRValue=(t,e,n)=>{const{NOW:s,clientOffset:i,availabilityStartTime:a,timescale:o=1,periodStart:l=0,minimumUpdatePeriod:u=0}=t,c=(s+i)/1e3,d=a+l,m=c+u-d;return Math.ceil((m*o-e)/n)},parseByTimeline=(t,e)=>{const{type:n,minimumUpdatePeriod:s=0,media:i="",sourceDuration:a,timescale:o=1,startNumber:l=1,periodStart:u}=t,c=[];let d=-1;for(let p=0;p<e.length;p++){const m=e[p],g=m.d,E=m.r||0,x=m.t||0;d<0&&(d=x),x&&x>d&&(d=x);let b;if(E<0){const T=p+1;T===e.length?n==="dynamic"&&s>0&&i.indexOf("$Number$")>0?b=getLiveRValue(t,d,g):b=(a*o-d)/g:b=(e[T].t-d)/g}else b=E+1;const S=l+c.length+b;let C=l+c.length;for(;C<S;)c.push({number:C,duration:g/o,time:d,timeline:u}),d+=g,C++}return c},identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,identifierReplacement=t=>(e,n,s,i)=>{if(e==="$$")return"$";if(typeof t[n]>"u")return e;const a=""+t[n];return n==="RepresentationID"||(s?i=parseInt(i,10):i=1,a.length>=i)?a:`${new Array(i-a.length+1).join("0")}${a}`},constructTemplateUrl=(t,e)=>t.replace(identifierPattern,identifierReplacement(e)),parseTemplateInfo=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?parseByDuration(t):parseByTimeline(t,e),segmentsFromTemplate=(t,e)=>{const n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:s={sourceURL:"",range:""}}=t,i=urlTypeToSegment({baseUrl:t.baseUrl,source:constructTemplateUrl(s.sourceURL,n),range:s.range});return parseTemplateInfo(t,e).map(o=>{n.Number=o.number,n.Time=o.time;const l=constructTemplateUrl(t.media||"",n),u=t.timescale||1,c=t.presentationTimeOffset||0,d=t.periodStart+(o.time-c)/u;return{uri:l,timeline:o.timeline,duration:o.duration,resolvedUri:resolveUrl$1(t.baseUrl||"",l),map:i,number:o.number,presentationTime:d}})},SegmentURLToSegmentObject=(t,e)=>{const{baseUrl:n,initialization:s={}}=t,i=urlTypeToSegment({baseUrl:n,source:s.sourceURL,range:s.range}),a=urlTypeToSegment({baseUrl:n,source:e.media,range:e.mediaRange});return a.map=i,a},segmentsFromList=(t,e)=>{const{duration:n,segmentUrls:s=[],periodStart:i}=t;if(!n&&!e||n&&e)throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);const a=s.map(u=>SegmentURLToSegmentObject(t,u));let o;return n&&(o=parseByDuration(t)),e&&(o=parseByTimeline(t,e)),o.map((u,c)=>{if(a[c]){const d=a[c],p=t.timescale||1,m=t.presentationTimeOffset||0;return d.timeline=u.timeline,d.duration=u.duration,d.number=u.number,d.presentationTime=i+(u.time-m)/p,d}}).filter(u=>u)},generateSegments=({attributes:t,segmentInfo:e})=>{let n,s;e.template?(s=segmentsFromTemplate,n=merge$2(t,e.template)):e.base?(s=segmentsFromBase,n=merge$2(t,e.base)):e.list&&(s=segmentsFromList,n=merge$2(t,e.list));const i={attributes:t};if(!s)return i;const a=s(n,e.segmentTimeline);if(n.duration){const{duration:o,timescale:l=1}=n;n.duration=o/l}else a.length?n.duration=a.reduce((o,l)=>Math.max(o,Math.ceil(l.duration)),0):n.duration=0;return i.attributes=n,i.segments=a,e.base&&n.indexRange&&(i.sidx=a[0],i.segments=[]),i},toPlaylists=t=>t.map(generateSegments),findChildren=(t,e)=>from(t.childNodes).filter(({tagName:n})=>n===e),getContent=t=>t.textContent.trim(),parseDivisionValue=t=>parseFloat(t.split("/").reduce((e,n)=>e/n)),parseDuration=t=>{const l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!l)return 0;const[u,c,d,p,m,g]=l.slice(1);return parseFloat(u||0)*31536e3+parseFloat(c||0)*2592e3+parseFloat(d||0)*86400+parseFloat(p||0)*3600+parseFloat(m||0)*60+parseFloat(g||0)},parseDate=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),parsers={mediaPresentationDuration(t){return parseDuration(t)},availabilityStartTime(t){return parseDate(t)/1e3},minimumUpdatePeriod(t){return parseDuration(t)},suggestedPresentationDelay(t){return parseDuration(t)},type(t){return t},timeShiftBufferDepth(t){return parseDuration(t)},start(t){return parseDuration(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return parseDivisionValue(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?parseDuration(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},parseAttributes=t=>t&&t.attributes?from(t.attributes).reduce((e,n)=>{const s=parsers[n.name]||parsers.DEFAULT;return e[n.name]=s(n.value),e},{}):{},keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},buildBaseUrls=(t,e)=>e.length?flatten(t.map(function(n){return e.map(function(s){const i=getContent(s),a=resolveUrl$1(n.baseUrl,i),o=merge$2(parseAttributes(s),{baseUrl:a});return a!==i&&!o.serviceLocation&&n.serviceLocation&&(o.serviceLocation=n.serviceLocation),o})})):t,getSegmentInformation=t=>{const e=findChildren(t,"SegmentTemplate")[0],n=findChildren(t,"SegmentList")[0],s=n&&findChildren(n,"SegmentURL").map(p=>merge$2({tag:"SegmentURL"},parseAttributes(p))),i=findChildren(t,"SegmentBase")[0],a=n||e,o=a&&findChildren(a,"SegmentTimeline")[0],l=n||i||e,u=l&&findChildren(l,"Initialization")[0],c=e&&parseAttributes(e);c&&u?c.initialization=u&&parseAttributes(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});const d={template:c,segmentTimeline:o&&findChildren(o,"S").map(p=>parseAttributes(p)),list:n&&merge$2(parseAttributes(n),{segmentUrls:s,initialization:parseAttributes(u)}),base:i&&merge$2(parseAttributes(i),{initialization:parseAttributes(u)})};return Object.keys(d).forEach(p=>{d[p]||delete d[p]}),d},inheritBaseUrls=(t,e,n)=>s=>{const i=findChildren(s,"BaseURL"),a=buildBaseUrls(e,i),o=merge$2(t,parseAttributes(s)),l=getSegmentInformation(s);return a.map(u=>({segmentInfo:merge$2(n,l),attributes:merge$2(o,u)}))},generateKeySystemInformation=t=>t.reduce((e,n)=>{const s=parseAttributes(n);s.schemeIdUri&&(s.schemeIdUri=s.schemeIdUri.toLowerCase());const i=keySystemsMap[s.schemeIdUri];if(i){e[i]={attributes:s};const a=findChildren(n,"cenc:pssh")[0];if(a){const o=getContent(a);e[i].pssh=o&&decodeB64ToUint8Array(o)}}return e},{}),parseCaptionServiceMetadata=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{let s,i;return i=n,/^CC\d=/.test(n)?[s,i]=n.split("="):/^CC\d$/.test(n)&&(s=n),{channel:s,language:i}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{const s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[i,a=""]=n.split("=");s.channel=i,s.language=n,a.split(",").forEach(o=>{const[l,u]=o.split(":");l==="lang"?s.language=u:l==="er"?s.easyReader=Number(u):l==="war"?s.aspectRatio=Number(u):l==="3D"&&(s["3D"]=Number(u))})}else s.language=n;return s.channel&&(s.channel="SERVICE"+s.channel),s})},toEventStream=t=>flatten(findChildren(t.node,"EventStream").map(e=>{const n=parseAttributes(e),s=n.schemeIdUri;return findChildren(e,"Event").map(i=>{const a=parseAttributes(i),o=a.presentationTime||0,l=n.timescale||1,u=a.duration||0,c=o/l+t.attributes.start;return{schemeIdUri:s,value:n.value,id:a.id,start:c,end:c+u/l,messageData:getContent(i)||a.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),toRepresentations=(t,e,n)=>s=>{const i=parseAttributes(s),a=buildBaseUrls(e,findChildren(s,"BaseURL")),o=findChildren(s,"Role")[0],l={role:parseAttributes(o)};let u=merge$2(t,i,l);const c=findChildren(s,"Accessibility")[0],d=parseCaptionServiceMetadata(parseAttributes(c));d&&(u=merge$2(u,{captionServices:d}));const p=findChildren(s,"Label")[0];if(p&&p.childNodes.length){const b=p.childNodes[0].nodeValue.trim();u=merge$2(u,{label:b})}const m=generateKeySystemInformation(findChildren(s,"ContentProtection"));Object.keys(m).length&&(u=merge$2(u,{contentProtection:m}));const g=getSegmentInformation(s),E=findChildren(s,"Representation"),x=merge$2(n,g);return flatten(E.map(inheritBaseUrls(u,a,x)))},toAdaptationSets=(t,e)=>(n,s)=>{const i=buildBaseUrls(e,findChildren(n.node,"BaseURL")),a=merge$2(t,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(a.periodDuration=n.attributes.duration);const o=findChildren(n.node,"AdaptationSet"),l=getSegmentInformation(n.node);return flatten(o.map(toRepresentations(a,i,l)))},generateContentSteeringInformation=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const n=merge$2({serverURL:getContent(t[0])},parseAttributes(t[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},getPeriodStart=({attributes:t,priorPeriodAttributes:e,mpdType:n})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&n==="static"?0:null,inheritAttributes=(t,e={})=>{const{manifestUri:n="",NOW:s=Date.now(),clientOffset:i=0,eventHandler:a=function(){}}=e,o=findChildren(t,"Period");if(!o.length)throw new Error(errors.INVALID_NUMBER_OF_PERIOD);const l=findChildren(t,"Location"),u=parseAttributes(t),c=buildBaseUrls([{baseUrl:n}],findChildren(t,"BaseURL")),d=findChildren(t,"ContentSteering");u.type=u.type||"static",u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=s,u.clientOffset=i,l.length&&(u.locations=l.map(getContent));const p=[];return o.forEach((m,g)=>{const E=parseAttributes(m),x=p[g-1];E.start=getPeriodStart({attributes:E,priorPeriodAttributes:x?x.attributes:null,mpdType:u.type}),p.push({node:m,attributes:E})}),{locations:u.locations,contentSteeringInfo:generateContentSteeringInformation(d,a),representationInfo:flatten(p.map(toAdaptationSets(u,c))),eventStream:flatten(p.map(toEventStream))}},stringToMpdXml=t=>{if(t==="")throw new Error(errors.DASH_EMPTY_MANIFEST);const e=new libExports.DOMParser;let n,s;try{n=e.parseFromString(t,"application/xml"),s=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!s||s&&s.getElementsByTagName("parsererror").length>0)throw new Error(errors.DASH_INVALID_XML);return s},parseUTCTimingScheme=t=>{const e=findChildren(t,"UTCTiming")[0];if(!e)return null;const n=parseAttributes(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},parse=(t,e={})=>{const n=inheritAttributes(stringToMpdXml(t),e),s=toPlaylists(n.representationInfo);return toM3u8({dashPlaylists:s,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})},parseUTCTiming=t=>parseUTCTimingScheme(stringToMpdXml(t));var numbers,hasRequiredNumbers;function requireNumbers(){if(hasRequiredNumbers)return numbers;hasRequiredNumbers=1;var t=Math.pow(2,32),e=function(n){var s=new DataView(n.buffer,n.byteOffset,n.byteLength),i;return s.getBigUint64?(i=s.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):s.getUint32(0)*t+s.getUint32(4)};return numbers={getUint64:e,MAX_UINT32:t},numbers}var parseSidx_1,hasRequiredParseSidx;function requireParseSidx(){if(hasRequiredParseSidx)return parseSidx_1;hasRequiredParseSidx=1;var t=requireNumbers().getUint64,e=function(n){var s=new DataView(n.buffer,n.byteOffset,n.byteLength),i={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:s.getUint32(4),timescale:s.getUint32(8)},a=12;i.version===0?(i.earliestPresentationTime=s.getUint32(a),i.firstOffset=s.getUint32(a+4),a+=8):(i.earliestPresentationTime=t(n.subarray(a)),i.firstOffset=t(n.subarray(a+8)),a+=16),a+=2;var o=s.getUint16(a);for(a+=2;o>0;a+=12,o--)i.references.push({referenceType:(n[a]&128)>>>7,referencedSize:s.getUint32(a)&2147483647,subsegmentDuration:s.getUint32(a+4),startsWithSap:!!(n[a+8]&128),sapType:(n[a+8]&112)>>>4,sapDeltaTime:s.getUint32(a+8)&268435455});return i};return parseSidx_1=e,parseSidx_1}var parseSidxExports=requireParseSidx();const parseSidx=getDefaultExportFromCjs(parseSidxExports);var ID3=toUint8([73,68,51]),getId3Size=function t(e,n){n===void 0&&(n=0),e=toUint8(e);var s=e[n+5],i=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],a=(s&16)>>4;return a?i+20:i+10},getId3Offset=function t(e,n){return n===void 0&&(n=0),e=toUint8(e),e.length-n<10||!bytesMatch(e,ID3,{offset:n})?n:(n+=getId3Size(e,n),t(e,n))},normalizePath$1=function t(e){return typeof e=="string"?stringToBytes(e):e},normalizePaths$1=function t(e){return Array.isArray(e)?e.map(function(n){return normalizePath$1(n)}):[normalizePath$1(e)]},findBox=function t(e,n,s){s===void 0&&(s=!1),n=normalizePaths$1(n),e=toUint8(e);var i=[];if(!n.length)return i;for(var a=0;a<e.length;){var o=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,l=e.subarray(a+4,a+8);if(o===0)break;var u=a+o;if(u>e.length){if(s)break;u=e.length}var c=e.subarray(a+8,u);bytesMatch(l,n[0])&&(n.length===1?i.push(c):i.push.apply(i,t(c,n.slice(1),s))),a=u}return i},EBML_TAGS={EBML:toUint8([26,69,223,163]),DocType:toUint8([66,130]),Segment:toUint8([24,83,128,103]),SegmentInfo:toUint8([21,73,169,102]),Tracks:toUint8([22,84,174,107]),Track:toUint8([174]),TrackNumber:toUint8([215]),DefaultDuration:toUint8([35,227,131]),TrackEntry:toUint8([174]),TrackType:toUint8([131]),FlagDefault:toUint8([136]),CodecID:toUint8([134]),CodecPrivate:toUint8([99,162]),VideoTrack:toUint8([224]),AudioTrack:toUint8([225]),Cluster:toUint8([31,67,182,117]),Timestamp:toUint8([231]),TimestampScale:toUint8([42,215,177]),BlockGroup:toUint8([160]),BlockDuration:toUint8([155]),Block:toUint8([161]),SimpleBlock:toUint8([163])},LENGTH_TABLE=[128,64,32,16,8,4,2,1],getLength=function t(e){for(var n=1,s=0;s<LENGTH_TABLE.length&&!(e&LENGTH_TABLE[s]);s++)n++;return n},getvint=function t(e,n,s,i){s===void 0&&(s=!0),i===void 0&&(i=!1);var a=getLength(e[n]),o=e.subarray(n,n+a);return s&&(o=Array.prototype.slice.call(e,n,n+a),o[0]^=LENGTH_TABLE[a-1]),{length:a,value:bytesToNumber(o,{signed:i}),bytes:o}},normalizePath=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return t(n)}):typeof e=="number"?numberToBytes(e):e},normalizePaths=function t(e){return Array.isArray(e)?e.map(function(n){return normalizePath(n)}):[normalizePath(e)]},getInfinityDataSize=function t(e,n,s){if(s>=n.length)return n.length;var i=getvint(n,s,!1);if(bytesMatch(e.bytes,i.bytes))return s;var a=getvint(n,s+i.length);return t(e,n,s+a.length+a.value+i.length)},findEbml=function t(e,n){n=normalizePaths(n),e=toUint8(e);var s=[];if(!n.length)return s;for(var i=0;i<e.length;){var a=getvint(e,i,!1),o=getvint(e,i+a.length),l=i+a.length+o.length;o.value===127&&(o.value=getInfinityDataSize(a,e,l),o.value!==e.length&&(o.value-=l));var u=l+o.value>e.length?e.length:l+o.value,c=e.subarray(l,u);bytesMatch(n[0],a.bytes)&&(n.length===1?s.push(c):s=s.concat(t(c,n.slice(1))));var d=a.length+o.length+c.length;i+=d}return s},NAL_TYPE_ONE=toUint8([0,0,0,1]),NAL_TYPE_TWO=toUint8([0,0,1]),EMULATION_PREVENTION=toUint8([0,0,3]),discardEmulationPreventionBytes=function t(e){for(var n=[],s=1;s<e.length-2;)bytesMatch(e.subarray(s,s+3),EMULATION_PREVENTION)&&(n.push(s+2),s++),s++;if(n.length===0)return e;var i=e.length-n.length,a=new Uint8Array(i),o=0;for(s=0;s<i;o++,s++)o===n[0]&&(o++,n.shift()),a[s]=e[o];return a},findNal=function t(e,n,s,i){e=toUint8(e),s=[].concat(s);for(var a=0,o,l=0;a<e.length&&(l<i||o);){var u=void 0;if(bytesMatch(e.subarray(a),NAL_TYPE_ONE)?u=4:bytesMatch(e.subarray(a),NAL_TYPE_TWO)&&(u=3),!u){a++;continue}if(l++,o)return discardEmulationPreventionBytes(e.subarray(o,a));var c=void 0;n==="h264"?c=e[a+u]&31:n==="h265"&&(c=e[a+u]>>1&63),s.indexOf(c)!==-1&&(o=a+u),a+=u+(n==="h264"?1:2)}return e.subarray(0,0)},findH264Nal=function t(e,n,s){return findNal(e,"h264",n,s)},findH265Nal=function t(e,n,s){return findNal(e,"h265",n,s)},CONSTANTS={webm:toUint8([119,101,98,109]),matroska:toUint8([109,97,116,114,111,115,107,97]),flac:toUint8([102,76,97,67]),ogg:toUint8([79,103,103,83]),ac3:toUint8([11,119]),riff:toUint8([82,73,70,70]),avi:toUint8([65,86,73]),wav:toUint8([87,65,86,69]),"3gp":toUint8([102,116,121,112,51,103]),mp4:toUint8([102,116,121,112]),fmp4:toUint8([115,116,121,112]),mov:toUint8([102,116,121,112,113,116]),moov:toUint8([109,111,111,118]),moof:toUint8([109,111,111,102])},_isLikely={aac:function t(e){var n=getId3Offset(e);return bytesMatch(e,[255,16],{offset:n,mask:[255,22]})},mp3:function t(e){var n=getId3Offset(e);return bytesMatch(e,[255,2],{offset:n,mask:[255,6]})},webm:function t(e){var n=findEbml(e,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(n,CONSTANTS.webm)},mkv:function t(e){var n=findEbml(e,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(n,CONSTANTS.matroska)},mp4:function t(e){if(_isLikely["3gp"](e)||_isLikely.mov(e))return!1;if(bytesMatch(e,CONSTANTS.mp4,{offset:4})||bytesMatch(e,CONSTANTS.fmp4,{offset:4})||bytesMatch(e,CONSTANTS.moof,{offset:4})||bytesMatch(e,CONSTANTS.moov,{offset:4}))return!0},mov:function t(e){return bytesMatch(e,CONSTANTS.mov,{offset:4})},"3gp":function t(e){return bytesMatch(e,CONSTANTS["3gp"],{offset:4})},ac3:function t(e){var n=getId3Offset(e);return bytesMatch(e,CONSTANTS.ac3,{offset:n})},ts:function t(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function t(e){var n=getId3Offset(e);return bytesMatch(e,CONSTANTS.flac,{offset:n})},ogg:function t(e){return bytesMatch(e,CONSTANTS.ogg)},avi:function t(e){return bytesMatch(e,CONSTANTS.riff)&&bytesMatch(e,CONSTANTS.avi,{offset:8})},wav:function t(e){return bytesMatch(e,CONSTANTS.riff)&&bytesMatch(e,CONSTANTS.wav,{offset:8})},h264:function t(e){return findH264Nal(e,7,3).length},h265:function t(e){return findH265Nal(e,[32,33],3).length}},isLikelyTypes=Object.keys(_isLikely).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(t){var e=_isLikely[t];_isLikely[t]=function(n){return e(toUint8(n))}});var isLikely=_isLikely,detectContainerForBytes=function t(e){e=toUint8(e);for(var n=0;n<isLikelyTypes.length;n++){var s=isLikelyTypes[n];if(isLikely[s](e))return s}return""},isLikelyFmp4MediaSegment=function t(e){return findBox(e,["moof"]).length>0},clock,hasRequiredClock;function requireClock(){if(hasRequiredClock)return clock;hasRequiredClock=1;var t=9e4,e,n,s,i,a,o,l;return e=function(u){return u*t},n=function(u,c){return u*c},s=function(u){return u/t},i=function(u,c){return u/c},a=function(u,c){return e(i(u,c))},o=function(u,c){return n(s(u),c)},l=function(u,c,d){return s(d?u:u-c)},clock={ONE_SECOND_IN_TS:t,secondsToVideoTs:e,secondsToAudioTs:n,videoTsToSeconds:s,audioTsToSeconds:i,audioTsToVideoTs:a,videoTsToAudioTs:o,metadataTsToSeconds:l},clock}var clockExports=requireClock();/**
 * @license
 * Video.js 8.20.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var version$6="8.20.0";const hooks_={},hooks=function(t,e){return hooks_[t]=hooks_[t]||[],e&&(hooks_[t]=hooks_[t].concat(e)),hooks_[t]},hook=function(t,e){hooks(t,e)},removeHook=function(t,e){const n=hooks(t).indexOf(e);return n<=-1?!1:(hooks_[t]=hooks_[t].slice(),hooks_[t].splice(n,1),!0)},hookOnce=function(t,e){hooks(t,[].concat(e).map(n=>{const s=(...i)=>(removeHook(t,s),n(...i));return s}))},FullscreenApi={prefixed:!0},apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],specApi=apiMap[0];let browserApi;for(let t=0;t<apiMap.length;t++)if(apiMap[t][1]in document$1){browserApi=apiMap[t];break}if(browserApi){for(let t=0;t<browserApi.length;t++)FullscreenApi[specApi[t]]=browserApi[t];FullscreenApi.prefixed=browserApi[0]!==specApi[0]}let history=[];const LogByTypeFactory=(t,e,n)=>(s,i,a)=>{const o=e.levels[i],l=new RegExp(`^(${o})$`);let u=t;if(s!=="log"&&a.unshift(s.toUpperCase()+":"),n&&(u=`%c${t}`,a.unshift(n)),a.unshift(u+":"),history){history.push([].concat(a));const d=history.length-1e3;history.splice(0,d>0?d:0)}if(!window$1.console)return;let c=window$1.console[s];!c&&s==="debug"&&(c=window$1.console.info||window$1.console.log),!(!c||!o||!l.test(s))&&c[Array.isArray(a)?"apply":"call"](window$1.console,a)};function createLogger$1(t,e=":",n=""){let s="info",i;function a(...o){i("log",s,o)}return i=LogByTypeFactory(t,a,n),a.createLogger=(o,l,u)=>{const c=l!==void 0?l:e,d=u!==void 0?u:n,p=`${t} ${c} ${o}`;return createLogger$1(p,c,d)},a.createNewLogger=(o,l,u)=>createLogger$1(o,l,u),a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},a.level=o=>{if(typeof o=="string"){if(!a.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);s=o}return s},a.history=()=>history?[].concat(history):[],a.history.filter=o=>(history||[]).filter(l=>new RegExp(`.*${o}.*`).test(l[0])),a.history.clear=()=>{history&&(history.length=0)},a.history.disable=()=>{history!==null&&(history.length=0,history=null)},a.history.enable=()=>{history===null&&(history=[])},a.error=(...o)=>i("error",s,o),a.warn=(...o)=>i("warn",s,o),a.debug=(...o)=>i("debug",s,o),a}const log$1=createLogger$1("VIDEOJS"),createLogger=log$1.createLogger,toString=Object.prototype.toString,keys=function(t){return isObject(t)?Object.keys(t):[]};function each(t,e){keys(t).forEach(n=>e(t[n],n))}function reduce(t,e,n=0){return keys(t).reduce((s,i)=>e(s,t[i],i),n)}function isObject(t){return!!t&&typeof t=="object"}function isPlain(t){return isObject(t)&&toString.call(t)==="[object Object]"&&t.constructor===Object}function merge$1(...t){const e={};return t.forEach(n=>{n&&each(n,(s,i)=>{if(!isPlain(s)){e[i]=s;return}isPlain(e[i])||(e[i]={}),e[i]=merge$1(e[i],s)})}),e}function values(t={}){const e=[];for(const n in t)if(t.hasOwnProperty(n)){const s=t[n];e.push(s)}return e}function defineLazyProperty(t,e,n,s=!0){const i=o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),a={configurable:!0,enumerable:!0,get(){const o=n();return i(o),o}};return s&&(a.set=i),Object.defineProperty(t,e,a)}var Obj=Object.freeze({__proto__:null,each,reduce,isObject,isPlain,merge:merge$1,values,defineLazyProperty});let IS_IPOD=!1,IOS_VERSION=null,IS_ANDROID=!1,ANDROID_VERSION,IS_FIREFOX=!1,IS_EDGE=!1,IS_CHROMIUM=!1,IS_CHROME=!1,CHROMIUM_VERSION=null,CHROME_VERSION=null;const IS_CHROMECAST_RECEIVER=!!(window$1.cast&&window$1.cast.framework&&window$1.cast.framework.CastReceiverContext);let IE_VERSION=null,IS_SAFARI=!1,IS_WINDOWS=!1,IS_IPAD=!1,IS_IPHONE=!1,IS_TIZEN=!1,IS_WEBOS=!1,IS_SMART_TV=!1;const TOUCH_ENABLED=!!(isReal()&&("ontouchstart"in window$1||window$1.navigator.maxTouchPoints||window$1.DocumentTouch&&window$1.document instanceof window$1.DocumentTouch)),UAD=window$1.navigator&&window$1.navigator.userAgentData;UAD&&UAD.platform&&UAD.brands&&(IS_ANDROID=UAD.platform==="Android",IS_EDGE=!!UAD.brands.find(t=>t.brand==="Microsoft Edge"),IS_CHROMIUM=!!UAD.brands.find(t=>t.brand==="Chromium"),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=(UAD.brands.find(t=>t.brand==="Chromium")||{}).version||null,IS_WINDOWS=UAD.platform==="Windows");if(!IS_CHROMIUM){const t=window$1.navigator&&window$1.navigator.userAgent||"";IS_IPOD=/iPod/i.test(t),IOS_VERSION=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),IS_ANDROID=/Android/i.test(t),ANDROID_VERSION=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),s=e[2]&&parseFloat(e[2]);return n&&s?parseFloat(e[1]+"."+e[2]):n||null}(),IS_FIREFOX=/Firefox/i.test(t),IS_EDGE=/Edg/i.test(t),IS_CHROMIUM=/Chrome/i.test(t)||/CriOS/i.test(t),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),IE_VERSION=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(n=11),n}(),IS_TIZEN=/Tizen/i.test(t),IS_WEBOS=/Web0S/i.test(t),IS_SMART_TV=IS_TIZEN||IS_WEBOS,IS_SAFARI=/Safari/i.test(t)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE&&!IS_SMART_TV,IS_WINDOWS=/Windows/i.test(t),IS_IPAD=/iPad/i.test(t)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(t),IS_IPHONE=/iPhone/i.test(t)&&!IS_IPAD}const IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD,IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=Object.freeze({__proto__:null,get IS_IPOD(){return IS_IPOD},get IOS_VERSION(){return IOS_VERSION},get IS_ANDROID(){return IS_ANDROID},get ANDROID_VERSION(){return ANDROID_VERSION},get IS_FIREFOX(){return IS_FIREFOX},get IS_EDGE(){return IS_EDGE},get IS_CHROMIUM(){return IS_CHROMIUM},get IS_CHROME(){return IS_CHROME},get CHROMIUM_VERSION(){return CHROMIUM_VERSION},get CHROME_VERSION(){return CHROME_VERSION},IS_CHROMECAST_RECEIVER,get IE_VERSION(){return IE_VERSION},get IS_SAFARI(){return IS_SAFARI},get IS_WINDOWS(){return IS_WINDOWS},get IS_IPAD(){return IS_IPAD},get IS_IPHONE(){return IS_IPHONE},get IS_TIZEN(){return IS_TIZEN},get IS_WEBOS(){return IS_WEBOS},get IS_SMART_TV(){return IS_SMART_TV},TOUCH_ENABLED,IS_IOS,IS_ANY_SAFARI});function isNonBlankString(t){return typeof t=="string"&&!!t.trim()}function throwIfWhitespace(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return document$1===window$1.document}function isEl(t){return isObject(t)&&t.nodeType===1}function isInFrame(){try{return window$1.parent!==window$1.self}catch{return!0}}function createQuerier(t){return function(e,n){if(!isNonBlankString(e))return document$1[t](null);isNonBlankString(n)&&(n=document$1.querySelector(n));const s=isEl(n)?n:document$1;return s[t]&&s[t](e)}}function createEl(t="div",e={},n={},s){const i=document$1.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){const o=e[a];a==="textContent"?textContent(i,o):(i[a]!==o||a==="tabIndex")&&(i[a]=o)}),Object.getOwnPropertyNames(n).forEach(function(a){i.setAttribute(a,n[a])}),s&&appendContent(i,s),i}function textContent(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function prependTo(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function hasClass(t,e){return throwIfWhitespace(e),t.classList.contains(e)}function addClass(t,...e){return t.classList.add(...e.reduce((n,s)=>n.concat(s.split(/\s+/)),[])),t}function removeClass(t,...e){return t?(t.classList.remove(...e.reduce((n,s)=>n.concat(s.split(/\s+/)),[])),t):(log$1.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass(t,e,n){return typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=void 0),e.split(/\s+/).forEach(s=>t.classList.toggle(s,n)),t}function setAttributes(t,e){Object.getOwnPropertyNames(e).forEach(function(n){const s=e[n];s===null||typeof s>"u"||s===!1?t.removeAttribute(n):t.setAttribute(n,s===!0?"":s)})}function getAttributes(t){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const s=t.attributes;for(let i=s.length-1;i>=0;i--){const a=s[i].name;let o=s[i].value;n.includes(a)&&(o=o!==null),e[a]=o}}return e}function getAttribute(t,e){return t.getAttribute(e)}function setAttribute(t,e,n){t.setAttribute(e,n)}function removeAttribute(t,e){t.removeAttribute(e)}function blockTextSelection(){document$1.body.focus(),document$1.onselectstart=function(){return!1}}function unblockTextSelection(){document$1.onselectstart=function(){return!0}}function getBoundingClientRect(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(s=>{e[s]!==void 0&&(n[s]=e[s])}),n.height||(n.height=parseFloat(computedStyle(t,"height"))),n.width||(n.width=parseFloat(computedStyle(t,"width"))),n}}function findPosition(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,n=t.offsetHeight;let s=0,i=0;for(;t.offsetParent&&t!==document$1[FullscreenApi.fullscreenElement];)s+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:s,top:i,width:e,height:n}}function getPointerPosition(t,e){const n={x:0,y:0};if(IS_IOS){let d=t;for(;d&&d.nodeName.toLowerCase()!=="html";){const p=computedStyle(d,"transform");if(/^matrix/.test(p)){const m=p.slice(7,-1).split(/,\s/).map(Number);n.x+=m[4],n.y+=m[5]}else if(/^matrix3d/.test(p)){const m=p.slice(9,-1).split(/,\s/).map(Number);n.x+=m[12],n.y+=m[13]}if(d.assignedSlot&&d.assignedSlot.parentElement&&window$1.WebKitCSSMatrix){const m=window$1.getComputedStyle(d.assignedSlot.parentElement).transform,g=new window$1.WebKitCSSMatrix(m);n.x+=g.m41,n.y+=g.m42}d=d.parentNode||d.host}}const s={},i=findPosition(e.target),a=findPosition(t),o=a.width,l=a.height;let u=e.offsetY-(a.top-i.top),c=e.offsetX-(a.left-i.left);return e.changedTouches&&(c=e.changedTouches[0].pageX-a.left,u=e.changedTouches[0].pageY+a.top,IS_IOS&&(c-=n.x,u-=n.y)),s.y=1-Math.max(0,Math.min(1,u/l)),s.x=Math.max(0,Math.min(1,c/o)),s}function isTextNode(t){return isObject(t)&&t.nodeType===3}function emptyEl(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function normalizeContent(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),isEl(e)||isTextNode(e))return e;if(typeof e=="string"&&/\S/.test(e))return document$1.createTextNode(e)}).filter(e=>e)}function appendContent(t,e){return normalizeContent(e).forEach(n=>t.appendChild(n)),t}function insertContent(t,e){return appendContent(emptyEl(t),e)}function isSingleLeftClick(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const $=createQuerier("querySelector"),$$=createQuerier("querySelectorAll");function computedStyle(t,e){if(!t||!e)return"";if(typeof window$1.getComputedStyle=="function"){let n;try{n=window$1.getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function copyStyleSheetsToWindow(t){[...document$1.styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(i=>i.cssText).join(""),s=document$1.createElement("style");s.textContent=n,t.document.head.appendChild(s)}catch{const s=document$1.createElement("link");s.rel="stylesheet",s.type=e.type,s.media=e.media.mediaText,s.href=e.href,t.document.head.appendChild(s)}})}var Dom=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass,setAttributes,getAttributes,getAttribute,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$,$$,computedStyle,copyStyleSheetsToWindow});let _windowLoaded=!1,videojs$1;const autoSetup=function(){if(videojs$1.options.autoSetup===!1)return;const t=Array.prototype.slice.call(document$1.getElementsByTagName("video")),e=Array.prototype.slice.call(document$1.getElementsByTagName("audio")),n=Array.prototype.slice.call(document$1.getElementsByTagName("video-js")),s=t.concat(e,n);if(s&&s.length>0)for(let i=0,a=s.length;i<a;i++){const o=s[i];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&videojs$1(o);else{autoSetupTimeout(1);break}}else _windowLoaded||autoSetupTimeout(1)};function autoSetupTimeout(t,e){isReal()&&(e&&(videojs$1=e),window$1.setTimeout(autoSetup,t))}function setWindowLoaded(){_windowLoaded=!0,window$1.removeEventListener("load",setWindowLoaded)}isReal()&&(document$1.readyState==="complete"?setWindowLoaded():window$1.addEventListener("load",setWindowLoaded));const createStyleElement=function(t){const e=document$1.createElement("style");return e.className=t,e},setTextContent=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var DomData=new WeakMap;const _initialGuid=3;let _guid=_initialGuid;function newGUID(){return _guid++}function _cleanUpEvents(t,e){if(!DomData.has(t))return;const n=DomData.get(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&DomData.delete(t)}function _handleMultipleEvents(t,e,n,s){n.forEach(function(i){t(e,i,s)})}function fixEvent(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const s=t||window$1.event;t={};const i=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const a in s)i.includes(a)||a==="returnValue"&&s.preventDefault||(t[a]=s[a]);if(t.target||(t.target=t.srcElement||document$1),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){s.preventDefault&&s.preventDefault(),t.returnValue=!1,s.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),t.cancelBubble=!0,s.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){const a=document$1.documentElement,o=document$1.body;t.pageX=t.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let _supportsPassive;const supportsPassive=function(){if(typeof _supportsPassive!="boolean"){_supportsPassive=!1;try{const t=Object.defineProperty({},"passive",{get(){_supportsPassive=!0}});window$1.addEventListener("test",null,t),window$1.removeEventListener("test",null,t)}catch{}}return _supportsPassive},passiveEvents=["touchstart","touchmove"];function on(t,e,n){if(Array.isArray(e))return _handleMultipleEvents(on,t,e,n);DomData.has(t)||DomData.set(t,{});const s=DomData.get(t);if(s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),n.guid||(n.guid=newGUID()),s.handlers[e].push(n),s.dispatcher||(s.disabled=!1,s.dispatcher=function(i,a){if(s.disabled)return;i=fixEvent(i);const o=s.handlers[i.type];if(o){const l=o.slice(0);for(let u=0,c=l.length;u<c&&!i.isImmediatePropagationStopped();u++)try{l[u].call(t,i,a)}catch(d){log$1.error(d)}}}),s.handlers[e].length===1)if(t.addEventListener){let i=!1;supportsPassive()&&passiveEvents.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,s.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,s.dispatcher)}function off(t,e,n){if(!DomData.has(t))return;const s=DomData.get(t);if(!s.handlers)return;if(Array.isArray(e))return _handleMultipleEvents(off,t,e,n);const i=function(o,l){s.handlers[l]=[],_cleanUpEvents(o,l)};if(e===void 0){for(const o in s.handlers)Object.prototype.hasOwnProperty.call(s.handlers||{},o)&&i(t,o);return}const a=s.handlers[e];if(a){if(!n){i(t,e);return}if(n.guid)for(let o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);_cleanUpEvents(t,e)}}function trigger(t,e,n){const s=DomData.has(t)?DomData.get(t):{},i=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=fixEvent(e),s.dispatcher&&s.dispatcher.call(t,e,n),i&&!e.isPropagationStopped()&&e.bubbles===!0)trigger.call(null,i,e,n);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){DomData.has(e.target)||DomData.set(e.target,{});const a=DomData.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function one(t,e,n){if(Array.isArray(e))return _handleMultipleEvents(one,t,e,n);const s=function(){off(t,e,s),n.apply(this,arguments)};s.guid=n.guid=n.guid||newGUID(),on(t,e,s)}function any(t,e,n){const s=function(){off(t,e,s),n.apply(this,arguments)};s.guid=n.guid=n.guid||newGUID(),on(t,e,s)}var Events=Object.freeze({__proto__:null,fixEvent,on,off,trigger,one,any});const UPDATE_REFRESH_INTERVAL=30,bind_=function(t,e,n){e.guid||(e.guid=newGUID());const s=e.bind(t);return s.guid=n?n+"_"+e.guid:e.guid,s},throttle=function(t,e){let n=window$1.performance.now();return function(...i){const a=window$1.performance.now();a-n>=e&&(t(...i),n=a)}},debounce=function(t,e,n,s=window$1){let i;const a=()=>{s.clearTimeout(i),i=null},o=function(){const l=this,u=arguments;let c=function(){i=null,c=null,n||t.apply(l,u)};!i&&n&&t.apply(l,u),s.clearTimeout(i),i=s.setTimeout(c,e)};return o.cancel=a,o};var Fn=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL,bind_,throttle,debounce});let EVENT_MAP;class EventTarget$2{on(e,n){const s=this.addEventListener;this.addEventListener=()=>{},on(this,e,n),this.addEventListener=s}off(e,n){off(this,e,n)}one(e,n){const s=this.addEventListener;this.addEventListener=()=>{},one(this,e,n),this.addEventListener=s}any(e,n){const s=this.addEventListener;this.addEventListener=()=>{},any(this,e,n),this.addEventListener=s}trigger(e){const n=e.type||e;typeof e=="string"&&(e={type:n}),e=fixEvent(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),trigger(this,e)}queueTrigger(e){EVENT_MAP||(EVENT_MAP=new Map);const n=e.type||e;let s=EVENT_MAP.get(this);s||(s=new Map,EVENT_MAP.set(this,s));const i=s.get(n);s.delete(n),window$1.clearTimeout(i);const a=window$1.setTimeout(()=>{s.delete(n),s.size===0&&(s=null,EVENT_MAP.delete(this)),this.trigger(e)},0);s.set(n,a)}}EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;const objName=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,isEvented=t=>t instanceof EventTarget$2||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),addEventedCallback=(t,e)=>{isEvented(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},isValidEventType=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,validateTarget=(t,e,n)=>{if(!t||!t.nodeName&&!isEvented(t))throw new Error(`Invalid target for ${objName(e)}#${n}; must be a DOM node or evented object.`)},validateEventType=(t,e,n)=>{if(!isValidEventType(t))throw new Error(`Invalid event type for ${objName(e)}#${n}; must be a non-empty string or array.`)},validateListener=(t,e,n)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${objName(e)}#${n}; must be a function.`)},normalizeListenArgs=(t,e,n)=>{const s=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let i,a,o;return s?(i=t.eventBusEl_,e.length>=3&&e.shift(),[a,o]=e):(i=e[0],a=e[1],o=e[2]),validateTarget(i,t,n),validateEventType(a,t,n),validateListener(o,t,n),o=bind_(t,o),{isTargetingSelf:s,target:i,type:a,listener:o}},listen=(t,e,n,s)=>{validateTarget(t,t,e),t.nodeName?Events[e](t,n,s):t[e](n,s)},EventedMixin={on(...t){const{isTargetingSelf:e,target:n,type:s,listener:i}=normalizeListenArgs(this,t,"on");if(listen(n,"on",s,i),!e){const a=()=>this.off(n,s,i);a.guid=i.guid;const o=()=>this.off("dispose",a);o.guid=i.guid,listen(this,"on","dispose",a),listen(n,"on","dispose",o)}},one(...t){const{isTargetingSelf:e,target:n,type:s,listener:i}=normalizeListenArgs(this,t,"one");if(e)listen(n,"one",s,i);else{const a=(...o)=>{this.off(n,s,a),i.apply(null,o)};a.guid=i.guid,listen(n,"one",s,a)}},any(...t){const{isTargetingSelf:e,target:n,type:s,listener:i}=normalizeListenArgs(this,t,"any");if(e)listen(n,"any",s,i);else{const a=(...o)=>{this.off(n,s,a),i.apply(null,o)};a.guid=i.guid,listen(n,"any",s,a)}},off(t,e,n){if(!t||isValidEventType(t))off(this.eventBusEl_,t,e);else{const s=t,i=e;validateTarget(s,this,"off"),validateEventType(i,this,"off"),validateListener(n,this,"off"),n=bind_(this,n),this.off("dispose",n),s.nodeName?(off(s,i,n),off(s,"dispose",n)):isEvented(s)&&(s.off(i,n),s.off("dispose",n))}},trigger(t,e){validateTarget(this.eventBusEl_,this,"trigger");const n=t&&typeof t!="string"?t.type:t;if(!isValidEventType(n))throw new Error(`Invalid event type for ${objName(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return trigger(this.eventBusEl_,t,e)}};function evented(t,e={}){const{eventBusKey:n}=e;if(n){if(!t[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);t.eventBusEl_=t[n]}else t.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return Object.assign(t,EventedMixin),t.eventedCallbacks&&t.eventedCallbacks.forEach(s=>{s()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(s){s&&DomData.has(s)&&DomData.delete(s)}),window$1.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const StatefulMixin={state:{},setState(t){typeof t=="function"&&(t=t());let e;return each(t,(n,s)=>{this.state[s]!==n&&(e=e||{},e[s]={from:this.state[s],to:n}),this.state[s]=n}),e&&isEvented(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function stateful(t,e){return Object.assign(t,StatefulMixin),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&isEvented(t)&&t.on("statechanged",t.handleStateChanged),t}const toLowerCase=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},toTitleCase$1=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},titleCaseEquals=function(t,e){return toTitleCase$1(t)===toTitleCase$1(e)};var Str=Object.freeze({__proto__:null,toLowerCase,toTitleCase:toTitleCase$1,titleCaseEquals});class Component$1{constructor(e,n,s){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=merge$1({},this.options_),n=this.options_=merge$1(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${newGUID()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),n.evented!==!1&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(s),n.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=merge$1(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,s){return createEl(e,n,s)}localize(e,n,s=e){const i=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),o=a&&a[i],l=i&&i.split("-")[0],u=a&&a[l];let c=s;return o&&o[e]?c=o[e]:u&&u[e]&&(c=u[e]),n&&(c=c.replace(/\{(\d+)\}/g,function(d,p){const m=n[p-1];let g=m;return typeof m>"u"&&(g=d),g})),c}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((s,i)=>s.concat(i),[]);let n=this;for(let s=0;s<e.length;s++)if(n=n.getChild(e[s]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const s="http://www.w3.org/2000/svg",i=createEl("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),a=document$1.createElementNS(s,"svg");a.setAttributeNS(null,"viewBox","0 0 512 512");const o=document$1.createElementNS(s,"use");return a.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(a),this.iconIsSet_?n.replaceChild(i,n.querySelector(".vjs-icon-placeholder")):n.appendChild(i),this.iconIsSet_=!0,i}addChild(e,n={},s=this.children_.length){let i,a;if(typeof e=="string"){a=toTitleCase$1(e);const o=n.componentClass||a;n.name=a;const l=Component$1.getComponent(o);if(!l)throw new Error(`Component ${o} does not exist`);if(typeof l!="function")return null;i=new l(this.player_||this,n)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(s,0,i),i.parentComponent_=this,typeof i.id=="function"&&(this.childIndex_[i.id()]=i),a=a||i.name&&toTitleCase$1(i.name()),a&&(this.childNameIndex_[a]=i,this.childNameIndex_[toLowerCase(a)]=i),typeof i.el=="function"&&i.el()){let o=null;this.children_[s+1]&&(this.children_[s+1].el_?o=this.children_[s+1].el_:isEl(this.children_[s+1])&&(o=this.children_[s+1])),this.contentEl().insertBefore(i.el(),o)}return i}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){n=!0,this.children_.splice(i,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[toTitleCase$1(e.name())]=null,this.childNameIndex_[toLowerCase(e.name())]=null;const s=e.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,s=o=>{const l=o.name;let u=o.opts;if(n[l]!==void 0&&(u=n[l]),u===!1)return;u===!0&&(u={}),u.playerOptions=this.options_.playerOptions;const c=this.addChild(l,u);c&&(this[l]=c)};let i;const a=Component$1.getComponent("Tech");Array.isArray(e)?i=e:i=Object.keys(e),i.concat(Object.keys(this.options_).filter(function(o){return!i.some(function(l){return typeof l=="string"?o===l:o===l.name})})).map(o=>{let l,u;return typeof o=="string"?(l=o,u=e[l]||this.options_[l]||{}):(l=o.name,u=o),{name:l,opts:u}}).filter(o=>{const l=Component$1.getComponent(o.opts.componentClass||toTitleCase$1(o.name));return l&&!a.isTech(l)}).forEach(s)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return $(e,n||this.contentEl())}$$(e,n){return $$(e,n||this.contentEl())}hasClass(e){return hasClass(this.el_,e)}addClass(...e){addClass(this.el_,...e)}removeClass(...e){removeClass(this.el_,...e)}toggleClass(e,n){toggleClass(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return getAttribute(this.el_,e)}setAttribute(e,n){setAttribute(this.el_,e,n)}removeAttribute(e){removeAttribute(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,s){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[e]=n:n==="auto"?this.el_.style[e]="":this.el_.style[e]=n+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;const i=this.el_.style[e],a=i.indexOf("px");return parseInt(a!==-1?i.slice(0,a):this.el_["offset"+toTitleCase$1(e)],10)}currentDimension(e){let n=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(n=computedStyle(this.el_,e),n=parseFloat(n),n===0||isNaN(n)){const s=`offset${toTitleCase$1(e)}`;n=this.el_[s]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},s={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:n,center:s}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,n=null;const s=10,i=200;let a;this.on("touchstart",function(l){l.touches.length===1&&(n={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},e=window$1.performance.now(),a=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)a=!1;else if(n){const u=l.touches[0].pageX-n.pageX,c=l.touches[0].pageY-n.pageY;Math.sqrt(u*u+c*c)>s&&(a=!1)}});const o=function(){a=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(l){n=null,a===!0&&window$1.performance.now()-e<i&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=bind_(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const s=function(i){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",s),this.on("touchcancel",s)}setTimeout(e,n){var s;return e=bind_(this,e),this.clearTimersOnDispose_(),s=window$1.setTimeout(()=>{this.setTimeoutIds_.has(s)&&this.setTimeoutIds_.delete(s),e()},n),this.setTimeoutIds_.add(s),s}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window$1.clearTimeout(e)),e}setInterval(e,n){e=bind_(this,e),this.clearTimersOnDispose_();const s=window$1.setInterval(e,n);return this.setIntervalIds_.add(s),s}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window$1.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var n;return e=bind_(this,e),n=window$1.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),n=bind_(this,n);const s=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,s),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),window$1.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((s,i)=>this[n](i))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function n(a){const o=window$1.getComputedStyle(a,null),l=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(l)}function s(a){return!(!n(a.parentElement)||!n(a)||a.style.opacity==="0"||window$1.getComputedStyle(a).height==="0px"||window$1.getComputedStyle(a).width==="0px")}function i(a){if(a.offsetWidth+a.offsetHeight+a.getBoundingClientRect().height+a.getBoundingClientRect().width===0)return!1;const o={x:a.getBoundingClientRect().left+a.offsetWidth/2,y:a.getBoundingClientRect().top+a.offsetHeight/2};if(o.x<0||o.x>(document$1.documentElement.clientWidth||window$1.innerWidth)||o.y<0||o.y>(document$1.documentElement.clientHeight||window$1.innerHeight))return!1;let l=document$1.elementFromPoint(o.x,o.y);for(;l;){if(l===a)return!0;if(l.parentNode)l=l.parentNode;else return!1}}return e||(e=this.el()),!!(i(e)&&s(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,n){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const s=Component$1.getComponent("Tech"),i=s&&s.isTech(n),a=Component$1===n||Component$1.prototype.isPrototypeOf(n.prototype);if(i||!a){let l;throw i?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error(`Illegal component, "${e}"; ${l}.`)}e=toTitleCase$1(e),Component$1.components_||(Component$1.components_={});const o=Component$1.getComponent("Player");if(e==="Player"&&o&&o.players){const l=o.players,u=Object.keys(l);if(l&&u.length>0&&u.map(c=>l[c]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component$1.components_[e]=n,Component$1.components_[toLowerCase(e)]=n,n}static getComponent(e){if(!(!e||!Component$1.components_))return Component$1.components_[e]}}Component$1.registerComponent("Component",Component$1);function rangeCheck(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}function getRange(t,e,n,s){return rangeCheck(t,s,n.length-1),n[s][e]}function createTimeRangesObj(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:getRange.bind(null,"start",0,t),end:getRange.bind(null,"end",1,t)},window$1.Symbol&&window$1.Symbol.iterator&&(e[window$1.Symbol.iterator]=()=>(t||[]).values()),e}function createTimeRanges$1(t,e){return Array.isArray(t)?createTimeRangesObj(t):t===void 0||e===void 0?createTimeRangesObj():createTimeRangesObj([[t,e]])}const defaultImplementation=function(t,e){t=t<0?0:t;let n=Math.floor(t%60),s=Math.floor(t/60%60),i=Math.floor(t/3600);const a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=s=n="-"),i=i>0||o>0?i+":":"",s=((i||a>=10)&&s<10?"0"+s:s)+":",n=n<10?"0"+n:n,i+s+n};let implementation=defaultImplementation;function setFormatTime(t){implementation=t}function resetFormatTime(){implementation=defaultImplementation}function formatTime(t,e=t){return implementation(t,e)}var Time=Object.freeze({__proto__:null,createTimeRanges:createTimeRanges$1,createTimeRange:createTimeRanges$1,setFormatTime,resetFormatTime,formatTime});function bufferedPercent(t,e){let n=0,s,i;if(!e)return 0;(!t||!t.length)&&(t=createTimeRanges$1(0,0));for(let a=0;a<t.length;a++)s=t.start(a),i=t.end(a),i>e&&(i=e),n+=i-s;return n/e}function MediaError(t){if(t instanceof MediaError)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:isObject(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.prototype.metadata=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};MediaError.MEDIA_ERR_CUSTOM=0;MediaError.prototype.MEDIA_ERR_CUSTOM=0;MediaError.MEDIA_ERR_ABORTED=1;MediaError.prototype.MEDIA_ERR_ABORTED=1;MediaError.MEDIA_ERR_NETWORK=2;MediaError.prototype.MEDIA_ERR_NETWORK=2;MediaError.MEDIA_ERR_DECODE=3;MediaError.prototype.MEDIA_ERR_DECODE=3;MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.MEDIA_ERR_ENCRYPTED=5;MediaError.prototype.MEDIA_ERR_ENCRYPTED=5;function isPromise(t){return t!=null&&typeof t.then=="function"}function silencePromise(t){isPromise(t)&&t.then(null,e=>{})}const trackToJson_=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,s,i)=>(t[s]&&(n[s]=t[s]),n),{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},textTracksToJson=function(t){const e=t.$$("track"),n=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const a=trackToJson_(i.track);return i.src&&(a.src=i.src),a}).concat(Array.prototype.filter.call(t.textTracks(),function(i){return n.indexOf(i)===-1}).map(trackToJson_))},jsonToTextTracks=function(t,e){return t.forEach(function(n){const s=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(i=>s.addCue(i))}),e.textTracks()};var textTrackConverter={textTracksToJson,jsonToTextTracks,trackToJson_};const MODAL_CLASS_NAME="vjs-modal-dialog";class ModalDialog extends Component$1{constructor(e,n){super(e,n),this.handleKeyDown_=s=>this.handleKeyDown(s),this.close_=s=>this.close(s),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=createEl("div",{className:`${MODAL_CLASS_NAME}-content`},{role:"document"}),this.descEl_=createEl("p",{className:`${MODAL_CLASS_NAME}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${MODAL_CLASS_NAME} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const n=this.closeable_=!!e;let s=this.getChild("closeButton");if(n&&!s){const i=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(s,"close",this.close_)}!n&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),s=n.parentNode,i=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(n),this.empty(),insertContent(n,e),this.trigger("modalfill"),i?s.insertBefore(n,i):s.appendChild(n);const a=this.getChild("closeButton");a&&s.appendChild(a.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=document$1.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const n=this.focusableEls_(),s=this.el_.querySelector(":focus");let i;for(let a=0;a<n.length;a++)if(s===n[a]){i=a;break}document$1.activeElement===this.el_&&(i=0),e.shiftKey&&i===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof window$1.HTMLAnchorElement||n instanceof window$1.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof window$1.HTMLInputElement||n instanceof window$1.HTMLSelectElement||n instanceof window$1.HTMLTextAreaElement||n instanceof window$1.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof window$1.HTMLIFrameElement||n instanceof window$1.HTMLObjectElement||n instanceof window$1.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}ModalDialog.prototype.options_={pauseOnOpen:!0,temporary:!0};Component$1.registerComponent("ModalDialog",ModalDialog);class TrackList extends EventTarget$2{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},isEvented(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let s=0,i=this.length;s<i;s++)if(this[s]===e){n=this[s],n.off&&n.off(),this.tracks_.splice(s,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let s=0,i=this.length;s<i;s++){const a=this[s];if(a.id===e){n=a;break}}return n}}TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in TrackList.prototype.allowedEvents_)TrackList.prototype["on"+t]=null;const disableOthers$1=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].enabled=!1)};class AudioTrackList extends TrackList{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){disableOthers$1(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&disableOthers$1(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,disableOthers$1(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const disableOthers=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].selected=!1)};class VideoTrackList extends TrackList{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){disableOthers(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&disableOthers(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,disableOthers(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class TextTrackList extends TrackList{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class HtmlTrackElementList{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,s=e.length;n<s;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let s=0,i=this.trackElements_.length;s<i;s++)if(e===this.trackElements_[s].track){n=this.trackElements_[s];break}return n}removeTrackElement_(e){for(let n=0,s=this.trackElements_.length;n<s;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class TextTrackCueList{constructor(e){TextTrackCueList.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let s=0;const i=e.length;this.cues_=e,this.length_=e.length;const a=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(n<i)for(s=n;s<i;s++)a.call(this,s)}getCueById(e){let n=null;for(let s=0,i=this.length;s<i;s++){const a=this[s];if(a.id===e){n=a;break}}return n}}const VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};class Track extends EventTarget$2{constructor(e={}){super();const n={id:e.id||"vjs_track_"+newGUID(),kind:e.kind||"",language:e.language||""};let s=e.label||"";for(const i in n)Object.defineProperty(this,i,{get(){return n[i]},set(){}});Object.defineProperty(this,"label",{get(){return s},set(i){i!==s&&(s=i,this.trigger("labelchange"))}})}}const parseUrl=function(t){return new URL(t,document$1.baseURI)},getAbsoluteURL=function(t){return new URL(t,document$1.baseURI).href},getFileExtension=function(t){if(typeof t=="string"){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},isCrossOrigin=function(t,e=window$1.location){return parseUrl(t).origin!==e.origin};var Url=Object.freeze({__proto__:null,parseUrl,getAbsoluteURL,getFileExtension,isCrossOrigin});const parseCues=function(t,e){const n=new window$1.WebVTT.Parser(window$1,window$1.vttjs,window$1.WebVTT.StringDecoder()),s=[];n.oncue=function(i){e.addCue(i)},n.onparsingerror=function(i){s.push(i)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),s.length>0&&(window$1.console&&window$1.console.groupCollapsed&&window$1.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),s.forEach(i=>log$1.error(i)),window$1.console&&window$1.console.groupEnd&&window$1.console.groupEnd()),n.flush()},loadTrack=function(t,e){const n={uri:t},s=isCrossOrigin(t);s&&(n.cors=s);const i=e.tech_.crossOrigin()==="use-credentials";i&&(n.withCredentials=i),XHR(n,bind_(this,function(a,o,l){if(a)return log$1.error(a,o);e.loaded_=!0,typeof window$1.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],u=>{if(u.type==="vttjserror"){log$1.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return parseCues(l,e)}):parseCues(l,e)}))};class TextTrack extends Track{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=merge$1(e,{kind:TextTrackKind[e.kind]||"subtitles",language:e.language||e.srclang||""});let s=TextTrackMode[n.mode]||"disabled";const i=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(s="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const a=new TextTrackCueList(this.cues_),o=new TextTrackCueList(this.activeCues_);let l=!1;this.timeupdateHandler=bind_(this,function(c={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){c.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),c.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const u=()=>{this.stopTracking()};this.tech_.one("dispose",u),s!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return i},set(){}},mode:{get(){return s},set(c){TextTrackMode[c]&&s!==c&&(s=c,!this.preload_&&s!=="disabled"&&this.cues.length===0&&loadTrack(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?a:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const c=this.tech_.currentTime(),d=[];for(let p=0,m=this.cues.length;p<m;p++){const g=this.cues[p];g.startTime<=c&&g.endTime>=c&&d.push(g)}if(l=!1,d.length!==this.activeCues_.length)l=!0;else for(let p=0;p<d.length;p++)this.activeCues_.indexOf(d[p])===-1&&(l=!0);return this.activeCues_=d,o.setCues_(this.activeCues_),o},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&loadTrack(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new window$1.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const i in e)i in n||(n[i]=e[i]);n.id=e.id,n.originalCue_=e}const s=this.tech_.textTracks();for(let i=0;i<s.length;i++)s[i]!==this&&s[i].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const s=this.cues_[n];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};class AudioTrack extends Track{constructor(e={}){const n=merge$1(e,{kind:AudioTrackKind[e.kind]||""});super(n);let s=!1;Object.defineProperty(this,"enabled",{get(){return s},set(i){typeof i!="boolean"||i===s||(s=i,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class VideoTrack extends Track{constructor(e={}){const n=merge$1(e,{kind:VideoTrackKind[e.kind]||""});super(n);let s=!1;Object.defineProperty(this,"selected",{get(){return s},set(i){typeof i!="boolean"||i===s||(s=i,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class HTMLTrackElement extends EventTarget$2{constructor(e={}){super();let n;const s=new TextTrack(e);this.kind=s.kind,this.src=s.src,this.srclang=s.language,this.label=s.label,this.default=s.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return s}}}),n=HTMLTrackElement.NONE,s.addEventListener("loadeddata",()=>{n=HTMLTrackElement.LOADED,this.trigger({type:"load",target:this})})}}HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=0;HTMLTrackElement.LOADING=1;HTMLTrackElement.LOADED=2;HTMLTrackElement.ERROR=3;const NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(t){NORMAL[t].getterName=`${t}Tracks`,NORMAL[t].privateName=`${t}Tracks_`});const REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ALL=Object.assign({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(t,e,n,s,i={}){const a=t.textTracks();i.kind=e,n&&(i.label=n),s&&(i.language=s),i.tech=t;const o=new ALL.text.TrackClass(i);return a.addTrack(o),o}class Tech extends Component$1{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=s=>this.onDurationChange(s),this.trackProgress_=s=>this.trackProgress(s),this.trackCurrentTime_=s=>this.trackCurrentTime(s),this.stopTrackingCurrentTime_=s=>this.stopTrackingCurrentTime(s),this.disposeSourceHandler_=s=>this.disposeSourceHandler(s),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ALL.names.forEach(s=>{const i=ALL[s];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(s=>{e[`native${s}Tracks`]===!1&&(this[`featuresNative${s}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ALL.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(bind_(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return createTimeRanges$1(0,0)}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(NORMAL.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(n=>{const s=this[`${n}Tracks`]()||[];let i=s.length;for(;i--;){const a=s[i];n==="text"&&this.removeRemoteTextTrack(a),s.removeTrack(a)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;){const s=e[n];this.removeRemoteTextTrack(s)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new MediaError(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?createTimeRanges$1(0,0):createTimeRanges$1()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){NORMAL.names.forEach(e=>{const n=NORMAL[e],s=()=>{this.trigger(`${e}trackchange`)},i=this[n.getterName]();i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),this.on("dispose",()=>{i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s)})})}addWebVttScript_(){if(!window$1.WebVTT)if(document$1.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(vtt)&&Object.keys(vtt).length>0){this.trigger("vttjsloaded");return}const e=document$1.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),window$1.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),s=l=>e.addTrack(l.track),i=l=>e.removeTrack(l.track);n.on("addtrack",s),n.on("removetrack",i),this.addWebVttScript_();const a=()=>this.trigger("texttrackchange"),o=()=>{a();for(let l=0;l<e.length;l++){const u=e[l];u.removeEventListener("cuechange",a),u.mode==="showing"&&u.addEventListener("cuechange",a)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",s),n.off("removetrack",i),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let l=0;l<e.length;l++)e[l].removeEventListener("cuechange",a)})}addTextTrack(e,n,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,e,n,s)}createRemoteTextTrack(e){const n=merge$1(e,{tech:this});return new REMOTE.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const s=this.createRemoteTextTrack(e);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(s.track)),s}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return Tech.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Tech||e instanceof Tech||e===Tech}static registerTech(e,n){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=toTitleCase$1(e),Tech.techs_[e]=n,Tech.techs_[toLowerCase(e)]=n,e!=="Tech"&&Tech.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(Tech.techs_&&Tech.techs_[e])return Tech.techs_[e];if(e=toTitleCase$1(e),window$1&&window$1.videojs&&window$1.videojs[e])return log$1.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window$1.videojs[e]}}}ALL.names.forEach(function(t){const e=ALL[t];Tech.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Tech.prototype.featuresVolumeControl=!0;Tech.prototype.featuresMuteControl=!0;Tech.prototype.featuresFullscreenResize=!1;Tech.prototype.featuresPlaybackRate=!1;Tech.prototype.featuresProgressEvents=!1;Tech.prototype.featuresSourceset=!1;Tech.prototype.featuresTimeupdateEvents=!1;Tech.prototype.featuresNativeTextTracks=!1;Tech.prototype.featuresVideoFrameCallback=!1;Tech.withSourceHandlers=function(t){t.registerSourceHandler=function(n,s){let i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),s===void 0&&(s=i.length),i.splice(s,0,n)},t.canPlayType=function(n){const s=t.sourceHandlers||[];let i;for(let a=0;a<s.length;a++)if(i=s[a].canPlayType(n),i)return i;return""},t.selectSourceHandler=function(n,s){const i=t.sourceHandlers||[];let a;for(let o=0;o<i.length;o++)if(a=i[o].canHandleSource(n,s),a)return i[o];return null},t.canPlaySource=function(n,s){const i=t.selectSourceHandler(n,s);return i?i.canHandleSource(n,s):""},["seekable","seeking","duration"].forEach(function(n){const s=this[n];typeof s=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):s.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){let s=t.selectSourceHandler(n,this.options_);s||(t.nativeSourceHandler?s=t.nativeSourceHandler:log$1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),s!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=s.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];const middlewares={},middlewareInstances={},TERMINATOR={};function use(t,e){middlewares[t]=middlewares[t]||[],middlewares[t].push(e)}function setSource(t,e,n){t.setTimeout(()=>setSourceHelper(e,middlewares[e.type],n,t),1)}function setTech(t,e){t.forEach(n=>n.setTech&&n.setTech(e))}function get(t,e,n){return t.reduceRight(middlewareIterator(n),e[n]())}function set(t,e,n,s){return e[n](t.reduce(middlewareIterator(n),s))}function mediate(t,e,n,s=null){const i="call"+toTitleCase$1(n),a=t.reduce(middlewareIterator(i),s),o=a===TERMINATOR,l=o?null:e[n](a);return executeRight(t,n,l,o),l}const allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1},allowedMediators={play:1,pause:1};function middlewareIterator(t){return(e,n)=>e===TERMINATOR?TERMINATOR:n[t]?n[t](e):e}function executeRight(t,e,n,s){for(let i=t.length-1;i>=0;i--){const a=t[i];a[e]&&a[e](s,n)}}function clearCacheForPlayer(t){middlewareInstances.hasOwnProperty(t.id())&&delete middlewareInstances[t.id()]}function getOrCreateFactory(t,e){const n=middlewareInstances[t.id()];let s=null;if(n==null)return s=e(t),middlewareInstances[t.id()]=[[e,s]],s;for(let i=0;i<n.length;i++){const[a,o]=n[i];a===e&&(s=o)}return s===null&&(s=e(t),n.push([e,s])),s}function setSourceHelper(t={},e=[],n,s,i=[],a=!1){const[o,...l]=e;if(typeof o=="string")setSourceHelper(t,middlewares[o],n,s,i,a);else if(o){const u=getOrCreateFactory(s,o);if(!u.setSource)return i.push(u),setSourceHelper(t,l,n,s,i,a);u.setSource(Object.assign({},t),function(c,d){if(c)return setSourceHelper(t,l,n,s,i,a);i.push(u),setSourceHelper(d,t.type===d.type?l:middlewares[d.type],n,s,i,a)})}else l.length?setSourceHelper(t,l,n,s,i,a):a?n(t,i):setSourceHelper(t,middlewares["*"],n,s,i,!0)}const MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},getMimetype=function(t=""){const e=getFileExtension(t);return MimetypesKind[e.toLowerCase()]||""},findMimetype=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const n=t.cache_.sources.filter(i=>i.src===e);if(n.length)return n[0].type;const s=t.$$("source");for(let i=0;i<s.length;i++){const a=s[i];if(a.type&&a.src&&a.src===e)return a.type}return getMimetype(e)},filterSource=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(n){n=filterSource(n),Array.isArray(n)?e=e.concat(n):isObject(n)&&e.push(n)}),t=e}else typeof t=="string"&&t.trim()?t=[fixSource({src:t})]:isObject(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[fixSource(t)]:t=[];return t};function fixSource(t){if(!t.type){const e=getMimetype(t.src);e&&(t.type=e)}return t}var icons=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const backKeyCode=IS_TIZEN?10009:IS_WEBOS?461:8,SpatialNavKeyCodes={codes:{play:415,pause:19,ff:417,rw:412,back:backKeyCode},names:{415:"play",19:"pause",417:"ff",412:"rw",[backKeyCode]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},STEP_SECONDS$1=5;class SpatialNavigation extends EventTarget$2{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const n=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const s=n.key.substring(5).toLowerCase();this.move(s)}else if(SpatialNavKeyCodes.isEventKey(n,"play")||SpatialNavKeyCodes.isEventKey(n,"pause")||SpatialNavKeyCodes.isEventKey(n,"ff")||SpatialNavKeyCodes.isEventKey(n,"rw")){n.preventDefault();const s=SpatialNavKeyCodes.getEventName(n);this.performMediaAction_(s)}else SpatialNavKeyCodes.isEventKey(n,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(n.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+STEP_SECONDS$1);break;case"rw":this.userSeek_(this.player_.currentTime()-STEP_SECONDS$1);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const n=e.relatedTarget;let s=null;const i=this.getCurrentComponent(e.target);n&&(s=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!s||!n)&&(i&&i.name()==="CloseButton"?this.refocusComponent():(this.pause(),i&&i.el()&&(this.lastFocusedComponent_=i)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,n=[];function s(i){for(const a of i)a.hasOwnProperty("el_")&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())&&n.push(a),a.hasOwnProperty("children_")&&a.children_.length>0&&s(a.children_)}return e.children_.forEach(i=>{if(i.hasOwnProperty("el_"))if(i.getIsFocusable&&i.getIsAvailableToBeFocused&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())){n.push(i);return}else i.hasOwnProperty("children_")&&i.children_.length>0?s(i.children_):i.hasOwnProperty("items")&&i.items.length>0?s(i.items):this.findSuitableDOMChild(i)&&n.push(i);if(i.name_==="ErrorDisplay"&&i.opened_){const a=i.el_.querySelector(".vjs-errors-ok-button-container");a&&a.querySelectorAll("button").forEach((l,u)=>{n.push({name:()=>"ModalButton"+(u+1),el:()=>l,getPositions:()=>{const c=l.getBoundingClientRect(),d={x:c.x,y:c.y,width:c.width,height:c.height,top:c.top,right:c.right,bottom:c.bottom,left:c.left},p={x:c.left+c.width/2,y:c.top+c.height/2,width:0,height:0,top:c.top+c.height/2,right:c.left+c.width/2,bottom:c.top+c.height/2,left:c.left+c.width/2};return{boundingClientRect:d,center:p}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:c=>!0,focus:()=>l.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(e){function n(s){if(e.getIsFocusable(s)&&e.getIsAvailableToBeFocused(s))return s;for(let i=0;i<s.children.length;i++){const a=s.children[i],o=n(a);if(o)return o}return null}return e.el()?n(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const n=e||document.activeElement;if(this.focusableComponents.length){for(const s of this.focusableComponents)if(s.el()===n)return s}}add(e){const n=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&n.push(e),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===e.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const n=this.getCurrentComponent();if(!n)return;const s=n.getPositions(),i=this.focusableComponents.filter(o=>o!==n&&this.isInDirection_(s.boundingClientRect,o.getPositions().boundingClientRect,e)),a=this.findBestCandidate_(s.center,i,e);a?this.focus(a):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:n})}findBestCandidate_(e,n,s){let i=1/0,a=null;for(const o of n){const l=o.getPositions().center,u=this.calculateDistance_(e,l,s);u<i&&(i=u,a=o)}return a}isInDirection_(e,n,s){switch(s){case"right":return n.left>=e.right;case"left":return n.right<=e.left;case"down":return n.top>=e.bottom;case"up":return n.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,n,s){const i=Math.abs(e.x-n.x),a=Math.abs(e.y-n.y);let o;switch(s){case"right":case"left":o=i+a*100;break;case"up":o=a*2+i*.5;break;case"down":o=a*5+i;break;default:o=i+a}return o}searchForTrackSelect_(){const e=this;for(const n of e.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){e.focus(n);break}}}class MediaLoader extends Component$1{constructor(e,n,s){const i=merge$1({createEl:!1},n);if(super(e,i,s),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let a=0,o=n.playerOptions.techOrder;a<o.length;a++){const l=toTitleCase$1(o[a]);let u=Tech.getTech(l);if(l||(u=Component$1.getComponent(l)),u&&u.isSupported()){e.loadTech_(l);break}}else e.src(n.playerOptions.sources)}}Component$1.registerComponent("MediaLoader",MediaLoader);class ClickableComponent extends Component$1{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=s=>this.handleMouseOver(s),this.handleMouseOut_=s=>this.handleMouseOut(s),this.handleClick_=s=>this.handleClick(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.emitTapEvents(),this.enable()}createEl(e="div",n={},s={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&log$1.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),s=Object.assign({role:"button"},s),this.tabIndex_=n.tabIndex;const i=createEl(e,n,s);return this.player_.options_.experimentalSvgIcons||i.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(e===void 0)return this.controlText_||"Need Text";const s=this.localize(e);this.controlText_=e,textContent(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",s)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Component$1.registerComponent("ClickableComponent",ClickableComponent);class PosterImage extends ClickableComponent{constructor(e,n){super(e,n),this.update(),this.update_=s=>this.update(s),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return createEl("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(createEl("picture",{className:"vjs-poster",tabIndex:-1},{},createEl("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause())}}PosterImage.prototype.crossorigin=PosterImage.prototype.crossOrigin;Component$1.registerComponent("PosterImage",PosterImage);const darkGray="#222",lightGray="#ccc",fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(t,e){let n;if(t.length===4)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)n=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function tryUpdateStyle(t,e,n){try{t.style[e]=n}catch{return}}function getCSSPositionValue(t){return t?`${t}px`:""}class TextTrackDisplay extends Component$1{constructor(e,n,s){super(e,n,s);const i=o=>this.updateDisplay(o),a=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("texttrackchange",i),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(bind_(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",a),e.on("playerresize",a);const o=window$1.screen.orientation||window$1,l=window$1.screen.orientation?"change":"orientationchange";o.addEventListener(l,a),e.on("dispose",()=>o.removeEventListener(l,a));const u=this.options_.playerOptions.tracks||[];for(let c=0;c<u.length;c++)this.player_.addRemoteTextTrack(u[c],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage;let i,a,o;for(let l=0;l<n.length;l++){const u=n[l];s&&s.enabled&&s.language&&s.language===u.language&&u.kind in e?u.kind===s.kind?o=u:o||(o=u):s&&!s.enabled?(o=null,i=null,a=null):u.default&&(u.kind==="descriptions"&&!i?i=u:u.kind in e&&!a&&(a=u))}o?o.mode="showing":a?a.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof window$1.WebVTT=="function"&&window$1.WebVTT.processCues(window$1,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const o=[];for(let l=0;l<e.length;++l){const u=e[l];u.mode==="showing"&&o.push(u)}this.updateForTrack(o);return}let s=null,i=null,a=e.length;for(;a--;){const o=e[a];o.mode==="showing"&&(o.kind==="descriptions"?s=o:i=o)}if(i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):s&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s)),!window$1.CSS.supports("inset","10px")){const o=this.el_,l=o.querySelectorAll(".vjs-text-track-cue"),u=this.player_.controlBar.el_.getBoundingClientRect().height,c=this.player_.el_.getBoundingClientRect().height;o.style="",tryUpdateStyle(o,"position","relative"),tryUpdateStyle(o,"height",c-u+"px"),tryUpdateStyle(o,"top","unset"),IS_SMART_TV?tryUpdateStyle(o,"bottom",c+"px"):tryUpdateStyle(o,"bottom","0px"),l.length>0&&l.forEach(d=>{if(d.style.inset){const p=d.style.inset.split(" ");p.length===3&&Object.assign(d.style,{top:p[0],right:p[1],bottom:p[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!window$1.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),s=e/n,i=this.player_.videoWidth()/this.player_.videoHeight();let a=0,o=0;Math.abs(s-i)>.1&&(s>i?a=Math.round((e-n*i)/2):o=Math.round((n-e/i)/2)),tryUpdateStyle(this.el_,"insetInline",getCSSPositionValue(a)),tryUpdateStyle(this.el_,"insetBlock",getCSSPositionValue(o))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),s=e.activeCues;let i=s.length;for(;i--;){const a=s[i];if(!a)continue;const o=a.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&tryUpdateStyle(o.firstChild,"color",constructColor(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&tryUpdateStyle(o.firstChild,"backgroundColor",constructColor(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?tryUpdateStyle(o,"backgroundColor",constructColor(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${darkGray}, 2px 2px 4px ${darkGray}, 2px 2px 5px ${darkGray}`:n.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${darkGray}, 2px 2px ${darkGray}, 3px 3px ${darkGray}`:n.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${lightGray}, 0 1px ${lightGray}, -1px -1px ${darkGray}, 0 -1px ${darkGray}`:n.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}`)),n.fontPercent&&n.fontPercent!==1){const l=window$1.parseFloat(o.style.fontSize);o.style.fontSize=l*n.fontPercent+"px",o.style.height="auto",o.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=fontMap[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof window$1.WebVTT!="function"||e.every(s=>!s.activeCues))return;const n=[];for(let s=0;s<e.length;++s){const i=e[s];for(let a=0;a<i.activeCues.length;++a)n.push(i.activeCues[a])}window$1.WebVTT.processCues(window$1,n,this.el_);for(let s=0;s<e.length;++s){const i=e[s];for(let a=0;a<i.activeCues.length;++a){const o=i.activeCues[a].displayState;addClass(o,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:s)),i.language&&setAttribute(o,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);class LoadingSpinner extends Component$1{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),s=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(s),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Component$1.registerComponent("LoadingSpinner",LoadingSpinner);class Button extends ClickableComponent{createEl(e,n={},s={}){e="button",n=Object.assign({className:this.buildCSSClass()},n),s=Object.assign({type:"button"},s);const i=createEl(e,n,s);return this.player_.options_.experimentalSvgIcons||i.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,n={}){const s=this.constructor.name;return log$1.warn(`Adding an actionable (user controllable) child to a Button (${s}) is not supported; use a ClickableComponent instead.`),Component$1.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}Component$1.registerComponent("Button",Button);class BigPlayButton extends Button{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",s=>this.handleMouseDown(s))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){silencePromise(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const s=this.player_.getChild("controlBar"),i=s&&s.getChild("playToggle");if(!i){this.player_.tech(!0).focus();return}const a=()=>i.focus();isPromise(n)?n.then(a,()=>{}):this.setTimeout(a,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);class CloseButton extends Button{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Component$1.registerComponent("CloseButton",CloseButton);class PlayToggle extends Button{constructor(e,n={}){super(e,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(e,"play",s=>this.handlePlay(s)),this.on(e,"pause",s=>this.handlePause(s)),n.replay&&this.on(e,"ended",s=>this.handleEnded(s))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);class TimeDisplay extends Component$1{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended","seeking"],s=>this.update(s)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),s=createEl("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return n.appendChild(s),this.contentEl_=createEl("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=formatTime(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document$1.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);class CurrentTimeDisplay extends TimeDisplay{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);class DurationDisplay extends TimeDisplay{constructor(e,n){super(e,n);const s=i=>this.updateContent(i);this.on(e,"durationchange",s),this.on(e,"loadstart",s),this.on(e,"loadedmetadata",s)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);class TimeDivider extends Component$1{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),s=super.createEl("span",{textContent:"/"});return n.appendChild(s),e.appendChild(n),e}}Component$1.registerComponent("TimeDivider",TimeDivider);class RemainingTimeDisplay extends TimeDisplay{constructor(e,n){super(e,n),this.on(e,"durationchange",s=>this.updateContent(s))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);class LiveDisplay extends Component$1{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",s=>this.updateShowing(s))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(document$1.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Component$1.registerComponent("LiveDisplay",LiveDisplay);class SeekToLive extends Button{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=s=>this.updateLiveEdgeStatus(s),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);function clamp(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))}var Num=Object.freeze({__proto__:null,clamp});class Slider extends Component$1{constructor(e,n){super(e,n),this.handleMouseDown_=s=>this.handleMouseDown(s),this.handleMouseUp_=s=>this.handleMouseUp(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.handleClick_=s=>this.handleClick(s),this.handleMouseMove_=s=>this.handleMouseMove(s),this.update_=s=>this.update(s),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},s={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),s=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},s),super.createEl(e,n,s)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!IS_CHROME&&e.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(clamp(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=getPointerPosition(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){const n=this.options_.playerOptions.spatialNavigation,s=n&&n.enabled,i=n&&n.horizontalSeek;s?i&&e.key==="ArrowLeft"||!i&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):i&&e.key==="ArrowRight"||!i&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Component$1.registerComponent("Slider",Slider);const percentify=(t,e)=>clamp(t/e*100,0,100).toFixed(2)+"%";class LoadProgressBar extends Component$1{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",s=>this.update(s))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=createEl("span",{className:"vjs-control-text"}),s=createEl("span",{textContent:this.localize("Loaded")}),i=document$1.createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(s),n.appendChild(i),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,s=this.player_.buffered(),i=n&&n.isLive()?n.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),o=this.partEls_,l=percentify(a,i);this.percent_!==l&&(this.el_.style.width=l,textContent(this.percentageEl_,l),this.percent_=l);for(let u=0;u<s.length;u++){const c=s.start(u),d=s.end(u);let p=o[u];p||(p=this.el_.appendChild(createEl()),o[u]=p),!(p.dataset.start===c&&p.dataset.end===d)&&(p.dataset.start=c,p.dataset.end=d,p.style.left=percentify(c,a),p.style.width=percentify(d-c,a))}for(let u=o.length;u>s.length;u--)this.el_.removeChild(o[u-1]);o.length=s.length})}}Component$1.registerComponent("LoadProgressBar",LoadProgressBar);class TimeTooltip extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,s){const i=findPosition(this.el_),a=getBoundingClientRect(this.player_.el()),o=e.width*n;if(!a||!i)return;let l=e.left-a.left+o,u=e.width-o+(a.right-e.right);u||(u=e.width-o,l=o);let c=i.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>i.width&&(c=i.width),c=Math.round(c),this.el_.style.right=`-${c}px`,this.write(s)}write(e){textContent(this.el_,e)}updateTime(e,n,s,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let a;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const l=this.player_.liveTracker.liveWindow(),u=l-n*l;a=(u<1?"":"-")+formatTime(u,l)}else a=formatTime(s,o);this.update(e,n,a),i&&i()})}}Component$1.registerComponent("TimeTooltip",TimeTooltip);class PlayProgressBar extends Component$1{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const s=this.getChild("timeTooltip");if(!s)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,n,i)}}PlayProgressBar.prototype.options_={children:[]};!IS_IOS&&!IS_ANDROID&&PlayProgressBar.prototype.options_.children.push("timeTooltip");Component$1.registerComponent("PlayProgressBar",PlayProgressBar);class MouseTimeDisplay extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const s=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,s,()=>{this.el_.style.left=`${e.width*n}px`})}}MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);const STEP_SECONDS=5,PAGE_KEY_MULTIPLIER=12;class SeekBar extends Slider{constructor(e,n){super(e,n),this.setEventHandlers_()}setEventHandlers_(){this.update_=bind_(this,this.update),this.update=throttle(this.update_,UPDATE_REFRESH_INTERVAL),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1&&"visibilityState"in document$1&&this.on(document$1,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){document$1.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(document$1.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const s=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let a=this.player_.duration();i&&i.isLive()&&(a=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==s||this.duration_!==a)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(s,a),formatTime(a,a)],"{1} of {2}")),this.currentTime_=s,this.duration_=a),this.bar&&this.bar.update(getBoundingClientRect(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let n;const s=this.player_.liveTracker;return s&&s.isLive()?(n=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){isSingleLeftClick(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!isSingleLeftClick(e)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let s;const i=this.calculateDistance(e),a=this.player_.liveTracker;if(!a||!a.isLive())s=i*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(i>=.99){a.seekToLiveEdge();return}const o=a.seekableStart(),l=a.liveCurrentTime();if(s=o+i*a.liveWindow(),s>=l&&(s=l),s<=o&&(s=o+.1),s===1/0)return}this.userSeek_(s),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+STEP_SECONDS)}stepBack(){this.userSeek_(this.player_.currentTime()-STEP_SECONDS)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const s=parseInt(e.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1&&"visibilityState"in document$1&&this.off(document$1,"visibilitychange",this.toggleVisibility_),super.dispose()}}SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!IS_IOS&&!IS_ANDROID&&SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Component$1.registerComponent("SeekBar",SeekBar);class ProgressControl extends Component$1{constructor(e,n){super(e,n),this.handleMouseMove=throttle(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.throttledHandleMouseSeek=throttle(bind_(this,this.handleMouseSeek),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.handleMouseDownHandler_=s=>this.handleMouseDown(s),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const s=n.getChild("playProgressBar"),i=n.getChild("mouseTimeDisplay");if(!s&&!i)return;const a=n.el(),o=findPosition(a);let l=getPointerPosition(a,e).x;l=clamp(l,0,1),i&&i.update(o,l),s&&s.update(o,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&silencePromise(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);class PictureInPictureToggle extends Button{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],s=>this.handlePictureInPictureChange(s)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],s=>this.handlePictureInPictureEnabledChange(s)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){document$1.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window$1?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof document$1.exitPictureInPicture=="function"&&super.show()}}PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);class FullscreenToggle extends Button{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",s=>this.handleFullscreenChange(s)),document$1[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);const checkVolumeSupport=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class VolumeLevel extends Component$1{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Component$1.registerComponent("VolumeLevel",VolumeLevel);class VolumeLevelTooltip extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,s,i){if(!s){const a=getBoundingClientRect(this.el_),o=getBoundingClientRect(this.player_.el()),l=e.width*n;if(!o||!a)return;const u=e.left-o.left+l,c=e.width-l+(o.right-e.right);let d=a.width/2;u<d?d+=d-u:c<d&&(d=c),d<0?d=0:d>a.width&&(d=a.width),this.el_.style.right=`-${d}px`}this.write(`${i}%`)}write(e){textContent(this.el_,e)}updateVolume(e,n,s,i,a){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,s,i.toFixed(0)),a&&a()})}}Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);class MouseVolumeLevelDisplay extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,s){const i=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,s,i,()=>{s?this.el_.style.bottom=`${e.height*n}px`:this.el_.style.left=`${e.width*n}px`})}}MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);class VolumeBar extends Slider{constructor(e,n){super(e,n),this.on("slideractive",s=>this.updateLastVolume_(s)),this.on(e,"volumechange",s=>this.updateARIAAttributes(s)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){isSingleLeftClick(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const s=this.el(),i=getBoundingClientRect(s),a=this.vertical();let o=getPointerPosition(s,e);o=a?o.y:o.x,o=clamp(o,0,1),n.update(i,o,a)}isSingleLeftClick(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!IS_IOS&&!IS_ANDROID&&VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);class VolumeControl extends Component$1{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||isPlain(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),checkVolumeSupport(this,e),this.throttledHandleMouseMove=throttle(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.on("mousedown",s=>this.handleMouseDown(s)),this.on("touchstart",s=>this.handleMouseDown(s)),this.on("mousemove",s=>this.handleMouseMove(s)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);const checkMuteSupport=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class MuteToggle extends Button{constructor(e,n){super(e,n),checkMuteSupport(this,e),this.on(e,["loadstart","volumechange"],s=>this.update(s))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),s=this.player_.lastVolume_();if(n===0){const i=s<.1?.1:s;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),IS_IOS&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),removeClass(this.el_,[0,1,2,3].reduce((s,i)=>s+`${i?" ":""}vjs-vol-${i}`,"")),addClass(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);class VolumePanel extends Component$1{constructor(e,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||isPlain(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=s=>this.handleKeyPress(s),this.on(e,["loadstart"],s=>this.volumePanelState_(s)),this.on(this.muteToggle,"keyup",s=>this.handleKeyPress(s)),this.on(this.volumeControl,"keyup",s=>this.handleVolumeControlKeyUp(s)),this.on("keydown",s=>this.handleKeyPress(s)),this.on("mouseover",s=>this.handleMouseOver(s)),this.on("mouseout",s=>this.handleMouseOut(s)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),on(document$1,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),off(document$1,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);class SkipForward extends Button{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),s=this.player_.liveTracker,i=s&&s.isLive()?s.seekableEnd():this.player_.duration();let a;n+this.skipTime<=i?a=n+this.skipTime:a=i,this.player_.currentTime(a)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}SkipForward.prototype.controlText_="Skip Forward";Component$1.registerComponent("SkipForward",SkipForward);class SkipBackward extends Button{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),s=this.player_.liveTracker,i=s&&s.isLive()&&s.seekableStart();let a;i&&n-this.skipTime<=i?a=i:n>=this.skipTime?a=n-this.skipTime:a=0,this.player_.currentTime(a)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}SkipBackward.prototype.controlText_="Skip Backward";Component$1.registerComponent("SkipBackward",SkipBackward);class Menu extends Component$1{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",s=>this.handleKeyDown(s)),this.boundHandleBlur_=s=>this.handleBlur(s),this.boundHandleTapClick_=s=>this.handleTapClick(s)}addEventListenerForItem(e){e instanceof Component$1&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Component$1&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),on(n,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||document$1.activeElement;if(!this.children().some(s=>s.el()===n)){const s=this.menuButton_;s&&s.buttonPressed_&&n!==s.el().firstChild&&s.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const s=n.filter(i=>i.el()===e.target)[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}Component$1.registerComponent("Menu",Menu);class MenuButton extends Component$1{constructor(e,n={}){super(e,n),this.menuButton_=new Button(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const s=Button.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+s,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=a=>this.handleClick(a);this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),on(document$1,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Menu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1}),s=new Component$1(this.player_,{el:n});e.addItem(s)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const n=Button.prototype.buildCSSClass();return`vjs-menu-button ${e} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),off(document$1,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),IS_IOS&&isInFrame())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Component$1.registerComponent("MenuButton",MenuButton);class TrackButton extends MenuButton{constructor(e,n){const s=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!s)return;const i=bind_(this,this.update);s.addEventListener("removetrack",i),s.addEventListener("addtrack",i),s.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){s.removeEventListener("removetrack",i),s.removeEventListener("addtrack",i),s.removeEventListener("labelchange",i)})}}Component$1.registerComponent("TrackButton",TrackButton);class MenuItem extends ClickableComponent{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,n,s){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),s),a=createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(a):i.replaceChild(a,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Component$1.registerComponent("MenuItem",MenuItem);class TextTrackMenuItem extends MenuItem{constructor(e,n){const s=n.track,i=e.textTracks();n.label=s.label||s.language||"Unknown",n.selected=s.mode==="showing",super(e,n),this.track=s,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const a=(...l)=>{this.handleTracksChange.apply(this,l)},o=(...l)=>{this.handleSelectedLanguageChange.apply(this,l)};if(e.on(["loadstart","texttrackchange"],a),i.addEventListener("change",a),i.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),i.removeEventListener("change",a),i.removeEventListener("selectedlanguagechange",o)}),i.onchange===void 0){let l;this.on(["tap","click"],function(){if(typeof window$1.Event!="object")try{l=new window$1.Event("change")}catch{}l||(l=document$1.createEvent("Event"),l.initEvent("change",!0,!0)),i.dispatchEvent(l)})}this.handleTracksChange()}handleClick(e){const n=this.track,s=this.player_.textTracks();if(super.handleClick(e),!!s)for(let i=0;i<s.length;i++){const a=s[i];this.kinds.indexOf(a.kind)!==-1&&(a===n?a.mode!=="showing"&&(a.mode="showing"):a.mode!=="disabled"&&(a.mode="disabled"))}}handleTracksChange(e){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);class OffTextTrackMenuItem extends TextTrackMenuItem{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let s=!0;for(let i=0,a=n.length;i<a;i++){const o=n[i];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let s=!0;for(let i=0,a=n.length;i<a;i++){const o=n[i];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);class TextTrackButton extends TrackButton{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=TextTrackMenuItem){let s;this.label_&&(s=`${this.label_} off`),e.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let a=0;a<i.length;a++){const o=i[a];if(this.kinds_.indexOf(o.kind)>-1){const l=new n(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass(`vjs-${o.kind}-menu-item`),e.push(l)}}return e}}Component$1.registerComponent("TextTrackButton",TextTrackButton);class ChaptersTrackMenuItem extends MenuItem{constructor(e,n){const s=n.track,i=n.cue,a=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=i.text,n.selected=i.startTime<=a&&a<i.endTime,super(e,n),this.track=s,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);class ChaptersButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const s=e[n];if(s.kind===this.kind_)return s}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(toTitleCase$1(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let s=0,i=n.length;s<i;s++){const a=n[s],o=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:a});e.push(o)}return e}}ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);class DescriptionsButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("audio-description");const i=e.textTracks(),a=bind_(this,this.handleTracksChange);i.addEventListener("change",a),this.on("dispose",function(){i.removeEventListener("change",a)})}handleTracksChange(e){const n=this.player().textTracks();let s=!1;for(let i=0,a=n.length;i<a;i++){const o=n[i];if(o.kind!==this.kind_&&o.mode==="showing"){s=!0;break}}s?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);class SubtitlesButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);class CaptionSettingsMenuItem extends TextTrackMenuItem{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);class CaptionsButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);class SubsCapsMenuItem extends TextTrackMenuItem{createEl(e,n,s){const i=super.createEl(e,n,s),a=i.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):a.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(createEl("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);class SubsCapsButton extends TextTrackButton{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(toTitleCase$1(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,SubsCapsMenuItem),e}}SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);class AudioTrackMenuItem extends MenuItem{constructor(e,n){const s=n.track,i=e.audioTracks();n.label=s.label||s.language||"Unknown",n.selected=s.enabled,super(e,n),this.track=s,this.addClass(`vjs-${s.kind}-menu-item`);const a=(...o)=>{this.handleTracksChange.apply(this,o)};i.addEventListener("change",a),this.on("dispose",()=>{i.removeEventListener("change",a)})}createEl(e,n,s){const i=super.createEl(e,n,s),a=i.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(a.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let s=0;s<n.length;s++){const i=n[s];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);class AudioTrackButton extends TrackButton{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let s=0;s<n.length;s++){const i=n[s];e.push(new AudioTrackMenuItem(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);class PlaybackRateMenuItem extends MenuItem{constructor(e,n){const s=n.rate,i=parseFloat(s,10);n.label=s,n.selected=i===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=s,this.rate=i,this.on(e,"ratechange",a=>this.update(a))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);class PlaybackRateMenuButton extends MenuButton{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",s=>this.updateVisibility(s)),this.on(e,"ratechange",s=>this.updateLabel(s)),this.on(e,"playbackrateschange",s=>this.handlePlaybackRateschange(s))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let s=e.length-1;s>=0;s--)n.push(new PlaybackRateMenuItem(this.player(),{rate:e[s]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);class Spacer extends Component$1{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},s={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,s)}}Component$1.registerComponent("Spacer",Spacer);class CustomControlSpacer extends Spacer{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);class ControlBar extends Component$1{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ControlBar.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Component$1.registerComponent("ControlBar",ControlBar);class ErrorDisplay extends ModalDialog{constructor(e,n){super(e,n),this.on(e,"error",s=>{this.open(s)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}ErrorDisplay.prototype.options_=Object.assign({},ModalDialog.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);class TextTrackSelect extends Component$1{constructor(e,n={}){super(e,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),createEl("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const s=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${newGUID()}`)+"-"+n[1].replace(/\W+/g,""),i=createEl("option",{id:s,value:this.localize(n[0]),textContent:this.localize(n[1])});return i.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${s}`),i}))}}Component$1.registerComponent("TextTrackSelect",TextTrackSelect);class TextTrackFieldset extends Component$1{constructor(e,n={}){super(e,n);const s=createEl("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(s);const i=this.options_.selects;for(const a of i){const o=this.options_.selectConfigs[a],l=o.className,u=o.id.replace("%s",this.options_.id_);let c=null;const d=`vjs_select_${newGUID()}`;if(this.options_.type==="colors"){c=createEl("span",{className:l});const m=createEl("label",{id:u,className:"vjs-label",textContent:this.localize(o.label)});m.setAttribute("for",d),c.appendChild(m)}const p=new TextTrackSelect(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:d,labelId:u});this.addChild(p),this.options_.type==="colors"&&(c.appendChild(p.el()),this.el().appendChild(c))}}createEl(){return createEl("fieldset",{className:this.options_.className})}}Component$1.registerComponent("TextTrackFieldset",TextTrackFieldset);class TextTrackSettingsColors extends Component$1{constructor(e,n={}){super(e,n);const s=this.options_.textTrackComponentid,i=new TextTrackFieldset(e,{id_:s,legendId:`captions-text-legend-${s}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const a=new TextTrackFieldset(e,{id_:s,legendId:`captions-background-${s}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a);const o=new TextTrackFieldset(e,{id_:s,legendId:`captions-window-${s}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return createEl("div",{className:"vjs-track-settings-colors"})}}Component$1.registerComponent("TextTrackSettingsColors",TextTrackSettingsColors);class TextTrackSettingsFont extends Component$1{constructor(e,n={}){super(e,n);const s=this.options_.textTrackComponentid,i=new TextTrackFieldset(e,{id_:s,legendId:`captions-font-size-${s}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const a=new TextTrackFieldset(e,{id_:s,legendId:`captions-edge-style-${s}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a);const o=new TextTrackFieldset(e,{id_:s,legendId:`captions-font-family-${s}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return createEl("div",{className:"vjs-track-settings-font"})}}Component$1.registerComponent("TextTrackSettingsFont",TextTrackSettingsFont);class TrackSettingsControls extends Component$1{constructor(e,n={}){super(e,n);const s=this.localize("restore all settings to the default values"),i=new Button(e,{controlText:s,className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const a=new Button(e,{controlText:s,className:"vjs-done-button"});a.el().classList.remove("vjs-control","vjs-button"),a.el().textContent=this.localize("Done"),this.addChild(a)}createEl(){return createEl("div",{className:"vjs-track-settings-controls"})}}Component$1.registerComponent("TrackSettingsControls",TrackSettingsControls);const LOCAL_STORAGE_KEY$1="vjs-text-track-settings",COLOR_BLACK=["#000","Black"],COLOR_BLUE=["#00F","Blue"],COLOR_CYAN=["#0FF","Cyan"],COLOR_GREEN=["#0F0","Green"],COLOR_MAGENTA=["#F0F","Magenta"],COLOR_RED=["#F00","Red"],COLOR_WHITE=["#FFF","White"],COLOR_YELLOW=["#FF0","Yellow"],OPACITY_OPAQUE=["1","Opaque"],OPACITY_SEMI=["0.5","Semi-Transparent"],OPACITY_TRANS=["0","Transparent"],selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE],className:"vjs-window-opacity vjs-opacity"}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function getSelectedOptionValue(t,e){const n=t.options[t.options.selectedIndex].value;return parseOptionValue(n,e)}function setSelectedOption(t,e,n){if(e){for(let s=0;s<t.options.length;s++)if(parseOptionValue(t.options[s].value,n)===e){t.selectedIndex=s;break}}}class TextTrackSettings extends ModalDialog{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=createEl("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const n=new TextTrackSettingsColors(e,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const s=new TextTrackSettingsFont(e,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(s);const i=new TrackSettingsControls(e);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),each(selectConfigs,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return reduce(selectConfigs,(e,n,s)=>{const i=getSelectedOptionValue(this.$(n.selector),n.parser);return i!==void 0&&(e[s]=i),e},{})}setValues(e){each(selectConfigs,(n,s)=>{setSelectedOption(this.$(n.selector),e[s],n.parser)})}setDefaults(){each(selectConfigs,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(window$1.localStorage.getItem(LOCAL_STORAGE_KEY$1))}catch(n){log$1.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?window$1.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(e)):window$1.localStorage.removeItem(LOCAL_STORAGE_KEY$1)}catch(n){log$1.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Component$1.registerComponent("TextTrackSettings",TextTrackSettings);class ResizeManager extends Component$1{constructor(e,n){let s=n.ResizeObserver||window$1.ResizeObserver;n.ResizeObserver===null&&(s=!1);const i=merge$1({createEl:!s,reportTouchActivity:!1},n);super(e,i),this.ResizeObserver=n.ResizeObserver||window$1.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=debounce(()=>{this.resizeHandler()},100,!1,this),s?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const a=this.debouncedHandler_;let o=this.unloadListener_=function(){off(this,"resize",a),off(this,"unload",o),o=null};on(this.el_.contentWindow,"unload",o),on(this.el_.contentWindow,"resize",a)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Component$1.registerComponent("ResizeManager",ResizeManager);const defaults$1={trackingThreshold:20,liveTolerance:15};class LiveTracker extends Component$1{constructor(e,n){const s=merge$1(defaults$1,n,{createEl:!1});super(e,s),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(window$1.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+s;const i=this.liveCurrentTime(),a=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-a)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let s=e?e.length:0;for(;s--;)n.push(e.end(s));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let s=e?e.length:0;for(;s--;)n.push(e.start(s));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Component$1.registerComponent("LiveTracker",LiveTracker);class TitleBar extends Component$1{constructor(e,n){super(e,n),this.on("statechanged",s=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:createEl("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${newGUID()}`}),description:createEl("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${newGUID()}`})},createEl("div",{className:"vjs-title-bar"},{},values(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,s={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const a=this.state[i],o=this.els[i],l=s[i];emptyEl(o),a&&textContent(o,a),n&&(n.removeAttribute(l),a&&n.setAttribute(l,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Component$1.registerComponent("TitleBar",TitleBar);const defaults={initialDisplay:4e3,position:[],takeFocus:!1};class TransientButton extends Button{constructor(e,n){n=merge$1(defaults,n),super(e,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],s=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=createEl("button",{},{type:"button",class:this.buildCSSClass()},createEl("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Component$1.registerComponent("TransientButton",TransientButton);const sourcesetLoad=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const n=t.$$("source"),s=[];let i="";if(!n.length)return!1;for(let a=0;a<n.length;a++){const o=n[a].src;o&&s.indexOf(o)===-1&&s.push(o)}return s.length?(s.length===1&&(i=s[0]),t.triggerSourceset(i),!0):!1},innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=document$1.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const n=document$1.createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",window$1.Element.prototype.appendChild.call(this,n),this.innerHTML}}),getDescriptor=(t,e)=>{let n={};for(let s=0;s<t.length&&(n=Object.getOwnPropertyDescriptor(t[s],e),!(n&&n.set&&n.get));s++);return n.enumerable=!0,n.configurable=!0,n},getInnerHTMLDescriptor=t=>getDescriptor([t.el(),window$1.HTMLMediaElement.prototype,window$1.Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML"),firstSourceWatch=function(t){const e=t.el();if(e.resetSourceWatch_)return;const n={},s=getInnerHTMLDescriptor(t),i=a=>(...o)=>{const l=a.apply(e,o);return sourcesetLoad(t),l};["append","appendChild","insertAdjacentHTML"].forEach(a=>{e[a]&&(n[a]=e[a],e[a]=i(n[a]))}),Object.defineProperty(e,"innerHTML",merge$1(s,{set:i(s.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(a=>{e[a]=n[a]}),Object.defineProperty(e,"innerHTML",s)},t.one("sourceset",e.resetSourceWatch_)},srcDescriptorPolyfill=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?getAbsoluteURL(window$1.Element.prototype.getAttribute.call(this,"src")):""},set(t){return window$1.Element.prototype.setAttribute.call(this,"src",t),t}}),getSrcDescriptor=t=>getDescriptor([t.el(),window$1.HTMLMediaElement.prototype,srcDescriptorPolyfill],"src"),setupSourceset=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const n=getSrcDescriptor(t),s=e.setAttribute,i=e.load;Object.defineProperty(e,"src",merge$1(n,{set:a=>{const o=n.set.call(e,a);return t.triggerSourceset(e.src),o}})),e.setAttribute=(a,o)=>{const l=s.call(e,a,o);return/src/i.test(a)&&t.triggerSourceset(e.src),l},e.load=()=>{const a=i.call(e);return sourcesetLoad(t)||(t.triggerSourceset(""),firstSourceWatch(t)),a},e.currentSrc?t.triggerSourceset(e.currentSrc):sourcesetLoad(t)||firstSourceWatch(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=s,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Html5 extends Tech{constructor(e,n){super(e,n);const s=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",s&&(this.el_.currentSrc!==s.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(s):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const a=this.el_.childNodes;let o=a.length;const l=[];for(;o--;){const u=a[o];u.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),this.textTracks().addTrack(u.track),!i&&!this.el_.hasAttribute("crossorigin")&&isCrossOrigin(u.src)&&(i=!0)):l.push(u))}for(let u=0;u<l.length;u++)this.el_.removeChild(l[u])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&log$1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(TOUCH_ENABLED||IS_IPHONE)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){setupSourceset(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const s=()=>{n=[];for(let a=0;a<e.length;a++){const o=e[a];o.kind==="metadata"&&n.push({track:o,storedMode:o.mode})}};s(),e.addEventListener("change",s),this.on("dispose",()=>e.removeEventListener("change",s));const i=()=>{for(let a=0;a<n.length;a++){const o=n[a];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",s),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",i)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const s=e.toLowerCase();this[`${s}TracksListeners_`]&&Object.keys(this[`${s}TracksListeners_`]).forEach(i=>{this.el()[`${s}Tracks`].removeEventListener(i,this[`${s}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!n,this[`${s}TracksListeners_`]=null,this.proxyNativeTracksForType_(s)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=NORMAL[e],s=this.el()[n.getterName],i=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!s||!s.addEventListener)return;const a={change:l=>{const u={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(u),e==="text"&&this[REMOTE.remoteText.getterName]().trigger(u)},addtrack(l){i.addTrack(l.track)},removetrack(l){i.removeTrack(l.track)}},o=function(){const l=[];for(let u=0;u<i.length;u++){let c=!1;for(let d=0;d<s.length;d++)if(s[d]===i[u]){c=!0;break}c||l.push(i[u])}for(;l.length;)i.removeTrack(l.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach(l=>{const u=a[l];s.addEventListener(l,u),this.on("dispose",c=>s.removeEventListener(l,u))}),this.on("loadstart",o),this.on("dispose",l=>this.off("loadstart",o))}proxyNativeTracks_(){NORMAL.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const s=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(s,e),Html5.disposeMediaElement(e),e=s}else{e=document$1.createElement("video");const s=this.options_.tag&&getAttributes(this.options_.tag),i=merge$1({},s);(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==!0)&&delete i.controls,setAttributes(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&setAttribute(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let s=0;s<n.length;s++){const i=n[s],a=this.options_[i];typeof a<"u"&&(a?setAttribute(e,i,i):removeAttribute(e,i),e[i]=a)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let s=!1;const i=function(){s=!0};this.on("loadstart",i);const a=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",a),this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",a),s||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(s){this.trigger(s)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){log$1(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,n){if(!e)return log$1.error("Invalid source URL."),!1;const s={src:e};n&&(s.type=n);const i=createEl("source",{},s);return this.el_.appendChild(i),!0}removeSourceElement(e){if(!e)return log$1.error("Source URL is required to remove the source element."),!1;const n=this.el_.querySelectorAll("source");for(const s of n)if(s.src===e)return this.el_.removeChild(s),!0;return log$1.warn(`No matching source element found with src: ${e}`),!1}reset(){Html5.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,s):super.addTextTrack(e,n,s)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=document$1.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const s=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(s),s}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let s=n.length;for(;s--;)(e===n[s]||e===n[s].track)&&this.el().removeChild(n[s])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window$1.performance&&(e.creationTime=window$1.performance.now()),e}}defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal())return;const t=document$1.createElement("video"),e=document$1.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch{return!1}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canPlayType=function(t){return Html5.TEST_VID.canPlayType(t)};Html5.canPlaySource=function(t,e){return Html5.canPlayType(t.type)};Html5.canControlVolume=function(){try{const t=Html5.TEST_VID.volume;Html5.TEST_VID.volume=t/2+.1;const e=t!==Html5.TEST_VID.volume;return e&&IS_IOS?(window$1.setTimeout(()=>{Html5&&Html5.prototype&&(Html5.prototype.featuresVolumeControl=t!==Html5.TEST_VID.volume)}),!1):e}catch{return!1}};Html5.canMuteVolume=function(){try{const t=Html5.TEST_VID.muted;return Html5.TEST_VID.muted=!t,Html5.TEST_VID.muted?setAttribute(Html5.TEST_VID,"muted","muted"):removeAttribute(Html5.TEST_VID,"muted","muted"),t!==Html5.TEST_VID.muted}catch{return!1}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58)return!1;try{const t=Html5.TEST_VID.playbackRate;return Html5.TEST_VID.playbackRate=t/2+.1,t!==Html5.TEST_VID.playbackRate}catch{return!1}};Html5.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(document$1.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(document$1.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(document$1.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(document$1.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){defineLazyProperty(Html5.prototype,t,()=>Html5[e](),!0)});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=!0;Html5.prototype.featuresProgressEvents=!0;Html5.prototype.featuresTimeupdateEvents=!0;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);Html5.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};Html5.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let n=e.length;for(;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Html5.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Html5.prototype["set"+toTitleCase$1(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Html5.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Html5.prototype["set"+toTitleCase$1(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){Html5.prototype[t]=function(){return this.el_[t]()}});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(t){try{return Html5.TEST_VID.canPlayType(t)}catch{return""}};Html5.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Html5.nativeSourceHandler.canPlayType(t.type);if(t.src){const n=getFileExtension(t.src);return Html5.nativeSourceHandler.canPlayType(`video/${n}`)}return""};Html5.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);const TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"],BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;BREAKPOINT_CLASSES[t]=`vjs-layout-${e}`});const DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Player extends Component$1{constructor(e,n,s){if(e.id=e.id||n.id||`vjs_video_${newGUID()}`,n=Object.assign(Player.getTagSettings(e),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const o=e.closest("[lang]");o&&(n.language=o.getAttribute("lang"))}if(super(null,n,s),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=createLogger(this.id_),this.fsApi_=FullscreenApi,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&getAttributes(e),this.language(this.options_.language),n.languages){const o={};Object.getOwnPropertyNames(n.languages).forEach(function(l){o[l.toLowerCase()]=n.languages[l]}),this.languages_=o}else this.languages_=Player.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),evented(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(on(document$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=merge$1(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(o=>{this[o](n.plugins[o])}),n.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const l=new window$1.DOMParser().parseFromString(icons,"image/svg+xml");if(l.querySelector("parsererror"))log$1.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const c=l.documentElement;c.style.display="none",this.el_.appendChild(c),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new SpatialNavigation(this),this.addClass("vjs-spatial-navigation-enabled")),TOUCH_ENABLED&&this.addClass("vjs-touch-enabled"),IS_IOS||this.addClass("vjs-workinghover"),Player.players[this.id_]=this;const a=version$6.split(".")[0];this.addClass(`vjs-v${a}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),off(document$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off(document$1,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer(this),ALL.names.forEach(e=>{const n=ALL[e],s=this[n.getterName]();s&&s.off&&s.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,n,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i=this.tag.tagName.toLowerCase()==="video-js";s?n=this.el_=e.parentNode:i||(n=this.el_=super.createEl("div"));const a=getAttributes(e);if(i){for(n=this.el_=e,e=this.tag=document$1.createElement("video");n.children.length;)e.appendChild(n.firstChild);hasClass(n,"video-js")||addClass(n,"video-js"),n.appendChild(e),s=this.playerElIngest_=n,Object.keys(n).forEach(u=>{try{e[u]=n[u]}catch{}})}e.setAttribute("tabindex","-1"),a.tabindex="-1",IS_CHROME&&IS_WINDOWS&&(e.setAttribute("role","application"),a.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(u){i&&u==="class"||n.setAttribute(u,a[u]),i&&e.setAttribute(u,a[u])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(u=>browser[u]).map(u=>"vjs-device-"+u.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),window$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=createStyleElement("vjs-styles-dimensions");const u=$(".vjs-styles-defaults"),c=$("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=e.getElementsByTagName("a");for(let u=0;u<l.length;u++){const c=l.item(u);addClass(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(n,e),prependTo(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){log$1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const s=e+"_";if(n===void 0)return this[s]||0;if(n===""||n==="auto"){this[s]=void 0,this.updateStyleEl_();return}const i=parseFloat(n);if(isNaN(i)){log$1.error(`Improper value "${n}" supplied for for ${e}`);return}this[s]=i,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,isEvented(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),addEventedCallback(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(window$1.VIDEOJS_NO_DYNAMIC_STYLE===!0){const l=typeof this.width_=="number"?this.width_:this.options_.width,u=typeof this.height_=="number"?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(l>=0&&(c.width=l),u>=0&&(c.height=u));return}let e,n,s,i;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?s=this.aspectRatio_:this.videoWidth()>0?s=this.videoWidth()+":"+this.videoHeight():s="16:9";const a=s.split(":"),o=a[1]/a[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=e*o,/^[^a-zA-Z]/.test(this.id())?i="dimensions-"+this.id():i=this.id()+"-dimensions",this.addClass(i),setTextContent(this.styleEl_,`
      .${i} {
        width: ${e}px;
        height: ${n}px;
      }

      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const s=toTitleCase$1(e),i=e.charAt(0).toLowerCase()+e.slice(1);s!=="Html5"&&this.tag&&(Tech.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=s,this.isReady_=!1;let a=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(a=!1);const o={source:n,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ALL.names.forEach(u=>{const c=ALL[u];o[c.getterName]=this[c.privateName]}),Object.assign(o,this.options_[s]),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const l=Tech.getTech(e);if(!l)throw new Error(`No Tech named '${s}' exists! '${s}' should be registered using videojs.registerTech()'`);this.tech_=new l(o),this.tech_.ready(bind_(this,this.handleTechReady_),!0),textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_),TECH_EVENTS_RETRIGGER.forEach(u=>{this.on(this.tech_,u,c=>this[`handleTech${toTitleCase$1(u)}_`](c))}),Object.keys(TECH_EVENTS_QUEUE).forEach(u=>{this.on(this.tech_,u,c=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${TECH_EVENTS_QUEUE[u]}_`].bind(this),event:c});return}this[`handleTech${TECH_EVENTS_QUEUE[u]}_`](c)})}),this.on(this.tech_,"loadstart",u=>this.handleTechLoadStart_(u)),this.on(this.tech_,"sourceset",u=>this.handleTechSourceset_(u)),this.on(this.tech_,"waiting",u=>this.handleTechWaiting_(u)),this.on(this.tech_,"ended",u=>this.handleTechEnded_(u)),this.on(this.tech_,"seeking",u=>this.handleTechSeeking_(u)),this.on(this.tech_,"play",u=>this.handleTechPlay_(u)),this.on(this.tech_,"pause",u=>this.handleTechPause_(u)),this.on(this.tech_,"durationchange",u=>this.handleTechDurationChange_(u)),this.on(this.tech_,"fullscreenchange",(u,c)=>this.handleTechFullscreenChange_(u,c)),this.on(this.tech_,"fullscreenerror",(u,c)=>this.handleTechFullscreenError_(u,c)),this.on(this.tech_,"enterpictureinpicture",u=>this.handleTechEnterPictureInPicture_(u)),this.on(this.tech_,"leavepictureinpicture",u=>this.handleTechLeavePictureInPicture_(u)),this.on(this.tech_,"error",u=>this.handleTechError_(u)),this.on(this.tech_,"posterchange",u=>this.handleTechPosterChange_(u)),this.on(this.tech_,"textdata",u=>this.handleTechTextData_(u)),this.on(this.tech_,"ratechange",u=>this.handleTechRateChange_(u)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(s!=="Html5"||!this.tag)&&prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ALL.names.forEach(e=>{const n=ALL[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&log$1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":version$6}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const n=()=>{const i=this.muted();this.muted(!0);const a=()=>{this.muted(i)};this.playTerminatedQueue_.push(a);const o=this.play();if(isPromise(o))return o.catch(l=>{throw a(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${l||""}`)})};let s;if(e==="any"&&!this.muted()?(s=this.play(),isPromise(s)&&(s=s.catch(n))):e==="muted"&&!this.muted()?s=n():s=this.play(),!!isPromise(s))return s.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let n=e,s="";typeof n!="string"&&(n=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!s&&(s=findMimetype(this,n)),this.cache_.source=merge$1({},e,{src:n,type:s});const i=this.cache_.sources.filter(u=>u.src&&u.src===n),a=[],o=this.$$("source"),l=[];for(let u=0;u<o.length;u++){const c=getAttributes(o[u]);a.push(c),c.src&&c.src===n&&l.push(c.src)}l.length&&!i.length?this.cache_.sources=a:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=a=>this.updateSourceCaches_(a);const s=this.currentSource().src,i=e.src;s&&!/^blob:/.test(s)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==s)&&(n=()=>{}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],a=>{if(a.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?silencePromise(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),s=>s.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!document$1.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const s=this.el();let i=document$1[this.fsApi_.fullscreenElement]===s;!i&&s.matches&&(i=s.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in allowedSetters)return set(this.middleware_,this.tech_,e,n);if(e in allowedMediators)return mediate(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(s){throw log$1(s),s}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in allowedGetters)return get(this.middleware_,this.tech_,e);if(e in allowedMediators)return mediate(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(log$1(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(log$1(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(log$1(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=silencePromise){this.playCallbacks_.push(e);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),s=!!(IS_ANY_SAFARI||IS_IOS);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&s&&this.load();return}const i=this.techGet_("play");s&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),i===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(s){s(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||createTimeRanges$1(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=createTimeRanges$1(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=createTimeRanges$1(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let s=e.end(e.length-1);return s>n&&(s=n),s}volume(e){let n;if(e!==void 0){n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((s,i)=>{function a(){n.off("fullscreenerror",l),n.off("fullscreenchange",o)}function o(){a(),s()}function l(c,d){a(),i(d)}n.one("fullscreenchange",o),n.one("fullscreenerror",l);const u=n.requestFullscreenHelper_(e);u&&(u.then(a,a),u.then(s,i))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(n=e)),this.fsApi_.requestFullscreen){const s=this.el_[this.fsApi_.requestFullscreen](n);return s&&s.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,s)=>{function i(){e.off("fullscreenerror",o),e.off("fullscreenchange",a)}function a(){i(),n()}function o(u,c){i(),s(c)}e.one("fullscreenchange",a),e.one("fullscreenerror",o);const l=e.exitFullscreenHelper_();l&&(l.then(i,i),l.then(n,s))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=document$1[this.fsApi_.exitFullscreen]();return e&&silencePromise(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document$1.documentElement.style.overflow,on(document$1,"keydown",this.boundFullWindowOnEscKey_),document$1.documentElement.style.overflow="hidden",addClass(document$1.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off(document$1,"keydown",this.boundFullWindowOnEscKey_),document$1.documentElement.style.overflow=this.docOrigOverflow,removeClass(document$1.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window$1.documentPictureInPicture){const e=document$1.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(createEl("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window$1.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(copyStyleSheetsToWindow(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",s=>{const i=s.target.querySelector(".video-js");e.parentNode.replaceChild(i,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in document$1&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(window$1.documentPictureInPicture&&window$1.documentPictureInPicture.window)return window$1.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in document$1)return document$1.exitPictureInPicture()}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(i=>{const a=i.tagName.toLowerCase();if(i.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return a==="input"?o.indexOf(i.type)===-1:["textarea"].indexOf(a)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:s=o=>e.key.toLowerCase()==="f",muteKey:i=o=>e.key.toLowerCase()==="m",playPauseKey:a=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=n;if(s.call(this,e)){e.preventDefault(),e.stopPropagation();const o=Component$1.getComponent("FullscreenToggle");document$1[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),Component$1.getComponent("MuteToggle").prototype.handleClick.call(this,e)):a.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Component$1.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let s=0,i=this.options_.techOrder;s<i.length;s++){const a=i[s];let o=Tech.getTech(a);if(o||(o=Component$1.getComponent(a)),!o){log$1.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(n=o.canPlayType(e),n))return n}return""}selectSource(e){const n=this.options_.techOrder.map(l=>[l,Tech.getTech(l)]).filter(([l,u])=>u?u.isSupported():(log$1.error(`The "${l}" tech is undefined. Skipped browser support check for that tech.`),!1)),s=function(l,u,c){let d;return l.some(p=>u.some(m=>{if(d=c(p,m),d)return!0})),d};let i;const a=l=>(u,c)=>l(c,u),o=([l,u],c)=>{if(u.canPlaySource(c,this.options_[l.toLowerCase()]))return{source:c,tech:l}};return this.options_.sourceOrder?i=s(e,n,a(o)):i=s(n,e,o),i||!1}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const s=filterSource(e);if(!s.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=s),this.updateSourceCaches_(s[0]),setSource(this,s[0],(i,a)=>{if(this.middleware_=a,n||(this.cache_.sources=s),this.updateSourceCaches_(i),this.src_(i)){if(s.length>1)return this.handleSrc_(s.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}setTech(a,this.tech_)}),s.length>1){const i=()=>{this.error(null),this.handleSrc_(s.slice(1),!0)},a=()=>{this.off("error",i)};this.one("error",i),this.one("playing",a),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",a)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return n?titleCaseEquals(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,n){return this.tech_?this.tech_.addSourceElement(e,n):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();silencePromise(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),isEvented(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:s,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:a}=s||{};e&&e.updateContent(),n&&n.updateContent(),i&&i.updateContent(),a&&(a.update(),a.loadProgressBar&&a.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(hooks("beforeerror").forEach(n=>{const s=n(this,e);if(!(isObject(s)&&!Array.isArray(s)||typeof s=="string"||typeof s=="number"||s===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=s}),this.options_.suppressNotSupportedError&&e&&e.code===4){const n=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new MediaError(e),this.addClass("vjs-error"),log$1.error(`(CODE:${this.error_.code} ${MediaError.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),hooks("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,s;const i=bind_(this,this.reportUserActivity),a=function(p){(p.screenX!==n||p.screenY!==s)&&(n=p.screenX,s=p.screenY,i())},o=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},l=function(p){i(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",a),this.on("mouseup",l),this.on("mouseleave",l);const u=this.getChild("controlBar");u&&!IS_IOS&&!IS_ANDROID&&(u.on("mouseenter",function(p){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(p){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i);let c;const d=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(c);const p=this.options_.inactivityTimeout;p<=0||(c=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},p))};this.setInterval(d,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),s=n&&n.currentHeight();e.forEach(i=>{i!==n&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=s,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(s),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,s){if(this.tech_)return this.tech_.addTextTrack(e,n,s)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),isEvented(this)&&this.trigger("languagechange"))}languages(){return merge$1(Player.prototype.options_.languages,this.languages_)}toJSON(){const e=merge$1(this.options_),n=e.tracks;e.tracks=[];for(let s=0;s<n.length;s++){let i=n[s];i=merge$1(i),i.player=void 0,e.tracks[s]=i}return e}createModal(e,n){n=n||{},n.content=e||"";const s=new ModalDialog(this,n);return this.addChild(s),s.on("dispose",()=>{this.removeChild(s)}),s.open(),s}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let s=0;s<BREAKPOINT_ORDER.length;s++){const i=BREAKPOINT_ORDER[s],a=this.breakpoints_[i];if(n<=a){if(e===i)return;e&&this.removeClass(BREAKPOINT_CLASSES[e]),this.addClass(BREAKPOINT_CLASSES[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},DEFAULT_BREAKPOINTS,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||""}loadMedia(e,n){if(!e||typeof e!="object")return;const s=this.crossOrigin();this.reset(),this.cache_.media=merge$1(e);const{artist:i,artwork:a,description:o,poster:l,src:u,textTracks:c,title:d}=this.cache_.media;!a&&l&&(this.cache_.media.artwork=[{src:l,type:getMimetype(l)}]),s&&this.crossOrigin(s),u&&this.src(u),l&&this.poster(l),Array.isArray(c)&&c.forEach(p=>this.addRemoteTextTrack(p,!1)),this.titleBar&&this.titleBar.update({title:d,description:o||i||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),n=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src})),i={src:n,textTracks:s};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:getMimetype(i.poster)}]),i}return merge$1(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},s=getAttributes(e),i=s["data-setup"];if(hasClass(e,"vjs-fill")&&(s.fill=!0),hasClass(e,"vjs-fluid")&&(s.fluid=!0),i!==null)try{Object.assign(s,JSON.parse(i||"{}"))}catch(a){log$1.error("data-setup",a)}if(Object.assign(n,s),e.hasChildNodes()){const a=e.childNodes;for(let o=0,l=a.length;o<l;o++){const u=a[o],c=u.nodeName.toLowerCase();c==="source"?n.sources.push(getAttributes(u)):c==="track"&&n.tracks.push(getAttributes(u))}}return n}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>typeof n=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ALL.names.forEach(function(t){const e=ALL[t];Player.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};const navigator$1=window$1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};TECH_EVENTS_RETRIGGER.forEach(function(t){Player.prototype[`handleTech${toTitleCase$1(t)}_`]=function(){return this.trigger(t)}});Component$1.registerComponent("Player",Player);const BASE_PLUGIN_NAME="plugin",PLUGIN_CACHE_KEY="activePlugins_",pluginStorage={},pluginExists=t=>pluginStorage.hasOwnProperty(t),getPlugin=t=>pluginExists(t)?pluginStorage[t]:void 0,markPluginAsActive=(t,e)=>{t[PLUGIN_CACHE_KEY]=t[PLUGIN_CACHE_KEY]||{},t[PLUGIN_CACHE_KEY][e]=!0},triggerSetupEvent=(t,e,n)=>{const s=(n?"before":"")+"pluginsetup";t.trigger(s,e),t.trigger(s+":"+e.name,e)},createBasicPlugin=function(t,e){const n=function(){triggerSetupEvent(this,{name:t,plugin:e,instance:null},!0);const s=e.apply(this,arguments);return markPluginAsActive(this,t),triggerSetupEvent(this,{name:t,plugin:e,instance:s}),s};return Object.keys(e).forEach(function(s){n[s]=e[s]}),n},createPluginFactory=(t,e)=>(e.prototype.name=t,function(...n){triggerSetupEvent(this,{name:t,plugin:e,instance:null},!0);const s=new e(this,...n);return this[t]=()=>s,triggerSetupEvent(this,s.getEventHash()),s});class Plugin{constructor(e){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),markPluginAsActive(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,n={}){return trigger(this.eventBusEl_,e,this.getEventHash(n))}handleStateChanged(e){}dispose(){const{name:e,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[PLUGIN_CACHE_KEY][e]=!1,this.player=this.state=null,n[e]=createPluginFactory(e,pluginStorage[e])}static isBasic(e){const n=typeof e=="string"?getPlugin(e):e;return typeof n=="function"&&!Plugin.prototype.isPrototypeOf(n.prototype)}static registerPlugin(e,n){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(pluginExists(e))log$1.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Player.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof n}.`);return pluginStorage[e]=n,e!==BASE_PLUGIN_NAME&&(Plugin.isBasic(n)?Player.prototype[e]=createBasicPlugin(e,n):Player.prototype[e]=createPluginFactory(e,n)),n}static deregisterPlugin(e){if(e===BASE_PLUGIN_NAME)throw new Error("Cannot de-register base plugin.");pluginExists(e)&&(delete pluginStorage[e],delete Player.prototype[e])}static getPlugins(e=Object.keys(pluginStorage)){let n;return e.forEach(s=>{const i=getPlugin(s);i&&(n=n||{},n[s]=i)}),n}static getPluginVersion(e){const n=getPlugin(e);return n&&n.VERSION||""}}Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(t){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][t]===!0};Player.prototype.hasPlugin=function(t){return!!pluginExists(t)};function deprecate(t,e){let n=!1;return function(...s){return n||log$1.warn(t),n=!0,e.apply(this,s)}}function deprecateForMajor(t,e,n,s){return deprecate(`${e} is deprecated and will be removed in ${t}.0; please use ${n} instead.`,s)}var VjsErrors={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const normalizeId=t=>t.indexOf("#")===0?t.slice(1):t;function videojs(t,e,n){let s=videojs.getPlayer(t);if(s)return e&&log$1.warn(`Player "${t}" is already initialised. Options will not be applied.`),n&&s.ready(n),s;const i=typeof t=="string"?$("#"+normalizeId(t)):t;if(!isEl(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in i?i.getRootNode()instanceof window$1.ShadowRoot:!1)?i.getRootNode():i.ownerDocument.body;(!i.ownerDocument.defaultView||!o.contains(i))&&log$1.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),hooks("beforesetup").forEach(u=>{const c=u(i,merge$1(e));if(!isObject(c)||Array.isArray(c)){log$1.error("please return an object in beforesetup hooks");return}e=merge$1(e,c)});const l=Component$1.getComponent("Player");return s=new l(i,e,n),hooks("setup").forEach(u=>u(s)),s}videojs.hooks_=hooks_;videojs.hooks=hooks;videojs.hook=hook;videojs.hookOnce=hookOnce;videojs.removeHook=removeHook;if(window$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&isReal()){let t=$(".vjs-styles-defaults");if(!t){t=createStyleElement("vjs-styles-defaults");const e=$("head");e&&e.insertBefore(t,e.firstChild),setTextContent(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}autoSetupTimeout(1,videojs);videojs.VERSION=version$6;videojs.options=Player.prototype.options_;videojs.getPlayers=()=>Player.players;videojs.getPlayer=t=>{const e=Player.players;let n;if(typeof t=="string"){const s=normalizeId(t),i=e[s];if(i)return i;n=$("#"+s)}else n=t;if(isEl(n)){const{player:s,playerId:i}=n;if(s||e[i])return s||e[i]}};videojs.getAllPlayers=()=>Object.keys(Player.players).map(t=>Player.players[t]).filter(Boolean);videojs.players=Player.players;videojs.getComponent=Component$1.getComponent;videojs.registerComponent=(t,e)=>(Tech.isTech(e)&&log$1.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Component$1.registerComponent.call(Component$1,t,e));videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TERMINATOR,writeable:!1,enumerable:!0});videojs.browser=browser;videojs.obj=Obj;videojs.mergeOptions=deprecateForMajor(9,"videojs.mergeOptions","videojs.obj.merge",merge$1);videojs.defineLazyProperty=deprecateForMajor(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",defineLazyProperty);videojs.bind=deprecateForMajor(9,"videojs.bind","native Function.prototype.bind",bind_);videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=(t,e)=>(log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Plugin.registerPlugin(t,e));videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(t,e){return t=(""+t).toLowerCase(),videojs.options.languages=merge$1(videojs.options.languages,{[t]:e}),videojs.options.languages[t]};videojs.log=log$1;videojs.createLogger=createLogger;videojs.time=Time;videojs.createTimeRange=deprecateForMajor(9,"videojs.createTimeRange","videojs.time.createTimeRanges",createTimeRanges$1);videojs.createTimeRanges=deprecateForMajor(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",createTimeRanges$1);videojs.formatTime=deprecateForMajor(9,"videojs.formatTime","videojs.time.formatTime",formatTime);videojs.setFormatTime=deprecateForMajor(9,"videojs.setFormatTime","videojs.time.setFormatTime",setFormatTime);videojs.resetFormatTime=deprecateForMajor(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",resetFormatTime);videojs.parseUrl=deprecateForMajor(9,"videojs.parseUrl","videojs.url.parseUrl",parseUrl);videojs.isCrossOrigin=deprecateForMajor(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",isCrossOrigin);videojs.EventTarget=EventTarget$2;videojs.any=any;videojs.on=on;videojs.one=one;videojs.off=off;videojs.trigger=trigger;videojs.xhr=XHR;videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{videojs[t]=function(){return log$1.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),Dom[t].apply(null,arguments)}});videojs.computedStyle=deprecateForMajor(9,"videojs.computedStyle","videojs.dom.computedStyle",computedStyle);videojs.dom=Dom;videojs.fn=Fn;videojs.num=Num;videojs.str=Str;videojs.url=Url;videojs.Error=VjsErrors;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class QualityLevel{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(s){n.enabled_(s)}}),n}}class QualityLevelList extends videojs.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const s=this.levels_.length;return n=new QualityLevel(e),""+s in this||Object.defineProperty(this,s,{get(){return this.levels_[s]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let s=0,i=this.length;s<i;s++)if(this[s]===e){n=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,s=this.length;n<s;n++){const i=this[n];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}QualityLevelList.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in QualityLevelList.prototype.allowedEvents_)QualityLevelList.prototype["on"+t]=null;var version$5="4.1.0";const initPlugin$1=function(t,e){const n=t.qualityLevels,s=new QualityLevelList,i=function(){s.dispose(),t.qualityLevels=n,t.off("dispose",i)};return t.on("dispose",i),t.qualityLevels=()=>s,t.qualityLevels.VERSION=version$5,s},qualityLevels=function(t){return initPlugin$1(this,videojs.obj.merge({},t))};videojs.registerPlugin("qualityLevels",qualityLevels);qualityLevels.VERSION=version$5;/*! @name @videojs/http-streaming @version 3.16.0 @license Apache-2.0 */const resolveUrl=resolveUrl$1,resolveManifestRedirect=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,logger=t=>videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",`${t} >`):function(){};function merge(...t){const e=videojs.obj||videojs;return(e.merge||e.mergeOptions).apply(e,t)}function createTimeRanges(...t){const e=videojs.time||videojs;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function bufferedRangesToString(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let n=0;n<t.length;n++){const s=t.start(n),i=t.end(n);e+=`${s} --> ${i}. Duration (${i-s})
`}return e}const TIME_FUDGE_FACTOR=1/30,SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3,filterRanges=function(t,e){const n=[];let s;if(t&&t.length)for(s=0;s<t.length;s++)e(t.start(s),t.end(s))&&n.push([t.start(s),t.end(s)]);return createTimeRanges(n)},findRange=function(t,e){return filterRanges(t,function(n,s){return n-SAFE_TIME_DELTA<=e&&s+SAFE_TIME_DELTA>=e})},findNextRange=function(t,e){return filterRanges(t,function(n){return n-TIME_FUDGE_FACTOR>=e})},findGaps=function(t){if(t.length<2)return createTimeRanges();const e=[];for(let n=1;n<t.length;n++){const s=t.end(n-1),i=t.start(n);e.push([s,i])}return createTimeRanges(e)},bufferIntersection=function(t,e){let n=null,s=null,i=0;const a=[],o=[];if(!t||!t.length||!e||!e.length)return createTimeRanges();let l=t.length;for(;l--;)a.push({time:t.start(l),type:"start"}),a.push({time:t.end(l),type:"end"});for(l=e.length;l--;)a.push({time:e.start(l),type:"start"}),a.push({time:e.end(l),type:"end"});for(a.sort(function(u,c){return u.time-c.time}),l=0;l<a.length;l++)a[l].type==="start"?(i++,i===2&&(n=a[l].time)):a[l].type==="end"&&(i--,i===1&&(s=a[l].time)),n!==null&&s!==null&&(o.push([n,s]),n=null,s=null);return createTimeRanges(o)},printableRange=t=>{const e=[];if(!t||!t.length)return"";for(let n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},timeUntilRebuffer=function(t,e,n=1){return((t.length?t.end(t.length-1):0)-e)/n},timeRangesToArray=t=>{const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},isRangeDifferent=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1},lastBufferedEnd=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},timeAheadOf=function(t,e){let n=0;if(!t||!t.length)return n;for(let s=0;s<t.length;s++){const i=t.start(s),a=t.end(s);if(!(e>a)){if(e>i&&e<=a){n+=a-e;continue}n+=a-i}}return n},segmentDurationWithParts=(t,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(s){n+=s.duration}),(e.preloadHints||[]).forEach(function(s){s.type==="PART"&&(n+=t.partTargetDuration)}),n},getPartsAndSegments=t=>(t.segments||[]).reduce((e,n,s)=>(n.parts?n.parts.forEach(function(i,a){e.push({duration:i.duration,segmentIndex:s,partIndex:a,part:i,segment:n})}):e.push({duration:n.duration,segmentIndex:s,partIndex:null,segment:n,part:null}),e),[]),getLastParts=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},getKnownPartCount=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:n}=t;let s=(n||[]).reduce((i,a)=>i+(a.type==="PART"?1:0),0);return s+=e&&e.length?e.length:0,s},liveEdgeDelay=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const n=getLastParts(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},backwardDuration=function(t,e){let n=0,s=e-t.mediaSequence,i=t.segments[s];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;s--;){if(i=t.segments[s],typeof i.end<"u")return{result:n+i.end,precise:!0};if(n+=segmentDurationWithParts(t,i),typeof i.start<"u")return{result:n+i.start,precise:!0}}return{result:n,precise:!1}},forwardDuration=function(t,e){let n=0,s,i=e-t.mediaSequence;for(;i<t.segments.length;i++){if(s=t.segments[i],typeof s.start<"u")return{result:s.start-n,precise:!0};if(n+=segmentDurationWithParts(t,s),typeof s.end<"u")return{result:s.end-n,precise:!0}}return{result:-1,precise:!1}},intervalDuration=function(t,e,n){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const s=backwardDuration(t,e);if(s.precise)return s.result;const i=forwardDuration(t,e);return i.precise?i.result:s.result+n},duration=function(t,e,n){if(!t)return 0;if(typeof n!="number"&&(n=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return window$1.Infinity}return intervalDuration(t,e,n)},sumDurations=function({defaultDuration:t,durationList:e,startIndex:n,endIndex:s}){let i=0;if(n>s&&([n,s]=[s,n]),n<0){for(let a=n;a<Math.min(0,s);a++)i+=t;n=0}for(let a=n;a<s;a++)i+=e[a].duration;return i},playlistEnd=function(t,e,n,s){if(!t||!t.segments)return null;if(t.endList)return duration(t);if(e===null)return null;e=e||0;let i=intervalDuration(t,t.mediaSequence+t.segments.length,e);return n&&(s=typeof s=="number"?s:liveEdgeDelay(null,t),i-=s),Math.max(0,i)},seekable=function(t,e,n){const i=e||0;let a=playlistEnd(t,e,!0,n);return a===null?createTimeRanges():(a<i&&(a=i),createTimeRanges(i,a))},getMediaInfoForTime=function({playlist:t,currentTime:e,startingSegmentIndex:n,startingPartIndex:s,startTime:i,exactManifestTimings:a}){let o=e-i;const l=getPartsAndSegments(t);let u=0;for(let c=0;c<l.length;c++){const d=l[c];if(n===d.segmentIndex&&!(typeof s=="number"&&typeof d.partIndex=="number"&&s!==d.partIndex)){u=c;break}}if(o<0){if(u>0)for(let c=u-1;c>=0;c--){const d=l[c];if(o+=d.duration,a){if(o<0)continue}else if(o+TIME_FUDGE_FACTOR<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:i-sumDurations({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:c})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e}}if(u<0){for(let c=u;c<0;c++)if(o-=t.targetDuration,o<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:e};u=0}for(let c=u;c<l.length;c++){const d=l[c];o-=d.duration;const p=d.duration>TIME_FUDGE_FACTOR,m=o===0,g=p&&o+TIME_FUDGE_FACTOR>=0;if(!((m||g)&&c!==l.length-1)){if(a){if(o>0)continue}else if(o-TIME_FUDGE_FACTOR>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:i+sumDurations({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:c})}}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:e}},isExcluded=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},isIncompatible=function(t){return t.excludeUntil&&t.excludeUntil===1/0},isEnabled=function(t){const e=isExcluded(t);return!t.disabled&&!e},isDisabled=function(t){return t.disabled},isAes=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hasAttribute=function(t,e){return e.attributes&&e.attributes[t]},estimateSegmentRequestTime=function(t,e,n,s=0){return hasAttribute("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-s*8)/e:NaN},isLowestEnabledRendition=(t,e)=>{if(t.playlists.length===1)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(s=>isEnabled(s)?(s.attributes.BANDWIDTH||0)<n:!1).length===0},playlistMatch=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),someAudioVariant=function(t,e){const n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let s=!1;for(const i in n){for(const a in n[i])if(s=e(n[i][a]),s)break;if(s)break}return!!s},isAudioOnly=t=>{if(!t||!t.playlists||!t.playlists.length)return someAudioVariant(t,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<t.playlists.length;e++){const n=t.playlists[e],s=n.attributes&&n.attributes.CODECS;if(!(s&&s.split(",").every(a=>isAudioCodec(a))||someAudioVariant(t,a=>playlistMatch(n,a))))return!1}return!0};var Playlist={liveEdgeDelay,duration,seekable,getMediaInfoForTime,isEnabled,isDisabled,isExcluded,isIncompatible,playlistEnd,isAes,hasAttribute,estimateSegmentRequestTime,isLowestEnabledRendition,isAudioOnly,playlistMatch,segmentDurationWithParts};const{log}=videojs,createPlaylistID=(t,e)=>`${t}-${e}`,groupID=(t,e,n)=>`placeholder-uri-${t}-${e}-${n}`,parseManifest=({onwarn:t,oninfo:e,manifestString:n,customTagParsers:s=[],customTagMappers:i=[],llhls:a})=>{const o=new Parser;t&&o.on("warn",t),e&&o.on("info",e),s.forEach(c=>o.addParser(c)),i.forEach(c=>o.addTagMapper(c)),o.push(n),o.end();const l=o.manifest;if(a||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(c){l.hasOwnProperty(c)&&delete l[c]}),l.segments&&l.segments.forEach(function(c){["parts","preloadHints"].forEach(function(d){c.hasOwnProperty(d)&&delete c[d]})})),!l.targetDuration){let c=10;l.segments&&l.segments.length&&(c=l.segments.reduce((d,p)=>Math.max(d,p.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${c}`}),l.targetDuration=c}const u=getLastParts(l);if(u.length&&!l.partTargetDuration){const c=u.reduce((d,p)=>Math.max(d,p.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${c}`}),log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=c}return l},forEachMediaGroup=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(t.mediaGroups[n])for(const s in t.mediaGroups[n])for(const i in t.mediaGroups[n][s]){const a=t.mediaGroups[n][s][i];e(a,n,s,i)}})},setupMediaPlaylist=({playlist:t,uri:e,id:n})=>{t.id=n,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},setupMediaPlaylists=t=>{let e=t.playlists.length;for(;e--;){const n=t.playlists[e];setupMediaPlaylist({playlist:n,id:createPlaylistID(e,n.uri)}),n.resolvedUri=resolveUrl(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},resolveMediaGroupUris=t=>{forEachMediaGroup(t,e=>{e.uri&&(e.resolvedUri=resolveUrl(t.uri,e.uri))})},mainForMedia=(t,e)=>{const n=createPlaylistID(0,e),s={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window$1.location.href,resolvedUri:window$1.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return s.playlists[n]=s.playlists[0],s.playlists[e]=s.playlists[0],s},addPropertiesToMain=(t,e,n=groupID)=>{t.uri=e;for(let i=0;i<t.playlists.length;i++)if(!t.playlists[i].uri){const a=`placeholder-uri-${i}`;t.playlists[i].uri=a}const s=isAudioOnly(t);forEachMediaGroup(t,(i,a,o,l)=>{if(!i.playlists||!i.playlists.length){if(s&&a==="AUDIO"&&!i.uri)for(let u=0;u<t.playlists.length;u++){const c=t.playlists[u];if(c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o)return}i.playlists=[_extends({},i)]}i.playlists.forEach(function(u,c){const d=n(a,o,l,u),p=createPlaylistID(c,d);u.uri?u.resolvedUri=u.resolvedUri||resolveUrl(t.uri,u.uri):(u.uri=c===0?d:p,u.resolvedUri=u.uri),u.id=u.id||p,u.attributes=u.attributes||{},t.playlists[u.id]=u,t.playlists[u.uri]=u})}),setupMediaPlaylists(t),resolveMediaGroupUris(t)};class DateRangesStorage{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[n]=e;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,s=n.startDate.getTime();this.trimProcessedDateRanges_(s),this.pendingDateRanges_=e.reduce((i,a)=>(i.set(a.id,a),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},n=[];this.pendingDateRanges_.forEach((s,i)=>{if(!this.processedDateRanges_.has(i)&&(s.startTime=s.startDate.getTime()/1e3-this.offset_,s.processDateRange=()=>this.processDateRange(s),n.push(s),!!s.class))if(e[s.class]){const a=e[s.class].push(s);s.classListIndex=a-1}else e[s.class]=[s],s.classListIndex=0});for(const s of n){const i=e[s.class]||[];s.endDate?s.endTime=s.endDate.getTime()/1e3-this.offset_:s.endOnNext&&i[s.classListIndex+1]?s.endTime=i[s.classListIndex+1].startTime:s.duration?s.endTime=s.startTime+s.duration:s.plannedDuration?s.endTime=s.startTime+s.plannedDuration:s.endTime=s.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((s,i)=>{s.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}}const QUOTA_EXCEEDED_ERR=22,getStreamingNetworkErrorMetadata=({requestType:t,request:e,error:n,parseFailure:s})=>{const i=e.status<200||e.status>299,a=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:t},l=i&&!a||s;if(n&&a)o.error=_extends({},n),o.errorType=videojs.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=videojs.Error.NetworkRequestAborted;else if(e.timedout)o.erroType=videojs.Error.NetworkRequestTimeout;else if(l){const u=s?videojs.Error.NetworkBodyParserFailed:videojs.Error.NetworkBadStatus;o.errorType=u,o.status=e.status,o.headers=e.headers}return o},{EventTarget:EventTarget$1}=videojs,addLLHLSQueryDirectives=(t,e)=>{if(e.endList||!e.serverControl)return t;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:s}=e;let i=e.mediaSequence+e.segments.length;if(s){const a=s.parts||[],o=getKnownPartCount(e)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&i--}n._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const s=new window$1.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){n.hasOwnProperty(i)&&s.searchParams.set(i,n[i])}),t=s.toString()}return t},updateSegment=(t,e)=>{if(!t)return e;const n=merge(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(let s=0;s<e.parts.length;s++)t.parts&&t.parts[s]&&(n.parts[s]=merge(t.parts[s],e.parts[s]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},updateSegments=(t,e,n)=>{const s=t.slice(),i=e.slice();n=n||0;const a=[];let o;for(let l=0;l<i.length;l++){const u=s[l+n],c=i[l];u?(o=u.map||o,a.push(updateSegment(u,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a},resolveSegmentUris=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=resolveUrl(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=resolveUrl(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=resolveUrl(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=resolveUrl(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=resolveUrl(e,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=resolveUrl(e,n.uri))})},getAllSegments=function(t){const e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let s=0;s<n.preloadHints.length;s++)if(n.preloadHints[s].type==="MAP")return e}n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},isPlaylistUnchanged=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,updateMain$1=(t,e,n=isPlaylistUnchanged)=>{const s=merge(t,{}),i=s.playlists[e.id];if(!i||n(i,e))return null;e.segments=getAllSegments(e);const a=merge(i,e);if(a.preloadSegment&&!e.preloadSegment&&delete a.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}a.segments=updateSegments(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}a.segments.forEach(o=>{resolveSegmentUris(o,a.resolvedUri)});for(let o=0;o<s.playlists.length;o++)s.playlists[o].id===e.id&&(s.playlists[o]=a);return s.playlists[e.id]=a,s.playlists[e.uri]=a,forEachMediaGroup(t,(o,l,u,c)=>{if(o.playlists)for(let d=0;d<o.playlists.length;d++)e.id===o.playlists[d].id&&(o.playlists[d]=a)}),s},refreshDelay=(t,e)=>{const n=t.segments||[],s=n[n.length-1],i=s&&s.parts&&s.parts[s.parts.length-1],a=i&&i.duration||s&&s.duration;return e&&a?a*1e3:(t.partTargetDuration||t.targetDuration||10)*500},playlistMetadataPayload=(t,e,n)=>{if(!t)return;const s=[];return t.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:a,RESOLUTION:o,CODECS:l}=i.attributes;s.push({id:i.id,bandwidth:a,resolution:o,codecs:l})}),{type:e,isLive:n,renditions:s}};class PlaylistLoader extends EventTarget$1{constructor(e,n,s={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=logger("PlaylistLoader");const{withCredentials:i=!1}=s;this.src=e,this.vhs_=n,this.withCredentials=i,this.addDateRangesToTextTrack_=s.addDateRangesToTextTrack;const a=n.options_;this.customTagParsers=a&&a.customTagParsers||[],this.customTagMappers=a&&a.customTagMappers||[],this.llhls=a&&a.llhls,this.dateRangesStorage_=new DateRangesStorage,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let n=resolveUrl(this.main.uri,e.uri);this.llhls&&(n=addLLHLSQueryDirectives(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(s,i)=>{if(this.request){if(s)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,s){const{uri:i,id:a}=n;this.request=null,s&&(this.state=s),this.error={playlist:this.main.playlists[a],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:getStreamingNetworkErrorMetadata({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:n}){try{return parseManifest({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(s){this.error=s,this.error.metadata={errorType:videojs.Error.StreamingHlsPlaylistParserError,error:s}}}haveMetadata({playlistString:e,playlistObject:n,url:s,id:i}){this.request=null,this.state="HAVE_METADATA";const a={playlistInfo:{type:"media",uri:s}};this.trigger({type:"playlistparsestart",metadata:a});const o=n||this.parseManifest_({url:s,manifestString:e});o.lastRequest=Date.now(),setupMediaPlaylist({playlist:o,uri:s,id:i});const l=updateMain$1(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,l?(this.main=l,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!l)),a.parsedPlaylist=playlistMetadataPayload(this.main.playlists,a.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:a}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window$1.clearTimeout(this.mediaUpdateTimeout),window$1.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new DateRangesStorage,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(window$1.clearTimeout(this.finalRenditionTimeout),n){const l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window$1.setTimeout(this.media.bind(this,e,!1),l);return}const s=this.state,i=!this.media_||e.id!==this.media_.id,a=this.main.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(refreshDelay(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(l,u)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=resolveManifestRedirect(e.resolvedUri,u),l)return this.playlistRequestError(this.request,e,s);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:u.responseText,url:e.uri,id:e.id}),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const s=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=window$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},s);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=window$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=window$1.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,s)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:s.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:s.responseText,code:2,metadata:getStreamingNetworkErrorMetadata({requestType:s.requestType,request:s,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=resolveManifestRedirect(this.src,s),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:s.responseText,url:this.src});e.parsedPlaylist=playlistMetadataPayload(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,addPropertiesToMain(this.main,this.srcUri()),e.playlists.forEach(s=>{s.segments=getAllSegments(s),s.segments.forEach(i=>{resolveSegmentUris(i,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||window$1.location.href;this.main=mainForMedia(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,n){const s=this.main,i=e.ID;let a=s.playlists.length;for(;a--;){const o=s.playlists[a];if(o.attributes["PATHWAY-ID"]===i){const l=o.resolvedUri,u=o.id;if(n){const c=this.createCloneURI_(o.resolvedUri,e),d=createPlaylistID(i,c),p=this.createCloneAttributes_(i,o.attributes),m=this.createClonePlaylist_(o,d,e,p);s.playlists[a]=m,s.playlists[d]=m,s.playlists[c]=m}else s.playlists.splice(a,1);delete s.playlists[u],delete s.playlists[l]}}this.updateOrDeleteCloneMedia(e,n)}updateOrDeleteCloneMedia(e,n){const s=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(!(!s.mediaGroups[a]||!s.mediaGroups[a][i])){for(const o in s.mediaGroups[a])if(o===i){for(const l in s.mediaGroups[a][o])s.mediaGroups[a][o][l].playlists.forEach((c,d)=>{const p=s.playlists[c.id],m=p.id,g=p.resolvedUri;delete s.playlists[m],delete s.playlists[g]});delete s.mediaGroups[a][o]}}}),n&&this.createClonedMediaGroups_(e)}addClonePathway(e,n={}){const s=this.main,i=s.playlists.length,a=this.createCloneURI_(n.resolvedUri,e),o=createPlaylistID(e.ID,a),l=this.createCloneAttributes_(e.ID,n.attributes),u=this.createClonePlaylist_(n,o,e,l);s.playlists[i]=u,s.playlists[o]=u,s.playlists[a]=u,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const n=e.ID,s=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(!(!i.mediaGroups[a]||i.mediaGroups[a][n]))for(const o in i.mediaGroups[a]){if(o===s)i.mediaGroups[a][n]={};else continue;for(const l in i.mediaGroups[a][o]){const u=i.mediaGroups[a][o][l];i.mediaGroups[a][n][l]=_extends({},u);const c=i.mediaGroups[a][n][l],d=this.createCloneURI_(u.resolvedUri,e);c.resolvedUri=d,c.uri=d,c.playlists=[],u.playlists.forEach((p,m)=>{const g=i.playlists[p.id],E=groupID(a,n,l),x=createPlaylistID(n,E);if(g&&!i.playlists[x]){const b=this.createClonePlaylist_(g,x,e),S=b.resolvedUri;i.playlists[x]=b,i.playlists[S]=b}c.playlists[m]=this.createClonePlaylist_(p,x,e)})}}})}createClonePlaylist_(e,n,s,i){const a=this.createCloneURI_(e.resolvedUri,s),o={resolvedUri:a,uri:a,id:n};return e.segments&&(o.segments=[]),i&&(o.attributes=i),merge(e,o)}createCloneURI_(e,n){const s=new URL(e);s.hostname=n["URI-REPLACEMENT"].HOST;const i=n["URI-REPLACEMENT"].PARAMS;for(const a of Object.keys(i))s.searchParams.set(a,i[a]);return s.href}createCloneAttributes_(e,n){const s={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{n[i]&&(s[i]=e)}),s}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const s in e.contentProtection){const i=e.contentProtection[s].attributes.keyId;i&&n.add(i.toLowerCase())}return n}}}const callbackWrapper=function(t,e,n,s){const i=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&i&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=i.byteLength||i.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(i||t.responseText)))),s(e,t)},callAllRequestHooks=(t,e)=>{if(!t||!t.size)return;let n=e;return t.forEach(s=>{n=s(n)}),n},callAllResponseHooks=(t,e,n,s)=>{!t||!t.size||t.forEach(i=>{i(e,n,s)})},xhrFactory=function(){const t=function e(n,s){n=merge({timeout:45e3},n);const i=e.beforeRequest||videojs.Vhs.xhr.beforeRequest,a=e._requestCallbackSet||videojs.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||videojs.Vhs.xhr._responseCallbackSet;i&&typeof i=="function"&&(videojs.log.warn("beforeRequest is deprecated, use onRequest instead."),a.add(i));const l=videojs.Vhs.xhr.original===!0?videojs.xhr:videojs.Vhs.xhr,u=callAllRequestHooks(a,n);a.delete(i);const c=l(u||n,function(p,m){return callAllResponseHooks(o,c,p,m),callbackWrapper(c,p,m,s)}),d=c.abort;return c.abort=function(){return c.aborted=!0,d.apply(c,arguments)},c.uri=n.uri,c.requestType=n.requestType,c.requestTime=Date.now(),c};return t.original=!0,t},byterangeStr=function(t){let e;const n=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=window$1.BigInt(t.offset)+window$1.BigInt(t.length)-window$1.BigInt(1):e=t.offset+t.length-1,"bytes="+n+"-"+e},segmentXhrHeaders=function(t){const e={};return t.byterange&&(e.Range=byterangeStr(t.byterange)),e},textRange=function(t,e){return t.start(e)+"-"+t.end(e)},formatHexString=function(t,e){const n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},formatAsciiString=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},createTransferableMessage=function(t){const e={};return Object.keys(t).forEach(n=>{const s=t[n];isArrayBufferView(s)?e[n]={bytes:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength}:e[n]=s}),e},initSegmentId=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},segmentKeyId=function(t){return t.resolvedUri},hexDump=t=>{const e=Array.prototype.slice.call(t),n=16;let s="",i,a;for(let o=0;o<e.length/n;o++)i=e.slice(o*n,o*n+n).map(formatHexString).join(""),a=e.slice(o*n,o*n+n).map(formatAsciiString).join(""),s+=i+" "+a+`
`;return s},tagDump=({bytes:t})=>hexDump(t),textRanges=t=>{let e="",n;for(n=0;n<t.length;n++)e+=textRange(t,n)+" ";return e};var utils=Object.freeze({__proto__:null,createTransferableMessage,initSegmentId,segmentKeyId,hexDump,tagDump,textRanges});const SEGMENT_END_FUDGE_PERCENT=.25,playerTimeToProgramTime=(t,e)=>{if(!e.dateTimeObject)return null;const n=e.videoTimingInfo.transmuxerPrependedSeconds,i=e.videoTimingInfo.transmuxedPresentationStart+n,a=t-i;return new Date(e.dateTimeObject.getTime()+a*1e3)},originalSegmentVideoDuration=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,findSegmentForProgramTime=(t,e)=>{let n;try{n=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let s=e.segments[0];if(n<new Date(s.dateTimeObject))return null;for(let u=0;u<e.segments.length-1;u++){s=e.segments[u];const c=new Date(e.segments[u+1].dateTimeObject);if(n<c)break}const i=e.segments[e.segments.length-1],a=i.dateTimeObject,o=i.videoTimingInfo?originalSegmentVideoDuration(i.videoTimingInfo):i.duration+i.duration*SEGMENT_END_FUDGE_PERCENT,l=new Date(a.getTime()+o*1e3);return n>l?null:(n>new Date(a)&&(s=i),{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(e,e.mediaSequence+e.segments.indexOf(s)),type:s.videoTimingInfo?"accurate":"estimate"})},findSegmentForPlayerTime=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let n=0,s;for(let a=0;a<e.segments.length&&(s=e.segments[a],n=s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationEnd:n+s.duration,!(t<=n));a++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+i.duration*SEGMENT_END_FUDGE_PERCENT)return null;s=i}return{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:n-s.duration,type:s.videoTimingInfo?"accurate":"estimate"}},getOffsetFromTimestamp=(t,e)=>{let n,s;try{n=new Date(t),s=new Date(e)}catch{}const i=n.getTime();return(s.getTime()-i)/1e3},verifyProgramDateTimeTags=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},getProgramTime=({playlist:t,time:e=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const s=findSegmentForPlayerTime(e,t);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});const i={mediaSeconds:e},a=playerTimeToProgramTime(e,s.segment);return a&&(i.programDateTime=a.toISOString()),n(null,i)},seekToProgramTime=({programTime:t,playlist:e,retryCount:n=2,seekTo:s,pauseAfterSeek:i=!0,tech:a,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!s)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!a.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!verifyProgramDateTimeTags(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const l=findSegmentForProgramTime(t,e);if(!l)return o({message:`${t} was not found in the stream`});const u=l.segment,c=getOffsetFromTimestamp(u.dateTimeObject,t);if(l.type==="estimate"){if(n===0)return o({message:`${t} is not buffered yet. Try again`});s(l.estimatedStart+c),a.one("seeked",()=>{seekToProgramTime({programTime:t,playlist:e,retryCount:n-1,seekTo:s,pauseAfterSeek:i,tech:a,callback:o})});return}const d=u.start+c,p=()=>o(null,a.currentTime());a.one("seeked",p),i&&a.pause(),s(d)},callbackOnCompleted=(t,e)=>{if(t.readyState===4)return e()},containerRequest=(t,e,n,s)=>{let i=[],a,o=!1;const l=function(p,m,g,E){return m.abort(),o=!0,n(p,m,g,E)},u=function(p,m){if(o)return;if(p)return p.metadata=getStreamingNetworkErrorMetadata({requestType:s,request:m,error:p}),l(p,m,"",i);const g=m.responseText.substring(i&&i.byteLength||0,m.responseText.length);if(i=concatTypedArrays(i,stringToBytes(g,!0)),a=a||getId3Offset(i),i.length<10||a&&i.length<a+2)return callbackOnCompleted(m,()=>l(p,m,"",i));const E=detectContainerForBytes(i);return E==="ts"&&i.length<188?callbackOnCompleted(m,()=>l(p,m,"",i)):!E&&i.length<376?callbackOnCompleted(m,()=>l(p,m,"",i)):l(null,m,E,i)},d=e({uri:t,beforeSend(p){p.overrideMimeType("text/plain; charset=x-user-defined"),p.addEventListener("progress",function({total:m,loaded:g}){return callbackWrapper(p,null,{statusCode:p.status},u)})}},function(p,m){return callbackWrapper(d,p,m,u)});return d},{EventTarget}=videojs,dashPlaylistUnchanged=function(t,e){if(!isPlaylistUnchanged(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let n=0;n<t.segments.length;n++){const s=t.segments[n],i=e.segments[n];if(s.uri!==i.uri)return!1;if(!s.byterange&&!i.byterange)continue;const a=s.byterange,o=i.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}return!0},dashGroupId=(t,e,n,s)=>{const i=s.attributes.NAME||n;return`placeholder-uri-${t}-${e}-${i}`},parseMainXml=({mainXml:t,srcUrl:e,clientOffset:n,sidxMapping:s,previousManifest:i})=>{const a=parse(t,{manifestUri:e,clientOffset:n,sidxMapping:s,previousManifest:i});return addPropertiesToMain(a,e,dashGroupId),a},removeOldMediaGroupLabels=(t,e)=>{forEachMediaGroup(t,(n,s,i,a)=>{(!e.mediaGroups[s][i]||!(a in e.mediaGroups[s][i]))&&delete t.mediaGroups[s][i][a]})},updateMain=(t,e,n)=>{let s=!0,i=merge(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let a=0;a<e.playlists.length;a++){const o=e.playlists[a];if(o.sidx){const u=generateSidxKey(o.sidx);n&&n[u]&&n[u].sidx&&addSidxSegmentsToPlaylist$1(o,n[u].sidx,o.sidx.resolvedUri)}const l=updateMain$1(i,o,dashPlaylistUnchanged);l&&(i=l,s=!1)}return forEachMediaGroup(e,(a,o,l,u)=>{if(a.playlists&&a.playlists.length){const c=a.playlists[0].id,d=updateMain$1(i,a.playlists[0],dashPlaylistUnchanged);d&&(i=d,u in i.mediaGroups[o][l]||(i.mediaGroups[o][l][u]=a),i.mediaGroups[o][l][u].playlists[0]=i.playlists[c],s=!1)}}),removeOldMediaGroupLabels(i,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(s=!1),s?null:i},equivalentSidx=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,compareSidxEntry=(t,e)=>{const n={};for(const s in t){const a=t[s].sidx;if(a){const o=generateSidxKey(a);if(!e[o])break;const l=e[o].sidxInfo;equivalentSidx(l,a)&&(n[o]=e[o])}}return n},filterChangedSidxMappings=(t,e)=>{let s=compareSidxEntry(t.playlists,e);return forEachMediaGroup(t,(i,a,o,l)=>{if(i.playlists&&i.playlists.length){const u=i.playlists;s=merge(s,compareSidxEntry(u,e))}}),s};class DashPlaylistLoader extends EventTarget{constructor(e,n,s={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:a=!1}=s;if(this.vhs_=n,this.withCredentials=a,this.addMetadataToTextTrack=s.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=logger("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:e.metadata},s&&(this.state=s),this.trigger("error"),!0}addSidxSegments_(e,n,s){const i=e.sidx&&generateSidxKey(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i]){this.mediaRequest_=window$1.setTimeout(()=>s(!1),0);return}const a=resolveManifestRedirect(e.sidx.resolvedUri),o=(u,c)=>{if(this.requestErrored_(u,c,n))return;const d=this.mainPlaylistLoader_.sidxMapping_,{requestType:p}=c;let m;try{m=parseSidx(toUint8(c.response).subarray(8))}catch(g){g.metadata=getStreamingNetworkErrorMetadata({requestType:p,request:c,parseFailure:!0}),this.requestErrored_(g,c,n);return}return d[i]={sidxInfo:e.sidx,sidx:m},addSidxSegmentsToPlaylist$1(e,m,e.sidx.resolvedUri),s(!0)},l="dash-sidx";this.request=containerRequest(a,this.vhs_.xhr,(u,c,d,p)=>{if(u)return o(u,c);if(!d||d!=="mp4"){const E=d||"unknown";return o({status:c.status,message:`Unsupported ${E} container type for sidx segment at URL: ${a}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},c)}const{offset:m,length:g}=e.sidx.byterange;if(p.length>=g+m)return o(u,{response:p.subarray(m,m+g),status:c.status,uri:c.uri});this.request=this.vhs_.xhr({uri:a,responseType:"arraybuffer",requestType:"dash-sidx",headers:segmentXhrHeaders({byterange:e.sidx.byterange})},o)},l)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window$1.clearTimeout(this.minimumUpdatePeriodTimeout_),window$1.clearTimeout(this.mediaRequest_),window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const s=!this.media_||e.id!==this.media_.id;if(s&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}s&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,i=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window$1.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const s=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=window$1.setTimeout(()=>this.load(),s);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=window$1.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(s,i)=>{if(s){const{requestType:o}=i;s.metadata=getStreamingNetworkErrorMetadata({requestType:o,request:i,error:s})}if(this.requestErrored_(s,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const a=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=resolveManifestRedirect(this.mainPlaylistLoader_.srcUrl,i),a){this.handleMain_(),this.syncClientServerClock_(()=>e(i,a));return}return e(i,a)})}syncClientServerClock_(e){const n=parseUTCTiming(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e();this.request=this.vhs_.xhr({uri:resolveUrl(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(s,i)=>{if(!this.request)return;if(s){const{requestType:o}=i;return this.error.metadata=getStreamingNetworkErrorMetadata({requestType:o,request:i,error:s}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let a;n.method==="HEAD"?!i.responseHeaders||!i.responseHeaders.date?a=this.mainLoaded_:a=Date.parse(i.responseHeaders.date):a=Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=a-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let s;try{s=parseMainXml({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(a){this.error=a,this.error.metadata={errorType:videojs.Error.StreamingDashManifestParserError,error:a},this.trigger("error")}e&&(s=updateMain(e,s,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||s&&s.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s),s){const{duration:a,endList:o}=s,l=[];s.playlists.forEach(c=>{l.push({id:c.id,bandwidth:c.attributes.BANDWIDTH,resolution:c.attributes.RESOLUTION,codecs:c.attributes.CODECS})});const u={duration:a,isLive:!o,renditions:l};n.parsedManifest=u,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!s}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(window$1.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=window$1.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,s=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,s=!this.media_||this.media_!==n[e];if(s?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=window$1.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},refreshDelay(this.media(),!!s)))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(s=>({cueTime:s.start,frames:[{data:s.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const s in e.contentProtection){const i=e.contentProtection[s].attributes["cenc:default_KID"];i&&n.add(i.replace(/-/g,"").toLowerCase())}return n}}}var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const stringToArrayBuffer=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer},browserWorkerPolyFill=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},createObjectURL=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}},factory=function(t){return function(){const e=createObjectURL(t),n=browserWorkerPolyFill(new Worker(e));n.objURL=e;const s=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),s.call(this)},n}},transform=function(t){return`var browserWorkerPolyFill = ${browserWorkerPolyFill.toString()};
browserWorkerPolyFill(self);
`+t},getWorkerString=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},workerCode$1=transform(getWorkerString(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var N={};this.on=function(k,V){N[k]||(N[k]=[]),N[k]=N[k].concat(V)},this.off=function(k,V){var U;return N[k]?(U=N[k].indexOf(V),N[k]=N[k].slice(),N[k].splice(U,1),U>-1):!1},this.trigger=function(k){var V,U,Y,te;if(V=N[k],!!V)if(arguments.length===2)for(Y=V.length,U=0;U<Y;++U)V[U].call(this,arguments[1]);else{for(te=[],U=arguments.length,U=1;U<arguments.length;++U)te.push(arguments[U]);for(Y=V.length,U=0;U<Y;++U)V[U].apply(this,te)}},this.dispose=function(){N={}}}};e.prototype.pipe=function(N){return this.on("data",function(k){N.push(k)}),this.on("done",function(k){N.flush(k)}),this.on("partialdone",function(k){N.partialFlush(k)}),this.on("endedtimeline",function(k){N.endTimeline(k)}),this.on("reset",function(k){N.reset(k)}),N},e.prototype.push=function(N){this.trigger("data",N)},e.prototype.flush=function(N){this.trigger("done",N)},e.prototype.partialFlush=function(N){this.trigger("partialdone",N)},e.prototype.endTimeline=function(N){this.trigger("endedtimeline",N)},e.prototype.reset=function(N){this.trigger("reset",N)};var n=e,s=Math.pow(2,32),i=function(N){var k=new DataView(N.buffer,N.byteOffset,N.byteLength),V;return k.getBigUint64?(V=k.getBigUint64(0),V<Number.MAX_SAFE_INTEGER?Number(V):V):k.getUint32(0)*s+k.getUint32(4)},a={getUint64:i,MAX_UINT32:s},o=a.MAX_UINT32,l,u,c,d,p,m,g,E,x,b,S,C,T,I,D,P,O,B,F,H,Q,Z,ne,re,se,G,K,M,W,ee,z,ae,ce,he,fe,Ce;(function(){var N;if(ne={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(N in ne)ne.hasOwnProperty(N)&&(ne[N]=[N.charCodeAt(0),N.charCodeAt(1),N.charCodeAt(2),N.charCodeAt(3)]);re=new Uint8Array([105,115,111,109]),G=new Uint8Array([97,118,99,49]),se=new Uint8Array([0,0,0,1]),K=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),W={video:K,audio:M},ae=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),z=new Uint8Array([0,0,0,0,0,0,0,0]),ce=new Uint8Array([0,0,0,0,0,0,0,0]),he=ce,fe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ce=ce,ee=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),l=function(N){var k=[],V=0,U,Y,te;for(U=1;U<arguments.length;U++)k.push(arguments[U]);for(U=k.length;U--;)V+=k[U].byteLength;for(Y=new Uint8Array(V+8),te=new DataView(Y.buffer,Y.byteOffset,Y.byteLength),te.setUint32(0,Y.byteLength),Y.set(N,4),U=0,V=8;U<k.length;U++)Y.set(k[U],V),V+=k[U].byteLength;return Y},u=function(){return l(ne.dinf,l(ne.dref,ae))},c=function(N){return l(ne.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,N.audioobjecttype<<3|N.samplingfrequencyindex>>>1,N.samplingfrequencyindex<<7|N.channelcount<<3,6,1,2]))},d=function(){return l(ne.ftyp,re,se,re,G)},P=function(N){return l(ne.hdlr,W[N])},p=function(N){return l(ne.mdat,N)},D=function(N){var k=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,N.duration>>>24&255,N.duration>>>16&255,N.duration>>>8&255,N.duration&255,85,196,0,0]);return N.samplerate&&(k[12]=N.samplerate>>>24&255,k[13]=N.samplerate>>>16&255,k[14]=N.samplerate>>>8&255,k[15]=N.samplerate&255),l(ne.mdhd,k)},I=function(N){return l(ne.mdia,D(N),P(N.type),g(N))},m=function(N){return l(ne.mfhd,new Uint8Array([0,0,0,0,(N&4278190080)>>24,(N&16711680)>>16,(N&65280)>>8,N&255]))},g=function(N){return l(ne.minf,N.type==="video"?l(ne.vmhd,ee):l(ne.smhd,z),u(),B(N))},E=function(N,k){for(var V=[],U=k.length;U--;)V[U]=H(k[U]);return l.apply(null,[ne.moof,m(N)].concat(V))},x=function(N){for(var k=N.length,V=[];k--;)V[k]=C(N[k]);return l.apply(null,[ne.moov,S(4294967295)].concat(V).concat(b(N)))},b=function(N){for(var k=N.length,V=[];k--;)V[k]=Q(N[k]);return l.apply(null,[ne.mvex].concat(V))},S=function(N){var k=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(N&4278190080)>>24,(N&16711680)>>16,(N&65280)>>8,N&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(ne.mvhd,k)},O=function(N){var k=N.samples||[],V=new Uint8Array(4+k.length),U,Y;for(Y=0;Y<k.length;Y++)U=k[Y].flags,V[Y+4]=U.dependsOn<<4|U.isDependedOn<<2|U.hasRedundancy;return l(ne.sdtp,V)},B=function(N){return l(ne.stbl,F(N),l(ne.stts,Ce),l(ne.stsc,he),l(ne.stsz,fe),l(ne.stco,ce))},function(){var N,k;F=function(V){return l(ne.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),V.type==="video"?N(V):k(V))},N=function(V){var U=V.sps||[],Y=V.pps||[],te=[],pe=[],me,ge;for(me=0;me<U.length;me++)te.push((U[me].byteLength&65280)>>>8),te.push(U[me].byteLength&255),te=te.concat(Array.prototype.slice.call(U[me]));for(me=0;me<Y.length;me++)pe.push((Y[me].byteLength&65280)>>>8),pe.push(Y[me].byteLength&255),pe=pe.concat(Array.prototype.slice.call(Y[me]));if(ge=[ne.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(V.width&65280)>>8,V.width&255,(V.height&65280)>>8,V.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(ne.avcC,new Uint8Array([1,V.profileIdc,V.profileCompatibility,V.levelIdc,255].concat([U.length],te,[Y.length],pe))),l(ne.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],V.sarRatio){var ye=V.sarRatio[0],Se=V.sarRatio[1];ge.push(l(ne.pasp,new Uint8Array([(ye&4278190080)>>24,(ye&16711680)>>16,(ye&65280)>>8,ye&255,(Se&4278190080)>>24,(Se&16711680)>>16,(Se&65280)>>8,Se&255])))}return l.apply(null,ge)},k=function(V){return l(ne.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(V.channelcount&65280)>>8,V.channelcount&255,(V.samplesize&65280)>>8,V.samplesize&255,0,0,0,0,(V.samplerate&65280)>>8,V.samplerate&255,0,0]),c(V))}}(),T=function(N){var k=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(N.id&4278190080)>>24,(N.id&16711680)>>16,(N.id&65280)>>8,N.id&255,0,0,0,0,(N.duration&4278190080)>>24,(N.duration&16711680)>>16,(N.duration&65280)>>8,N.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(N.width&65280)>>8,N.width&255,0,0,(N.height&65280)>>8,N.height&255,0,0]);return l(ne.tkhd,k)},H=function(N){var k,V,U,Y,te,pe,me;return k=l(ne.tfhd,new Uint8Array([0,0,0,58,(N.id&4278190080)>>24,(N.id&16711680)>>16,(N.id&65280)>>8,N.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),pe=Math.floor(N.baseMediaDecodeTime/o),me=Math.floor(N.baseMediaDecodeTime%o),V=l(ne.tfdt,new Uint8Array([1,0,0,0,pe>>>24&255,pe>>>16&255,pe>>>8&255,pe&255,me>>>24&255,me>>>16&255,me>>>8&255,me&255])),te=92,N.type==="audio"?(U=Z(N,te),l(ne.traf,k,V,U)):(Y=O(N),U=Z(N,Y.length+te),l(ne.traf,k,V,U,Y))},C=function(N){return N.duration=N.duration||4294967295,l(ne.trak,T(N),I(N))},Q=function(N){var k=new Uint8Array([0,0,0,0,(N.id&4278190080)>>24,(N.id&16711680)>>16,(N.id&65280)>>8,N.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return N.type!=="video"&&(k[k.length-1]=0),l(ne.trex,k)},function(){var N,k,V;V=function(U,Y){var te=0,pe=0,me=0,ge=0;return U.length&&(U[0].duration!==void 0&&(te=1),U[0].size!==void 0&&(pe=2),U[0].flags!==void 0&&(me=4),U[0].compositionTimeOffset!==void 0&&(ge=8)),[0,0,te|pe|me|ge,1,(U.length&4278190080)>>>24,(U.length&16711680)>>>16,(U.length&65280)>>>8,U.length&255,(Y&4278190080)>>>24,(Y&16711680)>>>16,(Y&65280)>>>8,Y&255]},k=function(U,Y){var te,pe,me,ge,ye,Se;for(ge=U.samples||[],Y+=20+16*ge.length,me=V(ge,Y),pe=new Uint8Array(me.length+ge.length*16),pe.set(me),te=me.length,Se=0;Se<ge.length;Se++)ye=ge[Se],pe[te++]=(ye.duration&4278190080)>>>24,pe[te++]=(ye.duration&16711680)>>>16,pe[te++]=(ye.duration&65280)>>>8,pe[te++]=ye.duration&255,pe[te++]=(ye.size&4278190080)>>>24,pe[te++]=(ye.size&16711680)>>>16,pe[te++]=(ye.size&65280)>>>8,pe[te++]=ye.size&255,pe[te++]=ye.flags.isLeading<<2|ye.flags.dependsOn,pe[te++]=ye.flags.isDependedOn<<6|ye.flags.hasRedundancy<<4|ye.flags.paddingValue<<1|ye.flags.isNonSyncSample,pe[te++]=ye.flags.degradationPriority&61440,pe[te++]=ye.flags.degradationPriority&15,pe[te++]=(ye.compositionTimeOffset&4278190080)>>>24,pe[te++]=(ye.compositionTimeOffset&16711680)>>>16,pe[te++]=(ye.compositionTimeOffset&65280)>>>8,pe[te++]=ye.compositionTimeOffset&255;return l(ne.trun,pe)},N=function(U,Y){var te,pe,me,ge,ye,Se;for(ge=U.samples||[],Y+=20+8*ge.length,me=V(ge,Y),te=new Uint8Array(me.length+ge.length*8),te.set(me),pe=me.length,Se=0;Se<ge.length;Se++)ye=ge[Se],te[pe++]=(ye.duration&4278190080)>>>24,te[pe++]=(ye.duration&16711680)>>>16,te[pe++]=(ye.duration&65280)>>>8,te[pe++]=ye.duration&255,te[pe++]=(ye.size&4278190080)>>>24,te[pe++]=(ye.size&16711680)>>>16,te[pe++]=(ye.size&65280)>>>8,te[pe++]=ye.size&255;return l(ne.trun,te)},Z=function(U,Y){return U.type==="audio"?N(U,Y):k(U,Y)}}();var Me={ftyp:d,mdat:p,moof:E,moov:x,initSegment:function(N){var k=d(),V=x(N),U;return U=new Uint8Array(k.byteLength+V.byteLength),U.set(k),U.set(V,k.byteLength),U}},Ye=function(N){var k,V,U=[],Y=[];for(Y.byteLength=0,Y.nalCount=0,Y.duration=0,U.byteLength=0,k=0;k<N.length;k++)V=N[k],V.nalUnitType==="access_unit_delimiter_rbsp"?(U.length&&(U.duration=V.dts-U.dts,Y.byteLength+=U.byteLength,Y.nalCount+=U.length,Y.duration+=U.duration,Y.push(U)),U=[V],U.byteLength=V.data.byteLength,U.pts=V.pts,U.dts=V.dts):(V.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(U.keyFrame=!0),U.duration=V.dts-U.dts,U.byteLength+=V.data.byteLength,U.push(V));return Y.length&&(!U.duration||U.duration<=0)&&(U.duration=Y[Y.length-1].duration),Y.byteLength+=U.byteLength,Y.nalCount+=U.length,Y.duration+=U.duration,Y.push(U),Y},We=function(N){var k,V,U=[],Y=[];for(U.byteLength=0,U.nalCount=0,U.duration=0,U.pts=N[0].pts,U.dts=N[0].dts,Y.byteLength=0,Y.nalCount=0,Y.duration=0,Y.pts=N[0].pts,Y.dts=N[0].dts,k=0;k<N.length;k++)V=N[k],V.keyFrame?(U.length&&(Y.push(U),Y.byteLength+=U.byteLength,Y.nalCount+=U.nalCount,Y.duration+=U.duration),U=[V],U.nalCount=V.length,U.byteLength=V.byteLength,U.pts=V.pts,U.dts=V.dts,U.duration=V.duration):(U.duration+=V.duration,U.nalCount+=V.length,U.byteLength+=V.byteLength,U.push(V));return Y.length&&U.duration<=0&&(U.duration=Y[Y.length-1].duration),Y.byteLength+=U.byteLength,Y.nalCount+=U.nalCount,Y.duration+=U.duration,Y.push(U),Y},Be=function(N){var k;return!N[0][0].keyFrame&&N.length>1&&(k=N.shift(),N.byteLength-=k.byteLength,N.nalCount-=k.nalCount,N[0][0].dts=k.dts,N[0][0].pts=k.pts,N[0][0].duration+=k.duration),N},rt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},tt=function(N,k){var V=rt();return V.dataOffset=k,V.compositionTimeOffset=N.pts-N.dts,V.duration=N.duration,V.size=4*N.length,V.size+=N.byteLength,N.keyFrame&&(V.flags.dependsOn=2,V.flags.isNonSyncSample=0),V},Ue=function(N,k){var V,U,Y,te,pe,me=k||0,ge=[];for(V=0;V<N.length;V++)for(te=N[V],U=0;U<te.length;U++)pe=te[U],Y=tt(pe,me),me+=Y.size,ge.push(Y);return ge},Pe=function(N){var k,V,U,Y,te,pe,me=0,ge=N.byteLength,ye=N.nalCount,Se=ge+4*ye,Le=new Uint8Array(Se),vt=new DataView(Le.buffer);for(k=0;k<N.length;k++)for(Y=N[k],V=0;V<Y.length;V++)for(te=Y[V],U=0;U<te.length;U++)pe=te[U],vt.setUint32(me,pe.data.byteLength),me+=4,Le.set(pe.data,me),me+=pe.data.byteLength;return Le},Qe=function(N,k){var V,U=k||0,Y=[];return V=tt(N,U),Y.push(V),Y},Je=function(N){var k,V,U=0,Y=N.byteLength,te=N.length,pe=Y+4*te,me=new Uint8Array(pe),ge=new DataView(me.buffer);for(k=0;k<N.length;k++)V=N[k],ge.setUint32(U,V.data.byteLength),U+=4,me.set(V.data,U),U+=V.data.byteLength;return me},nt={groupNalsIntoFrames:Ye,groupFramesIntoGops:We,extendFirstKeyFrame:Be,generateSampleTable:Ue,concatenateNalData:Pe,generateSampleTableForFrame:Qe,concatenateNalDataForFrame:Je},ft=[33,16,5,32,164,27],At=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ot=function(N){for(var k=[];N--;)k.push(0);return k},qe=function(N){return Object.keys(N).reduce(function(k,V){return k[V]=new Uint8Array(N[V].reduce(function(U,Y){return U.concat(Y)},[])),k},{})},mt,st=function(){if(!mt){var N={96e3:[ft,[227,64],ot(154),[56]],88200:[ft,[231],ot(170),[56]],64e3:[ft,[248,192],ot(240),[56]],48e3:[ft,[255,192],ot(268),[55,148,128],ot(54),[112]],44100:[ft,[255,192],ot(268),[55,163,128],ot(84),[112]],32e3:[ft,[255,192],ot(268),[55,234],ot(226),[112]],24e3:[ft,[255,192],ot(268),[55,255,128],ot(268),[111,112],ot(126),[224]],16e3:[ft,[255,192],ot(268),[55,255,128],ot(268),[111,255],ot(269),[223,108],ot(195),[1,192]],12e3:[At,ot(268),[3,127,248],ot(268),[6,255,240],ot(268),[13,255,224],ot(268),[27,253,128],ot(259),[56]],11025:[At,ot(268),[3,127,248],ot(268),[6,255,240],ot(268),[13,255,224],ot(268),[27,255,192],ot(268),[55,175,128],ot(108),[112]],8e3:[At,ot(268),[3,121,16],ot(47),[7]]};mt=qe(N)}return mt},St=9e4,bt,Mt,pt,rr,Ft,Qt,nr;bt=function(N){return N*St},Mt=function(N,k){return N*k},pt=function(N){return N/St},rr=function(N,k){return N/k},Ft=function(N,k){return bt(rr(N,k))},Qt=function(N,k){return Mt(pt(N),k)},nr=function(N,k,V){return pt(V?N:N-k)};var Ht={ONE_SECOND_IN_TS:St,secondsToVideoTs:bt,secondsToAudioTs:Mt,videoTsToSeconds:pt,audioTsToSeconds:rr,audioTsToVideoTs:Ft,videoTsToAudioTs:Qt,metadataTsToSeconds:nr},Ar=st,Ir=Ht,Qr=function(N){var k,V,U=0;for(k=0;k<N.length;k++)V=N[k],U+=V.data.byteLength;return U},ke=function(N,k,V,U){var Y,te=0,pe=0,me=0,ge=0,ye,Se,Le;if(k.length&&(Y=Ir.audioTsToVideoTs(N.baseMediaDecodeTime,N.samplerate),te=Math.ceil(Ir.ONE_SECOND_IN_TS/(N.samplerate/1024)),V&&U&&(pe=Y-Math.max(V,U),me=Math.floor(pe/te),ge=me*te),!(me<1||ge>Ir.ONE_SECOND_IN_TS/2))){for(ye=Ar()[N.samplerate],ye||(ye=k[0].data),Se=0;Se<me;Se++)Le=k[0],k.splice(0,0,{data:ye,dts:Le.dts-te,pts:Le.pts-te});return N.baseMediaDecodeTime-=Math.floor(Ir.videoTsToAudioTs(ge,N.samplerate)),ge}},Oe=function(N,k,V){return k.minSegmentDts>=V?N:(k.minSegmentDts=1/0,N.filter(function(U){return U.dts>=V?(k.minSegmentDts=Math.min(k.minSegmentDts,U.dts),k.minSegmentPts=k.minSegmentDts,!0):!1}))},Yt=function(N){var k,V,U=[];for(k=0;k<N.length;k++)V=N[k],U.push({size:V.data.byteLength,duration:1024});return U},Xt=function(N){var k,V,U=0,Y=new Uint8Array(Qr(N));for(k=0;k<N.length;k++)V=N[k],Y.set(V.data,U),U+=V.data.byteLength;return Y},ir={prefixWithSilence:ke,trimAdtsFramesByEarliestDts:Oe,generateSampleTable:Yt,concatenateFrameData:Xt},ie=Ht.ONE_SECOND_IN_TS,ue=function(N,k){typeof k.pts=="number"&&(N.timelineStartInfo.pts===void 0&&(N.timelineStartInfo.pts=k.pts),N.minSegmentPts===void 0?N.minSegmentPts=k.pts:N.minSegmentPts=Math.min(N.minSegmentPts,k.pts),N.maxSegmentPts===void 0?N.maxSegmentPts=k.pts:N.maxSegmentPts=Math.max(N.maxSegmentPts,k.pts)),typeof k.dts=="number"&&(N.timelineStartInfo.dts===void 0&&(N.timelineStartInfo.dts=k.dts),N.minSegmentDts===void 0?N.minSegmentDts=k.dts:N.minSegmentDts=Math.min(N.minSegmentDts,k.dts),N.maxSegmentDts===void 0?N.maxSegmentDts=k.dts:N.maxSegmentDts=Math.max(N.maxSegmentDts,k.dts))},ve=function(N){delete N.minSegmentDts,delete N.maxSegmentDts,delete N.minSegmentPts,delete N.maxSegmentPts},Ie=function(N,k){var V,U,Y=N.minSegmentDts;return k||(Y-=N.timelineStartInfo.dts),V=N.timelineStartInfo.baseMediaDecodeTime,V+=Y,V=Math.max(0,V),N.type==="audio"&&(U=N.samplerate/ie,V*=U,V=Math.floor(V)),V},Ze={clearDtsInfo:ve,calculateTrackBaseMediaDecodeTime:Ie,collectDtsInfo:ue},wt=4,Gt=128,sr=function(N){for(var k=0,V={payloadType:-1,payloadSize:0},U=0,Y=0;k<N.byteLength&&N[k]!==Gt;){for(;N[k]===255;)U+=255,k++;for(U+=N[k++];N[k]===255;)Y+=255,k++;if(Y+=N[k++],!V.payload&&U===wt){var te=String.fromCharCode(N[k+3],N[k+4],N[k+5],N[k+6]);if(te==="GA94"){V.payloadType=U,V.payloadSize=Y,V.payload=N.subarray(k,k+Y);break}else V.payload=void 0}k+=Y,U=0,Y=0}return V},Ee=function(N){return N.payload[0]!==181||(N.payload[1]<<8|N.payload[2])!==49||String.fromCharCode(N.payload[3],N.payload[4],N.payload[5],N.payload[6])!=="GA94"||N.payload[7]!==3?null:N.payload.subarray(8,N.payload.length-1)},we=function(N,k){var V=[],U,Y,te,pe;if(!(k[0]&64))return V;for(Y=k[0]&31,U=0;U<Y;U++)te=U*3,pe={type:k[te+2]&3,pts:N},k[te+2]&4&&(pe.ccData=k[te+3]<<8|k[te+4],V.push(pe));return V},Ne=function(N){for(var k=N.byteLength,V=[],U=1,Y,te;U<k-2;)N[U]===0&&N[U+1]===0&&N[U+2]===3?(V.push(U+2),U+=2):U++;if(V.length===0)return N;Y=k-V.length,te=new Uint8Array(Y);var pe=0;for(U=0;U<Y;pe++,U++)pe===V[0]&&(pe++,V.shift()),te[U]=N[pe];return te},ze={parseSei:sr,parseUserData:Ee,parseCaptionPackets:we,discardEmulationPreventionBytes:Ne,USER_DATA_REGISTERED_ITU_T_T35:wt},it=n,xt=ze,lt=function(N){N=N||{},lt.prototype.init.call(this),this.parse708captions_=typeof N.parse708captions=="boolean"?N.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new He(0,0),new He(0,1),new He(1,0),new He(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ct({captionServices:N.captionServices})),this.reset(),this.ccStreams_.forEach(function(k){k.on("data",this.trigger.bind(this,"data")),k.on("partialdone",this.trigger.bind(this,"partialdone")),k.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};lt.prototype=new it,lt.prototype.push=function(N){var k,V,U;if(N.nalUnitType==="sei_rbsp"&&(k=xt.parseSei(N.escapedRBSP),!!k.payload&&k.payloadType===xt.USER_DATA_REGISTERED_ITU_T_T35&&(V=xt.parseUserData(k),!!V))){if(N.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(N.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}U=xt.parseCaptionPackets(N.pts,V),this.captionPackets_=this.captionPackets_.concat(U),this.latestDts_!==N.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=N.dts}},lt.prototype.flushCCStreams=function(N){this.ccStreams_.forEach(function(k){return N==="flush"?k.flush():k.partialFlush()},this)},lt.prototype.flushStream=function(N){if(!this.captionPackets_.length){this.flushCCStreams(N);return}this.captionPackets_.forEach(function(k,V){k.presortIndex=V}),this.captionPackets_.sort(function(k,V){return k.pts===V.pts?k.presortIndex-V.presortIndex:k.pts-V.pts}),this.captionPackets_.forEach(function(k){k.type<2?this.dispatchCea608Packet(k):this.dispatchCea708Packet(k)},this),this.captionPackets_.length=0,this.flushCCStreams(N)},lt.prototype.flush=function(){return this.flushStream("flush")},lt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},lt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(N){N.reset()})},lt.prototype.dispatchCea608Packet=function(N){this.setsTextOrXDSActive(N)?this.activeCea608Channel_[N.type]=null:this.setsChannel1Active(N)?this.activeCea608Channel_[N.type]=0:this.setsChannel2Active(N)&&(this.activeCea608Channel_[N.type]=1),this.activeCea608Channel_[N.type]!==null&&this.ccStreams_[(N.type<<1)+this.activeCea608Channel_[N.type]].push(N)},lt.prototype.setsChannel1Active=function(N){return(N.ccData&30720)===4096},lt.prototype.setsChannel2Active=function(N){return(N.ccData&30720)===6144},lt.prototype.setsTextOrXDSActive=function(N){return(N.ccData&28928)===256||(N.ccData&30974)===4138||(N.ccData&30974)===6186},lt.prototype.dispatchCea708Packet=function(N){this.parse708captions_&&this.cc708Stream_.push(N)};var Et={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},It=function(N){var k=Et[N]||N;return N&4096&&N===k?"":String.fromCharCode(k)},Tt=function(N){return 32<=N&&N<=127||160<=N&&N<=255},Rt=function(N){this.windowNum=N,this.reset()};Rt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Rt.prototype.getText=function(){return this.rows.join(`
`)},Rt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Rt.prototype.newLine=function(N){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(N),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Rt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Rt.prototype.addText=function(N){this.rows[this.rowIdx]+=N},Rt.prototype.backspace=function(){if(!this.isEmpty()){var N=this.rows[this.rowIdx];this.rows[this.rowIdx]=N.substr(0,N.length-1)}};var Dt=function(N,k,V){this.serviceNum=N,this.text="",this.currentWindow=new Rt(-1),this.windows=[],this.stream=V,typeof k=="string"&&this.createTextDecoder(k)};Dt.prototype.init=function(N,k){this.startPts=N;for(var V=0;V<8;V++)this.windows[V]=new Rt(V),typeof k=="function"&&(this.windows[V].beforeRowOverflow=k)},Dt.prototype.setCurrentWindow=function(N){this.currentWindow=this.windows[N]},Dt.prototype.createTextDecoder=function(N){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(N)}catch(k){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+N+" encoding. "+k})}};var Ct=function(N){N=N||{},Ct.prototype.init.call(this);var k=this,V=N.captionServices||{},U={},Y;Object.keys(V).forEach(te=>{Y=V[te],/^SERVICE/.test(te)&&(U[te]=Y.encoding)}),this.serviceEncodings=U,this.current708Packet=null,this.services={},this.push=function(te){te.type===3?(k.new708Packet(),k.add708Bytes(te)):(k.current708Packet===null&&k.new708Packet(),k.add708Bytes(te))}};Ct.prototype=new it,Ct.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ct.prototype.add708Bytes=function(N){var k=N.ccData,V=k>>>8,U=k&255;this.current708Packet.ptsVals.push(N.pts),this.current708Packet.data.push(V),this.current708Packet.data.push(U)},Ct.prototype.push708Packet=function(){var N=this.current708Packet,k=N.data,V=null,U=null,Y=0,te=k[Y++];for(N.seq=te>>6,N.sizeCode=te&63;Y<k.length;Y++)te=k[Y++],V=te>>5,U=te&31,V===7&&U>0&&(te=k[Y++],V=te),this.pushServiceBlock(V,Y,U),U>0&&(Y+=U-1)},Ct.prototype.pushServiceBlock=function(N,k,V){var U,Y=k,te=this.current708Packet.data,pe=this.services[N];for(pe||(pe=this.initService(N,Y));Y<k+V&&Y<te.length;Y++)U=te[Y],Tt(U)?Y=this.handleText(Y,pe):U===24?Y=this.multiByteCharacter(Y,pe):U===16?Y=this.extendedCommands(Y,pe):128<=U&&U<=135?Y=this.setCurrentWindow(Y,pe):152<=U&&U<=159?Y=this.defineWindow(Y,pe):U===136?Y=this.clearWindows(Y,pe):U===140?Y=this.deleteWindows(Y,pe):U===137?Y=this.displayWindows(Y,pe):U===138?Y=this.hideWindows(Y,pe):U===139?Y=this.toggleWindows(Y,pe):U===151?Y=this.setWindowAttributes(Y,pe):U===144?Y=this.setPenAttributes(Y,pe):U===145?Y=this.setPenColor(Y,pe):U===146?Y=this.setPenLocation(Y,pe):U===143?pe=this.reset(Y,pe):U===8?pe.currentWindow.backspace():U===12?pe.currentWindow.clearText():U===13?pe.currentWindow.pendingNewLine=!0:U===14?pe.currentWindow.clearText():U===141&&Y++},Ct.prototype.extendedCommands=function(N,k){var V=this.current708Packet.data,U=V[++N];return Tt(U)&&(N=this.handleText(N,k,{isExtended:!0})),N},Ct.prototype.getPts=function(N){return this.current708Packet.ptsVals[Math.floor(N/2)]},Ct.prototype.initService=function(N,k){var U="SERVICE"+N,V=this,U,Y;return U in this.serviceEncodings&&(Y=this.serviceEncodings[U]),this.services[N]=new Dt(N,Y,V),this.services[N].init(this.getPts(k),function(te){V.flushDisplayed(te,V.services[N])}),this.services[N]},Ct.prototype.handleText=function(N,k,V){var U=V&&V.isExtended,Y=V&&V.isMultiByte,te=this.current708Packet.data,pe=U?4096:0,me=te[N],ge=te[N+1],ye=k.currentWindow,Se,Le;function vt(Ge){return Ge.map(Ot=>("0"+(Ot&255).toString(16)).slice(-2)).join("")}if(Y?(Le=[me,ge],N++):Le=[me],k.textDecoder_&&!U)Se=k.textDecoder_.decode(new Uint8Array(Le));else if(Y){const Ge=vt(Le);Se=String.fromCharCode(parseInt(Ge,16))}else Se=It(pe|me);return ye.pendingNewLine&&!ye.isEmpty()&&ye.newLine(this.getPts(N)),ye.pendingNewLine=!1,ye.addText(Se),N},Ct.prototype.multiByteCharacter=function(N,k){var V=this.current708Packet.data,U=V[N+1],Y=V[N+2];return Tt(U)&&Tt(Y)&&(N=this.handleText(++N,k,{isMultiByte:!0})),N},Ct.prototype.setCurrentWindow=function(N,k){var V=this.current708Packet.data,U=V[N],Y=U&7;return k.setCurrentWindow(Y),N},Ct.prototype.defineWindow=function(N,k){var V=this.current708Packet.data,U=V[N],Y=U&7;k.setCurrentWindow(Y);var te=k.currentWindow;return U=V[++N],te.visible=(U&32)>>5,te.rowLock=(U&16)>>4,te.columnLock=(U&8)>>3,te.priority=U&7,U=V[++N],te.relativePositioning=(U&128)>>7,te.anchorVertical=U&127,U=V[++N],te.anchorHorizontal=U,U=V[++N],te.anchorPoint=(U&240)>>4,te.rowCount=U&15,U=V[++N],te.columnCount=U&63,U=V[++N],te.windowStyle=(U&56)>>3,te.penStyle=U&7,te.virtualRowCount=te.rowCount+1,N},Ct.prototype.setWindowAttributes=function(N,k){var V=this.current708Packet.data,U=V[N],Y=k.currentWindow.winAttr;return U=V[++N],Y.fillOpacity=(U&192)>>6,Y.fillRed=(U&48)>>4,Y.fillGreen=(U&12)>>2,Y.fillBlue=U&3,U=V[++N],Y.borderType=(U&192)>>6,Y.borderRed=(U&48)>>4,Y.borderGreen=(U&12)>>2,Y.borderBlue=U&3,U=V[++N],Y.borderType+=(U&128)>>5,Y.wordWrap=(U&64)>>6,Y.printDirection=(U&48)>>4,Y.scrollDirection=(U&12)>>2,Y.justify=U&3,U=V[++N],Y.effectSpeed=(U&240)>>4,Y.effectDirection=(U&12)>>2,Y.displayEffect=U&3,N},Ct.prototype.flushDisplayed=function(N,k){for(var V=[],U=0;U<8;U++)k.windows[U].visible&&!k.windows[U].isEmpty()&&V.push(k.windows[U].getText());k.endPts=N,k.text=V.join(`

`),this.pushCaption(k),k.startPts=N},Ct.prototype.pushCaption=function(N){N.text!==""&&(this.trigger("data",{startPts:N.startPts,endPts:N.endPts,text:N.text,stream:"cc708_"+N.serviceNum}),N.text="",N.startPts=N.endPts)},Ct.prototype.displayWindows=function(N,k){var V=this.current708Packet.data,U=V[++N],Y=this.getPts(N);this.flushDisplayed(Y,k);for(var te=0;te<8;te++)U&1<<te&&(k.windows[te].visible=1);return N},Ct.prototype.hideWindows=function(N,k){var V=this.current708Packet.data,U=V[++N],Y=this.getPts(N);this.flushDisplayed(Y,k);for(var te=0;te<8;te++)U&1<<te&&(k.windows[te].visible=0);return N},Ct.prototype.toggleWindows=function(N,k){var V=this.current708Packet.data,U=V[++N],Y=this.getPts(N);this.flushDisplayed(Y,k);for(var te=0;te<8;te++)U&1<<te&&(k.windows[te].visible^=1);return N},Ct.prototype.clearWindows=function(N,k){var V=this.current708Packet.data,U=V[++N],Y=this.getPts(N);this.flushDisplayed(Y,k);for(var te=0;te<8;te++)U&1<<te&&k.windows[te].clearText();return N},Ct.prototype.deleteWindows=function(N,k){var V=this.current708Packet.data,U=V[++N],Y=this.getPts(N);this.flushDisplayed(Y,k);for(var te=0;te<8;te++)U&1<<te&&k.windows[te].reset();return N},Ct.prototype.setPenAttributes=function(N,k){var V=this.current708Packet.data,U=V[N],Y=k.currentWindow.penAttr;return U=V[++N],Y.textTag=(U&240)>>4,Y.offset=(U&12)>>2,Y.penSize=U&3,U=V[++N],Y.italics=(U&128)>>7,Y.underline=(U&64)>>6,Y.edgeType=(U&56)>>3,Y.fontStyle=U&7,N},Ct.prototype.setPenColor=function(N,k){var V=this.current708Packet.data,U=V[N],Y=k.currentWindow.penColor;return U=V[++N],Y.fgOpacity=(U&192)>>6,Y.fgRed=(U&48)>>4,Y.fgGreen=(U&12)>>2,Y.fgBlue=U&3,U=V[++N],Y.bgOpacity=(U&192)>>6,Y.bgRed=(U&48)>>4,Y.bgGreen=(U&12)>>2,Y.bgBlue=U&3,U=V[++N],Y.edgeRed=(U&48)>>4,Y.edgeGreen=(U&12)>>2,Y.edgeBlue=U&3,N},Ct.prototype.setPenLocation=function(N,k){var V=this.current708Packet.data,U=V[N],Y=k.currentWindow.penLoc;return k.currentWindow.pendingNewLine=!0,U=V[++N],Y.row=U&15,U=V[++N],Y.column=U&63,N},Ct.prototype.reset=function(N,k){var V=this.getPts(N);return this.flushDisplayed(V,k),this.initService(k.serviceNum,N)};var or={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},_r=function(N){return N===null?"":(N=or[N]||N,String.fromCharCode(N))},Dr=14,hr=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ar=function(){for(var N=[],k=Dr+1;k--;)N.push({text:"",indent:0,offset:0});return N},He=function(N,k){He.prototype.init.call(this),this.field_=N||0,this.dataChannel_=k||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(V){var U,Y,te,pe,me;if(U=V.ccData&32639,U===this.lastControlCode_){this.lastControlCode_=null;return}if((U&61440)===4096?this.lastControlCode_=U:U!==this.PADDING_&&(this.lastControlCode_=null),te=U>>>8,pe=U&255,U!==this.PADDING_)if(U===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(U===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(V.pts),this.flushDisplayed(V.pts),Y=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=Y,this.startPts_=V.pts;else if(U===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(V.pts);else if(U===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(V.pts);else if(U===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(V.pts);else if(U===this.CARRIAGE_RETURN_)this.clearFormatting(V.pts),this.flushDisplayed(V.pts),this.shiftRowsUp_(),this.startPts_=V.pts;else if(U===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(U===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(V.pts),this.displayed_=ar();else if(U===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ar();else if(U===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(V.pts),this.displayed_=ar()),this.mode_="paintOn",this.startPts_=V.pts;else if(this.isSpecialCharacter(te,pe))te=(te&3)<<8,me=_r(te|pe),this[this.mode_](V.pts,me),this.column_++;else if(this.isExtCharacter(te,pe))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),te=(te&3)<<8,me=_r(te|pe),this[this.mode_](V.pts,me),this.column_++;else if(this.isMidRowCode(te,pe))this.clearFormatting(V.pts),this[this.mode_](V.pts," "),this.column_++,(pe&14)===14&&this.addFormatting(V.pts,["i"]),(pe&1)===1&&this.addFormatting(V.pts,["u"]);else if(this.isOffsetControlCode(te,pe)){const ye=pe&3;this.nonDisplayed_[this.row_].offset=ye,this.column_+=ye}else if(this.isPAC(te,pe)){var ge=hr.indexOf(U&7968);if(this.mode_==="rollUp"&&(ge-this.rollUpRows_+1<0&&(ge=this.rollUpRows_-1),this.setRollUp(V.pts,ge)),ge!==this.row_&&ge>=0&&ge<=14&&(this.clearFormatting(V.pts),this.row_=ge),pe&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(V.pts,["u"]),(U&16)===16){const ye=(U&14)>>1;this.column_=ye*4,this.nonDisplayed_[this.row_].indent+=ye}this.isColorPAC(pe)&&(pe&14)===14&&this.addFormatting(V.pts,["i"])}else this.isNormalChar(te)&&(pe===0&&(pe=null),me=_r(te),me+=_r(pe),this[this.mode_](V.pts,me),this.column_+=me.length)}};He.prototype=new it,He.prototype.flushDisplayed=function(N){const k=U=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+U+"."})},V=[];this.displayed_.forEach((U,Y)=>{if(U&&U.text&&U.text.length){try{U.text=U.text.trim()}catch{k(Y)}U.text.length&&V.push({text:U.text,line:Y+1,position:10+Math.min(70,U.indent*10)+U.offset*2.5})}else U==null&&k(Y)}),V.length&&this.trigger("data",{startPts:this.startPts_,endPts:N,content:V,stream:this.name_})},He.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ar(),this.nonDisplayed_=ar(),this.lastControlCode_=null,this.column_=0,this.row_=Dr,this.rollUpRows_=2,this.formatting_=[]},He.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},He.prototype.isSpecialCharacter=function(N,k){return N===this.EXT_&&k>=48&&k<=63},He.prototype.isExtCharacter=function(N,k){return(N===this.EXT_+1||N===this.EXT_+2)&&k>=32&&k<=63},He.prototype.isMidRowCode=function(N,k){return N===this.EXT_&&k>=32&&k<=47},He.prototype.isOffsetControlCode=function(N,k){return N===this.OFFSET_&&k>=33&&k<=35},He.prototype.isPAC=function(N,k){return N>=this.BASE_&&N<this.BASE_+8&&k>=64&&k<=127},He.prototype.isColorPAC=function(N){return N>=64&&N<=79||N>=96&&N<=127},He.prototype.isNormalChar=function(N){return N>=32&&N<=127},He.prototype.setRollUp=function(N,k){if(this.mode_!=="rollUp"&&(this.row_=Dr,this.mode_="rollUp",this.flushDisplayed(N),this.nonDisplayed_=ar(),this.displayed_=ar()),k!==void 0&&k!==this.row_)for(var V=0;V<this.rollUpRows_;V++)this.displayed_[k-V]=this.displayed_[this.row_-V],this.displayed_[this.row_-V]={text:"",indent:0,offset:0};k===void 0&&(k=this.row_),this.topRow_=k-this.rollUpRows_+1},He.prototype.addFormatting=function(N,k){this.formatting_=this.formatting_.concat(k);var V=k.reduce(function(U,Y){return U+"<"+Y+">"},"");this[this.mode_](N,V)},He.prototype.clearFormatting=function(N){if(this.formatting_.length){var k=this.formatting_.reverse().reduce(function(V,U){return V+"</"+U+">"},"");this.formatting_=[],this[this.mode_](N,k)}},He.prototype.popOn=function(N,k){var V=this.nonDisplayed_[this.row_].text;V+=k,this.nonDisplayed_[this.row_].text=V},He.prototype.rollUp=function(N,k){var V=this.displayed_[this.row_].text;V+=k,this.displayed_[this.row_].text=V},He.prototype.shiftRowsUp_=function(){var N;for(N=0;N<this.topRow_;N++)this.displayed_[N]={text:"",indent:0,offset:0};for(N=this.row_+1;N<Dr+1;N++)this.displayed_[N]={text:"",indent:0,offset:0};for(N=this.topRow_;N<this.row_;N++)this.displayed_[N]=this.displayed_[N+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},He.prototype.paintOn=function(N,k){var V=this.displayed_[this.row_].text;V+=k,this.displayed_[this.row_].text=V};var _t={CaptionStream:lt,Cea608Stream:He,Cea708Stream:Ct},gt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},yt=n,qt=8589934592,yr=4294967296,Lr="shared",En=function(N,k){var V=1;for(N>k&&(V=-1);Math.abs(k-N)>yr;)N+=V*qt;return N},wn=function(N){var k,V;wn.prototype.init.call(this),this.type_=N||Lr,this.push=function(U){if(U.type==="metadata"){this.trigger("data",U);return}this.type_!==Lr&&U.type!==this.type_||(V===void 0&&(V=U.dts),U.dts=En(U.dts,V),U.pts=En(U.pts,V),k=U.dts,this.trigger("data",U))},this.flush=function(){V=k,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){V=void 0,k=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};wn.prototype=new yt;var ur={TimestampRolloverStream:wn,handleRollover:En},Xr=(N,k,V)=>{if(!N)return-1;for(var U=V;U<N.length;U++)if(N[U]===k)return U;return-1},ts={typedArrayIndexOf:Xr},Wr=ts.typedArrayIndexOf,Mr={Utf8:3},ln=function(N,k,V){var U,Y="";for(U=k;U<V;U++)Y+="%"+("00"+N[U].toString(16)).slice(-2);return Y},js=function(N,k,V){return decodeURIComponent(ln(N,k,V))},ri=function(N,k,V){return unescape(ln(N,k,V))},ea=function(N){return N[0]<<21|N[1]<<14|N[2]<<7|N[3]},vs={APIC:function(N){var k=1,V,U,Y="-->";N.data[0]===Mr.Utf8&&(V=Wr(N.data,0,k),!(V<0)&&(N.mimeType=ri(N.data,k,V),k=V+1,N.pictureType=N.data[k],k++,U=Wr(N.data,0,k),!(U<0)&&(N.description=js(N.data,k,U),k=U+1,N.mimeType===Y?N.url=ri(N.data,k,N.data.length):N.pictureData=N.data.subarray(k,N.data.length))))},"T*":function(N){N.data[0]===Mr.Utf8&&(N.value=js(N.data,1,N.data.length).replace(/\0*$/,""),N.values=N.value.split("\0"))},TXXX:function(N){var k;N.data[0]===Mr.Utf8&&(k=Wr(N.data,0,1),k!==-1&&(N.description=js(N.data,1,k),N.value=js(N.data,k+1,N.data.length).replace(/\0*$/,""),N.data=N.value))},"W*":function(N){N.url=ri(N.data,0,N.data.length).replace(/\0.*$/,"")},WXXX:function(N){var k;N.data[0]===Mr.Utf8&&(k=Wr(N.data,0,1),k!==-1&&(N.description=js(N.data,1,k),N.url=ri(N.data,k+1,N.data.length).replace(/\0.*$/,"")))},PRIV:function(N){var k;for(k=0;k<N.data.length;k++)if(N.data[k]===0){N.owner=ri(N.data,0,k);break}N.privateData=N.data.subarray(k+1),N.data=N.privateData}},bo=function(N){var k,V,U=10,Y=0,te=[];if(!(N.length<10||N[0]!==73||N[1]!==68||N[2]!==51)){Y=ea(N.subarray(6,10)),Y+=10;var pe=N[5]&64;pe&&(U+=4,U+=ea(N.subarray(10,14)),Y-=ea(N.subarray(16,20)));do{if(k=ea(N.subarray(U+4,U+8)),k<1)break;V=String.fromCharCode(N[U],N[U+1],N[U+2],N[U+3]);var me={id:V,data:N.subarray(U+10,U+k+10)};me.key=me.id,vs[me.id]?vs[me.id](me):me.id[0]==="T"?vs["T*"](me):me.id[0]==="W"&&vs["W*"](me),te.push(me),U+=10,U+=k}while(U<Y);return te}},Ti={parseId3Frames:bo,parseSyncSafeInteger:ea,frameParsers:vs},Ci=n,Zl=gt,ni=Ti,Ri;Ri=function(N){var k={descriptor:N&&N.descriptor},V=0,U=[],Y=0,te;if(Ri.prototype.init.call(this),this.dispatchType=Zl.METADATA_STREAM_TYPE.toString(16),k.descriptor)for(te=0;te<k.descriptor.length;te++)this.dispatchType+=("00"+k.descriptor[te].toString(16)).slice(-2);this.push=function(pe){var me,ge,ye,Se,Le,vt;if(pe.type==="timed-metadata"){if(pe.dataAlignmentIndicator&&(Y=0,U.length=0),U.length===0&&(pe.data.length<10||pe.data[0]!==73||pe.data[1]!==68||pe.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(U.push(pe),Y+=pe.data.byteLength,U.length===1&&(V=ni.parseSyncSafeInteger(pe.data.subarray(6,10)),V+=10),!(Y<V)){for(me={data:new Uint8Array(V),frames:[],pts:U[0].pts,dts:U[0].dts},Le=0;Le<V;)me.data.set(U[0].data.subarray(0,V-Le),Le),Le+=U[0].data.byteLength,Y-=U[0].data.byteLength,U.shift();ge=10,me.data[5]&64&&(ge+=4,ge+=ni.parseSyncSafeInteger(me.data.subarray(10,14)),V-=ni.parseSyncSafeInteger(me.data.subarray(16,20)));do{if(ye=ni.parseSyncSafeInteger(me.data.subarray(ge+4,ge+8)),ye<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(vt=String.fromCharCode(me.data[ge],me.data[ge+1],me.data[ge+2],me.data[ge+3]),Se={id:vt,data:me.data.subarray(ge+10,ge+ye+10)},Se.key=Se.id,ni.frameParsers[Se.id]?ni.frameParsers[Se.id](Se):Se.id[0]==="T"?ni.frameParsers["T*"](Se):Se.id[0]==="W"&&ni.frameParsers["W*"](Se),Se.owner==="com.apple.streaming.transportStreamTimestamp"){var Ge=Se.data,Ot=(Ge[3]&1)<<30|Ge[4]<<22|Ge[5]<<14|Ge[6]<<6|Ge[7]>>>2;Ot*=4,Ot+=Ge[7]&3,Se.timeStamp=Ot,me.pts===void 0&&me.dts===void 0&&(me.pts=Se.timeStamp,me.dts=Se.timeStamp),this.trigger("timestamp",Se)}me.frames.push(Se),ge+=10,ge+=ye}while(ge<V);this.trigger("data",me)}}}},Ri.prototype=new Ci;var sl=Ri,wi=n,Ai=_t,Wn=gt,ja=ur.TimestampRolloverStream,gr,rs,ta,Ms=188,To=71;gr=function(){var N=new Uint8Array(Ms),k=0;gr.prototype.init.call(this),this.push=function(V){var U=0,Y=Ms,te;for(k?(te=new Uint8Array(V.byteLength+k),te.set(N.subarray(0,k)),te.set(V,k),k=0):te=V;Y<te.byteLength;){if(te[U]===To&&te[Y]===To){this.trigger("data",te.subarray(U,Y)),U+=Ms,Y+=Ms;continue}U++,Y++}U<te.byteLength&&(N.set(te.subarray(U),0),k=te.byteLength-U)},this.flush=function(){k===Ms&&N[0]===To&&(this.trigger("data",N),k=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){k=0,this.trigger("reset")}},gr.prototype=new wi,rs=function(){var N,k,V,U;rs.prototype.init.call(this),U=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,N=function(Y,te){var pe=0;te.payloadUnitStartIndicator&&(pe+=Y[pe]+1),te.type==="pat"?k(Y.subarray(pe),te):V(Y.subarray(pe),te)},k=function(Y,te){te.section_number=Y[7],te.last_section_number=Y[8],U.pmtPid=(Y[10]&31)<<8|Y[11],te.pmtPid=U.pmtPid},V=function(Y,te){var pe,me,ge,ye;if(Y[5]&1){for(U.programMapTable={video:null,audio:null,"timed-metadata":{}},pe=(Y[1]&15)<<8|Y[2],me=3+pe-4,ge=(Y[10]&15)<<8|Y[11],ye=12+ge;ye<me;){var Se=Y[ye],Le=(Y[ye+1]&31)<<8|Y[ye+2];Se===Wn.H264_STREAM_TYPE&&U.programMapTable.video===null?U.programMapTable.video=Le:Se===Wn.ADTS_STREAM_TYPE&&U.programMapTable.audio===null?U.programMapTable.audio=Le:Se===Wn.METADATA_STREAM_TYPE&&(U.programMapTable["timed-metadata"][Le]=Se),ye+=((Y[ye+3]&15)<<8|Y[ye+4])+5}te.programMapTable=U.programMapTable}},this.push=function(Y){var te={},pe=4;if(te.payloadUnitStartIndicator=!!(Y[1]&64),te.pid=Y[1]&31,te.pid<<=8,te.pid|=Y[2],(Y[3]&48)>>>4>1&&(pe+=Y[pe]+1),te.pid===0)te.type="pat",N(Y.subarray(pe),te),this.trigger("data",te);else if(te.pid===this.pmtPid)for(te.type="pmt",N(Y.subarray(pe),te),this.trigger("data",te);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([Y,pe,te]):this.processPes_(Y,pe,te)},this.processPes_=function(Y,te,pe){pe.pid===this.programMapTable.video?pe.streamType=Wn.H264_STREAM_TYPE:pe.pid===this.programMapTable.audio?pe.streamType=Wn.ADTS_STREAM_TYPE:pe.streamType=this.programMapTable["timed-metadata"][pe.pid],pe.type="pes",pe.data=Y.subarray(te),this.trigger("data",pe)}},rs.prototype=new wi,rs.STREAM_TYPES={h264:27,adts:15},ta=function(){var N=this,k=!1,V={data:[],size:0},U={data:[],size:0},Y={data:[],size:0},te,pe=function(ge,ye){var Se;const Le=ge[0]<<16|ge[1]<<8|ge[2];ye.data=new Uint8Array,Le===1&&(ye.packetLength=6+(ge[4]<<8|ge[5]),ye.dataAlignmentIndicator=(ge[6]&4)!==0,Se=ge[7],Se&192&&(ye.pts=(ge[9]&14)<<27|(ge[10]&255)<<20|(ge[11]&254)<<12|(ge[12]&255)<<5|(ge[13]&254)>>>3,ye.pts*=4,ye.pts+=(ge[13]&6)>>>1,ye.dts=ye.pts,Se&64&&(ye.dts=(ge[14]&14)<<27|(ge[15]&255)<<20|(ge[16]&254)<<12|(ge[17]&255)<<5|(ge[18]&254)>>>3,ye.dts*=4,ye.dts+=(ge[18]&6)>>>1)),ye.data=ge.subarray(9+ge[8]))},me=function(ge,ye,Se){var Le=new Uint8Array(ge.size),vt={type:ye},Ge=0,Ot=0,Vt=!1,Br;if(!(!ge.data.length||ge.size<9)){for(vt.trackId=ge.data[0].pid,Ge=0;Ge<ge.data.length;Ge++)Br=ge.data[Ge],Le.set(Br.data,Ot),Ot+=Br.data.byteLength;pe(Le,vt),Vt=ye==="video"||vt.packetLength<=ge.size,(Se||Vt)&&(ge.size=0,ge.data.length=0),Vt&&N.trigger("data",vt)}};ta.prototype.init.call(this),this.push=function(ge){({pat:function(){},pes:function(){var ye,Se;switch(ge.streamType){case Wn.H264_STREAM_TYPE:ye=V,Se="video";break;case Wn.ADTS_STREAM_TYPE:ye=U,Se="audio";break;case Wn.METADATA_STREAM_TYPE:ye=Y,Se="timed-metadata";break;default:return}ge.payloadUnitStartIndicator&&me(ye,Se,!0),ye.data.push(ge),ye.size+=ge.data.byteLength},pmt:function(){var ye={type:"metadata",tracks:[]};te=ge.programMapTable,te.video!==null&&ye.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.video,codec:"avc",type:"video"}),te.audio!==null&&ye.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.audio,codec:"adts",type:"audio"}),k=!0,N.trigger("data",ye)}})[ge.type]()},this.reset=function(){V.size=0,V.data.length=0,U.size=0,U.data.length=0,this.trigger("reset")},this.flushStreams_=function(){me(V,"video"),me(U,"audio"),me(Y,"timed-metadata")},this.flush=function(){if(!k&&te){var ge={type:"metadata",tracks:[]};te.video!==null&&ge.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.video,codec:"avc",type:"video"}),te.audio!==null&&ge.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+te.audio,codec:"adts",type:"audio"}),N.trigger("data",ge)}k=!1,this.flushStreams_(),this.trigger("done")}},ta.prototype=new wi;var Co={PAT_PID:0,MP2T_PACKET_LENGTH:Ms,TransportPacketStream:gr,TransportParseStream:rs,ElementaryStream:ta,TimestampRolloverStream:ja,CaptionStream:Ai.CaptionStream,Cea608Stream:Ai.Cea608Stream,Cea708Stream:Ai.Cea708Stream,MetadataStream:sl};for(var Ma in Wn)Wn.hasOwnProperty(Ma)&&(Co[Ma]=Wn[Ma]);var Ro=Co,$a=n,si=Ht.ONE_SECOND_IN_TS,ns,$s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ns=function(N){var k,V=0;ns.prototype.init.call(this),this.skipWarn_=function(U,Y){this.trigger("log",{level:"warn",message:`adts skiping bytes ${U} to ${Y} in frame ${V} outside syncword`})},this.push=function(U){var Y=0,te,pe,me,ge,ye;if(N||(V=0),U.type==="audio"){k&&k.length?(me=k,k=new Uint8Array(me.byteLength+U.data.byteLength),k.set(me),k.set(U.data,me.byteLength)):k=U.data;for(var Se;Y+7<k.length;){if(k[Y]!==255||(k[Y+1]&246)!==240){typeof Se!="number"&&(Se=Y),Y++;continue}if(typeof Se=="number"&&(this.skipWarn_(Se,Y),Se=null),pe=(~k[Y+1]&1)*2,te=(k[Y+3]&3)<<11|k[Y+4]<<3|(k[Y+5]&224)>>5,ge=((k[Y+6]&3)+1)*1024,ye=ge*si/$s[(k[Y+2]&60)>>>2],k.byteLength-Y<te)break;this.trigger("data",{pts:U.pts+V*ye,dts:U.dts+V*ye,sampleCount:ge,audioobjecttype:(k[Y+2]>>>6&3)+1,channelcount:(k[Y+2]&1)<<2|(k[Y+3]&192)>>>6,samplerate:$s[(k[Y+2]&60)>>>2],samplingfrequencyindex:(k[Y+2]&60)>>>2,samplesize:16,data:k.subarray(Y+7+pe,Y+te)}),V++,Y+=te}typeof Se=="number"&&(this.skipWarn_(Se,Y),Se=null),k=k.subarray(Y)}},this.flush=function(){V=0,this.trigger("done")},this.reset=function(){k=void 0,this.trigger("reset")},this.endTimeline=function(){k=void 0,this.trigger("endedtimeline")}},ns.prototype=new $a;var ra=ns,na;na=function(N){var k=N.byteLength,V=0,U=0;this.length=function(){return 8*k},this.bitsAvailable=function(){return 8*k+U},this.loadWord=function(){var Y=N.byteLength-k,te=new Uint8Array(4),pe=Math.min(4,k);if(pe===0)throw new Error("no bytes available");te.set(N.subarray(Y,Y+pe)),V=new DataView(te.buffer).getUint32(0),U=pe*8,k-=pe},this.skipBits=function(Y){var te;U>Y?(V<<=Y,U-=Y):(Y-=U,te=Math.floor(Y/8),Y-=te*8,k-=te,this.loadWord(),V<<=Y,U-=Y)},this.readBits=function(Y){var te=Math.min(U,Y),pe=V>>>32-te;return U-=te,U>0?V<<=te:k>0&&this.loadWord(),te=Y-te,te>0?pe<<te|this.readBits(te):pe},this.skipLeadingZeros=function(){var Y;for(Y=0;Y<U;++Y)if((V&2147483648>>>Y)!==0)return V<<=Y,U-=Y,Y;return this.loadWord(),Y+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var Y=this.skipLeadingZeros();return this.readBits(Y+1)-1},this.readExpGolomb=function(){var Y=this.readUnsignedExpGolomb();return 1&Y?1+Y>>>1:-1*(Y>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ii=na,eu=n,tu=ii,xs,wo,il;wo=function(){var N=0,k,V;wo.prototype.init.call(this),this.push=function(U){var Y;V?(Y=new Uint8Array(V.byteLength+U.data.byteLength),Y.set(V),Y.set(U.data,V.byteLength),V=Y):V=U.data;for(var te=V.byteLength;N<te-3;N++)if(V[N+2]===1){k=N+5;break}for(;k<te;)switch(V[k]){case 0:if(V[k-1]!==0){k+=2;break}else if(V[k-2]!==0){k++;break}N+3!==k-2&&this.trigger("data",V.subarray(N+3,k-2));do k++;while(V[k]!==1&&k<te);N=k-2,k+=3;break;case 1:if(V[k-1]!==0||V[k-2]!==0){k+=3;break}this.trigger("data",V.subarray(N+3,k-2)),N=k-2,k+=3;break;default:k+=3;break}V=V.subarray(N),k-=N,N=0},this.reset=function(){V=null,N=0,this.trigger("reset")},this.flush=function(){V&&V.byteLength>3&&this.trigger("data",V.subarray(N+3)),V=null,N=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},wo.prototype=new eu,il={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},xs=function(){var N=new wo,k,V,U,Y,te,pe,me;xs.prototype.init.call(this),k=this,this.push=function(ge){ge.type==="video"&&(V=ge.trackId,U=ge.pts,Y=ge.dts,N.push(ge))},N.on("data",function(ge){var ye={trackId:V,pts:U,dts:Y,data:ge,nalUnitTypeCode:ge[0]&31};switch(ye.nalUnitTypeCode){case 5:ye.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ye.nalUnitType="sei_rbsp",ye.escapedRBSP=te(ge.subarray(1));break;case 7:ye.nalUnitType="seq_parameter_set_rbsp",ye.escapedRBSP=te(ge.subarray(1)),ye.config=pe(ye.escapedRBSP);break;case 8:ye.nalUnitType="pic_parameter_set_rbsp";break;case 9:ye.nalUnitType="access_unit_delimiter_rbsp";break}k.trigger("data",ye)}),N.on("done",function(){k.trigger("done")}),N.on("partialdone",function(){k.trigger("partialdone")}),N.on("reset",function(){k.trigger("reset")}),N.on("endedtimeline",function(){k.trigger("endedtimeline")}),this.flush=function(){N.flush()},this.partialFlush=function(){N.partialFlush()},this.reset=function(){N.reset()},this.endTimeline=function(){N.endTimeline()},me=function(ge,ye){var Se=8,Le=8,vt,Ge;for(vt=0;vt<ge;vt++)Le!==0&&(Ge=ye.readExpGolomb(),Le=(Se+Ge+256)%256),Se=Le===0?Se:Le},te=function(ge){for(var ye=ge.byteLength,Se=[],Le=1,vt,Ge;Le<ye-2;)ge[Le]===0&&ge[Le+1]===0&&ge[Le+2]===3?(Se.push(Le+2),Le+=2):Le++;if(Se.length===0)return ge;vt=ye-Se.length,Ge=new Uint8Array(vt);var Ot=0;for(Le=0;Le<vt;Ot++,Le++)Ot===Se[0]&&(Ot++,Se.shift()),Ge[Le]=ge[Ot];return Ge},pe=function(ge){var ye=0,Se=0,Le=0,vt=0,Ge,Ot,Vt,Br,Nr,ps,xa,Ea,gn,Sa,Yn,Pr=[1,1],Ui,Qn;if(Ge=new tu(ge),Ot=Ge.readUnsignedByte(),Br=Ge.readUnsignedByte(),Vt=Ge.readUnsignedByte(),Ge.skipUnsignedExpGolomb(),il[Ot]&&(Nr=Ge.readUnsignedExpGolomb(),Nr===3&&Ge.skipBits(1),Ge.skipUnsignedExpGolomb(),Ge.skipUnsignedExpGolomb(),Ge.skipBits(1),Ge.readBoolean()))for(Yn=Nr!==3?8:12,Qn=0;Qn<Yn;Qn++)Ge.readBoolean()&&(Qn<6?me(16,Ge):me(64,Ge));if(Ge.skipUnsignedExpGolomb(),ps=Ge.readUnsignedExpGolomb(),ps===0)Ge.readUnsignedExpGolomb();else if(ps===1)for(Ge.skipBits(1),Ge.skipExpGolomb(),Ge.skipExpGolomb(),xa=Ge.readUnsignedExpGolomb(),Qn=0;Qn<xa;Qn++)Ge.skipExpGolomb();if(Ge.skipUnsignedExpGolomb(),Ge.skipBits(1),Ea=Ge.readUnsignedExpGolomb(),gn=Ge.readUnsignedExpGolomb(),Sa=Ge.readBits(1),Sa===0&&Ge.skipBits(1),Ge.skipBits(1),Ge.readBoolean()&&(ye=Ge.readUnsignedExpGolomb(),Se=Ge.readUnsignedExpGolomb(),Le=Ge.readUnsignedExpGolomb(),vt=Ge.readUnsignedExpGolomb()),Ge.readBoolean()&&Ge.readBoolean()){switch(Ui=Ge.readUnsignedByte(),Ui){case 1:Pr=[1,1];break;case 2:Pr=[12,11];break;case 3:Pr=[10,11];break;case 4:Pr=[16,11];break;case 5:Pr=[40,33];break;case 6:Pr=[24,11];break;case 7:Pr=[20,11];break;case 8:Pr=[32,11];break;case 9:Pr=[80,33];break;case 10:Pr=[18,11];break;case 11:Pr=[15,11];break;case 12:Pr=[64,33];break;case 13:Pr=[160,99];break;case 14:Pr=[4,3];break;case 15:Pr=[3,2];break;case 16:Pr=[2,1];break;case 255:{Pr=[Ge.readUnsignedByte()<<8|Ge.readUnsignedByte(),Ge.readUnsignedByte()<<8|Ge.readUnsignedByte()];break}}Pr&&Pr[0]/Pr[1]}return{profileIdc:Ot,levelIdc:Vt,profileCompatibility:Br,width:(Ea+1)*16-ye*2-Se*2,height:(2-Sa)*(gn+1)*16-Le*2-vt*2,sarRatio:Pr}}},xs.prototype=new eu;var Ao={H264Stream:xs},ru=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nu=function(N,k){var V=N[k+6]<<21|N[k+7]<<14|N[k+8]<<7|N[k+9],U=N[k+5],Y=(U&16)>>4;return V=V>=0?V:0,Y?V+20:V+10},Tr=function(N,k){return N.length-k<10||N[k]!==73||N[k+1]!==68||N[k+2]!==51?k:(k+=nu(N,k),Tr(N,k))},Cr=function(N){var k=Tr(N,0);return N.length>=k+2&&(N[k]&255)===255&&(N[k+1]&240)===240&&(N[k+1]&22)===16},Ii=function(N){return N[0]<<21|N[1]<<14|N[2]<<7|N[3]},Io=function(N,k,V){var U,Y="";for(U=k;U<V;U++)Y+="%"+("00"+N[U].toString(16)).slice(-2);return Y},uc=function(N,k,V){return unescape(Io(N,k,V))},cc=function(N,k){var V=(N[k+5]&224)>>5,U=N[k+4]<<3,Y=N[k+3]&6144;return Y|U|V},al=function(N,k){return N[k]===73&&N[k+1]===68&&N[k+2]===51?"timed-metadata":N[k]&!0&&(N[k+1]&240)===240?"audio":null},Do=function(N){for(var k=0;k+5<N.length;){if(N[k]!==255||(N[k+1]&246)!==240){k++;continue}return ru[(N[k+2]&60)>>>2]}return null},Po=function(N){var k,V,U,Y;k=10,N[5]&64&&(k+=4,k+=Ii(N.subarray(10,14)));do{if(V=Ii(N.subarray(k+4,k+8)),V<1)return null;if(Y=String.fromCharCode(N[k],N[k+1],N[k+2],N[k+3]),Y==="PRIV"){U=N.subarray(k+10,k+V+10);for(var te=0;te<U.byteLength;te++)if(U[te]===0){var pe=uc(U,0,te);if(pe==="com.apple.streaming.transportStreamTimestamp"){var me=U.subarray(te+1),ge=(me[3]&1)<<30|me[4]<<22|me[5]<<14|me[6]<<6|me[7]>>>2;return ge*=4,ge+=me[7]&3,ge}break}}k+=10,k+=V}while(k<N.byteLength);return null},ko={isLikelyAacData:Cr,parseId3TagSize:nu,parseAdtsSize:cc,parseType:al,parseSampleRate:Do,parseAacTimestamp:Po},$r=n,sa=ko,Mn;Mn=function(){var N=new Uint8Array,k=0;Mn.prototype.init.call(this),this.setTimestamp=function(V){k=V},this.push=function(V){var U=0,Y=0,te,pe,me,ge;for(N.length?(ge=N.length,N=new Uint8Array(V.byteLength+ge),N.set(N.subarray(0,ge)),N.set(V,ge)):N=V;N.length-Y>=3;){if(N[Y]===73&&N[Y+1]===68&&N[Y+2]===51){if(N.length-Y<10||(U=sa.parseId3TagSize(N,Y),Y+U>N.length))break;pe={type:"timed-metadata",data:N.subarray(Y,Y+U)},this.trigger("data",pe),Y+=U;continue}else if((N[Y]&255)===255&&(N[Y+1]&240)===240){if(N.length-Y<7||(U=sa.parseAdtsSize(N,Y),Y+U>N.length))break;me={type:"audio",data:N.subarray(Y,Y+U),pts:k,dts:k},this.trigger("data",me),Y+=U;continue}Y++}te=N.length-Y,te>0?N=N.subarray(Y):N=new Uint8Array},this.reset=function(){N=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){N=new Uint8Array,this.trigger("endedtimeline")}},Mn.prototype=new $r;var ol=Mn,ia=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],_n=ia,ll=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],An=ll,Es=n,ai=Me,_s=nt,Fa=ir,jr=Ze,ss=Ro,en=Ht,Ba=ra,ul=Ao.H264Stream,oi=ol,No=ko.isLikelyAacData,cl=Ht.ONE_SECOND_IN_TS,kr=_n,Fs=An,aa,Ua,oa,Di,su=function(N,k){k.stream=N,this.trigger("log",k)},iu=function(N,k){for(var V=Object.keys(k),U=0;U<V.length;U++){var Y=V[U];Y==="headOfPipeline"||!k[Y].on||k[Y].on("log",su.bind(N,Y))}},dl=function(N,k){var V;if(N.length!==k.length)return!1;for(V=0;V<N.length;V++)if(N[V]!==k[V])return!1;return!0},Va=function(N,k,V,U,Y,te){var pe=V-k,me=U-k,ge=Y-V;return{start:{dts:N,pts:N+pe},end:{dts:N+me,pts:N+ge},prependedContentDuration:te,baseMediaDecodeTime:N}};Ua=function(N,k){var V=[],U,Y=0,te=0,pe=1/0;k=k||{},U=k.firstSequenceNumber||0,Ua.prototype.init.call(this),this.push=function(me){jr.collectDtsInfo(N,me),N&&kr.forEach(function(ge){N[ge]=me[ge]}),V.push(me)},this.setEarliestDts=function(me){Y=me},this.setVideoBaseMediaDecodeTime=function(me){pe=me},this.setAudioAppendStart=function(me){te=me},this.flush=function(){var me,ge,ye,Se,Le,vt,Ge;if(V.length===0){this.trigger("done","AudioSegmentStream");return}me=Fa.trimAdtsFramesByEarliestDts(V,N,Y),N.baseMediaDecodeTime=jr.calculateTrackBaseMediaDecodeTime(N,k.keepOriginalTimestamps),Ge=Fa.prefixWithSilence(N,me,te,pe),N.samples=Fa.generateSampleTable(me),ye=ai.mdat(Fa.concatenateFrameData(me)),V=[],ge=ai.moof(U,[N]),Se=new Uint8Array(ge.byteLength+ye.byteLength),U++,Se.set(ge),Se.set(ye,ge.byteLength),jr.clearDtsInfo(N),Le=Math.ceil(cl*1024/N.samplerate),me.length&&(vt=me.length*Le,this.trigger("segmentTimingInfo",Va(en.audioTsToVideoTs(N.baseMediaDecodeTime,N.samplerate),me[0].dts,me[0].pts,me[0].dts+vt,me[0].pts+vt,Ge||0)),this.trigger("timingInfo",{start:me[0].pts,end:me[0].pts+vt})),this.trigger("data",{track:N,boxes:Se}),this.trigger("done","AudioSegmentStream")},this.reset=function(){jr.clearDtsInfo(N),V=[],this.trigger("reset")}},Ua.prototype=new Es,aa=function(N,k){var V,U=[],Y=[],te,pe;k=k||{},V=k.firstSequenceNumber||0,aa.prototype.init.call(this),delete N.minPTS,this.gopCache_=[],this.push=function(me){jr.collectDtsInfo(N,me),me.nalUnitType==="seq_parameter_set_rbsp"&&!te&&(te=me.config,N.sps=[me.data],Fs.forEach(function(ge){N[ge]=te[ge]},this)),me.nalUnitType==="pic_parameter_set_rbsp"&&!pe&&(pe=me.data,N.pps=[me.data]),U.push(me)},this.flush=function(){for(var me,ge,ye,Se,Le,vt,Ge=0,Ot,Vt;U.length&&U[0].nalUnitType!=="access_unit_delimiter_rbsp";)U.shift();if(U.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(me=_s.groupNalsIntoFrames(U),ye=_s.groupFramesIntoGops(me),ye[0][0].keyFrame||(ge=this.getGopForFusion_(U[0],N),ge?(Ge=ge.duration,ye.unshift(ge),ye.byteLength+=ge.byteLength,ye.nalCount+=ge.nalCount,ye.pts=ge.pts,ye.dts=ge.dts,ye.duration+=ge.duration):ye=_s.extendFirstKeyFrame(ye)),Y.length){var Br;if(k.alignGopsAtEnd?Br=this.alignGopsAtEnd_(ye):Br=this.alignGopsAtStart_(ye),!Br){this.gopCache_.unshift({gop:ye.pop(),pps:N.pps,sps:N.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),U=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}jr.clearDtsInfo(N),ye=Br}jr.collectDtsInfo(N,ye),N.samples=_s.generateSampleTable(ye),Le=ai.mdat(_s.concatenateNalData(ye)),N.baseMediaDecodeTime=jr.calculateTrackBaseMediaDecodeTime(N,k.keepOriginalTimestamps),this.trigger("processedGopsInfo",ye.map(function(Nr){return{pts:Nr.pts,dts:Nr.dts,byteLength:Nr.byteLength}})),Ot=ye[0],Vt=ye[ye.length-1],this.trigger("segmentTimingInfo",Va(N.baseMediaDecodeTime,Ot.dts,Ot.pts,Vt.dts+Vt.duration,Vt.pts+Vt.duration,Ge)),this.trigger("timingInfo",{start:ye[0].pts,end:ye[ye.length-1].pts+ye[ye.length-1].duration}),this.gopCache_.unshift({gop:ye.pop(),pps:N.pps,sps:N.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),U=[],this.trigger("baseMediaDecodeTime",N.baseMediaDecodeTime),this.trigger("timelineStartInfo",N.timelineStartInfo),Se=ai.moof(V,[N]),vt=new Uint8Array(Se.byteLength+Le.byteLength),V++,vt.set(Se),vt.set(Le,Se.byteLength),this.trigger("data",{track:N,boxes:vt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),U=[],this.gopCache_.length=0,Y.length=0,this.trigger("reset")},this.resetStream_=function(){jr.clearDtsInfo(N),te=void 0,pe=void 0},this.getGopForFusion_=function(me){var ge=45e3,ye=1/0,Se,Le,vt,Ge,Ot;for(Ot=0;Ot<this.gopCache_.length;Ot++)Ge=this.gopCache_[Ot],vt=Ge.gop,!(!(N.pps&&dl(N.pps[0],Ge.pps[0]))||!(N.sps&&dl(N.sps[0],Ge.sps[0])))&&(vt.dts<N.timelineStartInfo.dts||(Se=me.dts-vt.dts-vt.duration,Se>=-1e4&&Se<=ge&&(!Le||ye>Se)&&(Le=Ge,ye=Se)));return Le?Le.gop:null},this.alignGopsAtStart_=function(me){var ge,ye,Se,Le,vt,Ge,Ot,Vt;for(vt=me.byteLength,Ge=me.nalCount,Ot=me.duration,ge=ye=0;ge<Y.length&&ye<me.length&&(Se=Y[ge],Le=me[ye],Se.pts!==Le.pts);){if(Le.pts>Se.pts){ge++;continue}ye++,vt-=Le.byteLength,Ge-=Le.nalCount,Ot-=Le.duration}return ye===0?me:ye===me.length?null:(Vt=me.slice(ye),Vt.byteLength=vt,Vt.duration=Ot,Vt.nalCount=Ge,Vt.pts=Vt[0].pts,Vt.dts=Vt[0].dts,Vt)},this.alignGopsAtEnd_=function(me){var ge,ye,Se,Le,vt,Ge;for(ge=Y.length-1,ye=me.length-1,vt=null,Ge=!1;ge>=0&&ye>=0;){if(Se=Y[ge],Le=me[ye],Se.pts===Le.pts){Ge=!0;break}if(Se.pts>Le.pts){ge--;continue}ge===Y.length-1&&(vt=ye),ye--}if(!Ge&&vt===null)return null;var Ot;if(Ge?Ot=ye:Ot=vt,Ot===0)return me;var Vt=me.slice(Ot),Br=Vt.reduce(function(Nr,ps){return Nr.byteLength+=ps.byteLength,Nr.duration+=ps.duration,Nr.nalCount+=ps.nalCount,Nr},{byteLength:0,duration:0,nalCount:0});return Vt.byteLength=Br.byteLength,Vt.duration=Br.duration,Vt.nalCount=Br.nalCount,Vt.pts=Vt[0].pts,Vt.dts=Vt[0].dts,Vt},this.alignGopsWith=function(me){Y=me}},aa.prototype=new Es,Di=function(N,k){this.numberOfTracks=0,this.metadataStream=k,N=N||{},typeof N.remux<"u"?this.remuxTracks=!!N.remux:this.remuxTracks=!0,typeof N.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=N.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Di.prototype.init.call(this),this.push=function(V){if(V.content||V.text)return this.pendingCaptions.push(V);if(V.frames)return this.pendingMetadata.push(V);this.pendingTracks.push(V.track),this.pendingBytes+=V.boxes.byteLength,V.track.type==="video"&&(this.videoTrack=V.track,this.pendingBoxes.push(V.boxes)),V.track.type==="audio"&&(this.audioTrack=V.track,this.pendingBoxes.unshift(V.boxes))}},Di.prototype=new Es,Di.prototype.flush=function(N){var k=0,V={captions:[],captionStreams:{},metadata:[],info:{}},U,Y,te,pe=0,me;if(this.pendingTracks.length<this.numberOfTracks){if(N!=="VideoSegmentStream"&&N!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(pe=this.videoTrack.timelineStartInfo.pts,Fs.forEach(function(ge){V.info[ge]=this.videoTrack[ge]},this)):this.audioTrack&&(pe=this.audioTrack.timelineStartInfo.pts,kr.forEach(function(ge){V.info[ge]=this.audioTrack[ge]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?V.type=this.pendingTracks[0].type:V.type="combined",this.emittedTracks+=this.pendingTracks.length,te=ai.initSegment(this.pendingTracks),V.initSegment=new Uint8Array(te.byteLength),V.initSegment.set(te),V.data=new Uint8Array(this.pendingBytes),me=0;me<this.pendingBoxes.length;me++)V.data.set(this.pendingBoxes[me],k),k+=this.pendingBoxes[me].byteLength;for(me=0;me<this.pendingCaptions.length;me++)U=this.pendingCaptions[me],U.startTime=en.metadataTsToSeconds(U.startPts,pe,this.keepOriginalTimestamps),U.endTime=en.metadataTsToSeconds(U.endPts,pe,this.keepOriginalTimestamps),V.captionStreams[U.stream]=!0,V.captions.push(U);for(me=0;me<this.pendingMetadata.length;me++)Y=this.pendingMetadata[me],Y.cueTime=en.metadataTsToSeconds(Y.pts,pe,this.keepOriginalTimestamps),V.metadata.push(Y);for(V.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",V),me=0;me<V.captions.length;me++)U=V.captions[me],this.trigger("caption",U);for(me=0;me<V.metadata.length;me++)Y=V.metadata[me],this.trigger("id3Frame",Y)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Di.prototype.setRemux=function(N){this.remuxTracks=N},oa=function(N){var k=this,V=!0,U,Y;oa.prototype.init.call(this),N=N||{},this.baseMediaDecodeTime=N.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var te={};this.transmuxPipeline_=te,te.type="aac",te.metadataStream=new ss.MetadataStream,te.aacStream=new oi,te.audioTimestampRolloverStream=new ss.TimestampRolloverStream("audio"),te.timedMetadataTimestampRolloverStream=new ss.TimestampRolloverStream("timed-metadata"),te.adtsStream=new Ba,te.coalesceStream=new Di(N,te.metadataStream),te.headOfPipeline=te.aacStream,te.aacStream.pipe(te.audioTimestampRolloverStream).pipe(te.adtsStream),te.aacStream.pipe(te.timedMetadataTimestampRolloverStream).pipe(te.metadataStream).pipe(te.coalesceStream),te.metadataStream.on("timestamp",function(pe){te.aacStream.setTimestamp(pe.timeStamp)}),te.aacStream.on("data",function(pe){pe.type!=="timed-metadata"&&pe.type!=="audio"||te.audioSegmentStream||(Y=Y||{timelineStartInfo:{baseMediaDecodeTime:k.baseMediaDecodeTime},codec:"adts",type:"audio"},te.coalesceStream.numberOfTracks++,te.audioSegmentStream=new Ua(Y,N),te.audioSegmentStream.on("log",k.getLogTrigger_("audioSegmentStream")),te.audioSegmentStream.on("timingInfo",k.trigger.bind(k,"audioTimingInfo")),te.adtsStream.pipe(te.audioSegmentStream).pipe(te.coalesceStream),k.trigger("trackinfo",{hasAudio:!!Y,hasVideo:!!U}))}),te.coalesceStream.on("data",this.trigger.bind(this,"data")),te.coalesceStream.on("done",this.trigger.bind(this,"done")),iu(this,te)},this.setupTsPipeline=function(){var te={};this.transmuxPipeline_=te,te.type="ts",te.metadataStream=new ss.MetadataStream,te.packetStream=new ss.TransportPacketStream,te.parseStream=new ss.TransportParseStream,te.elementaryStream=new ss.ElementaryStream,te.timestampRolloverStream=new ss.TimestampRolloverStream,te.adtsStream=new Ba,te.h264Stream=new ul,te.captionStream=new ss.CaptionStream(N),te.coalesceStream=new Di(N,te.metadataStream),te.headOfPipeline=te.packetStream,te.packetStream.pipe(te.parseStream).pipe(te.elementaryStream).pipe(te.timestampRolloverStream),te.timestampRolloverStream.pipe(te.h264Stream),te.timestampRolloverStream.pipe(te.adtsStream),te.timestampRolloverStream.pipe(te.metadataStream).pipe(te.coalesceStream),te.h264Stream.pipe(te.captionStream).pipe(te.coalesceStream),te.elementaryStream.on("data",function(pe){var me;if(pe.type==="metadata"){for(me=pe.tracks.length;me--;)!U&&pe.tracks[me].type==="video"?(U=pe.tracks[me],U.timelineStartInfo.baseMediaDecodeTime=k.baseMediaDecodeTime):!Y&&pe.tracks[me].type==="audio"&&(Y=pe.tracks[me],Y.timelineStartInfo.baseMediaDecodeTime=k.baseMediaDecodeTime);U&&!te.videoSegmentStream&&(te.coalesceStream.numberOfTracks++,te.videoSegmentStream=new aa(U,N),te.videoSegmentStream.on("log",k.getLogTrigger_("videoSegmentStream")),te.videoSegmentStream.on("timelineStartInfo",function(ge){Y&&!N.keepOriginalTimestamps&&(Y.timelineStartInfo=ge,te.audioSegmentStream.setEarliestDts(ge.dts-k.baseMediaDecodeTime))}),te.videoSegmentStream.on("processedGopsInfo",k.trigger.bind(k,"gopInfo")),te.videoSegmentStream.on("segmentTimingInfo",k.trigger.bind(k,"videoSegmentTimingInfo")),te.videoSegmentStream.on("baseMediaDecodeTime",function(ge){Y&&te.audioSegmentStream.setVideoBaseMediaDecodeTime(ge)}),te.videoSegmentStream.on("timingInfo",k.trigger.bind(k,"videoTimingInfo")),te.h264Stream.pipe(te.videoSegmentStream).pipe(te.coalesceStream)),Y&&!te.audioSegmentStream&&(te.coalesceStream.numberOfTracks++,te.audioSegmentStream=new Ua(Y,N),te.audioSegmentStream.on("log",k.getLogTrigger_("audioSegmentStream")),te.audioSegmentStream.on("timingInfo",k.trigger.bind(k,"audioTimingInfo")),te.audioSegmentStream.on("segmentTimingInfo",k.trigger.bind(k,"audioSegmentTimingInfo")),te.adtsStream.pipe(te.audioSegmentStream).pipe(te.coalesceStream)),k.trigger("trackinfo",{hasAudio:!!Y,hasVideo:!!U})}}),te.coalesceStream.on("data",this.trigger.bind(this,"data")),te.coalesceStream.on("id3Frame",function(pe){pe.dispatchType=te.metadataStream.dispatchType,k.trigger("id3Frame",pe)}),te.coalesceStream.on("caption",this.trigger.bind(this,"caption")),te.coalesceStream.on("done",this.trigger.bind(this,"done")),iu(this,te)},this.setBaseMediaDecodeTime=function(te){var pe=this.transmuxPipeline_;N.keepOriginalTimestamps||(this.baseMediaDecodeTime=te),Y&&(Y.timelineStartInfo.dts=void 0,Y.timelineStartInfo.pts=void 0,jr.clearDtsInfo(Y),pe.audioTimestampRolloverStream&&pe.audioTimestampRolloverStream.discontinuity()),U&&(pe.videoSegmentStream&&(pe.videoSegmentStream.gopCache_=[]),U.timelineStartInfo.dts=void 0,U.timelineStartInfo.pts=void 0,jr.clearDtsInfo(U),pe.captionStream.reset()),pe.timestampRolloverStream&&pe.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(te){Y&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(te)},this.setRemux=function(te){var pe=this.transmuxPipeline_;N.remux=te,pe&&pe.coalesceStream&&pe.coalesceStream.setRemux(te)},this.alignGopsWith=function(te){U&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(te)},this.getLogTrigger_=function(te){var pe=this;return function(me){me.stream=te,pe.trigger("log",me)}},this.push=function(te){if(V){var pe=No(te);pe&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!pe&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),V=!1}this.transmuxPipeline_.headOfPipeline.push(te)},this.flush=function(){V=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},oa.prototype=new Es;var la={Transmuxer:oa},pl=function(N){return N>>>0},au=function(N){return("00"+N.toString(16)).slice(-2)},Ha={toUnsigned:pl,toHexString:au},fl=function(N){var k="";return k+=String.fromCharCode(N[0]),k+=String.fromCharCode(N[1]),k+=String.fromCharCode(N[2]),k+=String.fromCharCode(N[3]),k},qa=fl,ou=Ha.toUnsigned,dc=qa,Oo=function(N,k){var V=[],U,Y,te,pe,me;if(!k.length)return null;for(U=0;U<N.byteLength;)Y=ou(N[U]<<24|N[U+1]<<16|N[U+2]<<8|N[U+3]),te=dc(N.subarray(U+4,U+8)),pe=Y>1?U+Y:N.byteLength,te===k[0]&&(k.length===1?V.push(N.subarray(U+8,pe)):(me=Oo(N.subarray(U+8,pe),k.slice(1)),me.length&&(V=V.concat(me)))),U=pe;return V},Ga=Oo,pc=Ha.toUnsigned,lu=a.getUint64,$n=function(N){var k={version:N[0],flags:new Uint8Array(N.subarray(1,4))};return k.version===1?k.baseMediaDecodeTime=lu(N.subarray(4)):k.baseMediaDecodeTime=pc(N[4]<<24|N[5]<<16|N[6]<<8|N[7]),k},Pi=$n,Bs=function(N){var k=new DataView(N.buffer,N.byteOffset,N.byteLength),V={version:N[0],flags:new Uint8Array(N.subarray(1,4)),trackId:k.getUint32(4)},U=V.flags[2]&1,Y=V.flags[2]&2,te=V.flags[2]&8,pe=V.flags[2]&16,me=V.flags[2]&32,ge=V.flags[0]&65536,ye=V.flags[0]&131072,Se;return Se=8,U&&(Se+=4,V.baseDataOffset=k.getUint32(12),Se+=4),Y&&(V.sampleDescriptionIndex=k.getUint32(Se),Se+=4),te&&(V.defaultSampleDuration=k.getUint32(Se),Se+=4),pe&&(V.defaultSampleSize=k.getUint32(Se),Se+=4),me&&(V.defaultSampleFlags=k.getUint32(Se)),ge&&(V.durationIsEmpty=!0),!U&&ye&&(V.baseDataOffsetIsMoof=!0),V},hl=Bs,ml=function(N){return{isLeading:(N[0]&12)>>>2,dependsOn:N[0]&3,isDependedOn:(N[1]&192)>>>6,hasRedundancy:(N[1]&48)>>>4,paddingValue:(N[1]&14)>>>1,isNonSyncSample:N[1]&1,degradationPriority:N[2]<<8|N[3]}},uu=ml,gl=uu,cu=function(N){var k={version:N[0],flags:new Uint8Array(N.subarray(1,4)),samples:[]},V=new DataView(N.buffer,N.byteOffset,N.byteLength),U=k.flags[2]&1,Y=k.flags[2]&4,te=k.flags[1]&1,pe=k.flags[1]&2,me=k.flags[1]&4,ge=k.flags[1]&8,ye=V.getUint32(4),Se=8,Le;for(U&&(k.dataOffset=V.getInt32(Se),Se+=4),Y&&ye&&(Le={flags:gl(N.subarray(Se,Se+4))},Se+=4,te&&(Le.duration=V.getUint32(Se),Se+=4),pe&&(Le.size=V.getUint32(Se),Se+=4),ge&&(k.version===1?Le.compositionTimeOffset=V.getInt32(Se):Le.compositionTimeOffset=V.getUint32(Se),Se+=4),k.samples.push(Le),ye--);ye--;)Le={},te&&(Le.duration=V.getUint32(Se),Se+=4),pe&&(Le.size=V.getUint32(Se),Se+=4),me&&(Le.flags=gl(N.subarray(Se,Se+4)),Se+=4),ge&&(k.version===1?Le.compositionTimeOffset=V.getInt32(Se):Le.compositionTimeOffset=V.getUint32(Se),Se+=4),k.samples.push(Le);return k},yl=cu,ki={tfdt:Pi,trun:yl},Ni={parseTfdt:ki.tfdt,parseTrun:ki.trun},fc=function(N){for(var k=0,V=String.fromCharCode(N[k]),U="";V!=="\0";)U+=V,k++,V=String.fromCharCode(N[k]);return U+=V,U},mc={uint8ToCString:fc},Oi=mc.uint8ToCString,vl=a.getUint64,zn=function(N){var k=4,V=N[0],U,Y,te,pe,me,ge,ye,Se;if(V===0){U=Oi(N.subarray(k)),k+=U.length,Y=Oi(N.subarray(k)),k+=Y.length;var Le=new DataView(N.buffer);te=Le.getUint32(k),k+=4,me=Le.getUint32(k),k+=4,ge=Le.getUint32(k),k+=4,ye=Le.getUint32(k),k+=4}else if(V===1){var Le=new DataView(N.buffer);te=Le.getUint32(k),k+=4,pe=vl(N.subarray(k)),k+=8,ge=Le.getUint32(k),k+=4,ye=Le.getUint32(k),k+=4,U=Oi(N.subarray(k)),k+=U.length,Y=Oi(N.subarray(k)),k+=Y.length}Se=new Uint8Array(N.subarray(k,N.byteLength));var vt={scheme_id_uri:U,value:Y,timescale:te||1,presentation_time:pe,presentation_time_delta:me,event_duration:ge,id:ye,message_data:Se};return gc(V,vt)?vt:void 0},li=function(N,k,V,U){return N||N===0?N/k:U+V/k},gc=function(N,k){var V=k.scheme_id_uri!=="\0",U=N===0&&Wa(k.presentation_time_delta)&&V,Y=N===1&&Wa(k.presentation_time)&&V;return!(N>1)&&U||Y},Wa=function(N){return N!==void 0||N!==null},yc={parseEmsgBox:zn,scaleTime:li},os;typeof window<"u"?os=window:typeof t<"u"?os=t:typeof self<"u"?os=self:os={};var In=os,Li=Ha.toUnsigned,ua=Ha.toHexString,Vr=Ga,ji=qa,xl=yc,vc=hl,ca=yl,Ae=Pi,Ke=a.getUint64,Fe,Pt,Jt,vr,zr,Rr,da,El=In,Kn=Ti.parseId3Frames;Fe=function(N){var k={},V=Vr(N,["moov","trak"]);return V.reduce(function(U,Y){var te,pe,me,ge,ye;return te=Vr(Y,["tkhd"])[0],!te||(pe=te[0],me=pe===0?12:20,ge=Li(te[me]<<24|te[me+1]<<16|te[me+2]<<8|te[me+3]),ye=Vr(Y,["mdia","mdhd"])[0],!ye)?null:(pe=ye[0],me=pe===0?12:20,U[ge]=Li(ye[me]<<24|ye[me+1]<<16|ye[me+2]<<8|ye[me+3]),U)},k)},Pt=function(N,k){var V;V=Vr(k,["moof","traf"]);var U=V.reduce(function(Y,te){var pe=Vr(te,["tfhd"])[0],me=Li(pe[4]<<24|pe[5]<<16|pe[6]<<8|pe[7]),ge=N[me]||9e4,ye=Vr(te,["tfdt"])[0],Se=new DataView(ye.buffer,ye.byteOffset,ye.byteLength),Le;ye[0]===1?Le=Ke(ye.subarray(4,12)):Le=Se.getUint32(4);let vt;return typeof Le=="bigint"?vt=Le/El.BigInt(ge):typeof Le=="number"&&!isNaN(Le)&&(vt=Le/ge),vt<Number.MAX_SAFE_INTEGER&&(vt=Number(vt)),vt<Y&&(Y=vt),Y},1/0);return typeof U=="bigint"||isFinite(U)?U:0},Jt=function(N,k){var V=Vr(k,["moof","traf"]),U=0,Y=0,te;if(V&&V.length){var pe=Vr(V[0],["tfhd"])[0],me=Vr(V[0],["trun"])[0],ge=Vr(V[0],["tfdt"])[0];if(pe){var ye=vc(pe);te=ye.trackId}if(ge){var Se=Ae(ge);U=Se.baseMediaDecodeTime}if(me){var Le=ca(me);Le.samples&&Le.samples.length&&(Y=Le.samples[0].compositionTimeOffset||0)}}var vt=N[te]||9e4;typeof U=="bigint"&&(Y=El.BigInt(Y),vt=El.BigInt(vt));var Ge=(U+Y)/vt;return typeof Ge=="bigint"&&Ge<Number.MAX_SAFE_INTEGER&&(Ge=Number(Ge)),Ge},vr=function(N){var k=Vr(N,["moov","trak"]),V=[];return k.forEach(function(U){var Y=Vr(U,["mdia","hdlr"]),te=Vr(U,["tkhd"]);Y.forEach(function(pe,me){var ge=ji(pe.subarray(8,12)),ye=te[me],Se,Le,vt;ge==="vide"&&(Se=new DataView(ye.buffer,ye.byteOffset,ye.byteLength),Le=Se.getUint8(0),vt=Le===0?Se.getUint32(12):Se.getUint32(20),V.push(vt))})}),V},Rr=function(N){var k=N[0],V=k===0?12:20;return Li(N[V]<<24|N[V+1]<<16|N[V+2]<<8|N[V+3])},zr=function(N){var k=Vr(N,["moov","trak"]),V=[];return k.forEach(function(U){var Y={},te=Vr(U,["tkhd"])[0],pe,me;te&&(pe=new DataView(te.buffer,te.byteOffset,te.byteLength),me=pe.getUint8(0),Y.id=me===0?pe.getUint32(12):pe.getUint32(20));var ge=Vr(U,["mdia","hdlr"])[0];if(ge){var ye=ji(ge.subarray(8,12));ye==="vide"?Y.type="video":ye==="soun"?Y.type="audio":Y.type=ye}var Se=Vr(U,["mdia","minf","stbl","stsd"])[0];if(Se){var Le=Se.subarray(8);Y.codec=ji(Le.subarray(4,8));var vt=Vr(Le,[Y.codec])[0],Ge,Ot;vt&&(/^[asm]vc[1-9]$/i.test(Y.codec)?(Ge=vt.subarray(78),Ot=ji(Ge.subarray(4,8)),Ot==="avcC"&&Ge.length>11?(Y.codec+=".",Y.codec+=ua(Ge[9]),Y.codec+=ua(Ge[10]),Y.codec+=ua(Ge[11])):Y.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(Y.codec)?(Ge=vt.subarray(28),Ot=ji(Ge.subarray(4,8)),Ot==="esds"&&Ge.length>20&&Ge[19]!==0?(Y.codec+="."+ua(Ge[19]),Y.codec+="."+ua(Ge[20]>>>2&63).replace(/^0/,"")):Y.codec="mp4a.40.2"):Y.codec=Y.codec.toLowerCase())}var Vt=Vr(U,["mdia","mdhd"])[0];Vt&&(Y.timescale=Rr(Vt)),V.push(Y)}),V},da=function(N,k=0){var V=Vr(N,["emsg"]);return V.map(U=>{var Y=xl.parseEmsgBox(new Uint8Array(U)),te=Kn(Y.message_data);return{cueTime:xl.scaleTime(Y.presentation_time,Y.timescale,Y.presentation_time_delta,k),duration:xl.scaleTime(Y.event_duration,Y.timescale),frames:te}})};var Bn={findBox:Vr,parseType:ji,timescale:Fe,startTime:Pt,compositionStartTime:Jt,videoTrackIds:vr,tracks:zr,getTimescaleFromMediaHeader:Rr,getEmsgID3:da};const{parseTrun:_l}=Ni,{findBox:us}=Bn;var Mi=In,za=function(N){var k=us(N,["moof","traf"]),V=us(N,["mdat"]),U=[];return V.forEach(function(Y,te){var pe=k[te];U.push({mdat:Y,traf:pe})}),U},Er=function(N,k,V){var U=k,Y=V.defaultSampleDuration||0,te=V.defaultSampleSize||0,pe=V.trackId,me=[];return N.forEach(function(ge){var ye=_l(ge),Se=ye.samples;Se.forEach(function(Le){Le.duration===void 0&&(Le.duration=Y),Le.size===void 0&&(Le.size=te),Le.trackId=pe,Le.dts=U,Le.compositionTimeOffset===void 0&&(Le.compositionTimeOffset=0),typeof U=="bigint"?(Le.pts=U+Mi.BigInt(Le.compositionTimeOffset),U+=Mi.BigInt(Le.duration)):(Le.pts=U+Le.compositionTimeOffset,U+=Le.duration)}),me=me.concat(Se)}),me},$i={getMdatTrafPairs:za,parseSamples:Er},Lo=ze.discardEmulationPreventionBytes,Ka=_t.CaptionStream,pa=Ga,du=Pi,pu=hl,{getMdatTrafPairs:Ya,parseSamples:Us}=$i,Qa=function(N,k){for(var V=N,U=0;U<k.length;U++){var Y=k[U];if(V<Y.size)return Y;V-=Y.size}return null},Sl=function(N,k,V){var U=new DataView(N.buffer,N.byteOffset,N.byteLength),Y={logs:[],seiNals:[]},te,pe,me,ge;for(pe=0;pe+4<N.length;pe+=me)if(me=U.getUint32(pe),pe+=4,!(me<=0))switch(N[pe]&31){case 6:var ye=N.subarray(pe+1,pe+1+me),Se=Qa(pe,k);if(te={nalUnitType:"sei_rbsp",size:me,data:ye,escapedRBSP:Lo(ye),trackId:V},Se)te.pts=Se.pts,te.dts=Se.dts,ge=Se;else if(ge)te.pts=ge.pts,te.dts=ge.dts;else{Y.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+pe+" for trackId "+V+". See mux.js#223."});break}Y.seiNals.push(te);break}return Y},cs=function(N,k){var V={},U=Ya(N);return U.forEach(function(Y){var te=Y.mdat,pe=Y.traf,me=pa(pe,["tfhd"]),ge=pu(me[0]),ye=ge.trackId,Se=pa(pe,["tfdt"]),Le=Se.length>0?du(Se[0]).baseMediaDecodeTime:0,vt=pa(pe,["trun"]),Ge,Ot;k===ye&&vt.length>0&&(Ge=Us(vt,Le,ge),Ot=Sl(te,Ge,ye),V[ye]||(V[ye]={seiNals:[],logs:[]}),V[ye].seiNals=V[ye].seiNals.concat(Ot.seiNals),V[ye].logs=V[ye].logs.concat(Ot.logs))}),V},jo=function(N,k,V){var U;if(k===null)return null;U=cs(N,k);var Y=U[k]||{};return{seiNals:Y.seiNals,logs:Y.logs,timescale:V}},Mo=function(){var N=!1,k,V,U,Y,te,pe;this.isInitialized=function(){return N},this.init=function(me){k=new Ka,N=!0,pe=me?me.isPartial:!1,k.on("data",function(ge){ge.startTime=ge.startPts/Y,ge.endTime=ge.endPts/Y,te.captions.push(ge),te.captionStreams[ge.stream]=!0}),k.on("log",function(ge){te.logs.push(ge)})},this.isNewInit=function(me,ge){return me&&me.length===0||ge&&typeof ge=="object"&&Object.keys(ge).length===0?!1:U!==me[0]||Y!==ge[U]},this.parse=function(me,ge,ye){var Se;if(this.isInitialized()){if(!ge||!ye)return null;if(this.isNewInit(ge,ye))U=ge[0],Y=ye[U];else if(U===null||!Y)return V.push(me),null}else return null;for(;V.length>0;){var Le=V.shift();this.parse(Le,ge,ye)}return Se=jo(me,U,Y),Se&&Se.logs&&(te.logs=te.logs.concat(Se.logs)),Se===null||!Se.seiNals?te.logs.length?{logs:te.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Se.seiNals),this.flushStream(),te)},this.pushNals=function(me){if(!this.isInitialized()||!me||me.length===0)return null;me.forEach(function(ge){k.push(ge)})},this.flushStream=function(){if(!this.isInitialized())return null;pe?k.partialFlush():k.flush()},this.clearParsedCaptions=function(){te.captions=[],te.captionStreams={},te.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;k.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){V=[],U=null,Y=null,te?this.clearParsedCaptions():te={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},$o=Mo;const{parseTfdt:fu}=Ni,hn=Ga,{getTimescaleFromMediaHeader:Fi}=Bn,{parseSamples:Xa,getMdatTrafPairs:hu}=$i;var Fo=function(){let N=9e4;this.init=function(k){const V=hn(k,["moov","trak","mdia","mdhd"])[0];V&&(N=Fi(V))},this.parseSegment=function(k){const V=[],U=hu(k);let Y=0;return U.forEach(function(te){const pe=te.mdat,me=te.traf,ge=hn(me,["tfdt"])[0],ye=hn(me,["tfhd"])[0],Se=hn(me,["trun"]);if(ge&&(Y=fu(ge).baseMediaDecodeTime),Se.length&&ye){const Le=Xa(Se,Y,ye);let vt=0;Le.forEach(function(Ge){const Ot="utf-8",Vt=new TextDecoder(Ot),Br=pe.slice(vt,vt+Ge.size);if(hn(Br,["vtte"])[0]){vt+=Ge.size;return}hn(Br,["vttc"]).forEach(function(xa){const Ea=hn(xa,["payl"])[0],gn=hn(xa,["sttg"])[0],Sa=Ge.pts/N,Yn=(Ge.pts+Ge.duration)/N;let Pr,Ui;if(Ea)try{Pr=Vt.decode(Ea)}catch(Qn){console.error(Qn)}if(gn)try{Ui=Vt.decode(gn)}catch(Qn){console.error(Qn)}Ge.duration&&Pr&&V.push({cueText:Pr,start:Sa,end:Yn,settings:Ui})}),vt+=Ge.size})}}),V}},Vs=gt,Hs=function(N){var k=N[1]&31;return k<<=8,k|=N[2],k},Bi=function(N){return!!(N[1]&64)},fa=function(N){var k=0;return(N[3]&48)>>>4>1&&(k+=N[4]+1),k},ha=function(N,k){var V=Hs(N);return V===0?"pat":V===k?"pmt":k?"pes":null},Bo=function(N){var k=Bi(N),V=4+fa(N);return k&&(V+=N[V]+1),(N[V+10]&31)<<8|N[V+11]},ma=function(N){var k={},V=Bi(N),U=4+fa(N);if(V&&(U+=N[U]+1),!!(N[U+5]&1)){var Y,te,pe;Y=(N[U+1]&15)<<8|N[U+2],te=3+Y-4,pe=(N[U+10]&15)<<8|N[U+11];for(var me=12+pe;me<te;){var ge=U+me;k[(N[ge+1]&31)<<8|N[ge+2]]=N[ge],me+=((N[ge+3]&15)<<8|N[ge+4])+5}return k}},Jr=function(N,k){var V=Hs(N),U=k[V];switch(U){case Vs.H264_STREAM_TYPE:return"video";case Vs.ADTS_STREAM_TYPE:return"audio";case Vs.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},mn=function(N){var k=Bi(N);if(!k)return null;var V=4+fa(N);if(V>=N.byteLength)return null;var U=null,Y;return Y=N[V+7],Y&192&&(U={},U.pts=(N[V+9]&14)<<27|(N[V+10]&255)<<20|(N[V+11]&254)<<12|(N[V+12]&255)<<5|(N[V+13]&254)>>>3,U.pts*=4,U.pts+=(N[V+13]&6)>>>1,U.dts=U.pts,Y&64&&(U.dts=(N[V+14]&14)<<27|(N[V+15]&255)<<20|(N[V+16]&254)<<12|(N[V+17]&255)<<5|(N[V+18]&254)>>>3,U.dts*=4,U.dts+=(N[V+18]&6)>>>1)),U},bl=function(N){switch(N){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},mu=function(N){for(var k=4+fa(N),V=N.subarray(k),U=0,Y=0,te=!1,pe;Y<V.byteLength-3;Y++)if(V[Y+2]===1){U=Y+5;break}for(;U<V.byteLength;)switch(V[U]){case 0:if(V[U-1]!==0){U+=2;break}else if(V[U-2]!==0){U++;break}Y+3!==U-2&&(pe=bl(V[Y+3]&31),pe==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0));do U++;while(V[U]!==1&&U<V.length);Y=U-2,U+=3;break;case 1:if(V[U-1]!==0||V[U-2]!==0){U+=3;break}pe=bl(V[Y+3]&31),pe==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0),Y=U-2,U+=3;break;default:U+=3;break}return V=V.subarray(Y),U-=Y,Y=0,V&&V.byteLength>3&&(pe=bl(V[Y+3]&31),pe==="slice_layer_without_partitioning_rbsp_idr"&&(te=!0)),te},Ja={parseType:ha,parsePat:Bo,parsePmt:ma,parsePayloadUnitStartIndicator:Bi,parsePesType:Jr,parsePesTime:mn,videoPacketContainsKeyFrame:mu},Za=gt,Ss=ur.handleRollover,mr={};mr.ts=Ja,mr.aac=ko;var ds=Ht.ONE_SECOND_IN_TS,Hr=188,Dn=71,ga=function(N,k){for(var V=0,U=Hr,Y,te;U<N.byteLength;){if(N[V]===Dn&&N[U]===Dn){switch(Y=N.subarray(V,U),te=mr.ts.parseType(Y,k.pid),te){case"pat":k.pid=mr.ts.parsePat(Y);break;case"pmt":var pe=mr.ts.parsePmt(Y);k.table=k.table||{},Object.keys(pe).forEach(function(me){k.table[me]=pe[me]});break}V+=Hr,U+=Hr;continue}V++,U++}},eo=function(N,k,V){for(var U=0,Y=Hr,te,pe,me,ge,ye,Se=!1;Y<=N.byteLength;){if(N[U]===Dn&&(N[Y]===Dn||Y===N.byteLength)){switch(te=N.subarray(U,Y),pe=mr.ts.parseType(te,k.pid),pe){case"pes":me=mr.ts.parsePesType(te,k.table),ge=mr.ts.parsePayloadUnitStartIndicator(te),me==="audio"&&ge&&(ye=mr.ts.parsePesTime(te),ye&&(ye.type="audio",V.audio.push(ye),Se=!0));break}if(Se)break;U+=Hr,Y+=Hr;continue}U++,Y++}for(Y=N.byteLength,U=Y-Hr,Se=!1;U>=0;){if(N[U]===Dn&&(N[Y]===Dn||Y===N.byteLength)){switch(te=N.subarray(U,Y),pe=mr.ts.parseType(te,k.pid),pe){case"pes":me=mr.ts.parsePesType(te,k.table),ge=mr.ts.parsePayloadUnitStartIndicator(te),me==="audio"&&ge&&(ye=mr.ts.parsePesTime(te),ye&&(ye.type="audio",V.audio.push(ye),Se=!0));break}if(Se)break;U-=Hr,Y-=Hr;continue}U--,Y--}},ya=function(N,k,V){for(var U=0,Y=Hr,te,pe,me,ge,ye,Se,Le,vt,Ge=!1,Ot={data:[],size:0};Y<N.byteLength;){if(N[U]===Dn&&N[Y]===Dn){switch(te=N.subarray(U,Y),pe=mr.ts.parseType(te,k.pid),pe){case"pes":if(me=mr.ts.parsePesType(te,k.table),ge=mr.ts.parsePayloadUnitStartIndicator(te),me==="video"&&(ge&&!Ge&&(ye=mr.ts.parsePesTime(te),ye&&(ye.type="video",V.video.push(ye),Ge=!0)),!V.firstKeyFrame)){if(ge&&Ot.size!==0){for(Se=new Uint8Array(Ot.size),Le=0;Ot.data.length;)vt=Ot.data.shift(),Se.set(vt,Le),Le+=vt.byteLength;if(mr.ts.videoPacketContainsKeyFrame(Se)){var Vt=mr.ts.parsePesTime(Se);Vt?(V.firstKeyFrame=Vt,V.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ot.size=0}Ot.data.push(te),Ot.size+=te.byteLength}break}if(Ge&&V.firstKeyFrame)break;U+=Hr,Y+=Hr;continue}U++,Y++}for(Y=N.byteLength,U=Y-Hr,Ge=!1;U>=0;){if(N[U]===Dn&&N[Y]===Dn){switch(te=N.subarray(U,Y),pe=mr.ts.parseType(te,k.pid),pe){case"pes":me=mr.ts.parsePesType(te,k.table),ge=mr.ts.parsePayloadUnitStartIndicator(te),me==="video"&&ge&&(ye=mr.ts.parsePesTime(te),ye&&(ye.type="video",V.video.push(ye),Ge=!0));break}if(Ge)break;U-=Hr,Y-=Hr;continue}U--,Y--}},Tl=function(N,k){if(N.audio&&N.audio.length){var V=k;(typeof V>"u"||isNaN(V))&&(V=N.audio[0].dts),N.audio.forEach(function(te){te.dts=Ss(te.dts,V),te.pts=Ss(te.pts,V),te.dtsTime=te.dts/ds,te.ptsTime=te.pts/ds})}if(N.video&&N.video.length){var U=k;if((typeof U>"u"||isNaN(U))&&(U=N.video[0].dts),N.video.forEach(function(te){te.dts=Ss(te.dts,U),te.pts=Ss(te.pts,U),te.dtsTime=te.dts/ds,te.ptsTime=te.pts/ds}),N.firstKeyFrame){var Y=N.firstKeyFrame;Y.dts=Ss(Y.dts,U),Y.pts=Ss(Y.pts,U),Y.dtsTime=Y.dts/ds,Y.ptsTime=Y.pts/ds}}},ci=function(N){for(var k=!1,V=0,U=null,Y=null,te=0,pe=0,me;N.length-pe>=3;){var ge=mr.aac.parseType(N,pe);switch(ge){case"timed-metadata":if(N.length-pe<10){k=!0;break}if(te=mr.aac.parseId3TagSize(N,pe),te>N.length){k=!0;break}Y===null&&(me=N.subarray(pe,pe+te),Y=mr.aac.parseAacTimestamp(me)),pe+=te;break;case"audio":if(N.length-pe<7){k=!0;break}if(te=mr.aac.parseAdtsSize(N,pe),te>N.length){k=!0;break}U===null&&(me=N.subarray(pe,pe+te),U=mr.aac.parseSampleRate(me)),V++,pe+=te;break;default:pe++;break}if(k)return null}if(U===null||Y===null)return null;var ye=ds/U,Se={audio:[{type:"audio",dts:Y,pts:Y},{type:"audio",dts:Y+V*1024*ye,pts:Y+V*1024*ye}]};return Se},gu=function(N){var k={pid:null,table:null},V={};ga(N,k);for(var U in k.table)if(k.table.hasOwnProperty(U)){var Y=k.table[U];switch(Y){case Za.H264_STREAM_TYPE:V.video=[],ya(N,k,V),V.video.length===0&&delete V.video;break;case Za.ADTS_STREAM_TYPE:V.audio=[],eo(N,k,V),V.audio.length===0&&delete V.audio;break}}return V},va=function(N,k){var V=mr.aac.isLikelyAacData(N),U;return V?U=ci(N):U=gu(N),!U||!U.audio&&!U.video?null:(Tl(U,k),U)},bs={inspect:va,parseAudioPes_:eo};const di=function(N,k){k.on("data",function(V){const U=V.initSegment;V.initSegment={data:U.buffer,byteOffset:U.byteOffset,byteLength:U.byteLength};const Y=V.data;V.data=Y.buffer,N.postMessage({action:"data",segment:V,byteOffset:Y.byteOffset,byteLength:Y.byteLength},[V.data])}),k.on("done",function(V){N.postMessage({action:"done"})}),k.on("gopInfo",function(V){N.postMessage({action:"gopInfo",gopInfo:V})}),k.on("videoSegmentTimingInfo",function(V){const U={start:{decode:Ht.videoTsToSeconds(V.start.dts),presentation:Ht.videoTsToSeconds(V.start.pts)},end:{decode:Ht.videoTsToSeconds(V.end.dts),presentation:Ht.videoTsToSeconds(V.end.pts)},baseMediaDecodeTime:Ht.videoTsToSeconds(V.baseMediaDecodeTime)};V.prependedContentDuration&&(U.prependedContentDuration=Ht.videoTsToSeconds(V.prependedContentDuration)),N.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:U})}),k.on("audioSegmentTimingInfo",function(V){const U={start:{decode:Ht.videoTsToSeconds(V.start.dts),presentation:Ht.videoTsToSeconds(V.start.pts)},end:{decode:Ht.videoTsToSeconds(V.end.dts),presentation:Ht.videoTsToSeconds(V.end.pts)},baseMediaDecodeTime:Ht.videoTsToSeconds(V.baseMediaDecodeTime)};V.prependedContentDuration&&(U.prependedContentDuration=Ht.videoTsToSeconds(V.prependedContentDuration)),N.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:U})}),k.on("id3Frame",function(V){N.postMessage({action:"id3Frame",id3Frame:V})}),k.on("caption",function(V){N.postMessage({action:"caption",caption:V})}),k.on("trackinfo",function(V){N.postMessage({action:"trackinfo",trackInfo:V})}),k.on("audioTimingInfo",function(V){N.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ht.videoTsToSeconds(V.start),end:Ht.videoTsToSeconds(V.end)}})}),k.on("videoTimingInfo",function(V){N.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ht.videoTsToSeconds(V.start),end:Ht.videoTsToSeconds(V.end)}})}),k.on("log",function(V){N.postMessage({action:"log",log:V})})};class Pn{constructor(k,V){this.options=V||{},this.self=k,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new la.Transmuxer(this.options),di(this.self,this.transmuxer)}pushMp4Captions(k){this.captionParser||(this.captionParser=new $o,this.captionParser.init());const V=new Uint8Array(k.data,k.byteOffset,k.byteLength),U=this.captionParser.parse(V,k.trackIds,k.timescales);this.self.postMessage({action:"mp4Captions",captions:U&&U.captions||[],logs:U&&U.logs||[],data:V.buffer},[V.buffer])}initMp4WebVttParser(k){this.webVttParser||(this.webVttParser=new Fo);const V=new Uint8Array(k.data,k.byteOffset,k.byteLength);this.webVttParser.init(V)}getMp4WebVttText(k){this.webVttParser||(this.webVttParser=new Fo);const V=new Uint8Array(k.data,k.byteOffset,k.byteLength),U=this.webVttParser.parseSegment(V);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:U||[],data:V.buffer},[V.buffer])}probeMp4StartTime({timescales:k,data:V}){const U=Bn.startTime(k,V);this.self.postMessage({action:"probeMp4StartTime",startTime:U,data:V},[V.buffer])}probeMp4Tracks({data:k}){const V=Bn.tracks(k);this.self.postMessage({action:"probeMp4Tracks",tracks:V,data:k},[k.buffer])}probeEmsgID3({data:k,offset:V}){const U=Bn.getEmsgID3(k,V);this.self.postMessage({action:"probeEmsgID3",id3Frames:U,emsgData:k},[k.buffer])}probeTs({data:k,baseStartTime:V}){const U=typeof V=="number"&&!isNaN(V)?V*Ht.ONE_SECOND_IN_TS:void 0,Y=bs.inspect(k,U);let te=null;Y&&(te={hasVideo:Y.video&&Y.video.length===2||!1,hasAudio:Y.audio&&Y.audio.length===2||!1},te.hasVideo&&(te.videoStart=Y.video[0].ptsTime),te.hasAudio&&(te.audioStart=Y.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:te,data:k},[k.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(k){const V=new Uint8Array(k.data,k.byteOffset,k.byteLength);this.transmuxer.push(V)}reset(){this.transmuxer.reset()}setTimestampOffset(k){const V=k.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ht.secondsToVideoTs(V)))}setAudioAppendStart(k){this.transmuxer.setAudioAppendStart(Math.ceil(Ht.secondsToVideoTs(k.appendStart)))}setRemux(k){this.transmuxer.setRemux(k.remux)}flush(k){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(k){this.transmuxer.alignGopsWith(k.gopsToAlignWith.slice())}}self.onmessage=function(N){if(N.data.action==="init"&&N.data.options){this.messageHandlers=new Pn(self,N.data.options);return}this.messageHandlers||(this.messageHandlers=new Pn(self)),N.data&&N.data.action&&N.data.action!=="init"&&this.messageHandlers[N.data.action]&&this.messageHandlers[N.data.action](N.data)}}));var TransmuxWorker=factory(workerCode$1);const handleData_=(t,e,n)=>{const{type:s,initSegment:i,captions:a,captionStreams:o,metadata:l,videoFrameDtsTime:u,videoFramePtsTime:c}=t.data.segment;e.buffer.push({captions:a,captionStreams:o,metadata:l});const d=t.data.segment.boxes||{data:t.data.segment.data},p={type:s,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof u<"u"&&(p.videoFrameDtsTime=u),typeof c<"u"&&(p.videoFramePtsTime=c),n(p)},handleDone_=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},handleGopInfo_=(t,e)=>{e.gopInfo=t.data.gopInfo},processTransmux=t=>{const{transmuxer:e,bytes:n,audioAppendStart:s,gopsToAlignWith:i,remux:a,onData:o,onTrackInfo:l,onAudioTimingInfo:u,onVideoTimingInfo:c,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:p,onId3:m,onCaptions:g,onDone:E,onEndedTimeline:x,onTransmuxerLog:b,isEndOfTimeline:S,segment:C,triggerSegmentEventFn:T}=t,I={buffer:[]};let D=S;const P=B=>{e.currentTransmux===t&&(B.data.action==="data"&&handleData_(B,I,o),B.data.action==="trackinfo"&&l(B.data.trackInfo),B.data.action==="gopInfo"&&handleGopInfo_(B,I),B.data.action==="audioTimingInfo"&&u(B.data.audioTimingInfo),B.data.action==="videoTimingInfo"&&c(B.data.videoTimingInfo),B.data.action==="videoSegmentTimingInfo"&&d(B.data.videoSegmentTimingInfo),B.data.action==="audioSegmentTimingInfo"&&p(B.data.audioSegmentTimingInfo),B.data.action==="id3Frame"&&m([B.data.id3Frame],B.data.id3Frame.dispatchType),B.data.action==="caption"&&g(B.data.caption),B.data.action==="endedtimeline"&&(D=!1,x()),B.data.action==="log"&&b(B.data.log),B.data.type==="transmuxed"&&(D||(e.onmessage=null,handleDone_({transmuxedData:I,callback:E}),dequeue(e))))},O=()=>{const B={message:"Received an error message from the transmuxer worker",metadata:{errorType:videojs.Error.StreamingFailedToTransmuxSegment,segmentInfo:segmentInfoPayload({segment:C})}};E(null,B)};if(e.onmessage=P,e.onerror=O,s&&e.postMessage({action:"setAudioAppendStart",appendStart:s}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof a<"u"&&e.postMessage({action:"setRemux",remux:a}),n.byteLength){const B=n instanceof ArrayBuffer?n:n.buffer,F=n instanceof ArrayBuffer?0:n.byteOffset;T({type:"segmenttransmuxingstart",segment:C}),e.postMessage({action:"push",data:B,byteOffset:F,byteLength:n.byteLength},[B])}S&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},dequeue=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():processTransmux(t.currentTransmux))},processAction=(t,e)=>{t.postMessage({action:e}),dequeue(t)},enqueueAction=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,processAction(e,t);return}e.transmuxQueue.push(processAction.bind(null,e,t))},reset=t=>{enqueueAction("reset",t)},endTimeline=t=>{enqueueAction("endTimeline",t)},transmux=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,processTransmux(t);return}t.transmuxer.transmuxQueue.push(t)},createTransmuxer=t=>{const e=new TransmuxWorker;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:t}),e};var segmentTransmuxer={reset,endTimeline,transmux,createTransmuxer};const workerCallback=function(t){const e=t.transmuxer,n=t.endAction||t.action,s=t.callback,i=_extends({},t,{endAction:null,transmuxer:null,callback:null}),a=o=>{o.data.action===n&&(e.removeEventListener("message",a),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),s(o.data))};if(e.addEventListener("message",a),t.data){const o=t.data instanceof ArrayBuffer;i.byteOffset=o?0:t.data.byteOffset,i.byteLength=t.data.byteLength;const l=[o?t.data:t.data.buffer];e.postMessage(i,l)}else e.postMessage(i)},REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102},WEB_VTT_CODEC="wvtt",abortAll=t=>{t.forEach(e=>{e.abort()})},getRequestStats=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),getProgressStats=t=>{const e=t.target,s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return s.bytesReceived=t.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s},handleErrors=(t,e)=>{const{requestType:n}=e,s=getStreamingNetworkErrorMetadata({requestType:n,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:e,metadata:s}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:REQUEST_ERRORS.ABORTED,xhr:e,metadata:s}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:REQUEST_ERRORS.FAILURE,xhr:e,metadata:s}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:REQUEST_ERRORS.FAILURE,xhr:e,metadata:s}:null},handleKeyResponse=(t,e,n,s)=>(i,a)=>{const o=a.response,l=handleErrors(i,a);if(l)return n(l,t);if(o.byteLength!==16)return n({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:REQUEST_ERRORS.FAILURE,xhr:a},t);const u=new DataView(o),c=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]);for(let p=0;p<e.length;p++)e[p].bytes=c;const d={uri:a.uri};return s({type:"segmentkeyloadcomplete",segment:t,keyInfo:d}),n(null,t)},initMp4Text=(t,e)=>{e===WEB_VTT_CODEC&&t.transmuxer.postMessage({action:"initMp4WebVttParser",data:t.map.bytes})},parseMp4TextSegment=(t,e,n)=>{e===WEB_VTT_CODEC&&workerCallback({action:"getMp4WebVttText",data:t.bytes,transmuxer:t.transmuxer,callback:({data:s,mp4VttCues:i})=>{t.bytes=s,n(null,t,{mp4VttCues:i})}})},parseInitSegment=(t,e)=>{const n=detectContainerForBytes(t.map.bytes);if(n!=="mp4"){const s=t.map.resolvedUri||t.map.uri,i=n||"unknown";return e({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${s}`,code:REQUEST_ERRORS.FAILURE,metadata:{mediaType:i}})}workerCallback({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:s,data:i})=>(t.map.bytes=i,s.forEach(function(a){t.map.tracks=t.map.tracks||{},!t.map.tracks[a.type]&&(t.map.tracks[a.type]=a,typeof a.id=="number"&&a.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[a.id]=a.timescale),a.type==="text"&&initMp4Text(t,a.codec))}),e(null))})},handleInitSegmentResponse=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:n})=>(s,i)=>{const a=handleErrors(s,i);if(a)return e(a,t);const o=new Uint8Array(i.response);if(n({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=o,e(null,t);t.map.bytes=o,parseInitSegment(t,function(l){if(l)return l.xhr=i,l.status=i.status,e(l,t);e(null,t)})},handleSegmentResponse=({segment:t,finishProcessingFn:e,responseType:n,triggerSegmentEventFn:s})=>(i,a)=>{const o=handleErrors(i,a);if(o)return e(o,t);s({type:"segmentloaded",segment:t});const l=n==="arraybuffer"||!a.responseText?a.response:stringToArrayBuffer(a.responseText.substring(t.lastReachedChar||0));return t.stats=getRequestStats(a),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),e(null,t)},transmuxAndNotify=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{const E=t.map&&t.map.tracks||{},x=!!(E.audio&&E.video);let b=s.bind(null,t,"audio","start");const S=s.bind(null,t,"audio","end");let C=s.bind(null,t,"video","start");const T=s.bind(null,t,"video","end"),I=()=>transmux({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:x,onData:D=>{D.type=D.type==="combined"?"video":D.type,d(t,D)},onTrackInfo:D=>{n&&(x&&(D.isMuxed=!0),n(t,D))},onAudioTimingInfo:D=>{b&&typeof D.start<"u"&&(b(D.start),b=null),S&&typeof D.end<"u"&&S(D.end)},onVideoTimingInfo:D=>{C&&typeof D.start<"u"&&(C(D.start),C=null),T&&typeof D.end<"u"&&T(D.end)},onVideoSegmentTimingInfo:D=>{const P={pts:{start:D.start.presentation,end:D.end.presentation},dts:{start:D.start.decode,end:D.end.decode}};g({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:P}),i(D)},onAudioSegmentTimingInfo:D=>{const P={pts:{start:D.start.pts,end:D.end.pts},dts:{start:D.start.dts,end:D.end.dts}};g({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:P}),a(D)},onId3:(D,P)=>{o(t,D,P)},onCaptions:D=>{l(t,[D])},isEndOfTimeline:u,onEndedTimeline:()=>{c()},onTransmuxerLog:m,onDone:(D,P)=>{p&&(D.type=D.type==="combined"?"video":D.type,g({type:"segmenttransmuxingcomplete",segment:t}),p(P,t,D))},segment:t,triggerSegmentEventFn:g});workerCallback({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:D=>{t.bytes=e=D.data;const P=D.result;P&&(n(t,{hasAudio:P.hasAudio,hasVideo:P.hasVideo,isMuxed:x}),n=null),I()}})},handleSegmentBytes=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let E=new Uint8Array(e);if(isLikelyFmp4MediaSegment(E)){t.isFmp4=!0;const{tracks:x}=t.map;if(x.text&&(!x.audio||!x.video)){d(t,{data:E,type:"text"}),parseMp4TextSegment(t,x.text.codec,p);return}const S={isFmp4:!0,hasVideo:!!x.video,hasAudio:!!x.audio};x.audio&&x.audio.codec&&x.audio.codec!=="enca"&&(S.audioCodec=x.audio.codec),x.video&&x.video.codec&&x.video.codec!=="encv"&&(S.videoCodec=x.video.codec),x.video&&x.audio&&(S.isMuxed=!0),n(t,S);const C=(T,I)=>{d(t,{data:E,type:S.hasAudio&&!S.isMuxed?"audio":"video"}),I&&I.length&&o(t,I),T&&T.length&&l(t,T),p(null,t,{})};workerCallback({action:"probeMp4StartTime",timescales:t.map.timescales,data:E,transmuxer:t.transmuxer,callback:({data:T,startTime:I})=>{e=T.buffer,t.bytes=E=T,S.hasAudio&&!S.isMuxed&&s(t,"audio","start",I),S.hasVideo&&s(t,"video","start",I),workerCallback({action:"probeEmsgID3",data:E,transmuxer:t.transmuxer,offset:I,callback:({emsgData:D,id3Frames:P})=>{if(e=D.buffer,t.bytes=E=D,!x.video||!D.byteLength||!t.transmuxer){C(void 0,P);return}workerCallback({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:E,timescales:t.map.timescales,trackIds:[x.video.id],callback:O=>{e=O.data.buffer,t.bytes=E=O.data,O.logs.forEach(function(B){m(merge(B,{stream:"mp4CaptionParser"}))}),C(O.captions,P)}})}})}});return}if(!t.transmuxer){p(null,t,{});return}if(typeof t.container>"u"&&(t.container=detectContainerForBytes(E)),t.container!=="ts"&&t.container!=="aac"){n(t,{hasAudio:!1,hasVideo:!1}),p(null,t,{});return}transmuxAndNotify({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})},decrypt=function({id:t,key:e,encryptedBytes:n,decryptionWorker:s,segment:i,doneFn:a},o){const l=c=>{if(c.data.source===t){s.removeEventListener("message",l);const d=c.data.decrypted;o(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};s.onerror=()=>{const c="An error occurred in the decryption worker",d=segmentInfoPayload({segment:i}),p={message:c,metadata:{error:new Error(c),errorType:videojs.Error.StreamingFailedToDecryptSegment,segmentInfo:d,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};a(p,i)},s.addEventListener("message",l);let u;e.bytes.slice?u=e.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(createTransferableMessage({source:t,encrypted:n,key:u,iv:e.iv}),[n.buffer,u.buffer])},decryptSegment=({decryptionWorker:t,segment:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{g({type:"segmentdecryptionstart"}),decrypt({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:p},E=>{e.bytes=E,g({type:"segmentdecryptioncomplete",segment:e}),handleSegmentBytes({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})})},waitForCompletion=({activeXhrs:t,decryptionWorker:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})=>{let E=0,x=!1;return(b,S)=>{if(!x){if(b)return x=!0,abortAll(t),p(b,S);if(E+=1,E===t.length){const C=function(){if(S.encryptedBytes)return decryptSegment({decryptionWorker:e,segment:S,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g});handleSegmentBytes({segment:S,bytes:S.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:p,onTransmuxerLog:m,triggerSegmentEventFn:g})};if(S.endOfAllRequests=Date.now(),S.map&&S.map.encryptedBytes&&!S.map.bytes)return g({type:"segmentdecryptionstart",segment:S}),decrypt({decryptionWorker:e,id:S.requestId+"-init",encryptedBytes:S.map.encryptedBytes,key:S.map.key,segment:S,doneFn:p},T=>{S.map.bytes=T,g({type:"segmentdecryptioncomplete",segment:S}),parseInitSegment(S,I=>{if(I)return abortAll(t),p(I,S);C()})});C()}}}},handleLoadEnd=({loadendState:t,abortFn:e})=>n=>{n.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},handleProgress=({segment:t,progressFn:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:a,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d})=>p=>{if(!p.target.aborted)return t.stats=merge(t.stats,getProgressStats(p)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(p,t)},mediaSegmentRequest=({xhr:t,xhrOptions:e,decryptionWorker:n,segment:s,abortFn:i,progressFn:a,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:g,dataFn:E,doneFn:x,onTransmuxerLog:b,triggerSegmentEventFn:S})=>{const C=[],T=waitForCompletion({activeXhrs:C,decryptionWorker:n,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:g,dataFn:E,doneFn:x,onTransmuxerLog:b,triggerSegmentEventFn:S});if(s.key&&!s.key.bytes){const B=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&B.push(s.map.key);const F=merge(e,{uri:s.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),H=handleKeyResponse(s,B,T,S),Q={uri:s.key.resolvedUri};S({type:"segmentkeyloadstart",segment:s,keyInfo:Q});const Z=t(F,H);C.push(Z)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){const Z=merge(e,{uri:s.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),ne=handleKeyResponse(s,[s.map.key],T,S),re={uri:s.map.key.resolvedUri};S({type:"segmentkeyloadstart",segment:s,keyInfo:re});const se=t(Z,ne);C.push(se)}const F=merge(e,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(s.map),requestType:"segment-media-initialization"}),H=handleInitSegmentResponse({segment:s,finishProcessingFn:T,triggerSegmentEventFn:S});S({type:"segmentloadstart",segment:s});const Q=t(F,H);C.push(Q)}const I=merge(e,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(s),requestType:"segment"}),D=handleSegmentResponse({segment:s,finishProcessingFn:T,responseType:I.responseType,triggerSegmentEventFn:S});S({type:"segmentloadstart",segment:s});const P=t(I,D);P.addEventListener("progress",handleProgress({segment:s,progressFn:a,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:g,dataFn:E})),C.push(P);const O={};return C.forEach(B=>{B.addEventListener("loadend",handleLoadEnd({loadendState:O,abortFn:i}))}),()=>abortAll(C)},logFn$1=logger("CodecUtils"),getCodecs=function(t){const e=t.attributes||{};if(e.CODECS)return parseCodecs(e.CODECS)},isMaat=(t,e)=>{const n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},isMuxed=(t,e)=>{if(!isMaat(t,e))return!0;const n=e.attributes||{},s=t.mediaGroups.AUDIO[n.AUDIO];for(const i in s)if(!s[i].uri&&!s[i].playlists)return!0;return!1},unwrapCodecList=function(t){const e={};return t.forEach(({mediaType:n,type:s,details:i})=>{e[n]=e[n]||[],e[n].push(translateLegacyCodec(`${s}${i}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1){logFn$1(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[n]=null;return}e[n]=e[n][0]}),e},codecCount=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},codecsForPlaylist=function(t,e){const n=e.attributes||{},s=unwrapCodecList(getCodecs(e)||[]);if(isMaat(t,e)&&!s.audio&&!isMuxed(t,e)){const i=unwrapCodecList(codecsFromDefault(t,n.AUDIO)||[]);i.audio&&(s.audio=i.audio)}return s},logFn=logger("PlaylistSelector"),representationToString=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},safeGetComputedStyle=function(t,e){if(!t)return"";const n=window$1.getComputedStyle(t);return n?n[e]:""},stableSort=function(t,e){const n=t.slice();t.sort(function(s,i){const a=e(s,i);return a===0?n.indexOf(s)-n.indexOf(i):a})},comparePlaylistBandwidth=function(t,e){let n,s;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||window$1.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(s=e.attributes.BANDWIDTH),s=s||window$1.Number.MAX_VALUE,n-s},comparePlaylistResolution=function(t,e){let n,s;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||window$1.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(s=e.attributes.RESOLUTION.width),s=s||window$1.Number.MAX_VALUE,n===s&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-s};let simpleSelector=function(t,e,n,s,i,a){if(!t)return;const o={bandwidth:e,width:n,height:s,limitRenditionByPlayerDimensions:i};let l=t.playlists;Playlist.isAudioOnly(t)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);let u=l.map(D=>{let P;const O=D.attributes&&D.attributes.RESOLUTION&&D.attributes.RESOLUTION.width,B=D.attributes&&D.attributes.RESOLUTION&&D.attributes.RESOLUTION.height;return P=D.attributes&&D.attributes.BANDWIDTH,P=P||window$1.Number.MAX_VALUE,{bandwidth:P,width:O,height:B,playlist:D}});stableSort(u,(D,P)=>D.bandwidth-P.bandwidth),u=u.filter(D=>!Playlist.isIncompatible(D.playlist));let c=u.filter(D=>Playlist.isEnabled(D.playlist));c.length||(c=u.filter(D=>!Playlist.isDisabled(D.playlist)));const d=c.filter(D=>D.bandwidth*Config.BANDWIDTH_VARIANCE<e);let p=d[d.length-1];const m=d.filter(D=>D.bandwidth===p.bandwidth)[0];if(i===!1){const D=m||c[0]||u[0];if(D&&D.playlist){let P="sortedPlaylistReps";return m&&(P="bandwidthBestRep"),c[0]&&(P="enabledPlaylistReps"),logFn(`choosing ${representationToString(D)} using ${P} with options`,o),D.playlist}return logFn("could not choose a playlist with options",o),null}const g=d.filter(D=>D.width&&D.height);stableSort(g,(D,P)=>D.width-P.width);const E=g.filter(D=>D.width===n&&D.height===s);p=E[E.length-1];const x=E.filter(D=>D.bandwidth===p.bandwidth)[0];let b,S,C;x||(b=g.filter(D=>D.width>n||D.height>s),S=b.filter(D=>D.width===b[0].width&&D.height===b[0].height),p=S[S.length-1],C=S.filter(D=>D.bandwidth===p.bandwidth)[0]);let T;if(a.leastPixelDiffSelector){const D=g.map(P=>(P.pixelDiff=Math.abs(P.width-n)+Math.abs(P.height-s),P));stableSort(D,(P,O)=>P.pixelDiff===O.pixelDiff?O.bandwidth-P.bandwidth:P.pixelDiff-O.pixelDiff),T=D[0]}const I=T||C||x||m||c[0]||u[0];if(I&&I.playlist){let D="sortedPlaylistReps";return T?D="leastPixelDiffRep":C?D="resolutionPlusOneRep":x?D="resolutionBestRep":m?D="bandwidthBestRep":c[0]&&(D="enabledPlaylistReps"),logFn(`choosing ${representationToString(I)} using ${D} with options`,o),I.playlist}return logFn("could not choose a playlist with options",o),null};const lastBandwidthSelector=function(){let t=this.useDevicePixelRatio&&window$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),simpleSelector(this.playlists.main,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*t,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},movingAverageBandwidthSelector=function(t){let e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let s=this.useDevicePixelRatio&&window$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),simpleSelector(this.playlists.main,e,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*s,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*s,this.limitRenditionByPlayerDimensions,this.playlistController_)}},minRebufferMaxBandwidthSelector=function(t){const{main:e,currentTime:n,bandwidth:s,duration:i,segmentDuration:a,timeUntilRebuffer:o,currentTimeline:l,syncController:u}=t,c=e.playlists.filter(E=>!Playlist.isIncompatible(E));let d=c.filter(Playlist.isEnabled);d.length||(d=c.filter(E=>!Playlist.isDisabled(E)));const m=d.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH")).map(E=>{const b=u.getSyncPoint(E,i,l,n)?1:2,C=Playlist.estimateSegmentRequestTime(a,s,E)*b-o;return{playlist:E,rebufferingImpact:C}}),g=m.filter(E=>E.rebufferingImpact<=0);return stableSort(g,(E,x)=>comparePlaylistBandwidth(x.playlist,E.playlist)),g.length?g[0]:(stableSort(m,(E,x)=>E.rebufferingImpact-x.rebufferingImpact),m[0]||null)},lowestBitrateCompatibleVariantSelector=function(){const t=this.playlists.main.playlists.filter(Playlist.isEnabled);return stableSort(t,(n,s)=>comparePlaylistBandwidth(n,s)),t.filter(n=>!!codecsForPlaylist(this.playlists.main,n).video)[0]||null},concatSegments=t=>{let e=0,n;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(s=>{n.set(s,e),e+=s.byteLength})),n};function compactSegmentUrlDescription(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const createCaptionsTrackIfNotExists=function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"});let s=n;/^cc708_/.test(n)&&(s="SERVICE"+n.split("_")[1]);const i=e.textTracks().getTrackById(s);if(i)t[n]=i;else{const a=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=n,l=n,u=!1;const c=a[s];c&&(o=c.label,l=c.language,u=c.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:s,default:u,label:o,language:l},!1).track}}},addCaptionData=function({inbandTextTracks:t,captionArray:e,timestampOffset:n}){if(!e)return;const s=window$1.WebKitDataCue||window$1.VTTCue;e.forEach(i=>{const a=i.stream;i.content?i.content.forEach(o=>{const l=new s(i.startTime+n,i.endTime+n,o.text);l.line=o.line,l.align="left",l.position=o.position,l.positionAlign="line-left",t[a].addCue(l)}):t[a].addCue(new s(i.startTime+n,i.endTime+n,i.text))})},deprecateOldCue=function(t){Object.defineProperties(t.frame,{id:{get(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},addMetadata=({inbandTextTracks:t,metadataArray:e,timestampOffset:n,videoDuration:s})=>{if(!e)return;const i=window$1.WebKitDataCue||window$1.VTTCue,a=t.metadataTrack_;if(!a||(e.forEach(d=>{const p=d.cueTime+n;typeof p!="number"||window$1.isNaN(p)||p<0||!(p<1/0)||!d.frames||!d.frames.length||d.frames.forEach(m=>{const g=new i(p,p,m.value||m.url||m.data||"");g.frame=m,g.value=m,deprecateOldCue(g),a.addCue(g)})}),!a.cues||!a.cues.length))return;const o=a.cues,l=[];for(let d=0;d<o.length;d++)o[d]&&l.push(o[d]);const u=l.reduce((d,p)=>{const m=d[p.startTime]||[];return m.push(p),d[p.startTime]=m,d},{}),c=Object.keys(u).sort((d,p)=>Number(d)-Number(p));c.forEach((d,p)=>{const m=u[d],g=isFinite(s)?s:d,E=Number(c[p+1])||g;m.forEach(x=>{x.endTime=E})})},dateRangeAttr={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},dateRangeKeysToOmit=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),addDateRangeMetadata=({inbandTextTracks:t,dateRanges:e})=>{const n=t.metadataTrack_;if(!n)return;const s=window$1.WebKitDataCue||window$1.VTTCue;e.forEach(i=>{for(const a of Object.keys(i)){if(dateRangeKeysToOmit.has(a))continue;const o=new s(i.startTime,i.endTime,"");o.id=i.id,o.type="com.apple.quicktime.HLS",o.value={key:dateRangeAttr[a],data:i[a]},(a==="scte35Out"||a==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(o)}i.processDateRange()})},createMetadataTrackIfNotExists=(t,e,n)=>{t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,videojs.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},removeCuesFromTrack=function(t,e,n){let s,i;if(n&&n.cues)for(s=n.cues.length;s--;)i=n.cues[s],i.startTime>=t&&i.endTime<=e&&n.removeCue(i)},removeDuplicateCuesFromTrack=function(t){const e=t.cues;if(!e)return;const n={};for(let s=e.length-1;s>=0;s--){const i=e[s],a=`${i.startTime}-${i.endTime}-${i.text}`;n[a]?t.removeCue(i):n[a]=i}},gopsSafeToAlignWith=(t,e,n)=>{if(typeof e>"u"||e===null||!t.length)return[];const s=Math.ceil((e-n+3)*clockExports.ONE_SECOND_IN_TS);let i;for(i=0;i<t.length&&!(t[i].pts>s);i++);return t.slice(i)},updateGopBuffer=(t,e,n)=>{if(!e.length)return t;if(n)return e.slice();const s=e[0].pts;let i=0;for(i;i<t.length&&!(t[i].pts>=s);i++);return t.slice(0,i).concat(e)},removeGopBuffer=(t,e,n,s)=>{const i=Math.ceil((e-s)*clockExports.ONE_SECOND_IN_TS),a=Math.ceil((n-s)*clockExports.ONE_SECOND_IN_TS),o=t.slice();let l=t.length;for(;l--&&!(t[l].pts<=a););if(l===-1)return o;let u=l+1;for(;u--&&!(t[u].pts<=i););return u=Math.max(u,0),o.splice(u,l-u+1),o},shallowEqual=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const n=Object.keys(t).sort(),s=Object.keys(e).sort();if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++){const a=n[i];if(a!==s[i]||t[a]!==e[a])return!1}return!0},getSyncSegmentCandidate=function(t,e,n){e=e||[];const s=[];let i=0;for(let a=0;a<e.length;a++){const o=e[a];if(t===o.timeline&&(s.push(a),i+=o.duration,i>n))return a}return s.length===0?0:s[s.length-1]},MIN_BACK_BUFFER=1,CHECK_BUFFER_DELAY=500,finite=t=>typeof t=="number"&&isFinite(t),MIN_SEGMENT_DURATION_TO_SAVE_STATS=1/60,illegalMediaSwitch=(t,e,n)=>t!=="main"||!e||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,safeBackBufferTrimTime=(t,e,n)=>{let s=e-Config.BACK_BUFFER_LENGTH;t.length&&(s=Math.max(s,t.start(0)));const i=e-n;return Math.min(i,s)},segmentInfoString=t=>{const{startOfSegment:e,duration:n,segment:s,part:i,playlist:{mediaSequence:a,id:o,segments:l=[]},mediaIndex:u,partIndex:c,timeline:d}=t,p=l.length-1;let m="mediaIndex/partIndex increment";t.getMediaInfoForTime?m=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(m+=` with independent ${t.independent}`);const g=typeof c=="number",E=t.segment.uri?"segment":"pre-segment",x=g?getKnownPartCount({preloadSegment:s})-1:0;return`${E} [${a+u}/${a+p}]`+(g?` part [${c}/${x}]`:"")+` segment start/end [${s.start} => ${s.end}]`+(g?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${d}] selected by [${m}] playlist [${o}]`},timingInfoPropertyForMedia=t=>`${t}TimingInfo`,timestampOffsetForSegment=({segmentTimeline:t,currentTimeline:e,startOfSegment:n,buffered:s,overrideCheck:i})=>!i&&t===e?null:t<e?n:s.length?s.end(s.length-1):n,shouldWaitForTimelineChange=({timelineChangeController:t,currentTimeline:e,segmentTimeline:n,loaderType:s,audioDisabled:i})=>{if(e===n)return!1;if(s==="audio"){const a=t.lastTimelineChange({type:"main"});return!a||a.to!==n}if(s==="main"&&i){const a=t.pendingTimelineChange({type:"audio"});return!(a&&a.to===n)}return!1},shouldFixBadTimelineChanges=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),n=t.pendingTimelineChange({type:"main"}),s=e&&n,i=s&&e.to!==n.to;return!!(s&&e.from!==-1&&n.from!==-1&&i)},fixBadTimelineChange=t=>{t&&(t.pause(),t.resetEverything(),t.load())},isAudioTimelineBehind=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&n&&e.to<n.to},checkAndFixTimelines=t=>{const e=t.pendingSegment_;if(!e)return;if(shouldWaitForTimelineChange({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&shouldFixBadTimelineChanges(t.timelineChangeController_)){if(isAudioTimelineBehind(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}fixBadTimelineChange(t)}},mediaDuration=t=>{let e=0;return["video","audio"].forEach(function(n){const s=t[`${n}TimingInfo`];if(!s)return;const{start:i,end:a}=s;let o;typeof i=="bigint"||typeof a=="bigint"?o=window$1.BigInt(a)-window$1.BigInt(i):typeof i=="number"&&typeof a=="number"&&(o=a-i),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},segmentTooLong=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+TIME_FUDGE_FACTOR:!1,getTroublesomeSegmentDurationMessage=(t,e)=>{if(e!=="hls")return null;const n=mediaDuration({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;const s=t.playlist.targetDuration,i=segmentTooLong({segmentDuration:n,maxDuration:s*2}),a=segmentTooLong({segmentDuration:n,maxDuration:s}),o=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${n} when the reported duration is ${t.duration} and the target duration is ${s}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||a?{severity:i?"warn":"info",message:o}:null},segmentInfoPayload=({type:t,segment:e})=>{if(!e)return;const n=!!(e.key||e.map&&e.map.ke),s=!!(e.map&&!e.map.bytes),i=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:i,duration:e.duration,isEncrypted:n,isMediaInitialization:s}};class SegmentLoader extends videojs.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=logger(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(s){s!==this.state_&&(this.logger_(`${this.state_} -> ${s}`),this.state_=s,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.sourceUpdater_.on("codecschange",s=>{this.trigger(_extends({type:"codecschange"},s))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",s=>{this.trigger(_extends({type:"timelinechange"},s)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():checkAndFixTimelines(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return segmentTransmuxer.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window$1.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window$1.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return createTimeRanges();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:s,isMuxed:i}=e;if(s&&n&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const s=initSegmentId(e);let i=this.initSegments_[s];return n&&!i&&e.bytes&&(this.initSegments_[s]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,n=!1){if(!e)return null;const s=segmentKeyId(e);let i=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!i&&e.bytes&&(this.keyCache_[s]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const a={resolvedUri:(i||e).resolvedUri};return i&&(a.bytes=i.bytes),a}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e)return;const s=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let a=null;if(s&&(s.id?a=s.id:s.uri&&(a=s.uri)),this.logger_(`playlist update [${a} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${lastBufferedEnd(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-s.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const l=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!l.parts||!l.parts.length||!l.parts[this.partIndex])){const u=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=u}}i&&(i.mediaIndex-=o,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}pause(){this.checkBufferTimeout_&&(window$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,s=()=>{},i=!1){if(n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let a=1;const o=()=>{a--,a===0&&s()};(i||!this.audioDisabled_)&&(a++,this.sourceUpdater_.removeAudio(e,n,o)),(i||this.loaderType_==="main")&&(this.gopBuffer_=removeGopBuffer(this.gopBuffer_,e,n,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,n,o));for(const l in this.inbandTextTracks_)removeCuesFromTrack(e,n,this.inbandTextTracks_[l]);removeCuesFromTrack(e,n,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&window$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&window$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const n={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:n}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,s=this.partIndex){if(!n||!this.mediaSource_)return!1;const i=typeof e=="number"&&n.segments[e],a=e+1===n.segments.length,o=!i||!i.parts||s+1===i.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&a&&o}chooseNextRequest_(){const e=this.buffered_(),n=lastBufferedEnd(e)||0,s=timeAheadOf(e,this.currentTime_()),i=!this.hasPlayed_()&&s>=1,a=s>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||i||a)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const l={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(l.isSyncRequest)l.mediaIndex=getSyncSegmentCandidate(this.currentTimeline_,o,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${l.mediaIndex}`);else if(this.mediaIndex!==null){const m=o[this.mediaIndex],g=typeof this.partIndex=="number"?this.partIndex:-1;l.startOfSegment=m.end?m.end:n,m.parts&&m.parts[g+1]?(l.mediaIndex=this.mediaIndex,l.partIndex=g+1):l.mediaIndex=this.mediaIndex+1}else{let m,g,E;const x=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${x}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const b=this.getSyncInfoFromMediaSequenceSync_(x);if(!b){const S="No sync info found while using media sequence sync";return this.error({message:S,metadata:{errorType:videojs.Error.StreamingFailedToSelectNextSegment,error:new Error(S)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${b.start} --> ${b.end})`),m=b.segmentIndex,g=b.partIndex,E=b.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const b=Playlist.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:x,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});m=b.segmentIndex,g=b.partIndex,E=b.startTime}l.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${x}`:`currentTime ${x}`,l.mediaIndex=m,l.startOfSegment=E,l.partIndex=g,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${l.mediaIndex} `)}const u=o[l.mediaIndex];let c=u&&typeof l.partIndex=="number"&&u.parts&&u.parts[l.partIndex];if(!u||typeof l.partIndex=="number"&&!c)return null;typeof l.partIndex!="number"&&u.parts&&(l.partIndex=0,c=u.parts[0]);const d=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!s&&c&&!d&&!c.independent)if(l.partIndex===0){const m=o[l.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(l.mediaIndex-=1,l.partIndex=m.parts.length-1,l.independent="previous segment")}else u.parts[l.partIndex-1].independent&&(l.partIndex-=1,l.independent="previous part");const p=this.mediaSource_&&this.mediaSource_.readyState==="ended";return l.mediaIndex>=o.length-1&&p&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,l.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(l))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const n=Math.max(e,this.mediaSequenceSync_.start);e!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${n}`);const s=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!s)return null;if(!s.isAppended)return s;const i=this.mediaSequenceSync_.getSyncInfoForTime(s.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:n,playlist:s,mediaIndex:i,startOfSegment:a,isSyncRequest:o,partIndex:l,forceTimestampOffset:u,getMediaInfoForTime:c}=e,d=s.segments[i],p=typeof l=="number"&&d.parts[l],m={requestId:"segment-loader-"+Math.random(),uri:p&&p.resolvedUri||d.resolvedUri,mediaIndex:i,partIndex:p?l:null,isSyncRequest:o,startOfSegment:a,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:p&&p.duration||d.duration,segment:d,part:p,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:c,independent:n},g=typeof u<"u"?u:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:a,buffered:this.buffered_(),overrideCheck:g});const E=lastBufferedEnd(this.sourceUpdater_.audioBuffered());return typeof E=="number"&&(m.audioAppendStart=E-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=gopsSafeToAlignWith(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m}timestampOffsetForSegment_(e){return timestampOffsetForSegment(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),s=e.bandwidth,i=this.pendingSegment_.duration,a=Playlist.estimateSegmentRequestTime(i,s,this.playlist_,e.bytesReceived),o=timeUntilRebuffer(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(a<=o)return;const l=minRebufferMaxBandwidthSelector({main:this.vhs_.playlists.main,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!l)return;const c=a-o-l.rebufferingImpact;let d=.5;o<=TIME_FUDGE_FACTOR&&(d=1),!(!l.playlist||l.playlist.uri===this.playlist_.uri||c<d)&&(this.bandwidth=l.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${segmentInfoString(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){const{hasAudio:s,hasVideo:i}=n,a={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:s,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:a}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},shallowEqual(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this))))}handleTimingInfo_(e,n,s,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const a=this.pendingSegment_,o=timingInfoPropertyForMedia(n);a[o]=a[o]||{},a[o][s]=i,this.logger_(`timinginfo: ${n} - ${s} - ${i}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};n.forEach(o=>{a[o.stream]=a[o.stream]||{startTime:1/0,captions:[],endTime:0};const l=a[o.stream];l.startTime=Math.min(l.startTime,o.startTime+i),l.endTime=Math.max(l.endTime,o.endTime+i),l.captions.push(o)}),Object.keys(a).forEach(o=>{const{startTime:l,endTime:u,captions:c}=a[o],d=this.inbandTextTracks_;this.logger_(`adding cues from ${l} -> ${u} for ${o}`),createCaptionsTrackIfNotExists(d,this.vhs_.tech_,o),removeCuesFromTrack(l,u,d[o]),addCaptionData({captionArray:c,inbandTextTracks:d,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}this.addMetadataToTextTrack(s,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:s,hasVideo:i,isMuxed:a}=n;return!(i&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!a&&!e.audioTimingInfo||shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){checkAndFixTimelines(this),this.callQueue_.push(this.handleData_.bind(this,e,n));return}const s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[timingInfoPropertyForMedia(n.type)].start;else{const i=this.getCurrentMediaInfo_(),a=this.loaderType_==="main"&&i&&i.hasVideo;let o;a&&(o=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:o,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=this.chooseNextRequest_();if(i.mediaIndex!==s.mediaIndex||i.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}updateAppendInitSegmentStatus(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:s,playlist:i}){if(s){const a=initSegmentId(s);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(s,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:s},i){const a=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+timeRangesToArray(a).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+timeRangesToArray(o).join(", "));const l=a.length?a.start(0):0,u=a.length?a.end(a.length-1):0,c=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(u-l<=MIN_BACK_BUFFER&&d-c<=MIN_BACK_BUFFER){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${s.byteLength}, audio buffer: ${timeRangesToArray(a).join(", ")}, video buffer: ${timeRangesToArray(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:s}));const m=this.currentTime_()-MIN_BACK_BUFFER;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${m}`),this.remove(0,m,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${MIN_BACK_BUFFER}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window$1.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},MIN_BACK_BUFFER*1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:s},i){if(i){if(i.code===QUOTA_EXCEEDED_ERR){this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:s});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${n} append of ${s.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:videojs.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:i,bytes:a}){if(!a){const l=[i];let u=i.byteLength;s&&(l.unshift(s),u+=s.byteLength),a=concatSegments({bytes:u,segments:l})}const o={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:a}))}handleSegmentTimingInfo_(e,n,s){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,a=`${e}TimingInfo`;i[a]||(i[a]={}),i[a].transmuxerPrependedSeconds=s.prependedContentDuration||0,i[a].transmuxedPresentationStart=s.start.presentation,i[a].transmuxedDecodeStart=s.start.decode,i[a].transmuxedPresentationEnd=s.end.presentation,i[a].transmuxedDecodeEnd=s.end.decode,i[a].baseMediaDecodeTime=s.baseMediaDecodeTime}appendData_(e,n){const{type:s,data:i}=n;if(!i||!i.byteLength||s==="audio"&&this.audioDisabled_)return;const a=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:a,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){checkAndFixTimelines(this),this.loadQueue_.push(()=>{const n=_extends({},e,{forceTimestampOffset:!0});_extends(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),s=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=this.mediaIndex!==null,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=s||i&&a;this.logger_(`Requesting
${compactSegmentUrlDescription(e.uri)}
${segmentInfoString(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=mediaSegmentRequest({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:l,level:u,stream:c})=>{this.logger_(`${segmentInfoString(e)} logged from transmuxer stream ${c} as a ${u}: ${l}`)},triggerSegmentEventFn:({type:l,segment:u,keyInfo:c,trackInfo:d,timingInfo:p})=>{const g={segmentInfo:segmentInfoPayload({segment:u})};c&&(g.keyInfo=c),d&&(g.trackInfo=d),p&&(g.timingInfo=p),this.trigger({type:l,metadata:g})}})}trimBackBuffer_(e){const n=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,s=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,a=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:a},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===n.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),n.key){const u=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=u}return n.map&&(o.map=this.initSegmentForMap(n.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const s={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:s}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===REQUEST_ERRORS.ABORTED)return;if(this.pause(),e.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,n.stats),i.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=updateGopBuffer(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:s,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:a,useVideoTimingInfo:o,videoTimingInfo:l,audioTimingInfo:u}){if(typeof e<"u")return e;if(!o)return u.start;const c=n.segments[s-1];return s===0||!c||typeof c.start>"u"||c.end!==i+a?i:l.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:s,hasVideo:i,isMuxed:a}=n,o=this.loaderType_==="main"&&i,l=!this.audioDisabled_&&s&&!a;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,l&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),l&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=illegalMediaSwitch(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:s}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s.start:s.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),i=this.loaderType_==="main"&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end=typeof i.end=="number"?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const u={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:u})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=getTroublesomeSegmentDurationMessage(e,this.sourceType_);if(n&&(n.severity==="warn"?videojs.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${segmentInfoString(e)}`);return}this.logger_(`Appended ${segmentInfoString(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const s=e.segment,i=e.part,a=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,o=i&&i.end&&this.currentTime_()-i.end>e.playlist.partTargetDuration*3;if(a||o){this.logger_(`bad ${a?"segment":"part"} ${segmentInfoString(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(i-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,s=n.start,i=n.end;if(!finite(s)||!finite(i))return;removeCuesFromTrack(s,i,this.segmentMetadataTrack_);const a=window$1.WebKitDataCue||window$1.VTTCue,o={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:i},l=JSON.stringify(o),u=new a(s,i,l);u.value=o,this.segmentMetadataTrack_.addCue(u)}}function noop$1(){}const toTitleCase=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},bufferTypes=["video","audio"],updating=(t,e)=>{const n=e[`${t}Buffer`];return n&&n.updating||e.queuePending[t]},nextQueueIndexOfType=(t,e)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.type==="mediaSource")return null;if(s.type===t)return n}return null},shiftQueue=(t,e)=>{if(e.queue.length===0)return;let n=0,s=e.queue[n];if(s.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),s.action(e),s.doneFn&&s.doneFn(),shiftQueue("audio",e),shiftQueue("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||updating(t,e))){if(s.type!==t){if(n=nextQueueIndexOfType(t,e.queue),n===null)return;s=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[t]=s,s.action(t,e),!s.doneFn){e.queuePending[t]=null,shiftQueue(t,e);return}}},cleanupBuffer=(t,e)=>{const n=e[`${t}Buffer`],s=toTitleCase(t);n&&(n.removeEventListener("updateend",e[`on${s}UpdateEnd_`]),n.removeEventListener("error",e[`on${s}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},inSourceBuffers=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,actions={appendBuffer:(t,e,n)=>(s,i)=>{const a=i[`${s}Buffer`];if(inSourceBuffers(i.mediaSource,a)){i.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${s}Buffer`);try{a.appendBuffer(t)}catch(o){i.logger_(`Error with code ${o.code} `+(o.code===QUOTA_EXCEEDED_ERR?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${s}Buffer`),i.queuePending[s]=null,n(o)}}},remove:(t,e)=>(n,s)=>{const i=s[`${n}Buffer`];if(inSourceBuffers(s.mediaSource,i)){s.logger_(`Removing ${t} to ${e} from ${n}Buffer`);try{i.remove(t,e)}catch{s.logger_(`Remove ${t} to ${e} from ${n}Buffer failed`)}}},timestampOffset:t=>(e,n)=>{const s=n[`${e}Buffer`];inSourceBuffers(n.mediaSource,s)&&(n.logger_(`Setting ${e}timestampOffset to ${t}`),s.timestampOffset=t)},callback:t=>(e,n)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(n){videojs.log.warn("Failed to call media source endOfStream",n)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(n){videojs.log.warn("Failed to set media source duration",n)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const n=e[`${t}Buffer`];if(inSourceBuffers(e.mediaSource,n)){e.logger_(`calling abort on ${t}Buffer`);try{n.abort()}catch(s){videojs.log.warn(`Failed to abort on ${t}Buffer`,s)}}},addSourceBuffer:(t,e)=>n=>{const s=toTitleCase(t),i=getMimeForCodec(e);n.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const a=n.mediaSource.addSourceBuffer(i);a.addEventListener("updateend",n[`on${s}UpdateEnd_`]),a.addEventListener("error",n[`on${s}Error_`]),n.codecs[t]=e,n[`${t}Buffer`]=a},removeSourceBuffer:t=>e=>{const n=e[`${t}Buffer`];if(cleanupBuffer(t,e),!!inSourceBuffers(e.mediaSource,n)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(s){videojs.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,s)}}},changeType:t=>(e,n)=>{const s=n[`${e}Buffer`],i=getMimeForCodec(t);if(!inSourceBuffers(n.mediaSource,s))return;const a=t.substring(0,t.indexOf(".")),o=n.codecs[e];if(o.substring(0,o.indexOf("."))===a)return;const u={codecsChangeInfo:{from:o,to:t}};n.trigger({type:"codecschange",metadata:u}),n.logger_(`changing ${e}Buffer codec from ${o} to ${t}`);try{s.changeType(i),n.codecs[e]=t}catch(c){u.errorType=videojs.Error.StreamingCodecsChangeError,u.error=c,c.metadata=u,n.error_=c,n.trigger("error"),videojs.log.warn(`Failed to changeType on ${e}Buffer`,c)}}},pushQueue=({type:t,sourceUpdater:e,action:n,doneFn:s,name:i})=>{e.queue.push({type:t,action:n,doneFn:s,name:i}),shiftQueue(t,e)},onUpdateend=(t,e)=>n=>{const s=e[`${t}Buffered`](),i=bufferedRangesToString(s);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,i),e.queuePending[t]){const a=e.queuePending[t].doneFn;e.queuePending[t]=null,a&&a(e[`${t}Error_`])}shiftQueue(t,e)};class SourceUpdater extends videojs.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>shiftQueue("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=logger("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=onUpdateend("video",this),this.onAudioUpdateEnd_=onUpdateend("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){pushQueue({type:e,sourceUpdater:this,action:actions.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){videojs.log.error("removeSourceBuffer is not supported!");return}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!videojs.browser.IS_FIREFOX&&window$1.MediaSource&&window$1.MediaSource.prototype&&typeof window$1.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return window$1.SourceBuffer&&window$1.SourceBuffer.prototype&&typeof window$1.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){if(!this.canChangeType()){videojs.log.error("changeType is not supported!");return}pushQueue({type:e,sourceUpdater:this,action:actions.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const s=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,s);this.canChangeType()&&this.changeType(n,s)})}appendBuffer(e,n){const{segmentInfo:s,type:i,bytes:a}=e;if(this.processedAppend_=!0,i==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_(`delayed audio append of ${a.length} until video append`);return}const o=n;if(pushQueue({type:i,sourceUpdater:this,action:actions.appendBuffer(a,s||{mediaIndex:-1},o),doneFn:n,name:"appendBuffer"}),i==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const l=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(u=>{this.appendBuffer.apply(this,u)})}}audioBuffered(){return inSourceBuffers(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:createTimeRanges()}videoBuffered(){return inSourceBuffers(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:createTimeRanges()}buffered(){const e=inSourceBuffers(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=inSourceBuffers(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():bufferIntersection(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=noop$1){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=noop$1){typeof e!="string"&&(e=void 0),pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,s=noop$1){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}pushQueue({type:"audio",sourceUpdater:this,action:actions.remove(e,n),doneFn:s,name:"remove"})}removeVideo(e,n,s=noop$1){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}pushQueue({type:"video",sourceUpdater:this,action:actions.remove(e,n),doneFn:s,name:"remove"})}updating(){return!!(updating("audio",this)||updating("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(pushQueue({type:"audio",sourceUpdater:this,action:actions.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(pushQueue({type:"video",sourceUpdater:this,action:actions.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&pushQueue({type:"audio",sourceUpdater:this,action:actions.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&pushQueue({type:"video",sourceUpdater:this,action:actions.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),bufferTypes.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>cleanupBuffer(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const uint8ToUtf8=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),bufferToHexString=t=>{const e=new Uint8Array(t);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")},VTT_LINE_TERMINATORS=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class NoVttJsError extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class VTTSegmentLoader extends SegmentLoader{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return createTimeRanges();const e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return createTimeRanges([[n,s]])}initSegmentForMap(e,n=!1){if(!e)return null;const s=initSegmentId(e);let i=this.initSegments_[s];if(n&&!i&&e.bytes){const a=VTT_LINE_TERMINATORS.byteLength+e.bytes.byteLength,o=new Uint8Array(a);o.set(e.bytes),o.set(VTT_LINE_TERMINATORS,e.bytes.byteLength),this.initSegments_[s]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,n){removeCuesFromTrack(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,s){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===REQUEST_ERRORS.TIMEOUT&&this.handleTimeout_(),e.code===REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const i=this.pendingSegment_,a=s.mp4VttCues&&s.mp4VttCues.length;a&&(i.mp4VttCues=s.mp4VttCues),this.saveBandwidthRelatedStats_(i.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const o=i.segment;if(o.map&&(o.map.bytes=n.map.bytes),i.bytes=n.bytes,typeof window$1.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,s),()=>this.stopForError({message:"Error loading vtt.js"}));return}o.requested=!0;try{this.parseVTTCues_(i)}catch(l){this.stopForError({message:l.message,metadata:{errorType:videojs.Error.StreamingVttParserError,error:l}});return}if(a||this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,i.cues.forEach(l=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window$1.VTTCue(l.startTime,l.endTime,l.text):l)}),removeDuplicateCuesFromTrack(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,n){const s=e&&e.type==="vtt",i=n&&n.type==="text";s&&i&&super.handleData_(e,n)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(s=>{const i=s.start+n,a=s.end+n,o=new window$1.VTTCue(i,a,s.cueText);s.settings&&s.settings.split(" ").forEach(l=>{const u=l.split(":"),c=u[0],d=u[1];o[c]=isNaN(d)?d:Number(d)}),e.cues.push(o)})}parseVTTCues_(e){let n,s=!1;if(typeof window$1.WebVTT!="function")throw new NoVttJsError;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof window$1.TextDecoder=="function"?n=new window$1.TextDecoder("utf8"):(n=window$1.WebVTT.StringDecoder(),s=!0);const i=new window$1.WebVTT.Parser(window$1,window$1.vttjs,n);if(i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=o=>{e.timestampmap=o},i.onparsingerror=o=>{videojs.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;s&&(o=uint8ToUtf8(o)),i.parse(o)}let a=e.bytes;s&&(a=uint8ToUtf8(a)),i.parse(a),i.flush()}updateTimeMapping_(e,n,s){const i=e.segment;if(!n)return;if(!e.cues.length){i.empty=!0;return}const{MPEGTS:a,LOCAL:o}=e.timestampmap,u=a/clockExports.ONE_SECOND_IN_TS-o+n.mapping;if(e.cues.forEach(c=>{const d=c.endTime-c.startTime,p=this.handleRollover_(c.startTime+u,n.time);c.startTime=Math.max(p,0),c.endTime=Math.max(p+d,0)}),!s.syncInfo){const c=e.cues[0].startTime,d=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(c,d-i.duration)}}}handleRollover_(e,n){if(n===null)return e;let s=e*clockExports.ONE_SECOND_IN_TS;const i=n*clockExports.ONE_SECOND_IN_TS;let a;for(i<s?a=-8589934592:a=8589934592;Math.abs(s-i)>4294967296;)s+=a;return s/clockExports.ONE_SECOND_IN_TS}}const findAdCue=function(t,e){const n=t.cues;for(let s=0;s<n.length;s++){const i=n[s];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},updateAdCues=function(t,e,n=0){if(!t.segments)return;let s=n,i;for(let a=0;a<t.segments.length;a++){const o=t.segments[a];if(i||(i=findAdCue(e,s+o.duration/2)),i){if("cueIn"in o){i.endTime=s,i.adEndTime=s,s+=o.duration,i=null;continue}if(s<i.endTime){s+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&(i=new window$1.VTTCue(s,s+o.duration,o.cueOut),i.adStartTime=s,i.adEndTime=s+parseFloat(o.cueOut),e.addCue(i)),"cueOutCont"in o){const[l,u]=o.cueOutCont.split("/").map(parseFloat);i=new window$1.VTTCue(s,s+o.duration,""),i.adStartTime=s-l,i.adEndTime=i.adStartTime+u,e.addCue(i)}s+=o.duration}};class SyncInfo{constructor({start:e,end:n,segmentIndex:s,partIndex:i=null,appended:a=!1}){this.start_=e,this.end_=n,this.segmentIndex_=s,this.partIndex_=i,this.appended_=a}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class SyncInfoData{constructor(e,n=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class MediaSequenceSync{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,n){const{mediaSequence:s,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(s,i),!!this.isReliable_)return this.updateStorage_(i,s,this.calculateBaseTime_(s,i,n))}getSyncInfoForTime(e){for(const{segmentSyncInfo:n,partsSyncInfo:s}of this.storage_.values())if(s.length){for(const i of s)if(i.isInRange(e))return i}else if(n.isInRange(e))return n;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,n,s){const i=new Map;let a=`
`,o=s,l=n;this.start_=o,e.forEach((u,c)=>{const d=this.storage_.get(l),p=o,m=p+u.duration,g=!!(d&&d.segmentSyncInfo&&d.segmentSyncInfo.isAppended),E=new SyncInfo({start:p,end:m,appended:g,segmentIndex:c});u.syncInfo=E;let x=o;const b=(u.parts||[]).map((S,C)=>{const T=x,I=x+S.duration,D=!!(d&&d.partsSyncInfo&&d.partsSyncInfo[C]&&d.partsSyncInfo[C].isAppended),P=new SyncInfo({start:T,end:I,appended:D,segmentIndex:c,partIndex:C});return x=I,a+=`Media Sequence: ${l}.${C} | Range: ${T} --> ${I} | Appended: ${D}
`,S.syncInfo=P,P});i.set(l,new SyncInfoData(E,b)),a+=`${compactSegmentUrlDescription(u.resolvedUri)} | Media Sequence: ${l} | Range: ${p} --> ${m} | Appended: ${g}
`,l++,o=m}),this.end_=o,this.storage_=i,this.diagnostics_=a}calculateBaseTime_(e,n,s){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const i=Math.min(...this.storage_.keys());if(e<i){const a=i-e;let o=this.storage_.get(i).segmentSyncInfo.start;for(let l=0;l<a;l++){const u=n[l];o-=u.duration}return o}return s}isReliablePlaylist_(e,n){return e!=null&&Array.isArray(n)&&n.length}}class DependantMediaSequenceSync extends MediaSequenceSync{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,n,s){if(!this.storage_.size){const i=this.parent_.getSyncInfoForMediaSequence(e);return i?i.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,n,s)}}const MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC=86400,syncPointStrategies=[{name:"VOD",run:(t,e,n,s,i)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,n,s,i,a)=>{const o=t.getMediaSequenceSync(a);if(!o||!o.isReliable)return null;const l=o.getSyncInfoForTime(i);return l?{time:l.start,partIndex:l.partIndex,segmentIndex:l.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,n,s,i)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let a=null,o=null;const l=getPartsAndSegments(e);i=i||0;for(let u=0;u<l.length;u++){const c=e.endList||i===0?u:l.length-(u+1),d=l[c],p=d.segment,m=t.timelineToDatetimeMappings[p.timeline];if(!m||!p.dateTimeObject)continue;let E=p.dateTimeObject.getTime()/1e3+m;if(p.parts&&typeof d.partIndex=="number")for(let b=0;b<d.partIndex;b++)E+=p.parts[b].duration;const x=Math.abs(i-E);if(o!==null&&(x===0||o<x))break;o=x,a={time:E,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return a}},{name:"Segment",run:(t,e,n,s,i)=>{let a=null,o=null;i=i||0;const l=getPartsAndSegments(e);for(let u=0;u<l.length;u++){const c=e.endList||i===0?u:l.length-(u+1),d=l[c],p=d.segment,m=d.part&&d.part.start||p&&p.start;if(p.timeline===s&&typeof m<"u"){const g=Math.abs(i-m);if(o!==null&&o<g)break;(!a||o===null||o>=g)&&(o=g,a={time:m,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return a}},{name:"Discontinuity",run:(t,e,n,s,i)=>{let a=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let l=0;l<e.discontinuityStarts.length;l++){const u=e.discontinuityStarts[l],c=e.discontinuitySequence+l+1,d=t.discontinuities[c];if(d){const p=Math.abs(i-d.time);if(o!==null&&o<p)break;(!a||o===null||o>=p)&&(o=p,a={time:d.time,segmentIndex:u,partIndex:null})}}}return a}},{name:"Playlist",run:(t,e,n,s,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class SyncController extends videojs.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new MediaSequenceSync,s=new DependantMediaSequenceSync(n),i=new DependantMediaSequenceSync(n);this.mediaSequenceStorage_={main:n,audio:s,vtt:i},this.logger_=logger("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,n,s,i,a){if(n!==1/0)return syncPointStrategies.find(({name:u})=>u==="VOD").run(this,e,n);const o=this.runStrategies_(e,n,s,i,a);if(!o.length)return null;for(const l of o){const{syncPoint:u,strategy:c}=l,{segmentIndex:d,time:p}=u;if(d<0)continue;const m=e.segments[d],g=p,E=g+m.duration;if(this.logger_(`Strategy: ${c}. Current time: ${i}. selected segment: ${d}. Time: [${g} -> ${E}]}`),i>=g&&i<E)return this.logger_("Found sync point with exact match: ",u),u}return this.selectSyncPoint_(o,{key:"time",value:i})}getExpiredTime(e,n){if(!e||!e.segments)return null;const s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;const i=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+sumDurations({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,n,s,i,a){const o=[];for(let l=0;l<syncPointStrategies.length;l++){const u=syncPointStrategies[l],c=u.run(this,e,n,s,i,a);c&&(c.strategy=u.name,o.push({strategy:u.name,syncPoint:c}))}return o}selectSyncPoint_(e,n){let s=e[0].syncPoint,i=Math.abs(e[0].syncPoint[n.key]-n.value),a=e[0].strategy;for(let o=1;o<e.length;o++){const l=Math.abs(e[o].syncPoint[n.key]-n.value);l<i&&(i=l,s=e[o].syncPoint,a=e[o].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${a}]: [time:${s.time}, segmentIndex:${s.segmentIndex}`+(typeof s.partIndex=="number"?`,partIndex:${s.partIndex}`:"")+"]"),s}saveExpiredSegmentInfo(e,n){const s=n.mediaSequence-e.mediaSequence;if(s>MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC){videojs.log.warn(`Not saving expired segment info. Media sequence gap ${s} is too large.`);return}for(let i=s-1;i>=0;i--){const a=e.segments[i];if(a&&typeof a.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+i,time:a.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const s=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),i=e.segment;s&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const a=i.dateTimeObject;i.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[i.timeline]=-(a.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,s){const i=e.segment,a=e.part;let o=this.timelines[e.timeline],l,u;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),l=e.startOfSegment,u=n.end+o.mapping;else if(o)l=n.start+o.mapping,u=n.end+o.mapping;else return!1;return a&&(a.start=l,a.end=u),(!i.start||l<i.start)&&(i.start=l),i.end=u,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let i=0;i<n.discontinuityStarts.length;i++){const a=n.discontinuityStarts[i],o=n.discontinuitySequence+i+1,l=a-e.mediaIndex,u=Math.abs(l);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>u){let c;l<0?c=s.start-sumDurations({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:a}):c=s.end+sumDurations({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[o]={time:c,accuracy:u}}}}dispose(){this.trigger("dispose"),this.off()}}class TimelineChangeController extends videojs.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:s}){return typeof n=="number"&&typeof s=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:s},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:s}){if(typeof n=="number"&&typeof s=="number"){this.lastTimelineChanges_[e]={type:e,from:n,to:s},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:n,to:s}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const workerCode=transform(getWorkerString(function(){var t=function(){function x(){this.listeners={}}var b=x.prototype;return b.on=function(C,T){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push(T)},b.off=function(C,T){if(!this.listeners[C])return!1;var I=this.listeners[C].indexOf(T);return this.listeners[C]=this.listeners[C].slice(0),this.listeners[C].splice(I,1),I>-1},b.trigger=function(C){var T=this.listeners[C];if(T)if(arguments.length===2)for(var I=T.length,D=0;D<I;++D)T[D].call(this,arguments[1]);else for(var P=Array.prototype.slice.call(arguments,1),O=T.length,B=0;B<O;++B)T[B].apply(this,P)},b.dispose=function(){this.listeners={}},b.pipe=function(C){this.on("data",function(T){C.push(T)})},x}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(x){return x.subarray(0,x.byteLength-x[x.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const n=function(){const x=[[[],[],[],[],[]],[[],[],[],[],[]]],b=x[0],S=x[1],C=b[4],T=S[4];let I,D,P;const O=[],B=[];let F,H,Q,Z,ne,re;for(I=0;I<256;I++)B[(O[I]=I<<1^(I>>7)*283)^I]=I;for(D=P=0;!C[D];D^=F||1,P=B[P]||1)for(Z=P^P<<1^P<<2^P<<3^P<<4,Z=Z>>8^Z&255^99,C[D]=Z,T[Z]=D,Q=O[H=O[F=O[D]]],re=Q*16843009^H*65537^F*257^D*16843008,ne=O[Z]*257^Z*16843008,I=0;I<4;I++)b[I][D]=ne=ne<<24^ne>>>8,S[I][Z]=re=re<<24^re>>>8;for(I=0;I<5;I++)b[I]=b[I].slice(0),S[I]=S[I].slice(0);return x};let s=null;class i{constructor(b){s||(s=n()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];let S,C,T;const I=this._tables[0][4],D=this._tables[1],P=b.length;let O=1;if(P!==4&&P!==6&&P!==8)throw new Error("Invalid aes key size");const B=b.slice(0),F=[];for(this._key=[B,F],S=P;S<4*P+28;S++)T=B[S-1],(S%P===0||P===8&&S%P===4)&&(T=I[T>>>24]<<24^I[T>>16&255]<<16^I[T>>8&255]<<8^I[T&255],S%P===0&&(T=T<<8^T>>>24^O<<24,O=O<<1^(O>>7)*283)),B[S]=B[S-P]^T;for(C=0;S;C++,S--)T=B[C&3?S:S-4],S<=4||C<4?F[C]=T:F[C]=D[0][I[T>>>24]]^D[1][I[T>>16&255]]^D[2][I[T>>8&255]]^D[3][I[T&255]]}decrypt(b,S,C,T,I,D){const P=this._key[1];let O=b^P[0],B=T^P[1],F=C^P[2],H=S^P[3],Q,Z,ne;const re=P.length/4-2;let se,G=4;const K=this._tables[1],M=K[0],W=K[1],ee=K[2],z=K[3],ae=K[4];for(se=0;se<re;se++)Q=M[O>>>24]^W[B>>16&255]^ee[F>>8&255]^z[H&255]^P[G],Z=M[B>>>24]^W[F>>16&255]^ee[H>>8&255]^z[O&255]^P[G+1],ne=M[F>>>24]^W[H>>16&255]^ee[O>>8&255]^z[B&255]^P[G+2],H=M[H>>>24]^W[O>>16&255]^ee[B>>8&255]^z[F&255]^P[G+3],G+=4,O=Q,B=Z,F=ne;for(se=0;se<4;se++)I[(3&-se)+D]=ae[O>>>24]<<24^ae[B>>16&255]<<16^ae[F>>8&255]<<8^ae[H&255]^P[G++],Q=O,O=B,B=F,F=H,H=Q}}class a extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(b){this.jobs.push(b),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(x){return x<<24|(x&65280)<<8|(x&16711680)>>8|x>>>24},l=function(x,b,S){const C=new Int32Array(x.buffer,x.byteOffset,x.byteLength>>2),T=new i(Array.prototype.slice.call(b)),I=new Uint8Array(x.byteLength),D=new Int32Array(I.buffer);let P,O,B,F,H,Q,Z,ne,re;for(P=S[0],O=S[1],B=S[2],F=S[3],re=0;re<C.length;re+=4)H=o(C[re]),Q=o(C[re+1]),Z=o(C[re+2]),ne=o(C[re+3]),T.decrypt(H,Q,Z,ne,D,re),D[re]=o(D[re]^P),D[re+1]=o(D[re+1]^O),D[re+2]=o(D[re+2]^B),D[re+3]=o(D[re+3]^F),P=H,O=Q,B=Z,F=ne;return I};class u{constructor(b,S,C,T){const I=u.STEP,D=new Int32Array(b.buffer),P=new Uint8Array(b.byteLength);let O=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(D.subarray(O,O+I),S,C,P)),O=I;O<D.length;O+=I)C=new Uint32Array([o(D[O-4]),o(D[O-3]),o(D[O-2]),o(D[O-1])]),this.asyncStream_.push(this.decryptChunk_(D.subarray(O,O+I),S,C,P));this.asyncStream_.push(function(){T(null,e(P))})}static get STEP(){return 32e3}decryptChunk_(b,S,C,T){return function(){const I=l(b,S,C);T.set(I,b.byteOffset)}}}var c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof c<"u"?d=c:typeof self<"u"?d=self:d={};var p=d,m=function(b){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(b):b&&b.buffer instanceof ArrayBuffer},g=p.BigInt||Number;g("0x1"),g("0x100"),g("0x10000"),g("0x1000000"),g("0x100000000"),g("0x10000000000"),g("0x1000000000000"),g("0x100000000000000"),g("0x10000000000000000"),function(){var x=new Uint16Array([65484]),b=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);return b[0]===255?"big":b[0]===204?"little":"unknown"}();const E=function(x){const b={};return Object.keys(x).forEach(S=>{const C=x[S];m(C)?b[S]={bytes:C.buffer,byteOffset:C.byteOffset,byteLength:C.byteLength}:b[S]=C}),b};self.onmessage=function(x){const b=x.data,S=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),C=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),T=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new u(S,C,T,function(I,D){self.postMessage(E({source:b.source,decrypted:D}),[D.buffer])})}}));var Decrypter=factory(workerCode);const audioTrackKind_=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},stopLoaders=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},startLoaders=(t,e)=>{e.activePlaylistLoader=t,t.load()},onGroupChanged=(t,e)=>()=>{const{segmentLoaders:{[t]:n,main:s},mediaTypes:{[t]:i}}=e,a=i.activeTrack(),o=i.getActiveGroup(),l=i.activePlaylistLoader,u=i.lastGroup_;if(!(o&&u&&o.id===u.id)&&(i.lastGroup_=o,i.lastTrack_=a,stopLoaders(n,i),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){l&&s.resetEverything();return}n.resyncLoader(),startLoaders(o.playlistLoader,i)}},onGroupChanging=(t,e)=>()=>{const{segmentLoaders:{[t]:n},mediaTypes:{[t]:s}}=e;s.lastGroup_=null,n.abort(),n.pause()},onTrackChanged=(t,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[t]:s,main:i},mediaTypes:{[t]:a}}=e,o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastTrack_;if(!(c&&o&&c.id===o.id)&&(a.lastGroup_=l,a.lastTrack_=o,stopLoaders(s,a),!!l)){if(l.isMainPlaylist){if(!o||!c||o.id===c.id)return;const d=e.vhs.playlistController_,p=d.selectPlaylist();if(d.media()===p)return;a.logger_(`track change. Switching main audio from ${c.id} to ${o.id}`),n.pause(),i.resetEverything(),d.fastQualityChange_(p);return}if(t==="AUDIO"){if(!l.playlistLoader){i.setAudio(!0),i.resetEverything();return}s.setAudio(!0),i.setAudio(!1)}if(u===l.playlistLoader){startLoaders(l.playlistLoader,a);return}s.track&&s.track(o),s.resetEverything(),startLoaders(l.playlistLoader,a)}},onError={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:n},excludePlaylist:s}=e,i=n.activeTrack(),a=n.activeGroup(),o=(a.filter(u=>u.default)[0]||a[0]).id,l=n.tracks[o];if(i===l){s({error:{message:"Problem encountered loading the default audio track."}});return}videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const u in n.tracks)n.tracks[u].enabled=n.tracks[u]===l;n.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:n}}=e;videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const s=n.activeTrack();s&&(s.mode="disabled"),n.onTrackChanged()}},setupListeners={AUDIO:(t,e,n)=>{if(!e)return;const{tech:s,requestOptions:i,segmentLoaders:{[t]:a}}=n;e.on("loadedmetadata",()=>{const o=e.media();a.playlist(o,i),(!s.paused()||o.endList&&s.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),i),s.paused()||a.load()}),e.on("error",onError[t](t,n))},SUBTITLES:(t,e,n)=>{const{tech:s,requestOptions:i,segmentLoaders:{[t]:a},mediaTypes:{[t]:o}}=n;e.on("loadedmetadata",()=>{const l=e.media();a.playlist(l,i),a.track(o.activeTrack()),(!s.paused()||l.endList&&s.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),i),s.paused()||a.load()}),e.on("error",onError[t](t,n))}},initialize={AUDIO:(t,e)=>{const{vhs:n,sourceType:s,segmentLoaders:{[t]:i},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[t]:{groups:l,tracks:u,logger_:c}},mainPlaylistLoader:d}=e,p=isAudioOnly(d.main);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},p&&(o[t].main.default.playlists=d.main.playlists));for(const m in o[t]){l[m]||(l[m]=[]);for(const g in o[t][m]){let E=o[t][m][g],x;if(p?(c(`AUDIO group '${m}' label '${g}' is a main playlist`),E.isMainPlaylist=!0,x=null):s==="vhs-json"&&E.playlists?x=new PlaylistLoader(E.playlists[0],n,a):E.resolvedUri?x=new PlaylistLoader(E.resolvedUri,n,a):E.playlists&&s==="dash"?x=new DashPlaylistLoader(E.playlists[0],n,a,d):x=null,E=merge({id:g,playlistLoader:x},E),setupListeners[t](t,E.playlistLoader,e),l[m].push(E),typeof u[g]>"u"){const b=new videojs.AudioTrack({id:g,kind:audioTrackKind_(E),enabled:!1,language:E.language,default:E.default,label:g});u[g]=b}}}i.on("error",onError[t](t,e))},SUBTITLES:(t,e)=>{const{tech:n,vhs:s,sourceType:i,segmentLoaders:{[t]:a},requestOptions:o,main:{mediaGroups:l},mediaTypes:{[t]:{groups:u,tracks:c}},mainPlaylistLoader:d}=e;for(const p in l[t]){u[p]||(u[p]=[]);for(const m in l[t][p]){if(!s.options_.useForcedSubtitles&&l[t][p][m].forced)continue;let g=l[t][p][m],E;if(i==="hls")E=new PlaylistLoader(g.resolvedUri,s,o);else if(i==="dash"){if(!g.playlists.filter(b=>b.excludeUntil!==1/0).length)return;E=new DashPlaylistLoader(g.playlists[0],s,o,d)}else i==="vhs-json"&&(E=new PlaylistLoader(g.playlists?g.playlists[0]:g.resolvedUri,s,o));if(g=merge({id:m,playlistLoader:E},g),setupListeners[t](t,g.playlistLoader,e),u[p].push(g),typeof c[m]>"u"){const x=n.addRemoteTextTrack({id:m,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:m},!1).track;c[m]=x}}}a.on("error",onError[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:n,main:{mediaGroups:s},mediaTypes:{[t]:{groups:i,tracks:a}}}=e;for(const o in s[t]){i[o]||(i[o]=[]);for(const l in s[t][o]){const u=s[t][o][l];if(!/^(?:CC|SERVICE)/.test(u.instreamId))continue;const c=n.options_.vhs&&n.options_.vhs.captionServices||{};let d={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(c[d.instreamId]&&(d=merge(d,c[d.instreamId])),d.default===void 0&&delete d.default,i[o].push(merge({id:l},u)),typeof a[l]>"u"){const p=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;a[l]=p}}}}},groupMatch=(t,e)=>{for(let n=0;n<t.length;n++)if(playlistMatch(e,t[n])||t[n].playlists&&groupMatch(t[n].playlists,e))return!0;return!1},activeGroup=(t,e)=>n=>{const{mainPlaylistLoader:s,mediaTypes:{[t]:{groups:i}}}=e,a=s.media();if(!a)return null;let o=null;a.attributes[t]&&(o=i[a.attributes[t]]);const l=Object.keys(i);if(!o)if(t==="AUDIO"&&l.length>1&&isAudioOnly(e.main))for(let u=0;u<l.length;u++){const c=i[l[u]];if(groupMatch(c,a)){o=c;break}}else i.main?o=i.main:l.length===1&&(o=i[l[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(u=>u.id===n.id)[0]||null},activeTrack={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const s in n)if(n[s].enabled)return n[s];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const s in n)if(n[s].mode==="showing"||n[s].mode==="hidden")return n[s];return null}},getActiveGroup=(t,{mediaTypes:e})=>()=>{const n=e[t].activeTrack();return n?e[t].activeGroup(n):null},setupMediaGroups=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(c=>{initialize[c](c,t)});const{mediaTypes:e,mainPlaylistLoader:n,tech:s,vhs:i,segmentLoaders:{["AUDIO"]:a,main:o}}=t;["AUDIO","SUBTITLES"].forEach(c=>{e[c].activeGroup=activeGroup(c,t),e[c].activeTrack=activeTrack[c](c,t),e[c].onGroupChanged=onGroupChanged(c,t),e[c].onGroupChanging=onGroupChanging(c,t),e[c].onTrackChanged=onTrackChanged(c,t),e[c].getActiveGroup=getActiveGroup(c,t)});const l=e.AUDIO.activeGroup();if(l){const c=(l.filter(p=>p.default)[0]||l[0]).id;e.AUDIO.tracks[c].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),a.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(c=>e[c].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(c=>e[c].onGroupChanging())});const u=()=>{e.AUDIO.onTrackChanged(),s.trigger({type:"usage",name:"vhs-audio-change"})};s.audioTracks().addEventListener("change",u),s.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{s.audioTracks().removeEventListener("change",u),s.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),s.clearTracks("audio");for(const c in e.AUDIO.tracks)s.audioTracks().addTrack(e.AUDIO.tracks[c])},createMediaTypes=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop$1,activeTrack:noop$1,getActiveGroup:noop$1,onGroupChanged:noop$1,onTrackChanged:noop$1,lastTrack_:null,logger_:logger(`MediaGroups[${e}]`)}}),t};class SteeringManifest{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=resolveUrl(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class ContentSteeringController extends videojs.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=logger("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const s=n.serverUri||n.serverURL;if(!s){this.logger_(`steering manifest URL is ${s}, cannot request steering manifest.`),this.trigger("error");return}if(s.startsWith("data:")){this.decodeDataUriManifest_(s.substring(s.indexOf(",")+1));return}this.steeringManifest.reloadUri=resolveUrl(e,s),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!n)return;const s=e?n:this.getRequestURI(n);if(!s){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const i={contentSteeringInfo:{uri:s}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:s,requestType:"content-steering-manifest"},(a,o)=>{if(a){if(o.status===410){this.logger_(`manifest request 410 ${a}.`),this.logger_(`There will be no more content steering requests to ${s} this session.`),this.excludedSteeringManifestURLs.add(s);return}if(o.status===429){const c=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${a}.`),this.logger_(`content steering will retry in ${c} seconds.`),this.startTTLTimeout_(parseInt(c,10));return}this.logger_(`manifest failed to load ${a}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:i});let l;try{l=JSON.parse(this.request_.responseText)}catch(c){const d={errorType:videojs.Error.StreamingContentSteeringParserError,error:c};this.trigger({type:"error",metadata:d})}this.assignSteeringProperties_(l);const u={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:u}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const n=new window$1.URL(e),s=new window$1.URL(this.proxyServerUrl_);return s.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(s.toString())}decodeDataUriManifest_(e){const n=JSON.parse(window$1.atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new window$1.URL(e),s=this.getPathway(),i=this.getBandwidth_();if(s){const a=`_${this.manifestType_}_pathway`;n.searchParams.set(a,s)}if(i){const a=`_${this.manifestType_}_throughput`;n.searchParams.set(a,i)}return n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const s=(i=>{for(const a of i)if(this.availablePathways_.has(a))return a;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==s&&(this.currentPathway=s,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!n(i))return i}const s=this.setSteeringParams_(e);return n(s)?null:s}startTTLTimeout_(e=this.steeringManifest.ttl){const n=e*1e3;this.ttlTimeout_=window$1.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){window$1.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,n){return!n&&this.steeringManifest.reloadUri||n&&(resolveUrl(e,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const ABORT_EARLY_EXCLUSION_SECONDS=10;let Vhs$1;const loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sumLoaderStat=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},shouldSwitchToMedia=function({currentPlaylist:t,buffered:e,currentTime:n,nextPlaylist:s,bufferLowWaterLine:i,bufferHighWaterLine:a,duration:o,bufferBasedABR:l,log:u}){if(!s)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;const c=`allowing switch ${t&&t.id||"null"} -> ${s.id}`;if(!t)return u(`${c} as current playlist is not set`),!0;if(s.id===t.id)return!1;const d=!!findRange(e,n).length;if(!t.endList)return!d&&typeof t.partTargetDuration=="number"?(u(`not ${c} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(u(`${c} as current playlist is live`),!0);const p=timeAheadOf(e,n),m=l?Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Config.MAX_BUFFER_LOW_WATER_LINE;if(o<m)return u(`${c} as duration < max low water line (${o} < ${m})`),!0;const g=s.attributes.BANDWIDTH,E=t.attributes.BANDWIDTH;if(g<E&&(!l||p<a)){let x=`${c} as next bandwidth < current bandwidth (${g} < ${E})`;return l&&(x+=` and forwardBuffer < bufferHighWaterLine (${p} < ${a})`),u(x),!0}if((!l||g>E)&&p>=i){let x=`${c} as forwardBuffer >= bufferLowWaterLine (${p} >= ${i})`;return l&&(x+=` and next bandwidth > current bandwidth (${g} > ${E})`),u(x),!0}return u(`not ${c} as no switching criteria met`),!1};class PlaylistController extends videojs.EventTarget{constructor(e){super();const{src:n,withCredentials:s,tech:i,bandwidth:a,externVhs:o,useCueTags:l,playlistExclusionDuration:u,enableLowInitialPlaylist:c,sourceType:d,cacheEncryptionKeys:p,bufferBasedABR:m,leastPixelDiffSelector:g,captionServices:E,experimentalUseMMS:x}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:b}=e;(b===null||typeof b>"u")&&(b=1/0),Vhs$1=o,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!g,this.withCredentials=s,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=d,this.useCueTags_=l,this.playlistExclusionDuration=u,this.maxPlaylistRetries=b,this.enableLowInitialPlaylist=c,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:s,maxPlaylistRetries:b,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=createMediaTypes(),x&&window$1.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new window$1.ManagedMediaSource,videojs.log("Using ManagedMediaSource")):window$1.MediaSource&&(this.mediaSource=new window$1.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=createTimeRanges(),this.hasPlayed_=!1,this.syncController_=new SyncController(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Decrypter,this.sourceUpdater_=new SourceUpdater(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new TimelineChangeController,this.keyStatusMap_=new Map;const S={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:E,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:a,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:p,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new DashPlaylistLoader(n,this.vhs_,merge(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new PlaylistLoader(n,this.vhs_,merge(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new SegmentLoader(merge(S,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new SegmentLoader(merge(S,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new VTTSegmentLoader(merge(S,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((I,D)=>{function P(){i.off("vttjserror",O),I()}function O(){i.off("vttjsloaded",P),D()}i.one("vttjsloaded",P),i.one("vttjserror",O),i.addWebVttScript_()})}),e);const C=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new ContentSteeringController(this.vhs_.xhr,C),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),loaderStats.forEach(I=>{this[I+"_"]=sumLoaderStat.bind(this,I)}),this.logger_=logger("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const T=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(T,()=>{const I=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-I,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,s){const i=this.media(),a=i&&(i.id||i.uri),o=e&&(e.id||e.uri);if(a&&a!==o){this.logger_(`switch media ${a} -> ${o} from ${n}`);const l={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:l}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(e,s)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],s=n?n.activeGroup():null,i=this.contentSteeringController_.getPathway();if(s&&i){const o=(s.length?s[0].playlists:s.playlists).filter(l=>l.attributes.serviceLocation===i);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window$1.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window$1.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const s=e.mediaGroups.AUDIO,i=Object.keys(s);let a;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)a=this.mediaTypes_.AUDIO.activeTrack();else{const l=s.main||i.length&&s[i[0]];for(const u in l)if(l[u].default){a={label:u};break}}if(!a)return n;const o=[];for(const l in s)if(s[l][a.label]){const u=s[l][a.label];if(u.playlists&&u.playlists.length)o.push.apply(o,u.playlists);else if(u.uri)o.push(u);else if(e.playlists.length)for(let c=0;c<e.playlists.length;c++){const d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&o.push(d)}}return o.length?o:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),setupMediaGroups({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let s;if(this.enableLowInitialPlaylist&&(s=this.selectInitialPlaylist()),s||(s=this.selectPlaylist()),!s||!this.shouldSwitchToMedia_(s)||(this.initialMedia_=s,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,s=>{this.player_.trigger(_extends({},s))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const s=e.mediaGroups||{};let i=!0;const a=Object.keys(s.AUDIO);for(const o in s.AUDIO)for(const l in s.AUDIO[o])s.AUDIO[o][l].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(s.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Vhs$1.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),a.length&&Object.keys(s.AUDIO[a[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),i=this.bufferLowWaterLine(),a=this.bufferHighWaterLine(),o=this.tech_.buffered();return shouldSwitchToMedia({buffered:o,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:a,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const s=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:s.playlist,error:s})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const s=this.audioSegmentLoader_.pendingSegment_;if(!s||!s.segment||!s.segment.syncInfo)return;const i=s.segment.syncInfo.end+.01;this.tech_.setCurrentTime(i)}),this.mainSegmentLoader_.on("earlyabort",s=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:ABORT_EARLY_EXCLUSION_SECONDS}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const s=this.getCodecsOrExclude_();s&&this.sourceUpdater_.addOrChangeSourceBuffers(s)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(s=>{this.mainSegmentLoader_.on(s,i=>{this.player_.trigger(_extends({},i))}),this.audioSegmentLoader_.on(s,i=>{this.player_.trigger(_extends({},i))}),this.subtitleSegmentLoader_.on(s,i=>{this.player_.trigger(_extends({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const s=n.end(0);let i=s;if(e.start){const a=e.start.timeOffset;a<0?i=Math.max(s+a,n.start(0)):i=Math.min(s,a)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;const i=Vhs$1.Playlist.playlistEnd(e,s),a=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return i-a<=SAFE_TIME_DELTA;const l=o.end(o.length-1);return l-a<=SAFE_TIME_DELTA&&i-l<=SAFE_TIME_DELTA}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:s}){if(e=e||this.mainPlaylistLoader_.media(),s=s||n.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,a=i.filter(isEnabled),o=a.length===1&&a[0]===e;if(i.length===1&&s!==1/0)return videojs.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const E=this.pathwayAttribute_(e),x=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(E),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(E)},x);return}let g=!1;i.forEach(E=>{if(E===e)return;const x=E.excludeUntil;typeof x<"u"&&x!==1/0&&(g=!0,delete E.excludeUntil)}),g&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let l;e.playlistErrors_>this.maxPlaylistRetries?l=1/0:l=Date.now()+s*1e3,e.excludeUntil=l,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const u=this.selectPlaylist();if(!u){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const c=n.internal?this.logger_:videojs.log.warn,d=n.message?" "+n.message:"";c(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${d} Switching to playlist ${u.id}.`),u.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const p=u.targetDuration/2*1e3||5*1e3,m=typeof u.lastRequest=="number"&&Date.now()-u.lastRequest<=p;return this.switchMedia_(u,"exclude",o||m)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const s=[],i=e==="all";(i||e==="main")&&s.push(this.mainPlaylistLoader_);const a=[];(i||e==="audio")&&a.push("AUDIO"),(i||e==="subtitle")&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(o=>{const l=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;l&&s.push(l)}),["main","audio","subtitle"].forEach(o=>{const l=this[`${o}SegmentLoader_`];l&&(e===o||e==="all")&&s.push(l)}),s.forEach(o=>n.forEach(l=>{typeof o[l]=="function"&&o[l]()}))}setCurrentTime(e){const n=findRange(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Vhs$1.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,n){const s=e.media();if(!s)return null;const i=this.syncController_.getMediaSequenceSync(n);if(i&&i.isReliable){const l=i.start,u=i.end;if(!isFinite(l)||!isFinite(u))return null;const c=Vhs$1.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s),d=Math.max(0,u-c);return d<l?null:createTimeRanges([[l,d]])}const a=this.syncController_.getExpiredTime(s,this.duration());if(a===null)return null;const o=Vhs$1.Playlist.seekable(s,a,Vhs$1.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s));return o.length?o:null}computeFinalSeekable_(e,n){if(!n)return e;const s=e.start(0),i=e.end(0),a=n.start(0),o=n.end(0);return a>i||s>o?e:createTimeRanges([[Math.max(s,a),Math.min(i,o)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let n;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!n))return;const s=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,n),!this.seekable_||s&&s.length&&this.seekable_.length&&s.start(0)===this.seekable_.start(0)&&s.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${printableRange(this.seekable_)}]`);const i={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:i}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1));return}const n=this.tech_.buffered();let s=Vhs$1.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(s=Math.max(s,n.end(n.length-1))),this.mediaSource.duration!==s&&this.sourceUpdater_.setDuration(s)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const s in n)n[s].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const s=codecsForPlaylist(this.main(),n),i={},a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=s.video||e.main.videoCodec||DEFAULT_VIDEO_CODEC),e.main.isMuxed&&(i.video+=`,${s.audio||e.main.audioCodec||DEFAULT_AUDIO_CODEC}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||a)&&(i.audio=s.audio||e.main.audioCodec||e.audio.audioCodec||DEFAULT_AUDIO_CODEC,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(c,d)=>c?browserSupportsCodec(d):muxerSupportsCodec(d),l={};let u;if(["video","audio"].forEach(function(c){if(i.hasOwnProperty(c)&&!o(e[c].isFmp4,i[c])){const d=e[c].isFmp4?"browser":"muxer";l[d]=l[d]||[],l[d].push(i[c]),c==="audio"&&(u=d)}}),a&&u&&n.attributes.AUDIO){const c=n.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===c&&d!==n&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${c} as ${u} does not support codec(s): "${i.audio}"`)}if(Object.keys(l).length){const c=Object.keys(l).reduce((d,p)=>(d&&(d+=", "),d+=`${p} does not support codec(s): "${l[p].join(",")}"`,d),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:c},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const c=[];if(["video","audio"].forEach(d=>{const p=(parseCodecs(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,m=(parseCodecs(i[d]||"")[0]||{}).type;p&&m&&p.toLowerCase()!==m.toLowerCase()&&c.push(`"${this.sourceUpdater_.codecs[d]}" -> "${i[d]}"`)}),c.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${c.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(s=>{const i=e[s];if(n.indexOf(i.id)!==-1)return;n.push(i.id);const a=codecsForPlaylist(this.main,i),o=[];a.audio&&!muxerSupportsCodec(a.audio)&&!browserSupportsCodec(a.audio)&&o.push(`audio codec ${a.audio}`),a.video&&!muxerSupportsCodec(a.video)&&!browserSupportsCodec(a.video)&&o.push(`video codec ${a.video}`),a.text&&a.text==="stpp.ttml.im1t"&&o.push(`text codec ${a.text}`),o.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],s=this.main().playlists,i=unwrapCodecList(parseCodecs(e)),a=codecCount(i),o=i.video&&parseCodecs(i.video)[0]||null,l=i.audio&&parseCodecs(i.audio)[0]||null;Object.keys(s).forEach(u=>{const c=s[u];if(n.indexOf(c.id)!==-1||c.excludeUntil===1/0)return;n.push(c.id);const d=[],p=codecsForPlaylist(this.mainPlaylistLoader_.main,c),m=codecCount(p);if(!(!p.audio&&!p.video)){if(m!==a&&d.push(`codec count "${m}" !== "${a}"`),!this.sourceUpdater_.canChangeType()){const g=p.video&&parseCodecs(p.video)[0]||null,E=p.audio&&parseCodecs(p.audio)[0]||null;g&&o&&g.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`video codec "${g.type}" !== "${o.type}"`),E&&l&&E.type.toLowerCase()!==l.type.toLowerCase()&&d.push(`audio codec "${E.type}" !== "${l.type}"`)}d.length&&(c.excludeUntil=1/0,this.logger_(`excluding ${c.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let n=0;const s=this.seekable();s.length&&(n=s.start(0)),updateAdCues(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=Config.GOAL_BUFFER_LENGTH,s=Config.GOAL_BUFFER_LENGTH_RATE,i=Math.max(n,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=Config.BUFFER_LOW_WATER_LINE,s=Config.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(n,Config.MAX_BUFFER_LOW_WATER_LINE),a=Math.max(n,Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.bufferBasedABR?a:i)}bufferHighWaterLine(){return Config.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){createMetadataTrackIfNotExists(this.inbandTextTracks_,"com.apple.streaming",this.tech_),addDateRangeMetadata({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,s){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();createMetadataTrackIfNotExists(this.inbandTextTracks_,e,this.tech_),addMetadata({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:i,videoDuration:s})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const n of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,s=>{this.trigger(_extends({},s))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const a=this.contentSteeringController_.getAvailablePathways(),o=[];for(const l of n.playlists){const u=l.attributes.serviceLocation;if(u&&(o.push(u),!a.has(u)))return!0}return!!(!o.length&&a.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const s=this.main().playlists,i=new Set;let a=!1;Object.keys(s).forEach(o=>{const l=s[o],u=this.pathwayAttribute_(l),c=u&&e!==u;l.excludeUntil===1/0&&l.lastExcludeReason_==="content-steering"&&!c&&(delete l.excludeUntil,delete l.lastExcludeReason_,a=!0);const p=!l.excludeUntil&&l.excludeUntil!==1/0;!i.has(l.id)&&c&&p&&(i.add(l.id),l.excludeUntil=1/0,l.lastExcludeReason_="content-steering",this.logger_(`excluding ${l.id} for ${l.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const l=this.mediaTypes_[o];if(l.activePlaylistLoader){const u=l.activePlaylistLoader.media_;u&&u.attributes.serviceLocation!==e&&(a=!0)}}),a&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,s=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(s&&s.size||i&&i.size){for(const[o,l]of s.entries())i.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(l),this.contentSteeringController_.excludePathway(o));for(const[o,l]of i.entries()){const u=s.get(o);if(!u){n.filter(d=>d.attributes["PATHWAY-ID"]===l["BASE-ID"]).forEach(d=>{this.mainPlaylistLoader_.addClonePathway(l,d)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(u,l)||(this.mainPlaylistLoader_.updateOrDeleteClone(l,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,n){if(e["BASE-ID"]!==n["BASE-ID"]||e.ID!==n.ID||e["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const s=e["URI-REPLACEMENT"].PARAMS,i=n["URI-REPLACEMENT"].PARAMS;for(const a in s)if(s[a]!==i[a])return!1;for(const a in i)if(s[a]!==i[a])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(s=>{const i=this.mainPlaylistLoader_.getKeyIdSet(s);!i||!i.size||i.forEach(a=>{const o="usable",l=this.keyStatusMap_.has(a)&&this.keyStatusMap_.get(a)===o,u=s.lastExcludeReason_===n&&s.excludeUntil===1/0;l?l&&u&&(delete s.excludeUntil,delete s.lastExcludeReason_,this.logger_(`enabling playlist ${s.id} because key ID ${a} is ${o}`)):(s.excludeUntil!==1/0&&s.lastExcludeReason_!==n&&(s.excludeUntil=1/0,s.lastExcludeReason_=n,this.logger_(`excluding playlist ${s.id} because the key ID ${a} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(s=>{const i=s&&s.attributes&&s.attributes.RESOLUTION&&s.attributes.RESOLUTION.height<720,a=s.excludeUntil===1/0&&s.lastExcludeReason_===n;i&&a&&(delete s.excludeUntil,videojs.log.warn(`enabling non-HD playlist ${s.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(e,n){const a=(typeof e=="string"?e:bufferToHexString(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${a} added to the keyStatusMap`),this.keyStatusMap_.set(a,n)}updatePlaylistByKeyStatus(e,n){this.addKeyStatus_(e,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const enableFunction=(t,e,n)=>s=>{const i=t.main.playlists[e],a=isIncompatible(i),o=isEnabled(i);if(typeof s>"u")return o;s?delete i.disabled:i.disabled=!0;const l={renditionInfo:{id:e,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:"fast-quality"};return s!==o&&!a&&(n(i),s?t.trigger({type:"renditionenabled",metadata:l}):t.trigger({type:"renditiondisabled",metadata:l})),s};class Representation{constructor(e,n,s){const{playlistController_:i}=e,a=i.fastQualityChange_.bind(i);if(n.attributes){const o=n.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=codecsForPlaylist(i.main(),n),this.playlist=n,this.id=s,this.enabled=enableFunction(e.playlists,n.id,a)}}const renditionSelectionMixin=function(t){t.representations=()=>{const e=t.playlistController_.main(),n=isAudioOnly(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(s=>!isIncompatible(s)).map((s,i)=>new Representation(t,s,s.id)):[]}},timerCancelEvents=["seeking","seeked","pause","playing","error"];class PlaybackWatcher extends videojs.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=logger("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),s=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),a=()=>this.resetTimeUpdate_(),o=this.playlistController_,l=["main","subtitle","audio"],u={};l.forEach(d=>{u[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},o[`${d}SegmentLoader_`].on("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].on("playlistupdate",u[d].reset),this.tech_.on(["seeked","seeking"],u[d].reset)});const c=d=>{["main","audio"].forEach(p=>{o[`${p}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=()=>c("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(timerCancelEvents,a),this.tech_.on("canplay",s),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(timerCancelEvents,a),this.tech_.off("canplay",s),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),l.forEach(d=>{o[`${d}SegmentLoader_`].off("appendsdone",u[d].updateend),o[`${d}SegmentLoader_`].off("playlistupdate",u[d].reset),this.tech_.off(["seeked","seeking"],u[d].reset)}),this.checkCurrentTimeTimeout_&&window$1.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window$1.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window$1.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,s=n[`${e}SegmentLoader_`],i=s.buffered_(),a=isRangeDifferent(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,a){const o={bufferedRanges:i};n.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:s.playlist_&&s.playlist_.id,buffered:timeRangesToArray(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+SAFE_TIME_DELTA>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(createTimeRanges([this.lastRecordedTime,e]));const s={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:s}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),s=this.tech_.currentTime(),i=this.afterSeekableWindow_(n,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let a;if(i&&(a=n.end(n.length-1)),this.beforeSeekableWindow_(n,s)){const E=n.start(0);a=E+(E===n.end(0)?0:SAFE_TIME_DELTA)}if(typeof a<"u")return this.logger_(`Trying to seek outside of seekable at time ${s} with seekable range ${printableRange(n)}. Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0;const o=this.playlistController_.sourceUpdater_,l=this.tech_.buffered(),u=o.audioBuffer?o.audioBuffered():null,c=o.videoBuffer?o.videoBuffered():null,d=this.media(),p=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-TIME_FUDGE_FACTOR)*2,m=[u,c];for(let E=0;E<m.length;E++){if(!m[E])continue;if(timeAheadOf(m[E],s)<p)return!1}const g=findNextRange(l,s);return g.length===0?!1:(a=g.start(0)+SAFE_TIME_DELTA,this.logger_(`Buffered region starts (${g.start(0)})  just beyond seek point (${s}). Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),s=findRange(n,e);if(s.length&&e+3<=s.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${s.start(0)} -> ${s.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const l=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${l}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const s=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=findNextRange(i,n);return o.length>0?(this.logger_(`Stopped at ${n} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(e,n,s,i=!1){if(!e.length)return!1;let a=e.end(e.length-1)+SAFE_TIME_DELTA;const o=!s.endList,l=typeof s.partTargetDuration=="number";return o&&(l||i)&&(a=e.end(e.length-1)+s.targetDuration*3),n>a}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:s}){if(!e)return;let i;if(e.length&&n.length){const a=findRange(e,s-3),o=findRange(e,s),l=findRange(n,s);l.length&&!o.length&&a.length&&(i={start:a.end(0),end:l.end(0)})}else findNextRange(e,s).length||(i=this.gapFromVideoUnderflow_(e,s));return i?(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${s}`),!0):!1}skipTheGap_(e){const n=this.tech_.buffered(),s=this.tech_.currentTime(),i=findNextRange(n,s);if(this.resetTimeUpdate_(),i.length===0||s!==e)return;this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+TIME_FUDGE_FACTOR);const a={gapInfo:{from:s,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:a}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,n){const s=findGaps(e);for(let i=0;i<s.length;i++){const a=s.start(i),o=s.end(i);if(n-a<4&&n-a>2)return{start:a,end:o}}return null}}const defaultOptions$1={errorInterval:30,getSource(t){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(n)}},initPlugin=function(t,e){let n=0,s=0;const i=merge(defaultOptions$1,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const a=function(){s&&t.currentTime(s)},o=function(d){d!=null&&(s=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(d),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},l=function(){if(Date.now()-n<i.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!i.getSource||typeof i.getSource!="function"){videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),i.getSource.call(t,o)},u=function(){t.off("loadedmetadata",a),t.off("error",l),t.off("dispose",u)},c=function(d){u(),initPlugin(t,d)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=c},reloadSourceOnError=function(t){initPlugin(this,t)};var version$4="3.16.0",version$3="7.1.0",version$2="1.3.1",version$1="7.2.0",version="4.0.2";const Vhs={PlaylistLoader,Playlist,utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,lastBandwidthSelector,movingAverageBandwidthSelector,comparePlaylistBandwidth,comparePlaylistResolution,xhr:xhrFactory()};Object.keys(Config).forEach(t=>{Object.defineProperty(Vhs,t,{get(){return videojs.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),Config[t]},set(e){if(videojs.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){videojs.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}Config[t]=e}})});const LOCAL_STORAGE_KEY="videojs-vhs",handleVhsMediaChange=function(t,e){const n=e.media();let s=-1;for(let i=0;i<t.length;i++)if(t[i].id===n.id){s=i;break}t.selectedIndex_=s,t.trigger({selectedIndex:s,type:"change"})},handleVhsLoadedMetadata=function(t,e){e.representations().forEach(n=>{t.addQualityLevel(n)}),handleVhsMediaChange(t,e.playlists)};Vhs.canPlaySource=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const emeKeySystems=(t,e,n)=>{if(!t)return t;let s={};e&&e.attributes&&e.attributes.CODECS&&(s=unwrapCodecList(parseCodecs(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(s.audio=n.attributes.CODECS);const i=getMimeForCodec(s.video),a=getMimeForCodec(s.audio),o={};for(const l in t)o[l]={},a&&(o[l].audioContentType=a),i&&(o[l].videoContentType=i),e.contentProtection&&e.contentProtection[l]&&e.contentProtection[l].pssh&&(o[l].pssh=e.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return merge(t,o)},getAllPsshKeySystemsOptions=(t,e)=>t.reduce((n,s)=>{if(!s.contentProtection)return n;const i=e.reduce((a,o)=>{const l=s.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(i).length&&n.push(i),n},[]),waitForKeySessionCreation=({player:t,sourceKeySystems:e,audioMedia:n,mainPlaylists:s})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const i=n?s.concat([n]):s,a=getAllPsshKeySystemsOptions(i,Object.keys(e)),o=[],l=[];return a.forEach(u=>{l.push(new Promise((c,d)=>{t.tech_.one("keysessioncreated",c)})),o.push(new Promise((c,d)=>{t.eme.initializeMediaKeys({keySystems:u},p=>{if(p){d(p);return}c()})}))}),Promise.race([Promise.all(o),Promise.race(l)])},setupEmeOptions=({player:t,sourceKeySystems:e,media:n,audioMedia:s})=>{const i=emeKeySystems(e,n,s);return i?(t.currentSource().keySystems=i,i&&!t.eme?(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},getVhsLocalStorage=()=>{if(!window$1.localStorage)return null;const t=window$1.localStorage.getItem(LOCAL_STORAGE_KEY);if(!t)return null;try{return JSON.parse(t)}catch{return null}},updateVhsLocalStorage=t=>{if(!window$1.localStorage)return!1;let e=getVhsLocalStorage();e=e?merge(e,t):t;try{window$1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(e))}catch{return!1}return e},expandDataUri=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,addOnRequestHook=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},addOnResponseHook=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},removeOnRequestHook=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},removeOnResponseHook=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};Vhs.supportsNativeHls=function(){if(!document$1||!document$1.createElement)return!1;const t=document$1.createElement("video");return videojs.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(t.canPlayType(n))}):!1}();Vhs.supportsNativeDash=function(){return!document$1||!document$1.createElement||!videojs.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(document$1.createElement("video").canPlayType("application/dash+xml"))}();Vhs.supportsTypeNatively=t=>t==="hls"?Vhs.supportsNativeHls:t==="dash"?Vhs.supportsNativeDash:!1;Vhs.isSupported=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Vhs.xhr.onRequest=function(t){addOnRequestHook(Vhs.xhr,t)};Vhs.xhr.onResponse=function(t){addOnResponseHook(Vhs.xhr,t)};Vhs.xhr.offRequest=function(t){removeOnRequestHook(Vhs.xhr,t)};Vhs.xhr.offResponse=function(t){removeOnResponseHook(Vhs.xhr,t)};const Component=videojs.getComponent("Component");class VhsHandler extends Component{constructor(e,n,s){if(super(n,s.vhs),typeof s.initialBandwidth=="number"&&(this.options_.bandwidth=s.initialBandwidth),this.logger_=logger("VhsHandler"),n.options_&&n.options_.playerId){const i=videojs.getPlayer(n.options_.playerId);this.player_=i}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document$1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const a=document$1.fullscreenElement||document$1.webkitFullscreenElement||document$1.mozFullScreenElement||document$1.msFullscreenElement;a&&a.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=merge(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const s=getVhsLocalStorage();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Config.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(s=>{typeof this.source_[s]<"u"&&(this.options_[s]=this.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(e={}){this.setOptions_(e)}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=expandDataUri(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Vhs,this.options_.sourceType=simpleTypeFromSourceType(n),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.options_.player_=this.player_,this.playlistController_=new PlaylistController(this.options_);const s=merge({liveRangeSafeTimeDelta:SAFE_TIME_DELTA},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new PlaybackWatcher(s),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const a=videojs.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),a.error(o)});const i=this.options_.bufferBasedABR?Vhs.movingAverageBandwidthSelector(.55):Vhs.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth;const o=window$1.navigator.connection||window$1.navigator.mozConnection||window$1.navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&o){const u=o.downlink*1e3*1e3;u>=l&&a>=l?a=Math.max(a,u):a=u}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const a=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(a+o))},set(){videojs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>timeRangesToArray(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>timeRangesToArray(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&updateVhsLocalStorage({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{renditionSelectionMixin(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window$1.URL.createObjectURL(this.playlistController_.mediaSource),(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),waitForKeySessionCreation({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=setupEmeOptions({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",s=>{this.playlistController_.updatePlaylistByKeyStatus(s.keyId,s.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=videojs.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{handleVhsLoadedMetadata(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{handleVhsMediaChange(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":version$4,"mux.js":version$3,"mpd-parser":version$2,"m3u8-parser":version$1,"aes-decrypter":version}}version(){return this.constructor.version()}canChangeType(){return SourceUpdater.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window$1.URL.revokeObjectURL&&(window$1.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return getProgramTime({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,s=!0,i=2){return seekToProgramTime({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{addOnRequestHook(this.xhr,e)},this.xhr.onResponse=e=>{addOnResponseHook(this.xhr,e)},this.xhr.offRequest=e=>{removeOnRequestHook(this.xhr,e)},this.xhr.offResponse=e=>{removeOnResponseHook(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];e.forEach(s=>{this.playlistController_.on(s,i=>{this.player_.trigger(_extends({},i))})}),n.forEach(s=>{this.playbackWatcher_.on(s,i=>{this.player_.trigger(_extends({},i))})})}}const VhsSourceHandler={name:"videojs-http-streaming",VERSION:version$4,canHandleSource(t,e={}){const n=merge(videojs.options,e);return!n.vhs.experimentalUseMMS&&!browserSupportsCodec("avc1.4d400d,mp4a.40.2",!1)?!1:VhsSourceHandler.canPlayType(t.type,n)},handleSource(t,e,n={}){const s=merge(videojs.options,n);return e.vhs=new VhsHandler(t,e,s),e.vhs.xhr=xhrFactory(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const n=simpleTypeFromSourceType(t);if(!n)return"";const s=VhsSourceHandler.getOverrideNative(e);return!Vhs.supportsTypeNatively(n)||s?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,n=!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS),{overrideNative:s=n}=e;return s}},supportsNativeMediaSources=()=>browserSupportsCodec("avc1.4d400d,mp4a.40.2",!0);supportsNativeMediaSources()&&videojs.getTech("Html5").registerSourceHandler(VhsSourceHandler,0);videojs.VhsHandler=VhsHandler;videojs.VhsSourceHandler=VhsSourceHandler;videojs.Vhs=Vhs;videojs.use||videojs.registerComponent("Vhs",Vhs);videojs.options.vhs=videojs.options.vhs||{};(!videojs.getPlugin||!videojs.getPlugin("reloadSourceOnError"))&&videojs.registerPlugin("reloadSourceOnError",reloadSourceOnError);videojs.use("*",t=>({setCurrentTime:e=>{const{xgritIsLeadingNode:n,xgritLastSavedTime:s,xgritIsSkipAllowed:i}=t.options_;return!n||i?e:Math.min(e,Math.max(Number(t.currentTime()??0),Number(s??0)))}}));const v="5.12.1",fr=24,ip=0,op=48,w=200,h=200,nm="Play Button 1 - Lottie Export",assets=[],layers=[{ind:1,ty:4,nm:"Triangle",sr:1,ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[106,101.333,0],l:2},a:{a:0,k:[0,0,0],l:2},s:{a:0,k:[36.667,36.667,100],l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ks:{a:0,k:{i:[[11.595,6.694],[0,0],[0,-13.389],[0,0],[-11.595,6.694],[0,0]],o:[[0,0],[-11.595,-6.694],[0,0],[0,13.389],[0,0],[11.595,-6.694]],v:[[64.365,-15.062],[-64.365,-89.384],[-90.454,-74.322],[-90.454,74.322],[-64.365,89.384],[64.365,15.062]],c:!0}},nm:"Path 1"},{ty:"fl",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},r:1,nm:"Fill 1"},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Group 1"}],ip:0,op:48,st:0,ct:1},{ind:2,ty:4,nm:"Animated_circle",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1,s:[50]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:10,s:[50]},{t:36,s:[0]}]},r:{a:0,k:0},p:{a:0,k:[100,100,0],l:2},a:{a:0,k:[0,0,0],l:2},s:{a:0,k:[33.333,33.333,100],l:2}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[139.982,0],[0,-139.982],[-139.982,0],[0,139.982]],o:[[-139.982,0],[0,139.982],[139.982,0],[0,-139.982]],v:[[-2,-255.459],[-255.459,-2],[-2,251.459],[251.459,-2]],c:!0}},o:{a:0,k:100},x:{a:0,k:0},nm:"Mask 1"}],shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:1,k:[{i:{x:[.2,.2],y:[1,1]},o:{x:[.167,.167],y:[.167,.167]},t:0,s:[68,68]},{t:36,s:[517,517]}]},p:{a:0,k:[0,0]},nm:"Ellipse Path 1"},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:60},lc:1,lj:1,ml:4,nm:"Stroke 1"},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Ellipse 1"}],ip:0,op:48,st:0,ct:1},{ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[100,100,0],l:2},a:{a:0,k:[0,0,0],l:2},s:{a:0,k:[33.333,33.333,100],l:2}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[497,497]},p:{a:0,k:[0,0]},nm:"Ellipse Path 1"},{ty:"st",c:{a:0,k:[1,1,1,1]},o:{a:0,k:100},w:{a:0,k:30},lc:1,lj:1,ml:4,nm:"Stroke 1"},{ty:"fl",c:{a:0,k:[.149,.537,.792,1]},o:{a:0,k:100},r:1,nm:"Fill 1"},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100},sk:{a:0,k:0},sa:{a:0,k:0},nm:"Transform"}],nm:"Ellipse 1"}],ip:0,op:48,st:0,ct:1}],markers=[],animationData={v,fr,ip,op,w,h,nm,assets,layers,markers},playerStatesEnum={PLAYING:"playing",PAUSED:"paused",ENDED:"ended",SEEKING:"seeking",SEEKED:"seeked",NONE:"none"},VideoPlayerComponent=t=>{const e=t.isLeadingNode?t.isAutoplay:!1,n=utilities.isIOSMobile(),s={autoplay:e,controls:!0,controlBar:{fullscreenToggle:n?!1:t.hideFullscreen,pictureInPictureToggle:!n},fluid:!0,preload:"auto"},i=`videoProgress-${t.nodeId??"defaultNodeId"}`,[a,o]=reactExports.useState(s),l=reactExports.useRef(null),u=reactExports.useRef(null),[c,d]=reactExports.useState(null),[p,m]=reactExports.useState(Number(sessionStorage.getItem(i)??t.currentTime??0)),[g,E]=reactExports.useState(Number(sessionStorage.getItem(i)??t.currentTime??0)),[x,b]=reactExports.useState(playerStatesEnum.NONE),S=(I,D,P=60)=>{!I||!t.nodeId||D-g>P&&courseflowVideoPause(I,D,t.nodeId).then(O=>(c?.options({xgritLastSavedTime:D}),E(D),O)).catch(O=>(console.error(O),O))},C=I=>{I.one("playing",()=>{t.isLeadingNode&&p>0&&I.currentTime(p)}),I.on("playing",()=>{b(playerStatesEnum.PLAYING)}),I.on("timeupdate",()=>{m(I.currentTime()??0)}),I.on("ended",()=>{b(playerStatesEnum.ENDED),t.onVideoEnded&&t.onVideoEnded(),sessionStorage.removeItem(i)}),I.on("pause",()=>{b(playerStatesEnum.PAUSED)}),I.on("seeking",()=>{b(playerStatesEnum.SEEKING)}),I.on("seeked",()=>{b(playerStatesEnum.SEEKED)})};reactExports.useEffect(()=>{o(Object.assign(s,{sources:[{src:`${t.streamUrl}index.m3u8`,type:"application/x-mpegurl"},{src:`${t.streamUrl}mpegdash.mpd`,type:"application/dash+xml"},{src:`${t.streamUrl}index.mp4`,type:"video/mp4"},{src:`${t.streamUrl}index.webm`,type:"video/webm"}]}));const I=videojs.getPlayer(t.id);I&&(I.dispose(),d(null));const D=videojs(t.id,a);return D.options({xgritIsLeadingNode:!!t.isLeadingNode,xgritLastSavedTime:g,xgritIsSkipAllowed:t.isSkipAllowed}),u.current&&(!t.isLeadingNode||t.isSkipAllowed)&&u.current?.stop(),C(D),d(D),()=>{D.dispose()}},[]),reactExports.useEffect(()=>{c&&t.streamUrl&&t.isVideoQuestion&&(c.src([{src:`${t.streamUrl}index.m3u8`,type:"application/x-mpegURL"},{src:`${t.streamUrl}mpegdash.mpd`,type:"application/dash+xml"},{src:`${t.streamUrl}index.mp4`,type:"video/mp4"},{src:`${t.streamUrl}index.webm`,type:"video/webm"}]),c.play())},[t.streamUrl]),reactExports.useEffect(()=>{S(t.progressId,p,Number(t.nodeId))},[p]),reactExports.useEffect(()=>{t.nodeId&&x!==playerStatesEnum.ENDED&&sessionStorage.setItem(i,g.toString())},[g]),reactExports.useEffect(()=>{x===playerStatesEnum.PAUSED&&(S(t.progressId,p,10),u.current&&u.current?.stop())},[x]);const T=()=>{c&&c.play()};return jsxRuntimeExports.jsx("div",{"data-vjs-player":!0,className:`gritVideoPlayer ${t.className??""}`,onContextMenu:I=>{I.preventDefault()},children:t.streamUrl?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("video",{ref:l,"data-test":"videoContainer",className:"video-js gritVideoPlayer__video vjs-16-9",id:t.id,poster:t.img,playsInline:n,children:jsxRuntimeExports.jsx("track",{kind:"captions",src:t.subtitleUrl?t.subtitleUrl.replace(/srt$/,"vtt"):"",srcLang:"en",label:"English",default:!0})}),x!==playerStatesEnum.PLAYING&&jsxRuntimeExports.jsx("button",{"data-test":"playButton",className:"play-button",onClick:T,children:jsxRuntimeExports.jsx(Lottie,{lottieRef:u,animationData,style:{width:100,height:100}})})]}):null})},linkClickCallback=t=>{const n=(t?.path||[]).reduce((s,i)=>!s&&i.href?i.href:s,"");n&&(t.preventDefault(),window.open(n,"_blank"))},getImageUrl=t=>{const e=t.data.image2xUrl||t.data.imageUrl;return e.match(/\.(jpeg|jpg|gif|png)$/)?e:""},screenTemplateEnum={SCREEN_TEMPLATE_1:"imageBackground",SCREEN_TEMPLATE_2:"imageRight",SCREEN_TEMPLATE_3:"imageTop",SCREEN_TEMPLATE_4:"fullText",SCREEN_TEMPLATE_5:"video",SCREEN_TEMPLATE_6:"imageLeft",SCREEN_TEMPLATE_AUDIO:"audioTrack"},Page=({audioState:t,displayName:e,node:n,onVideoEnded:s,progressId:i,timer:a})=>{const o=useDispatch(),l=get$5(n,"data.template","")==="SCREEN_TEMPLATE_AUDIO"||!1,u=!!n.data.html.replace(/(<([^>]+)>)/gi,"");return reactExports.useEffect(()=>{const c=get$5(n,"data.screenSeconds",0),d=get$5(n,"isLeadingNode",!1),p=get$5(n,"data.streamUrl",!1),m=get$5(a,"id",null)===get$5(n,"_id",void 0),g=c&&d&&!p,E=document.getElementsByClassName("content__markup-new")[0];return(m||g)&&o(startTimer({id:n._id})),E&&E.addEventListener("click",linkClickCallback),()=>{o(removeTimer({id:n._id})),E&&E.removeEventListener("click",linkClickCallback)}},[n._id]),reactExports.useLayoutEffect(()=>{t===audioStateEnum.playing&&o(setAudioPlaying())},[n._id]),jsxRuntimeExports.jsxs("div",{className:`gritCourseflowNode gritCourseflowNode--page gritCourseflowNode--${screenTemplateEnum[n.data.template]}`,children:[n.data.fileUrl&&n.data.template!=="SCREEN_TEMPLATE_4"?jsxRuntimeExports.jsx("div",{className:"gritCourseflowNode__file",children:jsxRuntimeExports.jsx("a",{className:"gritCourseflowNode__fileLink",href:n.data.fileUrl,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx("img",{className:"gritCourseflowNode__fileImage",alt:"Download File",src:getImageUrl(n)})})}):null,getImageUrl(n)&&!n.fileUrl&&n.data.template!=="SCREEN_TEMPLATE_4"&&n.data.template!=="SCREEN_TEMPLATE_6"?jsxRuntimeExports.jsx("img",{alt:getImageUrl(n),src:getImageUrl(n),className:classNames("gritCourseflowNode__img",{"gritCourseflowNode__img--audioTrack":l})}):null,get$5(n,"data.streamUrl",void 0)&&!l?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(VideoPlayerComponent,{streamUrl:get$5(n,"data.streamUrl",null),subtitleUrl:get$5(n,"data.subtitleUrl",null),className:"gritCourseflowNode__video",id:n.data._id.replace(/[0-9]/g,""),nodeId:n._id,img:getImageUrl(n),currentTime:n.currentVideoSeconds||0,onVideoEnded:c=>{s(c)},isLeadingNode:n.isLeadingNode,isAutoplay:get$5(n,"data.isAutoplay",null),progressId:i,isSkipAllowed:n.isSkipAllowed,hideFullscreen:!1})}):null,n.data.html!==""&&jsxRuntimeExports.jsx("div",{className:"ace-content",children:jsxRuntimeExports.jsx("div",{className:"ace-content--mark-up",children:jsxRuntimeExports.jsx("div",{className:classNames("content__markup-new",{gritCourseflowNode__markupContainer:u}),"data-test":"nodeTitle",dangerouslySetInnerHTML:{__html:getFilteredMarkup(n.data.html,e)}})})}),l&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n.data.title&&jsxRuntimeExports.jsx("h3",{className:"gritCourseflowNode__audioNodeTitle headings__h3",children:n.data.title}),jsxRuntimeExports.jsx(AudioPlayer,{track:get$5(n,"data.streamUrl",null),nodeId:n._id,currentTime:n.currentVideoSeconds||0,onVideoEnded:c=>{s(c)},isLeadingNode:n.isLeadingNode,isAutoplay:get$5(n,"data.isAutoplay",!1),progressId:i,duration:n.data.videoSeconds})]})]})},MapButton=({className:t,id:e,coords:n,onClick:s,scale:i,gradedState:a,selected:o,label:l})=>{if(!n)return jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0});const u={width:n.diameter*i,height:n.diameter*i,top:(n.y-n.diameter/2)*i,left:(n.x-n.diameter/2)*i},c=a&&a!=="missed",d=a==="incorrect"?"gritIcon--x-inverted":"gritIcon--checkmark-inverted";return jsxRuntimeExports.jsx("button",{className:`map-button ${o?"selected":""} ${a??""} ${t??""}`,style:u,id:e,"data-test":`x${n.x}-y${n.y}`,onClick:()=>{s()},disabled:!!a,"aria-label":`Map Button ${l}`,children:c?jsxRuntimeExports.jsx("span",{className:"map-button--icon-wrapper",children:jsxRuntimeExports.jsx("span",{className:`gritIcon ${d}`})}):null})},ImageMap=({className:t,questionId:e,imageAnswerList:n,imageUrl:s,onClick:i,chosenAnswerList:a,chosenAnswer:o,isSubmitted:l,getGradedState:u,altImageText:c})=>{const[d,p]=reactExports.useState(1),m=`image-map-question-${e}`;return reactExports.useLayoutEffect(()=>{if(window.ResizeObserver){const g=document.getElementById(m);if(g){const E=new ResizeObserver(x=>{const b=x[0];p(b.contentRect.width/g.naturalWidth)});return E.observe(g),()=>{E.unobserve(g)}}}},[]),jsxRuntimeExports.jsxs("div",{"data-attr":d,className:"grit image-map",children:[n.length?n.map(g=>jsxRuntimeExports.jsx(MapButton,{className:t,id:`area-${g.key}`,coords:g.meta,onClick:()=>{i(g.key)},scale:d,gradedState:u(g),selected:l?!!g.isSelected:o===g.key||a.includes(g.key),label:g.value},g.key)):null,jsxRuntimeExports.jsx("img",{"data-test":"img",alt:c??"Pic Map Question",className:"image",src:s,id:m})]})},QuizResultInstructor=({question:t,answer:e,explanation:n,variant:s,title:i,isInstructorGlobalEnabled:a})=>{const o=useDispatch(),l=s==="correct"?"That's Correct!":"That's incorrect. Here's why:",u=()=>{o({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_MISSEDQ_YES"}}),o({type:SHOW_MODAL,payload:{modal:{type:"instructor.quiz",data:{explanation:n,question:t,answer:e}}}})};return reactExports.useEffect(()=>{s==="incorrect"&&o(genericAnalyticsAndIterableEvent("Component Shown",{to:"VI.missedPopup"}))},[]),jsxRuntimeExports.jsxs(Root$2,{isInstructorEnabled:a,variant:s,children:[s==="correct"?jsxRuntimeExports.jsx(CheckmarkInverted,{size:"small",className:"w-8! h-8!"}):jsxRuntimeExports.jsx(XInverted,{size:"small",className:"w-8! h-8!"}),jsxRuntimeExports.jsxs(Content$2,{children:[jsxRuntimeExports.jsx(Title,{children:i??l}),jsxRuntimeExports.jsx(Description,{children:n}),s==="incorrect"&&jsxRuntimeExports.jsx(RemediationQuestion,{onClick:u})]})]})};function useCombinedRefs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return reactExports.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function isNode(t){return"nodeType"in t}function getWindow(t){var e,n;return t?isWindow(t)?t:isNode(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function isDocument(t){const{Document:e}=getWindow(t);return t instanceof e}function isHTMLElement(t){return isWindow(t)?!1:t instanceof getWindow(t).HTMLElement}function isSVGElement(t){return t instanceof getWindow(t).SVGElement}function getOwnerDocument(t){return t?isWindow(t)?t.document:isNode(t)?isDocument(t)?t:isHTMLElement(t)||isSVGElement(t)?t.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(t){const e=reactExports.useRef(t);return useIsomorphicLayoutEffect(()=>{e.current=t}),reactExports.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function useInterval(){const t=reactExports.useRef(null),e=reactExports.useCallback((s,i)=>{t.current=setInterval(s,i)},[]),n=reactExports.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function useLatestValue(t,e){e===void 0&&(e=[t]);const n=reactExports.useRef(t);return useIsomorphicLayoutEffect(()=>{n.current!==t&&(n.current=t)},e),n}function useLazyMemo(t,e){const n=reactExports.useRef();return reactExports.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function useNodeRef(t){const e=useEvent(t),n=reactExports.useRef(null),s=reactExports.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,s]}function usePrevious(t){const e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=t},[t]),e.current}let ids={};function useUniqueId(t,e){return reactExports.useMemo(()=>{if(e)return e;const n=ids[t]==null?0:ids[t]+1;return ids[t]=n,t+"-"+n},[t,e])}function createAdjustmentFn(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const l=Object.entries(o);for(const[u,c]of l){const d=a[u];d!=null&&(a[u]=d+t*c)}return a},{...e})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(t){return"clientX"in t&&"clientY"in t}function isKeyboardEvent(t){if(!t)return!1;const{KeyboardEvent:e}=getWindow(t.target);return e&&t instanceof e}function isTouchEvent(t){if(!t)return!1;const{TouchEvent:e}=getWindow(t.target);return e&&t instanceof e}function getEventCoordinates(t){if(isTouchEvent(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return hasViewportRelativeCoordinates(t)?{x:t.clientX,y:t.clientY}:null}const CSS$1=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[CSS$1.Translate.toString(t),CSS$1.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(t){return t.matches(SELECTOR)?t:t.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(t){let{id:e,value:n}=t;return React$1.createElement("div",{id:e,style:hiddenStyles},n)}function LiveRegion(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React$1.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function useAnnouncement(){const[t,e]=reactExports.useState("");return{announce:reactExports.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(t){const e=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function useDndMonitorProvider(){const[t]=reactExports.useState(()=>new Set),e=reactExports.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[reactExports.useCallback(s=>{let{type:i,event:a}=s;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,a)})},[t]),e]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Accessibility(t){let{announcements:e=defaultAnnouncements,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=defaultScreenReaderInstructions}=t;const{announce:a,announcement:o}=useAnnouncement(),l=useUniqueId("DndLiveRegion"),[u,c]=reactExports.useState(!1);if(reactExports.useEffect(()=>{c(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(p){let{active:m}=p;a(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:g}=p;e.onDragMove&&a(e.onDragMove({active:m,over:g}))},onDragOver(p){let{active:m,over:g}=p;a(e.onDragOver({active:m,over:g}))},onDragEnd(p){let{active:m,over:g}=p;a(e.onDragEnd({active:m,over:g}))},onDragCancel(p){let{active:m,over:g}=p;a(e.onDragCancel({active:m,over:g}))}}),[a,e])),!u)return null;const d=React$1.createElement(React$1.Fragment,null,React$1.createElement(HiddenText,{id:s,value:i.draggable}),React$1.createElement(LiveRegion,{id:l,announcement:o}));return n?reactDomExports.createPortal(d,n):d}var Action;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}function useSensor(t,e){return reactExports.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function useSensors(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return reactExports.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sortCollisionsAsc(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function sortCollisionsDesc(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function cornersOfRectangle(t){let{left:e,top:n,height:s,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+s},{x:e+i,y:n+s}]}function getFirstCollision(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function centerOfRectangle(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const closestCenter=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=centerOfRectangle(e,e.left,e.top),a=[];for(const o of s){const{id:l}=o,u=n.get(l);if(u){const c=distanceBetween(centerOfRectangle(u),i);a.push({id:l,data:{droppableContainer:o,value:c}})}}return a.sort(sortCollisionsAsc)},closestCorners=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=cornersOfRectangle(e),a=[];for(const o of s){const{id:l}=o,u=n.get(l);if(u){const c=cornersOfRectangle(u),d=i.reduce((m,g,E)=>m+distanceBetween(c[E],g),0),p=Number((d/4).toFixed(4));a.push({id:l,data:{droppableContainer:o,value:p}})}}return a.sort(sortCollisionsAsc)};function getIntersectionRatio(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=i-s,l=a-n;if(s<i&&n<a){const u=e.width*e.height,c=t.width*t.height,d=o*l,p=d/(u+c-d);return Number(p.toFixed(4))}return 0}const rectIntersection=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const i=[];for(const a of s){const{id:o}=a,l=n.get(o);if(l){const u=getIntersectionRatio(l,e);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort(sortCollisionsDesc)};function adjustScale(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function getRectDelta(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:defaultCoordinates}function createRectAdjustmentFn(t){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function inverseTransform(t,e,n){const s=parseTransform(e);if(!s)return t;const{scaleX:i,scaleY:a,x:o,y:l}=s,u=t.left-o-(1-i)*parseFloat(n),c=t.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,p=a?t.height/a:t.height;return{width:d,height:p,top:c,right:u+d,bottom:c+p,left:u}}const defaultOptions={ignoreTransform:!1};function getClientRect(t,e){e===void 0&&(e=defaultOptions);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=getWindow(t).getComputedStyle(t);c&&(n=inverseTransform(n,c,d))}const{top:s,left:i,width:a,height:o,bottom:l,right:u}=n;return{top:s,left:i,width:a,height:o,bottom:l,right:u}}function getTransformAgnosticClientRect(t){return getClientRect(t,{ignoreTransform:!0})}function getWindowClientRect(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function isFixed(t,e){return e===void 0&&(e=getWindow(t).getComputedStyle(t)),e.position==="fixed"}function isScrollable(t,e){e===void 0&&(e=getWindow(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?n.test(a):!1})}function getScrollableAncestors(t,e){const n=[];function s(i){if(e!=null&&n.length>=e||!i)return n;if(isDocument(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!isHTMLElement(i)||isSVGElement(i)||n.includes(i))return n;const a=getWindow(t).getComputedStyle(i);return i!==t&&isScrollable(i,a)&&n.push(i),isFixed(i,a)?n:s(i.parentNode)}return t?s(t):n}function getFirstScrollableAncestor(t){const[e]=getScrollableAncestors(t,1);return e??null}function getScrollableElement(t){return!canUseDOM||!t?null:isWindow(t)?t:isNode(t)?isDocument(t)||t===getOwnerDocument(t).scrollingElement?window:isHTMLElement(t)?t:null:null}function getScrollXCoordinate(t){return isWindow(t)?t.scrollX:t.scrollLeft}function getScrollYCoordinate(t){return isWindow(t)?t.scrollY:t.scrollTop}function getScrollCoordinates(t){return{x:getScrollXCoordinate(t),y:getScrollYCoordinate(t)}}var Direction;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(t){return!canUseDOM||!t?!1:t===document.scrollingElement}function getScrollPosition(t){const e={x:0,y:0},n=isDocumentScrollingElement(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,l=t.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:l,maxScroll:s,minScroll:e}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(t,e,n,s,i){let{top:a,left:o,right:l,bottom:u}=n;s===void 0&&(s=10),i===void 0&&(i=defaultThreshold);const{isTop:c,isBottom:d,isLeft:p,isRight:m}=getScrollPosition(t),g={x:0,y:0},E={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!c&&a<=e.top+x.height?(g.y=Direction.Backward,E.y=s*Math.abs((e.top+x.height-a)/x.height)):!d&&u>=e.bottom-x.height&&(g.y=Direction.Forward,E.y=s*Math.abs((e.bottom-x.height-u)/x.height)),!m&&l>=e.right-x.width?(g.x=Direction.Forward,E.x=s*Math.abs((e.right-x.width-l)/x.width)):!p&&o<=e.left+x.width&&(g.x=Direction.Backward,E.x=s*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:E}}function getScrollElementRect(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:n,right:s,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:i,width:t.clientWidth,height:t.clientHeight}}function getScrollOffsets(t){return t.reduce((e,n)=>add(e,getScrollCoordinates(n)),defaultCoordinates)}function getScrollXOffset(t){return t.reduce((e,n)=>e+getScrollXCoordinate(n),0)}function getScrollYOffset(t){return t.reduce((e,n)=>e+getScrollYCoordinate(n),0)}function scrollIntoViewIfNeeded(t,e){if(e===void 0&&(e=getClientRect),!t)return;const{top:n,left:s,bottom:i,right:a}=e(t);getFirstScrollableAncestor(t)&&(i<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=getScrollableAncestors(n),i=getScrollOffsets(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,l]of properties)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=l(s),d=i[a]-c;return this.rect[u]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var i;(i=this.target)==null||i.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function getEventListenerTarget(t){const{EventTarget:e}=getWindow(t);return t instanceof e?t:getOwnerDocument(t)}function hasExceededDistance(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var EventName;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(t){t.preventDefault()}function stopPropagation(t){t.stopPropagation()}var KeyboardCode;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter]},defaultKeyboardCoordinateGetter=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case KeyboardCode.Right:return{...n,x:n.x+25};case KeyboardCode.Left:return{...n,x:n.x-25};case KeyboardCode.Down:return{...n,y:n.y+25};case KeyboardCode.Up:return{...n,y:n.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Listeners(getOwnerDocument(n)),this.windowListeners=new Listeners(getWindow(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&scrollIntoViewIfNeeded(s),n(defaultCoordinates)}handleKeyDown(e){if(isKeyboardEvent(e)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:a=defaultKeyboardCodes,coordinateGetter:o=defaultKeyboardCoordinateGetter,scrollBehavior:l="smooth"}=i,{code:u}=e;if(a.end.includes(u)){this.handleEnd(e);return}if(a.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:c}=s.current,d=c?{x:c.left,y:c.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=d);const p=o(e,{active:n,context:s.current,currentCoordinates:d});if(p){const m=subtract(p,d),g={x:0,y:0},{scrollableAncestors:E}=s.current;for(const x of E){const b=e.code,{isTop:S,isRight:C,isLeft:T,isBottom:I,maxScroll:D,minScroll:P}=getScrollPosition(x),O=getScrollElementRect(x),B={x:Math.min(b===KeyboardCode.Right?O.right-O.width/2:O.right,Math.max(b===KeyboardCode.Right?O.left:O.left+O.width/2,p.x)),y:Math.min(b===KeyboardCode.Down?O.bottom-O.height/2:O.bottom,Math.max(b===KeyboardCode.Down?O.top:O.top+O.height/2,p.y))},F=b===KeyboardCode.Right&&!C||b===KeyboardCode.Left&&!T,H=b===KeyboardCode.Down&&!I||b===KeyboardCode.Up&&!S;if(F&&B.x!==p.x){const Q=x.scrollLeft+m.x,Z=b===KeyboardCode.Right&&Q<=D.x||b===KeyboardCode.Left&&Q>=P.x;if(Z&&!m.y){x.scrollTo({left:Q,behavior:l});return}Z?g.x=x.scrollLeft-Q:g.x=b===KeyboardCode.Right?x.scrollLeft-D.x:x.scrollLeft-P.x,g.x&&x.scrollBy({left:-g.x,behavior:l});break}else if(H&&B.y!==p.y){const Q=x.scrollTop+m.y,Z=b===KeyboardCode.Down&&Q<=D.y||b===KeyboardCode.Up&&Q>=P.y;if(Z&&!m.x){x.scrollTo({top:Q,behavior:l});return}Z?g.y=x.scrollTop-Q:g.y=b===KeyboardCode.Down?x.scrollTop-D.y:x.scrollTop-P.y,g.y&&x.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,add(subtract(p,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=defaultKeyboardCodes,onActivation:i}=e,{active:a}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const l=a.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(t){return!!(t&&"distance"in t)}function isDelayConstraint(t){return!!(t&&"delay"in t)}class AbstractPointerSensor{constructor(e,n,s){var i;s===void 0&&(s=getEventListenerTarget(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:o}=a;this.props=e,this.events=n,this.document=getOwnerDocument(o),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(s),this.windowListeners=new Listeners(getWindow(o)),this.initialCoordinates=(i=getEventCoordinates(a))!=null?i:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(isDistanceConstraint(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!i)return;const u=(n=getEventCoordinates(e))!=null?n:defaultCoordinates,c=subtract(i,u);if(!s&&l){if(isDistanceConstraint(l)){if(l.tolerance!=null&&hasExceededDistance(c,l.tolerance))return this.handleCancel();if(hasExceededDistance(c,l.distance))return this.handleStart()}return isDelayConstraint(l)&&hasExceededDistance(c,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const events={move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:n}=e,s=getOwnerDocument(n.target);super(e,events,s)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(t){t[t.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(e){super(e,events$1,getOwnerDocument(e.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===MouseButton.RightClick?!1:(s?.({event:n}),!0)}}];const events$2={move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(e){super(e,events$2)}static setup(){return window.addEventListener(events$2.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,e)};function e(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:i}=n;return i.length>1?!1:(s?.({event:n}),!0)}}];var AutoScrollActivator;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(t){let{acceleration:e,activator:n=AutoScrollActivator.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:l=TraversalOrder.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:d,delta:p,threshold:m}=t;const g=useScrollIntent({delta:p,disabled:!a}),[E,x]=useInterval(),b=reactExports.useRef({x:0,y:0}),S=reactExports.useRef({x:0,y:0}),C=reactExports.useMemo(()=>{switch(n){case AutoScrollActivator.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case AutoScrollActivator.DraggableRect:return i}},[n,i,u]),T=reactExports.useRef(null),I=reactExports.useCallback(()=>{const P=T.current;if(!P)return;const O=b.current.x*S.current.x,B=b.current.y*S.current.y;P.scrollBy(O,B)},[]),D=reactExports.useMemo(()=>l===TraversalOrder.TreeOrder?[...c].reverse():c,[l,c]);reactExports.useEffect(()=>{if(!a||!c.length||!C){x();return}for(const P of D){if(s?.(P)===!1)continue;const O=c.indexOf(P),B=d[O];if(!B)continue;const{direction:F,speed:H}=getScrollDirectionAndSpeed(P,B,C,e,m);for(const Q of["x","y"])g[Q][F[Q]]||(H[Q]=0,F[Q]=0);if(H.x>0||H.y>0){x(),T.current=P,E(I,o),b.current=H,S.current=F;return}}b.current={x:0,y:0},S.current={x:0,y:0},x()},[e,I,s,x,a,o,JSON.stringify(C),JSON.stringify(g),E,c,D,d,JSON.stringify(m)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(t){let{delta:e,disabled:n}=t;const s=usePrevious(e);return useLazyMemo(i=>{if(n||!s||!i)return defaultScrollIntent;const a={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Direction.Backward]:i.x[Direction.Backward]||a.x===-1,[Direction.Forward]:i.x[Direction.Forward]||a.x===1},y:{[Direction.Backward]:i.y[Direction.Backward]||a.y===-1,[Direction.Forward]:i.y[Direction.Forward]||a.y===1}}},[n,e,s])}function useCachedNode(t,e){const n=e!==null?t.get(e):void 0,s=n?n.node.current:null;return useLazyMemo(i=>{var a;return e===null?null:(a=s??i)!=null?a:null},[s,e])}function useCombineActivators(t,e){return reactExports.useMemo(()=>t.reduce((n,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...a]},[]),[t,e])}var MeasuringStrategy;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(t){t.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(t,e){let{dragging:n,dependencies:s,config:i}=e;const[a,o]=reactExports.useState(null),{frequency:l,measure:u,strategy:c}=i,d=reactExports.useRef(t),p=b(),m=useLatestValue(p),g=reactExports.useCallback(function(S){S===void 0&&(S=[]),!m.current&&o(C=>C===null?S:C.concat(S.filter(T=>!C.includes(T))))},[m]),E=reactExports.useRef(null),x=useLazyMemo(S=>{if(p&&!n)return defaultValue;if(!S||S===defaultValue||d.current!==t||a!=null){const C=new Map;for(let T of t){if(!T)continue;if(a&&a.length>0&&!a.includes(T.id)&&T.rect.current){C.set(T.id,T.rect.current);continue}const I=T.node.current,D=I?new Rect(u(I),I):null;T.rect.current=D,D&&C.set(T.id,D)}return C}return S},[t,a,n,p,u]);return reactExports.useEffect(()=>{d.current=t},[t]),reactExports.useEffect(()=>{p||g()},[n,p]),reactExports.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),reactExports.useEffect(()=>{p||typeof l!="number"||E.current!==null||(E.current=setTimeout(()=>{g(),E.current=null},l))},[l,p,g,...s]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:a!=null};function b(){switch(c){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return n;default:return!n}}}function useInitialValue(t,e){return useLazyMemo(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function useInitialRect(t,e){return useInitialValue(t,e)}function useMutationObserver(t){let{callback:e,disabled:n}=t;const s=useEvent(e),i=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return reactExports.useEffect(()=>()=>i?.disconnect(),[i]),i}function useResizeObserver(t){let{callback:e,disabled:n}=t;const s=useEvent(e),i=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return reactExports.useEffect(()=>()=>i?.disconnect(),[i]),i}function defaultMeasure(t){return new Rect(getClientRect(t),t)}function useRect(t,e,n){e===void 0&&(e=defaultMeasure);const[s,i]=reactExports.useReducer(l,null),a=useMutationObserver({callback(u){if(t)for(const c of u){const{type:d,target:p}=c;if(d==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),o=useResizeObserver({callback:i});return useIsomorphicLayoutEffect(()=>{i(),t?(o?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),a?.disconnect())},[t]),s;function l(u){if(!t)return null;if(t.isConnected===!1){var c;return(c=u??n)!=null?c:null}const d=e(t);return JSON.stringify(u)===JSON.stringify(d)?u:d}}function useRectDelta(t){const e=useInitialValue(t);return getRectDelta(t,e)}const defaultValue$1=[];function useScrollableAncestors(t){const e=reactExports.useRef(t),n=useLazyMemo(s=>t?s&&s!==defaultValue$1&&t&&e.current&&t.parentNode===e.current.parentNode?s:getScrollableAncestors(t):defaultValue$1,[t]);return reactExports.useEffect(()=>{e.current=t},[t]),n}function useScrollOffsets(t){const[e,n]=reactExports.useState(null),s=reactExports.useRef(t),i=reactExports.useCallback(a=>{const o=getScrollableElement(a.target);o&&n(l=>l?(l.set(o,getScrollCoordinates(o)),new Map(l)):null)},[]);return reactExports.useEffect(()=>{const a=s.current;if(t!==a){o(a);const l=t.map(u=>{const c=getScrollableElement(u);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,getScrollCoordinates(c)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),s.current=t}return()=>{o(t),o(a)};function o(l){l.forEach(u=>{const c=getScrollableElement(u);c?.removeEventListener("scroll",i)})}},[i,t]),reactExports.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>add(a,o),defaultCoordinates):getScrollOffsets(t):defaultCoordinates,[t,e])}function useScrollOffsetsDelta(t,e){e===void 0&&(e=[]);const n=reactExports.useRef(null);return reactExports.useEffect(()=>{n.current=null},e),reactExports.useEffect(()=>{const s=t!==defaultCoordinates;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?subtract(t,n.current):defaultCoordinates}function useSensorSetup(t){reactExports.useEffect(()=>{if(!canUseDOM)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function useSyntheticListeners(t,e){return reactExports.useMemo(()=>t.reduce((n,s)=>{let{eventName:i,handler:a}=s;return n[i]=o=>{a(o,e)},n},{}),[t,e])}function useWindowRect(t){return reactExports.useMemo(()=>t?getWindowClientRect(t):null,[t])}const defaultValue$2=[];function useRects(t,e){e===void 0&&(e=getClientRect);const[n]=t,s=useWindowRect(n?getWindow(n):null),[i,a]=reactExports.useReducer(l,defaultValue$2),o=useResizeObserver({callback:a});return t.length>0&&i===defaultValue$2&&a(),useIsomorphicLayoutEffect(()=>{t.length?t.forEach(u=>o?.observe(u)):(o?.disconnect(),a())},[t]),i;function l(){return t.length?t.map(u=>isDocumentScrollingElement(u)?s:new Rect(e(u),u)):defaultValue$2}}function getMeasurableNode(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return isHTMLElement(e)?e:t}function useDragOverlayMeasuring(t){let{measure:e}=t;const[n,s]=reactExports.useState(null),i=reactExports.useCallback(c=>{for(const{target:d}of c)if(isHTMLElement(d)){s(p=>{const m=e(d);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),a=useResizeObserver({callback:i}),o=reactExports.useCallback(c=>{const d=getMeasurableNode(c);a?.disconnect(),d&&a?.observe(d),s(d?e(d):null)},[e,a]),[l,u]=useNodeRef(o);return reactExports.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(t,e){switch(e.type){case Action.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Action.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Action.DragEnd:case Action.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:n}=e,{id:s}=n,i=new DroppableContainersMap(t.droppable.containers);return i.set(s,n),{...t,droppable:{...t.droppable,containers:i}}}case Action.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const o=new DroppableContainersMap(t.droppable.containers);return o.set(n,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Action.UnregisterDroppable:{const{id:n,key:s}=e,i=t.droppable.containers.get(n);if(!i||s!==i.key)return t;const a=new DroppableContainersMap(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function RestoreFocus(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:i}=reactExports.useContext(InternalContext),a=usePrevious(s),o=usePrevious(n?.id);return reactExports.useEffect(()=>{if(!e&&!s&&a&&o!=null){if(!isKeyboardEvent(a)||document.activeElement===a.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:c}=l;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[u.current,c.current]){if(!d)continue;const p=findFirstFocusableNode(d);if(p){p.focus();break}}})}},[s,e,i,o,a]),null}function applyModifiers(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...s}),n):n}function useMeasuringConfiguration(t){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...t?.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...t?.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function useLayoutShiftScrollCompensation(t){let{activeNode:e,measure:n,initialRect:s,config:i=!0}=t;const a=reactExports.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;useIsomorphicLayoutEffect(()=>{if(!o&&!l||!e){a.current=!1;return}if(a.current||!s)return;const c=e?.node.current;if(!c||c.isConnected===!1)return;const d=n(c),p=getRectDelta(d,s);if(o||(p.x=0),l||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=getFirstScrollableAncestor(c);m&&m.scrollBy({top:p.y,left:p.x})}},[e,o,l,s,n])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function t(e){var n,s,i,a;let{id:o,accessibility:l,autoScroll:u=!0,children:c,sensors:d=defaultSensors,collisionDetection:p=rectIntersection,measuring:m,modifiers:g,...E}=e;const x=reactExports.useReducer(reducer,void 0,getInitialState),[b,S]=x,[C,T]=useDndMonitorProvider(),[I,D]=reactExports.useState(Status.Uninitialized),P=I===Status.Initialized,{draggable:{active:O,nodes:B,translate:F},droppable:{containers:H}}=b,Q=O?B.get(O):null,Z=reactExports.useRef({initial:null,translated:null}),ne=reactExports.useMemo(()=>{var ie;return O!=null?{id:O,data:(ie=Q?.data)!=null?ie:defaultData,rect:Z}:null},[O,Q]),re=reactExports.useRef(null),[se,G]=reactExports.useState(null),[K,M]=reactExports.useState(null),W=useLatestValue(E,Object.values(E)),ee=useUniqueId("DndDescribedBy",o),z=reactExports.useMemo(()=>H.getEnabled(),[H]),ae=useMeasuringConfiguration(m),{droppableRects:ce,measureDroppableContainers:he,measuringScheduled:fe}=useDroppableMeasuring(z,{dragging:P,dependencies:[F.x,F.y],config:ae.droppable}),Ce=useCachedNode(B,O),Me=reactExports.useMemo(()=>K?getEventCoordinates(K):null,[K]),Ye=ir(),We=useInitialRect(Ce,ae.draggable.measure);useLayoutShiftScrollCompensation({activeNode:O?B.get(O):null,config:Ye.layoutShiftCompensation,initialRect:We,measure:ae.draggable.measure});const Be=useRect(Ce,ae.draggable.measure,We),rt=useRect(Ce?Ce.parentElement:null),tt=reactExports.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:H,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=H.getNodeFor((n=tt.current.over)==null?void 0:n.id),Pe=useDragOverlayMeasuring({measure:ae.dragOverlay.measure}),Qe=(s=Pe.nodeRef.current)!=null?s:Ce,Je=P?(i=Pe.rect)!=null?i:Be:null,nt=!!(Pe.nodeRef.current&&Pe.rect),ft=useRectDelta(nt?null:Be),At=useWindowRect(Qe?getWindow(Qe):null),ot=useScrollableAncestors(P?Ue??Ce:null),qe=useRects(ot),mt=applyModifiers(g,{transform:{x:F.x-ft.x,y:F.y-ft.y,scaleX:1,scaleY:1},activatorEvent:K,active:ne,activeNodeRect:Be,containerNodeRect:rt,draggingNodeRect:Je,over:tt.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:ot,scrollableAncestorRects:qe,windowRect:At}),st=Me?add(Me,F):null,St=useScrollOffsets(ot),bt=useScrollOffsetsDelta(St),Mt=useScrollOffsetsDelta(St,[Be]),pt=add(mt,bt),rr=Je?getAdjustedRect(Je,mt):null,Ft=ne&&rr?p({active:ne,collisionRect:rr,droppableRects:ce,droppableContainers:z,pointerCoordinates:st}):null,Qt=getFirstCollision(Ft,"id"),[nr,Ht]=reactExports.useState(null),Ar=nt?mt:add(mt,Mt),Ir=adjustScale(Ar,(a=nr?.rect)!=null?a:null,Be),Qr=reactExports.useCallback((ie,ue)=>{let{sensor:ve,options:Ie}=ue;if(re.current==null)return;const Ze=B.get(re.current);if(!Ze)return;const wt=ie.nativeEvent,Gt=new ve({active:re.current,activeNode:Ze,event:wt,options:Ie,context:tt,onStart(Ee){const we=re.current;if(we==null)return;const Ne=B.get(we);if(!Ne)return;const{onDragStart:ze}=W.current,it={active:{id:we,data:Ne.data,rect:Z}};reactDomExports.unstable_batchedUpdates(()=>{ze?.(it),D(Status.Initializing),S({type:Action.DragStart,initialCoordinates:Ee,active:we}),C({type:"onDragStart",event:it})})},onMove(Ee){S({type:Action.DragMove,coordinates:Ee})},onEnd:sr(Action.DragEnd),onCancel:sr(Action.DragCancel)});reactDomExports.unstable_batchedUpdates(()=>{G(Gt),M(ie.nativeEvent)});function sr(Ee){return async function(){const{active:Ne,collisions:ze,over:it,scrollAdjustedTranslate:xt}=tt.current;let lt=null;if(Ne&&xt){const{cancelDrop:Et}=W.current;lt={activatorEvent:wt,active:Ne,collisions:ze,delta:xt,over:it},Ee===Action.DragEnd&&typeof Et=="function"&&await Promise.resolve(Et(lt))&&(Ee=Action.DragCancel)}re.current=null,reactDomExports.unstable_batchedUpdates(()=>{S({type:Ee}),D(Status.Uninitialized),Ht(null),G(null),M(null);const Et=Ee===Action.DragEnd?"onDragEnd":"onDragCancel";if(lt){const It=W.current[Et];It?.(lt),C({type:Et,event:lt})}})}}},[B]),ke=reactExports.useCallback((ie,ue)=>(ve,Ie)=>{const Ze=ve.nativeEvent,wt=B.get(Ie);if(re.current!==null||!wt||Ze.dndKit||Ze.defaultPrevented)return;const Gt={active:wt};ie(ve,ue.options,Gt)===!0&&(Ze.dndKit={capturedBy:ue.sensor},re.current=Ie,Qr(ve,ue))},[B,Qr]),Oe=useCombineActivators(d,ke);useSensorSetup(d),useIsomorphicLayoutEffect(()=>{Be&&I===Status.Initializing&&D(Status.Initialized)},[Be,I]),reactExports.useEffect(()=>{const{onDragMove:ie}=W.current,{active:ue,activatorEvent:ve,collisions:Ie,over:Ze}=tt.current;if(!ue||!ve)return;const wt={active:ue,activatorEvent:ve,collisions:Ie,delta:{x:pt.x,y:pt.y},over:Ze};reactDomExports.unstable_batchedUpdates(()=>{ie?.(wt),C({type:"onDragMove",event:wt})})},[pt.x,pt.y]),reactExports.useEffect(()=>{const{active:ie,activatorEvent:ue,collisions:ve,droppableContainers:Ie,scrollAdjustedTranslate:Ze}=tt.current;if(!ie||re.current==null||!ue||!Ze)return;const{onDragOver:wt}=W.current,Gt=Ie.get(Qt),sr=Gt&&Gt.rect.current?{id:Gt.id,rect:Gt.rect.current,data:Gt.data,disabled:Gt.disabled}:null,Ee={active:ie,activatorEvent:ue,collisions:ve,delta:{x:Ze.x,y:Ze.y},over:sr};reactDomExports.unstable_batchedUpdates(()=>{Ht(sr),wt?.(Ee),C({type:"onDragOver",event:Ee})})},[Qt]),useIsomorphicLayoutEffect(()=>{tt.current={activatorEvent:K,active:ne,activeNode:Ce,collisionRect:rr,collisions:Ft,droppableRects:ce,draggableNodes:B,draggingNode:Qe,draggingNodeRect:Je,droppableContainers:H,over:nr,scrollableAncestors:ot,scrollAdjustedTranslate:pt},Z.current={initial:Je,translated:rr}},[ne,Ce,Ft,rr,B,Qe,Je,ce,H,nr,ot,pt]),useAutoScroller({...Ye,delta:F,draggingRect:rr,pointerCoordinates:st,scrollableAncestors:ot,scrollableAncestorRects:qe});const Yt=reactExports.useMemo(()=>({active:ne,activeNode:Ce,activeNodeRect:Be,activatorEvent:K,collisions:Ft,containerNodeRect:rt,dragOverlay:Pe,draggableNodes:B,droppableContainers:H,droppableRects:ce,over:nr,measureDroppableContainers:he,scrollableAncestors:ot,scrollableAncestorRects:qe,measuringConfiguration:ae,measuringScheduled:fe,windowRect:At}),[ne,Ce,Be,K,Ft,rt,Pe,B,H,ce,nr,he,ot,qe,ae,fe,At]),Xt=reactExports.useMemo(()=>({activatorEvent:K,activators:Oe,active:ne,activeNodeRect:Be,ariaDescribedById:{draggable:ee},dispatch:S,draggableNodes:B,over:nr,measureDroppableContainers:he}),[K,Oe,ne,Be,S,ee,B,nr,he]);return React$1.createElement(DndMonitorContext.Provider,{value:T},React$1.createElement(InternalContext.Provider,{value:Xt},React$1.createElement(PublicContext.Provider,{value:Yt},React$1.createElement(ActiveDraggableContext.Provider,{value:Ir},c)),React$1.createElement(RestoreFocus,{disabled:l?.restoreFocus===!1})),React$1.createElement(Accessibility,{...l,hiddenTextDescribedById:ee}));function ir(){const ie=se?.autoScrollEnabled===!1,ue=typeof u=="object"?u.enabled===!1:u===!1,ve=P&&!ie&&!ue;return typeof u=="object"?{...u,enabled:ve}:{enabled:ve}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Droppable";function useDraggable(t){let{id:e,data:n,disabled:s=!1,attributes:i}=t;const a=useUniqueId(ID_PREFIX$1),{activators:o,activatorEvent:l,active:u,activeNodeRect:c,ariaDescribedById:d,draggableNodes:p,over:m}=reactExports.useContext(InternalContext),{role:g=defaultRole,roleDescription:E="draggable",tabIndex:x=0}=i??{},b=u?.id===e,S=reactExports.useContext(b?ActiveDraggableContext:NullContext),[C,T]=useNodeRef(),[I,D]=useNodeRef(),P=useSyntheticListeners(o,e),O=useLatestValue(n);useIsomorphicLayoutEffect(()=>(p.set(e,{id:e,key:a,node:C,activatorNode:I,data:O}),()=>{const F=p.get(e);F&&F.key===a&&p.delete(e)}),[p,e]);const B=reactExports.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":s,"aria-pressed":b&&g===defaultRole?!0:void 0,"aria-roledescription":E,"aria-describedby":d.draggable}),[s,g,x,b,E,d.draggable]);return{active:u,activatorEvent:l,activeNodeRect:c,attributes:B,isDragging:b,listeners:s?void 0:P,node:C,over:m,setNodeRef:T,setActivatorNodeRef:D,transform:S}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:i}=t;const a=useUniqueId(ID_PREFIX$1$1),{active:o,dispatch:l,over:u,measureDroppableContainers:c}=reactExports.useContext(InternalContext),d=reactExports.useRef({disabled:n}),p=reactExports.useRef(!1),m=reactExports.useRef(null),g=reactExports.useRef(null),{disabled:E,updateMeasurementsFor:x,timeout:b}={...defaultResizeObserverConfig,...i},S=useLatestValue(x??s),C=reactExports.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(S.current)?S.current:[S.current]),g.current=null},b)},[b]),T=useResizeObserver({callback:C,disabled:E||!o}),I=reactExports.useCallback((B,F)=>{T&&(F&&(T.unobserve(F),p.current=!1),B&&T.observe(B))},[T]),[D,P]=useNodeRef(I),O=useLatestValue(e);return reactExports.useEffect(()=>{!T||!D.current||(T.disconnect(),p.current=!1,T.observe(D.current))},[D,T]),useIsomorphicLayoutEffect(()=>(l({type:Action.RegisterDroppable,element:{id:s,key:a,disabled:n,node:D,rect:m,data:O}}),()=>l({type:Action.UnregisterDroppable,key:a,id:s})),[s]),reactExports.useEffect(()=>{n!==d.current.disabled&&(l({type:Action.SetDroppableDisabled,id:s,key:a,disabled:n}),d.current.disabled=n)},[s,a,n,l]),{active:o,rect:m,isOver:u?.id===s,node:D,over:u,setNodeRef:P}}function arrayMove(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function getSortedRects(t,e){return t.reduce((n,s,i)=>{const a=e.get(s);return a&&(n[i]=a),n},Array(t.length))}function isValidIndex(t){return t!==null&&t>=0}function itemsEqual(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function normalizeDisabled(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const rectSortingStrategy=t=>{let{rects:e,activeIndex:n,overIndex:s,index:i}=t;const a=arrayMove(e,s,n),o=e[i],l=a[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:i,rects:a,overIndex:o}=t;const l=(e=a[n])!=null?e:s;if(!l)return null;if(i===n){const c=a[o];return c?{x:0,y:n<o?c.top+c.height-(l.top+l.height):c.top-l.top,...defaultScale$1}:null}const u=getItemGap$1(a,i,n);return i>n&&i<=o?{x:0,y:-l.height-u,...defaultScale$1}:i<n&&i>=o?{x:0,y:l.height+u,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(t,e,n){const s=t[e],i=t[e-1],a=t[e+1];return s?n<e?i?s.top-(i.top+i.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const ID_PREFIX="Sortable",Context=React$1.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(t){let{children:e,id:n,items:s,strategy:i=rectSortingStrategy,disabled:a=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:c,measureDroppableContainers:d}=useDndContext(),p=useUniqueId(ID_PREFIX,n),m=l.rect!==null,g=reactExports.useMemo(()=>s.map(P=>typeof P=="object"&&"id"in P?P.id:P),[s]),E=o!=null,x=o?g.indexOf(o.id):-1,b=c?g.indexOf(c.id):-1,S=reactExports.useRef(g),C=!itemsEqual(g,S.current),T=b!==-1&&x===-1||C,I=normalizeDisabled(a);useIsomorphicLayoutEffect(()=>{C&&E&&d(g)},[C,g,E,d]),reactExports.useEffect(()=>{S.current=g},[g]);const D=reactExports.useMemo(()=>({activeIndex:x,containerId:p,disabled:I,disableTransforms:T,items:g,overIndex:b,useDragOverlay:m,sortedRects:getSortedRects(g,u),strategy:i}),[x,p,I.draggable,I.droppable,T,g,b,u,m,i]);return React$1.createElement(Context.Provider,{value:D},e)}const defaultNewIndexGetter=t=>{let{id:e,items:n,activeIndex:s,overIndex:i}=t;return arrayMove(n,s,i).indexOf(e)},defaultAnimateLayoutChanges=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:i,items:a,newIndex:o,previousItems:l,previousContainerId:u,transition:c}=t;return!c||!s||l!==a&&i===o?!1:n?!0:o!==i&&e===u},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS$1.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(t){let{disabled:e,index:n,node:s,rect:i}=t;const[a,o]=reactExports.useState(null),l=reactExports.useRef(n);return useIsomorphicLayoutEffect(()=>{if(!e&&n!==l.current&&s.current){const u=i.current;if(u){const c=getClientRect(s.current,{ignoreTransform:!0}),d={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(d.x||d.y)&&o(d)}}n!==l.current&&(l.current=n)},[e,n,s,i]),reactExports.useEffect(()=>{a&&o(null)},[a]),a}function useSortable(t){let{animateLayoutChanges:e=defaultAnimateLayoutChanges,attributes:n,disabled:s,data:i,getNewIndex:a=defaultNewIndexGetter,id:o,strategy:l,resizeObserverConfig:u,transition:c=defaultTransition}=t;const{items:d,containerId:p,activeIndex:m,disabled:g,disableTransforms:E,sortedRects:x,overIndex:b,useDragOverlay:S,strategy:C}=reactExports.useContext(Context),T=normalizeLocalDisabled(s,g),I=d.indexOf(o),D=reactExports.useMemo(()=>({sortable:{containerId:p,index:I,items:d},...i}),[p,i,I,d]),P=reactExports.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:O,node:B,isOver:F,setNodeRef:H}=useDroppable({id:o,data:D,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...u}}),{active:Q,activatorEvent:Z,activeNodeRect:ne,attributes:re,setNodeRef:se,listeners:G,isDragging:K,over:M,setActivatorNodeRef:W,transform:ee}=useDraggable({id:o,data:D,attributes:{...defaultAttributes,...n},disabled:T.draggable}),z=useCombinedRefs(H,se),ae=!!Q,ce=ae&&!E&&isValidIndex(m)&&isValidIndex(b),he=!S&&K,fe=he&&ce?ee:null,Me=ce?fe??(l??C)({rects:x,activeNodeRect:ne,activeIndex:m,overIndex:b,index:I}):null,Ye=isValidIndex(m)&&isValidIndex(b)?a({id:o,items:d,activeIndex:m,overIndex:b}):I,We=Q?.id,Be=reactExports.useRef({activeId:We,items:d,newIndex:Ye,containerId:p}),rt=d!==Be.current.items,tt=e({active:Q,containerId:p,isDragging:K,isSorting:ae,id:o,index:I,items:d,newIndex:Be.current.newIndex,previousItems:Be.current.items,previousContainerId:Be.current.containerId,transition:c,wasDragging:Be.current.activeId!=null}),Ue=useDerivedTransform({disabled:!tt,index:I,node:B,rect:O});return reactExports.useEffect(()=>{ae&&Be.current.newIndex!==Ye&&(Be.current.newIndex=Ye),p!==Be.current.containerId&&(Be.current.containerId=p),d!==Be.current.items&&(Be.current.items=d)},[ae,Ye,p,d]),reactExports.useEffect(()=>{if(We===Be.current.activeId)return;if(We&&!Be.current.activeId){Be.current.activeId=We;return}const Qe=setTimeout(()=>{Be.current.activeId=We},50);return()=>clearTimeout(Qe)},[We]),{active:Q,activeIndex:m,attributes:re,data:D,rect:O,index:I,newIndex:Ye,items:d,isOver:F,isSorting:ae,isDragging:K,listeners:G,node:B,overIndex:b,over:M,setNodeRef:z,setActivatorNodeRef:W,setDroppableNodeRef:H,setDraggableNodeRef:se,transform:Ue??Me,transition:Pe()};function Pe(){if(Ue||rt&&Be.current.newIndex===I)return disabledTransition;if(!(he&&!isKeyboardEvent(Z)||!c)&&(ae||tt))return CSS$1.Transition.toString({...c,property:transitionProperty})}}function normalizeLocalDisabled(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}function hasSortableData(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const directions=[KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left],sortableKeyboardCoordinates=(t,e)=>{let{context:{active:n,collisionRect:s,droppableRects:i,droppableContainers:a,over:o,scrollableAncestors:l}}=e;if(directions.includes(t.code)){if(t.preventDefault(),!n||!s)return;const u=[];a.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=i.get(p.id);if(m)switch(t.code){case KeyboardCode.Down:s.top<m.top&&u.push(p);break;case KeyboardCode.Up:s.top>m.top&&u.push(p);break;case KeyboardCode.Left:s.left>m.left&&u.push(p);break;case KeyboardCode.Right:s.left<m.left&&u.push(p);break}});const c=closestCorners({collisionRect:s,droppableRects:i,droppableContainers:u});let d=getFirstCollision(c,"id");if(d===o?.id&&c.length>1&&(d=c[1].id),d!=null){const p=a.get(n.id),m=a.get(d),g=m?i.get(m.id):null,E=m?.node.current;if(E&&g&&p&&m){const b=getScrollableAncestors(E).some((P,O)=>l[O]!==P),S=isSameContainer(p,m),C=isAfter(p,m),T=b||!S?{x:0,y:0}:{x:C?s.width-g.width:0,y:C?s.height-g.height:0},I={x:g.left,y:g.top};return T.x&&T.y?I:subtract(I,T)}}}};function isSameContainer(t,e){return!hasSortableData(t)||!hasSortableData(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function isAfter(t,e){return!hasSortableData(t)||!hasSortableData(e)||!isSameContainer(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const SortableItem=({buttonText:t,id:e,answered:n,correct:s,draggable:i,multiAnswer:a})=>{const{attributes:o,listeners:l,setNodeRef:u,transform:c,transition:d}=useSortable({id:e}),p=n?{}:{...l},m={transform:CSS$1.Transform.toString(c),transition:d};return jsxRuntimeExports.jsxs("span",{id:e.key,className:`grit sortable-item ${s?"correct":""} ${n?"answered":"clickable"} ${i?"draggable":""} ${o["aria-pressed"]?"active":""}`,ref:u,style:m,...o,...p,children:[jsxRuntimeExports.jsx("span",{"data-test":"dragItemText",className:"lists-menus__list-item dragItemText",children:t}),i&&!n?jsxRuntimeExports.jsx("span",{className:"icon__wrapper",style:{touchAction:"none"},children:jsxRuntimeExports.jsx("span",{"data-test":"dragIcon",className:"icon drag-handle",style:{...getIconStyle("drag-handle","small")}})}):null,n&&jsxRuntimeExports.jsxs("div",{className:"icon__wrapper",children:[!a&&s&&jsxRuntimeExports.jsx("span",{className:"icon correct",style:{...getIconStyle("checkmark-inverted","small")}}),!a&&!s&&jsxRuntimeExports.jsx("span",{className:"icon incorrect",style:{...getIconStyle("x-inverted","small")}})]})]})},ReorderListWrapper=({itemsArray:t,isSubmitted:e,handleButtonMove:n})=>{const[s,i]=reactExports.useState(t),a=useSensors(useSensor(MouseSensor),useSensor(TouchSensor),useSensor(KeyboardSensor,{coordinateGetter:sortableKeyboardCoordinates})),o=(u,c)=>t.filter(p=>p.key===u)[0]?.isCorrect,l=u=>{const{active:c,over:d}=u;if(c&&d&&n){const p=s.indexOf(c.id),m=s.indexOf(d.id),g=arrayMove(s,p,m);i(g);const E=g.map(x=>x.key);n(E)}};return jsxRuntimeExports.jsx("ul",{className:"gritCourseflowNode__answerButtonList",children:jsxRuntimeExports.jsx(DndContext,{sensors:a,collisionDetection:closestCenter,onDragEnd:l,children:jsxRuntimeExports.jsx(SortableContext,{items:s,strategy:verticalListSortingStrategy,children:s.map(u=>jsxRuntimeExports.jsx("li",{className:"gritCourseflowNode__answerButtonListItem",children:jsxRuntimeExports.jsx(SortableItem,{id:u,draggable:!0,buttonText:u.value,answered:e,correct:o(u.key)??u.isCorrect,multiAnswer:!1})},u.key))})})})},VideoQuestion=({isSubmitted:t,node:e,videoEnded:n})=>{const s=useSelector(selectprogressId),{data:i,currentVideoSeconds:a,isLeadingNode:o}=e??{},{video:l,videoExplanation:u,_id:c}=i??{};let d;const p=()=>l&&!t?(d=l,!0):t&&u?(d=u,!0):!1;return reactExports.useEffect(()=>{l&&!t&&(d=l),t&&u&&(d=u)},[t]),jsxRuntimeExports.jsx("div",{children:p()&&jsxRuntimeExports.jsx(VideoPlayerComponent,{streamUrl:lodashExports.get(d,"streamingUrl",""),subtitleUrl:lodashExports.get(d,"subtitleUrl",""),className:"gritCourseflowNode__video",id:typeof c=="string"?c.replace(/[0-9]/g,""):"",nodeId:e?._id,img:lodashExports.get(d,"thumbnailUrl",""),currentTime:a,onVideoEnded:()=>{n(!0)},isLeadingNode:o,isSkipAllowed:e?.isSkipAllowed,progressId:s,hideFullscreen:!1,isAutoplay:!0,isVideoQuestion:!0})})},templatesEnum={PLAIN_TEXT:"plainText",TEXT_AND_IMAGE:"textAndImage",RICH_TEXT:"richText",QUESTION_VIDEO:"questionVideo",TRUE_OR_FALSE:"trueOrFalse"},answerTypesEnum={REORDER_LIST:"reorderList",CLICKABLE_IMAGE:"clickableImage"},Question=({onSubmitAnswer:t,node:e,onVideoEnded:n})=>{const s=useSelector(ee=>ee.courseflow),i=useSelector(selectVirtualInstructorState),{virtualInstructorStatus:a}=i,{isVideoEnded:o}=s,[l,u]=reactExports.useState(null),[c,d]=reactExports.useState([]),p=lodashExports.get(e,"data.answerKey",""),m=!!(p&&p.length>0),g=lodashExports.get(e,"data.answerList",[]),E=lodashExports.get(e,"data.isCorrect"),x=lodashExports.get(e,"data.isHiddenResults"),b=lodashExports.get(e,"data.isSingleChoice"),S=lodashExports.get(e,"data.explanation"),[C,T]=reactExports.useState(templatesEnum.PLAIN_TEXT),[I,D]=reactExports.useState(""),[P,O]=reactExports.useState(!1),B=lodashExports.get(e,"data"),F=reactExports.useRef(null),H=useDispatch(),Q=(ee=void 0)=>{b?ee=ee||l:ee=ee||c,ee&&t&&t(ee,b)},Z=(ee=!1)=>{n(ee)};reactExports.useEffect(()=>{e.data.template==="QUESTION_TEMPLATE_2"&&T(templatesEnum.TRUE_OR_FALSE),e.data.template==="QUESTION_TEMPLATE_7"?T(templatesEnum.RICH_TEXT):e.data.template!=="QUESTION_TEMPLATE_7"&&e.data.imageUrl?T(templatesEnum.TEXT_AND_IMAGE):e.data.template==="QUESTION_VIDEO"?T(templatesEnum.QUESTION_VIDEO):T(templatesEnum.PLAIN_TEXT),e.data.template==="QUESTION_ORDERED_LIST"?D(answerTypesEnum.REORDER_LIST):e.data.template==="QUESTION_CLICKABLE_IMAGE"&&D(answerTypesEnum.CLICKABLE_IMAGE)},[e.data.template]),reactExports.useEffect(()=>{m&&!x&&F.current&&F.current.scrollIntoView()},[m,x]),reactExports.useEffect(()=>{const ee=e.data.template==="QUESTION_VIDEO",z=!l&&lodashExports.isEmpty(c)&&!P;H({type:SET_NAVIGATION,payload:{forwardDisabled:z,forwardLabel:z?"":ee?"Submit Answer":"Check Answer",choice:l,multiChoice:c,reorderSubmit:P}})},[l,c,P]);const ne=ee=>{b?u(ee):d(z=>z.includes(ee)?z.filter(ae=>ae!==ee):[...z,ee])};useKeyPress(["1","2","3","4"],ee=>{if(m)return;ee.preventDefault();const z=parseInt(ee.key,10)||0,ae=lodashExports.get(e,"data.answerList",[]),ce=lodashExports.get(ae,`[${z-1}].key`);ce&&ne(ce)},[l,m,e,b]);const re=ee=>{O(!0),d(ee)},se=ee=>{if(B.tagList[0]==="MULTI_CORRECT_ANSWERS"||B.tagList[0]==="ORDERED_LIST"||I===answerTypesEnum.CLICKABLE_IMAGE){const z=g.filter(ae=>ae.key===ee);if(z[0]?.isSelected)return z[0]?.isCorrect}},G=()=>{Q()},K=()=>!!(C!==templatesEnum.QUESTION_VIDEO||o&&!m||!B.video&&!B.videoExplanation&&!m||S&&m),M=()=>["QUESTION_TEMPLATE_2","QUESTION_TEMPLATE_7","QUESTION_ORDERED_LIST","QUESTION_CLICKABLE_IMAGE","QUESTION_VIDEO"].includes(e?.data?.template)?!1:!!(C!==templatesEnum.QUESTION_VIDEO&&!m||!B.video&&!B.videoExplanation&&!m||o&&!m),W=ee=>{const z=m&&se(ee.key)||ee?.isCorrect;if(!ee.isSelected&&ee.isCorrect)return"missed";if(ee.isSelected&&!z)return"incorrect";if(z)return"correct"};return jsxRuntimeExports.jsxs("div",{"data-test":"popupQuestionContainer",className:"grit question-section gritCourseflowNode gritCourseflowNode--question",children:[C===templatesEnum.RICH_TEXT?jsxRuntimeExports.jsx("div",{className:"ace-content",children:jsxRuntimeExports.jsx("div",{className:"ace-content--mark-up",children:jsxRuntimeExports.jsx("div",{className:"gritCourseflowNode__markupContainer content__markup-new",dangerouslySetInnerHTML:{__html:e.data.question}})})}):null,C===templatesEnum.QUESTION_VIDEO?jsxRuntimeExports.jsxs("div",{className:"video-question",children:[jsxRuntimeExports.jsx(VideoQuestion,{node:e,isSubmitted:m,videoEnded:ee=>{Z(ee)}}),jsxRuntimeExports.jsx("h2",{className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--questionVideo headings__h2",dangerouslySetInnerHTML:{__html:e.data.question}})]}):null,C===templatesEnum.TEXT_AND_IMAGE?jsxRuntimeExports.jsx("div",{children:I===answerTypesEnum.CLICKABLE_IMAGE?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--textAndImage headings__h1",dangerouslySetInnerHTML:{__html:e.data.question}}),jsxRuntimeExports.jsx("div",{className:"gritCourseflowNode__textAndImageContainer",children:jsxRuntimeExports.jsx(ImageMap,{questionId:e?.data?._id,imageUrl:e?.data?.imageUrl,imageAnswerList:g,onClick:ee=>{m||ne(ee)},chosenAnswerList:c||[],chosenAnswer:l??"",getGradedState:ee=>W(ee),isSubmitted:m,altImageText:e?.data?.altImageText})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{className:"gritCourseflowNode__questionImage",src:e.data.imageUrl,alt:e.data.question}),jsxRuntimeExports.jsx("h2",{className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--textAndImage gritHeading-1 headings__h1",dangerouslySetInnerHTML:{__html:e.data.question}})]})}):null,C===templatesEnum.PLAIN_TEXT?jsxRuntimeExports.jsx("h2",{"data-test":"questionHeader",className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--plainText headings__h1",dangerouslySetInnerHTML:{__html:e.data.question}}):null,!b&&e?.data?.instructions&&I!==answerTypesEnum.REORDER_LIST?jsxRuntimeExports.jsx("h6",{"data-test":"selectAllThatApply",className:"gritCourseflowNode__questionInstructions headings__h6",dangerouslySetInnerHTML:{__html:e?.data?.instructions}}):null,I!==answerTypesEnum.CLICKABLE_IMAGE&&I===answerTypesEnum.REORDER_LIST?jsxRuntimeExports.jsx(ReorderListWrapper,{itemsArray:g,handleButtonMove:m?null:ee=>{re(ee)},isSubmitted:m}):K()&&jsxRuntimeExports.jsx("ul",{"data-test":"answerButtonList",className:"gritCourseflowNode__answerButtonList",children:g.map(ee=>{const z=ae=>{m||ne(ae)};return jsxRuntimeExports.jsx("li",{className:"gritCourseflowNode__answerButtonListItem",children:jsxRuntimeExports.jsx(AnswerButton,{"data-test":"popupAnswer",text:ee.value,onClick:()=>{z(ee.key)},selected:m?ee?.isSelected:l===ee.key||c.includes(ee.key),gradedState:W(ee)})},ee.key)})}),M()?jsxRuntimeExports.jsx("div",{className:"gritCourseflowNode__submitButtonWrap",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"popupSubmitAnswerButton",disabled:!l&&lodashExports.isEmpty(c)&&!P,onClick:()=>{G()},children:"Submit Answer"})}):null,m&&!x?jsxRuntimeExports.jsx("div",{ref:F,children:B.isInstructor?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(QuizResultInstructor,{question:e.data.question,answer:getCourseflowQuestionNodeSelectedAnswers(s,e._id),variant:E?"correct":"incorrect",explanation:e?.data?.explanation,isInstructorGlobalEnabled:a.isInstructorGlobalEnabled}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(InstructorAvatar,{})})]}):jsxRuntimeExports.jsxs(Root$2,{variant:E?"correct":"incorrect",children:[E?jsxRuntimeExports.jsx(CheckmarkInverted,{size:"small",className:"w-8! h-8!"}):jsxRuntimeExports.jsx(XInverted,{size:"small",className:"w-8! h-8!"}),jsxRuntimeExports.jsxs(Content$2,{children:[jsxRuntimeExports.jsx(Title,{children:E?"Correct":"Incorrect"}),jsxRuntimeExports.jsx(Description,{children:e.data.explanation||"No explanation provided."})]})]})}):null]})};function useIntersectionObserver(t,{threshold:e=0,root:n=null,rootMargin:s="0%",freezeOnceVisible:i=!1}){const[a,o]=reactExports.useState(),l=a?.isIntersecting&&i,u=([c])=>{o(c)};return reactExports.useEffect(()=>{const c=t.current;if(!!!window.IntersectionObserver||l||!c)return;const p={threshold:e,root:n,rootMargin:s},m=new IntersectionObserver(u,p);return m.observe(c),()=>{m.disconnect()}},[t.current,JSON.stringify(e),n,s,l]),a}const InlineGlossaryModal=t=>{const{showModal:e,toggleModal:n,content:s,linkUrl:i,heading:a,imageUrl:o}=t,l=reactExports.useRef(null),u=useDispatch();return reactExports.useEffect(()=>{const c=p=>{l.current&&!l.current.contains(p.target)&&e&&n()},d=p=>{p.key==="Escape"&&e&&n()};return e&&(document.addEventListener("keydown",d),document.addEventListener("mousedown",c)),()=>{document.removeEventListener("keydown",d),document.removeEventListener("mousedown",c)}},[e,n]),e?ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{className:"gritModalOverlay",children:jsxRuntimeExports.jsxs("div",{ref:l,className:"gritModal glossary-dialog",role:"dialog","aria-modal":"true",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx(Icon,{id:"modal-dialog-close",type:"close",size:"tiny",altText:"Close",mood:"regular",handleClick:n,className:"gritModal__closeIcon-overlay z-10"})}),jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("div",{className:"gritModal__textWrap",children:[jsxRuntimeExports.jsx("h1",{"data-test":"modalTitle",className:"gritModal__heading",children:a}),jsxRuntimeExports.jsx("p",{"data-test":"modalText",className:"gritModal__message",children:s}),i?jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"glossaryLink",onClick:()=>{u({type:OPEN_LINK,payload:{linkObj:{link:i,type:"URL"}}})},children:"Learn more"}):null]}),o?jsxRuntimeExports.jsx("div",{className:"gritModal__imageWrapper","data-test":"glossaryImage",style:{backgroundImage:`url(${o})`}}):null]})]})}),document.body):null},getFeatureCardImage=(t,e)=>{let n="";switch(t){case"light":n=`${URLS.WEBASSETS}/static-assets/feature-card-${e}-light.png`;break;case"dark":n=`${URLS.WEBASSETS}/static-assets/feature-card-${e}-dark.png`;break;case"high-contrast":n=`${URLS.WEBASSETS}/static-assets/feature-card-${e}-contrast.png`;break;default:n=`${URLS.WEBASSETS}/static-assets/feature-card-${e}-light.png`;break}return n},instructorFeatureCardData=t=>[{title:"Virtual Instructor",position:"bottom--right",image:t,imagePosition:"bottom",showPagination:!1,showTryItNowButtons:!0,tag:"TRY IT OUT",descriptionArray:["In this course you have a dedicated AI-powered instructor at your fingertips, armed with access to all course content, ready to assist you whenever you need it.","Your Virtual Instructor can help you recall crucial topics, define key terms, simplify challenging concepts, and create real-life scenarios to explain difficult subjects."]}],AceHeadState=({mode:t})=>t!=="disabled"?jsxRuntimeExports.jsxs("svg",{className:"",width:"80",height:"82",viewBox:"0 0 80 82",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M65.385 27.21C65.385 23.99 62.785 21.36 59.585 21.36H45.935C45.685 18.49 43.285 16.23 40.365 16.23C37.445 16.23 35.045 18.49 34.795 21.36H21.415C18.215 21.36 15.615 23.98 15.615 27.21V41.25C12.905 41.45 11.665 44.94 11.665 48.19C11.665 51.44 12.915 54.97 15.655 55.13C15.925 56.79 17.355 58.05 19.075 58.05C19.505 58.05 19.925 57.97 20.315 57.82V58.4C20.315 60.81 22.265 62.77 24.655 62.77H56.365C58.755 62.77 60.705 60.81 60.705 58.4V57.83C61.095 57.98 61.505 58.06 61.925 58.06C63.645 58.06 65.075 56.79 65.345 55.14C68.085 54.98 69.335 51.47 69.335 48.2C69.335 44.93 68.095 41.46 65.385 41.26V27.21Z",fill:"#43646F",className:"ace-outline"}),jsxRuntimeExports.jsx("path",{className:"fill",d:"M56.365 36.52H24.655C23.355 36.52 22.315 37.58 22.315 38.89V58.4C22.315 59.71 23.355 60.77 24.655 60.77H56.365C57.665 60.77 58.705 59.71 58.705 58.4V38.89C58.705 37.58 57.665 36.52 56.365 36.52ZM30.215 52.29C27.355 52.29 25.045 49.62 25.045 46.32C25.045 43.02 27.355 40.36 30.215 40.36C33.075 40.36 35.375 43.03 35.375 46.32C35.375 49.61 33.065 52.29 30.215 52.29ZM40.215 57.73C37.385 57.73 35.095 56.05 35.095 53.96H45.325C45.325 56.05 43.035 57.73 40.215 57.73ZM49.935 52.28C47.115 52.28 44.825 49.64 44.825 46.39C44.825 43.14 47.115 40.49 49.935 40.49C52.755 40.49 55.045 43.13 55.045 46.39C55.045 49.65 52.755 52.28 49.935 52.28ZM30.215 42.34C28.305 42.34 26.765 44.12 26.765 46.32C26.765 48.52 28.305 50.3 30.215 50.3C32.125 50.3 33.665 48.52 33.665 46.32C33.665 44.12 32.115 42.34 30.215 42.34ZM30.745 48.83C29.835 48.83 29.105 48.09 29.105 47.18C29.105 46.27 29.835 45.54 30.745 45.54C31.655 45.54 32.385 46.27 32.385 47.18C32.385 48.09 31.655 48.83 30.745 48.83ZM49.935 42.35C48.005 42.35 46.435 44.16 46.435 46.39C46.435 48.62 48.005 50.42 49.935 50.42C51.865 50.42 53.435 48.62 53.435 46.39C53.435 44.16 51.865 42.35 49.935 42.35ZM49.575 48.92C48.645 48.92 47.905 48.18 47.905 47.26C47.905 46.34 48.645 45.59 49.575 45.59C50.505 45.59 51.235 46.34 51.235 47.26C51.235 48.18 50.495 48.92 49.575 48.92ZM63.395 27.21V54.57C63.395 55.39 62.735 56.05 61.935 56.05C61.135 56.05 60.475 55.39 60.475 54.57V27.21C60.475 26.72 60.075 26.32 59.595 26.32H21.415C20.935 26.32 20.535 26.72 20.535 27.21V54.57C20.535 55.39 19.875 56.05 19.075 56.05C18.275 56.05 17.615 55.39 17.615 54.57V27.21C17.615 25.09 19.325 23.36 21.415 23.36H59.585C61.685 23.36 63.385 25.09 63.385 27.21H63.395ZM15.855 43.24V53.14C14.645 53.14 13.665 50.92 13.665 48.19C13.665 45.46 14.645 43.24 15.855 43.24ZM67.335 48.19C67.335 50.92 66.355 53.14 65.145 53.14V43.24C66.355 43.24 67.335 45.46 67.335 48.19ZM40.365 18.23C42.345 18.23 43.955 19.86 43.955 21.86H36.775C36.775 19.85 38.385 18.23 40.365 18.23ZM40.365 28.24C46.025 28.24 50.625 31.13 50.625 34.71H30.115C30.115 31.14 34.705 28.24 40.375 28.24H40.365Z",fill:"#F2F5F5"}),t==="focus"&&jsxRuntimeExports.jsx("path",{className:"focus",fillRule:"evenodd",clipRule:"evenodd",d:"M69.385 38.6435C70.5668 39.5217 71.4075 40.6938 71.9561 41.794C72.9556 43.7988 73.335 46.1372 73.335 48.2C73.335 50.2646 72.9525 52.6164 71.9432 54.6292C71.2454 56.0208 70.0749 57.5304 68.3362 58.4044C67.3798 60.0094 65.8402 61.2336 64.0002 61.767C62.7103 64.7034 59.7857 66.77 56.365 66.77H24.655C21.2328 66.77 18.3071 64.7014 17.0181 61.7628C15.1694 61.2333 13.6191 60.0077 12.6587 58.3907C10.9182 57.5122 9.74995 55.9965 9.05551 54.609C8.04856 52.597 7.66504 50.2474 7.66504 48.19C7.66504 46.1344 8.04544 43.7983 9.04265 41.7942C9.58944 40.6954 10.43 39.5181 11.615 38.6358V27.21C11.615 21.8022 15.9747 17.36 21.415 17.36H31.885C33.4907 14.3177 36.6747 12.23 40.365 12.23C44.0554 12.23 47.2394 14.3177 48.8451 17.36H59.585C65.0298 17.36 69.385 21.8167 69.385 27.21V38.6435ZM45.935 21.36H59.585C62.785 21.36 65.385 23.99 65.385 27.21V41.26C68.095 41.46 69.335 44.93 69.335 48.2C69.335 51.47 68.085 54.98 65.345 55.14C65.1434 56.372 64.2951 57.3922 63.1621 57.83C62.7778 57.9785 62.3607 58.06 61.925 58.06C61.505 58.06 61.095 57.98 60.705 57.83V58.4C60.705 59.6556 60.1758 60.789 59.3307 61.5868C58.5538 62.3202 57.5099 62.77 56.365 62.77H24.655C23.5065 62.77 22.4595 62.3173 21.6818 61.5796C20.8412 60.7822 20.315 59.6518 20.315 58.4V57.82C19.925 57.97 19.505 58.05 19.075 58.05C18.6379 58.05 18.2196 57.9686 17.8342 57.82C16.7031 57.3838 15.8564 56.3681 15.655 55.13C12.915 54.97 11.665 51.44 11.665 48.19C11.665 44.94 12.905 41.45 15.615 41.25V27.21C15.615 23.98 18.215 21.36 21.415 21.36H34.795C35.045 18.49 37.445 16.23 40.365 16.23C43.285 16.23 45.685 18.49 45.935 21.36Z",fill:"#C4EEF2"}),jsxRuntimeExports.jsx("path",{d:"M40 6C40 3.79086 41.7909 2 44 2H75C77.2091 2 79 3.79086 79 6V20.7119C79 22.921 77.2091 24.7119 75 24.7119H73C73 24.7119 64.75 33.7966 61 35.5C63.5 30.3898 63.5 26.4153 59.5 24.7119H44C41.7909 24.7119 40 22.921 40 20.7119V6Z",fill:"#FF3072",className:"bubble"}),jsxRuntimeExports.jsx("circle",{cx:"51",cy:"14",r:"3",fill:"white"}),jsxRuntimeExports.jsx("circle",{cx:"60",cy:"14",r:"3",fill:"white"}),jsxRuntimeExports.jsx("circle",{cx:"69",cy:"14",r:"3",fill:"white"})]}):jsxRuntimeExports.jsxs("svg",{className:"disabled",width:"80",height:"82",viewBox:"0 0 80 82",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M65.0274 41.4973V27.3185C65.0274 24.0667 62.4125 21.4107 59.1942 21.4107H45.4661C45.2147 18.5123 42.8009 16.23 39.8642 16.23C36.9275 16.23 34.5138 18.5123 34.2624 21.4107H20.8058C17.5875 21.4107 14.9726 24.0566 14.9726 27.3185V41.4973C12.2471 41.6993 11 45.2237 11 48.5059C11 51.788 12.2572 55.3529 15.0128 55.5145C15.2844 57.1909 16.7226 58.4633 18.4524 58.4633C18.8849 58.4633 19.3073 58.3825 19.6995 58.2311V58.8168C19.6995 61.2506 21.6607 63.23 24.0643 63.23H55.9558C58.3595 63.23 60.3206 61.2506 60.3206 58.8168V58.2411C60.7128 58.3926 61.1252 58.4734 61.5476 58.4734C63.2774 58.4734 64.7156 57.1909 64.9872 55.5246C67.7428 55.363 69 51.8183 69 48.516C69 45.2136 67.7529 41.7094 65.0274 41.5074V41.4973Z",className:"ace-outline"}),jsxRuntimeExports.jsx("path",{d:"M65.0274 41.4973V27.3185C65.0274 24.0667 62.4125 21.4107 59.1942 21.4107H45.4661C45.2147 18.5123 42.8009 16.23 39.8642 16.23C36.9275 16.23 34.5138 18.5123 34.2624 21.4107H20.8058C17.5875 21.4107 14.9726 24.0566 14.9726 27.3185V41.4973C12.2471 41.6993 11 45.2237 11 48.5059C11 51.788 12.2572 55.3529 15.0128 55.5145C15.2844 57.1909 16.7226 58.4633 18.4524 58.4633C18.8849 58.4633 19.3073 58.3825 19.6995 58.2311V58.8168C19.6995 61.2506 21.6607 63.23 24.0643 63.23H55.9558C58.3595 63.23 60.3206 61.2506 60.3206 58.8168V58.2411C60.7128 58.3926 61.1252 58.4734 61.5476 58.4734C63.2774 58.4734 64.7156 57.1909 64.9872 55.5246C67.7428 55.363 69 51.8183 69 48.516C69 45.2136 67.7529 41.7094 65.0274 41.5074V41.4973Z",stroke:"#6F8D95"}),jsxRuntimeExports.jsx("path",{d:"M55.9558 36.7203H24.0644C22.7569 36.7203 21.711 37.7908 21.711 39.1137V58.8166C21.711 60.1395 22.7569 61.21 24.0644 61.21H55.9558C57.2633 61.21 58.3092 60.1395 58.3092 58.8166V39.1137C58.3092 37.7908 57.2633 36.7203 55.9558 36.7203ZM63.026 27.3183V54.9487C63.026 55.7768 62.3623 56.4433 61.5577 56.4433C60.7531 56.4433 60.0893 55.7768 60.0893 54.9487V27.3183C60.0893 26.8234 59.687 26.4195 59.2043 26.4195H20.8058C20.3231 26.4195 19.9208 26.8234 19.9208 27.3183V54.9487C19.9208 55.7768 19.257 56.4433 18.4524 56.4433C17.6479 56.4433 16.9841 55.7768 16.9841 54.9487V27.3183C16.9841 25.1773 18.7039 23.4302 20.8058 23.4302H59.1942C61.3063 23.4302 63.016 25.1773 63.016 27.3183H63.026ZM15.214 43.5067V53.5046C13.9971 53.5046 13.0115 51.2626 13.0115 48.5056C13.0115 45.7487 13.9971 43.5067 15.214 43.5067ZM66.9886 48.5056C66.9886 51.2626 66.003 53.5046 64.7861 53.5046V43.5067C66.003 43.5067 66.9886 45.7487 66.9886 48.5056ZM39.8643 18.2495C41.8556 18.2495 43.4748 19.8956 43.4748 21.9154H36.2537C36.2537 19.8855 37.8729 18.2495 39.8643 18.2495ZM39.8643 28.3585C45.5566 28.3585 50.183 31.277 50.183 34.8924H29.5556C29.5556 31.2871 34.1719 28.3585 39.8743 28.3585H39.8643Z",className:"fill"}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0991 47.5664C25.3386 47.0688 25.9363 46.8596 26.4339 47.0992L26.0001 48.0002C26.4339 47.0992 26.4341 47.0993 26.4339 47.0992L26.4445 47.1042C26.4557 47.1094 26.4744 47.1179 26.5002 47.1294C26.5518 47.1523 26.6316 47.1868 26.7363 47.229C26.946 47.3135 27.2535 47.4283 27.6323 47.5435C28.3962 47.7758 29.4188 48.0002 30.5001 48.0002C31.5813 48.0002 32.6039 47.7758 33.3678 47.5435C33.7466 47.4283 34.0541 47.3135 34.2638 47.229C34.3685 47.1868 34.4483 47.1523 34.4999 47.1294C34.5257 47.1179 34.5444 47.1094 34.5556 47.1042L34.5662 47.0992C35.0638 46.8599 35.6615 47.0689 35.9011 47.5664C36.1406 48.064 35.9315 48.6616 35.4339 48.9012L35.0001 48.0002C35.4339 48.9012 35.4341 48.9011 35.4339 48.9012L35.4319 48.9022L35.4291 48.9035L35.4213 48.9072L35.3966 48.9188C35.3762 48.9282 35.3479 48.9411 35.3122 48.957C35.2408 48.9888 35.1394 49.0324 35.0115 49.084C34.7561 49.1869 34.3929 49.3222 33.9497 49.457C33.0693 49.7247 31.8418 50.0002 30.5001 50.0002C29.1583 50.0002 27.9309 49.7247 27.0505 49.457C26.6072 49.3222 26.244 49.1869 25.9886 49.084C25.8607 49.0324 25.7593 48.9888 25.6879 48.957C25.6522 48.9411 25.6239 48.9282 25.6035 48.9188L25.5788 48.9072L25.571 48.9035L25.5682 48.9022L25.5671 48.9017C25.5669 48.9016 25.5662 48.9012 26.0001 48.0002L25.5671 48.9017C25.0695 48.6621 24.8595 48.064 25.0991 47.5664Z",className:"ace-outline"}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M45.4335 47.099L45.4445 47.1041C45.4557 47.1093 45.4744 47.1179 45.5002 47.1294C45.5518 47.1523 45.6316 47.1868 45.7363 47.229C45.946 47.3135 46.2535 47.4283 46.6323 47.5435C47.3962 47.7757 48.4188 48.0002 49.5001 48.0002C50.5813 48.0002 51.6039 47.7757 52.3678 47.5435C52.7466 47.4283 53.0541 47.3135 53.2638 47.229C53.3685 47.1868 53.4483 47.1523 53.4999 47.1294C53.5257 47.1179 53.5444 47.1093 53.5556 47.1041L53.5662 47.0992C54.0638 46.8599 54.6615 47.0689 54.9011 47.5664C55.1406 48.064 54.9315 48.6616 54.4339 48.9012L54.0001 48.0002C54.4339 48.9012 54.4341 48.9011 54.4339 48.9012L54.4319 48.9022L54.4291 48.9035L54.4213 48.9072L54.3966 48.9187C54.3762 48.9282 54.3479 48.9411 54.3122 48.957C54.2408 48.9887 54.1394 49.0324 54.0115 49.0839C53.7561 49.1869 53.3929 49.3221 52.9496 49.4569C52.0693 49.7247 50.8418 50.0002 49.5001 50.0002C48.1583 50.0002 46.9309 49.7247 46.0505 49.4569C45.6072 49.3221 45.244 49.1869 44.9886 49.0839C44.8607 49.0324 44.7593 48.9887 44.6879 48.957C44.6522 48.9411 44.6239 48.9282 44.6035 48.9187L44.5788 48.9072L44.571 48.9035L44.5682 48.9022L44.5671 48.9016C44.5669 48.9015 44.5662 48.9012 45.0001 48.0002L44.5671 48.9016C44.0695 48.662 43.8595 48.064 44.0991 47.5664C44.3386 47.0689 44.936 46.8598 45.4335 47.099Z",className:"ace-outline"}),jsxRuntimeExports.jsx("path",{d:"M43.0076 55.8295C43.1283 56.9458 40.9232 56.8727 38.2441 57.1622C35.565 57.4518 33.4265 57.9943 33.3058 56.878C33.1852 55.7617 35.1718 53.8136 37.8509 53.5241C40.53 53.2345 42.887 54.7132 43.0076 55.8295Z",className:"ace-outline"}),jsxRuntimeExports.jsx("path",{d:"M40 8C40 5.79086 41.7909 4 44 4H75C77.2091 4 79 5.79086 79 8V20C79 22.2091 77.2091 24 75 24H73C73 24 64.75 32 61 33.5C63.5 29 63.5 25.5 59.5 24H44C41.7909 24 40 22.2091 40 20V8Z",fill:"#43646F",className:"bubble"}),jsxRuntimeExports.jsx("path",{d:"M50.832 18.192H54.96V20H48V18.32L51.904 13.952H48.048V12.144H54.8V13.76L50.832 18.192Z",fill:"white"}),jsxRuntimeExports.jsx("path",{d:"M59.7054 15.389H63.264V17H57.264V15.5031L60.6296 11.611H57.3054V10H63.1261V11.4399L59.7054 15.389Z",fill:"white"}),jsxRuntimeExports.jsx("path",{d:"M67.2985 12.6191H70.264V14H65.264V12.7169L68.0686 9.38086H65.2985V8H70.1491V9.23422L67.2985 12.6191Z",fill:"white"})]});function composeEventHandlers(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=t,c=reactExports.useContext(DismissableLayerContext),[d,p]=reactExports.useState(null),m=d?.ownerDocument??globalThis?.document,[,g]=reactExports.useState({}),E=useComposedRefs(e,O=>p(O)),x=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=x.indexOf(b),C=d?x.indexOf(d):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,I=C>=S,D=usePointerDownOutside(O=>{const B=O.target,F=[...c.branches].some(H=>H.contains(B));!I||F||(i?.(O),o?.(O),O.defaultPrevented||l?.())},m),P=useFocusOutside(O=>{const B=O.target;[...c.branches].some(H=>H.contains(B))||(a?.(O),o?.(O),O.defaultPrevented||l?.())},m);return useEscapeKeydown(O=>{C===c.layers.size-1&&(s?.(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},m),reactExports.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),dispatchUpdate(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=originalBodyPointerEvents)}},[d,m,n,c]),reactExports.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),dispatchUpdate())},[d,c]),reactExports.useEffect(()=>{const O=()=>g({});return document.addEventListener(CONTEXT_UPDATE,O),()=>document.removeEventListener(CONTEXT_UPDATE,O)},[]),jsxRuntimeExports.jsx(Primitive.div,{...u,ref:E,style:{pointerEvents:T?I?"auto":"none":void 0,...t.style},onFocusCapture:composeEventHandlers(t.onFocusCapture,P.onFocusCapture),onBlurCapture:composeEventHandlers(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:composeEventHandlers(t.onPointerDownCapture,D.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((t,e)=>{const n=reactExports.useContext(DismissableLayerContext),s=reactExports.useRef(null),i=useComposedRefs(e,s);return reactExports.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),jsxRuntimeExports.jsx(Primitive.div,{...t,ref:i})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(t,e=globalThis?.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1),i=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let u=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function useFocusOutside(t,e=globalThis?.document){const n=useCallbackRef$1(t),s=reactExports.useRef(!1);return reactExports.useEffect(()=>{const i=a=>{a.target&&!s.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function dispatchUpdate(){const t=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(t)}function handleAndDispatchCustomEvent(t,e,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),s?dispatchDiscreteCustomEvent(i,a):i.dispatchEvent(a)}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=t=>{const{__scopePopper:e,children:n}=t,[s,i]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:s,onAnchorChange:i,children:n})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...i}=t,a=usePopperContext(ANCHOR_NAME,n),o=reactExports.useRef(null),l=useComposedRefs(e,o),u=reactExports.useRef(null);return reactExports.useEffect(()=>{const c=u.current;u.current=s?.current||o.current,c!==u.current&&a.onAnchorChange(u.current)}),s?null:jsxRuntimeExports.jsx(Primitive.div,{...i,ref:l})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((t,e)=>{const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:E,...x}=t,b=usePopperContext(CONTENT_NAME$1,n),[S,C]=reactExports.useState(null),T=useComposedRefs(e,Me=>C(Me)),[I,D]=reactExports.useState(null),P=useSize(I),O=P?.width??0,B=P?.height??0,F=s+(a!=="center"?"-"+a:""),H=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Q=Array.isArray(c)?c:[c],Z=Q.length>0,ne={padding:H,boundary:Q.filter(isNotNull),altBoundary:Z},{refs:re,floatingStyles:se,placement:G,isPositioned:K,middlewareData:M}=useFloating({strategy:"fixed",placement:F,whileElementsMounted:(...Me)=>autoUpdate(...Me,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[offset({mainAxis:i+B,alignmentAxis:o}),u&&shift({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?limitShift():void 0,...ne}),u&&flip({...ne}),size({...ne,apply:({elements:Me,rects:Ye,availableWidth:We,availableHeight:Be})=>{const{width:rt,height:tt}=Ye.reference,Ue=Me.floating.style;Ue.setProperty("--radix-popper-available-width",`${We}px`),Ue.setProperty("--radix-popper-available-height",`${Be}px`),Ue.setProperty("--radix-popper-anchor-width",`${rt}px`),Ue.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),I&&arrow({element:I,padding:l}),transformOrigin({arrowWidth:O,arrowHeight:B}),m&&hide({strategy:"referenceHidden",...ne})]}),[W,ee]=getSideAndAlignFromPlacement(G),z=useCallbackRef$1(E);useLayoutEffect2(()=>{K&&z?.()},[K,z]);const ae=M.arrow?.x,ce=M.arrow?.y,he=M.arrow?.centerOffset!==0,[fe,Ce]=reactExports.useState();return useLayoutEffect2(()=>{S&&Ce(window.getComputedStyle(S).zIndex)},[S]),jsxRuntimeExports.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:K?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:n,placedSide:W,onArrowChange:D,arrowX:ae,arrowY:ce,shouldHideArrow:he,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":W,"data-align":ee,...x,ref:T,style:{...x.style,animation:K?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function t(e,n){const{__scopePopper:s,...i}=e,a=useContentContext(ARROW_NAME$1,s),o=OPPOSITE_SIDE[a.placedSide];return jsxRuntimeExports.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$1,{...i,ref:n,style:{...i.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(t){return t!==null}var transformOrigin=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:s,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[c,d]=getSideAndAlignFromPlacement(n),p={start:"0%",center:"50%",end:"100%"}[d],m=(i.arrow?.x??0)+l/2,g=(i.arrow?.y??0)+u/2;let E="",x="";return c==="bottom"?(E=o?p:`${m}px`,x=`${-u}px`):c==="top"?(E=o?p:`${m}px`,x=`${s.floating.height+u}px`):c==="right"?(E=`${-u}px`,x=o?p:`${g}px`):c==="left"&&(E=`${s.floating.width+u}px`,x=o?p:`${g}px`),{data:{x:E,y:x}}}});function getSideAndAlignFromPlacement(t){const[e,n="center"]=t.split("-");return[e,n]}var Root2=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow;function useStateMachine(t,e){return reactExports.useReducer((n,s)=>e[n][s]??n,t)}var Presence=t=>{const{present:e,children:n}=t,s=usePresence(e),i=typeof n=="function"?n({present:s.isPresent}):reactExports.Children.only(n),a=useComposedRefs(s.ref,getElementRef(i));return typeof n=="function"||s.isPresent?reactExports.cloneElement(i,{ref:a}):null};Presence.displayName="Presence";function usePresence(t){const[e,n]=reactExports.useState(),s=reactExports.useRef(null),i=reactExports.useRef(t),a=reactExports.useRef("none"),o=t?"mounted":"unmounted",[l,u]=useStateMachine(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const c=getAnimationName(s.current);a.current=l==="mounted"?c:"none"},[l]),useLayoutEffect2(()=>{const c=s.current,d=i.current;if(d!==t){const m=a.current,g=getAnimationName(c);t?u("MOUNT"):g==="none"||c?.display==="none"?u("UNMOUNT"):u(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),useLayoutEffect2(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,p=g=>{const x=getAnimationName(s.current).includes(CSS.escape(g.animationName));if(g.target===e&&x&&(u("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(a.current=getAnimationName(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:reactExports.useCallback(c=>{s.current=c?getComputedStyle(c):null,n(c)},[])}}function getAnimationName(t){return t?.animationName||"none"}function getElementRef(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((t,e)=>jsxRuntimeExports.jsx(Primitive.span,{...t,ref:e,style:{...VISUALLY_HIDDEN_STYLES,...t.style}}));VisuallyHidden.displayName=NAME;var Root=VisuallyHidden,[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider=t=>{const{__scopeTooltip:e,delayDuration:n=DEFAULT_DELAY_DURATION,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=t,o=reactExports.useRef(!0),l=reactExports.useRef(!1),u=reactExports.useRef(0);return reactExports.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:reactExports.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:reactExports.useCallback(c=>{l.current=c},[]),disableHoverableContent:i,children:a})};TooltipProvider.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip=t=>{const{__scopeTooltip:e,children:n,open:s,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,u=useTooltipProviderContext(TOOLTIP_NAME,t.__scopeTooltip),c=usePopperScope(e),[d,p]=reactExports.useState(null),m=useId(),g=reactExports.useRef(0),E=o??u.disableHoverableContent,x=l??u.delayDuration,b=reactExports.useRef(!1),[S,C]=useControllableState({prop:s,defaultProp:i??!1,onChange:O=>{O?(u.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):u.onClose(),a?.(O)},caller:TOOLTIP_NAME}),T=reactExports.useMemo(()=>S?b.current?"delayed-open":"instant-open":"closed",[S]),I=reactExports.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,C(!0)},[C]),D=reactExports.useCallback(()=>{window.clearTimeout(g.current),g.current=0,C(!1)},[C]),P=reactExports.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,C(!0),g.current=0},x)},[x,C]);return reactExports.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),jsxRuntimeExports.jsx(Root2,{...c,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:e,contentId:m,open:S,stateAttribute:T,trigger:d,onTriggerChange:p,onTriggerEnter:reactExports.useCallback(()=>{u.isOpenDelayedRef.current?P():I()},[u.isOpenDelayedRef,P,I]),onTriggerLeave:reactExports.useCallback(()=>{E?D():(window.clearTimeout(g.current),g.current=0)},[D,E]),onOpen:I,onClose:D,disableHoverableContent:E,children:n})})};Tooltip.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,i=useTooltipContext(TRIGGER_NAME,n),a=useTooltipProviderContext(TRIGGER_NAME,n),o=usePopperScope(n),l=reactExports.useRef(null),u=useComposedRefs(e,l,i.onTriggerChange),c=reactExports.useRef(!1),d=reactExports.useRef(!1),p=reactExports.useCallback(()=>c.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...o,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:u,onPointerMove:composeEventHandlers(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:composeEventHandlers(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:composeEventHandlers(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:composeEventHandlers(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:composeEventHandlers(t.onBlur,i.onClose),onClick:composeEventHandlers(t.onClick,i.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),TooltipPortal=t=>{const{__scopeTooltip:e,forceMount:n,children:s,container:i}=t,a=useTooltipContext(PORTAL_NAME,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:n,children:jsxRuntimeExports.jsx(Presence,{present:n||a.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:i,children:s})})})};TooltipPortal.displayName=PORTAL_NAME;var CONTENT_NAME="TooltipContent",TooltipContent=reactExports.forwardRef((t,e)=>{const n=usePortalContext(CONTENT_NAME,t.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...a}=t,o=useTooltipContext(CONTENT_NAME,t.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:s||o.open,children:o.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:i,...a,ref:e}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:i,...a,ref:e})})}),TooltipContentHoverable=reactExports.forwardRef((t,e)=>{const n=useTooltipContext(CONTENT_NAME,t.__scopeTooltip),s=useTooltipProviderContext(CONTENT_NAME,t.__scopeTooltip),i=reactExports.useRef(null),a=useComposedRefs(e,i),[o,l]=reactExports.useState(null),{trigger:u,onClose:c}=n,d=i.current,{onPointerInTransitChange:p}=s,m=reactExports.useCallback(()=>{l(null),p(!1)},[p]),g=reactExports.useCallback((E,x)=>{const b=E.currentTarget,S={x:E.clientX,y:E.clientY},C=getExitSideFromRect(S,b.getBoundingClientRect()),T=getPaddedExitPoints(S,C),I=getPointsFromRect(x.getBoundingClientRect()),D=getHull([...T,...I]);l(D),p(!0)},[p]);return reactExports.useEffect(()=>()=>m(),[m]),reactExports.useEffect(()=>{if(u&&d){const E=b=>g(b,d),x=b=>g(b,u);return u.addEventListener("pointerleave",E),d.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",x)}}},[u,d,g,m]),reactExports.useEffect(()=>{if(o){const E=x=>{const b=x.target,S={x:x.clientX,y:x.clientY},C=u?.contains(b)||d?.contains(b),T=!isPointInPolygon(S,o);C?m():T&&(m(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[u,d,o,c,m]),jsxRuntimeExports.jsx(TooltipContentImpl,{...t,ref:a})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((t,e)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,u=useTooltipContext(CONTENT_NAME,n),c=usePopperScope(n),{onClose:d}=u;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,d),()=>document.removeEventListener(TOOLTIP_OPEN,d)),[d]),reactExports.useEffect(()=>{if(u.trigger){const p=m=>{m.target?.contains(u.trigger)&&d()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,d]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:d,children:jsxRuntimeExports.jsxs(Content,{"data-state":u.stateAttribute,...c,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:s}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:n,isInside:!0,children:jsxRuntimeExports.jsx(Root,{id:u.contentId,role:"tooltip",children:i||s})})]})})});TooltipContent.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,i=usePopperScope(n);return useVisuallyHiddenContentContext(ARROW_NAME,n).isInside?null:jsxRuntimeExports.jsx(Arrow,{...i,...s,ref:e})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(t,e){const n=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,s,i,a)){case a:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(t,e,n=5){const s=[];switch(e){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function getPointsFromRect(t){const{top:e,right:n,bottom:s,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:s},{x:i,y:s}]}function isPointInPolygon(t,e){const{x:n,y:s}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],u=e[o],c=l.x,d=l.y,p=u.x,m=u.y;d>s!=m>s&&n<(p-c)*(s-d)/(m-d)+c&&(i=!i)}return i}function getHull(t){const e=t.slice();return e.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),getHullPresorted(e)}function getHullPresorted(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const i=t[s];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let s=t.length-1;s>=0;s--){const i=t[s];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Provider=TooltipProvider,Root3=Tooltip,Trigger=TooltipTrigger,Portal=TooltipPortal,Content2=TooltipContent,Arrow2=TooltipArrow;const VirtualInstructorTooltip=({condition:t,content:e,children:n})=>t?jsxRuntimeExports.jsx(Provider,{delayDuration:200,children:jsxRuntimeExports.jsxs(Root3,{children:[jsxRuntimeExports.jsx(Trigger,{asChild:!0,children:n}),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{side:"top",className:"flex flex-col items-start self-stretch p-4 gap-2 rounded-md bg-reverse shadow-(--shadows-hovering)",children:[jsxRuntimeExports.jsx("span",{className:" text-[13px] leading-[21px] font-semibold text-content-reverse",children:e}),jsxRuntimeExports.jsx(Arrow2,{})]})})]})}):n,handleClickBack=()=>{store.dispatch({type:SET_IS_REDIRECTED_FROM_BOOKMARKS,payload:{redirectedFromBookmarks:!1}}),store.dispatch({type:BACKTRACK})},advanceIsDisabled=(t,e,n,s,i)=>n||s?!0:i?.type==="PAGE"?get$5(e,"isDebug",!1)||!i.isLeadingNode?!1:i.data.streamUrl?!0:t>0:i?.type==="QUESTION"?!get$5(i,"data.answerKey",!1):!1,onClickVoiceoverControl=(t,e)=>{let n=!1;e(t.state===audioStateEnum.stopped),t.state===audioStateEnum.playing||t.state===audioStateEnum.paused?store.dispatch(setAudioStopped()):(store.dispatch(setAudioPlaying()),n=!0),store.dispatch(genericAnalyticsAndIterableEvent("Feature Toggled",{is_active:n,type:"AUDIO"}))},passQuestionDebug=(t,e)=>{const{isDebug:n}=e??{},s=t?.data?.isSingleChoice;if(n){const i=get$5(t,"data.answerList",[]),a=t?._id;if(!s){const u=i.filter(c=>c.value.includes("**")).map(c=>c.key);store.dispatch(submitMultiAnswerStart(u,a,s));return}const o=i?.[0]?.key??"";store.dispatch(submitAnswerStart(o,a,s))}},handleDisableButton=(t,e,n,s,i,a)=>{const{forwardDisabled:o}=t,u=["QUESTION_TEMPLATE_2","QUESTION_TEMPLATE_7","QUESTION_ORDERED_LIST","QUESTION_CLICKABLE_IMAGE","QUESTION_VIDEO"].includes(e.data.template),c=e.type==="QUESTION"&&u;return e.type==="BLANKITIVITY"?get$5(e,"data.is.complete",!1)?!1:o:c?o:advanceIsDisabled(getScreenSeconds(e)-a,n,s,i,e)},getScreenSeconds=t=>{const e=get$5(t,"data.screenSeconds",null);return e!==null&&e>0?e+ADDITIONAL_SCREEN_SECONDS:e},showVirtualInstructor=(t,e)=>{const n=e?.data?.answerKey??"",s=!!(n&&n.length>0);e?.type==="QUESTION"&&s&&!e.data?.isHiddenResults&&!e.data?.isCorrect?store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"instructor.quiz",data:{explanation:e.data.explanation,question:e.data.question,answer:getCourseflowQuestionNodeSelectedAnswers(t,e._id)}}}}):store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"ai.va"}}}),store.dispatch({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_OPEN"}})},Courseflow=()=>{useComponentLog("Courseflow");const t=useSelector(selectVirtualInstructorState),e=useSelector(selectUIIsAIModalOpen),n=useSelector(selectAudioState),s=useSelector(selectCourseflowState),i=useSelector(selectCourseState),a=useSelector(selectUrlParamsNodeId),o=useSelector(selectDashboardState),l=useSelector(selectUserDisplayName),u=useSelector(selectUiIsLoading),c=useSelector(qe=>selectCourseflowByNodeId(qe,a)),d=useSelector(selectprogressId),{timer:p,timerCount:m}=useSelector(selectTimerAndCount),g=useSelector(selectUserState),E=useSelector(selectNeedCheckVerification),x=useSelector(selectUIVoiceOverState),b=useSelector(qe=>qe.ui),S=useNavigate(),C=useDispatch(),{toggleModal:T,showModal:I}=useModal(),P=(c?.data?.answerKey??"").length>0,O=()=>!lodashExports.isNull(m)&&getScreenSeconds(c)&&c.isLeadingNode,{isShowCourseInfo:B,schoolInformation:F}=i,[H,Q]=reactExports.useState(x.isAvailable&&(n.state===audioStateEnum.playing||n.state===audioStateEnum.paused)),Z=x.isAvailable&&!x.isPurchaseable,[ne,re]=reactExports.useState({definition:null,term:"",linkUrl:"",imageUrl:""}),[se,G]=reactExports.useState(""),{virtualInstructorStatus:K}=t,{isInstructorGlobalEnabled:M}=K,W=c?.data.isSingleChoice,ee=c?.data?.isCorrect,{choice:z,multiChoice:ae,reorderSubmit:ce}=s,he=c?.data?.template==="QUESTION_VIDEO",fe=reactExports.useRef(null),Ce=c?.data?.template==="SCREEN_TEMPLATE_AUDIO",{theme:Me}=useTheme(),Ye=reactExports.useRef(null),Be=!!useIntersectionObserver(Ye,{})?.isIntersecting;useIdleLogoutTimer(),reactExports.useEffect(()=>{G(M?"enabled":"disabled")},[M]);const rt=qe=>{qe.relatedTarget!=null&&M&&G("focus")},tt=qe=>{qe&&C(setAudioPlaying()),C({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_ONBOARDING_TRYIT"}}),showVirtualInstructor(s,c)},Ue=qe=>{qe&&C(setAudioPlaying()),C({type:BUTTON_PRESSED,payload:{to:"INSTRUCTOR_ONBOARDING_DISMISS"}})},Pe=instructorFeatureCardData(getFeatureCardImage(Me,"instructor")),Qe=qe=>{C({type:SHOW_MODAL,payload:{modal:{type:"newFeatureCard",cardData:Pe,submitCallback:()=>{tt(qe)},secondaryCallback:()=>{Ue(qe)}}}})};reactExports.useEffect(()=>{if(c?.type==="QUESTION"){let qe=!c.data.answerKey;const mt=!!c.data.video?.streamingUrl;qe&&mt&&he&&(qe=!s.isVideoEnded),C({type:SET_NAVIGATION,payload:{forwardLabel:"",forwardDisabled:qe,isVideoEnded:!1}});return}C({type:SET_NAVIGATION,payload:{forwardLabel:"",forwardDisabled:!0,isVideoEnded:!1}})},[c]);const Je=async(qe=!0)=>{c?.isLeadingNode&&c.index+1===s.totalNodeCount&&(C({type:SET_ATTRIBUTES,payload:{attributes:{chapterCompletePercent:1,chapterTimeLeft:"about 0 mins left"}}}),await new Promise(st=>{setTimeout(()=>{st({})},2e3)}));let mt=!1;if(C({type:SET_IS_REDIRECTED_FROM_BOOKMARKS,payload:{redirectedFromBookmarks:!1}}),z||ae?.length||ce){C(W?submitAnswerStart(z,c._id,W):submitMultiAnswerStart(ae,c._id,W)),he&&(mt=!s.isVideoEnded),C({type:SET_NAVIGATION,payload:{forwardLabel:"",forwardDisabled:mt,choice:null,multiChoice:null,reorderSubmit:null,isVideoEnded:!1}});return}if(c?.type==="BLANKITIVITY"){if(!c.data?.is?.complete&&fe.current){fe.current.handleChildButtonClick();const{allCorrect:st}=fe.current,{fieldCount:St}=fe.current,bt=`Check answer${St>1?"s":""}`;if(!st){C({type:SET_NAVIGATION,payload:{forwardLabel:bt,forwardDisabled:!1}});return}C({type:SET_NAVIGATION,payload:{forwardLabel:bt,forwardDisabled:!1}}),C({type:ADVANCE,payload:{isPassed:qe}});return}C({type:ADVANCE,payload:{isPassed:qe}});return}C({type:ADVANCE,payload:{isPassed:qe}})};useKeyPress(["ArrowRight","ArrowLeft"],qe=>{qe.preventDefault(),e||(qe.key==="ArrowRight"?(passQuestionDebug(c,g),advanceIsDisabled(getScreenSeconds(c)-m,g,u,E,c)||C({type:ADVANCE,payload:{isPassed:c?.type==="QUESTION"?c.data.isCorrect:!0}})):c?.isBacktrackAllowed&&C({type:BACKTRACK}))},[c,getScreenSeconds(c),m,g,u]);const nt=async qe=>{const mt=await getKeyTermById(qe);re(mt),T(),C({type:BUTTON_PRESSED,payload:{from:"inline.glossary",to:"inline.glossary.modal",contextId:qe}})};reactExports.useLayoutEffect(()=>{const qe=document.getElementsByTagName("key-term");for(const mt of qe)mt.addEventListener("click",st=>{(async()=>{const St=st.target.attributes[1].nodeValue;St&&await nt(St)})().catch(St=>{console.error("Error in event listener:",St)})})},[]),reactExports.useEffect(()=>{C({type:SET_CURRENT_NODE,payload:{nodeId:a}})},[a]),reactExports.useEffect(()=>{const qe=()=>{setTimeout(()=>{C(setAudioStopped())},200)};(()=>{if(E&&qe(),!E){n.state==="PAUSED"&&(C(setAudioPlaying()),setTimeout(()=>{instance.getCurrentTime()===0&&C(setAudioPaused())},1e3));const st=x.isAvailable&&(n.state===audioStateEnum.playing||n.state===audioStateEnum.paused);c?.data?.isInstructor&&c.modal?.action==="feature.showOnboardingCard"&&(st&&qe(),Qe(st)),instance.audioInterface.onended=()=>{C(setAudioPaused())}}})()},[E]),reactExports.useLayoutEffect(()=>{const qe=document.getElementById("wrapper");qe&&qe.scrollTo({top:0,left:0,behavior:"smooth"})},[a]);const ft=()=>{let qe="/dash/index";C({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),b.redirectedFromBookmarks&&(C(setAudioSource({src:""})),C({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"bookmark.view"}}),qe="/bookmarks"),S(qe)},At=()=>{const qe=c?.type==="PAGE",mt=c?.type==="QUESTION",st=c?.isLeadingNode,St=c?.type==="BLANKITIVITY",bt=c?.data?.template==="QUESTION_VIDEO"&&(!st||s.isVideoEnded&&P);return qe||mt||St||bt},ot=()=>{n.state===audioStateEnum.playing?C(setAudioPaused()):C(setAudioPlaying())};return reactExports.useEffect(()=>{H&&e&&n.state===audioStateEnum.playing&&C(setAudioPaused())},[e]),jsxRuntimeExports.jsxs("main",{className:"grit screen courseflow",children:[c?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CourseHeader,{isScrolling:!Be,isChapterComplete:getChapterIsComplete(o,s.chapterId),isTest:!1,bookmarksEnabled:c.isBookmarkEnabled,voiceoverEnabled:!Ce&&!lodashExports.isEmpty(x)&&x.isAvailable&&!x.isPurchaseable,preferencesEnabled:!Ce&&!lodashExports.isEmpty(x)&&x.isAvailable&&!x.isPurchaseable,isAudioDisabled:Z,voiceoverActive:x.isAvailable&&(n.state===audioStateEnum.playing||n.state===audioStateEnum.paused),handleClickVoiceover:()=>{onClickVoiceoverControl(n,Q)},currentCount:c.index+1,totalCount:s.totalNodeCount,backButton:{text:"Exit Chapter",callback:()=>{ft()},hideIcon:!1,"data-test":"courseExitButton"},chapterTimeLeft:s.chapterTimeLeft,previousCompletePercent:s.prevChapterCompletePercent,chapterCompletePercent:s.chapterCompletePercent}),jsxRuntimeExports.jsx("div",{style:{visibility:"hidden",height:"0px"},ref:Ye}),jsxRuntimeExports.jsxs("article",{"data-test":"courseContainer",className:"content","aria-live":"polite",children:[(()=>{switch(c.type){case"PAGE":return jsxRuntimeExports.jsx(Page,{node:c,timer:p,displayName:l??"",onVideoEnded:()=>C({type:ADVANCE}),audioState:n.state,progressId:d});case"QUESTION":return jsxRuntimeExports.jsx(Question,{node:c,onVideoEnded:qe=>{C({type:SET_NAVIGATION,payload:{isVideoEnded:qe,forwardDisabled:!c.data?.answerKey?.length}})}});case"BLANKITIVITY":return jsxRuntimeExports.jsx(Blankitivity,{ref:fe,node:c});default:return null}})(),i.isShowCourseInfo?jsxRuntimeExports.jsx("p",{"data-test":"courseGovernmentInformation",className:"school-info paragraph__condensed",children:i.schoolInformation}):null]}),At()?jsxRuntimeExports.jsx(CourseNavigation,{centerLabel:B?F:"",currentCount:c.index+1,totalCount:s.totalNodeCount,controls:H?{audioSrc:n.src||"",state:n.state||"PAUSED",callback:()=>{ot()}}:null,isTimer:O(),time:Math.ceil(getScreenSeconds(c)-m),backButton:{text:"",callback:()=>{handleClickBack()},disabled:!c.isBacktrackAllowed},forwardButton:{text:s.forwardLabel,callback:()=>Je(ee),disabled:handleDisableButton(s,c,g,u,E,m)}}):null,c.data.isInstructor&&c.type==="PAGE"&&jsxRuntimeExports.jsx(VirtualInstructorTooltip,{condition:!M,content:"Virtual Instructor is currently unavailable",children:jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Virtual Instructor Button",onFocus:qe=>{rt(qe)},onBlur:()=>{G("enabled")},"data-test":"aceHead",className:"ace-head",onClick:()=>{showVirtualInstructor(s,c)},disabled:se==="disabled",children:se&&jsxRuntimeExports.jsx(AceHeadState,{mode:se})})})]}):null,jsxRuntimeExports.jsx(InlineGlossaryModal,{showModal:I,toggleModal:T,content:ne.definition,heading:ne.term,linkUrl:ne.linkUrl,imageUrl:ne.imageUrl})]})},DashboardObj={...ModelAbstract,name:"dashboard",async get(t){try{const e=await getOdyssey(t);return store.dispatch({type:SET_DASHBOARD_CARDS,payload:{odysseyResults:e}}),e}catch(e){console.error(e)}}},DevTools=()=>{const[t,e]=reactExports.useState(!1),[n,s]=reactExports.useState({}),i=useDispatch(),a=useSelector(u=>u.user);reactExports.useEffect(()=>{const u=get$4("api","hijack")||{title:""};s(u),e(isHijackable()&&!!u)},[]);const o=()=>t?n.title==="Staging"?"Staging API":n.title??"Unknown":"",l=u=>{u.preventDefault(),utilities.toggleDebug(a,i)};return!t&&!a.isDebug?jsxRuntimeExports.jsx("div",{}):jsxRuntimeExports.jsx("div",{className:"text-regular font-mono text-xs opacity-75 px-9 py-4","data-test":"devtools",children:t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{children:[" ",o()]}),"|",jsxRuntimeExports.jsx("a",{className:"link",href:"/activity/hijack",children:"API"}),"|",jsxRuntimeExports.jsx("a",{className:"link",href:"/activity/theme",children:"Theme"}),"|",a.isDebug?jsxRuntimeExports.jsx("a",{className:"link",href:"/user/debug",title:"See Details (Disable with shift+alt+d)",children:"Debug On"}):jsxRuntimeExports.jsx("a",{href:"#",onClick:l,onKeyDown:l,title:"Enable Debug (shift+alt+d)",role:"button",tabIndex:0,children:"Debug Off"})]})})},AnchorLink=({children:t,color:e="primary",iconButton:n=!1,selected:s=!1,iconLeft:i,iconRight:a,onClick:o,stretch:l=!1,linkButton:u=!1,href:c,variant:d="solid",width:p="","data-test":m,id:g})=>jsxRuntimeExports.jsxs("a",{href:c,className:classNames("grit button controls__button-label",d,{stretch:l,iconLeft:i&&t,iconRight:a&&t,iconOnly:(a??i)&&!t,iconButton:n,linkButton:u,[e]:!s,[`${e}--selected`]:s}),"data-test":m,onClick:o,id:g,style:l&&p?{width:p}:void 0,children:[i?jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${i}`}):null,t?jsxRuntimeExports.jsx("span",{className:"children",children:t}):null,a?jsxRuntimeExports.jsx("span",{className:`icon gritIcon--${a}`}):null]}),ChapterItem=({item:t,handleChapterItemClick:e,isRandomAccess:n,progressId:s})=>{const{_id:i,durationMessage:a,gradePercent:o,isComplete:l,isCurrent:u,isLocked:c,isMarkedForReview:d,state:p,title:m,type:g,chapterId:E}=t,[x,b]=reactExports.useState(!1),S=g==="TEST"&&p==="PENDING",C=S?"PENDING":void 0,T=!isNaN(o),I=S||T&&p!=="INCOMPLETE",D=useDispatch(),P=()=>d&&!c?"review":l?"complete":u?"current":c||!n?"locked":"open";if(g==="SECTION")return jsxRuntimeExports.jsx("div",{className:"grit chapter-item",children:jsxRuntimeExports.jsx("h3",{className:"headings__h3 section",children:m})});const O=Q=>{g==="CHAPTER"&&c&&!l||g==="TEST"&&c||e(Q)},B=Q=>{Q.preventDefault(),Q.stopPropagation(),D(genericAnalyticsAndIterableEvent("Chapter Mastered",{chapter_id:E,marked_to_study:!1})),updateChapterProgress(s,i,!1).then(Z=>{Z.isSuccess&&(D({type:GET_DASHBOARD_CARDS_START}),b(!1))})},F=()=>`${{current:{type:"current",mood:"link",size:"tiny"},review:{type:"bolt",mood:"earnest",size:"tiny"},locked:{type:"lock",mood:"subdued",size:"tiny"},complete:{type:"checkmark",mood:"positive",size:"tiny"},open:{type:"circle",mood:"subdued",size:"tiny"}}[P()].type}Icon`,H=()=>C==="PENDING"?"-":Math.floor(o*100);return jsxRuntimeExports.jsxs("div",{"data-test":"chapterListItem",className:"grit chapter-item",children:[jsxRuntimeExports.jsxs("button",{"aria-label":`Chapter Button with title ${m}, ${c?"locked":"unlocked"}, ${l?"complete":"incomplete"}`,onClick:O,children:[jsxRuntimeExports.jsx("span",{"data-test":F(),className:`icon ${P()}`}),jsxRuntimeExports.jsxs("span",{className:"chapter-title-wrapper",children:[jsxRuntimeExports.jsx("p",{"data-test":u?"currentChapterLink":"chapterLink",className:"lists-menus__chapter-item",children:m}),g==="CHAPTER"&&a?jsxRuntimeExports.jsx("span",{"data-test":"chapterPageCount",className:"lists-menus__list-description subtle",children:a}):null]}),jsxRuntimeExports.jsx("span",{className:"percentage-results-wrapper",children:jsxRuntimeExports.jsxs("span",{children:[I?jsxRuntimeExports.jsxs("span",{"data-test":"latestScore",className:"lists-menus__chapter-item",children:[H(),"%"]}):null,C?jsxRuntimeExports.jsxs("span",{"data-test":"scoreStatus",className:`metadata__condensed results ${C.toLowerCase()}`,children:["Results ",C.toLowerCase()]}):null]})})]}),d&&!c?jsxRuntimeExports.jsxs("div",{className:"review",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{b(!x)},"data-test":"toggleIcon","aria-label":"toggle review button","aria-haspopup":"true","aria-expanded":x?"true":"false",children:jsxRuntimeExports.jsx("span",{className:`toggle-icon ${x?"close":""}`})}),x?jsxRuntimeExports.jsx("button",{onClick:B,"data-test":"markAsReviewed",className:"mark-as-reviewed","aria-label":"mark as reviewed button",children:jsxRuntimeExports.jsx("span",{className:"metadata__condensed",children:"Mark as Reviewed"})}):null]}):null]})},TestObj={...ModelAbstract,name:"Test",async getSummary(t,e,n,s){return progressTestGetSummary(t,e,n,s).then(i=>i)},getCachedTest:t=>{const{aceRootScope:e}=window;return get$4(`Test${`${t}_${e.progressCurrent._id}`}`)||{}},setCachedTest:(t,e)=>{const{aceRootScope:n}=window;return set$2(`Test${`${t}_${n.progressCurrent._id}`}`,e)},completeTest:(t,e,n=!1,s,i={})=>{const{aceRootScope:a}=window;return store.dispatch(genericAnalyticsAndIterableEvent("Exam Completed",{type:i.modeType||t,test_id:lodashExports.get(i,"testId"),grade_percent:lodashExports.get(i,"gradePercent",0)*100,timed_out:lodashExports.get(i,"is.timeout",!1),is_expired:lodashExports.get(i,"is.expired",!1),is_passed:lodashExports.get(i,"is.passed",!1)})),t==="COURSE"&&(n||redirectSuccess(s,a.progressCurrent)),t==="LEVEL"?(n||store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),Promise.resolve(!0)):t==="STUDY"?Promise.resolve(!0):Promise.reject(new Error({message:"No study test defined in Jarvis"}))},isLastTest:(t,e)=>{const{aceRootScope:n}=window;return t==="STUDY"?!1:n.courseCurrent.testId?t==="COURSE":n.courseCurrent.levelList[n.courseCurrent.levelList.length-1]._id===e}},warnTestResponseCacheClear=(t,e)=>{const n=getCachedResponses(t,e);store.dispatch({type:LOG_REQUEST,payload:{level:"WARN",message:"Test Response Cache Cleared",code:4e4,data:{testId:t,responses:n}}})},getTimeOffset$1=(t,e)=>{const n=window.aceRootScope?.serverDriftMs||0,s=new Date(t),i=e*60*1e3,a=new Date;return s.setMilliseconds(s.getMilliseconds()+n+i),Math.max((s.getTime()-a.getTime())/1e3,0)},getTimer$1=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${e<10?`0${e}`:e}:${n<10?`0${n}`:n}`},isLastTest=(t,e)=>{const{aceRootScope:n}=window,s=store.getState(),{course:i}=s??{},a=localStorage.getItem("course"),o=n.courseCurrent??JSON.parse(a??"")??i;return t==="STUDY"?!1:o.testId?t==="COURSE":(o?.levelList[o.levelList.length-1])._id===e},doMetrics=(t="")=>{t.toLowerCase()==="study"&&store.dispatch(genericAnalyticsAndIterableEvent("Component Shown",{to:"practiceTest.view"}))},getCachedResponses=(t,e)=>store$1.get(`TestResponses${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)||[],setCachedResponses=(t,e,n)=>{(!n||n.length===0)&&warnTestResponseCacheClear(t,e),store$1.set(`TestResponses${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`,n)},resetCachedResponses=(t,e)=>{window.localStorage.removeItem(`TestResponses${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)},setCachedResults=(t,e,n)=>store$1.set(`TestResults${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`,n),resetCachedResults=(t,e)=>{window.localStorage.removeItem(`TestResults${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)},getCachedTest=(t,e)=>store$1.get(`Test${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)||{},setCachedTest=(t,e,n)=>store$1.set(`Test${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`,n),resetCachedTest=(t,e)=>{window.localStorage.removeItem(`Test${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)},getTotalMinutesLeft=(t,e)=>{const n=new Date(t).valueOf()-new Date(e).valueOf();return Math.round(n/(60*1e3)*10)/10},getReviewedQuestionList=(t,e)=>store$1.get(`TestReviewedQuestionList${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)||[],setReviewedQuestionList=(t,e,n)=>{store$1.set(`TestReviewedQuestionList${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`,n)},clearReviewedQuestionList=(t,e)=>{store$1.remove(`TestReviewedQuestionList${t}_${e}_${window.aceRootScope?.progressCurrent?._id}`)},getNextQuestionToReview=(t,e)=>store$1.get(`nextQuestionId_${t}_${e}`)||null,setNextQuestionToReview=(t,e,n)=>store$1.set(`nextQuestionId_${t}_${e}`,n),clearNextQuestionToReview=(t,e)=>store$1.remove(`nextQuestionId_${t}_${e}`),getLastQuestionId=(t,e)=>store$1.get(`lastQustionId_${t}_${e}`)||null,setLastQuestionId=(t,e,n)=>store$1.set(`lastQustionId_${t}_${e}`,n),clearLastQuestionId=(t,e)=>store$1.remove(`lastQustionId_${t}_${e}`),needsGrading=(t,e,n,s)=>{const i=t.map(c=>c._id).sort(),a=getCachedResponses(e,n).map(c=>c.questionId).sort(),o=lodashExports.difference(i,a).length===0,u=!t[s+1];return o&&u},askNext=(t,e)=>{let n=e.tour?parseFloat(e.tour):"";Number.isNaN(n)?n=1:typeof n=="number"&&(n+=1),setLastQuestionId(e.testId,e.progressId,t),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.test",params:{...e,questionId:t,tour:n}}})},outOfQuestions=(t,e)=>!t[e+1],formatProgress=t=>{const e=lodashExports.merge({},window.aceRootScope.progressCurrent,t),n=lodashExports.pick(e.course,["_id","shortTitle","key","isHideProgress"]);return{...e,course:n}},nextQuestionId=(t,e)=>{const n=t,s=e.findIndex(i=>i._id===n)+1;return e[s]?._id},clearVerifications=(t,e)=>{VerifyObj.removeVerificationRecord(e),t.forEach(n=>{VerifyObj.removeVerificationRecord(n._id)})},syncProgress=(t,e,n)=>window.aceRootScope?.progressSync().then(()=>{TestObj.completeTest(e.modeType,e.pseudoId,!0,void 0,n),t||move({direction:1,params:e})}),onResolveTestStateSuccess=(t,e,n,s,i)=>{let a=0;const{questionId:o,tour:l}=n,u=!!l;a+=o===e?0:1;const c=u&&(s||!i)?t.resultList?.slice():t.progressQuestionList?.slice();!u&&c&&c.length===0&&(store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"Our bad. This test has no questions, contact Support.",title:"Uh oh!",buttonText:"Continue",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}),a+=1),a>0&&console.warn(`There were ${a} issues with the test state.`)},redirectSuccess=(t,e)=>{const{aceRootScope:n}=window;if(n.isProcessing)return!1;if(n.isProcessing=!0,t?.isPassed||t.is?.passed)e.isComplete?store$1.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}):store$1.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});else if(t.isLocked||t.progressDelta?.isLocked)store$1.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});else if(t.remainingCount>0&&t.remainingCount<=2){const s=t.remainingCount===1?"This is your LAST attempt to pass this test. If you dont pass this time, you will fail the course and be required to purchase a new one.":`You have ${t.remainingCount} remaining attempts to pass this test. If you dont pass within ${t.remainingCount} attempts, you will fail the course and be required to purchase a new one.`;store$1.dispatch({type:SHOW_MODAL,payload:{modal:{message:s,title:"Course Test Warning",buttonText:"Ok, I Understand",secondaryButtonText:"Wait & Review",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"coursetest.test",params:{questionIdx:0}}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}})}else store$1.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})},getPriority=t=>{const e=!!(t.activeProgressTestId&&getCachedTest(t._id,t.activeProgressTestId));return t.isActive&&e?0:1},PracticeTests=()=>{useComponentLog("PracticeTests");const t=useNavigate(),e=useSelector(selectprogressId),[n,s]=reactExports.useState([]),[i,a]=reactExports.useState([]),[o,l]=reactExports.useState(!0),[u,c]=reactExports.useState(!1),d=useDispatch(),p=reactExports.useRef(null),g=!!useIntersectionObserver(p,{})?.isIntersecting;n.sort((b,S)=>{const C=getPriority(b),T=getPriority(S);return C!==T?C-T:b.title.localeCompare(S.title)});const E=async b=>{try{await progressTestPastGradeResults(b).then(S=>{d({type:TEST_SET,payload:{test:S}}),d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"acetest.reviewTest"}}),t(`/acetest/review/${S.testId}/${S.modeType}/REVIEW`)});return}catch(S){console.error(S)}},x=b=>{const S=i.find(C=>C._id===b);S&&(d({type:UPSELL_SHOWN,payload:{product:S}}),d({type:ADD_ITEM_TO_ORDER,payload:S}),d({type:SET_URL_PARAMS,payload:{params:{flow:"practice-tests"}}}),t("/purchase/payment/practice-tests/"))};return reactExports.useEffect(()=>{let b=!1;return e&&getStudyTests(e).then(S=>{b||(s(S.list),S.upsell?.milestoneData?.productList&&a(S.upsell.milestoneData.productList))}).catch(()=>{b||c(!0)}).finally(()=>{b||l(!1)}),d({type:SCREEN_VIEW,payload:{screenName:"Practice Tests List"}}),()=>{b=!0}},[e]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,isScrolling:!g,backButton:{text:"Back",callback:()=>{d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),t("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsx("div",{ref:p}),jsxRuntimeExports.jsx("div",{className:"grit screen practice-tests",children:jsxRuntimeExports.jsxs("main",{className:"container",children:[jsxRuntimeExports.jsx("h1",{id:"grit-practice-tests",className:"headings__h1",children:"Practice Tests"}),u&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"There was an error loading practice tests. Please try again later."}),o?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n.map(b=>jsxRuntimeExports.jsx(PracticeTestCard,{test:b,onClick:()=>{d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"acetest.ready"}}),t(`/acetest/ready/${e}/STUDY/${b._id}/0/practicetests`)},onClickReview:S=>E(S)},b._id)),jsxRuntimeExports.jsx("br",{}),i.map(b=>{const{_id:S,ctaPurchased:C,ctaUnpurchased:T,headline:I,is:D,learnMore:P,price:O,title:B}=b;return jsxRuntimeExports.jsx(AddonCard,{buttonLabel:D.purchased?C:T,description:P,headline:I,isUpsellPurchased:D.purchased,onClickPurchase:()=>{x(S)},price:O,title:B},S)})]})]})})]})},PreviousTests=({progressTestList:t,onClickReview:e,disabled:n=!1})=>t.length===0?null:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start gap-2 pt-4 px-4 py-4 bg-tertiary rounded-2xl","data-test":"previousScores",children:[jsxRuntimeExports.jsx("h4",{className:"text-base font-bold leading-[20.8px] font-nunito !text-subtle",children:"Previous Scores"}),jsxRuntimeExports.jsx("div",{"data-test":"resultsList",className:"flex gap-3 overflow-x-auto w-full pb-2 px-1 pt-1",children:t.map(s=>jsxRuntimeExports.jsx("button",{disabled:n,className:`flex justify-center items-center rounded-[6px] border-2 border-solid bg-primary w-[94px] sm:min-w-[100px] h-[48px] sm:h-[54px] flex-shrink-0 focus:outline-none ${n?"border-controls-disabled-background cursor-not-allowed":"border-controls-primary hover:cursor-pointer hover:border-controls-primary-hover focus:shadow-[var(--shadows-focus)] active:border-controls-primary-active"}`,onClick:i=>{n||(i.stopPropagation(),e(s._id))},"aria-label":`Review test result: ${Math.floor((s.gradePercent||0)*100).toString()}%`,"data-test":"testResult",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsxs("h3",{className:"font-nunito !text-regular !text-center !font-bold !text-sm sm:!text-xl leading-tight sm:leading-[26px] !mb-0","data-test":"score",children:[Math.floor((s.gradePercent||0)*100),"%"]}),jsxRuntimeExports.jsx("span",{className:"font-nunito text-subtle text-center font-semibold text-[10px] sm:text-xs leading-[12px] sm:leading-[14.4px] whitespace-nowrap","data-test":"timeSince",children:timeAgoFormatter(s.completedAt)})]})},s._id))})]}),PracticeTestCard=({onClick:t,onClickReview:e,test:n})=>{const{description:s,progressTestList:i,questionCountMessage:a,title:o}=n,l=useDispatch();return jsxRuntimeExports.jsxs("div",{"data-test":"practiceTestItem",className:"grit practice-test-card",children:[jsxRuntimeExports.jsxs("div",{className:"practice-test-card__top-section",children:[jsxRuntimeExports.jsxs("div",{className:"practice-test-card__title-wrapper",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:o}),s?jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:s}):null,a?jsxRuntimeExports.jsx("span",{className:"paragraph__condensed question-count",children:a}):null]}),jsxRuntimeExports.jsx("div",{className:"practice-test-card__button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"practiceTestItemButton",onClick:()=>{getPriority(n)||l({type:BUTTON_PRESSED,payload:{from:"practiceTest.viewList",to:"reviewTest.view"}}),t()},variant:getPriority(n)?"solid":"ghost",children:getPriority(n)?"Start Test":"Resume"})})]}),i.length?jsxRuntimeExports.jsx(PreviousTests,{progressTestList:i,onClickReview:u=>{e(u)}}):null]},n._id)},ResourcesItem=({resource:t,isLocked:e})=>{const{lockModal:n,key:s,link:i,title:a,type:o,description:l,isBadged:u,data:c}=t,d=useDispatch(),p=useNavigate(),m=useSelector(selectprogressId),g=async x=>{try{await progressTestPastGradeResults(x).then(b=>{d({type:TEST_SET,payload:{test:b}}),d({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"acetest.reviewTest"}}),p(`/acetest/review/${b.testId}/${b.modeType}/REVIEW`)});return}catch(b){console.error(b)}},E=x=>{if(x.preventDefault(),d(resourceClicked(t)),e&&n){d({type:SHOW_MODAL,payload:{modal:{message:n.message,title:n.title,buttonText:n.linkList[0].title,secondaryButtonText:n.linkList[1].title,confirmDispatch:[{type:OPEN_LINK,payload:{linkObj:{title:"Renew Your Course",key:"renew.view",type:"APP",data:{id:"renew"}}}}],secondaryDispatch:[{type:HIDE_MODAL}]}}});return}if(s==="mockTest.view"&&c?.mockTestData?._id){d({type:SET_IS_REDIRECTED_FROM_EXAM,payload:{redirectedFromExam:!0}}),p(`/acetest/ready/${m}/STUDY/${c.mockTestData._id}/0/previousTests`);return}d({type:OPEN_LINK,payload:{linkObj:{key:s,link:i,type:o}}})};return jsxRuntimeExports.jsx("div",{className:"flex flex-col self-stretch bg-controls-menu hover:bg-controls-menu-hover has-[>button:focus]:shadow-resource-button-focus group","data-test":"resourceItem",children:jsxRuntimeExports.jsxs("button",{onClick:E,"aria-label":`Resource Button with title ${a??""}`,className:"cursor-pointer flex flex-col p-6 self-stretch w-full text-left bg-transparent group-hover:bg-controls-menu-hover active:bg-controls-menu-active min-h-[44px] justify-start relative border-t border-solid border-divider max-w-full box-border focus:outline-none",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-8 w-full pr-16",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[u&&(s==="mockTest.view"||s==="tutoring.view")?jsxRuntimeExports.jsx("span",{className:"block bg-brand-2",style:{...getIconStyle("dot-8","xx-small")}}):null,jsxRuntimeExports.jsx("h3",{className:"font-nunito !font-bold !text-[20px] !leading-[26px] !text-regular",children:a})]}),jsxRuntimeExports.jsx("p",{className:"font-[Nunito_Sans] font-normal text-subtle",children:l})]})}),jsxRuntimeExports.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 right-6 ${s==="mockTest.view"&&c?.mockTestData?"right-4":"right-6"} flex items-center`,children:jsxRuntimeExports.jsx("span",{className:"bg-subtle mask-no-repeat mask-center",style:{...getIconStyle("arrow-right","x-small")}})}),s==="mockTest.view"&&c?.mockTestData&&c.mockTestData.progressTestList.length>0&&jsxRuntimeExports.jsx("div",{className:"py-6 pr-12 overflow-x-auto",children:jsxRuntimeExports.jsx(PreviousTests,{progressTestList:c.mockTestData.progressTestList,onClickReview:x=>{g(x)}})})]})})},Badge=({type:t="info",text:e})=>jsxRuntimeExports.jsxs("div",{className:`grit badge lists-menus__list-title ${t}`,children:[" ",e," "]}),ScheduleItemSession=({sessionEvent:t,isScheduled:e,selectSession:n,index:s})=>{const i=useSelector(l=>selectDashboardWebinarCardDataByCurrentLevel(l)),{cardData:a}=i,{isBlock:o}=a;return jsxRuntimeExports.jsxs("div",{id:`schedule-item-session-${s.toString()}`,className:`schedule-item-session ${e?"selected":""} ${!t.isAvailable&&!t.isScheduled?"disabled":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"details",children:[o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Badge,{type:"info",text:"Multiple Days"}),t.eventTimeList?.map((l,u)=>jsxRuntimeExports.jsx("p",{"data-test":"sessionDetails",className:"lists-menus__chapter-item",children:`Session ${u+1}: ${formatDateForScheduleItems(l.startDateTime)}, ${formatTime$1(l.startDateTime)}-${formatTime$1(l.endDateTime)}`},u))]}):jsxRuntimeExports.jsx("p",{"data-test":"sessionDetails",className:"lists-menus__chapter-item",children:`${formatDateForScheduleItems(t.startDateTime)}, ${formatTime$1(t.startDateTime)}-${formatTime$1(t.endDateTime)}`}),jsxRuntimeExports.jsx("span",{"data-test":"seatsAvailable",className:"lists-menus__list-description",children:`Seats Available: ${t.remainingCapacityCount}`})]}),t.isAvailable||t.isScheduled?jsxRuntimeExports.jsx("div",{className:"schedule-checkbox-wrapper",children:jsxRuntimeExports.jsx(Checkbox,{id:"isScheduled",label:"",checked:e,onChange:()=>{n(t)},variant:"lg"})}):jsxRuntimeExports.jsx("p",{className:"lists-menus__chapter-item",children:"Unavailable"})]})},getClassEventWebinarUrl=async({progressId:t,eventId:e})=>call(`/progress/${t}/class-event/${e}/webinar-url`,"GET",{}),getDailyWebinarUrl=async({eventId:t,progressId:e})=>call(`/class/daily-webinar/join/${t}`,"POST",{progressId:e}),SessionCardContent=({webinarSession:t,scheduledEvent:e,setIsExpanded:n})=>{const[s,i]=reactExports.useState(!1),a=useSelector(g=>selectDashboardWebinarCardDataByCurrentLevel(g)),o=useSelector(selectprogressId),{cardData:l}=a,{isUserVerificationRequired:u}=l,c=useDispatch(),d=async(g,E,x)=>{g.preventDefault();const b=E?null:window.open("about:blank","_blank");i(!0);try{const S=await getClassEventWebinarUrl({progressId:o,eventId:e._id});if(!S.isSuccess||!S.data?.webinarUrl)throw new Error("Unable to join the session at this time.");const{webinarUrl:C}=S.data;E?c({type:SET_NEEDS_VERIFICATION,payload:{modeType:"WEBINAR",pseudoId:x,webinarUrl:C}}):b&&(b.location.href=C)}catch(S){const C=S instanceof Error?S.message:"Unable to join the session at this time.";c({type:SHOW_MODAL,payload:{type:"requestError",modal:{title:"Unable to Join Session",message:C}}})}finally{i(!1)}},p=g=>d(g,!1,""),m=g=>d(g,!0,t._id);return t.isFailed||t.isSkipped?jsxRuntimeExports.jsx("div",{className:"schedule-button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"rescheduleButton",onClick:()=>{n(!0)},children:"Reschedule"})}):t.isComplete?jsxRuntimeExports.jsx("div",{className:"reschedule-button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{disabled:!0,children:"Completed"})}):t.isCompletionPending?jsxRuntimeExports.jsx("div",{className:"reschedule-button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"pendingButton",disabled:!0,children:"Pending"})}):t.isLocked||!t.isScheduled&&!t.isAvailable?jsxRuntimeExports.jsx("div",{className:"reschedule-button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"scheduleSessionButtonDisabled",disabled:!0,children:"Schedule Session"})}):t.isScheduled?jsxRuntimeExports.jsxs("div",{className:"reschedule-button-wrapper",children:[jsxRuntimeExports.jsx("div",{className:"reschedule-or-cancel",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"rescheduleOrCancelButton",onClick:()=>{n(!0)},variant:"ghost",children:"Reschedule or Cancel"})}),jsxRuntimeExports.jsx("div",{"aria-live":"polite",className:"sr-only",children:s&&"Joining session"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"joinSessionButton",disabled:!t.isJoinable||s,onClick:u?m:p,"aria-label":`Join ${t.title} session`,children:s?"Joining...":"Join Session"})]}):jsxRuntimeExports.jsx("div",{className:"schedule-button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{stretch:!0,"data-test":"openScheduleSession",onClick:()=>{n(!0)},children:"Schedule Session"})})},TitleStatus=({title:t,webinarSession:e})=>jsxRuntimeExports.jsxs("div",{"data-test":"webinarTitle",className:"title-status",children:[jsxRuntimeExports.jsx("span",{className:"lists-menus__large-list-title",children:t}),e.isOptional&&jsxRuntimeExports.jsx("div",{className:"status",children:jsxRuntimeExports.jsx(Badge,{type:"info",text:"Recommended"})}),e.isSkipped&&jsxRuntimeExports.jsx("div",{"data-test":"noShowStatus",className:"status",children:jsxRuntimeExports.jsx(Badge,{type:"error",text:"No Show"})}),e.isFailed&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{"data-test":"retakeStatus",className:"status failed-webinar",children:jsxRuntimeExports.jsx(Badge,{type:"error",text:"Retake Required"})}),jsxRuntimeExports.jsx("span",{className:"icon x-inverted failed-webinar-icon","data-test":"checkmark",style:{...getIconStyle("x-inverted","small")}})]})]}),SessionCardExpanded=({scheduledEvent:t,webinarSession:e,setIsExpanded:n,setScheduledEvent:s,previousScheduledEvent:i,progressId:a,getSessionList:o})=>{const l=useDispatch(),u=e.eventList.filter(x=>!x.isFailed&&!x.isSkipped),c=(x,b,S,C,T,I=!1)=>{l({type:SHOW_MODAL,payload:{modal:{type:"info.confirmation",data:{content:{title:x,subtitle:b,buttonText:S,secondaryButtonText:C,hideSecondaryButton:I}},submitCallback:T}}})},d=x=>{l({type:SHOW_MODAL,payload:{modal:{message:x,title:"Oops!",buttonText:"Continue"}}})},p=x=>{x._id!==t._id&&s(x)},m=()=>{c("Confirmation needed",`Please confirm your webinar on ${formatDateForScheduleItems(t.startDateTime)} at ${formatTime$1(t.startDateTime)}-${formatTime$1(t.endDateTime)}.`,"Confirm","Cancel",async()=>{try{(await progressClassEventCreate(a,t._id))._id&&(o(),n(!1),e.isScheduled&&c("Rescheduled","Your webinar has been rescheduled.","Got it","",()=>Promise.resolve(),!0))}catch(x){console.error(x),d("We are unable to schedule the session. Please try again.")}})},g=()=>{c("Are you sure?","Youll no longer have a reserved spot in this webinar by canceling. You will need to reschedule to attend and receive credit.","Yes, I am Sure","Maybe Later",async()=>{try{(await progressClassEventCancel(a,t._id)).isSuccess&&(o(),s({_id:"",startDateTime:"",endDateTime:"",location:{}}),n(!1))}catch(x){console.error(x),d("We are unable to cancel the session. Please try again.")}})},E=()=>!t.isScheduled&&(i?._id!==t._id||!t.isAvailable);return jsxRuntimeExports.jsxs("div",{"data-test":"sessionsDiv",className:"expanded",children:[jsxRuntimeExports.jsxs("div",{className:"header",children:[jsxRuntimeExports.jsx(TitleStatus,{title:e.title,webinarSession:e}),e.isFailed&&jsxRuntimeExports.jsx("span",{className:"icon x-inverted","data-test":"checkmark",style:{...getIconStyle("x-inverted","small")}}),jsxRuntimeExports.jsx(IconButton,{onClick:()=>{n(!1),s(i??{})},iconName:"arrow-up",iconSize:"x-small",color:"secondary"})]}),u.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[u.map((x,b)=>!x.isFailed&&jsxRuntimeExports.jsx(ScheduleItemSession,{sessionEvent:x,isScheduled:x._id===t._id,selectSession:p,index:b},x._id)),e.isScheduled?jsxRuntimeExports.jsxs("div",{className:"reschedule-button-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{"data-test":"rescheduleButton",disabled:i?._id===t._id,onClick:m,children:"Reschedule Session"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"cancelSessionButton",disabled:E(),onClick:g,variant:"ghost",children:"Cancel Session"})]}):jsxRuntimeExports.jsx(Button$2,{"data-test":"scheduleButton",disabled:!t._id||i?._id===t._id,onClick:m,children:"Schedule Session"})]}):jsxRuntimeExports.jsx("p",{className:"lists-menus__large-list-title no-sessions",children:" There are currently no available dates and times."})]})},SessionCard=({scheduledEvent:t,webinarSession:e,setIsExpanded:n})=>jsxRuntimeExports.jsxs("div",{className:"not-expanded",children:[jsxRuntimeExports.jsxs("div",{className:"session-card-description",children:[jsxRuntimeExports.jsx(TitleStatus,{title:e.title,webinarSession:e}),t._id&&jsxRuntimeExports.jsx("span",{className:"lists-menus__list-description",children:`${formatDateForScheduleItems(t.startDateTime)}, 
        ${formatTime$1(t.startDateTime)}-${formatTime$1(t.endDateTime)}`}),jsxRuntimeExports.jsx("div",{"data-test":"statusDescription",className:"status-description",children:e.isFailed&&jsxRuntimeExports.jsx("p",{className:"lists-menus__list-title failed-reason",children:"You must retake this webinar. Reason: Did not attend for the full time"})})]}),e.isComplete&&jsxRuntimeExports.jsx("span",{className:"icon checkmark-line completed-webinar-icon","data-test":"checkmark",style:{...getIconStyle("checkmark-line","small")}}),jsxRuntimeExports.jsx(SessionCardContent,{webinarSession:e,scheduledEvent:t,setIsExpanded:n})]}),ScheduleItem=({progressId:t,webinarSession:e,getSessionList:n})=>{const[s,i]=reactExports.useState(!1);let a=e.eventList.find(u=>u.isScheduled);a||(a=e.eventList.find(u=>u.isComplete||u.isCompletionPending||u.isFailed));const[o,l]=reactExports.useState(a??{});return jsxRuntimeExports.jsx("div",{"data-test":"webinarItem",className:"grit schedule-item",children:jsxRuntimeExports.jsx("div",{className:"content",children:s?jsxRuntimeExports.jsx(SessionCardExpanded,{scheduledEvent:o,webinarSession:e,setIsExpanded:i,setScheduledEvent:l,previousScheduledEvent:a,progressId:t,getSessionList:n}):jsxRuntimeExports.jsx(SessionCard,{scheduledEvent:o,webinarSession:e,setIsExpanded:i})})})},LicenseChecklistCard=({children:t})=>jsxRuntimeExports.jsx("li",{className:"grit license-checklist-card",children:jsxRuntimeExports.jsx("div",{className:"license-checklist-card__list",children:t})}),onPracticeClick=(t,e)=>{store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.ready",params:{progressId:e,pseudoId:t,modeType:"STUDY"}}})},onReviewClick=t=>{store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.reviewTest",params:{testid:t,mode:"STUDY",flow:"REVIEW"}}})},getStatusLabelColor=t=>{switch(t){case"FULFILLED":case"PROCESSING":return"#12bdcd";case"PENDING":case"INFO NEEDED":return"#fcb11a";case"COMPLETED":return"#2ce1ab";default:return""}},ChapterContainer=({currentLevel:t,stepList:e,isMobile:n,brand:s,onClickChecklistItem:i,levelIdx:a,onChapterClick:o,progressId:l,isRandomAccess:u,isHideProgress:c,actualLevelIdx:d})=>{useComponentLog("ChapterContainer");const p=window.innerWidth,{data:m,type:g}=t,{chapterList:E,cardData:x,knowledgeExam:b,isCurrent:S,title:C,listDescription:T,isLocked:I}=m,D=g==="JOURNEY"?m:x,P=x||b,O=x||{},B={ACE:"Aceable",AARP:"the AARP Smart Driver Course",IDS:"I Drive Safely",DEC:"DriversEd.com",FLVS:"the FLVS Smart Driver Course"},F=reactExports.useRef(null),H=x?.practiceTestList||[],Q=reactExports.useRef(null),ne=!!useIntersectionObserver(Q,{})?.isIntersecting,re=["LEVEL","JOURNEY","PRACTICE_TEST","FLKE","CHECK","WELCOME","CERT","RESOURCE"],se=x?.statusType,G=x?.statusLabel,K=E?.filter(fe=>fe.type!=="SECTION"),M=(fe,Ce)=>{fe.preventDefault(),fe.stopPropagation(),store.dispatch({type:OPEN_LINK,payload:{linkObj:Ce}})},W=(fe,Ce,Me,Ye)=>{fe.stopPropagation();const We=e.findIndex(Be=>Be._id===Ce);We==null?console.error(`Tracking: Step number is not a number handleFlkeCtaClick() ${Ce} ${e.length}`):store.dispatch({type:TOGGLE_LICENSE_CHECKLIST_STEP,payload:{stepId:Ce,isComplete:Me,stepName:Ye.title,stepNumber:We}})},ee=()=>{store.dispatch({type:SET_SIDENAV_OPEN,payload:{sidenavStatus:"open"}})},z=fe=>D?.stepList?.length===1?!fe?.htmlContent:!!fe?.excerptText,ae=fe=>K.findIndex(Ce=>Ce._id===fe),ce=fe=>`https://d1u7daj727sadp.cloudfront.net/webassets/static-assets/welcome-card-info-list-${fe}.svg`,he=()=>{store.dispatch({type:GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_START,payload:{progressId:l,cardId:m._id,currentLevelIdx:a}})};return reactExports.useEffect(()=>{!S&&F.current&&F.current.scrollTo({top:0,behavior:"smooth"})},[t]),jsxRuntimeExports.jsxs("section",{className:"dash__primary grit contentDash",id:"dash__primary","data-test":"section",children:[n&&jsxRuntimeExports.jsxs("div",{className:"nav",children:[jsxRuntimeExports.jsx(Button$2,{iconButton:!0,variant:"text",iconLeft:"arrow-backward",onClick:()=>{ee()},id:"course-progress-back-button-tablet",children:ne&&"Course"}),!ne&&jsxRuntimeExports.jsx("span",{className:"nav--title headings__h6",children:C})]}),jsxRuntimeExports.jsxs("div",{ref:F,className:"contentWrapper",children:[re.includes(g)&&jsxRuntimeExports.jsxs("div",{className:"title-container",children:[g==="LEVEL"&&!c&&jsxRuntimeExports.jsxs("span",{className:"supertitle__supertitle",children:["Level ",d+1]}),jsxRuntimeExports.jsx("h1",{"data-test":"levelCardTitle",className:"headings__h1 title",ref:Q,children:D?.title||C}),jsxRuntimeExports.jsx("span",{"aria-live":"polite",className:"sr-only",children:`${D?.title??C} Content loaded`})]}),(x?.description||T)&&!["CERT","CHECK","SCHEDULE"].includes(g)&&jsxRuntimeExports.jsx("h3",{"data-test":"levelCardDescription",className:"headings__h3 headings__h3--subtle description-container",children:x?.description||T}),g==="CHECK"&&D?.description?jsxRuntimeExports.jsx("p",{"data-test":"levelCardDescription",className:"paragraph__regular description",children:D?.description}):null,g==="WELCOME"&&jsxRuntimeExports.jsx("div",{className:`hr-wrapper ${D?.description?"":"hr-wrapper__no-subtitle"}`,children:jsxRuntimeExports.jsx("hr",{})}),jsxRuntimeExports.jsxs("ul",{className:"dashCardList",id:"dashCardListId",children:[g==="JOURNEY"||g==="CHECK"?jsxRuntimeExports.jsxs(LicenseChecklistCard,{children:[D?.stepList?.map(fe=>jsxRuntimeExports.jsx(ChecklistItem,{hideButton:D?.stepList?.length===1,hideChecklistExcerpt:!z,onClickButton:()=>i(fe),onClickCheckbox:Ce=>{W(Ce,fe?._id,!fe?.isComplete,fe)},step:fe},fe?._id)),D?.stepList?.length===1?jsxRuntimeExports.jsx(ChecklistContent,{step:D.stepList[0]}):null]}):null,g==="LEVEL"?E?.map((fe,Ce)=>jsxRuntimeExports.jsx(ChapterItem,{isRandomAccess:u,item:fe,progressId:l,handleChapterItemClick:()=>o(a,ae(fe._id),fe)},Ce)):null,g==="CERT"&&jsxRuntimeExports.jsxs("div",{className:"certWrapper",children:[G&&jsxRuntimeExports.jsx("h6",{"data-test":"labelCert",className:"headings__h6",style:{color:getStatusLabelColor(se)},children:G}),jsxRuntimeExports.jsx("p",{"data-test":"paragraphCert",className:"paragraph__regular",dangerouslySetInnerHTML:{__html:x?.description}}),x?.linkList?.map(fe=>jsxRuntimeExports.jsx(Button$2,{variant:"ghost",stretch:p<450,"data-test":"modalPrimaryButton",onClick:()=>store.dispatch({type:OPEN_LINK,payload:{linkObj:fe}}),children:fe.title||"Confirm"},fe.key))]}),g==="RESOURCE"&&jsxRuntimeExports.jsx("div",{className:"resourceWrapper",children:x?.resourceList?.map(fe=>jsxRuntimeExports.jsx(ResourcesItem,{resource:fe,isLocked:I},fe.key))}),g==="PRACTICE_TEST"&&jsxRuntimeExports.jsx("div",{className:"practiceTestWrapper",children:H?.length?jsxRuntimeExports.jsx("ul",{className:"gritPracticeTests__practiceList",children:H.map(fe=>jsxRuntimeExports.jsx(PracticeTestCard,{test:fe,onClick:()=>{onPracticeClick(fe._id,l)},onClickReview:Ce=>{onReviewClick(Ce)}},fe._id))}):null}),g==="FLKE"&&jsxRuntimeExports.jsxs("div",{className:"flkeWrapper",children:[x?.title?null:jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:["You must be between 15-18 years old to take the Florida Knowledge Exam with ",B[s],". The Knowledge Exam must be completed in 1 hour, in 1 sitting. You will be periodically asked questions verifying your identity as you take the test. Answering these incorrectly will result in a failed attempt."]}),x?.alertList?jsxRuntimeExports.jsx("div",{className:"alert-container",children:x?.alertList?.map((fe,Ce)=>jsxRuntimeExports.jsx(Alert,{title:fe.title,description:fe.description,variant:fe.type.toLowerCase()},`${fe.title+Ce}`))}):null,x?.instructionList?.map(fe=>jsxRuntimeExports.jsx("div",{"data-test":"listItem",className:"card-list-spacer",children:jsxRuntimeExports.jsx(SimpleListItem,{iconSize:"small",iconName:getListItemIcon(fe.icon),iconColor:"brand-secondary",title:fe.title,description:fe.description})},fe.title)),P?.linkList?.length!==0&&P?.linkList?.map(fe=>jsxRuntimeExports.jsx("div",{className:"flkeWrapper--ctaButton",children:jsxRuntimeExports.jsx(Button$2,{onClick:Ce=>{M(Ce,fe)},stretch:n,disabled:"isUserEligible"in P?!P.isUserEligible:I,"data-test":"FlKEButton",children:fe.title})},fe.key))]}),g==="SCHEDULE"&&jsxRuntimeExports.jsxs("div",{className:"webinarWrapper",children:[jsxRuntimeExports.jsx("h2",{"data-test":"scheduleTitle",className:"headings__h2",children:"Schedule your Webinar(s)"}),jsxRuntimeExports.jsx("div",{className:"schedule-info",children:O.instructorInfoUrl&&jsxRuntimeExports.jsx(AnchorLink,{variant:"text",href:"",onClick:fe=>{fe?.preventDefault(),window.open(O.instructorInfoUrl,"_blank")},children:O.instructorInfoLabel||""})}),O.sessionList?.map(fe=>jsxRuntimeExports.jsx(ScheduleItem,{webinarSession:fe,getSessionList:he,progressId:l},fe._id))]}),g==="WELCOME"&&jsxRuntimeExports.jsxs("div",{className:"welcomeWrapper",children:[x?.infoList?.map((fe,Ce)=>jsxRuntimeExports.jsxs("div",{className:"welcomeWrapper--card",children:[jsxRuntimeExports.jsx("div",{className:"welcomeWrapper--card icon",children:jsxRuntimeExports.jsx("img",{"data-test":"welcomeImg",src:ce(fe.icon),alt:""})}),jsxRuntimeExports.jsxs("div",{className:"welcomeWrapper--card content",children:[jsxRuntimeExports.jsx("div",{"data-test":"welcomeTitle",className:"title",children:fe.title}),jsxRuntimeExports.jsxs("div",{"data-test":"welcomeDescription",className:"description",children:[" ",fe.description]}),fe?.linkList?.map(Me=>jsxRuntimeExports.jsx(Button$2,{"data-test":"welcomeLink",variant:"text",stretch:p<450,onClick:()=>store.dispatch({type:OPEN_LINK,payload:{linkObj:Me}}),children:Me.title||"View"},Me.key))]})]},Ce)),jsxRuntimeExports.jsxs("div",{"data-test":"welcomeFooter",className:"welcomeWrapper--footer",children:[jsxRuntimeExports.jsx("h5",{className:"headings__h5",children:"Looking for more information?"}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>window.open("https://www.aceable.com/support/"),children:"Visit the Help Center"})]})]})]})]})]})},ContinueLearningButton=({location:t,chapter:e,onClick:n,disabled:s=!1,text:i="Continue Your Course",stretch:a=!0})=>jsxRuntimeExports.jsx("button",{"data-test":"continueLearningButton",onClick:n,disabled:s,"data-stretch":a,className:classNames(["group flex justify-center items-center border-2 bg-controls-brand-2 border-solid border-controls-red rounded-[100px] px-[93.5px] py-[9.5px] whitespace-nowrap h-14 cursor-pointer","hover:bg-controls-brand-2-hover hover:border-controls-brand-2-hover","active:bg-controls-brand-2-active active:border-controls-brand-2-active","focus-visible:shadow-(--continue-btn) focus-visible:outline-none","disabled:bg-controls-disabled-background disabled:border-controls-disabled-background disabled:cursor-default!","data-[stretch=true]:w-full"]),"aria-label":`Continue Your Course ${t!==void 0&&e!==void 0?`Level ${t} : Chapter ${e}`:""}`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[jsxRuntimeExports.jsx("span",{className:"font-extrabold text-base leading-[19.2px] text-content-reverse group-disabled:text-controls-disabled-foreground",children:i}),t!==void 0&&e!==void 0&&jsxRuntimeExports.jsxs("span",{className:"font-bold text-xs leading-[14.4px] text-content-reverse group-disabled:text-controls-disabled-foreground",children:["Level ",t,":Chapter ",e]})]})}),LearningPracticeToggle=({siblingCourse:t,siblingCourseProgressId:e})=>{const n=useSelector(selectUserId),s=useSelector(selectUiIsLoading),i=useDispatch(),{topicType:a}=t,o=a==="LEARNING",l=a==="TEST_PREP",u=()=>{i({type:BUTTON_PRESSED,payload:{to:l?"toggle.practice":"toggle.course",from:"dash.view"}}),i({type:COURSE_SWITCH_START,payload:{userId:n,progressId:e}})};return jsxRuntimeExports.jsxs("div",{"data-test":"learningPracticeToggle",className:"flex justify-center gap-2 w-full h-12",children:[jsxRuntimeExports.jsxs("button",{"data-test":"courseToggle",onClick:()=>{l||u()},disabled:l||s,className:`
                    ${l?"bg-primary-card-active":"bg-transparent"} ${l?"cursor-default":"hover:bg-primary-card-hover active:bg-primary-card-active cursor-pointer"} 
                    text-regular p-4 pl-2 rounded-lg flex-1 flex items-center justify-center 
                    controls__learning-practice-toggle-label uppercase focus:outline-none focus:ring-2 focus:ring-controls-primary
                  `,children:[jsxRuntimeExports.jsx("span",{className:"gritIcon gritIcon--course bg-regular"}),jsxRuntimeExports.jsx("span",{children:"Course"})]}),jsxRuntimeExports.jsxs("button",{"data-test":"testPrepToggle",onClick:()=>{o||u()},disabled:o||s,className:`
                    ${o?"bg-primary-card-active":"bg-transparent"} ${o?"cursor-default":"hover:bg-primary-card-hover active:bg-primary-card-active cursor-pointer"} 
                    text-regular p-4 pl-2 rounded-lg flex-1 flex items-center justify-center 
                    controls__learning-practice-toggle-label uppercase focus:outline-none focus:ring-2 focus:ring-controls-primary
                  `,children:[jsxRuntimeExports.jsx("span",{className:"gritIcon gritIcon--practice bg-regular"}),jsxRuntimeExports.jsx("span",{children:"Test Prep"})]}),jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:s,centered:!0})]})},useScrollShrink=({isMobile:t=!1,hideThreshold:e=200,showThreshold:n=2,containerRef:s,titleClasses:i=["headings__h1","headings__h3"],measurementRef:a,dynamicThresholdMultiplier:o=.8}={})=>{const l=useMotionValue(0),[u,c]=reactExports.useState(i[0]),[d,p]=reactExports.useState(!1),[m,g]=reactExports.useState(e),[E,x]=reactExports.useState(n),[b,S]=reactExports.useState(0),[C,T]=reactExports.useState(!1);reactExports.useEffect(()=>{if(!t||C||!a?.current)return;const F=a.current.getBoundingClientRect().height;S(F),T(!0)},[t,a,C]),reactExports.useEffect(()=>{if(!t||!a?.current)return;const F=a.current,H=()=>{const ne=F.getBoundingClientRect().height,re=Math.max(e,ne*o),se=Math.min(n,ne*.1);g(re),x(se)};H();let Q;const Z=new ResizeObserver(()=>{clearTimeout(Q),Q=setTimeout(()=>{H()},100)});return Z.observe(F),()=>{clearTimeout(Q),Z.disconnect()}},[t,a,e,n,o]),reactExports.useEffect(()=>{if(!t||!s?.current)return;const F=s.current,H=()=>{const Q=F.scrollTop;l.set(Q),!d&&Q>m?(p(!0),c(i[1])):d&&Q<=E&&(p(!1),c(i[0]))};return F.addEventListener("scroll",H,{passive:!0}),()=>{F.removeEventListener("scroll",H)}},[t,l,d,m,E,s,i]);const I=t&&d?0:1,D=t?d:!1,P=useTransform(l,[0,50],t?[0,-10]:[0,0]);return{scrollY:l,titleSize:u,isElementsHidden:d,hideableOpacity:I,shouldHideOnMobileScroll:D,cardY:P,cardTranslateY:t?d?0:-8:0,cardShadow:t&&d?"0px 2px 8px rgba(0,0,0,0.15)":"0px 0px 0px rgba(0,0,0,0)",dynamicHideThreshold:m,dynamicShowThreshold:E,shouldBeSticky:t&&d,spacerHeight:b}},AlertPill=({alertTitle:t,icon:e,priority:n})=>{const i={AFFIDAVIT:"stamp",LOCKED:"lock-line",THUMBPRINT:"thumbprint-line",MAINTENANCE:"maintenance-line",TIME:"clock"}[e]??e.toLowerCase();return jsxRuntimeExports.jsxs("div",{className:`grit alert-pill ${n}-priority`,children:[jsxRuntimeExports.jsx("span",{className:`icon ${n}-priority `,style:getIconStyle(i,"x-small")}),jsxRuntimeExports.jsx("span",{"data-test":"alertPill",className:"metadata__condensed",children:t})]})},CourseAlertsCard=({alerts:t,alertPills:e})=>{useComponentLog("CourseAlerts");const[n,s]=reactExports.useState(!1),i=t?.length===1?`(${t.length}) Course Alert`:`(${t?.length}) Course Alerts`;return jsxRuntimeExports.jsxs("div",{onKeyDown:a=>{a.key==="Enter"&&!n&&s(!n)},onClick:()=>{s(!n)},"data-test":"alertModule",className:"course-alerts-card",role:"button",tabIndex:0,children:[jsxRuntimeExports.jsxs("div",{className:`top-contents ${n?"expanded":""} `,children:[jsxRuntimeExports.jsx("div",{className:"label-container",children:jsxRuntimeExports.jsx("h6",{"data-test":"alertLabel",className:"headings__h6",children:i})}),jsxRuntimeExports.jsx("div",{className:"carat-container",children:jsxRuntimeExports.jsx("span",{"data-test":"alertToggle",className:`carat ${n?"rotate":""}`,style:{...getIconStyle("carat","x-small")}})})]}),!n&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"alerts-pill-container",children:jsxRuntimeExports.jsx("div",{"data-test":"alertPills",className:"alert-pills",children:e?.map((a,o)=>jsxRuntimeExports.jsx(AlertPill,{alertTitle:a.title,icon:a.icon||"info",priority:a.priority},`${a.title}_${o}`))})}),jsxRuntimeExports.jsx(AnimatePresence,{children:n&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{ease:[.17,.67,.67,.67]},className:"alerts-container",children:jsxRuntimeExports.jsx("div",{className:"alerts",children:t?.map((a,o)=>jsxRuntimeExports.jsx("div",{children:a.component},o))})})})]})},CourseCard=({isFreeTrial:t,isHideProgress:e=!1,isNonLinear:n=!1,isCourseComplete:s,courseDeadlineData:i,percentage:a=0,previousPercentage:o=0,courseSwitcher:l,coursesLength:u=1,courseTitle:c,courseRemainingHours:d,coursePrice:p=19,alerts:m=[],alertPills:g=[],isMobile:E=!1,scrollShrinkOptions:x})=>{useComponentLog("CourseCard");const b=useDispatch(),S=useNavigate(),C=reactExports.useRef(null),{titleSize:T,shouldHideOnMobileScroll:I,cardTranslateY:D,cardShadow:P,shouldBeSticky:O,spacerHeight:B}=useScrollShrink({isMobile:E,hideThreshold:200,showThreshold:2,containerRef:x?.scrollShrinkContainerRef,measurementRef:C}),F=useSelector(selectprogressState),H=useSelector(selectAffiliateState),Q=useSelector(selectDashboardState),{isComplete:Z,currentChapter:ne,currentLevel:re}=F,{metadataOdyssey:se,summaryOdyssey:G}=Q,K=G.find(We=>We.course._id===se?.courseId),{siblingCourse:M,siblingCourseProgressId:W,course:ee,isBundlePurchase:z}=K||{},{isTopicEnabled:ae,topicCourseType:ce}=ee||{},he=ae&&ce==="TEST_PREP"&&se?.mockExamData,fe=()=>{store.dispatch({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"activity.upgrade"}}),S("/activity/upgrade")},Ce=We=>We==="negative"?"!text-content-negative":We==="warning"?"!text-content-warning":"!text-regular";reactExports.useEffect(()=>{i?.data.isRenewable&&b(genericAnalyticsAndIterableEvent("Component Shown",{to:"renewalCta.view"}))},[]);const Me=()=>{if(!Z&&i)if(i.data.isRenewable||i.data.isReenrollable){i.data.isRenewable&&b({type:BUTTON_PRESSED,payload:{to:"renewal.modal.view",from:"dashboard",type:z?"bundle":"single"}});const We=i.data.isRenewable?[{type:BUTTON_PRESSED,payload:{from:"renewal.modal",to:"renewal.view",type:z?"bundle":"single"}},{type:OPEN_LINK,payload:{linkObj:{title:"Renew Your Course",key:"renew.view",type:"APP",data:{id:"renew"}}}}]:[{type:OPEN_LINK,payload:{linkObj:{title:"Contact Support",link:i.data.contactSupportUrl,type:"URL"}}}];store.dispatch({type:SHOW_MODAL,payload:{modal:{message:i.message,title:i.title,buttonText:i.buttonText,secondaryButtonText:"Close",secondaryButtonVariant:"ghost",secondaryButtonColor:"primary",confirmDispatch:We,secondaryDispatch:[{type:HIDE_MODAL}]}}})}else store.dispatch({type:SHOW_MODAL,payload:{modal:{title:i.title||i.data.label,message:i.message,buttonText:i.buttonText,confirmDispatch:[{type:HIDE_MODAL}]}}})},Ye=async()=>{const We=CourseObj.getCurrent(),{paywallLevel:Be,paywallChapter:rt}=We||{},tt=re??0,Ue=ne??0;try{await utilities.verifyIsNotPaid(F,Be,tt,Ue,rt)?(store.dispatch(genericAnalyticsAndIterableEvent("Trial Ended",{})),store.dispatch({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"activity.upgrade"}}),S("/activity/upgrade")):(store.dispatch({type:BUTTON_PRESSED,payload:{to:"CONTINUE_LEARNING"}}),resumeCourse(F))}catch(Pe){store.dispatch({type:BUTTON_PRESSED,payload:{to:"CONTINUE_LEARNING"}}),resumeCourse(F),console.error(Pe)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[O&&x?.isAtDashboardLevel&&B>0&&jsxRuntimeExports.jsx("div",{style:{height:B}}),jsxRuntimeExports.jsx(motion.section,{animate:{y:D,boxShadow:P},transition:{duration:.4,ease:[.25,.8,.25,1]},style:{position:O?x?.isAtDashboardLevel?"fixed":"sticky":"static",top:O?x?.isAtDashboardLevel?"3.75rem":"0":"auto",left:O?"0":"auto",right:O?"0":"auto",zIndex:O?1e3:1},children:jsxRuntimeExports.jsx("div",{ref:C,className:`course-card px-8 ${I?"py-4":"p-8"} max-tablet:shadow-lg max-tablet:rounded-b-2xl`,children:jsxRuntimeExports.jsxs("div",{className:`card-content ${I?"gap-4":"gap-8"}`,children:[jsxRuntimeExports.jsxs("div",{className:"course-title-container",children:[(l||H.buttonsList.length>0)&&!I&&jsxRuntimeExports.jsx("div",{className:"course-switcher-container",children:jsxRuntimeExports.jsx(Button$2,{variant:"text",iconLeft:"arrow-backward",onClick:()=>{store.dispatch({type:REDIRECT_TO_URL,payload:{url:"courseswitch.view"}})},"data-test":"courseProgressBackButton",children:`Your Courses (${u})`})}),t&&jsxRuntimeExports.jsx("span",{"data-test":"freeTrial",className:"font-nunito not-italic font-extrabold text-[13px] leading-[13px] text-brand-2",children:"Free Trial"}),jsxRuntimeExports.jsx(motion.h1,{"data-test":"currentCourseLabel",className:T,animate:{opacity:1},transition:{duration:.2},children:c},T)]}),M?._id&&W&&jsxRuntimeExports.jsx(LearningPracticeToggle,{siblingCourse:M,siblingCourseProgressId:W}),he&&jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"takeMockExamButton",stretch:!0,onClick:()=>{S(`/acetest/ready/${F._id}/STUDY/${se.mockExamData?.testId}/0/previousTests`)},children:"Take a Mock Exam"})}),!I&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[m.length>0&&jsxRuntimeExports.jsx(CourseAlertsCard,{alerts:m,alertPills:g}),!Z&&i&&jsxRuntimeExports.jsxs("div",{"data-test":"courseExpirationMessage",className:`expiration-container ${Ce(i.data.expirationPhaseColor)}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"gritIcon--x-small gritIcon--calendar-normal !bg-current","data-test":"calendarIcon"}),jsxRuntimeExports.jsx("p",{className:"text-[13px] leading-[21px] font-nunito font-normal text-current",children:i.data.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center max-h-[22px] gap-1",children:[jsxRuntimeExports.jsx("p",{className:"text-[13px] leading-[21px] font-nunito font-bold text-current",children:i.data.date}),i.data.isRenewable||i.data.isReenrollable?jsxRuntimeExports.jsx("button",{onClick:Me,className:"text-[13px] leading-[13px] font-nunito font-black text-controls-primary hover:text-controls-primary-hover underline cursor-pointer",children:i.data.isRenewable?"Renew":"Re-enroll"}):jsxRuntimeExports.jsx(IconButton,{onClick:Me,iconName:"info",iconSize:"x-small",style:{width:"28px"}})]})]})]}),!e&&jsxRuntimeExports.jsxs("div",{"data-test":"courseProgressBar","data-percentage":a,className:"progress-container",children:[!I&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Overall Progress"}),s?jsxRuntimeExports.jsx(FloatingProgressBar,{percentage:100,size:"large"}):jsxRuntimeExports.jsx(FloatingProgressBar,{isAnimated:!0,previousPercentage:Math.ceil(Number(o)),percentage:Math.ceil(Number(a)),size:"large"})]}),jsxRuntimeExports.jsxs("div",{className:"progress-labels",children:[jsxRuntimeExports.jsxs("span",{className:"metadata__regular",children:[Math.ceil(Number(a)),"% Complete"]}),!s&&a!==100&&!n&&jsxRuntimeExports.jsx("div",{className:"hours-remaining-label",children:jsxRuntimeExports.jsx("span",{"data-test":"hoursRemainingLabel",className:"metadata__regular",children:d})})]})]}),!s&&a!==100&&!n&&jsxRuntimeExports.jsxs("div",{className:"button-container",children:[jsxRuntimeExports.jsx(ContinueLearningButton,{onClick:Ye,location:(re??0)+1,chapter:(ne??0)+1}),t&&!!p&&jsxRuntimeExports.jsx("div",{className:"base-button",children:jsxRuntimeExports.jsxs(Button$2,{"data-test":"freeTrialPurchase",onClick:()=>{fe()},variant:"text",children:["Buy Full Course: $",p]})})]})]})})})]})},ConcealedSvg=()=>jsxRuntimeExports.jsx("div",{"data-test":"levelStatus",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.5",height:"12px",version:"1.1",children:jsxRuntimeExports.jsx("g",{fillRule:"evenodd",fill:"none",strokeWidth:"1",stroke:"none",id:"Symbols",children:jsxRuntimeExports.jsx("g",{id:"Concealed-Journey-Card",children:jsxRuntimeExports.jsx("g",{id:"Group",children:jsxRuntimeExports.jsx("g",{id:"Group-2",children:jsxRuntimeExports.jsxs("g",{fill:"#D3DDDF",id:"Group-Copy-3",children:[jsxRuntimeExports.jsx("path",{d:"M10.9932001,2.60443959 C12.6306913,3.26157674 13.9852143,4.46909712 15.0567691,6.22700074 C13.2545208,8.95812283 10.8215998,10.3236839 7.75800606,10.3236839 C7.52820224,10.3236839 7.30108566,10.3160003 7.07665634,10.3006331 L7.85974309,8.76214368 C9.16236007,8.53650675 10.1530255,7.40077362 10.1530255,6.03365819 C10.1530255,5.59544935 10.0512416,5.1810134 9.87002584,4.81270225 L10.9932001,2.60443959 Z M7.75800606,2.01599156 L7.973,2.01899156 L7.339,3.26499156 L7.21510092,3.26948131 C5.76425251,3.35666367 4.61456397,4.56089885 4.61456397,6.03365819 C4.61456397,6.62688951 4.80110088,7.1765528 5.11871936,7.62719272 L4.12107592,9.58823588 C2.5887661,8.92135457 1.21507412,7.80094285 0,6.22700074 C2.01741518,3.41966129 4.60341721,2.01599156 7.75800606,2.01599156 Z",id:"Combined-Shape"}),jsxRuntimeExports.jsx("polygon",{id:"Rectangle-Copy",transform:"translate(7.528385, 6.169838) rotate(-331.000000) translate(-7.528385, -6.169838) ",points:"6.52838454 -0.330162283 8.13289752 -0.293931695 8.52838454 12.6698377 6.92387156 12.6336071"}),jsxRuntimeExports.jsx("circle",{id:"Oval-Copy",cx:"7.37866999",cy:"6.00989408",r:"2"})]})})})})})})}),ProgressSvg=({levelProgress:t,className:e="gritCircleProgress__node--progress"})=>jsxRuntimeExports.jsx("div",{"data-test":"levelStatus",className:e,children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 70 70",children:jsxRuntimeExports.jsx("circle",{cx:"35",id:"circleProgress",cy:"35",r:"15.9",strokeDashoffset:100-t})})}),CircleProgressBar=({levelProgress:t,levelState:e})=>{const n=()=>{switch(e){case"journey":return"dot-16";case"complete":return"checkmark complete";case"locked":return"locked";default:return""}},s=()=>e==="complete"?{id:"levelComplete"}:{};return jsxRuntimeExports.jsxs("div",{className:`grit circle-progress-bar ${e}`,children:[e==="progress"?jsxRuntimeExports.jsx(ProgressSvg,{levelProgress:t}):null,e==="concealed"?jsxRuntimeExports.jsx(ConcealedSvg,{}):null,e!=="progress"&&e!=="concealed"?jsxRuntimeExports.jsx("span",{"data-test":"levelStatus",...s(),className:n(),children:e==="complete"?"level completed":""}):null]})},isJourneyLevelState=t=>["JOURNEY","PRACTICE_TEST","CERT","CHECK","FLKE","SCHEDULE"].includes(t.type),getLevelState=t=>{const{isConcealed:e,isComplete:n,isCurrent:s,isLocked:i}=t.data;return e?"concealed":isJourneyLevelState(t)?"journey":n?"complete":s||!i?"progress":"locked"},JourneyListItem=({active:t=!1,cardIdx:e,onClick:n,item:s,showNavArrow:i=!1})=>{const{isConcealed:a,listDescription:o,percentProgress:l,title:u}=s.data,c=useDispatch(),d=()=>{const m=`card${e??""}`,g=document.getElementById(m);a?c({type:SHOW_MODAL,payload:{modal:{message:"This content is unavailable at this time.",title:"Hidden Content",buttonText:"Got It"}}}):(n(),g&&g.scrollIntoView({behavior:"smooth"}))},p=()=>{if(a)return"journey";if(s.type==="LEVEL")return"levelMenuButton";if(s.type==="FLKE")return"journeyTodo";if(s.type==="SCHEDULE")return"journeySchedule"};return jsxRuntimeExports.jsxs("button",{id:`level-list-item${e}`,onClick:()=>{d()},className:`grit journey-list-item ${getLevelState(s)} ${t?"active":""}`,"aria-label":`${u??"Journey List Item"} ${o??""}`,"aria-pressed":t,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"line"}),jsxRuntimeExports.jsx(CircleProgressBar,{levelProgress:l?l*100:0,levelState:getLevelState(s)}),jsxRuntimeExports.jsx("div",{className:"line"})]}),jsxRuntimeExports.jsxs("div",{children:[isJourneyLevelState(s)?jsxRuntimeExports.jsx("h6",{"data-test":p(),className:"headings__h6 text-subtle!",children:u}):jsxRuntimeExports.jsx("span",{"data-test":p(),className:`lists-menus__list-title ${isJourneyLevelState(s)?"text-subtle!":""}`,children:u}),o?jsxRuntimeExports.jsx("span",{"data-test":"journeyDescription",className:"lists-menus__list-description",children:o}):null]}),jsxRuntimeExports.jsx("div",{children:i&&!a?jsxRuntimeExports.jsx("span",{}):null})]})},WelcomeCard=({title:t,onWelcomeCardClick:e})=>{const n=localStorage.getItem("WELCOME_CARD_VIEWED"),s=()=>{localStorage.setItem("WELCOME_CARD_VIEWED","true"),e()};return jsxRuntimeExports.jsx("div",{className:"welcomeCardWrapper",children:jsxRuntimeExports.jsxs("div",{className:"welcomeCard",children:[n!=="true"&&jsxRuntimeExports.jsx("div",{className:"imageWrapper",children:jsxRuntimeExports.jsx("img",{alt:t,className:"image",src:"https://d1u7daj727sadp.cloudfront.net/webassets/static-assets/journey-welcome-card.svg"})}),jsxRuntimeExports.jsxs("div",{className:`contentWrapper${n==="true"?"__viewed":""}`,children:[jsxRuntimeExports.jsx("h3",{className:"title",children:t}),n!=="true"&&jsxRuntimeExports.jsx("p",{className:"description",children:"Learn more about your journey from Aceable to the road."}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>{s()},iconRight:"arrow-forward",variant:"text",children:"Let's Go"})]})]})})},LevelListTimeline=({currentLevelIdx:t,levelData:e,onLevelListItemClick:n,isMobile:s})=>(useComponentLog("LevelListTimeLine"),jsxRuntimeExports.jsxs("div",{className:"gritLevelListTimeline",children:[e.map((i,a)=>i.type==="WELCOME"?jsxRuntimeExports.jsx(WelcomeCard,{onWelcomeCardClick:()=>{n(a,s)},title:i.data.title},`${i.data._id}-${a}`):null),jsxRuntimeExports.jsx("div",{"data-test":"journeyList",className:"level-list-container",children:e.map((i,a)=>i.type!=="WELCOME"?jsxRuntimeExports.jsx(JourneyListItem,{active:t===a.toString(),cardIdx:a.toString(),item:i,showNavArrow:s,onClick:()=>{n(a,s)}},`${i.data._id}-${a}`):null)})]})),SideNav=({messages:t,courseSummary:e,courseMetadata:n,courselevelPathList:s,onClickLevelItem:i,isMobile:a,sideNavState:o,currentLevelIdx:l,isTopicEnabled:u=!1,topicContainerRef:c})=>{useComponentLog("SideNav");const d=reactExports.useRef(null),p=(D,P)=>{i(D),P&&(o==="closed"?store.dispatch({type:SET_SIDENAV_OPEN,payload:{sidenavStatus:"open"}}):store.dispatch({type:SET_SIDENAV_CLOSE,payload:{sidenavStatus:"closed"}}))},{pathname:m}=useLocation(),{ui:g,milestone:E,progress:x}=store.getState(),b=e.filter(D=>!D.isHidden).length,S=b>1,C=m==="/dash/index"&&!n?.isPurchased&&g.domainConf.brandId!=="FLVS",T=t.map(D=>({title:D.title,priority:D.priority.toLowerCase(),icon:D.icon})),I=t.map((D,P)=>({component:jsxRuntimeExports.jsx(Alert,{icon:D.icon?.toLowerCase()??"info",title:D.title,description:D.content??D.title,variant:D.priority,messageLinkList:D.linkList},`${D.title}_${P}`)}));return jsxRuntimeExports.jsxs("div",{className:"gritSideNav",children:[jsxRuntimeExports.jsxs("div",{ref:d,className:"gritSideNav__levelList",children:[jsxRuntimeExports.jsx(CourseCard,{courseDeadlineData:n.deadlineModal,alerts:I,alertPills:T,isCourseComplete:x?.isComplete,isNonLinear:n?.isRandomAccess,coursePrice:E?.course?.product?.price,isFreeTrial:C,isHideProgress:n?.isHideProgress,courseSwitcher:S,coursesLength:b,percentage:n.progressCompletePercent*100||0,previousPercentage:n.previousProgressCompletePercent*100,courseTitle:n.courseTitle,courseRemainingHours:n?.progressTimeLeft,isMobile:a,scrollShrinkOptions:u?{scrollShrinkContainerRef:c,isAtDashboardLevel:!0}:{scrollShrinkContainerRef:d,isAtDashboardLevel:!1}}),!u&&jsxRuntimeExports.jsx(LevelListTimeline,{onLevelListItemClick:p,levelData:s,isMobile:a,currentLevelIdx:l.toString()})]}),!a&&jsxRuntimeExports.jsx(DevTools,{})]})},TopicSubCategory=({subCategory:t})=>{const[e,n]=reactExports.useState(!1),s=useDispatch(),i=t.subcategoryList&&t.subcategoryList.length>0,a=l=>{const u={key:l.link.key,type:"APP",data:l.link.data};(u.key==="glossary.view"||u.key==="flashcards.view")&&u.data?.subtopicIdList&&s({type:SET_TOPIC_REDIRECT_DATA,payload:{subtopicIdList:u.data.subtopicIdList}}),s({type:OPEN_LINK,payload:{linkObj:u}})},o=()=>{n(l=>!l)};return jsxRuntimeExports.jsxs("div",{className:" bg-secondary-card rounded-lg",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{i?o():a(t)},className:`w-full px-4 py-2 flex items-start gap-3 hover:bg-secondary-card-hover cursor-pointer rounded-2xl 
        justify-between content-center h-auto desktop:min-h-[3.625rem] active:bg-secondary-card-active focus-visible:outline-none 
        focus-visible:shadow-button`,children:[jsxRuntimeExports.jsxs("div",{className:"flex content-center w-full",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{className:`gritIcon !size-6 gritIcon--${t.icon.toLocaleLowerCase()} bg-regular mr-4`})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col text-left mr-4",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:t.title}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed mt-0 !text-subtle",children:t.description})]})]}),jsxRuntimeExports.jsx("span",{className:`transform transition-transform duration-200 gritIcon !size-6 gritIcon--${i?"arrow-down-xs":"arrow-right-xs"} bg-regular ${e?"rotate-180":"rotate-0"}`})]}),i&&e&&jsxRuntimeExports.jsx("div",{className:"px-4 pb-4 space-y-2",children:t.subcategoryList?.map((l,u)=>jsxRuntimeExports.jsx("button",{onClick:()=>{a(l)},className:"w-full p-3 text-left bg-tertiary rounded-lg hover:bg-divider transition-colors duration-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:l.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-subdued mt-0",children:l.description})]})},u))})]})},TopicItem=({topic:t})=>{const{title:e,categoryList:n,isLocked:s}=t,[i,a]=reactExports.useState(!1),o=()=>{s||a(l=>!l)};return jsxRuntimeExports.jsxs("div",{className:"bg-primary-card rounded-2xl text-regular",children:[jsxRuntimeExports.jsxs("button",{onClick:o,className:`
          w-full p-6 text-left flex justify-between items-center cursor-pointer rounded-2xl
          hover:bg-primary-card-hover active:bg-primary-card-active focus-visible:outline-none 
          focus-visible:shadow-button h-auto desktop:min-h-[4.625rem]
        `,children:[jsxRuntimeExports.jsx("h3",{className:`headings__h3 ${s??"!text-controls-disabled-foreground"}`,children:e}),s?jsxRuntimeExports.jsxs("div",{className:"flex content-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__condensed-bold !text-controls-disabled-foreground",children:"NOT STARTED"}),jsxRuntimeExports.jsx("span",{className:"gritIcon !size-6 gritIcon--lock-line bg-controls-disabled-foreground mb-1"})]}):jsxRuntimeExports.jsx("span",{className:`transform transition-transform duration-200 bg-regular gritIcon !size-6 gritIcon--carat-up${i?" rotate-180":" rotate-0"}`})]}),i&&jsxRuntimeExports.jsx("div",{className:"px-6 pb-6",children:n&&n.length>0?n.map((l,u)=>jsxRuntimeExports.jsxs("div",{className:"mb-4 mt-2",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:l.title})}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.subcategoryList?.map((c,d)=>jsxRuntimeExports.jsx(TopicSubCategory,{subCategory:c},d))})]},u)):jsxRuntimeExports.jsx("div",{className:"text-sm text-subdued",children:"No categories available"})})]})},TopicLevelList=({courselevelPathList:t,title:e="Practice Topics",description:n="Review and practice specific topics to improve your understanding"})=>(useComponentLog("TopicLevelList"),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2 title",children:e}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular subtitle",children:n})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:t.map((s,i)=>s.type==="TOPIC"&&jsxRuntimeExports.jsx(TopicItem,{topic:s.data},i))})]})),DashboardContainer=({onClickChecklistItem:t,onChapterClick:e,statusMessages:n})=>{const i=CourseObj.getCurrent()?.isHideProgress,a=reactExports.useRef(null),o=useSelector(selectDashboardState),l=useSelector(selectDashboardJourneyStepList),u=useSelector(selectUIIsMobile),c=useSelector(selectUIBrandState),d=!!useSelector(selectProgressIsRandomAccess),p=useSelector(selectprogressId),m=useDispatch(),{sidenavStatus:g}=o,{currentLevelIdx:E}=o,x=o.metadataOdyssey,b=o.levelDataOdyssey,S=o.levelDataOdyssey[E],C=o.summaryOdyssey,T=["CERT","PRACTICE_TEST","FLKE","SCHEDULE"],I=C?.find(F=>F.course._id===x?.courseId),D=!!(I?.course.isTopicEnabled&&I?.course.topicCourseType==="TEST_PREP"),P=F=>{const H=b[F];return T.includes(H?.type)&&H?.data.cardData===null?m({type:GET_JOURNEY_CARD_DATA_AND_SET_L_IDX_START,payload:{progressId:p,cardId:H.data._id,currentLevelIdx:F}}):m({type:SET_CURRENT_LEVEL_IDX,payload:{currentLevelIdx:F}})};reactExports.useEffect(()=>{P(E)},[]);const B=b.filter(F=>F.type==="LEVEL").findIndex(F=>F.data._id===S.data._id);return jsxRuntimeExports.jsx("div",{className:"grit screen dashboard",children:D?jsxRuntimeExports.jsxs("div",{ref:a,className:"topic flex flex-col tablet:flex-row h-full overflow-y-auto tablet:overflow-visible",children:[jsxRuntimeExports.jsx("div",{className:"tablet:h-full tablet:overflow-y-auto",children:jsxRuntimeExports.jsx(SideNav,{messages:n,onClickLevelItem:P,courseMetadata:x,courselevelPathList:b,courseSummary:C,currentLevelIdx:E,isMobile:u,sideNavState:g,isTopicEnabled:D,topicContainerRef:a})}),jsxRuntimeExports.jsx("div",{className:"tablet:h-full tablet:overflow-y-auto w-full grow basis-0 p-6 bg-tertiary rounded-tl-2xl",children:jsxRuntimeExports.jsx(TopicLevelList,{courselevelPathList:b,title:x?.courseLevelPathHeader,description:x?.courseLevelPathSubheader})}),u&&jsxRuntimeExports.jsx(DevTools,{})]}):jsxRuntimeExports.jsxs("main",{className:"main",children:[jsxRuntimeExports.jsxs("div",{className:`side-nav ${g==="open"?"close":"open"}`,children:[jsxRuntimeExports.jsx(SideNav,{messages:n,onClickLevelItem:P,courseMetadata:x,courselevelPathList:b,courseSummary:C,currentLevelIdx:E,isMobile:u,sideNavState:g}),u&&jsxRuntimeExports.jsx(DevTools,{})]}),jsxRuntimeExports.jsx("div",{className:`content ${g==="open"?"close":"open"}`,children:S&&jsxRuntimeExports.jsx(ChapterContainer,{actualLevelIdx:B,brand:c,stepList:l,currentLevel:S,isMobile:u,levelIdx:E,onChapterClick:e,progressId:p,onClickChecklistItem:F=>t(F,"list"),isRandomAccess:d,isHideProgress:i})})]})})},openPage=({levelIndex:t,chapterIndex:e,stepIndex:n,chapter:s,forceAlt:i,progress:a})=>(UserObj.getCurrent().isDebug&&i||redirectToBlockerIfAny(a?._id,null,null,"DASHBOARD").then(l=>{l||move({chapter:s})}).catch(()=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"We had to log you out.  Please reach out to us if the problem persists.",title:"There's a problem with this course.",buttonText:"I understand",hideCloseIcon:!0,confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}]}}})}),!1),onChapterClick=async(t,e,n)=>{const s=CourseObj.getCurrent(),{aceRootScope:i}=window,{progressCurrent:a}=i||{},{paywallLevel:o,paywallChapter:l}=s||{},{currentChapter:u,currentLevel:c}=a||{};try{await utilities.verifyIsNotPaid(a,o,c,u,l)?(store.dispatch(genericAnalyticsAndIterableEvent("Trial Ended",{})),store.dispatch({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"activity.upgrade"}}),navigate("/activity/upgrade")):openPage({levelIndex:t,chapterIndex:e,stepIndex:0,chapter:n,forceAlt:!1,progress:a})}catch{openPage({levelIndex:t,chapterIndex:e,stepIndex:0,chapter:n,forceAlt:!1,progress:a})}},DashboardScreen=()=>{useComponentLog("Dashboard"),useReduxMobileState();const t=new Map,{aceRootScope:e}=window,n=useSelector(b=>b.dashboard),s=useSelector(b=>b.ui),i=useSelector(b=>b.progress),{progressCurrent:a}=e,o=a??i,{urlParams:l}=s,{action:u}=l||{},[c,d]=reactExports.useState([]),[p,m]=reactExports.useState(!0),g=useDispatch();useIdleLogoutTimer();const E=reactExports.useCallback(b=>{if(initLoading()){const S=n.levelDataOdyssey.map(C=>C.data);return S.forEach(C=>{t.set(C._id,{inFocus:!1}),C.chapterList?.forEach(T=>{t.set(T._id,{isResolveMenuExpanded:!1,parentLevel:C._id})})}),S}return b},[]);reactExports.useEffect(()=>{(async()=>{try{g(checkMilestone("DASHBOARD")),g({type:CHECK_FOR_PERSISTENT_UPSELLS}),g(setAudioSource({src:""})),window.dispatchEvent(new Event("dashboard-loaded")),e.userCurrent?.isDebug&&forgetOnboarding();const S=get$4("api","hijack");S&&(window.aceRootScope.serverTitle=S.title),await e.progressSync();const C=await DashboardObj.get(o?._id);await UserObj.sync(!1);const T=C.summary.find(I=>I.progressId===o?._id);if(T&&d(T.notificationList),clearLoading(),m(!1),u){const I=u.replace(/[^a-z.]/gi,"");openLink$1({type:"APP",key:I},{},{},{})}}catch(S){console.error(S)}})()},[E]);const x=b=>{g({type:OPEN_LINK,payload:{linkObj:{key:"checklist.viewStep",type:"APP",data:b}}})};return p?jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:p}):jsxRuntimeExports.jsx(DashboardContainer,{onChapterClick,onClickChecklistItem:x,statusMessages:c})},lottieImports=Object.assign({"../courseflow/assets/chapterCompleteAnimation.json":()=>__vitePreload(()=>import("./chapterCompleteAnimation-BLat1IRu.js"),[]),"../courseflow/assets/levelCompleteAnimation.json":()=>__vitePreload(()=>import("./levelCompleteAnimation-DuLDCEmi.js"),[])}),useLottie=t=>{const e=reactExports.useRef(null),[n,s]=reactExports.useState(t),[i,a]=reactExports.useState(null),o=reactExports.useCallback(l=>{s(l)},[]);return reactExports.useEffect(()=>{let l=!0;async function u(){if(n&&lottieImports[n])try{const c=await lottieImports[n]();l&&a(c.default)}catch(c){console.error(`Error loading Lottie animation: ${c instanceof Error?c.message:String(c)}`),l&&a(null)}}return u().catch(c=>{console.error(`Error loading Lottie animation:${c instanceof Error?c.message:String(c)}`),l&&a(null)}),()=>{l=!1}},[n]),[e,i,o]},NewCourseflowComplete=()=>{const t=useNavigate(),e=useDispatch(),n=useParams(),i=useSelector(ne=>selectCourseflowByNodeId(ne,n.nodeId)).data?.completion??{},a=useSelector(ne=>ne.dashboard),o=useSelector(selectCourseState),{header:l,levelIdx:u,nextChapterIdx:c,nextChapterTime:d,nextCta:p,nextPointer:m,nextUnit:g,pointer:E,uiTreatment:x,unit:b,isFirstTime:S,isAllowChapterAdvance:C}=i,T=Object.keys(i).length>0,I=x==="LARGE",D=()=>{if(!o.isRandomAccess){const ne=a.levelDataOdyssey.findIndex(se=>se.data.isCurrent===!0);ne!==-1&&ne!==u&&e({type:SET_CURRENT_LEVEL_IDX,payload:{currentLevelIdx:ne}})}},P=I?motion.h1:motion.h2,O=I?"headings__h1":"headings__h2",[B,F,H]=useLottie(),Q=()=>{e({type:BUTTON_PRESSED,payload:{to:"TAKE_BREAK"}}),e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),D(),t("/dash/index")},Z=()=>{e({type:BUTTON_PRESSED,payload:{to:"NEXT_SECTION"}}),onChapterClick(u??0,c??0,{})};return reactExports.useEffect(()=>{S?H(`../courseflow/assets/${I?"levelCompleteAnimation.json":"chapterCompleteAnimation.json"}`):S||(e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),D(),t("/dash/index"))},[S,I]),S?jsxRuntimeExports.jsx("section",{"data-test":"chapterEndPage",className:"grit screen new-courseflow-complete",children:F?jsxRuntimeExports.jsxs("div",{className:"info-container",children:[jsxRuntimeExports.jsx(motion.div,{"data-test":"chapterEndAnimation",className:"lottie-icon",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut",delay:.3},children:jsxRuntimeExports.jsx(Lottie,{lottieRef:B,autoplay:!0,animationData:F,loop:0})}),jsxRuntimeExports.jsx(P,{className:O,initial:{opacity:0,y:-16},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",delay:.3},children:l??"Chapter Completed!"}),T?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",delay:.35},className:"completed-chapter-info",children:!I&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"metadata__regular",children:E}),jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:b})]})}):null,jsxRuntimeExports.jsx(motion.div,{className:"divider",initial:{opacity:0,y:-16},animate:{opacity:.3,y:0},transition:{duration:1,ease:"easeOut",delay:.4}}),C&&T&&g?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",delay:.45},className:"next-chapter-data-container",children:[jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:"Next Up"}),jsxRuntimeExports.jsxs("div",{className:"next-chapter-titles",children:[m?jsxRuntimeExports.jsx("span",{className:"metadata__regular",children:m}):null,jsxRuntimeExports.jsx("h3",{className:"headings__h3 next-chapter",children:g}),d?jsxRuntimeExports.jsx("span",{className:"metadata__regular time-next-chapter",children:d}):null]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",delay:.45},className:"button-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{"data-test":"takeBreakButton",variant:"ghost",onClick:Q,stretch:!!I,width:I?"300px":void 0,iconLeft:"exit-xs",children:"Go to Course Home"}),p?jsxRuntimeExports.jsx(Button$2,{"data-test":"continueButton",iconRight:"arrow-forward",onClick:()=>{Z()},children:p}):null]})]}):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",delay:.45},className:"break-time-container",children:[jsxRuntimeExports.jsxs("h3",{className:"headings__h3",children:["Break time! ",I?"You've earned it.":""]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",delay:.45},className:"button-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"takeBreakButton",variant:"ghost",onClick:Q,stretch:!!I,width:I?"300px":void 0,iconLeft:"exit-xs",children:"Go to Course Home"})})]})]}):""}):jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0})},CourseflowRoutes=[{path:"courseflow",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"page/:nodeId",element:jsxRuntimeExports.jsx(Courseflow,{})},{path:"question/:nodeId",element:jsxRuntimeExports.jsx(Courseflow,{})},{path:"complete/:nodeId",element:jsxRuntimeExports.jsx(NewCourseflowComplete,{})}]}],DashRoutes=[{path:"dash",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"index",element:jsxRuntimeExports.jsx(DashboardScreen,{})}]}],Video360=()=>{useComponentLog("Video360");const{aceConstants:t}=window,e=store.getState(),{course:n}=e,[s,i]=reactExports.useState([]),[a,o]=reactExports.useState();return reactExports.useEffect(()=>{(async()=>{try{const u=n.practiceTools?.playlistId,c=await axios.get("https://www.googleapis.com/youtube/v3/playlistItems",{params:{playlistId:u,part:"snippet",key:t.TOKENS.youtube}});i(c.data.items),o(c.data.items[0])}catch(u){console.error(u)}})()},[]),!s.length||!a?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsx("div",{className:"grit screen video360",children:jsxRuntimeExports.jsxs("div",{className:"main",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Interactive Videos"}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("div",{"data-test":"vidlistContainer",className:"video360__wrapper",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("iframe",{title:"video360",src:`https://www.youtube.com/embed/${a.snippet.resourceId.videoId}?enablejsapi=1`})})}),jsxRuntimeExports.jsxs("div",{className:"video360__playlist",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Up Next"}),jsxRuntimeExports.jsx("div",{className:"video360__playlist-wrapper",children:s.length?s.map(l=>jsxRuntimeExports.jsxs("button",{onClick:()=>{o(l)},className:`video360-item ${l.id===a.id?"active":""}`,"aria-label":`Video Button with title ${l.snippet.title}`,children:[jsxRuntimeExports.jsx("img",{src:l.snippet.thumbnails.default.url,alt:l.snippet.title}),jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:l.snippet.title})]},l.id)):null})]})]})]})})},ExtrasRoutes=[{path:"videos",element:jsxRuntimeExports.jsx(Video360,{})}],getFlashCards=async({courseId:t,term:e,subtopicIdList:n})=>call("flashcard","GET",{courseId:t,term:e,subtopicIdList:n});function FlashCard({text:t,answer:e,animationDirection:n,imageUrl:s,imageAltTag:i}){const[a,o]=reactExports.useState(!1),l=()=>{o(!a)},u=s&&s.trim()!=="";return reactExports.useEffect(()=>{o(!1)},[t]),jsxRuntimeExports.jsx("div",{className:"grit screen flash-cards",children:jsxRuntimeExports.jsxs("button",{className:` 
          flash-card ${n}
          h-full border-none bg-transparent p-0 cursor-pointer perspective-[62.5rem] 
          relative flex min-w-[16.39rem] max-w-[32.79rem] min-h-[34.375rem] 
          max-h-[62.5rem] aspect-[315/600] rounded-3xl focus-visible:outline-0
          focus-visible:shadow-[var(--shadows-focus)]
        `,onClick:l,"data-test":`cardFaceFront ${a?"flipped":""}`,"aria-label":`Flash Card for ${t}`,children:[jsxRuntimeExports.jsx("div",{className:`card-face card-face-front ${a?"flipped":""} absolute w-full h-full overflow-hidden`,children:jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto h-full flex flex-col",children:[u&&jsxRuntimeExports.jsx("div",{className:"w-full rounded-t-3xl bg-quaternary",children:jsxRuntimeExports.jsx("img",{src:s,title:i,alt:i,className:"w-full h-full object-cover rounded-t-3xl"})}),jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx("h1",{className:`term headings__${u?"h2":"h1"}`,"data-test":"termFront",children:t}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("mark",{className:`text-transparent bg-controls-disabled-background select-none rounded-2xl box-decoration-clone 
                  ${u?"text-base/[1.6rem] font-normal":"text-xl/[2rem] font-semibold"}`,children:e})})]})]})}),jsxRuntimeExports.jsx("div",{className:`card-face card-face-back ${a?"flipped":""} absolute w-full h-full overflow-hidden`,children:jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto h-full flex flex-col",children:[u&&jsxRuntimeExports.jsx("div",{className:"w-full rounded-t-3xl bg-quaternary",children:jsxRuntimeExports.jsx("img",{src:s,alt:i,className:"w-full h-full object-cover rounded-t-3xl"})}),jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx("h1",{className:`term headings__${u?"h2":"h1"}`,children:t}),jsxRuntimeExports.jsx("p",{className:`definition paragraph__${u?"regular":"large"}`,"data-test":"termDefinition",children:e})]})]})})]})})}const useFetchAndShuffleTerms=(t,e)=>{const[n,s]=reactExports.useState([]),[i,a]=reactExports.useState(!1);return reactExports.useEffect(()=>{let l=!1;return(async()=>{try{a(!0);const d=(await getFlashCards({courseId:t,subtopicIdList:e})).flashcardList;l||(s(d),a(!1))}catch(c){l||a(!1),console.error(c)}})(),()=>{l=!0,sessionStorage.removeItem("shuffledTerms"),sessionStorage.removeItem("currentTermIndex")}},[t]),[(()=>{const l=sessionStorage.getItem("shuffledTerms");if(l)return JSON.parse(l);if(n.length>0){const u=shuffleArray(n);return sessionStorage.setItem("shuffledTerms",JSON.stringify(u)),u}return[]})(),i]},FlashCards=()=>{useComponentLog("FlashCards");const{user:t}=store.getState(),{defCourseId:e}=t,n=useSelector(selectUIsubtopicIdList),s=useDispatch(),[i,a]=useFetchAndShuffleTerms(e,n??[]),[o,l]=reactExports.useState(0),[u,c]=reactExports.useState("");reactExports.useEffect(()=>{const p=sessionStorage.getItem("currentTermIndex");p!==null&&l(parseInt(p,10))},[]),reactExports.useEffect(()=>{sessionStorage.setItem("currentTermIndex",o.toString())},[o]);const d=(p,m)=>{l(p),c(m),localStorage.setItem("flashcard",`${p}`),setTimeout(()=>{c("")},240)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,currentCount:o+1,totalCount:i?.length,backButton:{text:"Back",callback:()=>{n?.length&&s({type:CLEAR_TOPIC_REDIRECT_DATA}),navigate("/dash/index")}},preferencesEnabled:!0}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[a?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i?.length>0&&jsxRuntimeExports.jsx(FlashCard,{text:i[o].text,answer:i[o].answer,animationDirection:u,imageUrl:i[o].imageUrl,imageAltTag:i[o].imageAltTag??""})}),jsxRuntimeExports.jsx(CourseNavigation,{backButton:{text:"",callback:()=>{o>0&&d(o-1,"back")},disabled:o===0},forwardButton:{text:"",callback:()=>{o<i.length-1&&d(o+1,"forward")},disabled:o===i.length-1}})]})]})},FlashCardsRoute=[{path:"flashcards",element:jsxRuntimeExports.jsx(FlashCards,{})}],FoafButton=({onAnswer:t,category:e,correctCategory:n,isKeyboardKeyShown:s,keyboardKey:i,"data-test":a})=>{const{aceRootScope:o}=window,{userCurrent:l}=o||{},u=(p,m)=>m<p.descriptorList.length-p.remainingDescriptors.length,c={...getIconStyle("dot-6","xx-small")},d={...getIconStyle("checkmark-inverted","x-small")};return jsxRuntimeExports.jsxs("button",{"data-test":a,className:`grit foafButton fields__answer ${e.title===n&&l?.isDebug?"debug__correct-hint":""}`,"aria-label":`Answer Button with title ${e.title}`,onClick:p=>{t(p,e)},children:[s&&jsxRuntimeExports.jsx("span",{className:"keyboard-key paragraph__monospaced",children:i}),jsxRuntimeExports.jsx("span",{className:"answer-label",children:e.title}),jsxRuntimeExports.jsx("span",{className:"bucket",children:e.descriptorList.map((p,m)=>jsxRuntimeExports.jsx("span",{className:`bucket-dot ${u(e,m)?"complete":""} `,style:u(e,m)?d:c},`${p.description}-${m}`))})]})},FoafLayout=({children:t,onMoveForward:e,isInExperienceMode:n=!1,isForwardAllowed:s=!1,isNavShown:i,backButtonText:a,forwardButtonText:o})=>{useComponentLog("FoafLayout");const{ui:l,courseflow:u,course:c,dashboard:d}=store.getState()||{},{aceRootScope:p}=window,{courseCurrent:m}=p,g=m??c,{isShowCourseInfo:E,schoolInformation:x}=g,{urlParams:b}=l,S=getNodeById(u,b.nodeId),C=()=>{if(n)return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"foaf.ready",params:{...b}}});forgetBucket(),store.dispatch({type:BACKTRACK})};return reactExports.useEffect(()=>{store.dispatch({type:SET_ATTRIBUTES,payload:{attributes:{prevChapterCompletePercent:u?.chapterCompletePercent}}})},[]),jsxRuntimeExports.jsxs("div",{className:"grit screen foaf",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,isChapterComplete:getChapterIsComplete(d,u.chapterId),currentCount:S&&S.index+1,totalCount:u.totalNodeCount,backButton:{text:"Exit Chapter",callback:()=>store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),hideIcon:!1,"data-test":"courseExitButton"},chapterCompletePercent:u?.chapterCompletePercent,previousCompletePercent:u?.prevChapterCompletePercent,chapterTimeLeft:u?.chapterTimeLeft}),jsxRuntimeExports.jsx("div",{className:"container",children:t}),i?jsxRuntimeExports.jsx(CourseNavigation,{currentCount:S&&S.index+1,totalCount:u.totalNodeCount,centerLabel:E&&x,backButton:{text:a??"",callback:()=>C(),disabled:!S?.isBacktrackAllowed||!1,"data-test":"icon-arrow-prev",id:"icon-arrow-prev"},forwardButton:{text:o??"",callback:()=>{e?e():store.dispatch({type:ADVANCE})},disabled:!s,id:"results-continue-btn"}}):null]})},PHASE_TYPES={categorize:{false:"INCORRECT_DESCRIPTOR_PROMPT_CATEGORY_SELECTED_NO_SECOND_PHASE",true:"CORRECT_DESCRIPTOR_PROMPT_CATEGORY_SELECTED_NO_SECOND_PHASE"}},generateUUID=()=>{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?n:n&3|8).toString(16)})},formEventList=(t,e,{promptDescriptor:n,selectedCategory:s,promptCategory:i})=>{const a=PHASE_TYPES[t][`${e}`];return{_id:generateUUID(),type:a,occurredAt:new Date().toISOString(),promptDescriptor:n,promptCategory:i,selectedCategory:s}},getRandomDescriptor=t=>{const e=t.filter(a=>a.remainingDescriptors.length>0);if(!e)return null;const n=lodashExports.sample(Object.keys(e));if(n==null)return null;const s=e[n].remainingDescriptors,i=lodashExports.sample(Object.keys(s));return i==null?null:s[i].description},isCorrectAnswer=(t,e)=>t===e,getCategoryOfDesciptor=(t,e)=>t.find(s=>s.descriptorList.find(i=>i.description===e))?.title,FoafCategorize=()=>{useComponentLog("FoafCategorize");const{aceRootScope:t}=window,{progressCurrent:e}=t||{},{ui:n}=store.getState()||{},{urlParams:s}=n||{},[i,a]=reactExports.useState(""),[o,l]=reactExports.useState([]),[u,c]=reactExports.useState(!1),[d,p]=reactExports.useState(!1),[m,g]=reactExports.useState(""),[E,x]=reactExports.useState(""),[b,S]=reactExports.useState(!1),[C,T]=reactExports.useState(""),I=recallBucket(),D=lodashExports.get(I,"bucketivity.isSkippable",!1),P=useDispatch();useIdleLogoutTimer();const O=H=>{a("Choose the category below that the above fact relates to.");const Q=lodashExports.get(H?.bucketivityProgress,"categoryList",[]),Z=getRandomDescriptor(Q),ne=getCategoryOfDesciptor(Q,Z);l(Q),g(Z),x(ne)},B=H=>{const Q=H.map(ne=>ne.remainingDescriptors);[].concat(...Q).length===0&&setTimeout(()=>{P({type:REDIRECT_TO_URL,payload:{url:"foaf.results",params:{...s}}})},750)},F=(H,Q)=>{if(H.preventDefault(),b)return;if(isCorrectAnswer(Q.title,E))c(isCorrectAnswer(Q.title,E)),T("Correct! Nice job!"),S(!0),setTimeout(()=>{S(!1),c(!1),T("")},750);else{p(!isCorrectAnswer(Q.title,E)),T("Incorrect. Try again!");const re=recallBucket();O(re),S(!0),setTimeout(()=>{S(!1),p(!1),T("")},750)}if(Q.remainingDescriptors.length===0)return;const Z=formEventList("categorize",isCorrectAnswer(Q.title,E),{promptCategory:null,promptDescriptor:m,selectedCategory:Q.title});lodashExports.merge({bucketivityProgressId:s.bucketivityProgressId,bucketivityType:"categorize"},Z);const ne=[Z];updateFoaf(s.bucketivityProgressId,ne).then(re=>{re&&(O(re),memorizeBucket(re),B(re.bucketivityProgress.categoryList))})};return useHotkeys([{combo:"arrowright",description:"Start Foaf",callback:()=>""},{combo:"shift+arrowright",description:"Start Foaf",callback:()=>""}]),reactExports.useEffect(()=>{(async()=>{const Q=await getFoaf({progressId:window.aceRootScope.progressCurrent._id,bucketivityProgressId:s.bucketivityProgressId,bucketivityId:s.bucketivityId});if(!!!lodashExports.get(Q,"bucketivityProgress")&&Q.bucketivityProgress.is.complete){const ne=await initFoaf({progressId:e._id,bucketivityId:s.bucketivityId});memorizeBucket(ne),O(ne)}else memorizeBucket(Q),O(Q)})().catch(Q=>{console.error("Failed to get Foaf data",Q)})},[]),jsxRuntimeExports.jsx(FoafLayout,{isInExperienceMode:!0,isNavShown:!0,backButtonText:"Exit Game",isForwardAllowed:!!D,forwardButtonText:D?"Skip Game":"",children:jsxRuntimeExports.jsxs("div",{className:`grit categorize${u?" background--foaf-correct":""} ${d?" background--foaf-incorrect":""}`,children:[jsxRuntimeExports.jsx("div",{className:`question-card categorize__prompt ${u?"background--foaf-correct":""}
            ${d?"background--foaf-incorrect":""}`,children:jsxRuntimeExports.jsxs("div",{className:`question-card__content ${u||d?"active":"inactive"}`,children:[jsxRuntimeExports.jsx("p",{"data-test":"optionToCategorize",className:"categorize__descriptor paragraph__question","aria-live":"polite","aria-atomic":"true",children:u||d?jsxRuntimeExports.jsx("span",{className:"sr-only",children:C}):m}),u&&jsxRuntimeExports.jsx("span",{className:"icon correct foaf__icon--correct",style:{...getIconStyle("checkmark-line","medium")}}),d&&jsxRuntimeExports.jsx("span",{className:"icon incorrect",style:{...getIconStyle("x-line","medium")}})]})}),jsxRuntimeExports.jsx("p",{className:"descriptor-list__prompt paragraph__question",children:i}),jsxRuntimeExports.jsx("div",{className:"category-list",children:o.map(H=>{const Q=H.title===E;return jsxRuntimeExports.jsx(FoafButton,{category:H,correctCategory:E,onAnswer:F,"data-test":Q?"foaf-correct-answer":"foaf-incorrect-answer"},H.title)})})]})})},FoafReady=()=>{useComponentLog("FoafReady");const{aceRootScope:t}=window,{progressCurrent:e}=t,{ui:n}=store.getState(),{urlParams:s}=n,[i,a]=reactExports.useState(null),[o,l]=reactExports.useState(""),[u,c]=reactExports.useState(""),[d,p]=reactExports.useState(""),m=reactExports.useRef(null);useIdleLogoutTimer();const g=lodashExports.get(i?.bucketivityProgress,"is.complete",!1),E=lodashExports.get(i?.bucketivityProgress,"totalCorrectCount",0)+lodashExports.get(i?.bucketivityProgress,"totalIncorrectCount",0)>0;useHotkeys([{combo:"arrowright",description:"Start Foaf",callback:()=>""},{combo:"shift+arrowright",description:"Start Foaf",callback:()=>""}]);const x=async()=>{const D=await getFoaf({progressId:e._id,bucketivityProgressId:null,bucketivityId:s.bucketivityId});if(!!!lodashExports.get(D,"bucketivityProgress")||!1){const B=await initFoaf({progressId:e._id,bucketivityId:s.bucketivityId});memorizeBucket(B),a(B),l("Facts of a Feather"),c("Match the categories to the facts that describe them."),p(B.bucketivity.title||"Types of Food")}else memorizeBucket(D),a(D),l("Facts of a Feather"),c("Match the categories to the facts that describe them."),p(D.bucketivity.title||"Types of Food")};reactExports.useEffect(()=>{s.bucketivityId||store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),x().catch(D=>{console.error("Failed to get Foaf data",D)})},[]),reactExports.useEffect(()=>{s.nodeId!==""&&store.dispatch({type:SET_CURRENT_NODE,payload:{nodeId:s.nodeId}})},[s.nodeId]);const b=()=>recallBucket().bucketivityProgress.categoryList.flatMap(O=>O.remainingDescriptors).length===0,S=()=>{t.numFoafAttempts+=1,b()?store.dispatch({type:REDIRECT_TO_URL,payload:{url:"foaf.results",params:{...s}}}):store.dispatch({type:REDIRECT_TO_URL,payload:{url:"foaf.categorize",params:{...s,bucketivityProgressId:i.bucketivityProgress._id}}})},C=async()=>{t.numFoafAttempts+=1,forgetBucket();try{const D=await initFoaf({progressId:window.aceRootScope.progressCurrent._id,bucketivityId:s.bucketivityId});memorizeBucket(D),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"foaf.categorize",params:{...s,bucketivityProgressId:D.bucketivityProgress._id}}})}catch(D){console.error(D)}},T=()=>{b()?store.dispatch({type:REDIRECT_TO_URL,payload:{url:"foaf.results",params:{...s,bucketivityProgressId:i.bucketivityProgress._id}}}):store.dispatch({type:REDIRECT_TO_URL,payload:{url:"foaf.categorize",params:{...s,bucketivityProgressId:i.bucketivityProgress._id}}})},I=()=>{if(!g&&!E){S();return}if(!g&&E){T();return}g&&store.dispatch({type:ADVANCE})};return reactExports.useEffect(()=>{m.current&&m.current.scrollIntoView()},[m.current]),jsxRuntimeExports.jsx(FoafLayout,{isNavShown:!0,onMoveForward:I,isForwardAllowed:i?.bucketivity.isSkippable,children:jsxRuntimeExports.jsxs("div",{className:"foaf-ready__container",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:o}),jsxRuntimeExports.jsxs("p",{className:"paragraph__bold",children:[jsxRuntimeExports.jsx("b",{children:"Topic:"})," ",d]}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:u}),jsxRuntimeExports.jsxs("div",{children:[!g&&!E&&jsxRuntimeExports.jsx(Button$2,{id:"play-btn",stretch:!0,onClick:S,children:"Play Facts of a Feather"}),!g&&E&&jsxRuntimeExports.jsx(Button$2,{id:"resume-btn",stretch:!0,onClick:T,children:"Resume Facts of a Feather"}),g&&jsxRuntimeExports.jsx(Button$2,{id:"play-again-btn",stretch:!0,width:"150px",onClick:C,children:"Play Again"})]}),jsxRuntimeExports.jsx("div",{className:"hidden-section",ref:m})]})})},FoafResults=()=>{useComponentLog("FoafResults");const{aceRootScope:t}=window,{ui:e}=store.getState(),{urlParams:n}=e,s=useDispatch(),[i,a]=reactExports.useState(null),[o,l]=reactExports.useState(!1),[u,c]=reactExports.useState(""),[d,p]=reactExports.useState({message:"",percentage:0,title:""});useIdleLogoutTimer();const m=lodashExports.get(i,"bucketivity.isSkippable",!1),g=async()=>{t.numFoafAttempts+=1,forgetBucket();try{const S=await initFoaf({progressId:window.aceRootScope.progressCurrent._id,bucketivityId:n.bucketivityId});memorizeBucket(S),s({type:REDIRECT_TO_URL,payload:{url:"foaf.categorize",params:{...n,bucketivityProgressId:S.bucketivityProgress._id}}})}catch(S){console.error(S)}},E=()=>recallBucket().bucketivityProgress.categoryList.flatMap(T=>T.remainingDescriptors).length===0,x=()=>{const S=recallBucket();return lodashExports.get(S,"bucketivityProgress.is.complete",!1)},b=async()=>{let S=await getFoaf({progressId:n.progressId,bucketivityProgressId:n.bucketivityProgressId,bucketivityId:n.bucketivityId});(!!!lodashExports.get(S,"bucketivityProgress")||!1)&&(S=await initFoaf({progressId:n.progressId,bucketivityId:n.bucketivityId})),memorizeBucket(S),a(S)};return reactExports.useEffect(()=>{b().catch(S=>{console.error("Error fetching FOAF data",S)})},[]),reactExports.useEffect(()=>{const S=lodashExports.get(i,"bucketivityProgress.score",{message:"",percentage:0,title:""}),C=lodashExports.get(i,"bucketivityProgress.score.percentage",0)>=lodashExports.get(i,"bucketivityProgress.passThresholdPercentage",0);l(C),c(C?"Great job!":"Good Try!"),p(S);const T=JSON.stringify({type:"foaf",score:C?"pass":"fail"});s(genericAnalyticsAndIterableEvent("Component Shown",{to:"interactivity.graded",additional_info:T})),forgetBucket(),x()&&(E()?s({type:REDIRECT_TO_URL,payload:{url:"foaf.results",payload:{...n}}}):s({type:REDIRECT_TO_URL,payload:{url:"foaf.categorize",payload:{...n}}}))},[i]),useHotkeys([{combo:"arrowright",description:"Advance",callback:()=>""},{combo:"shift+arrowright",description:"Advance",callback:()=>""}]),jsxRuntimeExports.jsx(FoafLayout,{isNavShown:!0,isForwardAllowed:m,forwardButtonText:m?"Continue With Course":"",children:jsxRuntimeExports.jsxs("div",{className:"foaf-result__container",children:[jsxRuntimeExports.jsx("h1",{"data-test":"foafResultText",className:`headings__h1 ${o?"success text--passed":"error"}`,children:d.title?d.title:u}),jsxRuntimeExports.jsx("p",{className:"paragraph__bold",children:d.message}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Button$2,{variant:"ghost",stretch:!0,width:"150px",id:"results-play-btn",onClick:()=>g(),children:"Play Again"})})]})})},FoafRoutes=[{path:"foaf",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"ready/:bucketivityId/:nodeId/:pageId/:idxPointer",element:jsxRuntimeExports.jsx(FoafReady,{})},{path:"categorize/:bucketivityId/:nodeId/:bucketivityProgressId/:pageId/:idxPointer",element:jsxRuntimeExports.jsx(FoafCategorize,{})},{path:"results/:bucketivityId/:nodeId/:bucketivityProgressId/:pageId/:idxPointer",element:jsxRuntimeExports.jsx(FoafResults,{})}]}],ManagerChecklistRow=({row:t,index:e,onClick:n})=>{const[s,i]=reactExports.useState(!1),a=o=>o.isLoading?"fa-circle-o-notch fa-spin":o.isActive?"fa-check":"fa-close";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("li",{className:"manager__item row",children:jsxRuntimeExports.jsx("div",{className:"col-sm-12",children:jsxRuntimeExports.jsxs("div",{role:"presentation",className:"row flex flex-nowrap",onClick:()=>{i(!s)},children:[jsxRuntimeExports.jsx("div",{className:"col-sm-8 col-xs-8 flex-shrink flex-nogrow manager__title",children:t.section||`L${e+1} - Loading`}),jsxRuntimeExports.jsxs("div",{className:"col-sm-2 col-xs-3 flex-shrink flex-nogrow text-right","data-test":"manager-sub-item",children:[t.completeCount||0," / ",t.checkList.length||0]}),jsxRuntimeExports.jsx("div",{className:"col-sm-2 col-xs-1 flex-shrink flex-nogrow text-right",style:{width:"1%"},children:jsxRuntimeExports.jsx("span",{style:{width:"1%"},children:jsxRuntimeExports.jsx("i",{"data-test":"managerExpandIcon",className:classNames("fa",{"fa-caret-up":s,"fa-caret-down":!s}),"aria-label":"expand-toggle"})})})]})})}),s?jsxRuntimeExports.jsx("li",{className:"manager__subitems row",children:jsxRuntimeExports.jsx("div",{className:"col-xs-12",children:t.checkList.map(o=>jsxRuntimeExports.jsxs("div",{role:"presentation",className:"manager__action row",onClick:()=>n(o),children:[jsxRuntimeExports.jsxs("div",{className:"col-xs-10",children:[jsxRuntimeExports.jsx("h6",{children:o.title}),jsxRuntimeExports.jsx("div",{children:o.detail})]}),jsxRuntimeExports.jsx("div",{className:"col-xs-2 text-right",children:jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx("i",{className:classNames("fa",a(o)),"aria-label":"icon"})})})]},o._id))})}):null]})},ManagerChecklist=t=>{const{checkList:e,handleToggleRow:n}=t;return e.length?jsxRuntimeExports.jsx("ul",{className:classNames("manager__items border-top",{"locked pulse":!e[0].section}),children:e.map((s,i)=>jsxRuntimeExports.jsx(ManagerChecklistRow,{onClick:n,row:s,index:i},s.section))}):jsxRuntimeExports.jsx("h1",{children:"No list available at this moment"})},Manager=()=>{const{progressCurrent:t,studentCurrent:e}=window.aceRootScope,[n,s]=reactExports.useState([]),i=t.accountType==="parent",a=()=>{progressCheckGetList(t?._id,e?._id).then(l=>{const u=l;lodashExports.each(u,c=>{c.section=(c.section||"").replace(/^Level /,"L")}),s(u),clearLoading()})};reactExports.useEffect(()=>{initLoading()&&a()},[]);const o=async(l,u)=>{try{await progressCheckSet(t._id,l._id,!l.isActive,u),a()}catch(c){console.error(c)}};return jsxRuntimeExports.jsxs("div",{className:"grit driving-manager",children:[jsxRuntimeExports.jsx("header",{className:"header row template-blend",children:jsxRuntimeExports.jsxs("div",{className:"col-sm-12 mb4",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Driving Manager"}),i?jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:[jsxRuntimeExports.jsx("span",{children:"This handy checklist will help you and your student plan in-car lessons. This optional tool suggests tasks your student should practice to meet behind-the-wheel requirements and prepare for their driving test."}),jsxRuntimeExports.jsxs("a",{href:"https://d1u7daj727sadp.cloudfront.net/documents/TX.PTDE.drivingManagerChecklist.pdf",target:"_BLANK",rel:"noreferrer",children:["Download ",jsxRuntimeExports.jsx("i",{className:"fa fa-file-pdf-o"})]}),jsxRuntimeExports.jsx("span",{children:"."})]}):null,i?null:jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:[jsxRuntimeExports.jsx("span",{children:"This handy checklist will help you and your parent plan in-car lessons. This optional tool suggests driving tasks you should practice to meet behind-the-wheel requirements and prepare for your driving test."}),jsxRuntimeExports.jsxs("a",{href:"https://d1u7daj727sadp.cloudfront.net/documents/TX.PTDE.drivingManagerChecklist.pdf",target:"_BLANK",rel:"noreferrer",children:["Download ",jsxRuntimeExports.jsx("i",{className:"fa fa-file-pdf-o"})]}),jsxRuntimeExports.jsx("span",{children:"."})]})]})}),jsxRuntimeExports.jsx("div",{className:"row panel",children:jsxRuntimeExports.jsx("div",{className:"col-sm-12",children:n.length?jsxRuntimeExports.jsx(ManagerChecklist,{handleToggleRow:o,checkList:n}):null})})]})},ManagerRoutes=[{path:"manager",element:jsxRuntimeExports.jsx(Manager,{})}],ParentList=({students:t,setStudent:e,unlink:n})=>{const s=useNavigate(),i=useDispatch(),a=()=>{i({type:SHOW_MODAL,payload:{modal:{title:"About Purchasing",message:"Your student has yet to purchase their account. Have them log in on a device from their account to complete payment.",isInformational:!0}}})};return jsxRuntimeExports.jsx("div",{children:t.map((o,l)=>{const u=o.progress?.courseId??o.progress?.course?._id;let c=["SaGHbkDOOG","0gDwo5hrZk"].includes(u??"");return o.progress?.course?.isJourneyOn&&(c=o.progress.course.isJourneyOn),jsxRuntimeExports.jsxs("section",{className:"parent__students","data-test":"parentStudent",children:[jsxRuntimeExports.jsxs("div",{className:"parent__students__info",children:[jsxRuntimeExports.jsxs("div",{className:"student-name",children:[jsxRuntimeExports.jsxs("h3",{className:"headings__h3",children:[o.isPurchased?null:jsxRuntimeExports.jsx("span",{className:"unpaid-alert-icon","data-test":"unpaidIcon",children:jsxRuntimeExports.jsx(IconButton,{onClick:a,iconName:"alert-warning",iconSize:"x-small",color:"primary"})}),`${o.firstName} ${o.lastName||""}`]}),jsxRuntimeExports.jsx("span",{"data-test":"studentName",className:"lists-menus__list-description",children:o.username})]}),jsxRuntimeExports.jsx("div",{className:"student__progress",children:o.isComplete?jsxRuntimeExports.jsxs("strong",{className:"completed__course lists-menus__list-title",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-check-circle"})," Student has completed course"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("strong",{className:"lists-menus__list-title",children:o.progressList[0]?.courseTitle??"Course not started"}),o.progressList[0]&&jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("b",{className:"lists-menus__list-title",children:"Current Status: "}),jsxRuntimeExports.jsx("p",{className:"lists-menus__list-description",children:` Level ${o.currentLevel}, Chapter ${o.currentChapter}`})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"parent__students__actions",children:[jsxRuntimeExports.jsxs("div",{className:"btn-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{id:"checkProgress",onClick:()=>{e(o),i({type:BUTTON_PRESSED,payload:{to:"parent.check_progress"}}),i({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"teacher.log"}}),s(`/teacher/log/${o._id}`)},stretch:!0,width:"9.25rem",linkButton:!0,variant:"ghost",type:"button",disabled:o.isComplete??!o.progressList.length,children:"Check Progress"}),c?jsxRuntimeExports.jsx("div",{}):null,jsxRuntimeExports.jsx(Button$2,{id:"reviewTests",disabled:!o.progressList.length,onClick:()=>{e(o),i({type:BUTTON_PRESSED,payload:{to:"parent.review_tests"}}),i({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"teacher.tests"}}),s(`/teacher/tests/${o._id}`)},stretch:!0,width:"9.25rem",linkButton:!0,type:"button",children:"Review Tests"})]}),jsxRuntimeExports.jsx(Button$2,{id:"unlinkStudent",onClick:()=>{n(l)},linkButton:!0,variant:"text",type:"button",children:"Unlink Student"})]})]},o._id)})})},getStudentList=async t=>(await TeacherObj.studentListGet(t)||[]).map(n=>({...n,nickname:UserObj.getDisplayName(n)})),initialState={course:null,studentList:[],isLoading:!0,user:null},ParentDashboard=()=>{const t=useNavigate(),e=useDispatch(),{aceRootScope:n}=window,{progressCurrent:s}=n||{},[i,a]=reactExports.useState(initialState),{course:o,studentList:l,isLoading:u,user:c}=i,d=C=>{const T=(C.progressList||[]).find(I=>I._id===C.defProgressId)??{course:{key:"UNK",title:"Not Set Yet"}};return{...C,progress:T,currentLevel:(T.currentLevel||0)+1,currentChapter:(T.currentChapter||0)+1}},p=(C,T)=>{const I=[];return C.forEach(D=>{const P=d(D);I.push(P)}),a({...i,studentList:[...l,...I]}),UserObj.setCurrentWithProgress(T),I},m=({username:C})=>C?progressSendPromoEmail(s._id,"PARENT_INVITE",{email:C}).then(()=>e({type:SHOW_MODAL,payload:{modal:{title:"Invite Sent",message:`We have sent an invite ${C} to create an account. As soon as their account is created, try adding the student again.`}}}),T=>e({type:SHOW_MODAL,payload:{type:"requestError",modal:{title:"Oops!",message:T.message}}})):e({type:SHOW_MODAL,payload:{modal:{title:"Wait!",message:"Please provide an Email"}}}),g=async({username:C})=>{if(!C)return e({type:SHOW_MODAL,payload:{modal:{title:"Wait!",message:"Please provide an Email."}}}),!1;try{initLoading();const T=await TeacherObj.studentLink(s._id,C);if(T)return e(genericAnalyticsAndIterableEvent("Student Linked",{student_id:T._id,student_email:T.username})),p([T],c),clearLoading(),!0}catch(T){if(T.code===40405)try{await n.progressSync(),s.creditCount?(e({type:SHOW_MODAL,payload:{modal:{message:`Sorry but we're unable to find an account associated with that email address. Would you like us to send an email on your behalf to invite ${C}`,title:"Cannot Find Student",buttonText:"Invite Student to Join",secondaryButtonText:"No thanks",secondaryDispatch:[{type:HIDE_MODAL}],submitCallback:()=>m({username:C})}}}),clearLoading()):(e({type:SHOW_MODAL,payload:{modal:{message:`We cannot find a student account for "${C}". Would you like to create the account and purchase it? You will be redirected to our account creation page.`,title:"Cannot Find Student",buttonText:"Yes, Create",secondaryButtonText:"No, Try Another Email",submitCallback:()=>{UserObj.signOut()}}}}),clearLoading())}catch(I){console.error(I),clearLoading()}else return e({type:SHOW_MODAL,payload:{type:"requestError",modal:{title:"Oops!",message:T.message}}}),!1}},E=C=>{TeacherObj.setCurrent(C,"student")},x=(C,T)=>(e({type:SET_IS_LOADING}),TeacherObj.studentUnlink(n.progressCurrent._id,C._id).then(()=>{const I=l;I.splice(T,1),a({...i,studentList:I}),e({type:SET_IS_NOT_LOADING})},I=>{e({type:SET_IS_NOT_LOADING}),e({type:SHOW_MODAL,payload:{modal:{message:I.message||"An unknown error occurred",title:"Oops!"}}})})),b=C=>{const T=l[C];return T?(e({type:BUTTON_PRESSED,payload:{to:"parent.unlink_student"}}),e({type:SHOW_MODAL,payload:{modal:{title:"Unlink Student",message:`Are you sure you want to unlink "${T.firstName}"? Their account will not be deleted and you can always link them again later.`,type:"parent.unlink",buttonText:"Yes, Unlink",secondaryDispatch:[{type:HIDE_MODAL}],secondaryButtonText:"No, Cancel",submitCallback:()=>x(T,C)}}})):e({type:SHOW_MODAL,payload:{modal:{title:"Oops!",message:"Please provide a valid Student Email Address."}}})},S=()=>(e({type:BUTTON_PRESSED,payload:{to:"parent.link_student"}}),e({type:SHOW_MODAL,payload:{modal:{type:"parent.link",data:{link:g}}}}));return reactExports.useEffect(()=>{(async()=>{const T=await CourseObj.getCurrent(),I=await UserObj.getCurrent(),D=await getStudentList(s._id);await DashboardObj.get(s._id),a({user:I,course:T,isLoading:!1,studentList:p(D,I)}),e(genericAnalyticsAndIterableEvent("Component Shown",{to:"dash"}))})()},[]),u?jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}):jsxRuntimeExports.jsx("div",{className:"grit screen parent-dashboard dashboard",children:jsxRuntimeExports.jsx("section",{id:"parentToolsDash",className:"dash dash__layout",children:jsxRuntimeExports.jsxs("section",{className:"dash__primary parent-dashboard",id:"dash__primary",children:[jsxRuntimeExports.jsxs("div",{className:"parent-dashboard__description",children:[jsxRuntimeExports.jsx(Button$2,{variant:"text",linkButton:!0,type:"button",iconLeft:"arrow-left-xs",onClick:()=>{e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"courseswitch.view"}}),t("/courseswitch/view")},children:jsxRuntimeExports.jsx("span",{"data-test":"backToCourses",className:" controls button-label",children:"Back to Courses"})}),jsxRuntimeExports.jsx("h1",{id:"parentTitle",className:"hero text-cap headings__h1 parent-dashboard__title",children:"Welcome, Parent!"}),jsxRuntimeExports.jsxs("p",{className:"lists-menus__list-description",children:[jsxRuntimeExports.jsx("span",{children:"Youre officially in the Parent Tools portal, where you can access your students account and track their progress. If you meant to take a Student course for yourself, visit our "}),jsxRuntimeExports.jsxs("a",{href:o?.helpCenterUrl,children:[jsxRuntimeExports.jsx("i",{className:"fa fa-question-circle"})," Quick Help "]}),jsxRuntimeExports.jsx("span",{children:"section to change your account."})]})]}),jsxRuntimeExports.jsx("div",{className:"panel",children:l.length?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ParentList,{unlink:b,setStudent:C=>{E(C)},students:l}),jsxRuntimeExports.jsx(Button$2,{id:"linkStudentsButton",onClick:S,stretch:!0,variant:"text",linkButton:!0,width:"10.125rem",type:"button",iconLeft:"plus",children:"Link Another Student"})]}):jsxRuntimeExports.jsx("div",{className:"content-block justify-center",children:jsxRuntimeExports.jsxs("div",{className:"no-student-added-container",children:[jsxRuntimeExports.jsx("img",{id:"license-student-driver",src:"https://d1u7daj727sadp.cloudfront.net/webassets/illustrations/license-student-driver.svg",alt:"Driver Student License"}),jsxRuntimeExports.jsx("h2",{id:"noStudentsHeading",className:"text-cap headings__h2",children:"No Students Added"}),jsxRuntimeExports.jsx("div",{className:"link-student-btn-wrapper",children:jsxRuntimeExports.jsx(Button$2,{id:"linkStudentsButton",onClick:S,stretch:!0,linkButton:!0,iconLeft:"plus",width:"10.125rem",type:"button",children:"Link Student"})})]})})})]})})})},ParentDashRoutes=[{path:"/dashboard/parent",element:jsxRuntimeExports.jsx(ParentDashboard,{})}],ProctorReset=()=>{const t=useNavigate(),e=useDispatch();return reactExports.useEffect(()=>{ModelAbstract.setCurrent(null,"proctorVerification"),e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),t("/dash/index")},[]),jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0})},PhysicalSteps=({setupUrl:t,progressId:e,modeType:n,pseudoId:s,isOverriden:i})=>{const[a,o]=reactExports.useState(""),[l,u]=reactExports.useState(!1),[c,d]=reactExports.useState(""),[p,m]=reactExports.useState(!1),g=async()=>await progressTestSendProctorEmailAddress(e,n,s,a),E=async()=>{if(u(!1),m(!1),d(""),!validateEmail(a)){u(!0);return}try{(await g()).isSuccess&&m(!0)}catch(b){console.error("Error sending email",b),u(!0),d("Proctor email not found ")}},x=()=>l?"Invalid Email":p?"Instructions sent!":"";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("li",{"data-test":"stepInfo",className:"bullet bullet--circular proctology-step",children:[jsxRuntimeExports.jsx("span",{className:"f5 f5--candidate headings__h3",children:"Schedule an appointment"}),jsxRuntimeExports.jsx("p",{className:"mb2 paragraph__regular ",children:"Choose a proctor and contact them for instructions and to set up an appointment."}),jsxRuntimeExports.jsx("a",{href:t,"data-test":"viewListButton",target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(Button$2,{children:i?"How to find a proctor":"More Info on Proctors"})})]}),jsxRuntimeExports.jsxs("li",{"data-test":"stepInfo",className:"bullet bullet--circular proctology-step",children:[jsxRuntimeExports.jsx("span",{className:"f5 f5--candidate headings__h3",children:"Prepare for the exam"}),jsxRuntimeExports.jsx("p",{className:"mb2 paragraph__regular",children:"Do your thing! Take practice tests, make some flash cards, or go back through and review course material - whatever style of studying works best for you."})]}),jsxRuntimeExports.jsxs("li",{"data-test":"stepInfo",className:"bullet bullet--circular proctology-step",children:[jsxRuntimeExports.jsx("span",{className:"f5 f5--candidate headings__h3",children:"Head to the proctoring location"}),jsxRuntimeExports.jsx("p",{className:"mb2 paragraph__regular",children:`Check the "What you'll need" section to know exactly what to bring with you.`})]}),jsxRuntimeExports.jsxs("li",{"data-test":"stepInfo",className:"bullet bullet--circular proctology-step",children:[jsxRuntimeExports.jsx("span",{className:"f5 f5--candidate headings__h3",children:"Enter the proctor's email address"}),jsxRuntimeExports.jsx("p",{className:"mb4 paragraph__regular ",children:"When you arrive, ask the proctor for their email address. Enter it below and we'll send them instructions to unlock your exam."}),jsxRuntimeExports.jsxs("nav",{className:"proctology__send-pemail-and-button flex",children:[jsxRuntimeExports.jsx("div",{className:"proctology__send-pemail mr2",children:jsxRuntimeExports.jsx("form",{autoComplete:"off",name:"profileForm",noValidate:!0,children:jsxRuntimeExports.jsx(Input,{required:!0,helperText:c||x(),error:l,placeholder:"Proctor's email address",id:"pemail",name:"pemail",onChange:b=>{o(b.target.value)},value:a,"data-test":"email",autocomplete:"email"})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Button$2,{"data-test":"sendInstructionsButton",onClick:()=>E(),children:"Send Instructions"})})]})]})]})},SignInFooter=({examPassword:t,progressId:e,modeType:n,pseudoId:s})=>{const i=useDispatch(),[a,o]=reactExports.useState(""),[l,u]=reactExports.useState(!1),c=()=>{u(!1),a===t&&i({type:REDIRECT_TO_URL,payload:{url:"acetest.ready",params:{progressId:e,pseudoId:s,modeType:n,proctorSuccess:!0}}}),u(!0)};return jsxRuntimeExports.jsxs("footer",{className:"proctology__login-area proctology__login-area--hack moated mt3 py--proctology--kludge",children:[jsxRuntimeExports.jsx("span",{className:"proctors-only-label headings__h2",children:" For proctor use only "}),jsxRuntimeExports.jsx("div",{className:"proctology__unlock-password",children:jsxRuntimeExports.jsx(Input,{required:!0,id:"password",name:"password","data-test":"password",placeholder:"Exam password",helperText:l?"Login Incorrect":"",error:l,onChange:d=>{o(d.target.value)},type:"password",value:a})}),jsxRuntimeExports.jsx("div",{className:"proctology__unlock-button",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"unlockExamButton",onClick:()=>{c()},children:"Unlock Exam"})})]})},TX_PHYSICAL_FINDING_PROCTOR_URL="https://www.aceableagent.com/support/?a=In-Person-Proctoring-FAQs---id--p1V6oZB6SpmK2e9fdUtbRw",ProctorSignin=()=>{const t=useDispatch(),e=useSelector(c=>c.progress.proctor?.type),{ui:n}=store.getState(),{urlParams:s}=n||{},{proctor:i}=s,a=s?.title||"Exam",o=i?.providerDataList?.find(c=>c.type==="PHYSICAL"),l=e==="PHYSICAL"?TX_PHYSICAL_FINDING_PROCTOR_URL:o?.setupUrl??"",u=`This state requires your Final Exam to be supervised. 
  We have partnered with testing centers throughout the state 
  to help you find a location convenient to you.`;return reactExports.useEffect(()=>{s.proctor||t({type:REDIRECT_TO_URL,payload:{url:"acetest.ready",params:{progressId:s?.progressId,pseudoId:s?.pseudoId,modeType:s?.modeType}}})},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Exit",callback:()=>t({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),hideIcon:!1,"data-test":"icon-arrow-prev"}}),jsxRuntimeExports.jsxs("div",{"data-test":"proctorsSection",className:"grit screen proctology background--white moated moated-y",children:[jsxRuntimeExports.jsx("header",{className:"headings__h1",children:jsxRuntimeExports.jsxs("span",{className:"f1 mb4",children:[" ",a," "]})}),jsxRuntimeExports.jsx("section",{className:"paragraph__bold mb4",children:jsxRuntimeExports.jsx("p",{className:"text-bold",children:u})}),jsxRuntimeExports.jsxs("article",{className:"proctology__steps-and-needs",children:[jsxRuntimeExports.jsxs("section",{className:"proctology__steps font-size-small",children:[jsxRuntimeExports.jsx("span",{className:"f3 f3--candidate mb3 headings__h1 ",children:"What you'll do"}),jsxRuntimeExports.jsx("ul",{className:"list--bulleted--circular paragraph__regular ",children:jsxRuntimeExports.jsx(PhysicalSteps,{isOverriden:e==="PHYSICAL",setupUrl:l,modeType:s.modeType,pseudoId:s.pseudoId,progressId:s.progressId})})]}),jsxRuntimeExports.jsx("section",{className:"proctology__needs ace-content",children:jsxRuntimeExports.jsxs("div",{className:"proctology__needs__inner font-size-small",children:[jsxRuntimeExports.jsx("span",{className:"f5 f5--candidate mb3 headings__h3 ",children:"What you'll need"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"A laptop or desktop computer"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"A Government-issued ID (like a driver license or passport)"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"A basic calculator, pencil, and some blank sheets of paper"})]})})]}),jsxRuntimeExports.jsx(SignInFooter,{examPassword:i?.password,modeType:s.modeType,pseudoId:s.pseudoId,progressId:s.progressId})]})]})},proctorUMaterialNeeds=["A government-issued ID (like a driver license or passport).","A plugged in laptop or desktop computer with a webcam (must be on and you must be in front of it for the entire test)."],proctorUMaterialAllowed=["A handheld calculator (not your phone).","Scrap paper and a pencil."],proctorUMaterialNotAllowed=["Phones, headphones, smart watches, or dual monitors.","To leave your seat or talk during the exam."],passwordLocks=[1,2,3,4,5],ProctorUPassword=({examPassword:t,isAppointmentInProgress:e,onContineExam:n})=>{const[s,i]=reactExports.useState(""),a=(o,l)=>o===l;return reactExports.useEffect(()=>{const o=window.navigator.userAgent.includes("Guardian");i(e&&o?t:"")},[t,e]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"password-container",children:[jsxRuntimeExports.jsx("form",{style:{display:"none"},children:jsxRuntimeExports.jsx(Input,{required:!0,label:"Exam Password",id:"proctor-password",name:"password","data-test":"proctorPassword",onChange:o=>{i(o.target.value)},type:"password",value:s,autocomplete:"on"})}),jsxRuntimeExports.jsx("div",{className:"locks",children:passwordLocks.map((o,l)=>jsxRuntimeExports.jsx("div",{className:`lock-icon ${a(t,s)?"success":""} `,children:jsxRuntimeExports.jsx("span",{className:`icon ${a(t,s)?"success":""}`})},l))})]}),jsxRuntimeExports.jsx(Button$2,{"data-test":"proctoredUnlockButton",onClick:o=>{n(o)},disabled:!a(t,s),children:"Continue to Exam"})]})},ReviewPlus=()=>{useComponentLog("ProctorReviewPlus");const t=useLoaderData(),{ui:e}=store.getState(),{urlParams:n}=e,s=useNavigate(),i=window.navigator.userAgent.includes("Guardian"),a=(l,u)=>{l.preventDefault(),store.dispatch({type:OPEN_LINK,payload:{linkObj:{type:"URL",link:u}}})},o=l=>{l.preventDefault();const{progressId:u,modeType:c,pseudoId:d,nodeId:p}=n;if([u,c,d,p].some(g=>g===void 0)){s("/dash/index");return}store.dispatch({type:SET_URL_PARAMS,payload:{params:{progressId:u,modeType:c,pseudoId:d,nodeId:p,from:"TEST",proctorSuccess:"true"}}}),s(`/acetest/ready/${u}/${c}/${d}/${p}/TEST/false`)};return jsxRuntimeExports.jsxs("div",{className:"grit screen review-plus",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Exit Test",callback:()=>store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),hideIcon:!1}}),jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}),children:jsxRuntimeExports.jsx(Await,{resolve:t.progressTestSummary,errorElement:jsxRuntimeExports.jsx("div",{}),children:l=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"title-container",children:[jsxRuntimeExports.jsxs("h1",{"data-test":"proctorUCourse",className:"headings__h1 exam-title",children:[jsxRuntimeExports.jsx("span",{className:"proctor-label",children:"Proctored Exam:"}),l.title]}),jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:["For a full breakdown of the ",jsxRuntimeExports.jsx("span",{className:"paragraph__bold",children:"proctoring process"})," visit our"," ",jsxRuntimeExports.jsx("a",{"data-test":"proctoredHelpLink",target:"__blank",href:l.proctor.providerDataList[0].infoUrl??"https://support.aceableagent.com/hc/en-us/sections/360012167513-Taking-your-Proctored-Exam-with-ProctorU",className:"grit link",children:"Help Center"})]})]}),jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"background",children:[jsxRuntimeExports.jsxs("div",{className:"card-container",children:[jsxRuntimeExports.jsxs("div",{className:"card-text",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Scheduling Exam"}),jsxRuntimeExports.jsxs("div",{className:"paragraphs",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"Schedule your exam on the ProctorU website at least 24 hours in advance."}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"Scheduling within the next 24 hours may result in an extra fee from ProctorU."})]})]}),jsxRuntimeExports.jsx("div",{className:"card-btn-container",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Button$2,{children:"Loading..."}),children:jsxRuntimeExports.jsx(Await,{resolve:t.proctorSsoUrl,children:u=>jsxRuntimeExports.jsx(Button$2,{"data-test":"proctoredScheduleButton",disabled:l.proctor.isAppointmentInProgress||i,variant:l.proctor.appointment.startTime===void 0?"solid":"ghost",onClick:c=>{a(c,u)},children:l.proctor.appointment.startTime===void 0?"Schedule Exam with ProctorU":"Reschedule/Cancel Exam"})})})})]}),jsxRuntimeExports.jsxs("div",{className:"card-container",children:[jsxRuntimeExports.jsxs("div",{className:"card-text",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Connect to Proctor"}),jsxRuntimeExports.jsxs("div",{className:"steps-container",children:[jsxRuntimeExports.jsxs("p",{className:"paragraph__condensed",children:["First, you'll head to the ProctorU website to connect to your proctor from the ",jsxRuntimeExports.jsx("span",{className:"paragraph__condensed-bold",children:"Guardian Browser"})," (which you'll be asked to download if you haven't already)."]}),jsxRuntimeExports.jsxs("p",{className:"paragraph__condensed",children:["When you return you'll be required to log back in and return to the",jsxRuntimeExports.jsx("span",{className:"paragraph__condensed-bold",children:l.title}),"to continue."]})]})]}),jsxRuntimeExports.jsx("div",{className:"card-btn-container",children:l.proctor.isAppointmentInProgress&&i?jsxRuntimeExports.jsx(AnimatedButton,{affirmed:!0,ariaLabel:"Connected to Proctor Button",children:"Connected to Proctor"}):jsxRuntimeExports.jsx(Button$2,{variant:"solid","data-test":"proctoredLaunchButton",onClick:u=>{a(u,l.proctor.setupUrl)},color:"primary",disabled:l.proctor.appointment.startTime===void 0||i,children:"Launch ProctorU"})})]}),jsxRuntimeExports.jsxs("div",{className:"card-container",children:[jsxRuntimeExports.jsxs("div",{className:"card-text",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Unlock Exam"}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"Once you're connected to your proctor and have finished your setup and pre-test checks, the proctor will unlock your exam so you may continue."})]}),jsxRuntimeExports.jsx("div",{className:"card-btn-container",children:jsxRuntimeExports.jsx(ProctorUPassword,{isAppointmentInProgress:l.proctor.isAppointmentInProgress,examPassword:l.proctor.providerDataList[0].password,onContineExam:o})})]})]}),jsxRuntimeExports.jsxs("div",{className:"side-bar",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Preparing for the Exam"}),jsxRuntimeExports.jsxs("div",{className:"need-list",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:"You'll need"}),jsxRuntimeExports.jsx("ol",{className:"paragraph__condensed",children:proctorUMaterialNeeds.map((u,c)=>jsxRuntimeExports.jsx("li",{children:u},c))})]}),jsxRuntimeExports.jsxs("div",{className:"allowed-list",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:"You're allowed"}),jsxRuntimeExports.jsx("ol",{className:"paragraph__condensed",children:proctorUMaterialAllowed.map((u,c)=>jsxRuntimeExports.jsx("li",{children:u},c))})]}),jsxRuntimeExports.jsxs("div",{className:"not-allowed-list",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:"You're not allowed"}),jsxRuntimeExports.jsx("ol",{className:"paragraph__condensed",children:proctorUMaterialNotAllowed.map((u,c)=>jsxRuntimeExports.jsx("li",{children:u},c))})]})]})]})]})})})]})},ProctorRoutes=[{path:"proctor",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"review-plus",loader:()=>{const{ui:t}=store.getState();if(["progressId","modeType","pseudoId","from"].some(a=>t.urlParams[a]===void 0))return redirect("/dash/index");const s=progressTestProctorEnrollStudent(t.urlParams.progressId,"","REVIEW_PLUS",!1),i=progressTestGetSummary(t.urlParams.progressId,t.urlParams.modeType,t.urlParams.pseudoId,t.urlParams.from);return{proctorSsoUrl:s,progressTestSummary:i}},element:jsxRuntimeExports.jsx(ReviewPlus,{})},{path:"reset/:progressId/:modeType/:pseudoId",element:jsxRuntimeExports.jsx(ProctorReset,{})},{path:"signin/:progressId/:modeType/:pseudoId",element:jsxRuntimeExports.jsx(ProctorSignin,{})}]}],VerifyPassword=()=>{const t=useNavigate(),e=useDispatch(),n=useSelector(selectUserId),[s,i]=reactExports.useState(""),[a,o]=reactExports.useState(""),l=c=>{a&&o(""),i(c)},u=c=>{c.preventDefault(),userVerifyPassword(n,s).then(()=>{e({type:SET_PASSWORD_IS_VERIFIED}),e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"profiler.formal-standard"}}),t("/profiler/page-like/SIDEBAR/standard/PROFILE__STUDENT_INFO/VARID_SIDEBAR"),e({type:SET_IS_NOT_LOADING})}).catch(d=>{e({type:SET_PASSWORD_IS_NOT_VERIFIED}),e({type:SET_IS_NOT_LOADING}),o(d.message)})};return jsxRuntimeExports.jsxs("div",{className:"grit screen verify-password",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Exit",callback:()=>e({type:GO_BACK}),hideIcon:!0}}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Enter your password"}),jsxRuntimeExports.jsxs("form",{onSubmit:u,children:[jsxRuntimeExports.jsx(Input,{id:"password",name:"password",type:"password",label:"Password","data-test":"verifyPasswordInput",error:!!a,helperText:a,onChange:c=>{l(c.target.value)},value:s}),jsxRuntimeExports.jsx(Button$2,{type:"submit",disabled:!s||!!a,children:"Submit Password"})]})]})]})};function prepDataForAPI(t={}){const e=lodashExports.cloneDeep(t);return lodashExports.get(e,"groups",[]).forEach(n=>{lodashExports.get(n,"fields",[]).forEach(s=>{s.inputType==="SELECT"&&s.optionMap&&!Number.isNaN(Number(s.value))&&(s.value=s.optionMap.find(i=>i.key===s.value))})}),e}function slimify(t){const e=[];return lodashExports.cloneDeep(t).groups.forEach(n=>{if(n.isSentToApi!==!1){let s;s=n.fields||[];const i=s.map(o=>{let l=lodashExports.isUndefined(o.value)?void 0:o.value;return o.optionMap&&o.value&&o.value.key&&(l=o.value.key),o.optional&&o.key==="STIN_LICENSE_KEY"&&o.value===""&&(l=void 0),{[o.type]:l}});e.push(...i),s=n.contracts||[];const a=s.map(o=>{const l=e.find(u=>u[o.type]);return l?(l[o.type].push(o),null):{[o.type]:[o]}}).filter(Boolean);e.push(...a)}}),e}function fromWhenceYouCame(){const{aceRootScope:t}=window||{},e=recallBookmark();if(e){forgetBookmark(),clear("profilerFrom"),window.location.href=e.url;return}t?.progressCurrent?.isComplete?store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}):t?.resumeCourse(),clear("profilerFrom")}function toWhereTheGrassIsGreener(t=""){const{aceRootScope:e}=window||{};e?.progressCurrent?.isComplete||!e?.progressCurrent?.isPurchased||t==="SIDEBAR"?store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}):e?.resumeCourse(),clear("profilerFrom")}function blockersMatch(t,e="",n=null){const s=t.type===e.replace("__",".");let i=!0;return n&&(i=t._id===n),s&&i}const saveProfileData=(t,e)=>{const n=slimify(prepDataForAPI(e)),{aceRootScope:s}=window||{},i=s?.progressCurrent,a=Object.assign(...n);return saveProfilerData(i._id,a).then(o=>o,o=>{if(o&&String(o).includes("BIOSIG"))throw new Error(o);return!1})},next=({fromStateId:t,direction:e,blockerId:n,toStateId:s=void 0,callingFromPosition:i})=>getBlockersNoFX(window.aceRootScope?.progressCurrent?._id,i).then(a=>{const o=a.blockingActionList;let l=lodashExports.head(o),u=0;if(s){const d=s.replace("__",".");u=o.findIndex(p=>blockersMatch(p,d,n)),l=o[u]}else if(t&&e){const{ui:d}=store.getState()??{};n||({blockerId:n}=d.urlParams,t=d.urlParams.stateId),u=o?.findIndex(g=>blockersMatch(g,t,n));const p=u+e;if(p<0)return fromWhenceYouCame();if(p>o.length-1)return toWhereTheGrassIsGreener(i);let m=Math.min(p,o.length-1);m=Math.max(0,p),l=o[m]}const c=getRouteByType(l.type);if(c){const{aceRootScope:d}=window||{},p=d.stateIdAngularHack(l.type),{ui:m}=store.getState()??{};store.dispatch({type:REDIRECT_TO_URL,payload:{url:c.clientRoute,params:{stateId:p,blockerId:l._id,layoutStyle:m.urlParams?.layoutStyle,callingFromPosition:m.urlParams?.callingFromPosition}}})}}),prepDataForUI=(t={},e="SELECT")=>{const n=lodashExports.cloneDeep(t);return lodashExports.get(n,"groups",[]).forEach(s=>lodashExports.get(s,"fields",[]).forEach(i=>(i.inputType===e&&i.optionMap&&Number.isNaN(Number(i.value))&&(i.value=i.optionMap.find(a=>a.value===i.value||a.key===i.value)),i))),n},onNavItemSelected=(t,e=1)=>{e===1?next({toStateId:t.type}):e===-1&&next({fromStateId:t.type,blockerId:t._id,direction:-1})},ProfilerService=Object.freeze(Object.defineProperty({__proto__:null,next,onNavItemSelected,prepDataForUI,saveProfileData},Symbol.toStringTag,{value:"Module"})),AceDotNav$1=t=>{const{currentId:e,navItems:n,onGoBack:s,onSelected:i}=t,a=(l,u)=>o(l,u)?i?.(l):!1,o=(l,u)=>{const{isSatisfied:c}=l;if(l._id===e)return!1;if(!c&&u>0&&n[u-1].isSatisfied===!0||c)return!0};return jsxRuntimeExports.jsxs("nav",{className:"adn__wrapper",children:[Array.isArray(n)&&n.length!==0?jsxRuntimeExports.jsx("ul",{className:"adn__dots","data-test":"adnDots",children:n.map((l,u)=>jsxRuntimeExports.jsx("li",{className:classNames("adn__item",{active:e===l._id,complete:l.isSatisfied}),onClick:()=>a(l,u),role:"presentation",children:l.label||"xxxxxxxx"},l._id))}):null,s?jsxRuntimeExports.jsx(Button$2,{linkButton:!0,"data-test":"backButton",variant:"text",onClick:()=>s({type:e},-1),children:"Back"}):null]})},groupByFirstLetter=(t,e)=>{const n=t.reduce((s,i)=>{const a=i[e][0];return s[a]=[...s[a]||[],i],s},{});return n?Object.entries(n).map(([s,i])=>({key:s,value:i})):[]},isShowValidationError=t=>{const e=new RegExp(t.regex??".+");return t.optional?t.value!==""&&!e.test(t.value)&&t.value!==void 0:!e.test(t.value)&&t.value!==void 0},createLink=t=>({iconLinkCall:"tel://",iconLinkEmail:"mailto:",SUPPORT_CALL:"tel://",SUPPORT_EMAIL:"mailto:"}[t.key]??"http://")+t.value,openLink=t=>{window.open(createLink(t),"_blank")},sortDrivingSchools=(t,e)=>t.name<e.name?-1:t.name>e.name?1:0,getErrorsIfAny=t=>lodashExports.get(t,"errorList",[]).reduce((e,n)=>`${e+n}
`,""),isGroupShown=(t,e)=>{if(!t.visibility||lodashExports.isEmpty(t.visibility))return!0;if(t.type==="HIDDEN")return!1;const{visibility:n}=t,s=n.fieldKey,i=n.check,a=n.hasOwnProperty("checkList")?n.checkList:[],{op:o}=n;let l;const u=c=>c.optionMap;return e.groups.forEach(c=>{c!==t&&c.fields.forEach(d=>{if(d.value&&d.key===s){const p=u(d);let m=p?.filter(g=>g.key===i);if(m&&m.length>1)return;if(m&&m.length===0)if(a.length>0)m=p?.filter(g=>a.indexOf(g.key)>-1);else return;if(m)for(const g of m)o==="$eq"&&g.key===lodashExports.get(d.value,"key",d.value)&&(l=!0),o==="$in"&&g.key===lodashExports.get(d.value,"key",d.value)&&(l=!0),o==="$ne"&&g.key!==lodashExports.get(d.value,"key",d.value)&&(l=!0)}})}),l?!0:(t.fields.forEach(c=>{delete c.value}),!1)},weightToCol=t=>t.weight&&Math.round(t.weight/1*12),createCountyPair=t=>{let e=t;const n=/ ?\{(.*?)}/,s=e.match(n);e=e.replace(n,"");const i=s?.[1];return{name:e,courtSynonym:i||"Court"}},getCourtPairPlaceholderCopy=(t,e)=>lodashExports.get(e,`${t.key}.data.county.courtSynonym`)==="Law Enforcement Agency"?"Select Law Enf. Agency (LEA)":"Select Court Name",isBannerShown=t=>{const e=t?.isSatisfied&&t.isBannerOnSatisfied,n=t?.bannerType;return e||n},getThisScreenDataFromAllScreens=(t,e,n)=>{if(!t)return null;const{aceRootScope:s}=window;return(t.screens||t.blockingActionList).filter(i=>{const a=s.stateIdAngularHack(i.type)===e,o=i._id===n;return a&&o})[0]},fakeFill=(t,e)=>{const{aceRootScope:n}=window,s=new Date,i=new Date;i.setFullYear(s.getUTCFullYear()-18),i.setMonth(2),i.setDate(30);const o={BIRTH_DATE:hooks$1.utc(new Date(i)).format("MM/DD/YYYY"),EMAIL_ADDRESS:n.getFakeUsername(),FIRST_NAME:"Ace",HIGH_SCHOOL:"Learning App High",LAST_NAME:"Borders",MIDDLE_INITIAL:"f",PHONE_NUMBER:"555-555-5555",ADDRESS_STATE:{key:"TX",value:"Texas"},ADDRESS_CITY:"Acetown",ADDRESS_POSTAL:"78701",ADDRESS_STREET:"123 Learning St",LICENSE_EXPIRE_DATE:"12/05/2000",LICENSE_KEY:"123456",AFFIDAVIT_NUMBER:"N13443",AGREEMENTS_INLINE_CONTRACT:"12345678",AGREEMENTS_INLINE_PARENT:"Parent Case",PARENT_EMAIL_ADDRESS:"wydawdhd@xgrit.com",GENDER:{key:"Female",value:"Female"},"parentInformation.firstName":"Rocky","parentInformation.lastName":"Borders","parentInformation.ssnLast":"0000","parentInformation.addressStreet":"123 abc street","parentInformation.addressCity":"Fake Austin","parentInformation.birthDate":"12/12/1990","parentInformation.addressState":{key:"TX",value:"Texas"},"parentInformation.addressPostal":"78722",SSN_LAST5:"00000"};t.groups?.forEach((l,u)=>{l.fields.forEach((c,d)=>{const p=c.type.replace(/(STIN_|VRFY_)/g,"");p&&o[p]&&t.groups&&(t.groups[u].fields[d].value=c.value??o[p])})}),e({...t})},verifyIfNeeded=({verificationKey:t,isVerify:e,modeType:n,questionId:s,pseudoId:i})=>{const{aceRootScope:a}=window,{progress:o}=store.getState(),l=o.verificationId,u=`Verification${t}`,c=get$4(u),d=l&&!c&&e,p=n==="COURSETEST"?{modeType:n,questionId:s}:n==="LEVELTEST"?{modeType:n,pseudoId:i,questionId:s}:{};d&&(a.userCurrent?.isDebug?store.dispatch({type:SHOW_MODAL,payload:{modal:{title:"Skip",message:"Do you want to skip verification?",buttonText:"Yes",secondaryDispatch:[{type:HIDE_MODAL}],secondaryButtonText:"No",secondaryCallback:()=>{store.dispatch({type:SET_NEEDS_VERIFICATION,payload:p})}}}}):store.dispatch({type:SET_NEEDS_VERIFICATION,payload:p}))},getScreens=async t=>{const{ui:e,progress:n}=store.getState(),s=t.callingFromPosition||(t.layoutStyle==="standard"?"SIDEBAR":"DASHBOARD"),{isPasswordVerified:i}=e,a=await getBlockersNoFX(n._id,s,i),o=a.blockingActionList.filter(l=>{const u=getRouteByType(l.type);return u&&u.groupName==="profiler"});return o.length||store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index",params:{location:"replace"},options:{reload:!0}}}),{screens:o,errors:a}},DrivingSchoolSelection=({field:t,handleDrivingSchoolSelection:e,drivingSchoolsList:n,data:s})=>jsxRuntimeExports.jsx(Select,{error:!!t.errorMessage,helperText:t.errorMessage?t.errorMessage:t.hint,label:t.label,id:`input__${t.type}`,onChange:e,optional:t.optional,groupedOptions:n,defaultOption:"Select your Driving School",defaultOptionDisabled:!1,value:s||"Select Your Driving School",name:t.type,disabled:!t.enabled,className:"profiler__form-control",required:!0}),DrivingSchool=()=>{useComponentLog("ProfilerDrivingSchool");const t=useDispatch(),e=useParams(),n=reactExports.useRef(null),[s,i]=reactExports.useState(),[a,o]=reactExports.useState(),[l,u]=reactExports.useState(),[c,d]=reactExports.useState(),[p,m]=reactExports.useState(),[g,E]=reactExports.useState(""),[x,b]=reactExports.useState(""),[S,C]=reactExports.useState(""),[T,I]=reactExports.useState(!1),[D,P]=reactExports.useState([]),{onNavItemSelected:O}=ProfilerService,{aceRootScope:B}=window,F=re=>{re.target.name&&s&&(s.groups.map((se,G)=>{const K={...se};return isGroupShown(se,s)?(K.isSentToApi=!0,K.fields.forEach((M,W)=>{if(M.key===re.target.name){const ee=D.find(z=>z._id===re.target.value);ee!=null&&(s.groups[G].fields[W].value=ee)}})):K.isSentToApi=!1,K}),i({...s})),I(!!re.target.value)},H=async re=>{re.preventDefault();try{const se=await saveProfileData(l,s),G=getErrorsIfAny(se);G?d(G):(forgetProfilerProgress(),next({blockerId:e.blockerId,fromStateId:e.stateId,direction:1,callingFromPosition:e.callingFromPosition}))}catch(se){console.error("Error saving profile data",se)}},Q=re=>re?typeof re=="object"&&re!==null?re._id:D.find(G=>G.name===re)?._id??re:"",Z={STATIC_TEXT:"STATIC_TEXT",AUTOCOMPLETE:"AUTOCOMPLETE",ICON_LINK:"ICON_LINK"},ne=async()=>{const{screens:re,errors:se}=await getScreens(e);if(re&&(m(re),memorizeProfilerProgress(re)),!re.length&&!se.length){t({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});return}let G=recallProfilerProgress();G&&(forgetProfilerProgress(),G=recallProfilerProgress());const K=re.filter(z=>{const ae=B.stateIdAngularHack(z.type)===e.stateId,ce=z._id===e.blockerId;return ae&&ce})[0],M=prepDataForUI(K),W=M.type?.split("."),ee=W&&W.length>0?W[1]:"";i(M),u(M),E(M.type??""),b(M._id),C(ee),getDrivingSchools().then(z=>{const ae=z.sort(sortDrivingSchools);P([...ae]);const ce=ae.map(fe=>({key:fe.name,value:fe._id})),he=groupByFirstLetter(ce,"key");o(he)})};return reactExports.useEffect(()=>{ne()},[]),jsxRuntimeExports.jsx("div",{className:"grit screen driving-school",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[g?jsxRuntimeExports.jsx(AceDotNav$1,{currentId:x,navItems:p,onGoBack:O,onSelected:O}):null,jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsxs("form",{ref:n,id:"driving-school-form",autoComplete:"off",name:"profileForm",className:`full-width profiler__type-${S}`,children:[s?.label&&c?jsxRuntimeExports.jsx(Alert,{variant:"error",title:c||"Unknown error occurred."}):null,s?.groups.map(re=>re.type!=="HIDDEN"?jsxRuntimeExports.jsxs("section",{className:`form-group profiler__fieldset profiler-group group--${re.type}`,children:[re.label?jsxRuntimeExports.jsx("legend",{children:re.label}):null,jsxRuntimeExports.jsx("div",{className:`row--group--${re.type}`,children:re.fields.map(se=>jsxRuntimeExports.jsxs("section",{className:`profiler__col api__${se.type} mod--${se.fieldName}`,id:se.type,children:[se?.type===Z.STATIC_TEXT?jsxRuntimeExports.jsx("div",{"data-test":`drivingSchoolProfiler_${se.fieldName}`,className:`text-static text-static--${se.fieldName}`,children:se.value}):null,se.inputType===Z.ICON_LINK?jsxRuntimeExports.jsxs("figure",{role:"presentation",onClick:()=>{openLink(se)},className:`icon-link icon-link--${se.fieldName} ${se.inputType} clickable`,children:[jsxRuntimeExports.jsx("i",{className:`icon icon-link__icon gritIcon  gritIcon--${se.fieldName}`}),jsxRuntimeExports.jsxs("header",{className:"icon-link__link",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:se.label}),jsxRuntimeExports.jsx("a",{className:"icon-link__text headings__h4",href:createLink(se),children:se.value})]})]}):null,se.inputType===Z.AUTOCOMPLETE?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(DrivingSchoolSelection,{field:se,handleDrivingSchoolSelection:F,drivingSchoolsList:a,data:Q(se.value)}),jsxRuntimeExports.jsx("div",{className:"btn__wrapper",children:jsxRuntimeExports.jsx(Button$2,{onClick:G=>H(G),disabled:!T,"data-test":"drivingSchoolContinue",type:"submit",children:s.isSatisfied?"Continue":s.ctaText??"Save"})})]}):null]},se.fieldName||se.type))})]},re.type):null)]})})]})})},ProfilerVerifyBiometric=({field:t,oncompleted:e})=>{const n=reactExports.useRef(new TypingDNA),s=reactExports.useRef(n.current.isMobile()),i=reactExports.useRef([]),a=useDispatch();reactExports.useEffect(()=>{n.current.start()},[]);const[o,l]=reactExports.useState(""),[u,c]=reactExports.useState(0),[d,p]=reactExports.useState(""),[m,g]=reactExports.useState(!1),[E,x]=reactExports.useState(!1);let b=0;const S=P=>{P.preventDefault(),P.stopPropagation()},C=()=>{const P=t.meta.phrase.split("").reduce((O,B,F)=>O+(B!==o[F]?1:0),0);return o.length!==t.meta.phrase.length||P>2||!m},T=(P,O)=>(P&&P!==O&&(b+=1),P&&b<=2?"correctAnswer":""),I=P=>{P.target.value=P.target.value.slice(0,t.meta.phrase.length),l(P.target.value),m||g(!0),d&&p("")},D=P=>{if(P.preventDefault(),P.stopPropagation(),C())return!1;const O=n.current.getTypingPattern({type:2,text:t.meta.phrase,textId:n.current.getTextId(t.meta.phrase)});if(n.current.reset(),O?(i.current=[...i.current,O],c(i.current.length)):p("We need to collect more info, please retype the phrase one more time."),l(""),I({target:{value:""}}),i.current.length>=t.meta.recordCount){x(!0);const B=i.current.join(";"),F=JSON.stringify({typingPattern:B,phrase:o,isMobile:s.current});a({type:SET_IS_SIGNIN_VERIFIED,payload:{isVerified:!0}}),n.current.stop(),e({[t.key]:F},!1)}else g(!1),l("");return!1};return jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{"data-test":"verificationCard",className:"gritDialogScreen__verificationCard gritDialogScreen__verifyBiometric",children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[...Array(t.meta.recordCount)].map((P,O)=>jsxRuntimeExports.jsxs("div",{className:"gritVerificationManager__iconWrapper",children:[jsxRuntimeExports.jsx("span",{className:`icon ${O>=u?"completeDisabled":"completePositive"}`,style:{...getIconStyle("checkmark-line",t.meta.recordCount>3?"small":"large")}}),t.meta.recordCount-1!==O?jsxRuntimeExports.jsx("span",{className:`gritVerificationManager__dashes${t.meta.recordCount>3?"--small":""} ${O+1>=u?"disabled":"positive"}`,children:"-"}):null]},`verifyIcon_${O}`))}),d&&!m?jsxRuntimeExports.jsxs("div",{className:"gritDialogScreen__errorMessage",children:[jsxRuntimeExports.jsx("span",{className:"icon errorIcon",style:{...getIconStyle("error","small")}}),jsxRuntimeExports.jsx("p",{className:"gritDialogScreen__errorText gritParagraphCondensed",children:d})]}):null,E?jsxRuntimeExports.jsx("p",{"data-test":"explanationPhrase",className:"gritDialogScreen__preText paragraph__regular success",children:"Ready to Enroll."}):jsxRuntimeExports.jsxs("form",{className:"biometricDialogForm",onSubmit:D,autoComplete:"off",children:[jsxRuntimeExports.jsx("p",{"data-test":"explanationPhrase",className:"gritDialogScreen__preText paragraph__regular",children:t.hint}),jsxRuntimeExports.jsx("div",{"data-test":"verificationText",className:"gritDialogScreen__hintText",children:t.meta.phrase.split("").map((P,O)=>jsxRuntimeExports.jsx("span",{"data-test":"verificationTextByLetter",className:T(o[O],P),children:P},`bio-char-${O}`))}),jsxRuntimeExports.jsxs("div",{className:"gritDialogScreen__textInputWrapper",children:[jsxRuntimeExports.jsx(Input,{autocomplete:"off","data-test":"phraseInput",id:`profiler-input__${t.key}`,label:t.label,onChange:I,placeholder:t.label,value:o,maxLength:t.meta.phrase.length,disabled:E,onDrop:()=>S,onPaste:()=>S,name:""}),jsxRuntimeExports.jsx(Button$2,{"data-test":"enterPhraseButton",id:"submitPhraseButton",onClick:D,disabled:C(),variant:"ghost",children:t.meta.buttonNext})]})]})]})})},FieldInstruction=({closeCallback:t,imgUrl:e,link:n,text:s,id:i})=>jsxRuntimeExports.jsxs("div",{id:i,className:"grit field-instruction",children:[jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsx("span",{className:"supertitle__supertitle",children:"What's this?"}),jsxRuntimeExports.jsx(IconButton,{iconSize:"small",iconName:"x-line",color:"secondary",onClick:t,"data-test":"closeModal"})]}),jsxRuntimeExports.jsxs("main",{children:[e?jsxRuntimeExports.jsx("img",{src:e,"data-test":"whatsThisImg",alt:"field instruction"}):null,jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:s})]}),jsxRuntimeExports.jsx("footer",{children:n?jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"ptdeProgramGuideHelp",onClick:n.callback,children:n.text}):null})]}),CourtAndCountySelection=({field:t,initters:e,watchChange:n})=>{const[s,i]=reactExports.useState([]),[a,o]=reactExports.useState([]),[l,u]=reactExports.useState("Select Court Name"),[c,d]=reactExports.useState(!!t.value),[p,m]=reactExports.useState(!1),[g,E]=reactExports.useState(!1),[x,b]=reactExports.useState(!1),S=()=>{d(!c)},C=(H,Q)=>H>Q?1:Q>H?-1:0,[T,I]=reactExports.useState(""),[D,P]=reactExports.useState(""),O=H=>{P(H.target.value),n(H)},B=H=>{H.preventDefault(),t.fieldInstruction?.linkUrl&&store.dispatch({type:OPEN_LINK,payload:{linkObj:{link:t.fieldInstruction.linkUrl,type:"URL"}}})},F=async H=>{H.preventDefault(),I(H.target.value);const Q=window.aceRootScope.courseCurrent,Z=await countyCourtGetList(Q.state,H.target.value),ne=Z.map(re=>({key:re.title,value:re.title})).sort((re,se)=>C(re.key,se.key));e[t.key].data.county.courtSynonym==="Law Enforcement Agency"?u("Select Law Enf. Agency (LEA)"):u("Select Court Name"),o(ne),Z.length?m(!0):m(!1),n(H)};return reactExports.useEffect(()=>{if(e&&Object.keys(e).length){const{countyPairs:H}=e[t.key].data,Q=H.map(Z=>({key:Z.name,value:Z.name}));H.length&&i(Q)}},[e]),jsxRuntimeExports.jsx("div",{children:c?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Input,{helperText:"This is the court you selected previously, if you would like to change the selection click on the button below",label:"Selected Court Name",id:`input__${t.type}`,name:"court_name",value:typeof t.value=="string"&&t.value?t.value:"Select Court Name",onChange:()=>null,type:"text",disabled:!0}),jsxRuntimeExports.jsx(Button$2,{linkButton:!0,variant:"text",onClick:S,"data-test":"changeCourtButton",children:"Change Court"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("figure",{className:"profiler__county-court profiler__pick-county",children:jsxRuntimeExports.jsxs("div",{className:"inputElementWrapper",children:[jsxRuntimeExports.jsx(Select,{id:`input__${t.type}`,name:`${t.type}__county`,label:p&&t.label!=="Court Name"?t.label:"Select Court County",onChange:F,value:T||"Select Court Location (County)",error:!!t.errorMessage&&t.value!==void 0,helperText:t.errorMessage?t.errorMessage:t.hint,options:s,defaultOption:t.label,defaultOptionDisabled:!0,optional:t.optional,required:!t.optional,disabled:!t.enabled,link:t.fieldInstruction?.content?{text:"What's this?",callback:()=>{b(!x)}}:void 0}),x?jsxRuntimeExports.jsx(FieldInstruction,{text:t.fieldInstruction.content,imgUrl:t.fieldInstruction.imageUrl,link:{text:t.fieldInstruction.linkText,callback:H=>{B(H)}},id:`${t.key}-field-instruction-card`,closeCallback:()=>{b(!1)}}):null]})}),p?jsxRuntimeExports.jsx("figure",{className:"aceable--animateable profiler__county-court profiler__pick-court",children:jsxRuntimeExports.jsxs("div",{className:"inputElementWrapper",children:[jsxRuntimeExports.jsx(Select,{name:t.type,id:`input__${t.type}__court`,label:getCourtPairPlaceholderCopy(t,e),onChange:O,value:D||"Select Court Location (County)",defaultOption:l,defaultOptionDisabled:!1,options:a,error:!!t.errorMessage&&t.value!==void 0,optional:t.optional,required:!t.optional,disabled:!t.enabled,link:t.fieldInstruction?.content?{text:"What's this?",callback:()=>{E(!g)}}:void 0}),g?jsxRuntimeExports.jsx(FieldInstruction,{text:t.fieldInstruction.content,imgUrl:t.fieldInstruction.imageUrl,link:{text:t.fieldInstruction.linkText,callback:H=>{B(H)}},id:`${t.key}-field-instruction-card`,closeCallback:()=>{E(!1)}}):null]})}):null]})})},FormSelection=({field:t,watchChange:e})=>{const[n,s]=reactExports.useState(t.value?.key||""),i=new RegExp(t.regex||".+"),[a,o]=reactExports.useState(!1),l=t.optionMap?.map(d=>({key:d.value,value:d.key})),u=t.optional?t.value!==""&&!i.test(n)&&t.value!==void 0:!i.test(n)&&t.value!==void 0,c=d=>{d.preventDefault(),t.fieldInstruction?.linkUrl&&window.open(t.fieldInstruction.linkUrl,"_blank")};return reactExports.useEffect(()=>{if(t.value?.key)s(t.value.key);else if(t.value){const d=l?.filter(p=>p.key===t.value);d&&d.length===1&&s(d[0].value)}},[t.value]),jsxRuntimeExports.jsxs("div",{className:"profiler__form--selection",children:[jsxRuntimeExports.jsx(Select,{name:t.type,label:t.label||"",onChange:d=>{s(d.target.value),e(d)},id:`input__${t.type}`,error:u,helperText:t.errorMessage&&u?t.errorMessage:t.hint,value:n,defaultOption:t.label,defaultOptionDisabled:!1,options:l,required:!t.optional,optional:t.optional,disabled:!t.enabled,link:t.fieldInstruction?.content?{text:"What's this?",callback:()=>{o(!a)}}:void 0}),a?jsxRuntimeExports.jsx(FieldInstruction,{text:t.fieldInstruction.content,imgUrl:t.fieldInstruction.imageUrl,link:{text:t.fieldInstruction.linkText,callback:d=>{c(d)}},id:`${t.key}-field-instruction-card`,closeCallback:()=>{o(!1)}}):null]})},Inputs=({field:t,watchChange:e})=>{const[n,s]=reactExports.useState(t.value?t.value:""),[i,a]=reactExports.useState(!!t.value||!1),[o,l]=reactExports.useState(!1),u=new RegExp(t.regex??".+"),c=g=>{a(!i),e(g)},d=t.optional?t.value!==""&&!u.test(n)&&t.value!==void 0:!u.test(n)&&t.value!==void 0;function p(g){return g.startsWith("/")?g.slice(g.indexOf("/")+1,g.lastIndexOf("/")):g}const m=g=>{g.preventDefault(),t.fieldInstruction?.linkUrl&&window.open(t.fieldInstruction.linkUrl,"_blank")};return reactExports.useEffect(()=>{t.value&&s(t.value),t.inputType==="CHECK"&&a(!!t.value)},[t.value]),t.inputType==="CHECK"?jsxRuntimeExports.jsx(Checkbox,{label:t.label??"",checked:i,onChange:g=>{c(g)},id:`input__${t.type}`,required:!t.optional,name:t.type,"data-test":"profiler__checkbox"}):jsxRuntimeExports.jsxs("div",{className:"profiler__form--input",children:[jsxRuntimeExports.jsx(Input,{textarea:t.inputType==="TEXT_AREA",helperText:t.errorMessage&&d?t.errorMessage:t.hint,optional:t.optional,placeholder:t.label,error:d,label:t.fieldName==="contract-inline"?"":t.label,id:`input__${t.inputType==="SMS_VERIFY"?t.inputType:t.type}`,name:t.type,"data-test":t.type,onChange:g=>{s(g.target.value),e(g)},value:n,pattern:t.regex?p(t.regex):"",type:t.inputType==="PASSWORD"?"password":"text",required:!t.optional,disabled:!t.enabled,link:t.fieldInstruction?.content?{text:"What's this?",callback:()=>{l(!o)}}:void 0}),o?jsxRuntimeExports.jsx(FieldInstruction,{text:t.fieldInstruction.content,imgUrl:t.fieldInstruction.imageUrl,link:{text:t.fieldInstruction.linkText,callback:g=>{m(g)}},id:`${t.key}-field-instruction-card`,closeCallback:()=>{l(!1)}}):null]})},FIELD_INPUT_TYPE_ENUM={TEXT:"TEXT",DATE:"DATE",TEXT_AREA:"TEXT_AREA",PASSWORD:"PASSWORD",CHECK:"CHECK",SELECT:"SELECT",IMAGE:"IMAGE",STATIC_TEXT:"STATIC_TEXT",ICON_LIST:"ICON_LIST",ICON_LINK:"ICON_LINK",DOCUMENT_BUTTON:"DOCUMENT_BUTTON",COUNTY_COURT:"COUNTY_COURT",COMPLEX_VERIFY:"COMPLEX_VERIFY",SMS_VERIFY:"SMS_VERIFY"},MainProfilerForm=({screenData:t,errorMessage:e,formType:n,save:s,setScreenData:i,setErrorMessage:a})=>{const o=useDispatch(),l=useSelector(selectCourseState),u=reactExports.useRef(null),[c,d]=reactExports.useState({court:{data:void 0}}),{aceRootScope:p}=window,m=p.courseCurrent??l,[g,E]=reactExports.useState(!u.current?.checkValidity()||!1),[x,b]=reactExports.useState(!0),[S,C]=reactExports.useState(!1),[T,I]=reactExports.useState({}),D=Object.values(T).every(se=>se),P=(se,G)=>{countyGetList(m.state).then(K=>{let M=lodashExports.map(K,createCountyPair);const W={name:"Select Court Location (County)",courtSynonym:void 0,default:!0};M=lodashExports.concat(W,M),d(ee=>({...ee,[G.key]:{data:{countyPairs:M,courtPairs:[],isCountyReady:!0,court:void 0,county:M[0],ticketIssuedCourtSynonym:"what",linkedGroup:se,fieldKey:G.key,countyHint:"This is the county that the address of the court on your ticket is in.",getCourtHint:()=>c[G.key].data.isLosAngeles?"The Law Enforcement Agency can be found on your ticket, or you can match the LEA code on your Courtesy Notice.":"The court name can be found on your ticket."}}}))}).catch(K=>{console.error(K)})},O=(se,G)=>c[G.key]&&!c[G.key].data?(P(se,G),!1):!0,B=se=>{const G=se.inputType===FIELD_INPUT_TYPE_ENUM.PASSWORD,K=se.inputType===FIELD_INPUT_TYPE_ENUM.CHECK&&!se.fieldName,M=(se.inputType===FIELD_INPUT_TYPE_ENUM.TEXT||se.inputType===FIELD_INPUT_TYPE_ENUM.DATE)&&!se.fieldName,W=se.inputType===FIELD_INPUT_TYPE_ENUM.SMS_VERIFY&&!se.fieldName,ee=se.inputType===FIELD_INPUT_TYPE_ENUM.TEXT_AREA&&!se.fieldName,z=se.inputType===FIELD_INPUT_TYPE_ENUM.TEXT&&se.fieldName==="contract-inline";return G||K||M||W||ee||z},F=se=>{t.groups?.forEach(G=>{isGroupShown(G,t)&&G.fields.forEach(K=>{const M=se[K.key];M!=null&&(K.value=M)})}),E(!1)},H=se=>{se.target.name&&t.groups?.forEach((G,K)=>{isGroupShown(G,t)?(G.isSentToApi=!0,G.fields.forEach((M,W)=>{if(M.key===se.target.name&&M.inputType!==FIELD_INPUT_TYPE_ENUM.STATIC_TEXT){const ee=se.target.type==="checkbox"?se.target.checked:se.target.value;ee!=null&&t.groups&&(t.groups[K].fields[W].value=ee)}})):G.isSentToApi=!1}),i({...t}),a("")},Q=se=>{I(G=>({...G,[se]:!0}))};reactExports.useEffect(()=>{u.current&&E(!u.current.checkValidity())},[u.current,t]),reactExports.useEffect(()=>{e&&E(!0)},[e]),reactExports.useEffect(()=>{t&&t.groups?.forEach(se=>{isGroupShown(se,t)&&se.fields.forEach(G=>{const{inputType:K,meta:M,value:W,optional:ee}=G;(K===FIELD_INPUT_TYPE_ENUM.COMPLEX_VERIFY&&(M?.verifyType==="BIOM"||M?.verifyType==="PBIO")&&W===void 0&&!ee||K===FIELD_INPUT_TYPE_ENUM.TEXT&&isShowValidationError(G)||K===FIELD_INPUT_TYPE_ENUM.CHECK&&!W)&&E(!0),M?.verifyType==="BIOSIG"&&b(!1),K==="DOCUMENT_BUTTON"&&M?.isContractPdfsViewed&&(S||C(!0),Object.keys(T).length===0&&I(z=>({...z,[W]:!1})))})})},[t]);const Z=()=>{isHijackable()&&p.isDebug()&&(t&&fakeFill(t,i),E(!1))};useHotkeys([{combo:"shift+!",description:"autoFillPassword",callback:()=>{Z()}}]);const ne=se=>{se.preventDefault(),o({type:REDIRECT_TO_URL,payload:{url:"profiler.verifyPassword"}})},re=()=>{b(se=>!se)};return jsxRuntimeExports.jsxs("form",{ref:u,id:"formal-profiler-form",autoComplete:"off",name:"profileForm","data-test":"editProfileView",className:`profiler__type-${n}`,children:[t.label&&e?jsxRuntimeExports.jsx(Alert,{variant:"error",title:e||"Unknown error occurred."}):null,isBannerShown(t)?jsxRuntimeExports.jsxs("section",{className:"banner",children:[jsxRuntimeExports.jsx(Alert,{variant:"warning",title:t.bannerText||"Completed"}),t.isBannerButtonVisible?jsxRuntimeExports.jsx(Button$2,{onClick:se=>{ne(se)},variant:"text",linkButton:!0,"data-test":"unlockProfileButton",children:t.bannerButtonText}):null]}):null,t.groups?.map((se,G)=>isGroupShown(se,t)?jsxRuntimeExports.jsxs("section",{className:`form-group--profiler  profiler-group group--${se.type} `,children:[se.label?jsxRuntimeExports.jsx("legend",{className:"legend headings__h4",children:se.label}):null,jsxRuntimeExports.jsx("div",{style:{height:se.type==="BIOSIG_VERIFY"&&!x?"var(--fullscreen-height)":""},className:`inputs__row row--group--${se.type}`,children:se.fields.map((K,M)=>jsxRuntimeExports.jsxs("section",{className:`input__wrapper api__${K.type} weighted--${weightToCol(K)} ${K.inputType===FIELD_INPUT_TYPE_ENUM.IMAGE?"image-container":""}`,id:K.key,children:[B(K)?jsxRuntimeExports.jsx(Inputs,{field:K,watchChange:H}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.SELECT?jsxRuntimeExports.jsx(FormSelection,{field:K,watchChange:H}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.IMAGE&&!K.fieldName?jsxRuntimeExports.jsx("div",{className:`field-image-wrapper ${K.hint?"has-help-hint":""} ${K.fieldInstruction?.content?"has-field-instruction":""}`,children:jsxRuntimeExports.jsx("img",{className:"field-image",src:`${K.value}`,alt:`${K.value}`})}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.STATIC_TEXT?jsxRuntimeExports.jsxs("div",{"data-test":"title",className:`icon-list-item icon-list-item--${K.fieldName}`,children:[K.fieldName==="title"&&jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:K.value}),K.fieldName==="subtitleHtml"&&jsxRuntimeExports.jsx("div",{className:"subtitle__html",dangerouslySetInnerHTML:{__html:`${K.value}`}}),K.fieldName!=="title"&&K.fieldName!=="subtitleHtml"&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:K.value})]}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.ICON_LIST?jsxRuntimeExports.jsx("div",{className:`icon-list-item icon-list-item--${K.fieldName}`,children:jsxRuntimeExports.jsxs("div",{className:"flex icon-list-item__wrapper",children:[jsxRuntimeExports.jsx("figure",{className:"icon-list-item__counter"}),jsxRuntimeExports.jsx("p",{className:"icon-list-item__desc",children:K.label})]})}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.ICON_LINK?jsxRuntimeExports.jsxs("figure",{role:"presentation",onClick:()=>{openLink(K)},className:`icon-link icon-link--${K.fieldName} ${K.inputType} clickable`,children:[jsxRuntimeExports.jsx("i",{className:`icon icon-link__icon gritIcon  gritIcon--${K.fieldName}`}),jsxRuntimeExports.jsxs("header",{className:"icon-link__link",children:[jsxRuntimeExports.jsx("h6",{className:"headings__h6",children:K.label}),jsxRuntimeExports.jsx("a",{className:"icon-link__text headings__h4",href:createLink(K),children:K.value})]})]}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.DOCUMENT_BUTTON?jsxRuntimeExports.jsx("div",{className:`document-button document-button--${K.fieldName}`,children:jsxRuntimeExports.jsxs("div",{className:"flex document-button__wrapper",children:[jsxRuntimeExports.jsx("figure",{className:"document-button__counter",children:K.meta?.index}),jsxRuntimeExports.jsx("nav",{className:"document-button__cta",children:jsxRuntimeExports.jsx("a",{className:"ace-btn ace-btn--compact document-button__view",target:"_blank",href:K.meta?.url,rel:"noreferrer",onClick:()=>{S&&Q(K.value)},children:"View"})}),jsxRuntimeExports.jsx("p",{className:"document-button__desc",children:K.label}),S?T[K.value]?jsxRuntimeExports.jsx("span",{style:getIconStyle("checkmark-inverted","small"),className:"icon"}):jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",style:{marginTop:0},children:"(View link to continue)"}):""]})}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.COUNTY_COURT&&O(se,K)?jsxRuntimeExports.jsx(CourtAndCountySelection,{field:K,initters:c,watchChange:H}):null,K.inputType===FIELD_INPUT_TYPE_ENUM.COMPLEX_VERIFY&&(K.meta?.verifyType==="BIOM"||K.meta?.verifyType==="PBIO")?jsxRuntimeExports.jsx(ProfilerVerifyBiometric,{field:K,oncompleted:F}):null,K.meta?.verifyType==="BIOSIG"&&jsxRuntimeExports.jsx(BioSigVerification,{iframeUrlSrc:K.meta.url,updateCTAState:re},K.meta.url)]},`${K.fieldName}__${M}`))})]},se.type+se.label+G.toString()):null),jsxRuntimeExports.jsx("div",{className:"btn__wrapper",id:"profiler-screen-button",children:S?jsxRuntimeExports.jsx(Button$2,{disabled:g||!D,onClick:s,"data-test":"enrollButton",type:"submit",children:t.isSatisfied?"Continue":t.ctaText??"Save"}):x&&jsxRuntimeExports.jsx(Button$2,{disabled:g,onClick:s,"data-test":"enrollButton",type:"submit",children:t.isSatisfied?"Continue":t.ctaText??"Save"})})]})},Formal=()=>{useComponentLog("ProfilerFormal");const t=useParams(),{stateId:e,blockerId:n}=useParams(),s=useDispatch(),[i,a]=reactExports.useState(),[o,l]=reactExports.useState(),[u,c]=reactExports.useState(),[d,p]=reactExports.useState(""),[m,g]=reactExports.useState(""),[E,x]=reactExports.useState(""),{onNavItemSelected:b}=ProfilerService,{aceRootScope:S}=window,C=useSelector(selectUserState),T=async I=>{I.preventDefault();try{const D=await saveProfileData(u,o),P=getErrorsIfAny(D),O=D.modelDeltas?.user;O&&(store.dispatch(updateUser(O)),store.dispatch({type:IDENTIFY_USER,payload:{user:{...C,...O}}})),store.dispatch(genericAnalyticsAndIterableEvent("User Updated",{}));const B=getThisScreenDataFromAllScreens(D,e??t.stateId,n??t.blockerId),F=prepDataForUI(B);P||B?.isSatisfied===!1?(x(P),l(F)):(forgetProfilerProgress(),next({blockerId:n??t.blockerId,fromStateId:e??t.stateId,direction:1,callingFromPosition:t.callingFromPosition}))}catch(D){console.error("Error saving profile data",D),D&&String(D).includes("BIOSIG")&&s({type:SHOW_MODAL,payload:{modal:{message:"We had to log you out.  Please reach out to us if the problem persists.",title:"There's a problem with this course.",buttonText:"I understand",hideCloseIcon:!0,confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"user.signout"}}]}}})}};return reactExports.useEffect(()=>{if((async()=>{const{screens:D,errors:P}=await getScreens(t);if(D&&(a(D),memorizeProfilerProgress(D)),!D.length&&!P.length){store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});return}let O=recallProfilerProgress();O&&(forgetProfilerProgress(),O=recallProfilerProgress());const B=D.filter(H=>{const Q=S.stateIdAngularHack(H.type)===e,Z=H._id===n;return Q&&Z})[0],F=prepDataForUI(B);l(F),c(F),p(F.type??""),g(F.type?.split(".")[1]??"")})(),window.location.pathname.includes("profiler/page-like"))return()=>{store.dispatch({type:SET_PASSWORD_IS_NOT_VERIFIED})}},[n]),jsxRuntimeExports.jsx("div",{className:"grit screen formal-profiler",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[d&&t.layoutStyle!=="standard"?jsxRuntimeExports.jsx(AceDotNav$1,{currentId:n??t.blockerId,navItems:i,onGoBack:b,onSelected:b}):null,jsxRuntimeExports.jsx("main",{children:o?jsxRuntimeExports.jsx(MainProfilerForm,{screenData:o,setScreenData:l,setErrorMessage:x,errorMessage:E,formType:m,save:T}):null})]})})},AceDotNav=t=>{const{currentId:e,navItems:n,onGoBack:s,onSelected:i}=t,a=(l,u)=>o(l,u)?i?.(l):!1,o=(l,u)=>{const{isSatisfied:c}=l;if(l._id===e)return!1;if(!c&&u>0&&n[u-1].isSatisfied===!0||c)return!0};return jsxRuntimeExports.jsxs("nav",{className:"adn__wrapper",children:[n?jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col-md-12",children:jsxRuntimeExports.jsx("ul",{className:"adn__dots","data-test":"adnDots",children:n.map((l,u)=>jsxRuntimeExports.jsx("li",{className:classNames("adn__item",{active:e===l._id,complete:l.isSatisfied}),onClick:()=>a(l,u),role:"presentation",children:l.label||"xxxxxxxx"},l._id))})})}):null,s?jsxRuntimeExports.jsx("div",{className:"row mt2 sm-mt4",children:jsxRuntimeExports.jsx("div",{className:"col-md-12",children:jsxRuntimeExports.jsx(Button$2,{linkButton:!0,"data-test":"backButton",variant:"text",onClick:()=>s({type:e},-1),children:"Back"})})}):null]})},stateIdHack=(t,e="encode")=>e==="encode"?t.replace(/\./g,"__"):t.replace(/__/g,"."),Informational=()=>{useComponentLog("ProfilerInformational");const t=useParams(),[e,n]=reactExports.useState(),[s,i]=reactExports.useState(),[a,o]=reactExports.useState(""),[l,u]=reactExports.useState(""),{stateId:c,callingFromPosition:d}=t,{onNavItemSelected:p}=ProfilerService,m=E=>{c&&next({blockerId:a,fromStateId:c,direction:1,callingFromPosition:d})},g=async()=>{const{screens:E}=await getScreens(t),x=E?.filter(T=>stateIdHack(T.type)===c)[0];n(x);const[b]=E.filter(T=>T.type==="INFORMATION"),[S]=b.groups.filter(T=>T.type==="HIDDEN"),[C]=S.fields.filter(T=>T.type==="PRIVACY_POLICY");u(x.type),o(x._id),i(C)};return reactExports.useEffect(()=>{forgetProfilerProgress(),g()},[]),jsxRuntimeExports.jsx("div",{"data-test":"infoScreen",className:"grit screen info-screen",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[l?jsxRuntimeExports.jsx(AceDotNav,{currentId:a,onGoBack:p}):null,e?jsxRuntimeExports.jsxs("main",{children:[e.groups.map(E=>E.type!=="HIDDEN"?E.fields.map((x,b)=>jsxRuntimeExports.jsx("div",{className:"field",children:x.fieldName==="title"?jsxRuntimeExports.jsx("h1",{className:"headings__h1 api-type__title","data-test":"landingPageTitle",children:x.value}):jsxRuntimeExports.jsx("div",{className:`paragraph__regular api-type__${x.fieldName}`,"data-test":"landingPageTitle",children:x.value})},`${x.key}-${b}`)):null),jsxRuntimeExports.jsx("div",{"data-test":"actionsDiv",className:"actions",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{"data-test":"privacyPolicyPhrase",className:"paragraph__condensed",children:["By saving these changes to your profile, you acknowledge that you have read and understand our Privacy Policy."," "]}),jsxRuntimeExports.jsxs("div",{className:"btn__wrapper",children:[jsxRuntimeExports.jsx(Button$2,{"data-test":"landingPageContinueButton",onClick:()=>{m()},children:"Continue"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"privacyPolicyLink",variant:"text",onClick:()=>window.open(s.value),children:s.label})]})]}):jsxRuntimeExports.jsx("div",{className:"btn__wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"landingPageContinueButton",onClick:()=>{m()},children:"Continue"})})})]}):jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0})]})})},Subscription=()=>{useComponentLog("Subscription");const t=useDispatch(),{id:e}=useParams(),n=useSelector(selectUiIsLoading),s=useSelector(o=>o.subscriptions.find(l=>l._id===e)),i=!s||s.status==="canceled";reactExports.useEffect(()=>{s||t({type:START_GET_SUBSCRIPTIONS}),t(screenView("Manage Subscription"))},[s,t]);const a=()=>n?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):i?jsxRuntimeExports.jsx(Navigate,{to:"/dash/index",replace:!0}):jsxRuntimeExports.jsx(Outlet,{context:s});return jsxRuntimeExports.jsxs("div",{className:"grit screen subscription","data-test":"manageSubscription",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Back",callback:()=>{t({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),navigate("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),a()]})},ManageSubscription=()=>{const t=useDispatch(),e=useSelector(selectUiIsLoading),n=useOutletContext(),s=strToLL(n.currentPeriodEnd),[i]=useExperiment("rsa-messaging-test-red-text-cta-update"),a=()=>{const o=i?"Leaving RSA? You'll Be on Your Own in an Emergency.":"Don't Get StrandedStay Safe with Roadside Assistance",l=i?`<p class="text-subtle"><strong><span class="text-brand-2">If you cancel, your roadside protection will end on ${s}.</span> Don't let a bad day become an expensive one. Stay protected.</strong></p>`:`<p class="text-subtle"><strong>If you cancel, your roadside protection will end on ${s}. Don't let a bad day become an expensive one. Stay protected.</strong></p>`,u=i?"Stay Protected":"Keep My Coverage",c=i?"Cancel My Coverage":"Cancel Anyway";t({type:BUTTON_PRESSED,payload:{to:"rsa.startCancel"}}),t({type:SHOW_MODAL,payload:{modal:{title:o,isMessageCustomHtml:!0,message:`
            <span class="text-subtle" ><strong>A single tow can cost over $100but RSA covers:</strong></span>
            <br />
              <ul class="text-subtle"  style="list-style-type: disc; padding-left: 20px;">
                <li>Flat tires</li>
                <li>Battery issues</li>
                <li>Lockouts</li>
                <li>Towing</li>
                <li>Fuel delivery</li>
              </ul>
            <br />
            <p class="text-subtle" >All for just $5/monthwith no insurance premium hikes. Best of all, your entire family is covered 24/7!</p>
            ${l}
          `,confirmDispatch:[{type:HIDE_MODAL,payload:{}}],primaryButtonLeftIcon:i?"checkmark":void 0,buttonText:u,secondaryDispatch:[{type:CONFIRM_CANCEL_SUBSCRIPTION,payload:{id:n._id}}],secondaryButtonText:c}}})};return jsxRuntimeExports.jsxs("div",{className:"content manage-page",children:[jsxRuntimeExports.jsxs("h1",{className:"title headings__h1",children:["Manage ",n.title]}),jsxRuntimeExports.jsx("section",{"data-test":"firstSubscriptionSection",className:"card",children:jsxRuntimeExports.jsxs("div",{className:"content-wrapper",children:[jsxRuntimeExports.jsx("img",{className:"logo",src:n.headerImageUrl,alt:`${n.title} logo`}),n.logoUrl?jsxRuntimeExports.jsx("div",{className:"logo-wrapper",children:jsxRuntimeExports.jsx("img",{className:"logo",src:n.logoUrl,alt:`${n.title} logo`})}):null,n.expirationMessage?jsxRuntimeExports.jsx("p",{className:"cancelledMessage","data-test":"subscriptionCancelMsg",children:n.expirationMessage?n.expirationMessage:`Your subscription has been cancelled, and you will no longer be billed. You may still use your benefits until ${n.expirationDate}.`}):jsxRuntimeExports.jsxs("div",{className:"subscription-dates",children:[n.enrollmentDate&&jsxRuntimeExports.jsxs("p",{className:"enrollmentDate lists-menus__list-title","data-test":"enrollmentDate",children:[jsxRuntimeExports.jsx("span",{children:"Subscribed On:"}),jsxRuntimeExports.jsx("span",{className:"formattedTime","data-test":"formattedTime",children:strToLL(n.enrollmentDate)})]}),n.currentPeriodEnd&&jsxRuntimeExports.jsxs("p",{className:"firstBillingDate lists-menus__list-title","data-test":"manageSubscriptionfirstBillingDate",children:[jsxRuntimeExports.jsx("span",{children:"Next Billing Date:"}),jsxRuntimeExports.jsx("span",{className:"formattedTime","data-test":"manageSubscriptionformattedTime",children:strToLL(n.currentPeriodEnd)})]})]}),jsxRuntimeExports.jsx("div",{className:"listItems-container","data-test":"subscriptionBenefits",children:n.benefitList.map((o,l)=>jsxRuntimeExports.jsx(SimpleListItem,{iconSize:"small",iconName:getListItemIcon("CHECKMARK"),title:o.title,description:o.description,iconColor:"brand-secondary"},`benefitList-${l}`))}),jsxRuntimeExports.jsxs("div",{className:"cta-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{stretch:!0,"data-test":"billingInfoDesktop",onClick:()=>t({type:OPEN_LINK,payload:{linkObj:{type:"URL",link:n.billingInfoUrl}}}),children:"Update Billing Info"}),jsxRuntimeExports.jsx(Button$2,{variant:"text","data-test":"cancelSubscriptionDesktop",onClick:()=>{a()},disabled:e,children:"Cancel this subscription"})]})]})})]})},AccordionComponentContent=({contentItem:t,contentIndex:e,dynamicString:n})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[typeof t=="string"&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:t.replace("{dynamicString}",n)},e),typeof t!="string"&&t.text&&jsxRuntimeExports.jsxs("p",{className:"paragraph__regular",children:[t.strong&&jsxRuntimeExports.jsx("strong",{children:t.strong}),t.text]},e),typeof t!="string"&&t.list&&jsxRuntimeExports.jsxs("div",{className:"list paragraph__regular",children:[t.strong&&jsxRuntimeExports.jsx("strong",{children:t.strong}),jsxRuntimeExports.jsx("ul",{children:t.list.map((s,i)=>jsxRuntimeExports.jsx("li",{children:s},i))},e)]})]}),AccordionComponent=({contentData:t})=>{const n=useSelector(o=>o.ui).branding.titleShort,[s,i]=reactExports.useState([]),a=o=>{i(l=>l.includes(o)?l.filter(u=>u!==o):[...l,o])};return jsxRuntimeExports.jsx("div",{className:"accordion",children:t?.map((o,l)=>{const u=s.includes(l),c=u?"arrow-up":"arrow-down";return jsxRuntimeExports.jsxs("li",{className:"accordion-item",children:[jsxRuntimeExports.jsxs("div",{className:"accordion-toggle paragraph__regular",onClick:()=>{a(l)},"aria-hidden":"true",children:[o.title&&jsxRuntimeExports.jsx("div",{"data-test":"accordionTitle",className:"accordion-title paragraph__bold",children:o.title}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{className:"icon",style:{...getIconStyle(c,"x-small")}})})]}),u&&jsxRuntimeExports.jsx("div",{"data-test":`contentAccordion${l+1}`,className:"accordion-content",children:o.content.map((d,p)=>jsxRuntimeExports.jsx(AccordionComponentContent,{contentItem:d,contentIndex:p,dynamicString:n},p))})]},l)})})},COVERAGE_CONTENT_DATA=[{title:"Product/Benefits",value:"Road and Tow 10 Mile",isTitleStrong:!0,isValueStrong:!0},{title:"Tow Limit",value:"10 Miles or Up to $100"},{title:"Number of Claims (ERS Limit)",value:"3 Events"},{title:"Vehicles Covered:",isTitleStrong:!0},{title:"Private Vehicles",value:"YES"},{title:"Motorcyles",value:"YES"},{title:"Towed Trailers",value:"YES"},{title:"Recreational Vehicles",value:"YES"},{title:"Commercial",value:"NO"},{title:"Special Equipment",value:"YES"},{title:"Rented or Borrowed Vehicles",value:"YES (up to $100)"},{title:"Emergency Roadside Dispatch Services",isTitleStrong:!0},{title:"Fuel Delivery",value:"Up to 10 Mile w/ 3 gal"},{title:"Lockout Services",value:"YES"},{title:"Battery Service",value:"YES"},{title:"Flat Tire Service",value:"YES"},{title:"Towing",value:"Up to 10 Mile"},{title:"Winching",value:"1 Operator/1Truck"},{title:"Non-Dispatch Services Includes:",isTitleStrong:!0},{title:"Trip Disablement (Breakdown)",value:"NO"},{title:"Trip Interruption (Accident)",value:"NO"},{title:"Legal Defense",value:"NO"},{title:"Tire and Wheel Replacement",value:"NO"},{title:"Theft/Hit & Run Reward",value:"NO"},{title:"Tire Road Hazard",value:"NO"},{title:"Service Reimbursement Maximum",value:"NO"},{title:"Additional Specialized Services:",isTitleStrong:!0},{title:"Hotel/Motel Discount",value:"NO"},{title:"Car Rental Discounts",value:"NO"},{title:"Trip Plans",value:"NO"}],ABOUT_CONTENT_DATA=[{title:"Emergency Roadside Assistance",content:["Emergency roadside assistance is provided by Signature Motor Club, Inc. and In California, services are provided by Signature Motor Club of California, Inc. for our customers.","The following Emergency Roadside Assistance services are available:",{strong:"Vehicle Towing:",text:" Up to 10 Miles in any direction: Any additional expenses incurred beyond the 10-mile limit are the responsibility of the customer, payable directly to the Motor Club, and are not reimbursable."},{strong:"Vehicle Winching:",text:" If a vehicle is stuck in a ditch, mud or snow and is accessible from a normally traveled roadway, dispatch coverage for winching is provided up to a $100 service limit. Any expenses incurred beyond the $100 service limit are the responsibility of the customer, payable directly to the service facility, and are not reimbursable."},{strong:"Fuel Delivery:",text:" A service vehicle will deliver up to 3 gallons of fuel to the customers location, where allowed."},{strong:"Jump Start or Minor Roadside Adjustments to Start Vehicle:",text:" Service is provided to jump start a dead battery or make other minor roadside adjustments to start the vehicle. Expenses for more extensive repairs, parts and labor are the customers responsibility, payable directly to the service facility, and are not reimbursable."},{strong:"Flat Tire:",text:" Service is provided to change a flat tire with your inflated spare. If no spare is available, the vehicle may be towed."},{strong:"Lockout:",text:" Service is provided to gain access if the ignition key is lost or accidentally locked inside the vehicle."},{strong:"Reimbursement up to $100:",text:" If the Motor Club is unable to locate a service facility or provide services in the area, the customer may locate a service provider and be reimbursed up to $100."},`To receive reimbursement, the customer must contact the motor club before securing service then submit the original original receipt along with his/her name and address to: 
Signature Motor Club, 
P.O. Box 660021, 
Dallas, TX 75266-0021. 
Claims must be postmarked within 90 days after the date of the disablement. (No time limit applies to UT and WI residents.)`]},{title:"Eligibility",content:["Roadside Assistance customers who have a disabled vehicle (i.e., car, motorcycle, small truck or RV under 10,000 pounds, gross weight) and are a subscriber to the {dynamicString} Roadside Assistance program are eligible for this offer. Coverage is effective two (2) calendar days after enrollment date. Service Provider en route status not applicable to all service centers."]},{title:"Limitations",content:[`There is a limit of three (3) service calls and/or reimbursement per enrolled vehicle per membership year. 
The purpose of the Roadside Assistance benefit is to provide service in common emergency situations.`,{strong:"Roadside Assistance Coverage Does Not Include:",list:["Service if the member is not with the disabled vehicle. (Please notify the dispatch operator if it is unsafe to do so.)","Towing or service while at an auto repair shop or service station to another location.","Towing or service on roads not regularly maintained (including private property).","Service when a vehicle is snowbound. We do not hoist, winch or shovel vehicles from unplowed areas, snow banks, snowbound driveways or curbside parking.","Service will not be rendered in areas not regularly traveled, such as vacant lots, beaches, open fields or other places that would be hazardous for service vehicles to reach.","Installation or removal of snow tires and chains.","Dismounting, repairing or rotating tires.","Vehicle storage charges, cost of parts and installation, products, materials, impounding and additional labor relating to towing.","Service for taxicabs, tractors, boats, trailers, recreational vehicles and trucks, dune buggies, vehicles used for competition, stolen vehicles, unlicensed vehicles, illegally parked cars or impounded vehicles.","Service to vehicles with expired safety inspection sticker, license plate sticker, and/or emission sticker where required by law.","Service to vehicle that is not in a safe condition to be towed.","Transportation of member to the vehicle for service or from the vehicle to another destination after service has been rendered.","Charging a weak or dead battery.","Delivery or repair of tires.","Towing of vehicle off a boat dock or marina.","Service of any kind on vehicles used for commercial purposes or using dealer tags.","Towing at the direction of a law enforcement officer related to traffic obstruction, impoundment, abandonment, illegal parking or other violations of law.","The cost of making a replacement key and lock repairs are not covered."]}]},{title:"Disclaimer of Liability",content:["The Motor Club will not accept responsibility for repairs or the availability, delivery or installation of parts. All parts used and services provided by the service facility must be authorized and paid for by the customer. Since all Authorized service providers are independent contractors and not agents or employees of the Motor Club, the Motor Club assumes no liability for any damage to the vehicle resulting from the rendering of service or for personal items left in the vehicle. Any claims for personal injury or damage to property must be filed against the servicing facility.","Benefits and dues are subject to change. Services are available in the United States, Canada and Puerto Rico. (Program dues are required). You will not be required to pay any sum in addition to the amount specified in the contract for covered services.","You may cancel at any time and receive a prorated refund of any unused membership dues without deduction. The Motor Club may elect to not renew your membership for any reason by providing written notice 60 days prior to your renewal date. The Motor Club may terminate your membership for fraudulent use of services with a minimum of 30 days written notice.","The limit of service calls and/or reimbursement claims during a one-year period is measured from the date your benefits are activated (48 hours after your initial enrollment) and each anniversary of that date. At the time of service, the Member must be present.",{strong:"California",text:`

Signature Motor Club of California, Inc. 3100 Thornton Avenue, Inc. 3100 Thornton Avenue Burbank, CA 91504`},{strong:"Maryland",text:`
Roadside Assistance 7067 Columbia Gateway Drive Columbia, MD 21046`},{strong:"Mississippi",text:`
Roadside Assistance Suite 100 578 Highland Colony Parkway Ridgeland, MS 39157`},{strong:"Nevada",text:`
Roadside Assistance Suite 300 2360 Corporate Circle Henderson, NV 89074`},{strong:"New Mexico",text:`
Roadside Assistance Suite 200 170 N Roadrunner Parkway Las Cruces, NM 88011 Phone: (575) 532-9930`},{strong:"Oklahoma",text:`
Roadside Assistance Suite 200 3600 NW 138th Oklahoma City, OK 73134`},{strong:"Texas",text:`
Roadside Assistance Suite E5B 8675 Freeport Parkway Irving, TX 75063`},{strong:"Wisconsin",text:`
Roadside Assistance Suite 140 555 South Executive Drive Brookfield, WI 53005`},{strong:"Wyoming",text:`
Roadside Assistance Suite 105 3001 E Pershing Boulevard Cheyenne, WY 82001`},{strong:`Home Office 
All other states: `,text:`
Roadside Assistance 
Suite E2 
2775 Sanders Road 
Northbrook, IL 60062-61277`},"This is a Motor Club contract. This is not an automobile liability insurance contract or physical damage insurance and does not comply with any financial responsibility law. This is not an insurance contract.","Last Updated: 01/2018"]}],FAQ_CONTENT_DATA=[{title:"Geographically, where does my membership cover me?",content:["As a member, you are covered while driving in the United States and Canada."]},{title:"What vehicles are covered under the Signature Motor Club membership?",content:["The Motor Club offers full road and towing services for all self-propelled four-wheel vehicles designed, licensed and used for private, non-commercial, on-road transportation, including trucks and RVs with a carrying capacity of up to one ton (2,000 pounds). The coverage is valid for any eligible vehicle you are driving - leased, owned, rented or borrowed."]},{title:"Are RVs (Recreational Vehicles) covered under my membership?",content:["Yes, the Signature Motor Club offers full road and towing services for RVs with a carrying capacity of up to one ton (2,000 pounds). Recreational vehicles and trucks with more than 4 wheels or a carrying capacity of more than one ton (2,000 pounds) can be provided start-up and fuel delivery service, only."]},{title:"Who does the Signature Motor Club membership cover?",content:["The Auto Club covers any individual, like your spouse, other family members (including domestic partner) with a valid drivers license living in your household that are provided a unique number assigned by the Motor that identifies them as a member and determines eligibility to receive Emergency Roadside Assistance membership."]},{title:"Who are your service providers?",content:["The Signature Motor Club contracts with thousands of authorized, independent towers and service providers throughout the United States and Canada. We continue to contract with new, authorized independent towers and service providers so that our members needs for emergency services are handled quickly and easily."]},{title:"What service providers do you have in my area?",content:["The Signature Motor Club searches from thousands of contracted towers and service providers to efficiently meet your service needs. If we are unable to provide service in your area, we will reimburse you up to the limit stated in the Terms and Conditions."]},{title:"What is the towing coverage under the Signature Motor Club Membership?",content:["As a member, you may choose one of the three (3) towing options listed below. You may be towed:","To an authorized service providers repair facility within the mileage limits of disablement at NO CHARGE based on your membership plan.","To a destination, you select within the mileage limits of the disablement at NO CHARGE based on your membership plan.","Based on your membership plan, a destination other than an authorized service providers facility greater than the mileage limit from the disablement specified in the Terms and Conditions. (Charges for mileage beyond the mileage limit must be paid by you at the time of service and are not reimbursable.)"]},{title:"What are the towing service hours?",content:["Signature Motor Club towing service is available 24 hours a day, every day."]},{title:"What does Emergency Roadside Assistance cover?",content:["Emergency Road and Towing Service covers the following, up to the limits of your membership plan:",{list:["Towing","Lockout service","Battery boost/jump start","Flat tire service (changed, with your inflated spare)","Fuel delivery (you pay only for the cost of the fuel)","Winching/stuck vehicle"]}]},{title:"How do I obtain Emergency Roadside Assistance?",content:["If you are a member, please follow the simple steps listed below.",{list:["Call Emergency Dispatch Service at 1-855-520-3691.","Provide the operator with the following:","Your name and membership number","Area code and telephone number you are calling from","Location of your disabled vehicle (city, state, and street address closest intersection)","Description of disabled vehicle (year, make, model, color)","License plate number of disabled vehicle","Nature of the problem","The operator will keep you on the line while contacting a service provider.","We will give you the service providers name and the estimated time of arrival.","For your protection, be with your car when the service provider arrives unless it is unsafe to do so. Unattended vehicles will not be serviced.","Present the service provider with your membership card and drivers license."]}]}],CoverageContentData=()=>{const e=useSelector(n=>n.ui).branding.titleShort;return jsxRuntimeExports.jsxs("table",{className:"table",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"td-content-left paragraph__bold","data-test":"benefitsbyPartner",children:"Benefits by Partner"}),jsxRuntimeExports.jsx("th",{className:"td-content-right paragraph__bold","data-test":"benefitsbyPartnerTxt",children:e})]})}),jsxRuntimeExports.jsx("tbody",{children:COVERAGE_CONTENT_DATA.map(({title:n,value:s,isTitleStrong:i,isValueStrong:a})=>jsxRuntimeExports.jsxs("tr",{children:[n&&jsxRuntimeExports.jsx("td",{className:`td-content-left ${i?"paragraph__bold":"paragraph__regular"}`,children:n}),s&&jsxRuntimeExports.jsx("td",{className:`td-content-right ${a?"paragraph__bold":"paragraph__regular"}`,children:s})]},n))})]})},Tabs=()=>{useComponentLog("SubscriptionTabs");const[t,e]=reactExports.useState(1),n=(s,i)=>t===s?i:"";return jsxRuntimeExports.jsxs("div",{className:"checklist-content__html-wrapper",children:[jsxRuntimeExports.jsxs("div",{"data-test":"subscriptionTabs",className:"tabs",children:[jsxRuntimeExports.jsx("button",{"aria-label":`About Tab ${n(1,"active")}`,"data-test":"aboutTab",className:`tab ${n(1,"active")}`,onClick:()=>{e(1)},children:"About"}),jsxRuntimeExports.jsx("button",{"aria-label":`Coverage Tab ${n(2,"active")}`,"data-test":"coverageTab",className:`tab ${n(2,"active")}`,onClick:()=>{e(2)},children:"Coverage"}),jsxRuntimeExports.jsx("button",{"aria-label":`FAQs Tab ${n(3,"active")}`,"data-test":"faqsTab",className:`tab ${n(3,"active")}`,onClick:()=>{e(3)},children:"FAQs"})]}),jsxRuntimeExports.jsxs("div",{className:"tab-content",children:[jsxRuntimeExports.jsx("div",{"data-test":"aboutContent",className:`content-box ${n(1,"active")}`,children:jsxRuntimeExports.jsx(AccordionComponent,{contentData:ABOUT_CONTENT_DATA})}),jsxRuntimeExports.jsx("div",{"data-test":"covergeContent",className:`content-box coverage ${n(2,"active")}`,children:jsxRuntimeExports.jsx(CoverageContentData,{})}),jsxRuntimeExports.jsx("div",{"data-test":"faqsContent",className:`content-box ${n(3,"active")}`,children:jsxRuntimeExports.jsx(AccordionComponent,{contentData:FAQ_CONTENT_DATA})})]})]})},ViewSubscription=()=>{const{id:t}=useParams(),e=useNavigate(),n=useDispatch(),s=useOutletContext(),i=s.memberBenefit||"You will need this number when you call for Roadside Assistance.",a=l=>{l.preventDefault(),window.open(`tel:${s.rsaAssistanceNumber}`,"_self"),n({type:BUTTON_PRESSED,payload:{to:"rsa.call"}})},o=()=>{e(`/profiler/manage-subscription/${t}/manage`)};return jsxRuntimeExports.jsxs("div",{className:"content view-page",children:[jsxRuntimeExports.jsx("h1",{className:"title headings__h1",children:s.title}),jsxRuntimeExports.jsx("section",{className:"card",children:jsxRuntimeExports.jsxs("div",{className:"content-wrapper",children:[s.logoUrl?jsxRuntimeExports.jsx("div",{className:"logo-wrapper",children:jsxRuntimeExports.jsx("img",{className:"logo",src:s.logoUrl,alt:`${s.title} logo`,"data-test":"rsaLogo"})}):null,jsxRuntimeExports.jsxs("div",{className:"member-info",children:[jsxRuntimeExports.jsxs("div",{className:"member-id lists-menus__chapter-item-current","data-test":"memberId",children:[jsxRuntimeExports.jsx("span",{children:"Member ID Number:"}),jsxRuntimeExports.jsx("span",{children:s.memberId})]}),jsxRuntimeExports.jsx("div",{className:"member-benefit metadata__condensed",children:jsxRuntimeExports.jsx("span",{children:i})})]}),jsxRuntimeExports.jsxs("div",{className:"subscription-dates",children:[s.enrollmentDate&&jsxRuntimeExports.jsxs("p",{className:"enrollmentDate lists-menus__list-title","data-test":"enrollmentDate",children:[jsxRuntimeExports.jsx("span",{children:"Subscribed On:"}),jsxRuntimeExports.jsx("span",{className:"formattedTime","data-test":"formattedTime",children:strToLL(s.enrollmentDate)})]}),s.currentPeriodEnd&&jsxRuntimeExports.jsxs("p",{className:"firstBillingDate lists-menus__list-title","data-test":"manageSubscriptionfirstBillingDate",children:[jsxRuntimeExports.jsx("span",{children:"Next Billing Date:"}),jsxRuntimeExports.jsx("span",{className:"formattedTime","data-test":"manageSubscriptionformattedTime",children:strToLL(s.currentPeriodEnd)})]})]}),jsxRuntimeExports.jsxs("div",{className:"cta-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{stretch:!0,onClick:a,"data-test":"callRoadsideAssistance",children:"Call for Roadside Assistance"}),jsxRuntimeExports.jsx(Button$2,{variant:"text",onClick:o,"data-test":"manageSubscriptionCTA",children:"Manage My Subscription"})]})]})}),jsxRuntimeExports.jsx("section",{className:"tabContent",children:jsxRuntimeExports.jsx(Tabs,{})})]})},ProfilerRoutes=[{path:"profiler",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"informational/:callingFromPosition/:layoutStyle/:stateId/:blockerId",element:jsxRuntimeExports.jsx(Informational,{})},{path:"formal/:callingFromPosition/:layoutStyle/:stateId/:blockerId",element:jsxRuntimeExports.jsx(Formal,{})},{path:"page-like/:callingFromPosition/:layoutStyle/:stateId/:blockerId",element:jsxRuntimeExports.jsx(Formal,{}),loader:()=>{const{user:t,ui:e}=store.getState(),{driversLicense:n}=t||{},s=n??"",{brand:i}=e;return i==="AARP"&&s.length>=4&&store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"dlNumberVerification",redirectToProfiler:!0,data:{driversLicense:s}}}}),null}},{path:"driving-school/:callingFromPosition/:layoutStyle/:stateId/:blockerId",element:jsxRuntimeExports.jsx(DrivingSchool,{})},{path:"verify-password",element:jsxRuntimeExports.jsx(VerifyPassword,{})},{path:"manage-subscription/:id",element:jsxRuntimeExports.jsx(Subscription,{}),children:[{path:"manage",element:jsxRuntimeExports.jsx(ManageSubscription,{})},{path:"view",element:jsxRuntimeExports.jsx(ViewSubscription,{})}]}]}],Purchase=()=>{useComponentLog("PurchaseScreen");const t=useNavigate(),e=useDispatch(),n=useSelector(selectMilestoneState),s=useSelector(selectPurchaseState),{aceRootScope:i}=window;let a=!1;reactExports.useEffect(()=>{if(!a){e(initPurchaseComponent()),e(updateUser(window.aceUser.getCurrent())),a=!0;const p=new Event("purchase-component-mounted");window.dispatchEvent(p)}},[]);const o=n.milestoneData.productList&&n.milestoneData.productList.length>0,l=(p,m,g)=>{const E={};p?(e(addItemToOrder(n.milestoneData.productList?.[m])),E.type="BUY"):(e(removeItemFromOrder(n.milestoneData.productList?.[m]?._id)),E.type="REMOVED"),E.location=g,E.product_id=get$5(n,`milestoneData.productList[${m}]._id`,""),E.product_name=get$5(n,`milestoneData.productList[${m}].title`,""),E.price=get$5(n,`milestoneData.productList[${m}].price`,0),E.level_idx=get$5(i,"progressCurrent.currentLevel"),e(genericAnalyticsAndIterableEvent("Upsell Clicked",{to:E.type,from:E.location,price:E.price,product_id:E.product_id,level_idx:E.level_idx,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${E.level_idx}._id`)}))},u=p=>s.order.items.filter(m=>m._id===p).length>0,c=p=>{const m=n.milestoneData.productList?.[p]??null;m&&e(onShowUpsell(null,m,"CERT_FLOW"))},d=(p,m,g)=>{if(p){const E=get$5(i,"progressCurrent.currentLevel");e(genericAnalyticsAndIterableEvent("Upsell Clicked",{to:"LEARN_MORE",from:g,price:m.price,product_id:m._id,level_idx:E,level_id:get$5(window,`aceRootScope.courseCurrent.levelList.${E}._id`)}))}};return jsxRuntimeExports.jsx("div",{className:"grit screen purchase-screen",id:"purchase-container",children:jsxRuntimeExports.jsxs("main",{className:"content",children:[jsxRuntimeExports.jsxs("section",{className:"checkout-info",children:[jsxRuntimeExports.jsx("h1",{id:"purchase-page-title",className:"headings__h1 title",children:n.milestoneData.title}),jsxRuntimeExports.jsx("p",{id:"milestone-description",className:"paragraph__regular description",dangerouslySetInnerHTML:{__html:n.milestoneData.description??""}}),o?n.milestoneData.productList?.map((p,m)=>jsxRuntimeExports.jsx("div",{children:p.variantKey===s.displayedProductVariantKey?jsxRuntimeExports.jsx(AddonCard,{buttonLabel:u(p._id)?p.ctaPurchased:p.ctaUnpurchased,description:p.learnMore,headline:p.headline,price:p.price,title:p.title,id:`purchase-product-container-${p._id}`,onClickPurchase:g=>{l(g,m,"CERT_FLOW")},onClickLearnMore:g=>{d(g,p,"CERT_FLOW")},productIndex:m,onProductMount:g=>{c(g)},isUpsellPurchased:p.is.purchased}):""},p._id)):null,jsxRuntimeExports.jsx(Button$2,{onClick:()=>{t("/purchase/payment/cert")},id:"purchase-continue-button",variant:"text",color:"primary",linkButton:!0,children:"Continue"})]}),jsxRuntimeExports.jsx("aside",{children:n.milestoneData.iconUrl&&i.verticalType?jsxRuntimeExports.jsx("img",{id:"purchase-icon",src:`https://d1u7daj727sadp.cloudfront.net/webassets/illustrations/${i.verticalType}.svg`,alt:""}):null})]})})},OrderSummary=({className:t,items:e,onRemoveItem:n,showRemoveLink:s,total:i,id:a})=>{const o=(l,u)=>{l.preventDefault(),n&&n(u)};return jsxRuntimeExports.jsxs("div",{id:a,className:`order-summary ${t}`,children:[jsxRuntimeExports.jsx("ul",{className:"product-list",children:e&&e.length>0?e.map(l=>{const u=Number.isNaN(Number(l.price))?l.price:`$${l.price.toFixed(2)}`;return jsxRuntimeExports.jsxs("li",{className:`${l.type.toLowerCase()} product-list-item`,id:`order-summary-listItem-${l._id}__${t}`,"data-test":"orderSumaryList",children:[jsxRuntimeExports.jsxs("div",{className:"product-list-item-text-info",children:[l.title?jsxRuntimeExports.jsx("h4",{className:"item-title headings__h4",children:l.title}):null,l.description?jsxRuntimeExports.jsx("p",{className:"item-description paragraph__condensed",children:l.description}):null,s&&l.type!=="SHIPPING"?jsxRuntimeExports.jsx(Button$2,{id:`order-summary-listItem-${l._id}-removeLink__${t}`,variant:"text",onClick:c=>{o(c,l._id)},children:"remove"}):null]}),jsxRuntimeExports.jsx("h4",{id:`order-summary-listItem-${l._id}-itemPrice__${t}`,className:"item-price headings__h4",children:u})]},l._id)}):jsxRuntimeExports.jsx("li",{className:"product-list-item",children:jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"No items in cart"})})}),jsxRuntimeExports.jsxs("div",{className:"order-total-section",children:[jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:"Total"}),jsxRuntimeExports.jsx("h3",{className:"headings__h3 total",id:`orderTotal__${t}`,children:Number.isNaN(Number(i))?i:`$${i.toFixed(2)}`})]})]})},PurchaseConfirmation=()=>{useComponentLog("PurchaseConfirmation");const t=useSelector(selectPurchaseOrderItems),e=useSelector(selectPurchaseTotalPrice),n=useSelector(selectPurchaseContinueLinkUrl),s=useSelector(selectUserState),i=useSelector(selectUserDisplayName),a=useSelector(selectMilestoneState),o=useDispatch(),[l]=reactExports.useState(s??ModelAbstract.getCurrent("user")),{transferProgressId:u}=a.milestoneData,c=t.find(m=>m.type==="RENEWAL"),d=m=>{if(m.preventDefault(),o({type:CLEAR_ITEMS_FROM_ORDER}),a&&u){o({type:COURSE_SWITCH_START,payload:{userId:l._id,progressId:u}});return}window.location.href=n},p=m=>{o(removeItemFromOrder(m))};return reactExports.useEffect(()=>{if(c?.type==="RENEWAL"){const m=JSON.stringify({price:c?.price,key:c?.key});o(genericAnalyticsAndIterableEvent("Component Shown",{to:"completeOrder.view",additional_info:m}))}return()=>{o(dismountPurchaseComponent())}},[]),jsxRuntimeExports.jsx("div",{className:"grit screen purchase-confirmation no-padding",id:"purchase-confirmation",children:jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("section",{className:"content",children:[jsxRuntimeExports.jsxs("div",{className:"info",children:[jsxRuntimeExports.jsxs("h1",{className:"headings__h1",id:"purchase-confirmation-heading",children:["Thanks ",i,"!"]}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",id:"purchase-confirmation-body",children:get$5(a,"blockingActionList.length",0)?`We've sent an order confirmation to ${l.username??"your email"}. But we still need some information to complete your order. Please continue to avoid delays in processing.`:`Your order is complete. We've sent an order confirmation to ${l.username??"your email"}.`})]}),jsxRuntimeExports.jsx(OrderSummary,{className:"inline",items:t,total:e,showRemoveLink:!1,onRemoveItem:m=>{p(m)}}),jsxRuntimeExports.jsx("a",{href:n,children:jsxRuntimeExports.jsx(Button$2,{onClick:m=>{d(m)},color:"primary",id:"purchase-confirmation-continue",children:"Continue"})})]}),jsxRuntimeExports.jsx("aside",{children:jsxRuntimeExports.jsx(OrderSummary,{className:"vertical",items:t,total:e,showRemoveLink:!1,onRemoveItem:m=>{p(m)}})})]})})},parseDateToString$1=t=>{const e=hooks$1.utc(t).format("MM/DD/YYYY");return e==="Invalid date"?t:e},DriverRecordInfo=t=>{const{birthDate:e,driversAudit:n,driversAuditVerification:s,driversLicense:i,onChange:a,ssnLast:o}=t,[l,u]=reactExports.useState(e||""),[c,d]=reactExports.useState(o||""),[p,m]=reactExports.useState(i||""),[g,E]=reactExports.useState(n||""),[x,b]=reactExports.useState(s||""),S=4,C=7,T=20,I=()=>x!==""&&x!==g,D=()=>!l.includes("_")&&c.length===S&&p.length>=C&&g.length===T&&x===g,P=O=>{const B=parseDateToString$1(O.target.value);u(B)};return reactExports.useEffect(()=>{a&&a({birthDate:l,ssnLast:c,driversLicense:p,driversAudit:g,formValid:D()})},[l,c,p,g,x]),jsxRuntimeExports.jsxs("div",{className:"driver-record-form container",children:[jsxRuntimeExports.jsx(Input,{id:"driver-record-ssn",name:"driver-record-ssn",value:c,error:c!==""&&c.length<S,helperText:c!==""&&c.length<S?`Should be ${S} characters in length`:"",label:"Last four of social security number",onChange:O=>{d(O.target.value.replace("_",""))},mask:[/\d/,/\d/,/\d/,/\d/]}),jsxRuntimeExports.jsx(Input,{label:"Driver license number",id:"driver-record-license-number",name:"driver-record-license-number",value:p,error:p!==""&&p.length<C,helperText:p!==""&&p.length<C?`Driver license number should be ${C} or 
            ${C+1} characters in length`:"",onChange:O=>{m(O.target.value.replace("_",""))},mask:O=>O.replace("_","").length<=7?[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]:[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]}),jsxRuntimeExports.jsx(Input,{label:"DPS audit number",id:"driver-record-audit-number",name:"driver-record-audit-number",value:g,onChange:O=>{E(O.target.value.replace("_",""))},error:g!==""&&g.length<T,helperText:g!==""&&g.length<T?`The audit number should be ${T} digits in length.`:"",mask:[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]}),jsxRuntimeExports.jsx(Input,{label:"Re-enter DPS audit number",id:"driver-record-audit-number-verification",name:"driver-record-audit-number-verification",value:x,onChange:O=>{b(O.target.value.replace("_",""))},error:I(),helperText:I()?"The DPS Audit numbers don't match":"",disabled:x===""&&g.length!==T,mask:[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]}),jsxRuntimeExports.jsx(Input,{label:"Date of birth",id:"driver-record-dob",name:"driver-record-dob",value:parseDateToString$1(l),onChange:O=>{P(O)},error:l.includes("_"),helperText:l.includes("_")?"Please format date like: MM/DD/YYYY":"",mask:[/\d/,/\d/,"/",/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/]})]})},DriverRecord=()=>{useComponentLog("DriverRecord");const t=useDispatch(),[e,n]=reactExports.useState({birthDate:"",driversAudit:"",driversAuditVerification:"",driversLicense:"",ssnLast:"",formValid:!1}),s=i=>{if(i.preventDefault(),!e.formValid)return;const a={birthDate:e.birthDate,ssnLast:e.ssnLast,driversLicense:e.driversLicense,driversAudit:e.driversAudit};t(submitDriverRecordStart(a))};return jsxRuntimeExports.jsx("div",{className:"grit screen driver-record",children:jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Driver record information"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"We'll need the following information to process your driving record. The DPS audit number can be found on your license."}),jsxRuntimeExports.jsxs("form",{onSubmit:s,id:"driver-record-form",children:[jsxRuntimeExports.jsx(DriverRecordInfo,{onChange:n,birthDate:"",ssnLast:"",driversLicense:"",driversAudit:"",driversAuditVerification:""}),jsxRuntimeExports.jsx(Button$2,{disabled:!e.formValid,children:"Submit"})]})]}),jsxRuntimeExports.jsx("aside",{})]})})},states={0:"State...",AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},statesOptions=Object.entries(states).map(t=>({value:t[0],key:t[1]})),AddressEntry=({address:t,apt:e,city:n,onChange:s,state:i,zip:a})=>{const[o,l]=reactExports.useState(t||""),[u,c]=reactExports.useState(e||""),[d,p]=reactExports.useState(n||""),[m,g]=reactExports.useState(i||""),[E,x]=reactExports.useState(a||"");return reactExports.useEffect(()=>{s({addressStreet:o,addressApt:u,addressCity:d,complete:isAddressComplete(o,d,m,E),addressState:m,addressPostal:E})},[o,u,d,m,E]),jsxRuntimeExports.jsxs("div",{className:"address-entry-container",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",id:"address-entry-heading",children:"Enter your shipping address"}),jsxRuntimeExports.jsxs("div",{id:"address-entry",children:[jsxRuntimeExports.jsx(Input,{label:"Street Address",id:"address-entry-street-address",name:"address-entry-street-address",value:o,onChange:b=>{l(b.target.value)},error:o==="",helperText:o===""?"Street address is required":"",required:!0}),jsxRuntimeExports.jsx(Input,{label:"Apartment, suite, etc.",id:"address-entry-apt",name:"address-entry-apt",value:u,onChange:b=>{c(b.target.value)},optional:!0}),jsxRuntimeExports.jsx(Input,{label:"City",id:"address-entry-city",name:"address-entry-city",value:d,error:d==="",onChange:b=>{p(b.target.value)},helperText:d===""?"Street address is required":"",required:!0}),jsxRuntimeExports.jsx(Select,{"data-test":"addressStateSelect",id:"address-entry-state-select",name:"address-entry-state-select",label:"State",value:m,options:statesOptions,error:m==="0"||!m,onChange:b=>{g(b.target.value)},helperText:m==="0"||!m?"State is required":""}),jsxRuntimeExports.jsx(Input,{label:"Zip code",id:"address-entry-zip",name:"address-entry-zip",value:E,onChange:b=>{x(b.target.value)},error:E===""||!E,helperText:m==="0"||!m?"Zip code is required":"",type:"number",required:!0})]})]})},RadioButton=({children:t,id:e,name:n,labelHtmlFor:s,label:i,checked:a})=>jsxRuntimeExports.jsxs("div",{className:"grit radio-button",children:[jsxRuntimeExports.jsx("input",{checked:a,type:"radio",name:n,id:e}),jsxRuntimeExports.jsx("label",{className:"paragraph__condensed",htmlFor:s,children:t??i})]}),PriceOptionChooser=({className:t,heading:e,id:n,name:s,onChooseOption:i,options:a,value:o})=>jsxRuntimeExports.jsxs("div",{className:`${t} price-option-wrapper`,children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:e}),jsxRuntimeExports.jsx("fieldset",{name:s??"price-chooser",onChange:l=>{i(l.target.id)},id:n,children:a?a.map(l=>jsxRuntimeExports.jsx(RadioButton,{checked:l._id===o,id:l._id,name:l._id,labelHtmlFor:l._id,children:jsxRuntimeExports.jsxs("span",{className:"paragraph__condensed",children:[jsxRuntimeExports.jsx("span",{className:"paragraph__condensed-bold",children:Number.isNaN(Number(l.price))?l.price:`$${l.price.toFixed(2)}`})," ","- ",l.title]})},l._id)):null})]}),getCreditCardFieldsTheme=()=>{const t=api.get("theme")??"light";return{light:{style:{base:{iconColor:"#21333F",color:"#21333F",fontSize:"16px",fontFamily:"Nunito Sans, sans-serif",lineHeight:"22px","::placeholder":{color:"#AFC1C6"}},invalid:{iconColor:"#EC5164",color:"#EC5164"}}},dark:{style:{base:{iconColor:"#FFFFFF",color:"#FFFFFF",fontSize:"16px",fontFamily:"Nunito Sans, sans-serif",lineHeight:"24px","::placeholder":{color:"#6F8D95"}},invalid:{iconColor:"#EC5164",color:"#EC5164"}}},"high-contrast":{style:{base:{iconColor:"#21333F",color:"#21333F",fontSize:"16px",fontFamily:"Nunito Sans, sans-serif","::placeholder":{color:"#294752"}},invalid:{iconColor:"#B9495B",color:"#B9495B"}}}}[t]},styles=getCreditCardFieldsTheme(),CreditCardForm=({onChange:t,requestToken:e,onGetStripeToken:n,onGetStripeTokenError:s,hasError:i,errorMessage:a,isComplete:o})=>{const l=useStripe(),u=useElements(),[c,d]=reactExports.useState(!1),p=()=>{if(u&&l){const m=u.getElement(CardElement);m&&l.createToken(m).then(g=>{const{token:E}=g;E&&n(E)}).catch(g=>{s(g)})}};return reactExports.useEffect(()=>{e&&p()},[e]),jsxRuntimeExports.jsxs("div",{className:"grit credit-card-section",children:[jsxRuntimeExports.jsx("div",{className:`credit-card-input ${o?"success":""} ${c?"focus":""} ${i?"error":""}`,id:"credit-card-wrapper",children:jsxRuntimeExports.jsx(CardElement,{onFocus:()=>{d(!0)},onBlur:()=>{d(!1)},options:styles,onChange:t})}),a?jsxRuntimeExports.jsx("span",{className:"credit-card-error fields__helper-text","data-test":"creditCardError",children:a}):null]})},StripePayment=({apiKey:t,onChange:e,requestToken:n,onGetStripeToken:s,onGetStripeTokenError:i,hasError:a,errorMessage:o,isComplete:l})=>{const[u,c]=reactExports.useState();reactExports.useEffect(()=>{if(!u){const{Stripe:p}=window;p&&c(p(t))}});const d=loadStripe(t);return jsxRuntimeExports.jsx("div",{className:"grit stripe-payment",children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2 mb3",id:"credit-card-title",children:"Payment"}),jsxRuntimeExports.jsx(Elements,{stripe:d,children:jsxRuntimeExports.jsx(CreditCardForm,{onChange:e,requestToken:n,onGetStripeToken:s,onGetStripeTokenError:i,hasError:a,errorMessage:o,isComplete:l})})]}):null})},getBackLink=(t,e=!1,n)=>t==="cert"?e?"purchase":"/purchase":t==="persistent"&&n==="RENEWAL"?e?"renewals":"/renewals":t==="persistent"?e?"addons":"/addons":e?"practicetests":"/resource/practicetests",getContinueLink=(t,e)=>t==="practice-tests"?"/resource/practicetests":t==="persistent"&&!e?"/addons":"/dash/index",PurchasePayment=()=>{useComponentLog("PurchasePayment");const t=useSelector(selectUIState),e=useSelector(selectUserState),n=useSelector(selectPurchaseState),s=useSelector(selectPurchaseSummaryItems),i=useSelector(selectMilestoneState),a=useSelector(selectPurchaseIsShipped),o=useSelector(selectPurchaseTotalPrice),l=useSelector(selectUiIsLoading),u=useDispatch(),c=useNavigate(),{urlParams:d}=t,{flow:p,productType:m}=d,g=o>0,[E,x]=reactExports.useState({complete:!1,addressStreet:e.shippingStreet??"",addressApt:e.shippingApt??"",addressCity:e.shippingCity??"",addressState:e.shippingState??"",addressPostal:e.shippingPostal??""}),b=re=>{u(setCreditCardInfo(re))},S=re=>{u(getStripeTokenSuccess(re))},C=re=>{u(getStripeTokenFailure(re))},T=re=>{u(removeItemFromOrder(re))},I=()=>{let re=!1;return l?!0:g&&(re=!n.order.creditCardInfo.complete,re)||a&&(re=!E.complete,re)?re:n.order.items.length===0&&Object.keys(n.order.shipping).length===0||n.hasAddressVerificationError&&p!=="timely"?!0:re},D=re=>{re.preventDefault(),!I()&&u(submitPaymentForm())},P=re=>{u({type:CLEAR_ITEMS_FROM_ORDER});const se=re==="timely"?"dash.index":getBackLink(re,!0,m);u({type:REDIRECT_TO_URL,payload:{url:se,options:{location:"replace"}}})},O=re=>{g||u(setCreditCardInfo({}));const se=i.milestoneData.deliveryList?.find(G=>G&&G._id===re);u(addShipping(se))},B=re=>{x(re),u(setEnteredAddress(re))},F=()=>typeof n.order.creditCardInfo.error<"u",H=()=>F()?n.order.creditCardInfo.error.message:null,Q=i.milestoneData.productList?.length,Z=i.milestoneData.deliveryList?.length,ne=re=>{u({type:NAVIGATE_STATE_CHANGE,payload:{currentState:getBackLink(re,!0,m)}}),c(getBackLink(re,!1,m))};return reactExports.useEffect(()=>{!n.order.shipping._id&&i.milestoneData.deliveryList?.length&&u(addShipping(i.milestoneData.deliveryList[0])),u({type:SET_IS_NOT_LOADING}),u({type:CLEAR_STRIPE_TOKEN}),u({type:CLEAR_CREDIT_CARD_INFO}),u({type:CLEAR_PAYMENT_ERRORS}),u(setContinueLinkUrl(getContinueLink(p,m)))},[]),jsxRuntimeExports.jsx("div",{className:"grit screen payment-screen no-padding",id:"purchase-payment-container",children:jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("section",{className:"content",children:jsxRuntimeExports.jsxs("form",{onSubmit:D,id:"purchase-form",className:p==="timely"?"padding-top":"",children:[Q&&p==="cert"||p==="persistent"||p==="practice-tests"?jsxRuntimeExports.jsx(Button$2,{onClick:()=>{ne(p)},linkButton:!0,id:"back-to-offers-link",variant:"text",children:"Back"}):null,Z?jsxRuntimeExports.jsx(PriceOptionChooser,{id:"purchase-delivery-options",heading:"Choose your delivery method",options:i.milestoneData.deliveryList,onChooseOption:O,value:n.order.shipping._id,className:Q?"no-top-margin purchase-payment":"purchase-payment"}):null,a?jsxRuntimeExports.jsx(AddressEntry,{onChange:B,address:E.addressStreet,apt:E.addressApt,city:E.addressCity,state:E.addressState,zip:E.addressPostal}):null,g?jsxRuntimeExports.jsx(StripePayment,{apiKey:window.aceConstants.TOKENS.stripe,onChange:b,requestToken:n.requestStripeToken,onGetStripeToken:S,onGetStripeTokenError:C,hasError:F(),errorMessage:H(),isComplete:n.order.creditCardInfo.complete}):null,jsxRuntimeExports.jsx(OrderSummary,{id:"inline-order-summary",className:"inline",items:s,total:o,showRemoveLink:p!=="timely",onRemoveItem:re=>{T(re)}}),jsxRuntimeExports.jsxs("div",{className:"purchase-buttons-wrapper",children:[a?null:jsxRuntimeExports.jsx(Button$2,{variant:"text",color:"secondary",onClick:()=>{P(p)},id:"cancel-purchase-button",children:g?"Cancel order":"Cancel"}),jsxRuntimeExports.jsx(Button$2,{type:"submit",disabled:I(),id:"complete-purchase-button",children:g?"Complete order":"Submit"})]})]})}),jsxRuntimeExports.jsx("aside",{children:jsxRuntimeExports.jsx(OrderSummary,{id:"vertical-order-summary",className:"vertical",items:s,total:o,showRemoveLink:p!=="timely",onRemoveItem:re=>{T(re)}})})]})})},PurchaseRoutes=[{path:"/purchase",element:jsxRuntimeExports.jsx(Purchase,{})},{path:"/purchase/payment",element:jsxRuntimeExports.jsx(PurchasePayment,{})},{path:"/purchase/payment/:flow/:productType?",element:jsxRuntimeExports.jsx(PurchasePayment,{})},{path:"/purchase/confirmation",element:jsxRuntimeExports.jsx(PurchaseConfirmation,{})},{path:"/purchase/driver-record",element:jsxRuntimeExports.jsx(DriverRecord,{})}],getRemoteTestByProgressId=async t=>call(`progress/${t}/remotetest`,"GET",{}),RemotetestContinue=()=>{useComponentLog("RemoteTestContinue");const t=useSelector(l=>l.remotetest),{redirectUrl:e,statusHtmlList:n=[]}=t,[s]=useWindowSize(),i=useDispatch(),a=l=>{l.preventDefault(),window.open(t.redirectUrl,"_blank")},o=l=>(l.preventDefault(),i({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}));return jsxRuntimeExports.jsx("div",{className:"grit screen remotetest-continue",children:e?jsxRuntimeExports.jsxs("div",{className:"container",children:[s<1200?jsxRuntimeExports.jsx(Alert,{variant:"warning",title:"Warning, your screen size is smaller than recommended for this exam. Please enlarge your browser window or switch to a desktop or laptop."}):null,jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx("h1",{"data-test":"examTitle",className:"headings__h1",children:"Continue Your Knowledge Exam"})}),jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("section",{className:"content",children:[jsxRuntimeExports.jsx("p",{"data-test":"examSubtitle",className:"paragraph__regular",children:'Your knowledge exam, hosted by Idemia, is now ready in a newly opened tab named "AutoTest".'}),n.length?jsxRuntimeExports.jsx("p",{"data-test":"examSubtitle",className:"paragraph__regular",children:n.map((l,u)=>jsxRuntimeExports.jsx("li",{dangerouslySetInnerHTML:{__html:l}},u))}):null]}),jsxRuntimeExports.jsxs("nav",{className:"button-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{onClick:l=>{a(l)},variant:"solid","data-test":"continueExam",children:"Continue Knowledge Exam"},"test.continue"),jsxRuntimeExports.jsx(Button$2,{onClick:l=>o(l),variant:"text","data-test":"returnHome",children:"Return Home"},"dash.index")]})]})]}):null})},parseDateToString=t=>{const e=hooks$1.utc(t).format("MM/DD/YYYY");return e==="Invalid date"?t:e},ID_SET_TYPE=[{key:"ssnLast",value:"SSN_LAST_5"},{key:"admissionsNumber",value:"ADMISSIONS_LAST_4"},{key:"alienId",value:"ALIEN_LAST_4"}],RemoteTestContract=()=>{useComponentLog("RemoteTestContract");const t=useSelector(selectRemoteTestUserState),e=useSelector(selectUserState),n=useSelector(selectprogressState),[s,i]=reactExports.useState(e.firstName??""),[a,o]=reactExports.useState(""),[l,u]=reactExports.useState(""),[c,d]=reactExports.useState(""),[p,m]=reactExports.useState(""),[g,E]=reactExports.useState(""),[x,b]=reactExports.useState(""),[S,C]=reactExports.useState(""),[T,I]=reactExports.useState(""),[D,P]=reactExports.useState(!1),[O,B]=reactExports.useState(!1),[F,H]=reactExports.useState(""),[Q,Z]=reactExports.useState(),ne=useNavigate(),re=[{key:"Male",value:"Male"},{key:"Female",value:"Female"}],se=[{key:"SSN",value:"ssnLast"},{key:"Alien ID",value:"alienId"},{key:"Admissions Number",value:"admissionsNumber"}],G=ID_SET_TYPE.find(ae=>ae.key===g),K=(ae,ce)=>{const he=typeof ae=="string"?ae:ae.target.value;switch(E(he),he){case"ssnLast":I("Student Social Security (Last 5 Digits)"),C("Student Social Security (Last 5 Digits)"),Z(/(?!0{5})^\d{5}$/),b(ce??"");break;case"admissionsNumber":I("Admissions Number (000000000 00 or 000000000 X0)"),C("000000000 X0"),Z(/^\d{9} (\w{1}\d{1}|\d{2})$/);break;case"alienId":I("Alien ID (000-000-000)"),C("000-000-000"),Z(/^(?!000-000-000)\d{3}-\d{3}-\d{3}$/);break}},M=ae=>{const ce=parseDateToString(ae.target.value);m(ce)},W=()=>{const ae=g==="ssnLast"?5:4,ce=g==="admissionsNumber"?/\s/g:/\D/g,he=(x||"").replace(ce,"");return he.substring(he.length-ae)},ee=()=>{const ae=[{type:G?.value,key:W()}];store.dispatch(setTemp({type:g,value:x})),UserObj.setProfile(e._id,{firstName:s,lastName:l,middleInitial:a,birthDate:p,gender:c,identificationSet:ae}).then(()=>progressVerifyContract(n._id,O,D,F)).then(ce=>{UserObj.updateProgress(ce),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"remotetest.ready",params:{},options:{reload:!0}}})},ce=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{message:ce.message,title:"Oops!",buttonText:"Continue"}}})})},z=ae=>{ae.preventDefault();const ce=ae.target;if(!ce.checkValidity()||!ce.idTypeNumber.value.match(Q)){if(ce.parentLicense.value==="")store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"Please enter a valid drivers license.",title:"Wait!",buttonText:"Continue"}}});else if(ce.birthDate.disabled||ce.birthDate.value==="")store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"You must be older than 14 1/2 and younger than 18 years old to continue.",title:"Wait!",buttonText:"Continue"}}});else if(ce.idTypeNumber.value===""||!ce.idTypeNumber.value.match(Q)){const Me=()=>{switch(g){case"ssnLast":return"The number you have entered is not a valid Social Security Number. Please enter the last 5 digits of your Social Security Number and try again.";case"admissionsNumber":return"Please enter a valid Admissions Number. (000000000 00 or 000000000 X0)";case"alienId":return"The number you have entered is not a valid Alien ID Number. Please enter your Alien ID Number and try again.";default:return"Please select a valid ID type."}};store.dispatch({type:SHOW_MODAL,payload:{modal:{message:Me(),title:"Wait!",buttonText:"Continue"}}})}else store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"Please fill out all required fields.",title:"Wait!",buttonText:"Continue"}}});return}const he=parseDateToString(p),fe=g==="ssnLast"?T.replace("Student ",""):T,Ce=[{field:"First Name",value:s},{field:"Last Name",value:l},{field:"Birth Date",value:he},{field:fe,value:x}];store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"info.confirmation",data:{info:Ce,content:{title:"Wait!",subtitle:"Before you submit this contract, please review entered student information:",buttonText:"Confirm",secondaryButtonText:"Cancel"}},submitCallback:()=>{ee()}}}})};return reactExports.useEffect(()=>{if(!t)ne("/dash/index");else{o(t.middleInitial),u(t.lastName),d(t.gender),m(parseDateToString(t.birthDate));const ae=t.identificationSet.find(ce=>ID_SET_TYPE.some(he=>he.value===ce.type));if(ae){const ce=ID_SET_TYPE.find(he=>he.value===ae.type);K(ce?.key??"",ae.key??"")}}},[t]),jsxRuntimeExports.jsx("div",{className:"grit screen contractform",children:jsxRuntimeExports.jsxs("div",{className:"contract-container",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Knowledge Exam Contract"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"You're almost ready to take your Knowledge Exam! We just need to learn a little bit about you and your parent."}),jsxRuntimeExports.jsx("hr",{className:"gritPracticeTestItem__divider"}),jsxRuntimeExports.jsxs("form",{autoComplete:"off",name:"profileForm",onSubmit:z,noValidate:!0,className:"formContainer",children:[jsxRuntimeExports.jsx("p",{className:"form-tittle paragraph__regular",children:"Student Information"}),jsxRuntimeExports.jsxs("div",{className:"form-group row",children:[jsxRuntimeExports.jsx("div",{className:"col-sm-5",children:jsxRuntimeExports.jsx(Input,{type:"text",id:"firstName",name:"firstName",placeholder:"First Name",onChange:ae=>{i(ae.target.value)},value:s,required:!0,error:s.length===0||s==="",success:s.length>0||s!==""})}),jsxRuntimeExports.jsx("div",{className:"col-sm-2",children:jsxRuntimeExports.jsx(Input,{type:"text",id:"middleInitial",name:"middleInitial",placeholder:"MI",onChange:ae=>{o(ae.target.value)},value:a,success:a.length>0||a!==""})}),jsxRuntimeExports.jsx("div",{className:"col-sm-5",children:jsxRuntimeExports.jsx(Input,{type:"text",id:"lastName",name:"lastName",placeholder:"Last Name",required:!0,onChange:ae=>{u(ae.target.value)},value:l,error:l.length===0||l==="",success:l.length>0||l!==""})})]}),jsxRuntimeExports.jsxs("div",{className:"form-group row",children:[jsxRuntimeExports.jsx("div",{className:"col-sm-4",children:jsxRuntimeExports.jsx(Select,{defaultOption:"Gender...","data-test":"gender",name:"gender",required:!0,id:"gender",onChange:ae=>{d(ae.target.value)},options:re,value:c,error:c.includes("Gender...")})}),jsxRuntimeExports.jsx("div",{className:"col-sm-8",children:jsxRuntimeExports.jsx(Input,{id:"birthDate",name:"birthDate",value:parseDateToString(p),onChange:ae=>{M(ae)},error:p.includes("_")||p.length===0,placeholder:"Please format date like: MM/DD/YYYY",mask:[/\d/,/\d/,"/",/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/],success:p.length>0||p!==""})})]}),jsxRuntimeExports.jsxs("div",{className:"form-group row",children:[jsxRuntimeExports.jsxs("div",{className:"col-sm-7",children:[jsxRuntimeExports.jsx(Select,{defaultOption:"Please select your ID type...",id:"idType",name:"idType",label:"ID Type",required:!0,onChange:K,options:se,value:g??"",error:g===""}),jsxRuntimeExports.jsx(Input,{type:"text",id:g,name:"idTypeNumber",placeholder:S,label:T,required:!0,onChange:ae=>{b(ae.target.value)},value:x,error:Q?!x.match(Q):x==="",success:Q?!!x.match(Q):!1,mask:Q})]}),jsxRuntimeExports.jsx("div",{className:"col-sm-5",children:jsxRuntimeExports.jsx(Input,{type:"text",id:"parentLicense",name:"parentLicense",placeholder:"Parent Drivers License",required:!0,onChange:ae=>{H(ae.target.value)},value:F,error:F.length===0,success:F.length>0})})]}),jsxRuntimeExports.jsx("hr",{className:"gritPracticeTestItem__divider"}),jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Contract Time"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:'Before you take your Knowledge Exam, you and your parent need to make some promises to the State. As your dear Kindergarten teacher Ms. Johnson said, "Youre only as good as your word".'}),jsxRuntimeExports.jsx("hr",{className:"gritPracticeTestItem__divider"}),jsxRuntimeExports.jsx("p",{className:"form-tittle paragraph__regular",children:'For the "Older One" (Parent)'}),jsxRuntimeExports.jsxs("div",{className:"contract-align contract-content",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Any applicant or parent or guardian giving false statements regarding the applicants examination efforts is committing fraud and subject to license cancellation for a period of one year in accordance with section 322.22 and 322.27(1)(d), Florida Statutes."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Prior to the issuance of any exam, the parent or guardian is required to electronically certify that the applicant will be monitored and not assisted during the on-line exam."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"The parent or guardian is required to provide a valid driver license number at the beginning of the on-line examination."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Prior to the issuance of a learners license, the parent or guardian is required to certify to the Department that the applicant was monitored during the on-line examination and that the parent or guardian was aware of and allowed the applicant to take the examination on-line."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"The State of Florida also requires us to inform you that all students are subject to random selection for re-examination at the Driver License or Tax Collector office prior to the issuance of any license. Failure to pass the random re-exam will require the student to pass the knowledge exam prior to license issuance."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Please note that any student, parent, or guardian giving false statements regarding the students examination efforts is committing fraud and subject to license cancellation for a period of one year in accordance with section 322.22 and 322.27(1)(d) F.S."})]}),jsxRuntimeExports.jsx(Checkbox,{checked:D,id:"isContractParent",onChange:()=>{P(!D)},label:"I, the guardian, have read and agree to the terms stated above.",required:!0}),jsxRuntimeExports.jsx("hr",{className:"gritPracticeTestItem__divider"}),jsxRuntimeExports.jsx("p",{className:"form-tittle paragraph__regular",children:'For the "Younger One" (Student)'}),jsxRuntimeExports.jsxs("div",{className:"contract-align contract-content",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Any applicant or parent or guardian giving false statements regarding the applicants examination efforts is committing fraud and subject to license cancellation for a period of one year in accordance with section 322.22 and 322.27(1)(d), Florida Statutes."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"As an examining applicant you are required to answer personal security questions before and during the on-line examination."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Applicants have 60 minutes to answer all 50 questions. After 60 minutes have passed, all unanswered questions will be marked as incorrect."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"The State of Florida also requires us to inform you that all students are subject to random selection for re-examination at the Driver License or Tax Collector office prior to the issuance of any license. Failure to pass the random re-exam will require the student to pass the knowledge exam prior to license issuance."}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Please note that any student, parent, or guardian giving false statements regarding the students examination efforts is committing fraud and subject to license cancellation for a period of one year in accordance with section 322.22 and 322.27(1)(d) F.S."})]}),jsxRuntimeExports.jsx(Checkbox,{checked:O,id:"isContractSigned",onChange:()=>{B(!O)},label:"I, the student, have read and agree to the terms stated above.",required:!0}),jsxRuntimeExports.jsx("hr",{className:"gritPracticeTestItem__divider"}),jsxRuntimeExports.jsx(Button$2,{"data-test":"submitContract",type:"submit",children:"Save & Sign Agreement"})]})]})})},RemoteTestPurchaseForm=({product:t})=>{const e=useStripe(),n=useElements(),{user:s}=store.getState(),[i,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),{aceRootScope:u}=window,{studentCurrent:c,domainConf:d}=u,p=T=>{store.dispatch({type:SET_IS_NOT_LOADING}),a(!1),store.dispatch({type:SHOW_MODAL,payload:{modal:{message:T.message??"An unknown error occurred",title:"Oops!",buttonText:"Continue",confirmDispatch:[{type:SET_IS_NOT_LOADING}],dismissDispatch:[{type:SET_IS_NOT_LOADING}]}}})},m=(T,I={offPercent:0})=>T*(1-I.offPercent),g=(T,I,D="Continue")=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{message:I,title:T,buttonText:D}}})},E=T=>{const I={40201:"Your credit card was declined. Please try another card or contact your bank.",40203:"Your CVC security code does not match your card. Please try another CVC or another card.",40204:"Your card is expired. Please try another card or contact your bank."};if(I[T.code]){g("Oops!",I[T.code]);return}g("Oops!","We are unable to process your card. Please try another card.")},x=()=>{store.dispatch({type:SHOW_MODAL,payload:{modal:{message:`Your purchase was successful. We have emailed a receipt to ${u.userCurrent.username?`${u.userCurrent.username}.`:"the email address associated with this account."}`,title:"Exam purchased successfully",buttonText:"Continue",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}}]}}})},b=async T=>{try{const I=await purchaseReceiptAnonymous(T);store.dispatch({type:SET_IS_NOT_LOADING}),I.vendorStatus==="succeeded"&&I&&x()}catch(I){E(I),store.dispatch({type:SET_IS_NOT_LOADING})}},S=async()=>{if(store.dispatch({type:SET_IS_LOADING}),!e||!n){store.dispatch({type:SET_IS_NOT_LOADING});return}a(!0);const{error:T}=await n.submit();if(T){p(T);return}const{error:I,paymentMethod:D}=await e.createPaymentMethod({elements:n});if(I){p(I);return}const P=m(t.price),O=`${d.Links.BaseOfAce??document.location.origin}/remotetest/purchase`,B=`${d.Links.BaseOfAce??document.location.origin}/remotetest/ready`,F={email:s.username,productIdList:[t._id],couponIdList:[],chargeAmount:P,token:D.id,accountType:s.accountType,url:O,returnUrl:B,...s.accountType==="parent"&&c&&{firstName:c.firstName,lastName:c.lastName,userEmail:c.username,teacherEmail:s.username,teacherFirstName:s.firstName,teacherLastName:s.lastName},...s.accountType==="student"&&{firstName:s.firstName,lastName:s.lastName},...s.accountType!=="parent"&&{userEmail:"",teacherEmail:"",teacherFirstName:"",teacherLastName:""}};store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"confirm.flke.purchase",submitCallback:()=>b(F)}}})},C=T=>{T.preventDefault(),S().catch(I=>{console.error(I)})};return jsxRuntimeExports.jsxs("form",{onSubmit:C,children:[jsxRuntimeExports.jsx(PaymentElement,{onChange:T=>{l(T.complete)}}),jsxRuntimeExports.jsxs(Button$2,{type:"submit","data-test":"flkePurchaseButton",disabled:!e||i||!o,children:["Purchase for $",m(t.price).toFixed(2)]})]})},RemotetestPurchase=()=>{useComponentLog("RemoteTestPurchase");const t=window.aceConstants.TOKENS.stripe,{theme:e}=useTheme(),n=useSelector(selectRemoteTestState),s=useSelector(selectMilestoneState),i=useSelector(x=>x.remotetest.isLoading),[a,o]=reactExports.useState(),[l,u]=reactExports.useState(""),c=lodashExports.get(s,"milestoneData",{}),d=lodashExports.get(c,"productList[0]",{}),m={mode:"payment",amount:Math.round(d.price*100),currency:"usd",loader:"auto",paymentMethodCreation:"manual",paymentMethodTypes:["card","link"],appearance:{theme:e==="ace-dark"?"night":"stripe"}},g={40402:"Because you ran out of time, you will need to repurchase the Knowledge Exam.",40403:"Because you abandoned the exam, you will need to repurchase the Knowledge Exam.",40405:"The State has temporarily taken all tests offline, please try to take the test again in a few minutes or contact Customer Service for more info.",40406:"Because you failed a security question, you will need to repurchase the Knowledge Exam.",40407:"Because you gave too many incorrect answers, you will need to repurchase the Knowledge Exam."};reactExports.useEffect(()=>{if(!s.isActive){const x={...s,remainingCount:n.remainingCount,failCode:n.failCode??""};if((x.remainingCount!==s.remainingCount||x.failCode!==s.failCode)&&store.dispatch(setMilestone(x)),g[n.failCode]){u(g[n.failCode]);return}u("You are about to purchase access to a single Florida Knowledge Exam.");return}store.dispatch({type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}})},[s]),reactExports.useEffect(()=>{if(!a){const{Stripe:x}=window;x&&o(x(t))}},[d]);const E=loadStripe(t);return i?jsxRuntimeExports.jsx(LoadingSpinner$1,{}):jsxRuntimeExports.jsxs("div",{className:"grit screen remotetest-purchase ",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Exit",callback:()=>store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),hideIcon:!1}}),a&&m&&d?jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("h1",{className:"headings__h1 mb3",id:"credit-card-title",children:[n.failCode?"Repurchase":"Buy"," Knowledge Exam"]}),n.failMessage?jsxRuntimeExports.jsx(Alert,{variant:"warning",title:`Your prior test attempt failed due to "${n.failMessage}", you will need to purchase a new test.`}):null,jsxRuntimeExports.jsx("p",{children:`${l} ${c.failCode?`You have ${c.remainingCount} attempt${c.remainingCount>1?"s":""}left before you'll need to visit your local DMV to take the exam.`:"After purchasing, you'll have an opportunity to update your user information, read the State's terms, and prepare for the exam."}`}),jsxRuntimeExports.jsx(Elements,{stripe:E,options:m,children:jsxRuntimeExports.jsx(RemoteTestPurchaseForm,{product:d})})]}):null]})},RemotetestReady=()=>{useComponentLog("RemoteTestReady");const{aceRootScope:t}=window,e=useSelector(selectRemoteTestState),n=useSelector(selectCourseState),s=useSelector(selectTempState),i=useDispatch(),{ruleHtmlList:a,intro:o,linkList:l,title:u,vendor:c,isLoading:d}=e,p=l?.[0]?.emotion==="secondary"?[...l].reverse():l,[m]=useWindowSize(),g=()=>{const x=t.progressCurrent,b=e.user??t.userCurrent,S=t.courseCurrent??n,{dynamicId:C}=s,T=C?.value;return UserObj.isInfoMissing(x,b,S?.reasonAttendList?.[0])||!T&&b?.identificationSet?.find(I=>["ALIEN_LAST_4","ADMISSIONS_LAST_4"].includes(I.type))||!x.isContractSigned||!x.isContractParent||!x.parentLicense},E=(x,b)=>(x.preventDefault(),b.key==="test.start"?i({type:POST_START_REMOTE_TEST_PROGRESS}):i({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}));return reactExports.useEffect(()=>{e&&g()&&i({type:REDIRECT_TO_URL,payload:{url:"remotetest.contract"}})},[]),d?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsx("div",{className:"grit screen remotetest-ready",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[c==="IDEMIA"&&m<1200?jsxRuntimeExports.jsx(Alert,{variant:"warning",title:"Warning, your screen size is smaller than recommended for this exam. Please enlarge your browser window or switch to a desktop or laptop."}):null,u?jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx("h1",{"data-test":"examTitle",className:"headings__h1",children:"Start Florida Class E Knowledge Exam"})}):null,jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsxs("section",{className:"content",children:[o?jsxRuntimeExports.jsx("p",{"data-test":"examSubtitle",className:"paragraph__regular",dangerouslySetInnerHTML:{__html:o}}):null,a?.length?jsxRuntimeExports.jsx("ul",{"data-test":"examRules",className:"paragraph__regular",children:a.map((x,b)=>jsxRuntimeExports.jsx("li",{dangerouslySetInnerHTML:{__html:x}},b))}):null]}),jsxRuntimeExports.jsx("nav",{className:"button-wrapper",children:p?.length?p.map(x=>jsxRuntimeExports.jsx(Button$2,{onClick:b=>E(b,x),variant:x.key==="test.start"?"solid":"text","data-test":x.key==="test.start"?"startExam":"returnHome",disabled:d,children:x.title},x.key)):null})]})]})})},SummaryScreen=()=>{useComponentLog("RemoteTestSummary");const{ui:t,remotetest:e}=store.getState(),n=()=>{t.brand==="FLVS"?store.dispatch({type:REDIRECT_TO_URL,payload:{url:"remotetest.ready"}}):store.dispatch({type:REDIRECT_TO_URL,payload:{url:"remotetest.purchase"}})},s=a=>{a.preventDefault(),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})},i={40402:"time running out",40403:"abandoning it",40405:"being denied by state",40406:"failing a security question",40407:"too many incorrect answers"};return useKeyPress(["Enter"],a=>{a.preventDefault(),n()},[]),jsxRuntimeExports.jsx("div",{className:"grit screen remotetest-summary",children:jsxRuntimeExports.jsx("div",{className:"full-width",children:jsxRuntimeExports.jsx("div",{className:"vertical-center",children:jsxRuntimeExports.jsxs("div",{className:"center-padded",children:[!("brandId"in e)&&!("isPassed"in e)?jsxRuntimeExports.jsx("div",{"data-test":"resultMessage",className:"summary-result-msg",children:jsxRuntimeExports.jsx("span",{className:"paragraph__regular",children:"Please refresh your dashboard to update your exam status."})}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1 ",children:e.isPassed?"You Passed":"Try Again"}),e.isPassed?jsxRuntimeExports.jsx("div",{"data-test":"resultMessage",className:"summary-result-msg",children:jsxRuntimeExports.jsx("span",{className:"paragraph__regular",children:"Congrats! Please go to your dashboard to get your exam status. This may take a few minutes to update."})}):null,!e.isPassed&&e.brandId==="FLVS"?jsxRuntimeExports.jsx("div",{"data-test":"resultMessage",className:"summary-result-msg",children:jsxRuntimeExports.jsxs("span",{className:"paragraph__regular",children:["We're sorry, but you have failed the exam due to"," ",i[e.failCode]||"time running out",". Per state requirements, try again please."]})}):null,!e.isPassed&&e.brandId!=="FLVS"?jsxRuntimeExports.jsx("div",{"data-test":"resultMessage",className:"summary-result-msg",children:jsxRuntimeExports.jsxs("span",{className:"paragraph__regular",children:["We're sorry, but you have failed the exam due to"," ",i[e.failCode]||"time running out",". Per state requirements, to try again please repurchase the exam."]})}):null]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{className:"return-home-result",children:jsxRuntimeExports.jsx(Button$2,{type:"button",variant:"solid","data-test":"returnHome",onClick:s,children:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Return Home"})})})})})]})})})})};function getTimeOffset(t,e){const{aceRootScope:n}=window,s=n.serverDriftMs||0,i=new Date(t),a=e*60*1e3,o=new Date;return i.setMilliseconds(i.getMilliseconds()+s+a),Math.max((i.getTime()-o.getTime())/1e3,0)}function getTimer(t){const e=Math.floor(t/60),n=Math.floor(t%60);return`${e<10?`0${e}`:e}:${n<10?`0${n}`:n}`}const RemotetestTest=()=>{useComponentLog("RemoteTestScreen");const{remotetest:t}=store.getState(),e=getTimeOffset(t.startDate,t.testMinutes),n=getTimer(e),[s,i]=reactExports.useState(n||""),{question:a}=t,{aceRootScope:o}=window,{userCurrent:l,progressCurrent:u}=o,c=u._id,d=t.brandId==="FLVS"?"<strong>Security Question!</strong> If you answer this wrong, you will fail, so choose wisely.":`<strong>Security Question!</strong> If you answer this wrong, you will fail and must repurchase, 
so choose wisely.`,p=`${t.correctCount} of ${t.passCount} Correct and ${t.wrongCount} Wrong`,m=t.question.imageUrl;reactExports.useEffect(()=>{a||store.dispatch({type:GET_CACHED_REMOTE_TEST_PROGRESS})},[a]),reactExports.useEffect(()=>{const E=setInterval(()=>{const x=getTimeOffset(t.startDate,t.testMinutes),b=getTimer(x);i(b),o.completeTip=`${p}, ${Math.round(x/60)} Of ${t.testMinutes} Minutes Left`,x<=0&&store.dispatch({type:FAIL_REMOTE_TEST_PROGRESS,payload:{progressId:c,testId:t._id,reasonCode:"EXPIRED"}})},1e3);return()=>{clearInterval(E)}},[s]);const g=(E,x)=>{E.preventDefault();const b=a.answerList[x];store.dispatch({type:POST_GRADE_REMOTE_TEST_PROGRESS_QUESTION,payload:{progressId:c,testId:t._id,questionId:a._id,answerKey:b.key}})};return useKeyPress(["1","2","3"],E=>{E.preventDefault();const b={1:0,2:1,3:2}[E.key],S=a.answerList[b];S&&store.dispatch({type:POST_GRADE_REMOTE_TEST_PROGRESS_QUESTION,payload:{progressId:c,testId:t._id,questionId:a._id,answerKey:S.key}})},[]),jsxRuntimeExports.jsxs("div",{className:"grit screen remotetest-test",children:[jsxRuntimeExports.jsx(CourseHeader,{currentCount:(t.correctCount+1).toString(),totalCount:t.passCount.toString(),backButton:{text:"Exit",callback:()=>store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),hideIcon:!1},timer:s,isTest:!0}),jsxRuntimeExports.jsx("div",{className:"container",children:a?jsxRuntimeExports.jsxs("main",{children:[a.isSecurity?jsxRuntimeExports.jsx("h1",{"data-test":"securityQuestion",className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--plainText headings__h1 danger",dangerouslySetInnerHTML:{__html:d}}):null,a.template==="QUESTION_TEMPLATE_6"?jsxRuntimeExports.jsx("img",{className:"gritCourseflowNode__questionImage question-image",src:m,alt:a.question}):null,a.question?jsxRuntimeExports.jsx("h2",{"data-test":"questionTitle",className:`gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--plainText headings__h2 ${a.isSecurity?"danger":""}`,dangerouslySetInnerHTML:{__html:a.question}}):null,jsxRuntimeExports.jsx("div",{className:"answer-wrapper",children:jsxRuntimeExports.jsx("ul",{className:"answers-list",children:a.answerList.length?a.answerList.map((E,x)=>jsxRuntimeExports.jsx("li",{id:`choice${x}`,className:"gritCourseflowNode__answerButtonListItem",children:jsxRuntimeExports.jsx(AnswerButton,{"data-test":"popupAnswer",text:E.value,onClick:b=>{g(b,x)}})},E.key)):jsxRuntimeExports.jsx("li",{className:"gritCourseflowNode__answerButtonListItem",children:"No answers available"})})}),l.isDebug?jsxRuntimeExports.jsx("div",{className:"ace-debug",children:t.currentCount||t.correctCount||t.wrongCount}):null]}):null})]})},remoteTestLoader=async()=>{const{progress:t}=store.getState();if(!t._id)return redirect("/dash/index");const e=await getRemoteTestByProgressId(t._id);if(store.dispatch({type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:e}}),e.isPassed)return redirect("/remotetest/summary");if(e.isActive){const n=e.vendor==="IDEMIA"?"/remotetest/continue":"/remotetest/test";return redirect(n)}return e.remainingCount===0?(store.dispatch({type:SHOW_MODAL,payload:{modal:{message:"We're sorry, but you ran out of attempts to take the exam online. Please visit your local DMV to try the Florida Knowledge Exam again in person.",title:"Out Of Attempts!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}),redirect("/dash/index")):null},RemoteTestRoutes=[{path:"/remotetest",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"ready",loader:remoteTestLoader,element:jsxRuntimeExports.jsx(RemotetestReady,{})},{path:"purchase",loader:remoteTestLoader,element:jsxRuntimeExports.jsx(RemotetestPurchase,{})},{path:"contract",element:jsxRuntimeExports.jsx(RemoteTestContract,{})},{path:"test/:questionIdx",element:jsxRuntimeExports.jsx(RemotetestTest,{})},{path:"summary",loader:async()=>{const{progress:t}=store.getState();if(!t._id)return redirect("/dash/index");const e=await getRemoteTestByProgressId(t._id);return store.dispatch({type:GET_REMOTE_TEST_PROGRESS_SUCCESS,payload:{test:e}}),null},element:jsxRuntimeExports.jsx(SummaryScreen,{})},{path:"continue",element:jsxRuntimeExports.jsx(RemotetestContinue,{})}]}],BundleEligibilityList=({bundleEligibility:t})=>{const{courses:e,eligibleCount:n,ineligibleCount:s}=t,i=e.filter(o=>o.isEligible),a=e.filter(o=>!o.isEligible);return jsxRuntimeExports.jsxs("div",{className:"max-w-[700px] mt-2",children:[n>0&&jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsxs("p",{className:"font-extrabold leading-[26px] mb-1",children:["Eligible to Renew (",n,")"]}),jsxRuntimeExports.jsx("ul",{className:"!list-disc ml-5 !pl-5 mb-0",children:i.map(o=>jsxRuntimeExports.jsx("li",{className:"leading-[25.6px]",children:o.courseName},o.courseId))})]}),s>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-extrabold leading-[26px] mb-1",children:["Not Eligible (",s,")"]}),jsxRuntimeExports.jsx("ul",{className:"!list-disc ml-5 !pl-5 mb-0",children:a.map(o=>jsxRuntimeExports.jsxs("li",{className:"leading-[25.6px]",children:[o.courseName,"  ",o.ineligibilityReason]},o.courseId))})]})]})},Renewals=()=>{useComponentLog("Renewals");const t=useSelector(selectUiIsLoading),e=useDispatch(),[n,s]=reactExports.useState(),{aceRootScope:i}=window,a=lodashExports.get(i,"progressCurrent._id","");reactExports.useEffect(()=>{e(genericAnalyticsAndIterableEvent("Component Shown",{to:"renewals.view"})),(async()=>{e({type:SET_IS_LOADING});try{const c=await checkPurchaseAvailable(a,"RENEWAL"),d=lodashExports.get(c,"milestoneData.productList",[]);s(c.milestoneData),e(setPersistentUpsells(d)),e({type:SET_IS_NOT_LOADING})}catch(c){console.error(c),e({type:SET_IS_NOT_LOADING})}})()},[]);const o=u=>u.is.purchasable!==void 0?!u.is.purchasable:u.is.purchased,l=u=>{o(u)||e(clickBuyUpsell(u.key,"purchase.payment",{flow:"persistent",productType:"RENEWAL"},"PERSISTENT"))};return jsxRuntimeExports.jsx("div",{className:"grit screen renewals",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1 title",children:n?.title}),n?.expiredDescription&&jsxRuntimeExports.jsx("p",{className:"font-extrabold max-w-[700px] !mb-0",children:n.expiredDescription}),n?.description&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular description max-w-[700px] !mt-0",children:n.description}),n?.bundleEligibility&&jsxRuntimeExports.jsx(BundleEligibilityList,{bundleEligibility:n.bundleEligibility}),!!n?.productList?.length&&n.productList.map((u,c)=>jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx(AddonCard,{buttonLabel:o(u)?u.ctaPurchased:u.ctaUnpurchased,description:"",headline:u.headline,price:u.price,maxPrice:u.maxPrice,title:u.title,id:`persistent-upsell-container-${u._id}`,isUpsellPurchased:o(u),onClickPurchase:()=>{l(u)},productIndex:c,isUnavailable:u.is.upsellEventExpired})},u._id)),n?.productList?.length===0&&!t&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"There are currently no available renewals."}),n?.note&&jsxRuntimeExports.jsx("p",{className:"font-[Nunito_Sans] text-[13px] italic font-semibold !mt-0 max-w-[700px]",children:n.note})]})})},RenewalRoutes=[{path:"/renewals",element:jsxRuntimeExports.jsx(Renewals,{})}],getKeytermGlossary=async({courseId:t,subtopicIdList:e})=>call("keyterm/glossary","GET",{courseId:t,subtopicIdList:e}),sort=t=>t.sort((e,n)=>{const s=e.term.toUpperCase(),i=n.term.toUpperCase();return s<i?-1:s>i?1:0}),Glossary=()=>{const t=useNavigate(),e=useDispatch(),{user:n}=store.getState(),{defCourseId:s}=n,[i,a]=reactExports.useState([]),[o,l]=reactExports.useState([]),[u,c]=reactExports.useState(""),d=useSelector(selectUIsubtopicIdList),p=o.length?o:i;reactExports.useEffect(()=>{(async()=>{try{const x=await getKeytermGlossary({courseId:s,subtopicIdList:d});a(sort(x.list))}catch(x){console.error(x)}})()},[s]);const m=E=>{const x=i.filter(b=>{const S=b.term.toLowerCase().includes(E.toLowerCase()),C=b.definition.toLowerCase().includes(E.toLowerCase());return S||C});l(x),c(E)},g=()=>{e({type:BUTTON_PRESSED,payload:{from:"GLOSSARY",to:"SEARCH"}})};return jsxRuntimeExports.jsxs("div",{className:"grit screen glossary",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,backButton:{text:"Back",callback:()=>{e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),d?.length&&e({type:CLEAR_TOPIC_REDIRECT_DATA}),t("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Glossary"}),jsxRuntimeExports.jsx("div",{className:"content",children:jsxRuntimeExports.jsx(Input,{id:"glossarySearch",name:"glossarySearch",placeholder:"Search Glossary",onChange:E=>{m(E.target.value)},value:u,onFocus:g})})]}),jsxRuntimeExports.jsx("main",{className:"content",children:p.map(E=>jsxRuntimeExports.jsxs("div",{"data-test":"glossary-item",className:"glossary-item",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"lists-menus__chapter-item",children:E.term}),jsxRuntimeExports.jsx("span",{className:"lists-menus__list-description",children:E.definition}),E.linkUrl?jsxRuntimeExports.jsx(Button$2,{variant:"text",onClick:()=>window.open(E.linkUrl,"_blank"),children:"Learn More"}):null]}),E.imageUrl?jsxRuntimeExports.jsx("div",{className:"image-wrapper",children:jsxRuntimeExports.jsx("img",{src:E.imageUrl,alt:""})}):null]},E._id))})]})]})},AudioLessons=()=>{useComponentLog("AudioLessons");const t=useDispatch(),[e,n]=reactExports.useState(!1),s=()=>{n(!0)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,backButton:{text:"Back",callback:()=>{t({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),navigate("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsx("div",{className:"grit screen audio-lessons",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Audio Lessons"}),jsxRuntimeExports.jsxs("div",{className:"audio-lessons__wrapper",children:[!e&&jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}),jsxRuntimeExports.jsx("iframe",{style:{border:"none"},title:"Audio Lessons",width:"100%",height:"450",allow:"autoplay",onLoad:s,src:"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/329464735&color=%2312bdcd&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"})]})]})})]})},CrashCourses=()=>{useComponentLog("CrashCourses");const t=useSelector(d=>d.progress),e=useSelector(d=>d.user),[n,s]=reactExports.useState(),[i,a]=reactExports.useState(!1),o=window.aceConstants.DOMAINCONF.isDev&&e.isDebug,l=useDispatch();async function u(){const d=t._id;if(!d){a(!0);return}try{const p=await getCrashCourses({progressId:d,isTestTutorEnabled:o});s(p)}catch{a(!0)}}const c=d=>{l({type:BUTTON_PRESSED,payload:{to:"crashcourses.purchase",from:"crashcourses.view"}}),window.open(d,"_blank")};return reactExports.useEffect(()=>{u().catch(()=>{a(!0)})},[]),jsxRuntimeExports.jsxs("div",{className:"grit screen crash-courses",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,backButton:{text:"Back",callback:()=>{l({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),navigate("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"headings",children:jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:n?.page?.title})}),jsxRuntimeExports.jsxs("div",{className:"crash-courses__wrapper","data-test":"tutoringSreen",children:[!n&&!i&&jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}),i&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"There was an error loading the crash courses"}),n&&!i&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:n.page?.description}),jsxRuntimeExports.jsxs("div",{className:"crash-courses__top-section",children:[jsxRuntimeExports.jsx("p",{className:"lists-menus__chapter-item",children:n.page?.topSection.description}),jsxRuntimeExports.jsx("ul",{className:"crash-courses__top-section__list",children:n.page?.topSection.bulletList.map((d,p)=>jsxRuntimeExports.jsx("li",{className:"paragraph__regular",children:d},p))})]}),n.crashCoursesList.map(d=>jsxRuntimeExports.jsx("div",{className:"crash-courses__course",children:jsxRuntimeExports.jsx(AddonCard,{title:d.date??"",price:d.cost,buttonLabel:d.buttonLabel,headline:`${d.title} with ${d.fullName}`,description:d.learnMore??"",isUnavailable:!1,isUpsellPurchased:d.isPurchased,onClickPurchase:()=>{c(d.link)},onClickLearnMore:()=>{l({type:BUTTON_PRESSED,payload:{to:"crashcourses.learnmore",from:"crashcourses.view"}})}})},d.id)),n.page?.bottomSection.map((d,p)=>jsxRuntimeExports.jsxs("div",{className:"crash-courses__bottom-section",children:[jsxRuntimeExports.jsx("h2",{className:"lists-menus__large-list-title",children:d.subsection}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:d.description})]},p))]})]})]})]})},ModalContent=({url:t,iframeTitle:e})=>{const[n,s]=reactExports.useState(!0),i=()=>{s(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n&&jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}),jsxRuntimeExports.jsx("iframe",{width:"100%",height:"100%",title:e??"Calendly Scheduling Page",onLoad:i,src:`${t}${t.includes("?")?"&":"?"}hide_landing_page_details=1&embed_type=Inline&embed_domain=1`})]})},CalendlyModal=({onModalClose:t,open:e,rootElement:n,url:s,iframeTitle:i})=>{if(!e)return null;if(!n)throw new Error("Root element is required for the modal to be rendered");return ReactDOM.createPortal(jsxRuntimeExports.jsxs("div",{className:"calendly-overlay",children:[jsxRuntimeExports.jsx("span",{role:"presentation","aria-label":"close modal from overlay",onClick:t,className:"calendly-close-overlay"}),jsxRuntimeExports.jsx("div",{className:"calendly-popup",children:jsxRuntimeExports.jsx("div",{className:"calendly-popup-content",children:jsxRuntimeExports.jsx(ModalContent,{url:s,iframeTitle:i})})}),jsxRuntimeExports.jsx("button",{className:"calendly-popup-close",onClick:t,"aria-label":"Close Calendly modal",children:jsxRuntimeExports.jsx("span",{className:"icon gritIcon--close "})})]}),n)},TutorCard=({tutor:t})=>{const[e,n]=React$1.useState(!1),s=useDispatch();return jsxRuntimeExports.jsxs("div",{className:"tutor__card",children:[jsxRuntimeExports.jsx("img",{src:t.tutorPhoto,alt:t.fullName}),jsxRuntimeExports.jsx("h3",{className:"headings__h3",children:t.fullName}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:t.description}),jsxRuntimeExports.jsxs("div",{className:"tutor__card-btn-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>{n(!0),s({type:BUTTON_PRESSED,payload:{from:"tutoring.view",to:"schedule.tutoring"}})},children:t.scheduleCta}),t.isContactable&&jsxRuntimeExports.jsx(Button$2,{onClick:()=>{s({type:SHOW_MODAL,payload:{modal:{type:"tutor.contact",title:t.fullName,tutorEmail:t.email}}}),s({type:BUTTON_PRESSED,payload:{from:"tutoring.view",to:"contact.tutor"}})},children:t.contactCta})]}),e&&jsxRuntimeExports.jsx("div",{className:"tutor__calendly-modal",children:jsxRuntimeExports.jsx(CalendlyModal,{url:t.calendlyUrl,iframeTitle:t.fullName,rootElement:document.getElementById("root"),open:e,onModalClose:()=>{n(!1),window.location.reload()}})})]})},Tutoring=()=>{useComponentLog("Tutoring");const t=useSelector(c=>c.progress),[e,n]=reactExports.useState(),[s,i]=reactExports.useState(!1),[a,o]=reactExports.useState(!0),l=useDispatch();async function u(){o(!0);const c=t._id;if(!c){i(!0),o(!1);return}try{const d=await getTutors({progressId:c});n(d)}catch(d){console.error(d),i(!0)}finally{o(!1)}}return reactExports.useEffect(()=>{u().catch(()=>{i(!0)})},[]),jsxRuntimeExports.jsxs("div",{className:"grit screen tutoring","data-test":"tutoringScreen",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,backButton:{text:"Back",callback:()=>{l({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),navigate("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"headings",children:jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:e?.title})}),jsxRuntimeExports.jsxs("div",{className:"tutoring__wrapper","data-test":"tutoringSreen",children:[a&&!s&&jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}),s&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"There was an error loading the tutors"}),!a&&!e&&!s&&jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"No tutors available"}),!a&&e&&!s&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:e.description}),e.creditNotice.isAvailable&&jsxRuntimeExports.jsx(Alert,{extraClassName:"tutoring__credit-notice",variant:"success",description:e.creditNotice.description,title:e.creditNotice.title}),jsxRuntimeExports.jsx("div",{className:"tutoring__tutors",children:e.tutorList.map(c=>jsxRuntimeExports.jsx(TutorCard,{tutor:c},c.fullName))})]})]})]})]})},WebinarEntry=({webinar:t,handleNavigate:e,isUpcoming:n=!1,isLoadingWebinarUrl:s=!1})=>{const i=n&&t.isDaily&&(t.isJoinable||t.isFull),a=n&&t.isDaily,o=l=>{l.stopPropagation(),e(l,t.webinarUrl,t.eventAt,t,n)};return jsxRuntimeExports.jsxs("div",{role:a?void 0:"button",tabIndex:a?void 0:0,onKeyDown:a?void 0:l=>{l.key==="Enter"&&o(l)},className:"entry",onClick:a?void 0:o,"data-test":"webinarEntry","aria-label":`Webinar Entry with title ${t.title}`,style:a?{cursor:"default"}:{cursor:"pointer"},children:[jsxRuntimeExports.jsx("div",{className:"icon",children:t.hostIcon?jsxRuntimeExports.jsx("img",{src:t.hostIcon,alt:t.hostName}):jsxRuntimeExports.jsx(Avatar,{letter:t.hostName[0],size:"large"})}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__bold","data-test":"webinarsTitle",children:t.title}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:`with ${t.hostName}`}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed subtle",children:dateFormater({dateString:t.eventAt,isHideTime:t.isExpired})})]}),jsxRuntimeExports.jsxs("div",{className:"navicon",children:[i&&jsxRuntimeExports.jsx(Button$1,{disabled:s,onClick:o,"aria-label":`Join ${t.title} session`,children:s?"Joining...":"Join Session"}),(!n||!t.isDaily)&&jsxRuntimeExports.jsx("span",{style:{...getIconStyle("arrow-right","x-small")},children:"Open URL"})]})]},t.title)},dateFormater=({dateString:t,isHideTime:e=!0})=>{const n=new Date(t),s={weekday:"long",month:"short",day:"numeric",year:"numeric"},i={hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"America/Los_Angeles"},a=new Intl.DateTimeFormat("en-US",s),o=new Intl.DateTimeFormat("en-US",i);return e?a.format(n):`${a.format(n)} at ${o.format(n)} PST`},Webinar=()=>{useComponentLog("Webinar");const t=useDispatch(),e=useSelector(selectprogressId),[n,s]=reactExports.useState(),[i,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1);async function u(){const{aceRootScope:d}=window,{progressCurrent:p}=d||{},m=p?._id;if(!m){a(!0);return}try{const g=await getWebinar({progressId:m});s(g)}catch(g){console.error(g),a(!0)}}reactExports.useEffect(()=>{u().catch(()=>{a(!0)})},[]);const c=async(d,p,m,g,E=!1)=>{if(d.preventDefault(),E&&g?.isDaily&&g.isFull&&!g.isJoinable){t({type:SHOW_MODAL,payload:{modal:{title:"Maximum capacity reached.",message:"Please try again later",buttonText:"Dismiss",confirmDispatch:[{type:HIDE_MODAL}],dismissDispatch:[{type:HIDE_MODAL}]}}});return}if(E&&g?.isDaily&&g.isJoinable){const x=window.open("about:blank","_blank");l(!0);try{const b=await getDailyWebinarUrl({eventId:g.eventId,progressId:e});if(!b.isSuccess||!b.webinarUrl)throw new Error("Unable to join the session at this time.");const{webinarUrl:S}=b;x&&(x.location.href=S)}catch(b){const S=b instanceof Error?b.message:"Unable to join the session at this time.";t({type:SHOW_MODAL,payload:{type:"requestError",modal:{title:"Unable to Join Session",message:S}}}),x&&x.close()}finally{l(!1)}return}if(!p){t({type:SHOW_MODAL,payload:{modal:{message:`This webinar will stream on ${dateFormater({dateString:m,isHideTime:!1})}`,title:"This webinar hasn't started yet.",buttonText:"Dismiss",confirmDispatch:[{type:HIDE_MODAL}],dismissDispatch:[{type:HIDE_MODAL}]}}});return}t({type:OPEN_LINK,payload:{linkObj:{link:p,type:"URL"}}})};return jsxRuntimeExports.jsxs("div",{className:"grit screen webinar","data-test":"webinarsScreen",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!1,backButton:{text:"Back",callback:()=>{t({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),navigate("/dash/index")},hideIcon:!1,"data-test":"courseExitButton"},preferencesEnabled:!0}),jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"headings",children:jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Webinars"})}),jsxRuntimeExports.jsxs("div",{className:"webinar__wrapper","data-test":"webinarsSreen",children:[!n&&!i&&jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0}),i&&jsxRuntimeExports.jsx("div",{children:"There was an error loading the webinars"}),n&&!i&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"webinar__description",children:n.description}),jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Upcoming Webinars"}),n.upcomingList.length?n.upcomingList.map((d,p)=>jsxRuntimeExports.jsx(WebinarEntry,{webinar:d,handleNavigate:c,isUpcoming:!0,isLoadingWebinarUrl:o},p)):jsxRuntimeExports.jsx("span",{"data-test":"webinar-upcoming-none",children:"No upcoming webinars"}),jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Previous Webinars"}),n.previousList.map((d,p)=>jsxRuntimeExports.jsx(WebinarEntry,{webinar:d,handleNavigate:c},p))]})]})]})]})},ResourcesRoutes=[{path:"resource",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"glossary",element:jsxRuntimeExports.jsx(Glossary,{})},{path:"flashcards",element:jsxRuntimeExports.jsx(FlashCards,{})},{path:"practicetests",element:jsxRuntimeExports.jsx(PracticeTests,{})},{path:"webinar",element:jsxRuntimeExports.jsx(Webinar,{})},{path:"tutoring",element:jsxRuntimeExports.jsx(Tutoring,{})},{path:"crashcourses",element:jsxRuntimeExports.jsx(CrashCourses,{})},{path:"audio-lessons",element:jsxRuntimeExports.jsx(AudioLessons,{})}],loader:()=>{const{dashboard:t,course:e}=store.getState();return t.metadataOdyssey?.deadlineModal?.data.isExpired&&e.isHideProgress?redirect("/dash/index"):null}}],getAmbassadorByProgressId=async t=>call("ambassador/by","GET",{progressId:t}),RewardsShareSkeleton=()=>jsxRuntimeExports.jsx("div",{className:"animate-pulse",children:jsxRuntimeExports.jsxs("div",{className:"items-start flex flex-col gap-6 p-4 tablet:p-11 tablet:mx-auto tablet:max-w-[750px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col tablet:flex-row gap-4 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"h-8 w-40 bg-gray-200 rounded mb-2"}),jsxRuntimeExports.jsx("div",{className:"h-24 bg-gray-200 rounded w-full"})]}),jsxRuntimeExports.jsx("div",{className:"hidden tablet:block w-[250px] h-[250px] bg-gray-200 rounded-full"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full",children:jsxRuntimeExports.jsx("div",{className:"w-[137px] h-[140px] tablet:hidden rounded-full bg-gray-200"})}),jsxRuntimeExports.jsx("div",{className:"h-60 w-full bg-gray-200 rounded-md"})]})}),RewardsShare=()=>{useComponentLog("RewardsShare");const{ambassadorData:t}=useLoaderData(),e=useDispatch(),n=window.aceRootScope.domainConf,[s,i]=reactExports.useState(!1),a=async(o,l)=>{o.preventDefault(),e({type:BUTTON_PRESSED,payload:{to:"referral.linkCopied"}}),e(genericAnalyticsAndIterableEvent("Referral Link Clicked",{text:l}));try{await navigator.clipboard.writeText(l),i(!0)}catch(u){console.error("Referral Url could not be copied",u)}};return reactExports.useEffect(()=>{e(genericAnalyticsAndIterableEvent("Component Shown",{to:"referral.view"})),e({type:SCREEN_VIEW,payload:{screenName:"Refer and earn"}})},[e]),jsxRuntimeExports.jsx("div",{className:"grit screen",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(RewardsShareSkeleton,{}),children:jsxRuntimeExports.jsx(Await,{resolve:t,errorElement:jsxRuntimeExports.jsx(Navigate,{to:"/dash/index"}),children:o=>jsxRuntimeExports.jsxs("div",{className:"items-start flex flex-col gap-6 p-4 tablet:p-11 tablet:mx-auto tablet:max-w-[750px]",children:[jsxRuntimeExports.jsxs("div",{"data-test":"rewardsContainer",className:"flex flex-col tablet:flex-row items-center tablet:self-stretch tablet:justify-between ",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:o.title}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular","data-test":"message",children:o.description})]}),jsxRuntimeExports.jsx("img",{src:`${URLS.WEBASSETS}/static-assets/referral_megaphone.svg`,alt:"Megaphone",width:"268",height:"287",loading:"eager",className:"hidden tablet:block"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-full gap-4",children:[jsxRuntimeExports.jsx("img",{src:`${URLS.WEBASSETS}/static-assets/referral_megaphone.svg`,alt:"Megaphone",width:"137",height:"140",loading:"eager",className:"tablet:hidden"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-start self-stretch rounded-md bg-secondary",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 flex-grow",children:[jsxRuntimeExports.jsxs("h2",{className:"headings__h2","data-test":"payout",children:["$",o.balance]}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"Total Pending"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 flex-grow ",children:[jsxRuntimeExports.jsxs("h2",{className:"headings__h2","data-test":"earned",children:["$",o.earned]}),jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"Total Payout"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start gap-2 self-stretch",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:"Copy and share your referral link"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-start gap-4 self-stretch",children:[jsxRuntimeExports.jsx("label",{htmlFor:"referralUrl",className:"sr-only",children:"Referral URL"}),jsxRuntimeExports.jsx(Input,{readOnly:!0,name:"referralUrl",id:"referralUrl",value:o.referUrl,onChange:()=>{},helperText:s?"Link Copied!":"","data-test":"referralURL"}),jsxRuntimeExports.jsx(Button$2,{variant:"text",color:"secondary","data-test":"copyLink",onClick:l=>a(l,o.referUrl),className:"p-0!",children:"Copy"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2.5 self-stretch",children:jsxRuntimeExports.jsx(Button$2,{className:"p-0!",variant:"text","data-test":"rulesLink",onClick:()=>window.open(n.Links.Referral,"_blank"),children:"Referral Terms"})})]})]})})})})},RewardsRoutes=[{path:"/rewards",children:[{index:!0,element:jsxRuntimeExports.jsx(Navigate,{to:"/dash/index",replace:!0})},{path:"share",element:jsxRuntimeExports.jsx(RewardsShare,{}),loader:()=>{const t=selectprogressId(store.getState());return t?{ambassadorData:getAmbassadorByProgressId(t)}:redirect("/dash/index")}}]}],CourseProgressCard=({onClick:t,percentage:e,title:n,isCurrent:s=!1,isParentAccount:i=!1,isContinueLearningBtnHidden:a=!1,endDate:o=void 0,isCourseSwitcher:l=!1,isCourseConditionallyBlocked:u=!1,isHideProgress:c=!1,expireAtLabel:d=""})=>{const p=useDispatch(),[m]=useExperiment("renewal-expiration-show"),g=Number(e)===0&&!s&&!l&&!u,E=Number(e)===100,x=Number(e)>0&&Number(e)<100||s||l,b=(S,C=!1)=>{C&&p({type:BUTTON_PRESSED,payload:{to:"dash.view",from:"courseswitch.view"}}),!u&&t&&t(S)};return jsxRuntimeExports.jsxs("button",{"data-test":"switchToCourseButton",className:"grit course-progress-card",disabled:u,onClick:b,"aria-label":`Switch to Course ${n}`,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{"data-test":"switchToCourse",className:`headings__h3 ${g?"notStarted":""} ${u?"course-blocked":""}`,children:i?"Student Tracking Portal":n}),!i&&jsxRuntimeExports.jsxs("h3",{"data-test":"courseStatus",className:"headings__h3 percentage",children:[E&&!c&&jsxRuntimeExports.jsx("span",{className:"checkmark-inverted",style:{...getIconStyle("checkmark-inverted","x-small")}}),(g||u)&&jsxRuntimeExports.jsx("span",{className:"lock-solid",style:{...getIconStyle("lock-solid","x-small")}}),x&&!u&&!E&&!c&&`${Math.ceil(Number(e))}%`]})]}),!i&&!c&&jsxRuntimeExports.jsx("div",{className:"progressBarWrapper",children:jsxRuntimeExports.jsx(FloatingProgressBar,{percentage:e})}),s&&!a&&jsxRuntimeExports.jsx("div",{className:"continue-learning-button",children:jsxRuntimeExports.jsx(ContinueLearningButton,{stretch:!1,onClick:S=>{b(S,!0)},text:i?"Manage Students":"Open Your Course"})}),E&&!d&&!i&&jsxRuntimeExports.jsxs("span",{className:"helper-text fields__helper-text",children:["Completed ",o?strToMDYYYY(o):""]}),g&&!d&&!i&&jsxRuntimeExports.jsx("span",{className:"helper-text fields__label notStarted",children:"Locked until previous level is complete."}),u&&!i&&jsxRuntimeExports.jsx("span",{className:"helper-text fields__label notStarted",children:"Course is locked until previous section is complete."}),!!d&&x&&!u&&!m&&!i&&jsxRuntimeExports.jsx("span",{className:"helper-text fields__helper-text content-subdued",children:d}),e===0&&!d&&!u&&!i&&jsxRuntimeExports.jsx("span",{className:"helper-text fields__helper-text content-subdued",children:"Course not started."})]})},AffiliateButton=({linkObj:t})=>{const e=useDispatch(),{data:n,title:s,description:i}=t,{image:a}=n??{},o=l=>{l.preventDefault(),l.stopPropagation(),e({type:BUTTON_PRESSED,payload:{to:t.link,from:"courseswitch.view"}}),e({type:OPEN_LINK,payload:{linkObj:t}})};return jsxRuntimeExports.jsx("div",{role:"button",tabIndex:0,onKeyDown:l=>{l.key==="Enter"&&o(l)},className:"flex items-center justify-center w-full rounded-[5px] p-4 tablet:p-8 bg-secondary shadow-[var(--shadows-hovering)] cursor-pointer ","data-test":"affiliate-button",onClick:o,"aria-label":s,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-full gap-4 rounded-sm tablet:flex-row tablet:justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start gap-4 tablet:flex-row tablet:items-center",children:[jsxRuntimeExports.jsx("img",{src:a,alt:a,className:"w-[55px] h-[55px]"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h2",{"data-test":"affiliate-title",className:"headings__h2",children:s}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:i})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full tablet:max-w-[135px]","data-test":"affiliate-button__content-cta",children:jsxRuntimeExports.jsx(Button$2,{stretch:!0,onClick:o,children:"Learn More"})})]})})},CourseSwitcher=()=>{useComponentLog("CourseSwitcher");const t=useSelector(selectUserId),e=useSelector(p=>p.user),[n,s]=reactExports.useState([]),[i,a]=reactExports.useState(!0),o=useSelector(selectUserDefProgressId)??"",l=useSelector(selectCourseIsVerifySignIn),u=useSelector(selectAffiliateState),c=useDispatch(),d=(p,m,g)=>{if(p.stopPropagation(),m.activationModalInfo){c(genericAnalyticsAndIterableEvent("Component Shown",{to:"course.activation"})),c({type:SHOW_MODAL,payload:{modal:{message:m.activationModalInfo.content,title:m.activationModalInfo.title,buttonText:m.activationModalInfo.linkList[0].title,secondaryButtonText:m.activationModalInfo.linkList[1].title,confirmDispatch:[{type:COURSE_SWITCH_START,payload:{userId:t,progressId:m.progressId}},{type:BUTTON_PRESSED,payload:{from:"switchCourses.view",to:"course.activation"}}],secondaryDispatch:[{type:HIDE_MODAL},{type:BUTTON_PRESSED,payload:{from:"switchCourses.view",to:"course.refusal"}}]}}});return}g?(l&&c(needsVerificationCheck("SIGNIN")),c({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})):c({type:COURSE_SWITCH_START,payload:{userId:t,progressId:m.progressId}})};return reactExports.useEffect(()=>{let p=!1;return o&&getOdyssey(o,!0).then(m=>{p||s(m.summary)}).catch(()=>{p||s([])}).finally(()=>{p||a(!1)}),c(genericAnalyticsAndIterableEvent("Component Shown",{to:"courseswitch.view"})),()=>{p=!0}},[o]),reactExports.useEffect(()=>{e&&c({type:IDENTIFY_USER,payload:{user:e}}),c(genericAnalyticsAndIterableEvent("Component Shown",{to:"courselist_ltv.view"}))},[e]),i?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsx("div",{className:"grit screen course-switcher",children:jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"My Courses"}),n.length?jsxRuntimeExports.jsx("ul",{children:n.map(p=>{const m=o===p.progressId||o===p.siblingCourseProgressId;return jsxRuntimeExports.jsx("li",{children:!p.isHidden&&jsxRuntimeExports.jsx(CourseProgressCard,{isParentAccount:p.accountType==="parent",isCurrent:m,title:p.course.shortTitle,percentage:p.completePercent*100,isCourseSwitcher:!0,isCourseConditionallyBlocked:p.isCourseConditionallyBlocked,onClick:g=>{d(g,p,m)},isHideProgress:p.course.isHideProgress,expireAtLabel:p.expireAtLabel,endDate:p.completedDate})},`summary.course._id$_${p.progressId}`)})}):null,u.buttonsList.length>0&&jsxRuntimeExports.jsx("div",{className:"affiliate-buttons","data-test":"affiliate-buttons",children:u.buttonsList.map(p=>jsxRuntimeExports.jsx(AffiliateButton,{linkObj:p},p.key))})]})})},SwitcherCoursesRoutes=[{path:"courseswitch",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"view",element:jsxRuntimeExports.jsx(CourseSwitcher,{}),loader:()=>{const{progress:t}=store.getState();return store.dispatch({type:START_GET_AFFILIATE_DATA,payload:{from:"COURSE_LIST",progressId:t._id}}),null}}]}],TeacherLog=()=>{const t=useNavigate(),{studentId:e}=useParams(),{aceRootScope:n}=window,{progressCurrent:s,studentCurrent:i}=n,[a,o]=reactExports.useState({}),l=u=>Math.trunc(u*100);return reactExports.useEffect(()=>{if(!e)return;(async()=>{try{const c=await TeacherObj.studentProgressLog(s._id,e);o(c)}catch(c){console.error("error",c)}})()},[]),Object.keys(a).length===0?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0}):jsxRuntimeExports.jsx("div",{className:"grit screen teacher-log",children:jsxRuntimeExports.jsxs("div",{className:"teacher-log__wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"col-sm-12 mb4 progress-log-header",children:[jsxRuntimeExports.jsx(Button$2,{variant:"text",linkButton:!0,type:"button",onClick:()=>{store.dispatch({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dashboard.parent"}}),t("/dashboard/parent")},children:"Back"}),jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:`${i.firstName}'s Progress Logs`}),Object.keys(a).length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"progress-log-header__course",children:[jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("p",{className:"paragraph__condensed-bold",children:"Course:"}),jsxRuntimeExports.jsxs("p",{className:"paragraph__condensed",children:[a.courseTitle," "]})]}),jsxRuntimeExports.jsxs("h3",{className:"headings__h3",children:[l(a.percentProgress),"%"]})]}),jsxRuntimeExports.jsx(FloatingProgressBar,{percentage:l(a.percentProgress)})]})]}),jsxRuntimeExports.jsx("div",{className:"bg--content",children:jsxRuntimeExports.jsxs("div",{className:"col-sm-12 panel",children:[a.levelPathList?jsxRuntimeExports.jsx("article",{children:a.levelPathList.map((u,c)=>jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(CourseProgressCard,{isContinueLearningBtnHidden:!0,percentage:l(u.percentProgress),title:u.title,endDate:u.endDate||void 0,isCurrent:u.isCurrent,onClick:()=>""})},c))}):null,a?null:jsxRuntimeExports.jsx("div",{className:"py3",children:jsxRuntimeExports.jsxs("em",{children:[i.nickname," has not started the course yet."]})})]})})]})})},formatPercent=t=>{const e=t*100;return Math.floor(e)},TeacherReviewTest=({testData:t,studentCurrent:e,pageType:n})=>t.length?jsxRuntimeExports.jsxs("section",{className:"teacher-review-tests",children:[t.map(s=>{const i=!s.isPassed&&!!s.gradeDate;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("hr",{className:"teacher-review-tests__divider"}),jsxRuntimeExports.jsxs("div",{className:"teacher-review-tests__wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"teacher-review-tests__icon-container",children:[s.isPassed&&jsxRuntimeExports.jsx("span",{className:"icon checkmark-line","data-test":"checkmark",style:{...getIconStyle("checkmark-line","small")}}),i&&jsxRuntimeExports.jsx("span",{className:"icon failure-line","data-test":"failIcon",style:{...getIconStyle("failure-line","small")}}),!i&&!s.isPassed&&jsxRuntimeExports.jsx("span",{className:"icon lock-line","data-test":"lockIcon",style:{...getIconStyle("lock-line","small")}})]}),jsxRuntimeExports.jsxs("div",{className:"teacher-review-tests__content",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{"data-test":"testName",className:"lists-menus__chapter-item",children:s.title}),jsxRuntimeExports.jsxs("span",{className:"lists-menus__list-description completion-date",children:[s.isPassed?`Completed ${strToMDYYYY(s.gradeDate)}`:"",i?`Failed ${strToMDYYYY(s.gradeDate)}`:""]})]}),jsxRuntimeExports.jsxs("span",{className:`lists-menus__chapter-item ${i?"failed":""}`,"data-test":"score",children:[formatPercent(s.gradePercent??0),"%"]})]})]})]},s._id)}),jsxRuntimeExports.jsx("hr",{className:"teacher-review-tests__divider"})]}):jsxRuntimeExports.jsx("aside",{children:jsxRuntimeExports.jsxs("em",{children:[e.nickname," has not taken any ",n?"Level Tests":"Practice Tests"," yet."]})}),TeacherTests=()=>{const t=useNavigate(),e=useDispatch(),{studentId:n}=useParams(),{aceRootScope:s}=window,{progressCurrent:i,studentCurrent:a}=s,[o,l]=reactExports.useState(!0),[u,c]=reactExports.useState([]),[d,p]=reactExports.useState([]),[m,g]=reactExports.useState(!0);reactExports.useEffect(()=>{if(!n)return;(async()=>{const S=await TeacherObj.studentTestProgressLog(i._id,n);x(S),g(!1)})()},[n]);const E=b=>{b.preventDefault(),l(S=>!S)},x=b=>{const S=[],C=[];b.forEach(I=>{const{type:D}=I;D&&(D==="STUDY"?C.push(I):S.push(I))});const T=S.sort((I,D)=>I.type==="COURSE"&&D.type!=="COURSE"?1:I.type!=="COURSE"&&D.type==="COURSE"?-1:0);c(T),p(C)};return m?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsxs("div",{className:"grit screen teacher-tests",children:[jsxRuntimeExports.jsx("header",{"data-test":"headerLevelTest",children:jsxRuntimeExports.jsxs("div",{className:" teacher-tests-header",children:[jsxRuntimeExports.jsx(Button$2,{variant:"text",linkButton:!0,type:"button","data-test":"backButton",onClick:()=>{e({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dashboard.parent"}}),t("/dashboard/parent")},children:"Back"}),jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:`${a.firstName}'s ${o?"Level Tests":"Practice Tests"}`}),jsxRuntimeExports.jsxs("p",{className:"paragraph__regular description",children:[jsxRuntimeExports.jsxs("span",{children:["Review how ",a?.nickname," is performing for each",o?" Level Tests. ":" Practice Tests. "]}),jsxRuntimeExports.jsx("a",{href:"#","data-test":"testReview",onClick:b=>{e({type:BUTTON_PRESSED,payload:{to:"parent.level_practice_tests"}}),E(b)},children:"Click Here"}),jsxRuntimeExports.jsxs("span",{children:[" to view ",o?"practice":"level"," test results."]})]})]})}),jsxRuntimeExports.jsx("div",{"data-test":"levelOrStudyTests",children:jsxRuntimeExports.jsx(TeacherReviewTest,{testData:o?u:d,studentCurrent:a,pageType:o})})]})},TeacherRoutes=[{path:"teacher",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"log/:studentId",element:jsxRuntimeExports.jsx(TeacherLog,{})},{path:"tests/:studentId",element:jsxRuntimeExports.jsx(TeacherTests,{})}]}],TestListItem=({chapterCacheKey:t,isRetake:e,maxGradePercentFormatted:n,title:s})=>{useComponentLog("TestListItem");const[i,a,o,l,u]=useActiveHoverStates(!1),c=getStyles$1("chapterItem","ace","light",[i?"active":"inactive"],"background"),d=e?"repeat":"complete",p=e?"link":"positive",m=g=>{g.preventDefault(),g.stopPropagation(),t&&store.dispatch({type:REVIEW,payload:{chapterCacheKey:t}})};return jsxRuntimeExports.jsxs("button",{"data-test":"testListItem",className:"gritTestListItem",onMouseEnter:()=>{a()},onMouseLeave:()=>{o()},onMouseDown:()=>{l()},onMouseUp:()=>{u()},style:c,onClick:g=>{m(g)},children:[jsxRuntimeExports.jsxs("div",{"data-test":`${d}Icon`,className:"gritTestListItem__textIconWrap",children:[jsxRuntimeExports.jsx(Icon,{type:d,size:"tiny",mood:p,brand:"ace",theme:"light",className:"gritTestListItem__icon gritTestListItem__icon--tiny"}),jsxRuntimeExports.jsxs("div",{className:"gritTestListItem__textWrap",children:[jsxRuntimeExports.jsx("span",{"data-test":"testListLink",className:"gritTestListItem__title",children:s}),e&&jsxRuntimeExports.jsx("span",{"data-test":"chapterPageCount",className:"gritTestListItem__description gritListDescription",style:getGlobalColor("currentMenuItem"),children:"Retake to improve your score"})]})]}),n&&jsxRuntimeExports.jsx("div",{className:"gritTestListItem__maxGradePercent",children:jsxRuntimeExports.jsxs("span",{"data-test":"maxGradePercent",children:[n,"%"]})})]})},TestList=()=>{useComponentLog("TestList");const[t,e]=reactExports.useState(!0),[n,s]=reactExports.useState(void 0),i=useSelector(selectprogressId),[a,o]=reactExports.useState([]),l="When you complete a quiz or test, your results will appear here. If a test can be retaken, you can retake them from here, as well.";return reactExports.useEffect(()=>{let u=!1;return i&&progressTestPastTestList(i).then(c=>{u||(o(c),s(!1))}).catch(()=>{u||s(!0)}).finally(()=>{u||e(!1)}),()=>{u=!0}},[i]),jsxRuntimeExports.jsx("div",{className:"grit screen testList","data-test":"course-test-list",children:jsxRuntimeExports.jsxs("div",{className:"main",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx("h1",{"data-test":"testListTitle",className:"title headings__h1",children:"Course Tests & Quizzes"})}),t?jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0}):jsxRuntimeExports.jsx("main",{children:Array.isArray(a)&&a.length!==0&&!n?jsxRuntimeExports.jsx("ul",{children:a.map((u,c)=>jsxRuntimeExports.jsx(TestListItem,{chapterCacheKey:u.chapterCacheKey,isRetake:u.isRetake,maxGradePercentFormatted:u.maxGradePercentFormatted,title:u.title},u.chapterCacheKey+c.toString()))}):jsxRuntimeExports.jsx("p",{"data-test":"testListExplanation",children:l})})]})})},TestListRoutes=[{path:"/test-list",element:jsxRuntimeExports.jsx(TestList,{})}],ReviewQuestionItem=({question:t,onClick:e})=>jsxRuntimeExports.jsxs("button",{"aria-label":`Question to be reviewed: ${t}`,onClick:e,className:"question-to-be-reviewed","data-test":"questionsToReview",children:[jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:t}}),jsxRuntimeExports.jsx("div",{className:"navicon","data-test":"navIcon",children:jsxRuntimeExports.jsx("span",{style:{...getIconStyle("arrow-right","x-small")},children:"Open URL"})})]}),Test=()=>{useComponentLog("TestScreen");const{progressId:t,questionId:e,tour:n,testId:s,progressId:i,modeType:a,pseudoId:o,nodeId:l}=useParams(),u=useParams(),{ui:c,test:d,verification:p,user:m}=store.getState()||{},{isDebug:g}=m??{},[E,x]=reactExports.useState(!1),[b,S]=reactExports.useState(null),C=getReviewedQuestionList(s,d._id),[T,I]=reactExports.useState(d),{needCheckVerification:D}=p||{},P=i??t,[O,B]=reactExports.useState({}),[F,H]=reactExports.useState(null),{resultList:Q,_created_at:Z,is:ne,progressQuestionList:re,testId:se}=T,[G,K]=reactExports.useState(!1),[M,W]=reactExports.useState(!1),ee=s??se,z=Number(n)>=1,{serial:ae,openBook:ce,active:he,passed:fe}=ne||{},Ce=reactExports.useRef(null);let Me,Ye=0;const We=getTimeOffset$1(Z,getTotalMinutesLeft(T?.timeoutAt,T?._created_at)),Be=getTimer$1(We),rt=getTotalMinutesLeft(T?.timeoutAt,T?._created_at)*60*.1,[tt,Ue]=reactExports.useState(Be||""),[Pe,Qe]=reactExports.useState(We<=rt),Je=z&&(ae||!he)?Q:re,nt=He=>Je&&Q&&[...Je,...Q].find(_t=>_t._id===He),ft=()=>{let He=e;if(z&&!e){const yt=getCachedResponses(ee,T._id);He=yt[yt.length-1]?.questionId,(ae||!he)&&(He=Q[0]?._id)}const gt=(Je&&Q&&[...Je,...Q])?.find(yt=>yt._id===He);return Je?.length&&gt?(gt||Je[0])?._id:He},At=Je?.findIndex(He=>He._id===ft()),ot=()=>nt(ft()),{question:qe,isSingleChoice:mt,instructions:st,imageUrl:St,explanation:bt,template:Mt,answerList:pt,answerKey:rr}=ot()||{},Ft=Mt!=="QUESTION_TEMPLATE_7"&&St?St:"",Qt=Q?.find(He=>He._id===e),nr=Qt&&Qt.answerKey===Qt.correctKey,Ht=nr||T.showCorrectType==="YES"||T.showCorrectType==="ONPASS"&&fe,Ar=!!Qt,Ir=ot()&&rr,Qr=Ar&&!z,ke=He=>E&&G?Gt(ft(),He):Qt?.answerKey&&He===Qt.correctKey,Oe=He=>mt?getCachedResponses(ee,T._id).find(_t=>_t.answerKey===He):getCachedResponses(ee,T._id).find(_t=>_t?.answerKeyList?.includes(He)),Yt=(He,_t)=>Oe(_t?_t.key:pt[He].key),Xt=He=>z?!0:getCachedResponses(ee,T._id).map(_t=>_t.questionId).includes(He||ft()),ir=(He=1)=>{if(!Ar&&He===1)return!1;const _t=Je.findIndex(En=>En._id===ft()),gt=Je[_t+He],yt=Xt(),qt=gt?Xt(gt._id):-1;let yr=Number(qt);yt&&_t+He>=Je.length&&(yr=0);const Lr=Number(Xt());return yr+Lr>0},ie=()=>!!(he&&wt()),ue=()=>{he&&!wt()&&!Qt&&we(),_r(1)},ve=()=>{ir(-1)&&_r(-1)},Ie=(He,_t)=>{if(he===!1||Qr||E&&G){if(!Yt(_t,He)&&ke(He.key))return"missed";if(Yt(_t,He)&&!ke(He.key))return"incorrect";if(ke(He.key))return"correct"}},Ze=()=>he&&!wt()?Qr||E&&G?"Continue":"Submit":"",wt=()=>{const He=getCachedResponses(T.testId,T._id)?.length,_t=Object.keys(O).filter(gt=>O[gt]);return mt?_t.length<1:_t.length<1||He<1},Gt=(He,_t)=>Je.find(yt=>yt._id===He)?.correctKey===_t,sr=(He,_t)=>{let gt={};if(mt)gt={questionId:ft(),answerKey:He};else{const Lr=Object.keys(_t||O).filter(En=>En!=="undefined");gt={questionId:ft(),answerKeyList:Lr}}const qt=getCachedResponses(T.testId,T._id).slice().filter(yr=>Je.find(Lr=>Lr._id===yr.questionId));setCachedResponses(T.testId,T._id,lodashExports.unionBy([gt],qt,"questionId"))},Ee=(He,_t)=>{if(Ir||G&&E)return;let gt={...O};mt?(gt[He]=!0,Object.entries(gt).forEach(([yt,qt])=>{(!qt||yt!==He)&&(gt=lodashExports.omit(gt,yt))}),H(gt[He]?_t:null),B(gt),gt[He]&&sr(He)):(gt={...O},gt[He]&&He in gt?gt=lodashExports.omit(gt,He):(gt[He]=!0,H(gt[He]?_t:null)),B(gt),sr(He,gt))},we=()=>{if(mt){const He=Object.keys(O).map(yt=>({answerKey:yt,questionId:ft()})),_t=pt.findIndex(yt=>yt.key===He[0].answerKey),gt=F??_t;G&&!E&&He.length?(ar(He[0].answerKey),x(!0),S(gt)):G&&E&&He.length?(x(!1),B({}),or(gt)):He.length&&(B({}),or(gt))}else or(F??void 0)};function Ne(He,_t=!1){if(!_t){const yt={},qt=He.testId||ee,yr=He._id||T._id;qt&&yr&&setCachedTest(qt,T._id,lodashExports.merge(He,yt))}const gt={};getCachedResponses(ee,T._id).forEach(yt=>{yt.questionId===e&&(gt[yt.answerKey]=!0)}),B(gt)}function ze(He,_t){const gt=He,yt=_t||{modeType:a};setCachedResults(gt.testId,T._id,gt.resultList?.slice()),resetCachedResponses(gt.testId,T._id),gt.is.passed&&gt.modeType!=="STUDY"&&(store.dispatch({type:SET_ADVANCE_NO_ACTION_LOADING_STATE,payload:{disable:!0}}),store.dispatch({type:ADVANCE_NO_ACTION}));const qt=yt.modeType==="STUDY"?gt._id:gt.testId;return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.reviewTest",params:{testid:qt,mode:yt.modeType,flow:"TEST"}}})}function it(He){const gt=He.resultList?.slice()?.find(yr=>yr._id===e),yt=gt&&gt.answerKey===gt.correctKey,qt=He.progressQuestionList.findIndex(yr=>yr._id===ft())+1;return{newQuestionId:He.progressQuestionList[qt]?._id,isAnswerCorrect:yt}}function xt({testid:He,responseCached:_t,isTimeout:gt}){if(D){store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});return}return progressTestGrade(He,_t,gt).then(yt=>{setCachedTest(yt.testId,T._id,yt),I(yt),store.dispatch({type:TEST_SET,payload:{test:yt}});const{newQuestionId:qt,isAnswerCorrect:yr}=it(yt);ae&&yr&&lt(qt);const Lr=formatProgress(yt.progressDelta);store.dispatch(updateProgress(Lr)),gt&&lodashExports.get(yt,"is.submitOnTimeout",!1)?(c.modals.forEach((En,wn)=>{En.type==="testReview"&&store.dispatch({type:HIDE_MODAL,payload:{index:wn}})}),store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"test.timeUp",submitCallback:()=>ze(T,{modeType:a}),buttonText:"See Results"}}})):(gt||!yt.is.active)&&ze(T,{modeType:a}),Ne(yt)}).catch(yt=>{if(yt&&Number(yt.code)===40404)ze(T,{modeType:a});else if(u){const qt=lodashExports.merge(u,{source:"test.error",error:yt});reroute(qt)}})}const lt=He=>{const _t=He??nextQuestionId(ft(),Je),gt=getNextQuestionToReview(ee,d._id);if(he){if(gt&&G&&typeof gt=="string")return askNext(gt,u),clearNextQuestionToReview(ee,d._id);if(_t){askNext(_t,u);return}else z&&!_t&&he===!0&&Et()}else if(ze(T,{modeType:a}),clearVerifications(Q,ee),fe)return syncProgress(ae,u,T);return!1},Et=()=>{if(ae)return lt();if(he){Rt({progressId:P,modeType:a,pseudoId:o,testId:ee,questionId:re[0]._id,tour:"1"});return}return ze(T,{modeType:a})},It=async()=>{if(!g)return;const He=re.map(_t=>({questionId:_t._id,answerKey:_t.answerList[0].key}));await xt({testid:T._id,responseCached:He,isTimeout:!1})},Tt=({isTimeout:He=!1})=>{clearVerifications(Q,ee),clearReviewedQuestionList(ee,d._id),clearNextQuestionToReview(ee,d._id),clearLastQuestionId(ee,d._id);const _t=getCachedTest(ee,T._id),gt=getCachedResponses(_t.testId,T._id);xt({testid:T._id,responseCached:gt,isTimeout:He})},Rt=He=>{Je?.length===1?Tt({}):store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"testReview",title:"Ready to submit?",hideCloseIcon:!0,message:"You've answered all the questions, but you can still review and change your answers before submitting the test for grading.",submitCallback:()=>{Tt({})},dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"acetest.test",params:He}}]}}})},Dt=()=>Ye<1&&!Q?.find(He=>He._id===ft()),Ct=()=>{if(Xt(),Dt(),Me&&ae){Ye=0,sr(Me.key),Tt({});return}if(Xt()&&ae&&nr&&!z)return lt();if(Xt()&&ae&&!he&&!z)return ze(T,{modeType:a});if(!ae&&outOfQuestions(Je,At)){Rt({progressId:P,modeType:a,pseudoId:o,testId:ee,questionId:re[0]._id,tour:"1"});return}return lt()},or=He=>{Me=typeof He<"u"&&pt[He],Ye+=1,G&&ar(Me.key),ae?Ct():(Me&&sr(Me.key),needsGrading(Je,ee,T._id,At)?Rt({progressId:P,modeType:a,pseudoId:o,testId:ee,questionId:re[0]._id,tour:"1"}):Ct())},_r=He=>{if(ir(He)){const gt=At+He,yt=Je[gt];if(yt){askNext(yt._id,u);return}z?lt():or()}},Dr=()=>{if(E&&G&&b!==null){const He=pt[b];return Gt(ft(),He.key)}return nr},hr=He=>{setNextQuestionToReview(ee,d._id,ft()),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.test",params:{progressId:P,modeType:a,pseudoId:o,questionId:He,testId:ee,nodeId:"",tour:""}}})},ar=He=>{if(Gt(ft(),He)){const _t=C.filter(gt=>gt.questionId!==ft());setReviewedQuestionList(ee,d._id,_t)}else{const gt=getReviewedQuestionList(ee,d._id).slice().filter(yt=>Je.find(qt=>qt._id===yt.questionId));setReviewedQuestionList(T.testId,T._id,lodashExports.unionBy([{questionId:ft(),reviewAnswerKey:He,questionText:qe,isGraded:E}],gt,"questionId"))}};return useHotkeys([{combo:"arrowright",description:"Next Page",callback:()=>{window.aceRootScope.userCurrent.isDebug&&_r(1)}},{combo:"arrowleft",description:"Previous Page",callback:()=>{window.aceRootScope.userCurrent.isDebug&&_r(-1)}},{combo:"1",description:"Answer First",callback:()=>{window.aceRootScope.userCurrent.isDebug&&or(0)}},{combo:"2",description:"Answer Second",callback:()=>{window.aceRootScope.userCurrent.isDebug&&or(1)}},{combo:"3",description:"Answer Third",callback:()=>{window.aceRootScope.userCurrent.isDebug&&pt.length>2&&or(2)}},{combo:"4",description:"Answer Fourth",callback:()=>{window.aceRootScope.userCurrent.isDebug&&pt.length>2&&or(3)}}]),reactExports.useEffect(()=>{const He=setInterval(()=>{const _t=getTimeOffset$1(Z,getTotalMinutesLeft(T?.timeoutAt,T?._created_at));_t<=rt&&Qe(!0);const gt=getTimer$1(_t);if(Ue(gt),_t<=0&&he){clearInterval(He);const yt=getCachedResponses(T.testId,T._id);xt({testid:T._id,responseCached:yt,isTimeout:!0})}},1e3);return()=>{clearInterval(He)}},[tt,he]),reactExports.useEffect(()=>{Ce.current&&Ce.current.scrollIntoView()},[pt]),reactExports.useEffect(()=>{(async()=>{const _t=ee&&getCachedTest(ee,T._id),gt=getCachedTest(ee,T._id);if(!_t||Object.keys(_t).length===0&&_t.constructor===Object)try{const yt=await progressTestLoad(P,a,o);if(yt){K(yt.is.questionReviewable),W(yt.is.explanationAfterQuestion);const qt=yt.testId||ee,yr=yt._id||T._id;if(setCachedTest(qt,yr,yt),I(yt),store.dispatch(genericAnalyticsAndIterableEvent("Exam Started",{type:a??"TEST",test_id:yt.testId,attempt_count:yt.attemptCount})),!ee||Object.keys(gt).length===0||gt.resultList.length!==yt.resultList.length||gt._id!==yt._id){const Lr=getLastQuestionId(yt?.testId,yt._id);store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.test",params:{progressId:P,modeType:a,pseudoId:o,questionId:G&&Lr?Lr:yt.progressQuestionList[0]._id,testId:yt.testId,nodeId:l,tour:""}}})}onResolveTestStateSuccess(yt,ft(),u,ae,he),store.dispatch({type:TEST_SET,payload:{test:yt}})}}catch(yt){console.error("error",yt)}else{K(T.is.questionReviewable),W(T.is.explanationAfterQuestion);const yt={},qt=getCachedResponses(ee,T._id);qt.length&&(qt.some(yr=>yr.questionId===_t.progressQuestionList[0]._id)?(qt.forEach(yr=>{yr.questionId===e&&("answerKeyList"in yr?yr.answerKeyList.forEach(Lr=>{yt[Lr]=!0}):yt[yr.answerKey]=!0)}),B(yt),onResolveTestStateSuccess(_t,ft(),u,ae,he),I(_t),store.dispatch({type:TEST_SET,payload:{test:_t}})):(resetCachedResponses(ee,T._id),clearLastQuestionId(ee,P??""),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.test",params:{progressId:P,modeType:a,pseudoId:o,questionId:_t.progressQuestionList[0]._id,testId:_t.testId,nodeId:l,tour:""}}})))}})()},[u.testId]),reactExports.useEffect(()=>{const{questionId:He,modeType:_t,pseudoId:gt}=u;if(!He||He===":questionId")return;const yt=nt(ft()),yr={COURSE:"COURSETEST",LEVEL:"LEVELTEST"}[_t??""];yr&&verifyIfNeeded({verificationKey:He,isVerify:yt?.is?.verify??!1,modeType:yr,questionId:He,pseudoId:gt})},[u.questionId]),pt?jsxRuntimeExports.jsxs("div",{className:"grit screen test",children:[jsxRuntimeExports.jsx(CourseHeader,{hideBackButton:!ce,currentCount:ae?null:At+1,totalCount:ae?null:Je.length,isTest:!0,backButton:{text:"Exit Test",callback:()=>{G&&store.dispatch({type:BUTTON_PRESSED,payload:{from:"practiceTest.view",to:"dashboard"}}),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})},hideIcon:!1},timer:T.timeoutAt?tt:"",showTimeInRed:Pe}),jsxRuntimeExports.jsxs("article",{className:`content ${G?"review-mode":""}`,"data-test":"questionContainer","data-template-type":Mt||"question-template",children:[jsxRuntimeExports.jsxs("div",{className:"gritCourseflowNode__question-wrapper",children:[Ft?jsxRuntimeExports.jsxs("div",{id:"content-illy",children:[jsxRuntimeExports.jsx("img",{className:"gritCourseflowNode__questionImage",src:Ft,alt:Ft}),jsxRuntimeExports.jsx("h2",{className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--textAndImage headings__h2 courseflow-question-text",dangerouslySetInnerHTML:{__html:qe}})]}):jsxRuntimeExports.jsx("h2",{"data-test":"questionTitle",className:"gritCourseflowNode__questionHeading gritCourseflowNode__questionHeading--plainText headings__h2 courseflow-question-text",dangerouslySetInnerHTML:{__html:qe}}),mt?null:jsxRuntimeExports.jsx("h6",{"data-test":"selectAllThatApply",className:"gritCourseflowNode__questionInstructions gritHeading-6",dangerouslySetInnerHTML:{__html:st}}),jsxRuntimeExports.jsx("div",{className:"answer-wrapper",children:jsxRuntimeExports.jsx("ul",{className:"answers-list",children:pt.length?pt.map((He,_t)=>jsxRuntimeExports.jsx("li",{id:`choice${_t}`,className:"gritCourseflowNode__answerButtonListItem",children:jsxRuntimeExports.jsx(AnswerButton,{"data-test":"answer",text:He.value,onClick:()=>{Ee(He.key,_t)},selected:O[He.key],gradedState:Ie(He,_t)})},He.key)):jsxRuntimeExports.jsx("li",{className:"gritCourseflowNode__answerButtonListItem",children:"No answers found"})})}),Qt&&Ht||E&&M?jsxRuntimeExports.jsx("div",{"data-test":"incorrectAnswerExplanation",ref:Ce,children:jsxRuntimeExports.jsxs(Root$2,{variant:Dr()?"correct":"incorrect",children:[Dr()?jsxRuntimeExports.jsx(CheckmarkInverted,{size:"small",className:"w-8! h-8!"}):jsxRuntimeExports.jsx(XInverted,{size:"small",className:"w-8! h-8!"}),jsxRuntimeExports.jsxs(Content$2,{children:[jsxRuntimeExports.jsx(Title,{children:Dr()?"Correct":"Incorrect"}),jsxRuntimeExports.jsx(Description,{children:bt})]})]})}):null,g&&jsxRuntimeExports.jsx("div",{className:"debug",children:jsxRuntimeExports.jsx(Button$2,{onClick:It,variant:"text",id:"skip-test",children:"Skip Test"})})]}),G&&jsxRuntimeExports.jsxs("div",{className:"review-card",children:[jsxRuntimeExports.jsx("h4",{className:"headings__h4",children:"Questions to Review"}),jsxRuntimeExports.jsxs("div",{className:"review-question","data-test":"reviewCard",children:[!C.length&&jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("strong",{children:"No Saved Questions"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"If you miss a question, it will show up here. Click it at any time to try again!"})]}),C.map(He=>jsxRuntimeExports.jsx(ReviewQuestionItem,{onClick:()=>{hr(He.questionId)},question:He.questionText},He.questionId))]})]})]}),jsxRuntimeExports.jsx(CourseNavigation,{finishReview:{show:z,callback:()=>Et()},backButton:{text:"",callback:()=>{ve()},disabled:!ir(-1)},forwardButton:{"data-test":"submitAnswer",text:Ze(),callback:()=>{ue()},disabled:ie()}})]}):jsxRuntimeExports.jsx("div",{className:"grit screen test",children:jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0})})},TestReady=()=>{useComponentLog("TestReady");const t=useParams();let{nodeId:e}=t;const{progressId:n,pseudoId:s,modeType:i,from:a}=t,[o,l]=reactExports.useState(!1),[u,c]=reactExports.useState(),{ui:d,course:p,progress:m}=store.getState(),{aceRootScope:g}=window,{courseCurrent:E,progressCurrent:x}=g||{},b=E??p,S=x??m,{isShowCourseInfo:C,schoolInformation:T}=b||{},I=G=>G.emotion||"secondary",D=useDispatch(),P=useSelector(selectNeedCheckVerification);e=e==="0"?void 0:e;const O=useSelector(G=>e?selectCourseflowByNodeId(G,e):null),B=async G=>{try{const K=await progressTestPastGradeResults(G);store.dispatch({type:TEST_SET,payload:{test:K}}),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.reviewTest",params:{testid:K.testId,mode:K.modeType,flow:"REVIEW"}}})}catch(K){console.error(K)}},F=()=>i==="STUDY"?MilestoneObj.checkMilestone(S._id,"STUDY_TESTS").then(G=>G.action!=="PURCHASE").catch(()=>!0):Promise.resolve(!0),H=()=>i==="STUDY"?Promise.resolve(!0):getBlockersNoFX(S._id,"COURSE").then(G=>G.blockingActionList?.length>0?(memorizeBookmark(),console.log("looks like we have blockers, redirecting to blocker page"),redirectToBlockerIfAny(S._id,void 0,void 0,"COURSE")):(console.log("looks like we have blockers, redirecting to blocker page"),Promise.resolve(!0))),Q=()=>{const G=b.requiredBreakInMinutes?S.breakMinutes<b.requiredBreakInMinutes:!1;return i!=="STUDY"&&isLastTest(i,s)&&G?(console.log("looks like breaktime issues, looking at our current break minutes vs allowed:",S.breakMinutes,b.requiredBreakInMinutes),Promise.reject(new Error("fail"))):Promise.resolve(!0)},Z=G=>{if(c(G),G.is.passed&&G.modeType!=="STUDY"&&!G.is.retakeableOnPass){const W=G.lastGradedTest;if(W){store.dispatch({type:TEST_SET,payload:{test:W}}),store.dispatch({type:REDIRECT_TO_URL,payload:{url:"acetest.reviewTest",params:{testid:W.testId,mode:W.modeType,flow:"REVIEW"}}});return}}const K=lodashExports.merge(G,t,{proctorSuccess:d.urlParams.proctorSuccess},{urlParams:t});if(lodashExports.get(K,"is.proctored")&&lodashExports.get(K,"proctor")&&!K.proctorSuccess&&K.modeType==="COURSE"){if(G.error.messageList.length>0)return store.dispatch({type:SHOW_MODAL,payload:{modal:{message:G.error.messageList.join("."),title:"Uh oh!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}),!1;if(m?.proctor?.type==="PHYSICAL"){D({type:REDIRECT_TO_URL,payload:{url:"proctor.signin",params:K}});return}if(K.proctor.provider==="PROCTOR_U"){store.dispatch({type:REDIRECT_TO_URL,payload:{url:"proctor.review-plus",params:{progressId:n,modeType:i,pseudoId:s,nodeId:t.nodeId,from:a}}});return}return store.dispatch({type:REDIRECT_TO_URL,payload:{url:"proctor.signin",params:K}}),!1}G.error?.messageList.length>0&&store.dispatch({type:SHOW_MODAL,payload:{modal:{message:G.error.messageList.join(" "),title:"Uh oh!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}]}}}),console.log("We have test ready obj",G),G.is.passed&&i!=="STUDY"&&!G.is.retakeableOnPass&&TestObj.completeTest(i,s,!1,G,G).then(W=>{W||console.warn("completeTest call returns an unexpected response of",W)}).catch(()=>!0)},ne=async()=>{try{const G=await progressTestGetSummary(n,i,s,a);G&&Z(G)}catch(G){if(G.code===46702)TestObj.completeTest(i,s).then(()=>{},K=>(reroute(lodashExports.merge(t,{source:"test.error",error:K})),!1));else{reroute(lodashExports.merge(t,{source:"test.error",error:G}));return}}},re=async G=>{try{const K=await progressTestLoad(n,i,s);K&&(u.is.openBook||resetCachedResponses(K.testId,K._id),g.isProcessing=!1,store.dispatch({type:OPEN_LINK,payload:{linkObj:{...G,data:t}}}))}catch(K){store.dispatch({type:SHOW_MODAL,payload:{modal:{message:K.message,title:"Uh oh!",buttonText:"Return Home",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}],dismissDispatch:[{type:HIDE_MODAL}]}}})}},se=G=>{switch(G.key){case"test.start":case"test.retake":u.warning.messageList.length>0?store.dispatch({type:SHOW_MODAL,payload:{modal:{type:"startTest",message:u.warning.messageList.join(" "),title:"Important!",buttonText:"I understand",secondaryButtonText:"Close",submitCallback:()=>re(G),dismissDispatch:[{type:HIDE_MODAL}]}}}):store.dispatch({type:OPEN_LINK,payload:{linkObj:{...G,data:t}}});break;default:store.dispatch({type:OPEN_LINK,payload:{linkObj:{...G,data:t}}});break}};return reactExports.useEffect(()=>{(async()=>{try{O?.data?.isRequireVerify&&D(needsVerificationCheck("COURSE"));const K=await Q(),M=await H(),W=await F();K&&W&&M?await ne():store.dispatch({type:REDIRECT_TO_URL,payload:{url:"practicetests"}}),l(!0),doMetrics(i)}catch(K){console.error(K)}store.dispatch({type:SET_CURRENT_NODE,payload:{nodeId:e}})})()},[n,s]),jsxRuntimeExports.jsxs("div",{className:"grit screen test-ready","data-test":"assessmentContainer",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:a==="practicetests"?"Back":"Exit",callback:()=>store.dispatch({type:REDIRECT_TO_URL,payload:{url:a==="practicetests"?a:"dash.index"}}),hideIcon:!1}}),jsxRuntimeExports.jsx("main",{className:"content",children:o&&u&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[u.alertList&&u.alertList?.length!==0&&u.alertList?.map((G,K)=>jsxRuntimeExports.jsx(Alert,{title:G.title,description:G.description,variant:G.type.toLowerCase()},`${G.type}-${K}`)),u.pastResults?.length&&!u.is?.proctored?jsxRuntimeExports.jsx(PreviousTests,{progressTestList:u.pastResults,onClickReview:G=>B(G)}):null,jsxRuntimeExports.jsxs("header",{className:"header ace-content",children:[u.tierTitle&&jsxRuntimeExports.jsx("h3",{className:"testReadytierTitle headings__h3",children:u.tierTitle}),jsxRuntimeExports.jsx("h1",{"data-test":"examTitle",className:"headings__h1 mb3 md-mb5 full-width ace-fade",children:u?.title||"loading"}),u.description&&u.description!==""&&jsxRuntimeExports.jsx("p",{className:"summary-description paragraph__regular",children:u.description}),u.ruleHtmlList&&u.ruleHtmlList.length!==0&&jsxRuntimeExports.jsxs("ul",{className:"summary-rules lists-menus__list-paragraph",children:[u.ruleHtmlList?.length===0&&jsxRuntimeExports.jsx("li",{children:"No rules"}),u.ruleHtmlList.map((G,K)=>jsxRuntimeExports.jsx("li",{"data-test":`bulletMsg${K}`,children:G},K))]})]}),jsxRuntimeExports.jsx("nav",{className:"nav-ctas",children:u.linkList&&u.linkList.length!==0&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:u.linkList.map((G,K)=>jsxRuntimeExports.jsx("div",{className:classNames("gritTestReady__button",{gritTestReady__multiButton:u.linkList.length>1}),children:jsxRuntimeExports.jsx(Button$2,{disabled:P,stretch:!0,color:I(G),variant:I(G)==="secondary"?"ghost":"solid",onClick:()=>{se(G)},"data-test":I(G)==="primary"?"startAssessmentButton":"",children:G.title||G.key})},`${G.title||G.key}--${K}`))})}),C&&jsxRuntimeExports.jsx("div",{className:"school-info-wrapper",children:jsxRuntimeExports.jsx("p",{className:"metadata__regular",children:T})})]})}),t.isBacktrackAllowed==="true"&&d.brand!=="FLVS"?jsxRuntimeExports.jsx(CourseNavigation,{centerLabel:C&&T,backButton:{text:"",callback:()=>store.dispatch({type:BACKTRACK}),disabled:!t.isBacktrackAllowed}}):null]})},showAnswer=(t,e,n,s,i)=>{const a=s==="YES"||s==="ONPASS";switch(t){case"YES":return e.isCorrect?jsxRuntimeExports.jsx(AnswerButton,{selected:e.isSelected,text:e.value,gradedState:e.isSelected?"correct":"missed"},e._id):a&&!e.isCorrect?jsxRuntimeExports.jsx(AnswerButton,{selected:e.isSelected,text:e.value,gradedState:"incorrect"},e._id):!1;case"NO":return n.isCorrect&&e.isCorrect?jsxRuntimeExports.jsx(AnswerButton,{selected:e.isSelected,text:e.value,gradedState:e.isSelected?"correct":"missed"},e._id):!1;case"ONPASS":if(i){if(e.isCorrect)return jsxRuntimeExports.jsx(AnswerButton,{text:e.value,gradedState:e.isSelected?"correct":"missed"},e._id);if(a||!e.isCorrect)return jsxRuntimeExports.jsx(AnswerButton,{selected:e.isSelected,text:e.value,gradedState:"incorrect"},e._id)}return!1;case"NEVER":return e.isCorrect?!1:!n.isCorrect&&e.isSelected&&!e.isCorrect?jsxRuntimeExports.jsx(AnswerButton,{selected:e.isSelected,text:e.value,gradedState:"incorrect"},e._id):!1;default:return!1}},QuestionReviewCard=({showCorrectType:t,question:e,showResultType:n,testIsPassed:s})=>{const a=t==="NEVER"&&e.isCorrect;return jsxRuntimeExports.jsxs("div",{className:`grit question-review-card ${e.isCorrect?"success":"error"}`,children:[e.imageUrl?jsxRuntimeExports.jsx("img",{src:e.imageUrl,alt:""}):null,jsxRuntimeExports.jsxs("div",{className:"question-container",children:[jsxRuntimeExports.jsx("p",{className:"paragraph__question",dangerouslySetInnerHTML:{__html:e.question}}),a?jsxRuntimeExports.jsx("span",{className:`gritIcon gritIcon--${e.isCorrect?"checkmark":"x"}-inverted`}):null]}),e.answerList.map(o=>showAnswer(t,o,e,n,s)),a?null:jsxRuntimeExports.jsx("p",{className:"paragraph__condensed",children:e.explanation})]})},getTestScore=t=>t.is.serial?t.is.passed?"Pass":"Fail":`${t.gradePercentFormatted}%`,showResults=t=>{switch(t.showResultType){case"YES":return!0;case"NO":return!1;case"ONPASS":return t.is.passed;default:return!1}},ReviewTest=()=>{useComponentLog("ReviewTest");const t=useSelector(selectprogressId),e=useSelector(selectProgressCurrentLevel),n=useSelector(selectTestState),s=useSelector(selectCourseState),i=useSelector(S=>S.ui),a=useDispatch(),{flow:o,mode:l,testid:u}=useParams(),[c,d]=reactExports.useState(!1),p=Object.keys(s).length===0?window.aceRootScope.courseCurrent:s,{levelList:m}=p,g=m?.[e]?m[e]._id:void 0,E=n?.is?.proctored&&n?.state==="PENDING",x=S=>{const C=u;if(S==="course.advance"||S==="dashboard.view"){if(l==="STUDY"&&i.redirectedFromExam){a({type:SET_IS_REDIRECTED_FROM_EXAM,payload:{redirectedFromExam:!1}}),a({type:REDIRECT_TO_URL,payload:{url:"dash.index"}});return}a({type:CONTINUE_FROM_REVIEW,payload:{flow:o,testId:C,progressId:t}})}else a(S==="test.retake"?{type:REDIRECT_TO_URL,payload:{url:"acetest.ready",params:{progressId:t,modeType:l,pseudoId:n.pseudoId}}}:{type:REDIRECT_TO_URL,payload:{url:"dash.index"}});Object.entries(localStorage).map(T=>T[0]).filter(T=>T===`Test${C}_${t}`||T===`TestResults${C}_${t}`).map(T=>{localStorage.removeItem(T)})},b=()=>{getStudyTestById(n._id).then(S=>{c||a({type:TEST_SET,payload:{test:S}})}).catch(S=>{c||a({type:SHOW_MODAL,payload:{modal:{type:"error",title:"Request Error",message:S.message??"",confirmText:"Go back",confirmDispatch:[{type:GO_BACK}]}}})})};return reactExports.useEffect(()=>{n.is.passed&&l!=="STUDY"&&a({type:ADVANCE_NO_ACTION})},[]),reactExports.useEffect(()=>{if(l==="STUDY"){a(genericAnalyticsAndIterableEvent("Exam Completed",{type:l,test_id:n.testId,grade_percent:lodashExports.get(n,"gradePercent",0)*100,timed_out:lodashExports.get(n,"is.timeout",!1),is_passed:lodashExports.get(n,"is.passed",!1),is_expired:lodashExports.get(n,"is.expired",!1)})),a({type:CLEAR_TEST}),b();return}if(n?._id){a({type:FINISH_TEST,payload:{params:{flow:o,mode:l,testid:u}}});return}return a(g!==void 0?{type:REDIRECT_TO_URL,payload:{url:"acetest.ready",params:{progressId:t,modeType:l,pseudoId:g}}}:{type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),()=>{resetCachedResponses(n.testId,n._id),resetCachedResults(n.testId,n._id),resetCachedTest(n.testId,n._id),a({type:CLEAR_TEST}),d(!0)}},[u]),Object.keys(n).length?E?jsxRuntimeExports.jsxs("div",{className:"grit screen review-test",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Back",callback:()=>a({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),"data-test":"courseExitButton"}}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx(Alert,{title:"Your proctored test results are being reviewed",variant:"information",description:"This may take a few days. You will be notified when your results are ready."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Your Score"}),jsxRuntimeExports.jsx("h2",{"data-test":"resultScore",className:"headings__xxlarge",children:"-%"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"grit screen review-test",children:[jsxRuntimeExports.jsx(CourseHeader,{isTest:!0,backButton:{text:"Back",callback:()=>a({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})}}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Your Score"}),jsxRuntimeExports.jsx("h2",{"data-test":"resultScore",className:`headings__xxlarge ${n.is.passed?"success":"error"}`,children:getTestScore(n)}),jsxRuntimeExports.jsx("p",{"data-test":"resultMessage",className:"paragraph__regular",children:n.statusHtml}),jsxRuntimeExports.jsx("div",{className:"button-wrapper",children:n.resultLinkList.map(S=>jsxRuntimeExports.jsx(Button$2,{variant:S.emotion==="secondary"?"text":"solid","data-test":S.key==="course.advance"||S.key==="dashboard.view"?"continueTest":"retakeTest",onClick:()=>{x(S.key)},children:S.title},S.key))}),showResults(n)&&n.resultList?.map(S=>jsxRuntimeExports.jsx(QuestionReviewCard,{question:S,testIsPassed:n.is.passed,showCorrectType:n.showCorrectType,showResultType:n.showResultType},S._id))]})]}):jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0})},TestRoutes=[{path:"/acetest",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"ready/:progressId/:modeType/:pseudoId/:nodeId?/:from?/:isBacktrackAllowed?",element:jsxRuntimeExports.jsx(TestReady,{})},{path:"test/:progressId?/:testId?/:modeType?/:pseudoId?/question?/:questionId?/:nodeId?/:tour?",element:jsxRuntimeExports.jsx(Test,{})},{path:"review/:testid/:mode/:flow",element:jsxRuntimeExports.jsx(ReviewTest,{})}]}],recaptchaKey=window.aceConstants?.TOKENS?.recaptcha??"";class RECAPTCHA{action;static scriptId="recaptcha-script";constructor(e){this.action=e,this.loadReCaptcha(recaptchaKey)}loadReCaptcha(e){if(!document.getElementById(RECAPTCHA.scriptId)){const n=document.createElement("script");n.id=RECAPTCHA.scriptId,n.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,n.async=!1,n.defer=!1,document.head.appendChild(n)}}async waitForRecaptchaReady(){return new Promise((e,n)=>{if(!window.grecaptcha){n(new Error("script is not loaded"));return}window.grecaptcha.enterprise.ready(()=>{e()})})}async getToken(){try{return await this.waitForRecaptchaReady(),await window.grecaptcha.enterprise.execute(recaptchaKey,{action:this.action})}catch{throw new Error("An error occurred while processing your request.")}}}const ChangePassword=()=>{useComponentLog("ChangePassword");const t=useDispatch(),[e,n]=reactExports.useState(!1),s=new RECAPTCHA("password_reset"),i=async()=>{if(n(!1),!s){n(!0);return}try{const a=await s.getToken();t({type:SEND_RESET_PASSWORD_START,payload:{token:a}})}catch(a){console.error(a)}};return jsxRuntimeExports.jsxs("div",{className:"grit screen change-password",children:[e&&jsxRuntimeExports.jsx(Alert,{title:"Unable to Change Password",description:"An error occurred. Please try again.",variant:"error"}),jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Change your password?"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Forgot your password or just want to change it? No problem. We'll send you an email to reset your password and enter a new one."}),jsxRuntimeExports.jsx(Button$2,{onClick:i,children:"Email password reset link"})]})},Debug=()=>{const t=useSelector(selectUserState),e=useSelector(selectCourseState),n=useSelector(selectprogressState),{currentChapterPlusOne:s,currentLevelPlusOne:i,currentPagePlusOne:a}=useSelector(selectCurrentProgressLocationValues,shallowEqual$1),o=useDispatch(),l=getJarvisUrl(window.aceConstants.ACEAPICONF.env),[u,c]=reactExports.useState(!1),d=get$4("api","hijack"),p=`${l}@${t.brandId?.toLowerCase()}/user/edit/${t._id}?pid=${n._id}`,m=`${l}@${t.brandId?.toLowerCase()}/content/course/edit/${e._id}`,g=()=>{isHijackable()&&utilities.toggleDebug(t,o)};reactExports.useEffect(()=>{setTimeout(()=>{forgetAppReloadToken()},1e3)},[]);const E=x=>{x.preventDefault(),c(!0)};return jsxRuntimeExports.jsx("div",{className:"grit screen debug",children:jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsxs("div",{className:"header-container",children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Debug Dungeon"}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Use the combo move, Finn! The combo move!"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[jsxRuntimeExports.jsx("span",{children:"Debug"}),jsxRuntimeExports.jsx(ToggleButton,{disabled:!1,variant:"toggle",active:!!t.isDebug,onClick:()=>{g()}})]})]})}),jsxRuntimeExports.jsxs("article",{children:[jsxRuntimeExports.jsxs("section",{className:"api-information",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"API Information"}),jsxRuntimeExports.jsxs("table",{cellPadding:"0",cellSpacing:"0",border:0,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Key"}),jsxRuntimeExports.jsx("th",{children:"Value"}),jsxRuntimeExports.jsx("th",{children:"Key"}),jsxRuntimeExports.jsx("th",{children:"Value"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Username"}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("a",{href:p,target:"_BLANK",rel:"noreferrer",children:t.username})}),jsxRuntimeExports.jsx("th",{children:"Admin?"}),jsxRuntimeExports.jsx("td",{children:t.isAdmin?.toString()})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Token"}),jsxRuntimeExports.jsx("td",{children:t.sessionToken}),jsxRuntimeExports.jsx("th",{children:"Purchased?"}),jsxRuntimeExports.jsx("td",{children:n.isPurchased?.toString()??"Undefine"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Name"}),jsxRuntimeExports.jsxs("td",{children:[t.firstName," ",t.lastName]}),jsxRuntimeExports.jsx("th",{children:"User ID"}),jsxRuntimeExports.jsx("td",{children:t._id})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Course"}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs("span",{title:"courseCurrent.key",children:[jsxRuntimeExports.jsx("a",{href:m,target:"_BLANK",rel:"noreferrer",children:e.key}),"| ",n.appType," & ",e.state," & ",e.type,"  ",n.accountType]})}),jsxRuntimeExports.jsx("th",{children:"Course ID"}),jsxRuntimeExports.jsx("td",{children:t.defCourseId})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Progress"}),jsxRuntimeExports.jsxs("td",{children:["L",i,"  C",s,"  P",a]}),jsxRuntimeExports.jsx("th",{children:"Progress ID"}),jsxRuntimeExports.jsx("td",{children:t.defProgressId})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Locked?"}),jsxRuntimeExports.jsx("td",{children:n.isLocked?.toString()??"Undefined"}),jsxRuntimeExports.jsx("th",{children:"Verified?"}),jsxRuntimeExports.jsx("td",{children:t.isVerified.toString()})]})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"nav-info",children:[jsxRuntimeExports.jsxs("div",{className:"shortcuts",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Navigation Shortcuts"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("kbd",{title:"right",children:""})," on ",jsxRuntimeExports.jsx("strong",{children:"Pages"})," to skip timers"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("kbd",{title:"right",children:""})," on ",jsxRuntimeExports.jsx("strong",{children:"Popups"})," to answer first option"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("kbd",{title:"right",children:""})," on ",jsxRuntimeExports.jsx("strong",{children:"Test Questions"})," to answer first option"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("kbd",{title:"shift + 1",children:" + 1"})," to ",jsxRuntimeExports.jsx("strong",{children:"Autofill"})," Profiler form"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsxs("kbd",{title:"alt + click",children:[" + ",jsxRuntimeExports.jsx("i",{className:"fa fa-hand-pointer-o"})]})," ","on ",jsxRuntimeExports.jsx("strong",{children:"TOC Pages"})," to change progress"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("kbd",{title:"control + shift + H",children:" +  + H"})," to ",jsxRuntimeExports.jsx("strong",{children:"Change"})," API Servers"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("kbd",{title:"control + t",children:" + t"})," to ",jsxRuntimeExports.jsx("strong",{children:"toggle"})," among app type modes"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"api",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"API Server Hijack"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("strong",{children:d.title})}),d.pullRequestUrl?jsxRuntimeExports.jsx("li",{style:{whiteSpace:"nowrap"},children:jsxRuntimeExports.jsx("a",{target:"_BLANK",href:d.pullRequestUrl,rel:"noreferrer",children:d.pullRequestUrl})}):null,isHijackable()?jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/activity/hijack",children:"Change API Servers"})}):null]}),jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Fake purchase info"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"CC Number:"})," 4242424242424242"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Security Code:"})," 1234"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Expiration Date:"})," 01/01/2030"]})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"reviewer-tools",children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"Reviewer Tools"}),jsxRuntimeExports.jsxs("div",{children:["Send a summary of issues to your email address. Customers will never see the flagging system nor an option to send this summary of issues.",jsxRuntimeExports.jsxs("a",{href:"#no",onClick:E,children:["Email Issue Summary ",u?jsxRuntimeExports.jsx("i",{className:"fa fa-check"}):null]})]})]})]})]})})},AuthScreen=({children:t})=>{useComponentLog("AuthScreen");const e=utilities.getQueryParams(),n=e.b,s=window.aceRootScope?.domainConf,i=e.v==="RE"&&s.brandId==="ACE",a=e.v==="INS"&&s.brandId==="ACE",o=e.v==="MTG"&&s.brandId==="ACE",{backLink:l,disclaimerText:u,noAccountHref:c,noAccountText:d,logoUrl:p,schoolDisclaimer:m}=getBrandUIElements({queryBrandId:n,isRE:i,isIns:a,isMtg:o}),{brandId:g,Links:E}=s,[x,b]=reactExports.useState(!1);reactExports.useEffect(()=>{isHijackable()&&b(!0)},[]);function S(){const C=new URLSearchParams(location.search);["username","password","code","v"].forEach(I=>{C.delete(I)});const T=C.toString()?`?${C}`:"";return(l?.href??"")+T}return jsxRuntimeExports.jsxs("div",{className:"grit screen auth-screen",children:[jsxRuntimeExports.jsxs("div",{className:"screen-left",children:[jsxRuntimeExports.jsxs("header",{children:[S()?jsxRuntimeExports.jsx(AnchorLink,{href:S(),iconLeft:"arrow-backward",variant:"text",iconButton:!0,children:l?.text}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("form",{action:i?" https://www.aceableagent.com/support/":E.Help,target:"_blank",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"loginNavHelp",type:"submit",variant:"text",color:"secondary",children:jsxRuntimeExports.jsx("span",{className:"controls__web-nav-label",children:"GET HELP"})})})]}),jsxRuntimeExports.jsxs("main",{children:[t,!isHijackable()&&s.brandId!=="FLVS"?jsxRuntimeExports.jsxs("p",{className:"no-account-callout paragraph__condensed",children:["No account yet?"," ",jsxRuntimeExports.jsxs("a",{className:"link",href:c,children:[d,"."]})]}):null]}),jsxRuntimeExports.jsxs("footer",{children:[jsxRuntimeExports.jsx("span",{className:"metadata__x-small","data-test":"footer",children:u}),m?jsxRuntimeExports.jsx("p",{className:"metadata__x-small",children:m}):null,s.brandId==="AARP"&&jsxRuntimeExports.jsxs("p",{className:"metadata__x-small recaptcha-text",children:[jsxRuntimeExports.jsx("span",{children:"This site is protected by reCAPTCHA Enterprise"}),jsxRuntimeExports.jsxs("span",{children:["and the Google"," ",jsxRuntimeExports.jsx("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})," ","and"," ",jsxRuntimeExports.jsx("a",{href:"https://policies.google.com/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," ","apply."]})]}),x?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("span",{className:"metadata__x-small",children:[jsxRuntimeExports.jsx("a",{className:"link",href:"/activity/brand",children:jsxRuntimeExports.jsx("span",{className:"children",children:"Brand | "})}),jsxRuntimeExports.jsx("a",{className:"link",href:"/activity/hijack",children:jsxRuntimeExports.jsx("span",{className:"children",children:"API | "})}),jsxRuntimeExports.jsx("a",{className:"link",href:"/user/signup",children:jsxRuntimeExports.jsx("span",{className:"children",children:"Create Account | "})}),jsxRuntimeExports.jsx("a",{className:"link",href:"/user/parent-signup",children:jsxRuntimeExports.jsx("span",{className:"children",children:"Create Parent Account"})})]})}):jsxRuntimeExports.jsx("div",{})]})]}),jsxRuntimeExports.jsx("div",{className:"screen-right",children:jsxRuntimeExports.jsx("img",{className:`logo ${g}`,src:p,alt:l?.text??"Logo"})})]})},ForgotPassword=()=>{useComponentLog("ForgotPassword");const t=useNavigate(),e=useSelector(E=>E.ui.urlParams.username)||void 0,[n,s]=reactExports.useState(e??""),[i,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),[u,c]=reactExports.useState(!1),d=useDispatch(),p=new RECAPTCHA("password_reset"),m=async E=>{if(E.preventDefault(),!validateEmail(n)){a(!0);return}if(!p){c(!0);return}try{l(!1),d(genericAnalyticsAndIterableEvent("Password Reset Requested",{email:n}));const x=await p.getToken();await userRequestPassword(n,x),l(!0),s(""),a(!1)}catch(x){console.error(x),a(!1),l(!0),s("")}},g=()=>{if(n.length&&!validateEmail(n)){a(!0);return}a(!1)};return jsxRuntimeExports.jsxs(AuthScreen,{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:"Request Password Reset"}),u&&jsxRuntimeExports.jsx(Alert,{title:"Unable to Request Password Reset",description:"An error occurred. Please try again.",variant:"error"}),o?jsxRuntimeExports.jsx(Alert,{title:"Password reset request sent",variant:"success",description:"Check your email for instructions on completing your password reset. If you dont see an email, please check your spam folder, or make sure youre using the same email address that you used to create your account and try again."}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("form",{className:"auth-form",onSubmit:E=>{m(E)},children:[jsxRuntimeExports.jsx(Input,{required:!0,helperText:i?"This doesn't appear to be a valid email address.":"",error:i,onBlur:g,label:"Email Address",id:"email",name:"email","data-test":"email",onChange:E=>{s(E.target.value)},value:n,autocomplete:"email"}),jsxRuntimeExports.jsx("div",{className:"buttons-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"toResetPasswordPage",disabled:!n,stretch:!0,type:"submit",children:"Request Reset"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:()=>{d({type:SET_URL_PARAMS,payload:{params:{username:n}}}),t("/user/signin")},children:[jsxRuntimeExports.jsx("input",{type:"hidden",name:"username",value:n}),jsxRuntimeExports.jsx(Button$2,{type:"submit",stretch:!0,variant:"text",children:"Back to Sign In"})]})]})},ResetPassword=()=>{useComponentLog("ResetPassword");const t=useNavigate(),e=utilities.getQueryParams(),[n,s]=reactExports.useState(""),[i,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),[u,c]=reactExports.useState(!1),[d,p]=reactExports.useState(!1),m=useSelector(T=>T.ui),{brand:g}=m||{},E=useDispatch(),x=!!parseInt(e.isnew,10),b=new RECAPTCHA("password_reset");reactExports.useEffect(()=>{if(!e.username||!e.code){E({type:REDIRECT_TO_URL,payload:{url:"user.signin"}});return}UserObj.getCurrent()&&UserObj.signOut()},[]);const S=async T=>{if(T.preventDefault(),l(!1),a(!1),c(!0),p(!1),!validatePassword(n,g).valid){a(!0);return}if(!b){p(!0);return}try{const I=await b.getToken(),D=await resetPassword({username:e.username,code:e.code,password:n,firstName:void 0,reCaptchaToken:I});E(genericAnalyticsAndIterableEvent("Password Reset",{user_id:D._id,email:D.username})),window.location.href=`/user/signin?username=${encodeURIComponent(e.username)}&isnew=${x}&resetSuccess=true`}catch(I){console.error(I),s(""),l(!0)}},C=()=>{if(n.length&&!validatePassword(n,g).valid){a(!0);return}a(!1)};return jsxRuntimeExports.jsxs(AuthScreen,{children:[jsxRuntimeExports.jsx("h1",{"data-test":"passwordPageTitle",className:"headings__h1",children:"Reset Password"}),d&&jsxRuntimeExports.jsx(Alert,{title:"Unable to Reset Password",description:"An error occurred. Please try again.",variant:"error"}),e.username?jsxRuntimeExports.jsx("p",{"data-test":"userMail",className:"fields__label auth-email-label",children:decodeURIComponent(e.username)}):jsxRuntimeExports.jsx("div",{}),o?jsxRuntimeExports.jsx(Alert,{title:"Reset link expired",description:`Your password request has expired. Please perform a <a class="link" href='/user/password?username=${encodeURIComponent(e.username)}'>new password request</a>.`,variant:"error"}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("form",{className:"auth-form",onSubmit:S,children:[jsxRuntimeExports.jsx(Input,{required:!0,id:"password",name:"password","data-test":"password",label:"New Password",disabled:u,helperText:i?validatePassword(n,g).message:"",error:i,onBlur:C,onChange:T=>{s(T.target.value)},type:"password",value:n}),jsxRuntimeExports.jsx("div",{className:"buttons-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"resetPasswordSubmit",disabled:!n||!validatePassword(n,g).valid||u,stretch:!0,type:"submit",children:"Reset Password"})})]}),jsxRuntimeExports.jsx("form",{onSubmit:()=>{E({type:SET_URL_PARAMS,payload:{params:{username:e.username}}}),t("/user/signin")},children:jsxRuntimeExports.jsx(Button$2,{type:"submit",stretch:!0,variant:"text",children:"Back to Sign In"})})]})};function isLocalTestServer(t=""){return t.includes("localhost")||t.includes("herokuapp")||t.includes("xgritqa")||t.includes("xgritapi")}const DomainLib={isLocalTestServer};function userSignin({username:t,password:e,reCaptchaToken:n}){return call("user/signin","POST",{username:t,password:e,reCaptchaToken:n})}const useUserSignin=()=>useMutation({mutationFn:({username:t,password:e,reCaptchaToken:n})=>userSignin({username:t,password:e,reCaptchaToken:n})}),Signin=()=>{useComponentLog("SigninScreen");const t=useUserSignin(),e=useSelector(selectUserState$1),n=new RECAPTCHA("signin"),s=utilities.getQueryParams(),i=!!parseInt(s.isnew,10),{aceRootScope:a}=window,{domainConf:o}=a,l=s.v==="RE"&&o.brandId==="ACE",{backLink:u,noAccountText:c}=getBrandUIElements({isRE:l}),d=useSelector(ne=>ne.ui.urlParams.username)||void 0,[p,m]=reactExports.useState(d??""),[g,E]=reactExports.useState(""),[x,b]=reactExports.useState(!1),[S,C]=reactExports.useState(!1),[T,I]=reactExports.useState(!1),[D,P]=reactExports.useState(!1),O=useNavigate(),B=useDispatch(),F=async ne=>{if(await ExperimentLib.fetch(ne),ne.defCourseId)await CourseObj.get(ne.defCourseId);else throw await UserObj.signOut(),new Error("NoDefaultCourse");if(await ExperimentLib.fetch(ne),B(genericAnalyticsAndIterableEvent("Signed In",{})),B({type:USER_LOGIN_SUCCESS,payload:{user:ne}}),s.rename){B({type:REDIRECT_TO_URL,payload:{url:s.rename,params:s.reparams?JSON.parse(s.reparams):void 0}});return}B({type:REDIRECT_TO_URL,payload:{url:"courseswitch.view"}})},H=async ne=>{ne.preventDefault();try{P(!0);const re=await n.getToken(),se=await t.mutateAsync({username:p,password:g,reCaptchaToken:re});await UserObj.setupUser({user:se}),await F(se)}catch(re){re.message==="NoDefaultCourse"?(x&&b(!1),C(!0)):(S&&C(!1),b(!0)),console.error("An error occurred during sign-in")}finally{P(!1)}},Q=()=>{UserObj.sync().then(ne=>F(ne)).catch(ne=>{console.error("Failed to sync user",ne),B({type:clearUser.type})}).finally(()=>{const ne=location.hostname;api.remove("xgritsession",{path:"/",domain:ne})})},Z=()=>{if(p.length&&!validateEmail(p)){I(!0);return}I(!1)};return reactExports.useEffect(()=>{const ne=api.get("xgritsession"),re=!lodashExports.isEmpty(e.sessionToken),se=location.hostname;B({type:SCREEN_VIEW,payload:{screenName:"Sign In"}}),ne?(B(updateUser({sessionToken:ne})),re&&UserObj.signOut(),Q()):re&&(o.brandId==="FLVS"&&!DomainLib.isLocalTestServer(se)?UserObj.signOut():(B({type:NAVIGATE_STATE_CHANGE,payload:{currentState:"dash.index"}}),O("/dash/index")))},[]),jsxRuntimeExports.jsxs(AuthScreen,{children:[o.brandId==="FLVS"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"headings__h2",children:"We see you are ready to hit the road and your course is almost ready!"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"It takes a few hours to build your course content, set up your gradebook, and get your connection to the FLHSMV ready."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"paragraph__regular",children:"Come back soon to start learning!"})]}):jsxRuntimeExports.jsx("h1",{className:"headings__h1","data-test":"pageTitle",children:"Sign In"}),S?jsxRuntimeExports.jsx(Alert,{title:"A course is required before logging in. ",messageLinkList:[{key:"purchase",title:c??"Find an Aceable course",link:u?.href??"https://aceable.com",type:"URL"}],variant:"warning"}):jsxRuntimeExports.jsx("div",{}),x?jsxRuntimeExports.jsx(Alert,{title:`Unable to Sign in to your ${o.TitleShort} account.`,description:"Please check that the information you provided is correct, and try again.",variant:"error"}):jsxRuntimeExports.jsx("div",{}),s.resetSuccess?jsxRuntimeExports.jsx(Alert,{title:`Password ${i?"created":"reset"}`,description:`Password successfully ${i?"created":"reset"}. You can now sign in with your new password.`,variant:"success"}):jsxRuntimeExports.jsx("div",{}),!isHijackable()&&o.brandId==="FLVS"?jsxRuntimeExports.jsx("div",{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("form",{className:"auth-form",name:"loginForm","data-test":"loginForm",onSubmit:H,children:[jsxRuntimeExports.jsx(Input,{required:!0,helperText:T?"This doesn't appear to be a valid email address.":"",error:T,label:"Email Address",id:"email",name:"email","data-test":"email",onBlur:Z,onChange:ne=>{m(ne.target.value)},type:"email",value:p,autocomplete:"email"}),jsxRuntimeExports.jsx(Input,{required:!0,label:"Password",id:"password",name:"password","data-test":"password",onChange:ne=>{E(ne.target.value)},type:"password",value:g,autocomplete:"current-password"}),jsxRuntimeExports.jsx("div",{className:"buttons-wrapper",children:jsxRuntimeExports.jsx(Button$2,{disabled:!p||T||!g||t.isPending||D,stretch:!0,type:"submit","data-test":"submit",children:t.isPending?"Signing In...":"Sign In"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:()=>{B({type:SET_URL_PARAMS,payload:{params:{username:p}}}),O("/user/password")},children:[jsxRuntimeExports.jsx("input",{type:"hidden",name:"username",value:p}),jsxRuntimeExports.jsx(Button$2,{type:"submit",stretch:!0,variant:"text","data-test":"resetPasswordConfirm",children:"Forgot Password?"})]})]})]})},SignOut=()=>{const{aceRootScope:t,location:e}=window,n=useSelector(selectUIUrlParams),s=useDispatch(),i=n.redirect??"user.signin",a=t.domainConf.brandId==="FLVS",o=api.get("theme"),l="xgritsession";let u=e.hostname;return DomainLib.isLocalTestServer(u)||(u=t.domainConf.documentDomain??e.hostname),reactExports.useEffect(()=>{if(s(genericAnalyticsAndIterableEvent("Signed Out",{})),resetRecordOfPopups(),UserObj.signOut(),t.notFirstTimeSeeingCourseSwitcher=!1,api.remove(l,{path:"/",domain:u}),clearEverything(),s(clearAudioState()),a){const c=o??"high-contrast";api.set("theme",c),window.open("https://www.flvs.net/","_self","noopener")}else s({type:REDIRECT_TO_URL,payload:{url:i}})},[s,a,i]),jsxRuntimeExports.jsx(LoadingSpinner$1,{isLoading:!0,centered:!0})},Signup=()=>{useComponentLog("SignupScreen");const t=useDispatch(),e=useSelector(Ue=>Ue.ui),{brand:n}=e||{},{aceRootScope:s,location:i}=window,a=new RECAPTCHA("signup"),{domainConf:o}=s,l=i.pathname==="/user/parent-signup",u=utilities.getQueryParams();useHotkeys([{combo:"shift+!",description:"autoFillForm",callback:()=>{fe()}}]);const[c,d]=reactExports.useState(!0),[p,m]=reactExports.useState(""),[g,E]=reactExports.useState(""),[x,b]=reactExports.useState(!1),[S,C]=reactExports.useState(!1),[T,I]=reactExports.useState(""),[D,P]=reactExports.useState(!1),[O,B]=reactExports.useState(!1),[F,H]=reactExports.useState(""),[Q,Z]=reactExports.useState(""),[ne,re]=reactExports.useState(""),[se,G]=reactExports.useState(!1),[K,M]=reactExports.useState(),[W,ee]=reactExports.useState("student"),[z,ae]=reactExports.useState(),[ce,he]=reactExports.useState(),fe=()=>{if(!isHijackable())return;const Ue=z?.find(Pe=>Pe.courseId===K||Pe._id===K);if(Ue&&Ue._id!=="0"){const Pe={key:Ue.key};F&&(Pe.firstName=F,T||I(`${F.slice(0,3).toLowerCase()}ita123`)),m(s.getFakeUsername(Pe))}else if(!Ue){const Pe=z?.find(Qe=>Qe.key==="TX_PTDE")??z?.find(Qe=>Qe.key==="TX_RE_PL_P1");if(Pe){const Je=recallDebugInfo().firstName||F||"sample";H(Je),I(`${Je.slice(0,3).toLowerCase()}ita123`),M(Pe.courseId||Pe._id),m(s.getFakeUsername({key:Pe._id,firstName:Je}))}}},Ce=async Ue=>{await ExperimentLib.fetch(Ue);const Pe=Ue?.defCourseId?await CourseObj.get(Ue.defCourseId):null;Ue&&Pe&&(t({type:IDENTIFY_USER,payload:{user:Ue}}),t(genericAnalyticsAndIterableEvent("Signed Up",{parent_email:l?p:"",first_name:Ue.firstName??"",last_name:Ue.lastName??"",phone:Ue.phone??""})),memorizeDebugInfo({firstName:F,username:p}),t({type:REDIRECT_TO_URL,payload:{url:u.redirect||"dash.index"}}))},Me=async Ue=>{Ue.preventDefault();try{const Pe=await a.getToken();let Qe=null;l?(Qe=await userParentSignUp(p,T,F,Q,ne,g,o.brandId,Pe),Qe&&(Qe.nickname=getDisplayName$1(Qe),UserObj.setCurrentWithProgress(Qe,!0),VerifyObj.saveVerification({verify:{note:"free pass to avoid signin verify"},type:"signin"}))):Qe=await UserObj.signUp(p,T,F,null,W,K,Pe),await Ce(Qe)}catch(Pe){console.error(Pe),s.isProcessing=!1,B(!0)}},Ye=()=>{if(!ne||!/^\(\d{3}\)\s\d{3}-\d{4}$/.test(ne)){G(!0);return}G(!1)},We=Ue=>{if(Ue&&!validateEmail(g)){C(!0);return}if(!validateEmail(p)){b(!0);return}b(!1)},Be=()=>{if(!validatePassword(T,n).valid){P(!0);return}P(!1)},rt=Ue=>z?.find(Qe=>Qe.courseId===Ue)?.is.parentTool,tt=()=>l?!p||!validateEmail(p)||!g||!validateEmail(g)||!F||!Q||!ne||se||!T||!validatePassword(T,n).valid:!p||!validateEmail(p)||!F||!K||!T||!validatePassword(T,n).valid;return reactExports.useEffect(()=>{(async()=>{try{const Qe=(await call("product-course","GET",{productIdList:void 0,productTypeList:void 0,appTypeList:o.AppList})).filter(nt=>nt.type==="COURSE");ae(Qe);const Je=Qe.filter(nt=>nt.content.title).map(nt=>({value:nt.courseId,key:nt.content.title}));window.aceConstants?.DOMAINCONF.isDev&&Je.sort((nt,ft)=>{const At=nt.key.toUpperCase(),ot=ft.key.toUpperCase();return At<ot?-1:At>ot?1:0}),he(Je)}catch(Pe){console.error(Pe)}})()},[]),reactExports.useEffect(()=>{const Ue=window.location.hostname==="localhost"||window.location.hostname.includes("ace-web-stg");o.brandId!=="ACE"&&!Ue&&t({type:REDIRECT_TO_URL,payload:{url:"user.signin"}})},[]),reactExports.useEffect(()=>{d(tt())},[p,g,F,Q,ne,se,T,K,l]),jsxRuntimeExports.jsxs(AuthScreen,{children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:l?"Parent Sign Up":"Sign Up"}),O?jsxRuntimeExports.jsx(Alert,{title:"This account already exists",variant:"error",description:"Try another email address or sign in."}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("form",{noValidate:!0,className:"auth-form",onSubmit:Me,children:[l&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"name-inputs-container",children:[jsxRuntimeExports.jsx(Input,{label:"First Name",id:"firstName",name:"firstName",onChange:Ue=>{H(Ue.target.value)},value:F}),jsxRuntimeExports.jsx(Input,{label:"Last Name",id:"lastName",name:"lastName",onChange:Ue=>{Z(Ue.target.value)},value:Q})]}),jsxRuntimeExports.jsx(Input,{label:"Phone Number",type:"tel",id:"phoneNumber",name:"phoneNumber",onChange:Ue=>{re(Ue.target.value)},value:ne,onBlur:Ye,error:se,helperText:se?"Please enter a valid phone number.":"",required:!0,mask:["(",/\d/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]})]}),jsxRuntimeExports.jsx(Input,{required:!0,helperText:x?"This doesn't appear to be a valid email address.":"",error:x,label:"Email Address",id:"email",name:"email","data-test":"emailSignup",onBlur:()=>{We()},onChange:Ue=>{m(Ue.target.value)},value:p,autocomplete:"email"}),jsxRuntimeExports.jsx(Input,{required:!0,helperText:D?validatePassword(T,n).message:"",error:D,onBlur:Be,label:"Password",id:"password",name:"password",type:"password","data-test":"passwordSignup",onChange:Ue=>{I(Ue.target.value)},value:T,autocomplete:"new-password"}),l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"headings__h3 student-email-label",children:"Confirm Student Email"}),jsxRuntimeExports.jsx(Input,{required:!0,helperText:S?"This doesn't appear to be a valid email address.":"Must match email associated with your child's account.",error:S,label:"Student Email Address",id:"studentEmail",name:"studentEmail",onBlur:()=>{We(!0)},onChange:Ue=>{E(Ue.target.value)},value:g})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Input,{label:"First Name",id:"firstName",name:"firstName","data-test":"firstNameSignup",onChange:Ue=>{H(Ue.target.value)},value:F}),jsxRuntimeExports.jsx(Select,{required:!0,defaultOption:"Choose course...",id:"course",name:"course",label:"Course","data-test":"courseSelect",onChange:Ue=>{M(Ue.target.value)},options:ce??[{key:"",value:""}],value:K??""}),K&&rt(K)?jsxRuntimeExports.jsx(Select,{id:"accountType",name:"accountType",label:"Account Type",onChange:Ue=>{ee(Ue.target.value)},options:[{key:"Student",value:"student"},{key:"Parent",value:"parent"}],value:W}):jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsx("div",{className:"buttons-wrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"createAccount",disabled:c,stretch:!0,type:"submit",children:"Create Account"})})]}),jsxRuntimeExports.jsxs("form",{action:"/user/signin",children:[jsxRuntimeExports.jsx("input",{type:"hidden",name:"username",value:p}),jsxRuntimeExports.jsx(Button$2,{type:"submit",stretch:!0,variant:"text",children:"Sign In"})]})]})},SsoSync=()=>{const[t]=useSearchParams(),e=t.get("isCx")??"0",n=t.get("isTaxonomy")??!0,s=t.get("redirect")??"dash.index",i=t.get("tempSsoToken")??"";return reactExports.useEffect(()=>{syncInit({sessionToken:i,isCx:!!Number(e),isTaxonomy:!!n,redirect:s,fromSso:!0}).catch(()=>{console.error("Single sign-on failed")})},[]),jsxRuntimeExports.jsx(LoadingSpinner$1,{centered:!0,isLoading:!0})},Sync=()=>{const[t]=useSearchParams(),e=t.get("isCx")??"0",n=t.get("isTaxonomy")??!0,s=t.get("redirect")??"dash.index",i=t.get("sessionToken")??"";return reactExports.useEffect(()=>{syncInit({sessionToken:i,isCx:!!Number(e),isTaxonomy:!!n,redirect:s,fromSso:!1}).catch(()=>{console.error("Single sign-on failed")})},[]),jsxRuntimeExports.jsx(LoadingSpinner$1,{})},UserRoutes=[{path:"user",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"/user/signin",element:jsxRuntimeExports.jsx(Signin,{})},{path:"signup",element:jsxRuntimeExports.jsx(Signup,{})},{path:"parent-signup",element:jsxRuntimeExports.jsx(Signup,{})},{path:"password",element:jsxRuntimeExports.jsx(ForgotPassword,{})},{path:"reset",element:jsxRuntimeExports.jsx(ResetPassword,{})},{path:"change-password",element:jsxRuntimeExports.jsx(ChangePassword,{})},{path:"sync",element:jsxRuntimeExports.jsx(Sync,{})},{path:"sso",element:jsxRuntimeExports.jsx(SsoSync,{})},{path:"signout",element:jsxRuntimeExports.jsx(SignOut,{})},{path:"debug",element:jsxRuntimeExports.jsx(Debug,{})}]}],VerifyAffidavit=()=>{const t=useSelector(selectUserState),e=useSelector(selectUIBrandState),{theme:n}=useTheme(),s=useSelector(selectCourseState),i=useDispatch(),a=["DEC.CO.TDE","IDS.CO.TDE","DEC.CO.TDE-V2"],o=["DEC.CO.TDE","DEC.CO.TDE-V2","IDS.CO.TDE","OH.DE","OH.DE-V","DEC.OH.ADE","DEC.OH.TDE","DEC.OH.TDE-V2","IDS.VA.TDE","IDS.NV.DIP.VID.DPR","IDS.NV.DIP.DPR","IDS.NV.DIP.CPR","IDS.NV.DIP.VID.CPR","NV.DE","DEC.NV.TDE","IDS.NV.TDE","OK.PTDE","OK.PTDE-V","DEC.OK.PTDE-V2","DEC.OK.PTDE","IDS.OK.PTDE"].includes(s.key??""),l=getStyles$1("pageBG",e,n,["Default"],"background"),[u,c]=reactExports.useState({title:"",intro:"",stepList:[],outro:"",verificationMessage:""});return reactExports.useEffect(()=>{!!Object.keys(t).length&&!!Object.keys(s).length&&o&&verifyAffidavit(encodeURIComponent(t.username??""),encodeURIComponent(s.key??"")).then(p=>{c(p)}).catch(p=>{console.error("Error verifying affidavit",p)})},[t,s]),jsxRuntimeExports.jsx("div",{className:"gritVerifyAffidavit gritContentWrapper",style:l,children:Object.keys(u).length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{"data-test":"affidavidTitle",className:"gritParagraph earnest",children:u.title}),jsxRuntimeExports.jsx("p",{"data-test":"affidavidIntro",className:"gritParagraph",children:u.intro}),!a.includes(s.key??"")&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"gritHeading-3",children:"Here's what to do"}),jsxRuntimeExports.jsx("ol",{"data-test":"affidavidInstructions",className:"gritOrderedList",style:{listStyleType:"none"},children:u.stepList.map((d,p)=>jsxRuntimeExports.jsx("li",{className:"gritListItem",children:d},p))}),jsxRuntimeExports.jsx("p",{"data-test":"affidavitOutro",className:"gritParagraph",children:u.outro})]}),jsxRuntimeExports.jsx("div",{className:"buttonWrapper",children:jsxRuntimeExports.jsx(Button$2,{"data-test":"understandButton",onClick:()=>i({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}),children:"I Understand"})})]}):null})},CONTENT={knowledgeSecurity:{class:"knowledge-security",header:"Knowledge Security",content:["To advance in the course, you will answer security questions based off your Social Security Number & profile information. If your profile information is correct, please enter the last 4 digits of your SSN below and finish setup."],list:["Throughout the course, you'll randomly be asked to verify.","Each time, you'll have 60 seconds to answer the question.","Think hard, it may ask you about people and places from long ago."]},profileVerification:{class:"profile-verification",header:"Profile Verification",content:["Please review your profile information to ensure its accuracy. After verifying your profile info, select <b>Finish Setup</b>.","Please note, <b>Finish Setup</b> <strong>locks your profile info</strong>. Any later changes to your profile info can only be made by contacting the Customer Experience team."],list:null},profileSecurity:{class:"profile-security",header:"Profile Security",content:["By state law, we are required to ask you security questions randomly throughout the course. These questions will be built off of your user profile information, please verify that it is correct."],list:["Throughout the course, you'll randomly be asked to verify.","Each time, you'll have 60 seconds to answer the question.","Your questions will always be based on your user profile information.","Once enrolled, your user profile will be locked to prevent any changes."]}},VerifyIndex=()=>{useComponentLog("VerifyScreen");const t=useDispatch(),e=useSelector(selectCourseState),[n,s]=reactExports.useState(""),i=/(?!0{5})^\d{5}$/,a=VerifyObj.type,{aceRootScope:o}=window||{},{courseCurrent:l,progressCurrent:u}=o||{},c=l??e,d=c.verifyType===a.knowledge,p=u.appType==="RE"&&c.verifyType===a.profile,m=u.appType!=="RE"&&c.verifyType===a.profile,g=()=>d?"knowledgeSecurity":p?"profileVerification":"profileSecurity",E=async x=>{try{const b=await progressVerifyRegister(u._id,x,c.firstName,c.lastName,c.middleInitial,c.birthDate,c.addressStreet,c.addressApt,c.addressCity,c.addressState,c.addressPostal,c.phone);b&&(t(updateProgress(b)),b.verificationId&&!b.pendingVerifyId?t({type:REDIRECT_TO_URL,payload:{url:"dash.index"}}):b.isAffidavitRequired?t({type:REDIRECT_TO_URL,payload:{url:"verify.affidavit"}}):t({type:SHOW_MODAL,payload:{modal:{message:"The information you provided can not be verified. If you have moved recently, try putting in your previous address. You will have an opportunity later to set your shipping address. Please try again or contact Help Center.",title:"Unverified",buttonText:"Review Profile",secondaryButtonText:"Contact Help",confirmDispatch:[{type:REDIRECT_TO_URL,payload:{url:"profiler.formal-standard",params:{callingFromPosition:"SIDEBAR",layoutStyle:"standard",stateId:"PROFILE__STUDENT_INFO",blockerId:"VARID_SIDEBAR"}}}],dismissDispatch:[{type:REDIRECT_TO_URL,payload:{url:"help"}}]}}}))}catch(b){t({type:SHOW_MODAL,payload:{modal:{message:b.message,title:"Oops!",buttonText:"Continue"}}})}};return reactExports.useEffect(()=>{!d&&!p&&!m&&t({type:REDIRECT_TO_URL,payload:{url:"dash.index"}})},[]),reactExports.useEffect(()=>{(async()=>{const b=await getBlockersNoFX(u?._id,"COURSE");if(lodashExports.get(b,"blockingActionList",[]).length>0&&!isRouteNext("verify.index"))return redirectToBlockerIfAny(u._id,void 0,void 0,"COURSE")})()},[]),jsxRuntimeExports.jsx("div",{className:"grit screen verify-index",children:jsxRuntimeExports.jsx("div",{className:"container",children:CONTENT[g()]&&jsxRuntimeExports.jsxs("div",{className:CONTENT[g()].class,children:[jsxRuntimeExports.jsx("h1",{className:"headings__h1",children:CONTENT[g()].header}),CONTENT[g()].content.map((x,b)=>jsxRuntimeExports.jsx("p",{className:"paragraph__regular",dangerouslySetInnerHTML:{__html:x}},b)),CONTENT[g()].list&&jsxRuntimeExports.jsx("ul",{className:"paragraph__regular",children:CONTENT[g()].list?.map((x,b)=>jsxRuntimeExports.jsx("li",{className:"paragraph__regular",children:x},b))}),jsxRuntimeExports.jsxs("form",{autoComplete:"off",name:"verifyForm",noValidate:!0,children:[d&&jsxRuntimeExports.jsx("div",{className:"input-wrapper",children:jsxRuntimeExports.jsx(Input,{type:"text",id:"ssn",name:"ssn",placeholder:"Last 4 Digits of SSN",label:"Last 4 Digits of SSN",onChange:x=>{s(x.target.value)},required:!0,value:n,error:i?!n.match(i):n==="",success:i?!!n.match(i):!1,mask:i})}),jsxRuntimeExports.jsxs("div",{className:"button-wrapper",children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>E(n),children:"Finish Setup"}),jsxRuntimeExports.jsx(Button$2,{onClick:x=>{x.preventDefault(),t({type:REDIRECT_TO_URL,payload:{url:"profiler.formal-standard",params:{callingFromPosition:"SIDEBAR",layoutStyle:"standard",stateId:"PROFILE__STUDENT_INFO",blockerId:"VARID_SIDEBAR"}}})},variant:"text",children:"Review Profile"})]})]})]})})})},VerifyRoutes=[{path:"/verify",element:jsxRuntimeExports.jsx(Outlet,{}),children:[{path:"index",element:jsxRuntimeExports.jsx(VerifyIndex,{})},{path:"affidavit",element:jsxRuntimeExports.jsx(VerifyAffidavit,{})}]}],allRoutes=[...AffiliatesRoutes,...ActivityRoutes,...AddonRoutes,...BookmarkRoutes,...CaseStudyRoutes,...CourseflowRoutes,...DashRoutes,...ExtrasRoutes,...FlashCardsRoute,...FoafRoutes,...ManagerRoutes,...ParentDashRoutes,...ProctorRoutes,...ProfilerRoutes,...PurchaseRoutes,...RemoteTestRoutes,...RenewalRoutes,...RewardsRoutes,...ResourcesRoutes,...SwitcherCoursesRoutes,...TeacherRoutes,...TestListRoutes,...TestRoutes,...UserRoutes,...VerifyRoutes,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/dash/index",replace:!0})}],NavigateFunctionComponent=()=>{const t=useNavigate();return reactExports.useEffect(()=>{navigationRef.current=t},[t]),null},stateToPath={"activity.upgrade":"/activity/upgrade","activity.enroll":"/activity/enroll","activity.progress":"/activity/progress","activity.hijack":"/activity/hijack","activity.brand":"/activity/brand","activity.theme":"/activity/theme",addons:"/addons","audio-lessons":"/resource/audio-lessons","bookmark.view":"/bookmarks","casestudy.load":"/casestudy/load","courseflow.index":"/courseflow/page","courseflow.question":"/courseflow/question","courseflow.complete":"/courseflow/complete","dash.index":"/dash/index","dashboard.parent":"/dashboard/parent","360Video.view":"/videos","extras.videos":"/videos",flashcards:"/flashcards","flashcards.view":"/resource/flashcards","foaf.ready":"/foaf/ready","foaf.categorize":"/foaf/categorize","foaf.results":"/foaf/results","glossary.view":"/resource/glossary",manager:"/manager",practicetests:"/resource/practicetests","proctor.review-plus":"/proctor/review-plus","proctor.reset":"/proctor/reset","proctor.signin":"/proctor/signin","profiler.informational":"/profiler/informational","profiler.formal":"/profiler/formal","profiler.formal-standard":"/profiler/page-like","profiler.driving-school":"/profiler/driving-school","profiler.verifyPassword":"/profiler/verify-password","profiler.manageSubscription":"/profiler/manage-subscription",purchase:"/purchase","purchase.payment":"/purchase/payment","purchase.payment.flow":"/purchase/payment","purchase.confirmation":"/purchase/confirmation","purchase.driverRecord":"/purchase/driver-record","remotetest.ready":"/remotetest/ready","remotetest.purchase":"/remotetest/purchase","remotetest.contract":"/remotetest/contract","remotetest.test":"/remotetest/test","remotetest.continue":"/remotetest/continue","remotetest.summary":"/remotetest/summary","rewards.share":"/rewards/share","courseswitch.view":"/courseswitch/view",teacher:"/teacher","teacher.log":"/teacher/log","teacher.tests":"/teacher/tests","acetest.ready":"/acetest/ready","acetest.test":"/acetest/test","acetest.reviewTest":"/acetest/review","testList.view":"/test-list","user.signin":"/user/signin","user.signup":"/user/signup","user.parentSignup":"/user/parent-signup","user.password":"/user/password","user.reset":"/user/reset","user.changePassword":"/user/change-password","user.sync":"/user/sync","user.sso":"/user/sso","user.signout":"/user/signout","user.debug":"/user/debug","verify.index":"/verify/index","verify.affidavit":"/verify/affidavit","webinar.view":"/resource/webinar","tutoring.view":"/resource/tutoring","crashcourse.view":"/resource/crashcourses","renew.view":"/renewals","btw.view":"/affiliates/btw","otozen.view":"/affiliates/otozen","zebra.view":"/affiliates/zebra","testprep.view":"/affiliates/testprep"},stateToTitle={activity:"Activity",addons:"Addons",bookmark:"Bookmarks",casestudy:"CaseStudy",courseflow:"Course",dash:"Dashboard",dashboard:"Parent Dashboard",extras:"Extra resources for your learning",glossary:"Glossary",manager:"Manager",practicetests:"Practice Tests",proctor:"Proctor",profiler:"Profiler",remoteTest:"Remote Test",rewards:"Rewards",courseswitch:"Course Switch",teacher:"Teacher",acetest:"Test",testList:"Test List",user:"User",verify:"Security"};window.analytics=AnalyticsBrowser.load({writeKey:window.aceConstants.TOKENS.segment,cdnURL:"https://sgprox.xgritapi.com"},{integrations:{"Segment.io":{apiHost:"sgapiprox.xgritapi.com/v1"}}});ExperimentLib.initialize(window.analytics,window.aceConstants.TOKENS.amplitude);const Layout=()=>{const t=useLocation(),e=useParams(),n=useSelector(d=>d.ui),s=useSelector(d=>d.user);useAppcuesTrack(),useSessionSync(),reactExports.useEffect(()=>{window.analytics.track("Site Loaded"),ExperimentLib.fetch(s).catch(d=>{console.error("Error fetching experiments",d)})},[]);const{activeState:i,urlParams:a,previousState:o}=n,l=i.split(".")[0]??i,u=stateToTitle[l]??"Welcome",c=`${window.aceRootScope.domainConf.TitleBrowserTab} | ${u}`;return useDocumentTitle(c),reactExports.useEffect(()=>{const d=Object.keys(stateToPath).find(g=>t.pathname.includes(stateToPath[g]));d&&(store.dispatch({type:SET_ACTIVE_STATE,payload:{state:d}}),store.dispatch({type:SET_URL_PARAMS,payload:{params:e}}));const p=new URLSearchParams(t.search),m=p?`?${p.toString()}`:"";legacyAngularUtils.onAngularStateChangeStart(d??i,a,m),legacyAngularUtils.onAngularStateChangeSuccess(d??i,a,o),t.pathname==="/"&&navigate(`/dash/index${m}`)},[t]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[window.aceRootScope.isTaxonomy&&jsxRuntimeExports.jsx(SiteHeader,{}),jsxRuntimeExports.jsxs("section",{id:"wrapper",className:"parappa",children:[!!Number(window.aceRootScope.isCx)&&jsxRuntimeExports.jsxs("section",{id:"cx",className:"cxoverride",children:[" ",s.username," "]}),jsxRuntimeExports.jsx("section",{className:"parappa__content",children:jsxRuntimeExports.jsx("main",{id:"content",role:"main",className:"animate-app",children:jsxRuntimeExports.jsx(Outlet,{})})})]},t.pathname+t.search),jsxRuntimeExports.jsx(ModalManager,{}),jsxRuntimeExports.jsx(VerificationManager,{}),jsxRuntimeExports.jsx(NavigateFunctionComponent,{})]})},router=createBrowserRouter([{id:"root",path:"/",Component:Layout,loader:()=>configureData(),children:[...allRoutes]}]),App=()=>jsxRuntimeExports.jsx(RouterProvider,{router}),queryClient=new QueryClient;clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Provider_default,{store,children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsxs(ThemeProvider,{storageKey:"theme",children:[jsxRuntimeExports.jsx(App,{}),jsxRuntimeExports.jsx(ReactQueryDevtools2,{initialIsOpen:!1,position:"bottom"})]})})}));export{ContextCancelation as C,PriorityQueue as P,__awaiter$2 as _,__generator$2 as a,__spreadArray$3 as b,__assign$5 as c,applyDestinationMiddleware as d,distExports as e,isServer$1 as f,getNextIntegrationsURL as g,isPlainObject$4 as h,isOffline as i,createDeferred$1 as j,PersistedPriorityQueue as k,loadScript$1 as l,mergedOptions as m,attempt as n,Context$1 as o,pWhile as p,isOnline as q,recordIntegrationMetric as r,__vitePreload as s,pTimeout as t,unloadScript as u,gracefulDecodeURIComponent as v,getDefaultExportFromCjs as w};
//# sourceMappingURL=index-B13nooB6.js.map
